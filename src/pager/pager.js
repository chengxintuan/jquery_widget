/*
 * ADOBE CONFIDENTIAL
 *
 * Copyright 2015 Adobe Systems Incorporated
 * All Rights Reserved.
 *
 * NOTICE:  All information contained herein is, and remains
 * the property of Adobe Systems Incorporated and its suppliers,
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to Adobe Systems Incorporated and its
 * suppliers and may be covered by U.S. and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from Adobe Systems Incorporated.
 *
 */
(function(window, undefined) {

    window.Granite = window.Granite || {};
    window.Granite.HTTP = window.Granite.HTTP || {};

    var contextPath = null;

    function detectContextPath() {
        var SCRIPT_URL_REGEXP = /^(?:http|https):\/\/[^\/]+(\/.*)\/(?:etc(\/.*)*\/clientlibs|libs(\/.*)*\/clientlibs|apps(\/.*)*\/clientlibs).*\.js(\?.*)?$/;
        try {
            if (window.CQURLInfo) {
                contextPath = CQURLInfo.contextPath || "";
            } else {
                var scripts = document.getElementsByTagName("script");
                for (var i = 0; i < scripts.length; i++) {
                    // in IE the first script is not the expected widgets js: loop
                    // until it is found
                    var result = SCRIPT_URL_REGEXP.exec(scripts[i].src);
                    if (result) {
                        contextPath = result[1];
                        return;
                    }
                }
                contextPath = "";
            }
        } catch(e) {}
    }

    window.Granite.HTTP.externalize = window.Granite.HTTP.externalize ||
        function(url) {
            if (contextPath === null) {
                detectContextPath();
            }

            try {
                if (url.indexOf("/") == 0 && contextPath && url.indexOf(contextPath + "/") != 0) {
                    url = contextPath + url;
                }
            } catch(e) {}

            return url;
        };

})(this);

/*
 * ADOBE CONFIDENTIAL
 *
 * Copyright 2015 Adobe Systems Incorporated
 * All Rights Reserved.
 *
 * NOTICE:  All information contained herein is, and remains
 * the property of Adobe Systems Incorporated and its suppliers,
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to Adobe Systems Incorporated and its
 * suppliers and may be covered by U.S. and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from Adobe Systems Incorporated.
 *
 */
(function(window, undefined) {

    window.Granite = window.Granite || {};

    // avoid double initialization
    if (window.Granite.csrf) {
        return;
    }

    window.Granite.csrf = {
        initialised: false
    };

    /**
     * small promise impl
     * @constructor
     */
    function Promise() {
        this._handler = [];
    }

    Promise.prototype = {
        then: function(resolveFn, rejectFn) {
            this._handler.push({
                resolve: resolveFn,
                reject: rejectFn
            });
        },
        resolve: function() {
            this._execute('resolve', arguments);
        },
        reject: function() {
            this._execute('reject', arguments);
        },
        _execute: function(result, args) {
            if (this._handler === null) {
                throw new Error('Promise already completed.');
            }

            for (var i = 0,
                     ln = this._handler.length; i < ln; i++) {
                this._handler[i][result].apply(window, args);
            }

            this.then = function(resolveFn, rejectFn) { (result === 'resolve' ? resolveFn: rejectFn).apply(window, args);
            };

            this._handler = null;
        }

    };

    function verifySameOrigin(url) {
        // url could be relative or scheme relative or absolute
        var host = document.location.host,
            // host + port
            protocol = document.location.protocol,
            relativeOrigin = '//' + host,
            origin = protocol + relativeOrigin;

        // Allow absolute or scheme relative URLs to same origin
        return (url == origin || url.slice(0, origin.length + 1) == origin + '/') || (url == relativeOrigin || url.slice(0, relativeOrigin.length + 1) == relativeOrigin + '/') ||
            // or any other URL that isn't scheme relative or absolute i.e relative.
            ! (/^(\/\/|http:|https:).*/.test(url));
    }

    var FIELD_NAME = ':cq_csrf_token',
        HEADER_NAME = 'CSRF-Token',
        TOKEN_SERVLET = '/libs/granite/csrf/token.json';

    var promise, globalToken;

    function getToken() {
        promise = new Promise();

        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function() {
            if (xhr.readyState === 4) {
                try {
                    var data = JSON.parse(xhr.responseText);
                    globalToken = data.token;
                    promise.resolve(globalToken);
                } catch(ex) {
                    promise.reject(xhr.responseText);
                }
            }
        };
        xhr.open('GET', Granite.HTTP.externalize(TOKEN_SERVLET), true);
        xhr.send();
    }

    function addField(form) {
        if (form.action && !verifySameOrigin(form.getAttribute("action"))) {
            return;
        }

        var input = form.querySelector('input[name="' + FIELD_NAME + '"]');

        if (!input) {
            input = document.createElement('input');
            input.setAttribute('type', 'hidden');
            input.setAttribute('name', FIELD_NAME);
            form.appendChild(input);
        }

        input.setAttribute('value', globalToken);
    }

    function handleForm(document) {
        var handler = function(ev) {
            var t = ev.target;

            if (t.nodeName.toLowerCase() === 'form' && globalToken) {
                addField(t);
            }
        };

        if (document.addEventListener) {
            document.addEventListener('submit', handler, true);
        } else if (document.attachEvent) {
            document.attachEvent('submit', handler);
        }
    }

    getToken();
    handleForm(document);

    var open = XMLHttpRequest.prototype.open;

    XMLHttpRequest.prototype.open = function(method, url) {
        if (verifySameOrigin(url) && method.toLowerCase() !== 'get') {
            this._csrf = true;
        }

        return open.apply(this, arguments);
    };

    var send = XMLHttpRequest.prototype.send;

    XMLHttpRequest.prototype.send = function(method) {
        if (!this._csrf) {
            send.apply(this, arguments);
            return;
        }

        if (globalToken) {
            this.setRequestHeader(HEADER_NAME, globalToken);
            send.apply(this, arguments);
            return;
        }

        var self = this;
        var args = Array.prototype.slice.call(arguments);

        promise.then(function(token) {
                self.setRequestHeader(HEADER_NAME, token);
                send.apply(self, args);
            },
            function() {
                if (window.console) {
                    console.error("Unable to read CSRF meta information");
                }
                send.apply(self, args);
            });
    };

    var submit = HTMLFormElement.prototype.submit;

    HTMLFormElement.prototype.submit = function() {
        addField(this);
        return submit.apply(this, arguments);
    };

    if (window.Node) {
        var ac = Node.prototype.appendChild;

        Node.prototype.appendChild = function() {
            var result = ac.apply(this, arguments);

            if (result.nodeName === 'IFRAME') {
                if (result.contentWindow && !result._csrf) {
                    result._csrf = true;
                    handleForm(result.contentWindow.document);
                }
            }

            return result;
        };
    }

    // refreshing csrf token periodically
    setInterval(function() {
            getToken();
        },
        300000);
})(this);

var ConsoleLogger = (function() {
    ConsoleLogger.SIZETHRESHOLD = 5;
    ConsoleLogger.TIMETHRESHOLD = 2000; //2 seconds
    ConsoleLogger.STORAGE = null;
    ConsoleLogger.LS = false;
    ConsoleLogger.PREVIOUS_REQUEST_COMPLETED = true; // boolean variable to know whether previous ajax call was  completed or not
    function ConsoleLogger() {
        var self = this;
        try {
            self.startLogger();
        } catch(e) {
            setTimeout(function() {
                    self.startLogger();
                },
                1000);
        }
    }
    ConsoleLogger.prototype.startLogger = function() {
        var self = this;
        self.overwrite();
        self.sendInterval();
        ConsoleLogger.LS = self.isLSavailable();
    }

    //overwrite console
    ConsoleLogger.prototype.overwrite = function() {
        var self = this;
        // store original functions
        var original = {
            console: {
                log: console.log,
                trace: console.trace,
                debug: console.debug,
                info: console.info,
                warn: console.warn,
                error: console.error
            }
        }
        // overwrite original functions
        if (original.console.log) {
            console.log = function() {
                self.pushLogs(Array.prototype.slice.call(arguments).join(","), "log");
                original.console.log.apply(this, arguments);
            }
        }
        if (original.console.trace) {
            console.trace = function() {
                self.pushLogs(Array.prototype.slice.call(arguments).join(","), "trace");
                original.console.trace.apply(this, arguments);
            }
        }
        if (original.console.debug) {
            console.debug = function() {
                self.pushLogs(Array.prototype.slice.call(arguments).join(","), "debug");
                original.console.debug.apply(this, arguments);
            }
        }
        if (original.console.info) {
            console.info = function() {
                self.pushLogs(Array.prototype.slice.call(arguments).join(","), "info");
                original.console.info.apply(this, arguments);
            }
        }
        if (original.console.warn) {
            console.warn = function() {
                self.pushLogs(Array.prototype.slice.call(arguments).join(","), "warn");
                original.console.warn.apply(this, arguments);
            }
        }
        if (original.console.error) {
            console.error = function() {
                self.pushLogs(Array.prototype.slice.call(arguments).join(","), "error");
                original.console.error.apply(this, arguments);
            }
        }
    }

    //Ajax call to send logs
    ConsoleLogger.prototype.flush = function(data, callback) {
        var result = false;
        var count = (JSON.parse(data)).count;
        var hostName = window.location.hostname;
        var protocol = (hostName.indexOf('devus') != -1 || hostName.indexOf('stgwww') != -1 || hostName.indexOf('local') != -1) ? 'http': 'https';
        var getUrl = function(protocol) {
            var host = window.location.host;
            return protocol + "://" + host + "/us/api/checkout/logger";
        }
        var apiUrl = getUrl(protocol);
        try {
            $.ajax({
                type: "POST",
                url: apiUrl,
                data: data,
                headers: {
                    'Content-Type': 'application/json'
                }
            }).fail(function(error) {
                result = false;
                ConsoleLogger.PREVIOUS_REQUEST_COMPLETED = true;
                if (callback != null) {
                    callback(result, count);
                }
            }).then(function(data) {
                result = true;
                ConsoleLogger.PREVIOUS_REQUEST_COMPLETED = true;
                if (callback != null) {
                    callback(result, count);
                }
            });
        } catch(error) {
            //console.log("Error -server side logging failed ");
            return false;
        }
    };

    //format time
    ConsoleLogger.prototype.getFormattedTime = function() {
        var date = new Date();
        return date.toUTCString();
    }
    //get ecom-cookies
    ConsoleLogger.prototype.getEcomCookie = function() {
        var ecomCookies = {};
        ecomCookies.remoteId = $.cookie("remoteId");
        ecomCookies.s_vi = $.cookie("s_vi");
        ecomCookies.prof_id = $.cookie("prof_id");
        ecomCookies.s_ecom_session = $.cookie("s_ecom_session");
        ecomCookies.ecom_vi = $.cookie("ecom_vi");
        ecomCookies.tmktid = $.cookie("tmktid");
        ecomCookies.tmktname = $.cookie("tmktname");
        ecomCookies.taccessrtype = $.cookie("taccessrtype");
        ecomCookies.tppid = $.cookie("tppid");
        ecomCookies.tlgimg = $.cookie("tlgimg");
        return JSON.stringify(ecomCookies);
    };

    //clears the localStorage
    ConsoleLogger.prototype.clearLogs = function(count) {
        var temp;
        if (ConsoleLogger.LS) {
            var local = localStorage.getItem('client_side_errors');
            temp = JSON.parse(local);
            localStorage.removeItem('client_side_errors');
        } else {
            var local = ConsoleLogger.STORAGE;
            temp = JSON.parse(local) ConsoleLogger.STORAGE = null;
        }
        if (temp != null) {
            var device = temp.device;
            var logmsg = temp.msg.splice(0, count) var countNow = temp.msg.length;
            if (countNow == 0) {
                return;
            } else {
                var result = {
                    "count": countNow,
                    "device": device,
                    "msg": temp.msg
                };
                if (ConsoleLogger.LS) {
                    localStorage.setItem('client_side_errors', JSON.stringify(result));
                } else {
                    ConsoleLogger.STORAGE = JSON.stringify(result);
                }
            }
        }
    }

    //send logs on exceeding SIZETHRESHOLD
    ConsoleLogger.prototype.checkSizeAndFlush = function() {
        if (ConsoleLogger.LS) {
            var localObj = JSON.parse(localStorage.getItem('client_side_errors'));
        } else {
            var localObj = JSON.parse(ConsoleLogger.STORAGE);
        }
        if (localObj != null && localObj.count >= ConsoleLogger.SIZETHRESHOLD) {
            this.sendLogs();
        }
    }

    //send logs on exceeding TIMETHRESHOLD
    ConsoleLogger.prototype.secCallback = function() {
        if (ConsoleLogger.LS) {
            var localObj = JSON.parse(localStorage.getItem('client_side_errors'));
        } else {
            var localObj = JSON.parse(ConsoleLogger.STORAGE);
        }

        if (localObj != null && (((new Date().getTime()) - localObj.msg[0].time) >= ConsoleLogger.TIMETHRESHOLD)) {
            this.ConsoleLogger.prototype.sendLogs();
        }
    };

    //push logs to localStorage
    /*{"count": 1,"device":"n","msg":[ {"message":"message","type":"type","time":"new","formatTime": "s"}]}
    */
    ConsoleLogger.prototype.sendLogs = function() {
        if (ConsoleLogger.LS) {
            var local = localStorage.getItem('client_side_errors');
        } else {
            var local = ConsoleLogger.STORAGE;
        }
        var processData = function(result, count) {
            if (result) {
                this.ConsoleLogger.prototype.clearLogs(count);
            }
        }
        if (local != null) {
            if (ConsoleLogger.PREVIOUS_REQUEST_COMPLETED) {
                ConsoleLogger.PREVIOUS_REQUEST_COMPLETED = false;
                this.flush(local, processData);
            }
        }
    }

    //Check localStorage is available or not
    ConsoleLogger.prototype.isLSavailable = function() {
        var test = 'test';
        try {
            localStorage.setItem(test, test);
            localStorage.removeItem(test);
            return true;
        } catch(e) {
            return false;
        }
    }

    ConsoleLogger.prototype.pushLogs = function(message, type) {
        if (type == 'log' || type == 'info') {
            return;
        }
        if (ConsoleLogger.LS) {
            var local = localStorage.getItem('client_side_errors');
        } else {
            var local = ConsoleLogger.STORAGE;
        }
        var hashfunction = function(txt) {
            var hash = 0,
                i, chr;
            if (txt.length === 0) return hash;
            for (i = 0; i < txt.length; i++) {
                chr = txt.charCodeAt(i);
                hash = ((hash << 5) - hash) + chr;
                hash |= 0; // Convert to 32bit integer
            }
            return hash;
        };
        var hashValue, logMessage;
        if (typeof(message) == 'object') {
            logMessage = message.message.split(/\n|\r|↵/).join("\n").match(/^.*$/m)[0];
            hashValue = hashfunction((message.message.split(/\n|\r|↵/).join("\n")).match(/^.*$/m)[0]);
            message = JSON.stringify(message);
        } else {
            logMessage = message.split(/\n|\r|↵/).join("\n").match(/^.*$/m)[0];
            hashValue = hashfunction((message.split(/\n|\r|↵/).join("\n")).match(/^.*$/m)[0]);
            message = JSON.stringify({
                "message": message
            });
        }
        var msg = {
            "message": message,
            "type": type,
            "time": new Date().getTime(),
            "url": window.location.href,
            "formatTime": this.getFormattedTime(),
            "x-ecom-cookie-credentials": this.getEcomCookie(),
            "hashValue": hashValue,
            "logMessage": logMessage
        };
        if (local != null) {
            var temp = JSON.parse(local);
            temp.count = temp.count + 1;
            temp.msg.push(msg);
            if (ConsoleLogger.LS) {
                localStorage.setItem("client_side_errors", JSON.stringify(temp));
            } else {
                ConsoleLogger.STORAGE = JSON.stringify(temp);
            }
        } else {
            var logmsg = [];
            logmsg.push(msg);
            var temp = {
                "count": 1,
                "device": navigator.userAgent ? navigator.userAgent: "Not Found",
                "msg": logmsg
            };
            if (ConsoleLogger.LS) {
                localStorage.setItem('client_side_errors', JSON.stringify(temp));
            } else {
                ConsoleLogger.STORAGE = JSON.stringify(temp);
            }
        }
        this.checkSizeAndFlush();
    }

    //call TIMETHRESHOLD every 2 sec
    ConsoleLogger.prototype.sendInterval = function() {
        intervalId = setInterval(this.secCallback, 1 * 2 * 1000);
    }

    window.onunload = function() {
        this.ConsoleLogger.prototype.sendLogs();
    };

    window.onload = function() {
        this.ConsoleLogger.prototype.sendLogs();
    };

    window.onerror = function(errorMsg, url, lineNumber, column, errorObj) {
        var msg = {
            "message": errorMsg,
            "url": url,
            "lineNumber": lineNumber,
            "column": column,
            "errorObj": errorObj
        };
        this.ConsoleLogger.prototype.pushLogs(msg, "fatal");
        return false;
    }

    var hidden, state, visibilityChange;
    if (typeof document.hidden !== "undefined") {
        hidden = "hidden";
        visibilityChange = "visibilitychange";
        state = "visibilityState";
    } else if (typeof document.mozHidden !== "undefined") {
        hidden = "mozHidden";
        visibilityChange = "mozvisibilitychange";
        state = "mozVisibilityState";
    } else if (typeof document.msHidden !== "undefined") {
        hidden = "msHidden";
        visibilityChange = "msvisibilitychange";
        state = "msVisibilityState";
    } else if (typeof document.webkitHidden !== "undefined") {
        hidden = "webkitHidden";
        visibilityChange = "webkitvisibilitychange";
        state = "webkitVisibilityState";
    }

    // Add a listener that constantly checks the visibility of page
    document.addEventListener(visibilityChange,
        function() {
            if (document[hidden]) {
                window.ConsoleLogger.prototype.sendLogs();
            }
        });

    return ConsoleLogger;
})();
new ConsoleLogger();

/*
 AngularJS v1.2.28
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(W, X, u) {
    'use strict';
    function z(b) {
        return function() {
            var a = arguments[0],
                c,
                a = "[" + (b ? b + ":": "") + a + "] http://errors.angularjs.org/1.2.28/" + (b ? b + "/": "") + a;
            for (c = 1; c < arguments.length; c++) a = a + (1 == c ? "?": "&") + "p" + (c - 1) + "=" + encodeURIComponent("function" == typeof arguments[c] ? arguments[c].toString().replace(/ \{[\s\S]*$/, "") : "undefined" == typeof arguments[c] ? "undefined": "string" != typeof arguments[c] ? JSON.stringify(arguments[c]) : arguments[c]);
            return Error(a)
        }
    }
    function Sa(b) {
        if (null == b || Ja(b)) return ! 1;
        var a = b.length;
        return 1 === b.nodeType && a ? !0 : G(b) || L(b) || 0 === a || "number" === typeof a && 0 < a && a - 1 in b
    }
    function r(b, a, c) {
        var d;
        if (b) if (N(b)) for (d in b)"prototype" == d || ("length" == d || "name" == d || b.hasOwnProperty && !b.hasOwnProperty(d)) || a.call(c, b[d], d);
        else if (L(b) || Sa(b)) for (d = 0; d < b.length; d++) a.call(c, b[d], d);
        else if (b.forEach && b.forEach !== r) b.forEach(a, c);
        else for (d in b) b.hasOwnProperty(d) && a.call(c, b[d], d);
        return b
    }
    function Xb(b) {
        var a = [],
            c;
        for (c in b) b.hasOwnProperty(c) && a.push(c);
        return a.sort()
    }
    function Sc(b, a, c) {
        for (var d = Xb(b), e = 0; e < d.length; e++) a.call(c, b[d[e]], d[e]);
        return d
    }
    function Yb(b) {
        return function(a, c) {
            b(c, a)
        }
    }
    function ib() {
        for (var b = na.length,
                 a; b;) {
            b--;
            a = na[b].charCodeAt(0);
            if (57 == a) return na[b] = "A",
                na.join("");
            if (90 == a) na[b] = "0";
            else return na[b] = String.fromCharCode(a + 1),
                na.join("")
        }
        na.unshift("0");
        return na.join("")
    }
    function Zb(b, a) {
        a ? b.$$hashKey = a: delete b.$$hashKey
    }
    function E(b) {
        var a = b.$$hashKey;
        r(arguments,
            function(a) {
                a !== b && r(a,
                    function(a, c) {
                        b[c] = a
                    })
            });
        Zb(b, a);
        return b
    }
    function U(b) {
        return parseInt(b, 10)
    }
    function $b(b, a) {
        return E(new(E(function() {},
            {
                prototype: b
            })), a)
    }
    function v() {}
    function ga(b) {
        return b
    }
    function aa(b) {
        return function() {
            return b
        }
    }
    function F(b) {
        return "undefined" === typeof b
    }
    function D(b) {
        return "undefined" !== typeof b
    }
    function T(b) {
        return null != b && "object" === typeof b
    }
    function G(b) {
        return "string" === typeof b
    }
    function jb(b) {
        return "number" === typeof b
    }
    function va(b) {
        return "[object Date]" === Ba.call(b)
    }
    function N(b) {
        return "function" === typeof b
    }
    function kb(b) {
        return "[object RegExp]" === Ba.call(b)
    }
    function Ja(b) {
        return b && b.document && b.location && b.alert && b.setInterval
    }
    function Tc(b) {
        return ! (!b || !(b.nodeName || b.prop && b.attr && b.find))
    }
    function Uc(b, a, c) {
        var d = [];
        r(b,
            function(b, f, g) {
                d.push(a.call(c, b, f, g))
            });
        return d
    }
    function Ta(b, a) {
        if (b.indexOf) return b.indexOf(a);
        for (var c = 0; c < b.length; c++) if (a === b[c]) return c;
        return - 1
    }
    function Ua(b, a) {
        var c = Ta(b, a);
        0 <= c && b.splice(c, 1);
        return a
    }
    function Ka(b, a, c, d) {
        if (Ja(b) || b && b.$evalAsync && b.$watch) throw Va("cpws");
        if (a) {
            if (b === a) throw Va("cpi");
            c = c || [];
            d = d || [];
            if (T(b)) {
                var e = Ta(c, b);
                if ( - 1 !== e) return d[e];
                c.push(b);
                d.push(a)
            }
            if (L(b)) for (var f = a.length = 0; f < b.length; f++) e = Ka(b[f], null, c, d),
            T(b[f]) && (c.push(b[f]), d.push(e)),
                a.push(e);
            else {
                var g = a.$$hashKey;
                L(a) ? a.length = 0 : r(a,
                    function(b, c) {
                        delete a[c]
                    });
                for (f in b) e = Ka(b[f], null, c, d),
                T(b[f]) && (c.push(b[f]), d.push(e)),
                    a[f] = e;
                Zb(a, g)
            }
        } else if (a = b) L(b) ? a = Ka(b, [], c, d) : va(b) ? a = new Date(b.getTime()) : kb(b) ? (a = RegExp(b.source, b.toString().match(/[^\/]*$/)[0]), a.lastIndex = b.lastIndex) : T(b) && (a = Ka(b, {},
            c, d));
        return a
    }
    function ha(b, a) {
        if (L(b)) {
            a = a || [];
            for (var c = 0; c < b.length; c++) a[c] = b[c]
        } else if (T(b)) for (c in a = a || {},
            b) ! lb.call(b, c) || "$" === c.charAt(0) && "$" === c.charAt(1) || (a[c] = b[c]);
        return a || b
    }
    function Ca(b, a) {
        if (b === a) return ! 0;
        if (null === b || null === a) return ! 1;
        if (b !== b && a !== a) return ! 0;
        var c = typeof b,
            d;
        if (c == typeof a && "object" == c) if (L(b)) {
            if (!L(a)) return ! 1;
            if ((c = b.length) == a.length) {
                for (d = 0; d < c; d++) if (!Ca(b[d], a[d])) return ! 1;
                return ! 0
            }
        } else {
            if (va(b)) return va(a) ? isNaN(b.getTime()) && isNaN(a.getTime()) || b.getTime() === a.getTime() : !1;
            if (kb(b) && kb(a)) return b.toString() == a.toString();
            if (b && b.$evalAsync && b.$watch || a && a.$evalAsync && a.$watch || Ja(b) || Ja(a) || L(a)) return ! 1;
            c = {};
            for (d in b) if ("$" !== d.charAt(0) && !N(b[d])) {
                if (!Ca(b[d], a[d])) return ! 1;
                c[d] = !0
            }
            for (d in a) if (!c.hasOwnProperty(d) && "$" !== d.charAt(0) && a[d] !== u && !N(a[d])) return ! 1;
            return ! 0
        }
        return ! 1
    }
    function Bb(b, a) {
        var c = 2 < arguments.length ? wa.call(arguments, 2) : [];
        return ! N(a) || a instanceof RegExp ? a: c.length ?
            function() {
                return arguments.length ? a.apply(b, c.concat(wa.call(arguments, 0))) : a.apply(b, c)
            }: function() {
                return arguments.length ? a.apply(b, arguments) : a.call(b)
            }
    }
    function Vc(b, a) {
        var c = a;
        "string" === typeof b && "$" === b.charAt(0) ? c = u: Ja(a) ? c = "$WINDOW": a && X === a ? c = "$DOCUMENT": a && (a.$evalAsync && a.$watch) && (c = "$SCOPE");
        return c
    }
    function oa(b, a) {
        return "undefined" === typeof b ? u: JSON.stringify(b, Vc, a ? "  ": null)
    }
    function ac(b) {
        return G(b) ? JSON.parse(b) : b
    }
    function Wa(b) {
        "function" === typeof b ? b = !0 : b && 0 !== b.length ? (b = x("" + b), b = !("f" == b || "0" == b || "false" == b || "no" == b || "n" == b || "[]" == b)) : b = !1;
        return b
    }
    function ia(b) {
        b = A(b).clone();
        try {
            b.empty()
        } catch(a) {}
        var c = A("<div>").append(b).html();
        try {
            return 3 === b[0].nodeType ? x(c) : c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,
                function(a, b) {
                    return "<" + x(b)
                })
        } catch(d) {
            return x(c)
        }
    }
    function bc(b) {
        try {
            return decodeURIComponent(b)
        } catch(a) {}
    }
    function cc(b) {
        var a = {},
            c, d;
        r((b || "").split("&"),
            function(b) {
                b && (c = b.replace(/\+/g, "%20").split("="), d = bc(c[0]), D(d) && (b = D(c[1]) ? bc(c[1]) : !0, lb.call(a, d) ? L(a[d]) ? a[d].push(b) : a[d] = [a[d], b] : a[d] = b))
            });
        return a
    }
    function Cb(b) {
        var a = [];
        r(b,
            function(b, d) {
                L(b) ? r(b,
                    function(b) {
                        a.push(Da(d, !0) + (!0 === b ? "": "=" + Da(b, !0)))
                    }) : a.push(Da(d, !0) + (!0 === b ? "": "=" + Da(b, !0)))
            });
        return a.length ? a.join("&") : ""
    }
    function mb(b) {
        return Da(b, !0).replace(/%26/gi, "&").replace(/%3D/gi, "=").replace(/%2B/gi, "+")
    }
    function Da(b, a) {
        return encodeURIComponent(b).replace(/%40/gi, "@").replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, a ? "%20": "+")
    }
    function Wc(b, a) {
        function c(a) {
            a && d.push(a)
        }
        var d = [b],
            e,
            f,
            g = ["ng:app", "ng-app", "x-ng-app", "data-ng-app"],
            h = /\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;
        r(g,
            function(a) {
                g[a] = !0;
                c(X.getElementById(a));
                a = a.replace(":", "\\:");
                b.querySelectorAll && (r(b.querySelectorAll("." + a), c), r(b.querySelectorAll("." + a + "\\:"), c), r(b.querySelectorAll("[" + a + "]"), c))
            });
        r(d,
            function(a) {
                if (!e) {
                    var b = h.exec(" " + a.className + " ");
                    b ? (e = a, f = (b[2] || "").replace(/\s+/g, ",")) : r(a.attributes,
                        function(b) { ! e && g[b.name] && (e = a, f = b.value)
                        })
                }
            });
        e && a(e, f ? [f] : [])
    }
    function dc(b, a) {
        var c = function() {
                b = A(b);
                if (b.injector()) {
                    var c = b[0] === X ? "document": ia(b);
                    throw Va("btstrpd", c.replace(/</, "&lt;").replace(/>/, "&gt;"));
                }
                a = a || [];
                a.unshift(["$provide",
                    function(a) {
                        a.value("$rootElement", b)
                    }]);
                a.unshift("ng");
                c = ec(a);
                c.invoke(["$rootScope", "$rootElement", "$compile", "$injector", "$animate",
                    function(a, b, c, d, e) {
                        a.$apply(function() {
                            b.data("$injector", d);
                            c(b)(a)
                        })
                    }]);
                return c
            },
            d = /^NG_DEFER_BOOTSTRAP!/;
        if (W && !d.test(W.name)) return c();
        W.name = W.name.replace(d, "");
        Xa.resumeBootstrap = function(b) {
            r(b,
                function(b) {
                    a.push(b)
                });
            c()
        }
    }
    function nb(b, a) {
        a = a || "_";
        return b.replace(Xc,
            function(b, d) {
                return (d ? a: "") + b.toLowerCase()
            })
    }
    function Db(b, a, c) {
        if (!b) throw Va("areq", a || "?", c || "required");
        return b
    }
    function Ya(b, a, c) {
        c && L(b) && (b = b[b.length - 1]);
        Db(N(b), a, "not a function, got " + (b && "object" === typeof b ? b.constructor.name || "Object": typeof b));
        return b
    }
    function Ea(b, a) {
        if ("hasOwnProperty" === b) throw Va("badname", a);
    }
    function fc(b, a, c) {
        if (!a) return b;
        a = a.split(".");
        for (var d, e = b,
                 f = a.length,
                 g = 0; g < f; g++) d = a[g],
        b && (b = (e = b)[d]);
        return ! c && N(b) ? Bb(e, b) : b
    }
    function Eb(b) {
        var a = b[0];
        b = b[b.length - 1];
        if (a === b) return A(a);
        var c = [a];
        do {
            a = a.nextSibling;
            if (!a) break;
            c.push(a)
        } while ( a !== b );
        return A(c)
    }
    function Yc(b) {
        var a = z("$injector"),
            c = z("ng");
        b = b.angular || (b.angular = {});
        b.$$minErr = b.$$minErr || z;
        return b.module || (b.module = function() {
            var b = {};
            return function(e, f, g) {
                if ("hasOwnProperty" === e) throw c("badname", "module");
                f && b.hasOwnProperty(e) && (b[e] = null);
                return b[e] || (b[e] = function() {
                    function b(a, d, e) {
                        return function() {
                            c[e || "push"]([a, d, arguments]);
                            return n
                        }
                    }
                    if (!f) throw a("nomod", e);
                    var c = [],
                        d = [],
                        l = b("$injector", "invoke"),
                        n = {
                            _invokeQueue: c,
                            _runBlocks: d,
                            requires: f,
                            name: e,
                            provider: b("$provide", "provider"),
                            factory: b("$provide", "factory"),
                            service: b("$provide", "service"),
                            value: b("$provide", "value"),
                            constant: b("$provide", "constant", "unshift"),
                            animation: b("$animateProvider", "register"),
                            filter: b("$filterProvider", "register"),
                            controller: b("$controllerProvider", "register"),
                            directive: b("$compileProvider", "directive"),
                            config: l,
                            run: function(a) {
                                d.push(a);
                                return this
                            }
                        };
                    g && l(g);
                    return n
                } ())
            }
        } ())
    }
    function Zc(b) {
        E(b, {
            bootstrap: dc,
            copy: Ka,
            extend: E,
            equals: Ca,
            element: A,
            forEach: r,
            injector: ec,
            noop: v,
            bind: Bb,
            toJson: oa,
            fromJson: ac,
            identity: ga,
            isUndefined: F,
            isDefined: D,
            isString: G,
            isFunction: N,
            isObject: T,
            isNumber: jb,
            isElement: Tc,
            isArray: L,
            version: $c,
            isDate: va,
            lowercase: x,
            uppercase: La,
            callbacks: {
                counter: 0
            },
            $$minErr: z,
            $$csp: Za
        });
        $a = Yc(W);
        try {
            $a("ngLocale")
        } catch(a) {
            $a("ngLocale", []).provider("$locale", ad)
        }
        $a("ng", ["ngLocale"], ["$provide",
            function(a) {
                a.provider({
                    $$sanitizeUri: bd
                });
                a.provider("$compile", gc).directive({
                    a: cd,
                    input: hc,
                    textarea: hc,
                    form: dd,
                    script: ed,
                    select: fd,
                    style: gd,
                    option: hd,
                    ngBind: id,
                    ngBindHtml: jd,
                    ngBindTemplate: kd,
                    ngClass: ld,
                    ngClassEven: md,
                    ngClassOdd: nd,
                    ngCloak: od,
                    ngController: pd,
                    ngForm: qd,
                    ngHide: rd,
                    ngIf: sd,
                    ngInclude: td,
                    ngInit: ud,
                    ngNonBindable: vd,
                    ngPluralize: wd,
                    ngRepeat: xd,
                    ngShow: yd,
                    ngStyle: zd,
                    ngSwitch: Ad,
                    ngSwitchWhen: Bd,
                    ngSwitchDefault: Cd,
                    ngOptions: Dd,
                    ngTransclude: Ed,
                    ngModel: Fd,
                    ngList: Gd,
                    ngChange: Hd,
                    required: ic,
                    ngRequired: ic,
                    ngValue: Id
                }).directive({
                    ngInclude: Jd
                }).directive(Fb).directive(jc);
                a.provider({
                    $anchorScroll: Kd,
                    $animate: Ld,
                    $browser: Md,
                    $cacheFactory: Nd,
                    $controller: Od,
                    $document: Pd,
                    $exceptionHandler: Qd,
                    $filter: kc,
                    $interpolate: Rd,
                    $interval: Sd,
                    $http: Td,
                    $httpBackend: Ud,
                    $location: Vd,
                    $log: Wd,
                    $parse: Xd,
                    $rootScope: Yd,
                    $q: Zd,
                    $sce: $d,
                    $sceDelegate: ae,
                    $sniffer: be,
                    $templateCache: ce,
                    $timeout: de,
                    $window: ee,
                    $$rAF: fe,
                    $$asyncCallback: ge
                })
            }])
    }
    function ab(b) {
        return b.replace(he,
            function(a, b, d, e) {
                return e ? d.toUpperCase() : d
            }).replace(ie, "Moz$1")
    }
    function Gb(b, a, c, d) {
        function e(b) {
            var e = c && b ? [this.filter(b)] : [this],
                k = a,
                m,
                l,
                n,
                q,
                p,
                s;
            if (!d || null != b) for (; e.length;) for (m = e.shift(), l = 0, n = m.length; l < n; l++) for (q = A(m[l]), k ? q.triggerHandler("$destroy") : k = !k, p = 0, q = (s = q.children()).length; p < q; p++) e.push(Fa(s[p]));
            return f.apply(this, arguments)
        }
        var f = Fa.fn[b],
            f = f.$original || f;
        e.$original = f;
        Fa.fn[b] = e
    }
    function S(b) {
        if (b instanceof S) return b;
        G(b) && (b = $(b));
        if (! (this instanceof S)) {
            if (G(b) && "<" != b.charAt(0)) throw Hb("nosel");
            return new S(b)
        }
        if (G(b)) {
            var a = b;
            b = X;
            var c;
            if (c = je.exec(a)) b = [b.createElement(c[1])];
            else {
                var d = b,
                    e;
                b = d.createDocumentFragment();
                c = [];
                if (Ib.test(a)) {
                    d = b.appendChild(d.createElement("div"));
                    e = (ke.exec(a) || ["", ""])[1].toLowerCase();
                    e = da[e] || da._default;
                    d.innerHTML = "<div>&#160;</div>" + e[1] + a.replace(le, "<$1></$2>") + e[2];
                    d.removeChild(d.firstChild);
                    for (a = e[0]; a--;) d = d.lastChild;
                    a = 0;
                    for (e = d.childNodes.length; a < e; ++a) c.push(d.childNodes[a]);
                    d = b.firstChild;
                    d.textContent = ""
                } else c.push(d.createTextNode(a));
                b.textContent = "";
                b.innerHTML = "";
                b = c
            }
            Jb(this, b);
            A(X.createDocumentFragment()).append(this)
        } else Jb(this, b)
    }
    function Kb(b) {
        return b.cloneNode(!0)
    }
    function Ma(b) {
        Lb(b);
        var a = 0;
        for (b = b.childNodes || []; a < b.length; a++) Ma(b[a])
    }
    function lc(b, a, c, d) {
        if (D(d)) throw Hb("offargs");
        var e = pa(b, "events");
        pa(b, "handle") && (F(a) ? r(e,
            function(a, c) {
                bb(b, c, a);
                delete e[c]
            }) : r(a.split(" "),
            function(a) {
                F(c) ? (bb(b, a, e[a]), delete e[a]) : Ua(e[a] || [], c)
            }))
    }
    function Lb(b, a) {
        var c = b.ng339,
            d = cb[c];
        d && (a ? delete cb[c].data[a] : (d.handle && (d.events.$destroy && d.handle({},
            "$destroy"), lc(b)), delete cb[c], b.ng339 = u))
    }
    function pa(b, a, c) {
        var d = b.ng339,
            d = cb[d || -1];
        if (D(c)) d || (b.ng339 = d = ++me, d = cb[d] = {}),
            d[a] = c;
        else return d && d[a]
    }
    function Mb(b, a, c) {
        var d = pa(b, "data"),
            e = D(c),
            f = !e && D(a),
            g = f && !T(a);
        d || g || pa(b, "data", d = {});
        if (e) d[a] = c;
        else if (f) {
            if (g) return d && d[a];
            E(d, a)
        } else return d
    }
    function Nb(b, a) {
        return b.getAttribute ? -1 < (" " + (b.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").indexOf(" " + a + " ") : !1
    }
    function ob(b, a) {
        a && b.setAttribute && r(a.split(" "),
            function(a) {
                b.setAttribute("class", $((" " + (b.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").replace(" " + $(a) + " ", " ")))
            })
    }
    function pb(b, a) {
        if (a && b.setAttribute) {
            var c = (" " + (b.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ");
            r(a.split(" "),
                function(a) {
                    a = $(a); - 1 === c.indexOf(" " + a + " ") && (c += a + " ")
                });
            b.setAttribute("class", $(c))
        }
    }
    function Jb(b, a) {
        if (a) {
            a = a.nodeName || !D(a.length) || Ja(a) ? [a] : a;
            for (var c = 0; c < a.length; c++) b.push(a[c])
        }
    }
    function mc(b, a) {
        return qb(b, "$" + (a || "ngController") + "Controller")
    }
    function qb(b, a, c) {
        9 == b.nodeType && (b = b.documentElement);
        for (a = L(a) ? a: [a]; b;) {
            for (var d = 0,
                     e = a.length; d < e; d++) if ((c = A.data(b, a[d])) !== u) return c;
            b = b.parentNode || 11 === b.nodeType && b.host
        }
    }
    function nc(b) {
        for (var a = 0,
                 c = b.childNodes; a < c.length; a++) Ma(c[a]);
        for (; b.firstChild;) b.removeChild(b.firstChild)
    }
    function oc(b, a) {
        var c = rb[a.toLowerCase()];
        return c && pc[b.nodeName] && c
    }
    function ne(b, a) {
        var c = function(c, e) {
            c.preventDefault || (c.preventDefault = function() {
                c.returnValue = !1
            });
            c.stopPropagation || (c.stopPropagation = function() {
                c.cancelBubble = !0
            });
            c.target || (c.target = c.srcElement || X);
            if (F(c.defaultPrevented)) {
                var f = c.preventDefault;
                c.preventDefault = function() {
                    c.defaultPrevented = !0;
                    f.call(c)
                };
                c.defaultPrevented = !1
            }
            c.isDefaultPrevented = function() {
                return c.defaultPrevented || !1 === c.returnValue
            };
            var g = ha(a[e || c.type] || []);
            r(g,
                function(a) {
                    a.call(b, c)
                });
            8 >= R ? (c.preventDefault = null, c.stopPropagation = null, c.isDefaultPrevented = null) : (delete c.preventDefault, delete c.stopPropagation, delete c.isDefaultPrevented)
        };
        c.elem = b;
        return c
    }
    function Na(b, a) {
        var c = typeof b,
            d;
        "function" == c || "object" == c && null !== b ? "function" == typeof(d = b.$$hashKey) ? d = b.$$hashKey() : d === u && (d = b.$$hashKey = (a || ib)()) : d = b;
        return c + ":" + d
    }
    function db(b, a) {
        if (a) {
            var c = 0;
            this.nextUid = function() {
                return++c
            }
        }
        r(b, this.put, this)
    }
    function qc(b) {
        var a, c;
        "function" === typeof b ? (a = b.$inject) || (a = [], b.length && (c = b.toString().replace(oe, ""), c = c.match(pe), r(c[1].split(qe),
            function(b) {
                b.replace(re,
                    function(b, c, d) {
                        a.push(d)
                    })
            })), b.$inject = a) : L(b) ? (c = b.length - 1, Ya(b[c], "fn"), a = b.slice(0, c)) : Ya(b, "fn", !0);
        return a
    }
    function ec(b) {
        function a(a) {
            return function(b, c) {
                if (T(b)) r(b, Yb(a));
                else return a(b, c)
            }
        }
        function c(a, b) {
            Ea(a, "service");
            if (N(b) || L(b)) b = n.instantiate(b);
            if (!b.$get) throw eb("pget", a);
            return l[a + h] = b
        }
        function d(a, b) {
            return c(a, {
                $get: b
            })
        }
        function e(a) {
            var b = [],
                c,
                d,
                f,
                h;
            r(a,
                function(a) {
                    if (!m.get(a)) {
                        m.put(a, !0);
                        try {
                            if (G(a)) for (c = $a(a), b = b.concat(e(c.requires)).concat(c._runBlocks), d = c._invokeQueue, f = 0, h = d.length; f < h; f++) {
                                var g = d[f],
                                    k = n.get(g[0]);
                                k[g[1]].apply(k, g[2])
                            } else N(a) ? b.push(n.invoke(a)) : L(a) ? b.push(n.invoke(a)) : Ya(a, "module")
                        } catch(p) {
                            throw L(a) && (a = a[a.length - 1]),
                            p.message && (p.stack && -1 == p.stack.indexOf(p.message)) && (p = p.message + "\n" + p.stack),
                                eb("modulerr", a, p.stack || p.message || p);
                        }
                    }
                });
            return b
        }
        function f(a, b) {
            function c(d) {
                if (a.hasOwnProperty(d)) {
                    if (a[d] === g) throw eb("cdep", d + " <- " + k.join(" <- "));
                    return a[d]
                }
                try {
                    return k.unshift(d),
                        a[d] = g,
                        a[d] = b(d)
                } catch(e) {
                    throw a[d] === g && delete a[d],
                        e;
                } finally {
                    k.shift()
                }
            }
            function d(a, b, e) {
                var f = [],
                    h = qc(a),
                    g,
                    k,
                    p;
                k = 0;
                for (g = h.length; k < g; k++) {
                    p = h[k];
                    if ("string" !== typeof p) throw eb("itkn", p);
                    f.push(e && e.hasOwnProperty(p) ? e[p] : c(p))
                }
                L(a) && (a = a[g]);
                return a.apply(b, f)
            }
            return {
                invoke: d,
                instantiate: function(a, b) {
                    var c = function() {},
                        e;
                    c.prototype = (L(a) ? a[a.length - 1] : a).prototype;
                    c = new c;
                    e = d(a, c, b);
                    return T(e) || N(e) ? e: c
                },
                get: c,
                annotate: qc,
                has: function(b) {
                    return l.hasOwnProperty(b + h) || a.hasOwnProperty(b)
                }
            }
        }
        var g = {},
            h = "Provider",
            k = [],
            m = new db([], !0),
            l = {
                $provide: {
                    provider: a(c),
                    factory: a(d),
                    service: a(function(a, b) {
                        return d(a, ["$injector",
                            function(a) {
                                return a.instantiate(b)
                            }])
                    }),
                    value: a(function(a, b) {
                        return d(a, aa(b))
                    }),
                    constant: a(function(a, b) {
                        Ea(a, "constant");
                        l[a] = b;
                        q[a] = b
                    }),
                    decorator: function(a, b) {
                        var c = n.get(a + h),
                            d = c.$get;
                        c.$get = function() {
                            var a = p.invoke(d, c);
                            return p.invoke(b, null, {
                                $delegate: a
                            })
                        }
                    }
                }
            },
            n = l.$injector = f(l,
                function() {
                    throw eb("unpr", k.join(" <- "));
                }),
            q = {},
            p = q.$injector = f(q,
                function(a) {
                    a = n.get(a + h);
                    return p.invoke(a.$get, a)
                });
        r(e(b),
            function(a) {
                p.invoke(a || v)
            });
        return p
    }
    function Kd() {
        var b = !0;
        this.disableAutoScrolling = function() {
            b = !1
        };
        this.$get = ["$window", "$location", "$rootScope",
            function(a, c, d) {
                function e(a) {
                    var b = null;
                    r(a,
                        function(a) {
                            b || "a" !== x(a.nodeName) || (b = a)
                        });
                    return b
                }
                function f() {
                    var b = c.hash(),
                        d;
                    b ? (d = g.getElementById(b)) ? d.scrollIntoView() : (d = e(g.getElementsByName(b))) ? d.scrollIntoView() : "top" === b && a.scrollTo(0, 0) : a.scrollTo(0, 0)
                }
                var g = a.document;
                b && d.$watch(function() {
                        return c.hash()
                    },
                    function() {
                        d.$evalAsync(f)
                    });
                return f
            }]
    }
    function ge() {
        this.$get = ["$$rAF", "$timeout",
            function(b, a) {
                return b.supported ?
                    function(a) {
                        return b(a)
                    }: function(b) {
                        return a(b, 0, !1)
                    }
            }]
    }
    function se(b, a, c, d) {
        function e(a) {
            try {
                a.apply(null, wa.call(arguments, 1))
            } finally {
                if (s--, 0 === s) for (; J.length;) try {
                    J.pop()()
                } catch(b) {
                    c.error(b)
                }
            }
        }
        function f(a, b) { (function ea() {
            r(w,
                function(a) {
                    a()
                });
            t = b(ea, a)
        })()
        }
        function g() {
            y != h.url() && (y = h.url(), r(ba,
                function(a) {
                    a(h.url())
                }))
        }
        var h = this,
            k = a[0],
            m = b.location,
            l = b.history,
            n = b.setTimeout,
            q = b.clearTimeout,
            p = {};
        h.isMock = !1;
        var s = 0,
            J = [];
        h.$$completeOutstandingRequest = e;
        h.$$incOutstandingRequestCount = function() {
            s++
        };
        h.notifyWhenNoOutstandingRequests = function(a) {
            r(w,
                function(a) {
                    a()
                });
            0 === s ? a() : J.push(a)
        };
        var w = [],
            t;
        h.addPollFn = function(a) {
            F(t) && f(100, n);
            w.push(a);
            return a
        };
        var y = m.href,
            K = a.find("base"),
            B = null;
        h.url = function(a, c) {
            m !== b.location && (m = b.location);
            l !== b.history && (l = b.history);
            if (a) {
                if (y != a) {
                    var e = y && Ga(y) === Ga(a);
                    y = a; ! e && d.history ? c ? l.replaceState(null, "", a) : (l.pushState(null, "", a), K.attr("href", K.attr("href"))) : (e || (B = a), c ? m.replace(a) : m.href = a);
                    return h
                }
            } else return B || m.href.replace(/%27/g, "'")
        };
        var ba = [],
            O = !1;
        h.onUrlChange = function(a) {
            if (!O) {
                if (d.history) A(b).on("popstate", g);
                if (d.hashchange) A(b).on("hashchange", g);
                else h.addPollFn(g);
                O = !0
            }
            ba.push(a);
            return a
        };
        h.$$checkUrlChange = g;
        h.baseHref = function() {
            var a = K.attr("href");
            return a ? a.replace(/^(https?\:)?\/\/[^\/]*/, "") : ""
        };
        var M = {},
            ca = "",
            P = h.baseHref();
        h.cookies = function(a, b) {
            var d, e, f, h;
            if (a) b === u ? k.cookie = escape(a) + "=;path=" + P + ";expires=Thu, 01 Jan 1970 00:00:00 GMT": G(b) && (d = (k.cookie = escape(a) + "=" + escape(b) + ";path=" + P).length + 1, 4096 < d && c.warn("Cookie '" + a + "' possibly not set or overflowed because it was too large (" + d + " > 4096 bytes)!"));
            else {
                if (k.cookie !== ca) for (ca = k.cookie, d = ca.split("; "), M = {},
                                              f = 0; f < d.length; f++) e = d[f],
                    h = e.indexOf("="),
                0 < h && (a = unescape(e.substring(0, h)), M[a] === u && (M[a] = unescape(e.substring(h + 1))));
                return M
            }
        };
        h.defer = function(a, b) {
            var c;
            s++;
            c = n(function() {
                    delete p[c];
                    e(a)
                },
                b || 0);
            p[c] = !0;
            return c
        };
        h.defer.cancel = function(a) {
            return p[a] ? (delete p[a], q(a), e(v), !0) : !1
        }
    }
    function Md() {
        this.$get = ["$window", "$log", "$sniffer", "$document",
            function(b, a, c, d) {
                return new se(b, d, a, c)
            }]
    }
    function Nd() {
        this.$get = function() {
            function b(b, d) {
                function e(a) {
                    a != n && (q ? q == a && (q = a.n) : q = a, f(a.n, a.p), f(a, n), n = a, n.n = null)
                }
                function f(a, b) {
                    a != b && (a && (a.p = b), b && (b.n = a))
                }
                if (b in a) throw z("$cacheFactory")("iid", b);
                var g = 0,
                    h = E({},
                        d, {
                            id: b
                        }),
                    k = {},
                    m = d && d.capacity || Number.MAX_VALUE,
                    l = {},
                    n = null,
                    q = null;
                return a[b] = {
                    put: function(a, b) {
                        if (m < Number.MAX_VALUE) {
                            var c = l[a] || (l[a] = {
                                key: a
                            });
                            e(c)
                        }
                        if (!F(b)) return a in k || g++,
                            k[a] = b,
                        g > m && this.remove(q.key),
                            b
                    },
                    get: function(a) {
                        if (m < Number.MAX_VALUE) {
                            var b = l[a];
                            if (!b) return;
                            e(b)
                        }
                        return k[a]
                    },
                    remove: function(a) {
                        if (m < Number.MAX_VALUE) {
                            var b = l[a];
                            if (!b) return;
                            b == n && (n = b.p);
                            b == q && (q = b.n);
                            f(b.n, b.p);
                            delete l[a]
                        }
                        delete k[a];
                        g--
                    },
                    removeAll: function() {
                        k = {};
                        g = 0;
                        l = {};
                        n = q = null
                    },
                    destroy: function() {
                        l = h = k = null;
                        delete a[b]
                    },
                    info: function() {
                        return E({},
                            h, {
                                size: g
                            })
                    }
                }
            }
            var a = {};
            b.info = function() {
                var b = {};
                r(a,
                    function(a, e) {
                        b[e] = a.info()
                    });
                return b
            };
            b.get = function(b) {
                return a[b]
            };
            return b
        }
    }
    function ce() {
        this.$get = ["$cacheFactory",
            function(b) {
                return b("templates")
            }]
    }
    function gc(b, a) {
        var c = {},
            d = "Directive",
            e = /^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,
            f = /(([\d\w_\-]+)(?:\:([^;]+))?;?)/,
            g = /^(on[a-z]+|formaction)$/;
        this.directive = function k(a, e) {
            Ea(a, "directive");
            G(a) ? (Db(e, "directiveFactory"), c.hasOwnProperty(a) || (c[a] = [], b.factory(a + d, ["$injector", "$exceptionHandler",
                function(b, d) {
                    var e = [];
                    r(c[a],
                        function(c, f) {
                            try {
                                var g = b.invoke(c);
                                N(g) ? g = {
                                    compile: aa(g)
                                }: !g.compile && g.link && (g.compile = aa(g.link));
                                g.priority = g.priority || 0;
                                g.index = f;
                                g.name = g.name || a;
                                g.require = g.require || g.controller && g.name;
                                g.restrict = g.restrict || "A";
                                e.push(g)
                            } catch(k) {
                                d(k)
                            }
                        });
                    return e
                }])), c[a].push(e)) : r(a, Yb(k));
            return this
        };
        this.aHrefSanitizationWhitelist = function(b) {
            return D(b) ? (a.aHrefSanitizationWhitelist(b), this) : a.aHrefSanitizationWhitelist()
        };
        this.imgSrcSanitizationWhitelist = function(b) {
            return D(b) ? (a.imgSrcSanitizationWhitelist(b), this) : a.imgSrcSanitizationWhitelist()
        };
        this.$get = ["$injector", "$interpolate", "$exceptionHandler", "$http", "$templateCache", "$parse", "$controller", "$rootScope", "$document", "$sce", "$animate", "$$sanitizeUri",
            function(a, b, l, n, q, p, s, J, w, t, y, K) {
                function B(a, b, c, d, e) {
                    a instanceof A || (a = A(a));
                    r(a,
                        function(b, c) {
                            3 == b.nodeType && b.nodeValue.match(/\S+/) && (a[c] = A(b).wrap("<span></span>").parent()[0])
                        });
                    var f = O(a, b, a, c, d, e);
                    ba(a, "ng-scope");
                    return function(b, c, d, e) {
                        Db(b, "scope");
                        var g = c ? Oa.clone.call(a) : a;
                        r(d,
                            function(a, b) {
                                g.data("$" + b + "Controller", a)
                            });
                        d = 0;
                        for (var k = g.length; d < k; d++) {
                            var p = g[d].nodeType;
                            1 !== p && 9 !== p || g.eq(d).data("$scope", b)
                        }
                        c && c(g, b);
                        f && f(b, g, g, e);
                        return g
                    }
                }
                function ba(a, b) {
                    try {
                        a.addClass(b)
                    } catch(c) {}
                }
                function O(a, b, c, d, e, f) {
                    function g(a, c, d, e) {
                        var f, p, l, m, q, n, w;
                        f = c.length;
                        var s = Array(f);
                        for (m = 0; m < f; m++) s[m] = c[m];
                        n = m = 0;
                        for (q = k.length; m < q; n++) p = s[n],
                            c = k[m++],
                            f = k[m++],
                            c ? (c.scope ? (l = a.$new(), A.data(p, "$scope", l)) : l = a, w = c.transcludeOnThisElement ? M(a, c.transclude, e) : !c.templateOnThisElement && e ? e: !e && b ? M(a, b) : null, c(f, l, p, d, w)) : f && f(a, p.childNodes, u, e)
                    }
                    for (var k = [], p, l, m, q, n = 0; n < a.length; n++) p = new Ob,
                        l = ca(a[n], [], p, 0 === n ? d: u, e),
                    (f = l.length ? I(l, a[n], p, b, c, null, [], [], f) : null) && f.scope && ba(p.$$element, "ng-scope"),
                        p = f && f.terminal || !(m = a[n].childNodes) || !m.length ? null: O(m, f ? (f.transcludeOnThisElement || !f.templateOnThisElement) && f.transclude: b),
                        k.push(f, p),
                        q = q || f || p,
                        f = null;
                    return q ? g: null
                }
                function M(a, b, c) {
                    return function(d, e, f) {
                        var g = !1;
                        d || (d = a.$new(), g = d.$$transcluded = !0);
                        e = b(d, e, f, c);
                        if (g) e.on("$destroy",
                            function() {
                                d.$destroy()
                            });
                        return e
                    }
                }
                function ca(a, b, c, d, g) {
                    var k = c.$attr,
                        p;
                    switch (a.nodeType) {
                        case 1:
                            ea(b, qa(Pa(a).toLowerCase()), "E", d, g);
                            for (var l, m, q, n = a.attributes,
                                     w = 0,
                                     s = n && n.length; w < s; w++) {
                                var t = !1,
                                    J = !1;
                                l = n[w];
                                if (!R || 8 <= R || l.specified) {
                                    p = l.name;
                                    m = $(l.value);
                                    l = qa(p);
                                    if (q = U.test(l)) p = nb(l.substr(6), "-");
                                    var y = l.replace(/(Start|End)$/, "");
                                    l === y + "Start" && (t = p, J = p.substr(0, p.length - 5) + "end", p = p.substr(0, p.length - 6));
                                    l = qa(p.toLowerCase());
                                    k[l] = p;
                                    if (q || !c.hasOwnProperty(l)) c[l] = m,
                                    oc(a, l) && (c[l] = !0);
                                    S(a, b, m, l);
                                    ea(b, l, "A", d, g, t, J)
                                }
                            }
                            a = a.className;
                            if (G(a) && "" !== a) for (; p = f.exec(a);) l = qa(p[2]),
                            ea(b, l, "C", d, g) && (c[l] = $(p[3])),
                                a = a.substr(p.index + p[0].length);
                            break;
                        case 3:
                            x(b, a.nodeValue);
                            break;
                        case 8:
                            try {
                                if (p = e.exec(a.nodeValue)) l = qa(p[1]),
                                ea(b, l, "M", d, g) && (c[l] = $(p[2]))
                            } catch(B) {}
                    }
                    b.sort(F);
                    return b
                }
                function P(a, b, c) {
                    var d = [],
                        e = 0;
                    if (b && a.hasAttribute && a.hasAttribute(b)) {
                        do {
                            if (!a) throw ja("uterdir", b, c);
                            1 == a.nodeType && (a.hasAttribute(b) && e++, a.hasAttribute(c) && e--);
                            d.push(a);
                            a = a.nextSibling
                        } while ( 0 < e )
                    } else d.push(a);
                    return A(d)
                }
                function C(a, b, c) {
                    return function(d, e, f, g, k) {
                        e = P(e[0], b, c);
                        return a(d, e, f, g, k)
                    }
                }
                function I(a, c, d, e, f, g, k, q, n) {
                    function w(a, b, c, d) {
                        if (a) {
                            c && (a = C(a, c, d));
                            a.require = H.require;
                            a.directiveName = z;
                            if (K === H || H.$$isolateScope) a = rc(a, {
                                isolateScope: !0
                            });
                            k.push(a)
                        }
                        if (b) {
                            c && (b = C(b, c, d));
                            b.require = H.require;
                            b.directiveName = z;
                            if (K === H || H.$$isolateScope) b = rc(b, {
                                isolateScope: !0
                            });
                            q.push(b)
                        }
                    }
                    function t(a, b, c, d) {
                        var e, f = "data",
                            g = !1;
                        if (G(b)) {
                            for (;
                                "^" == (e = b.charAt(0)) || "?" == e;) b = b.substr(1),
                            "^" == e && (f = "inheritedData"),
                                g = g || "?" == e;
                            e = null;
                            d && "data" === f && (e = d[b]);
                            e = e || c[f]("$" + b + "Controller");
                            if (!e && !g) throw ja("ctreq", b, a);
                        } else L(b) && (e = [], r(b,
                            function(b) {
                                e.push(t(a, b, c, d))
                            }));
                        return e
                    }
                    function J(a, e, f, g, n) {
                        function w(a, b) {
                            var c;
                            2 > arguments.length && (b = a, a = u);
                            Ia && (c = ca);
                            return n(a, b, c)
                        }
                        var y, Q, B, M, C, P, ca = {},
                            ra;
                        y = c === f ? d: ha(d, new Ob(A(f), d.$attr));
                        Q = y.$$element;
                        if (K) {
                            var ue = /^\s*([@=&])(\??)\s*(\w*)\s*$/;
                            P = e.$new(!0); ! I || I !== K && I !== K.$$originalDirective ? Q.data("$isolateScopeNoTemplate", P) : Q.data("$isolateScope", P);
                            ba(Q, "ng-isolate-scope");
                            r(K.scope,
                                function(a, c) {
                                    var d = a.match(ue) || [],
                                        f = d[3] || c,
                                        g = "?" == d[2],
                                        d = d[1],
                                        k,
                                        l,
                                        n,
                                        q;
                                    P.$$isolateBindings[c] = d + f;
                                    switch (d) {
                                        case "@":
                                            y.$observe(f,
                                                function(a) {
                                                    P[c] = a
                                                });
                                            y.$$observers[f].$$scope = e;
                                            y[f] && (P[c] = b(y[f])(e));
                                            break;
                                        case "=":
                                            if (g && !y[f]) break;
                                            l = p(y[f]);
                                            q = l.literal ? Ca: function(a, b) {
                                                return a === b || a !== a && b !== b
                                            };
                                            n = l.assign ||
                                                function() {
                                                    k = P[c] = l(e);
                                                    throw ja("nonassign", y[f], K.name);
                                                };
                                            k = P[c] = l(e);
                                            P.$watch(function() {
                                                    var a = l(e);
                                                    q(a, P[c]) || (q(a, k) ? n(e, a = P[c]) : P[c] = a);
                                                    return k = a
                                                },
                                                null, l.literal);
                                            break;
                                        case "&":
                                            l = p(y[f]);
                                            P[c] = function(a) {
                                                return l(e, a)
                                            };
                                            break;
                                        default:
                                            throw ja("iscp", K.name, c, a);
                                    }
                                })
                        }
                        ra = n && w;
                        O && r(O,
                            function(a) {
                                var b = {
                                        $scope: a === K || a.$$isolateScope ? P: e,
                                        $element: Q,
                                        $attrs: y,
                                        $transclude: ra
                                    },
                                    c;
                                C = a.controller;
                                "@" == C && (C = y[a.name]);
                                c = s(C, b);
                                ca[a.name] = c;
                                Ia || Q.data("$" + a.name + "Controller", c);
                                a.controllerAs && (b.$scope[a.controllerAs] = c)
                            });
                        g = 0;
                        for (B = k.length; g < B; g++) try {
                            M = k[g],
                                M(M.isolateScope ? P: e, Q, y, M.require && t(M.directiveName, M.require, Q, ca), ra)
                        } catch(H) {
                            l(H, ia(Q))
                        }
                        g = e;
                        K && (K.template || null === K.templateUrl) && (g = P);
                        a && a(g, f.childNodes, u, n);
                        for (g = q.length - 1; 0 <= g; g--) try {
                            M = q[g],
                                M(M.isolateScope ? P: e, Q, y, M.require && t(M.directiveName, M.require, Q, ca), ra)
                        } catch(D) {
                            l(D, ia(Q))
                        }
                    }
                    n = n || {};
                    for (var y = -Number.MAX_VALUE,
                             M, O = n.controllerDirectives,
                             K = n.newIsolateScopeDirective,
                             I = n.templateDirective,
                             ea = n.nonTlbTranscludeDirective,
                             F = !1,
                             E = !1,
                             Ia = n.hasElementTranscludeDirective,
                             x = d.$$element = A(c), H, z, V, S = e, R, Ha = 0, sa = a.length; Ha < sa; Ha++) {
                        H = a[Ha];
                        var U = H.$$start,
                            Y = H.$$end;
                        U && (x = P(c, U, Y));
                        V = u;
                        if (y > H.priority) break;
                        if (V = H.scope) M = M || H,
                        H.templateUrl || (fb("new/isolated scope", K, H, x), T(V) && (K = H));
                        z = H.name; ! H.templateUrl && H.controller && (V = H.controller, O = O || {},
                            fb("'" + z + "' controller", O[z], H, x), O[z] = H);
                        if (V = H.transclude) F = !0,
                        H.$$tlb || (fb("transclusion", ea, H, x), ea = H),
                            "element" == V ? (Ia = !0, y = H.priority, V = x, x = d.$$element = A(X.createComment(" " + z + ": " + d[z] + " ")), c = x[0], ra(f, wa.call(V, 0), c), S = B(V, e, y, g && g.name, {
                                nonTlbTranscludeDirective: ea
                            })) : (V = A(Kb(c)).contents(), x.empty(), S = B(V, e));
                        if (H.template) if (E = !0, fb("template", I, H, x), I = H, V = N(H.template) ? H.template(x, d) : H.template, V = W(V), H.replace) {
                            g = H;
                            V = Ib.test(V) ? A($(V)) : [];
                            c = V[0];
                            if (1 != V.length || 1 !== c.nodeType) throw ja("tplrt", z, "");
                            ra(f, x, c);
                            sa = {
                                $attr: {}
                            };
                            V = ca(c, [], sa);
                            var Z = a.splice(Ha + 1, a.length - (Ha + 1));
                            K && D(V);
                            a = a.concat(V).concat(Z);
                            v(d, sa);
                            sa = a.length
                        } else x.html(V);
                        if (H.templateUrl) E = !0,
                            fb("template", I, H, x),
                            I = H,
                        H.replace && (g = H),
                            J = te(a.splice(Ha, a.length - Ha), x, d, f, F && S, k, q, {
                                controllerDirectives: O,
                                newIsolateScopeDirective: K,
                                templateDirective: I,
                                nonTlbTranscludeDirective: ea
                            }),
                            sa = a.length;
                        else if (H.compile) try {
                            R = H.compile(x, d, S),
                                N(R) ? w(null, R, U, Y) : R && w(R.pre, R.post, U, Y)
                        } catch(ve) {
                            l(ve, ia(x))
                        }
                        H.terminal && (J.terminal = !0, y = Math.max(y, H.priority))
                    }
                    J.scope = M && !0 === M.scope;
                    J.transcludeOnThisElement = F;
                    J.templateOnThisElement = E;
                    J.transclude = S;
                    n.hasElementTranscludeDirective = Ia;
                    return J
                }
                function D(a) {
                    for (var b = 0,
                             c = a.length; b < c; b++) a[b] = $b(a[b], {
                        $$isolateScope: !0
                    })
                }
                function ea(b, e, f, g, p, m, n) {
                    if (e === p) return null;
                    p = null;
                    if (c.hasOwnProperty(e)) {
                        var q;
                        e = a.get(e + d);
                        for (var w = 0,
                                 s = e.length; w < s; w++) try {
                            q = e[w],
                            (g === u || g > q.priority) && -1 != q.restrict.indexOf(f) && (m && (q = $b(q, {
                                $$start: m,
                                $$end: n
                            })), b.push(q), p = q)
                        } catch(y) {
                            l(y)
                        }
                    }
                    return p
                }
                function v(a, b) {
                    var c = b.$attr,
                        d = a.$attr,
                        e = a.$$element;
                    r(a,
                        function(d, e) {
                            "$" != e.charAt(0) && (b[e] && b[e] !== d && (d += ("style" === e ? ";": " ") + b[e]), a.$set(e, d, !0, c[e]))
                        });
                    r(b,
                        function(b, f) {
                            "class" == f ? (ba(e, b), a["class"] = (a["class"] ? a["class"] + " ": "") + b) : "style" == f ? (e.attr("style", e.attr("style") + ";" + b), a.style = (a.style ? a.style + ";": "") + b) : "$" == f.charAt(0) || a.hasOwnProperty(f) || (a[f] = b, d[f] = c[f])
                        })
                }
                function te(a, b, c, d, e, f, g, k) {
                    var p = [],
                        l,
                        m,
                        w = b[0],
                        s = a.shift(),
                        y = E({},
                            s, {
                                templateUrl: null,
                                transclude: null,
                                replace: null,
                                $$originalDirective: s
                            }),
                        J = N(s.templateUrl) ? s.templateUrl(b, c) : s.templateUrl;
                    b.empty();
                    n.get(t.getTrustedResourceUrl(J), {
                        cache: q
                    }).success(function(q) {
                        var n, t;
                        q = W(q);
                        if (s.replace) {
                            q = Ib.test(q) ? A($(q)) : [];
                            n = q[0];
                            if (1 != q.length || 1 !== n.nodeType) throw ja("tplrt", s.name, J);
                            q = {
                                $attr: {}
                            };
                            ra(d, b, n);
                            var B = ca(n, [], q);
                            T(s.scope) && D(B);
                            a = B.concat(a);
                            v(c, q)
                        } else n = w,
                            b.html(q);
                        a.unshift(y);
                        l = I(a, n, c, e, b, s, f, g, k);
                        r(d,
                            function(a, c) {
                                a == n && (d[c] = b[0])
                            });
                        for (m = O(b[0].childNodes, e); p.length;) {
                            q = p.shift();
                            t = p.shift();
                            var K = p.shift(),
                                C = p.shift(),
                                B = b[0];
                            if (t !== w) {
                                var P = t.className;
                                k.hasElementTranscludeDirective && s.replace || (B = Kb(n));
                                ra(K, A(t), B);
                                ba(A(B), P)
                            }
                            t = l.transcludeOnThisElement ? M(q, l.transclude, C) : C;
                            l(m, q, B, d, t)
                        }
                        p = null
                    }).error(function(a, b, c, d) {
                        throw ja("tpload", d.url);
                    });
                    return function(a, b, c, d, e) {
                        a = e;
                        p ? (p.push(b), p.push(c), p.push(d), p.push(a)) : (l.transcludeOnThisElement && (a = M(b, l.transclude, e)), l(m, b, c, d, a))
                    }
                }
                function F(a, b) {
                    var c = b.priority - a.priority;
                    return 0 !== c ? c: a.name !== b.name ? a.name < b.name ? -1 : 1 : a.index - b.index
                }
                function fb(a, b, c, d) {
                    if (b) throw ja("multidir", b.name, c.name, a, ia(d));
                }
                function x(a, c) {
                    var d = b(c, !0);
                    d && a.push({
                        priority: 0,
                        compile: function(a) {
                            var b = a.parent().length;
                            b && ba(a.parent(), "ng-binding");
                            return function(a, c) {
                                var e = c.parent(),
                                    f = e.data("$binding") || [];
                                f.push(d);
                                e.data("$binding", f);
                                b || ba(e, "ng-binding");
                                a.$watch(d,
                                    function(a) {
                                        c[0].nodeValue = a
                                    })
                            }
                        }
                    })
                }
                function z(a, b) {
                    if ("srcdoc" == b) return t.HTML;
                    var c = Pa(a);
                    if ("xlinkHref" == b || "FORM" == c && "action" == b || "IMG" != c && ("src" == b || "ngSrc" == b)) return t.RESOURCE_URL
                }
                function S(a, c, d, e) {
                    var f = b(d, !0);
                    if (f) {
                        if ("multiple" === e && "SELECT" === Pa(a)) throw ja("selmulti", ia(a));
                        c.push({
                            priority: 100,
                            compile: function() {
                                return {
                                    pre: function(c, d, k) {
                                        d = k.$$observers || (k.$$observers = {});
                                        if (g.test(e)) throw ja("nodomevents");
                                        if (f = b(k[e], !0, z(a, e))) k[e] = f(c),
                                            (d[e] || (d[e] = [])).$$inter = !0,
                                            (k.$$observers && k.$$observers[e].$$scope || c).$watch(f,
                                                function(a, b) {
                                                    "class" === e && a != b ? k.$updateClass(a, b) : k.$set(e, a)
                                                })
                                    }
                                }
                            }
                        })
                    }
                }
                function ra(a, b, c) {
                    var d = b[0],
                        e = b.length,
                        f = d.parentNode,
                        g,
                        k;
                    if (a) for (g = 0, k = a.length; g < k; g++) if (a[g] == d) {
                        a[g++] = c;
                        k = g + e - 1;
                        for (var p = a.length; g < p; g++, k++) k < p ? a[g] = a[k] : delete a[g];
                        a.length -= e - 1;
                        break
                    }
                    f && f.replaceChild(c, d);
                    a = X.createDocumentFragment();
                    a.appendChild(d);
                    c[A.expando] = d[A.expando];
                    d = 1;
                    for (e = b.length; d < e; d++) f = b[d],
                        A(f).remove(),
                        a.appendChild(f),
                        delete b[d];
                    b[0] = c;
                    b.length = 1
                }
                function rc(a, b) {
                    return E(function() {
                            return a.apply(null, arguments)
                        },
                        a, b)
                }
                var Ob = function(a, b) {
                    this.$$element = a;
                    this.$attr = b || {}
                };
                Ob.prototype = {
                    $normalize: qa,
                    $addClass: function(a) {
                        a && 0 < a.length && y.addClass(this.$$element, a)
                    },
                    $removeClass: function(a) {
                        a && 0 < a.length && y.removeClass(this.$$element, a)
                    },
                    $updateClass: function(a, b) {
                        var c = sc(a, b),
                            d = sc(b, a);
                        0 === c.length ? y.removeClass(this.$$element, d) : 0 === d.length ? y.addClass(this.$$element, c) : y.setClass(this.$$element, c, d)
                    },
                    $set: function(a, b, c, d) {
                        var e = oc(this.$$element[0], a);
                        e && (this.$$element.prop(a, b), d = e);
                        this[a] = b;
                        d ? this.$attr[a] = d: (d = this.$attr[a]) || (this.$attr[a] = d = nb(a, "-"));
                        e = Pa(this.$$element);
                        if ("A" === e && "href" === a || "IMG" === e && "src" === a) this[a] = b = K(b, "src" === a); ! 1 !== c && (null === b || b === u ? this.$$element.removeAttr(d) : this.$$element.attr(d, b)); (c = this.$$observers) && r(c[a],
                            function(a) {
                                try {
                                    a(b)
                                } catch(c) {
                                    l(c)
                                }
                            })
                    },
                    $observe: function(a, b) {
                        var c = this,
                            d = c.$$observers || (c.$$observers = {}),
                            e = d[a] || (d[a] = []);
                        e.push(b);
                        J.$evalAsync(function() {
                            e.$$inter || b(c[a])
                        });
                        return b
                    }
                };
                var sa = b.startSymbol(),
                    Ia = b.endSymbol(),
                    W = "{{" == sa || "}}" == Ia ? ga: function(a) {
                        return a.replace(/\{\{/g, sa).replace(/}}/g, Ia)
                    },
                    U = /^ngAttr[A-Z]/;
                return B
            }]
    }
    function qa(b) {
        return ab(b.replace(we, ""))
    }
    function sc(b, a) {
        var c = "",
            d = b.split(/\s+/),
            e = a.split(/\s+/),
            f = 0;
        a: for (; f < d.length; f++) {
            for (var g = d[f], h = 0; h < e.length; h++) if (g == e[h]) continue a;
            c += (0 < c.length ? " ": "") + g
        }
        return c
    }
    function Od() {
        var b = {},
            a = /^(\S+)(\s+as\s+(\w+))?$/;
        this.register = function(a, d) {
            Ea(a, "controller");
            T(a) ? E(b, a) : b[a] = d
        };
        this.$get = ["$injector", "$window",
            function(c, d) {
                return function(e, f) {
                    var g, h, k;
                    G(e) && (g = e.match(a), h = g[1], k = g[3], e = b.hasOwnProperty(h) ? b[h] : fc(f.$scope, h, !0) || fc(d, h, !0), Ya(e, h, !0));
                    g = c.instantiate(e, f);
                    if (k) {
                        if (!f || "object" !== typeof f.$scope) throw z("$controller")("noscp", h || e.name, k);
                        f.$scope[k] = g
                    }
                    return g
                }
            }]
    }
    function Pd() {
        this.$get = ["$window",
            function(b) {
                return A(b.document)
            }]
    }
    function Qd() {
        this.$get = ["$log",
            function(b) {
                return function(a, c) {
                    b.error.apply(b, arguments)
                }
            }]
    }
    function tc(b) {
        var a = {},
            c, d, e;
        if (!b) return a;
        r(b.split("\n"),
            function(b) {
                e = b.indexOf(":");
                c = x($(b.substr(0, e)));
                d = $(b.substr(e + 1));
                c && (a[c] = a[c] ? a[c] + ", " + d: d)
            });
        return a
    }
    function uc(b) {
        var a = T(b) ? b: u;
        return function(c) {
            a || (a = tc(b));
            return c ? a[x(c)] || null: a
        }
    }
    function vc(b, a, c) {
        if (N(c)) return c(b, a);
        r(c,
            function(c) {
                b = c(b, a)
            });
        return b
    }
    function Td() {
        var b = /^\s*(\[|\{[^\{])/,
            a = /[\}\]]\s*$/,
            c = /^\)\]\}',?\n/,
            d = {
                "Content-Type": "application/json;charset=utf-8"
            },
            e = this.defaults = {
                transformResponse: [function(d) {
                    G(d) && (d = d.replace(c, ""), b.test(d) && a.test(d) && (d = ac(d)));
                    return d
                }],
                transformRequest: [function(a) {
                    return T(a) && "[object File]" !== Ba.call(a) && "[object Blob]" !== Ba.call(a) ? oa(a) : a
                }],
                headers: {
                    common: {
                        Accept: "application/json, text/plain, */*"
                    },
                    post: ha(d),
                    put: ha(d),
                    patch: ha(d)
                },
                xsrfCookieName: "XSRF-TOKEN",
                xsrfHeaderName: "X-XSRF-TOKEN"
            },
            f = this.interceptors = [],
            g = this.responseInterceptors = [];
        this.$get = ["$httpBackend", "$browser", "$cacheFactory", "$rootScope", "$q", "$injector",
            function(a, b, c, d, n, q) {
                function p(a) {
                    function b(a) {
                        var d = E({},
                            a, {
                                data: vc(a.data, a.headers, c.transformResponse)
                            });
                        return 200 <= a.status && 300 > a.status ? d: n.reject(d)
                    }
                    var c = {
                            method: "get",
                            transformRequest: e.transformRequest,
                            transformResponse: e.transformResponse
                        },
                        d = function(a) {
                            var b = e.headers,
                                c = E({},
                                    a.headers),
                                d,
                                f,
                                b = E({},
                                    b.common, b[x(a.method)]);
                            a: for (d in b) {
                                a = x(d);
                                for (f in c) if (x(f) === a) continue a;
                                c[d] = b[d]
                            } (function(a) {
                                var b;
                                r(a,
                                    function(c, d) {
                                        N(c) && (b = c(), null != b ? a[d] = b: delete a[d])
                                    })
                            })(c);
                            return c
                        } (a);
                    E(c, a);
                    c.headers = d;
                    c.method = La(c.method);
                    var f = [function(a) {
                            d = a.headers;
                            var c = vc(a.data, uc(d), a.transformRequest);
                            F(c) && r(d,
                                function(a, b) {
                                    "content-type" === x(b) && delete d[b]
                                });
                            F(a.withCredentials) && !F(e.withCredentials) && (a.withCredentials = e.withCredentials);
                            return s(a, c, d).then(b, b)
                        },
                            u],
                        g = n.when(c);
                    for (r(t,
                        function(a) { (a.request || a.requestError) && f.unshift(a.request, a.requestError); (a.response || a.responseError) && f.push(a.response, a.responseError)
                        }); f.length;) {
                        a = f.shift();
                        var h = f.shift(),
                            g = g.then(a, h)
                    }
                    g.success = function(a) {
                        g.then(function(b) {
                            a(b.data, b.status, b.headers, c)
                        });
                        return g
                    };
                    g.error = function(a) {
                        g.then(null,
                            function(b) {
                                a(b.data, b.status, b.headers, c)
                            });
                        return g
                    };
                    return g
                }
                function s(c, f, g) {
                    function m(a, b, c, e) {
                        C && (200 <= a && 300 > a ? C.put(A, [a, b, tc(c), e]) : C.remove(A));
                        q(b, a, c, e);
                        d.$$phase || d.$apply()
                    }
                    function q(a, b, d, e) {
                        b = Math.max(b, 0); (200 <= b && 300 > b ? t.resolve: t.reject)({
                            data: a,
                            status: b,
                            headers: uc(d),
                            config: c,
                            statusText: e
                        })
                    }
                    function s() {
                        var a = Ta(p.pendingRequests, c); - 1 !== a && p.pendingRequests.splice(a, 1)
                    }
                    var t = n.defer(),
                        r = t.promise,
                        C,
                        I,
                        A = J(c.url, c.params);
                    p.pendingRequests.push(c);
                    r.then(s, s); ! c.cache && !e.cache || (!1 === c.cache || "GET" !== c.method && "JSONP" !== c.method) || (C = T(c.cache) ? c.cache: T(e.cache) ? e.cache: w);
                    if (C) if (I = C.get(A), D(I)) {
                        if (I && N(I.then)) return I.then(s, s),
                            I;
                        L(I) ? q(I[1], I[0], ha(I[2]), I[3]) : q(I, 200, {},
                            "OK")
                    } else C.put(A, r);
                    F(I) && ((I = Pb(c.url) ? b.cookies()[c.xsrfCookieName || e.xsrfCookieName] : u) && (g[c.xsrfHeaderName || e.xsrfHeaderName] = I), a(c.method, A, f, m, g, c.timeout, c.withCredentials, c.responseType));
                    return r
                }
                function J(a, b) {
                    if (!b) return a;
                    var c = [];
                    Sc(b,
                        function(a, b) {
                            null === a || F(a) || (L(a) || (a = [a]), r(a,
                                function(a) {
                                    T(a) && (a = va(a) ? a.toISOString() : oa(a));
                                    c.push(Da(b) + "=" + Da(a))
                                }))
                        });
                    0 < c.length && (a += ( - 1 == a.indexOf("?") ? "?": "&") + c.join("&"));
                    return a
                }
                var w = c("$http"),
                    t = [];
                r(f,
                    function(a) {
                        t.unshift(G(a) ? q.get(a) : q.invoke(a))
                    });
                r(g,
                    function(a, b) {
                        var c = G(a) ? q.get(a) : q.invoke(a);
                        t.splice(b, 0, {
                            response: function(a) {
                                return c(n.when(a))
                            },
                            responseError: function(a) {
                                return c(n.reject(a))
                            }
                        })
                    });
                p.pendingRequests = []; (function(a) {
                    r(arguments,
                        function(a) {
                            p[a] = function(b, c) {
                                return p(E(c || {},
                                    {
                                        method: a,
                                        url: b
                                    }))
                            }
                        })
                })("get", "delete", "head", "jsonp"); (function(a) {
                    r(arguments,
                        function(a) {
                            p[a] = function(b, c, d) {
                                return p(E(d || {},
                                    {
                                        method: a,
                                        url: b,
                                        data: c
                                    }))
                            }
                        })
                })("post", "put", "patch");
                p.defaults = e;
                return p
            }]
    }
    function xe(b) {
        if (8 >= R && (!b.match(/^(get|post|head|put|delete|options)$/i) || !W.XMLHttpRequest)) return new W.ActiveXObject("Microsoft.XMLHTTP");
        if (W.XMLHttpRequest) return new W.XMLHttpRequest;
        throw z("$httpBackend")("noxhr");
    }
    function Ud() {
        this.$get = ["$browser", "$window", "$document",
            function(b, a, c) {
                return ye(b, xe, b.defer, a.angular.callbacks, c[0])
            }]
    }
    function ye(b, a, c, d, e) {
        function f(a, b, c) {
            var f = e.createElement("script"),
                g = null;
            f.type = "text/javascript";
            f.src = a;
            f.async = !0;
            g = function(a) {
                bb(f, "load", g);
                bb(f, "error", g);
                e.body.removeChild(f);
                f = null;
                var h = -1,
                    s = "unknown";
                a && ("load" !== a.type || d[b].called || (a = {
                    type: "error"
                }), s = a.type, h = "error" === a.type ? 404 : 200);
                c && c(h, s)
            };
            sb(f, "load", g);
            sb(f, "error", g);
            8 >= R && (f.onreadystatechange = function() {
                G(f.readyState) && /loaded|complete/.test(f.readyState) && (f.onreadystatechange = null, g({
                    type: "load"
                }))
            });
            e.body.appendChild(f);
            return g
        }
        var g = -1;
        return function(e, k, m, l, n, q, p, s) {
            function J() {
                t = g;
                K && K();
                B && B.abort()
            }
            function w(a, d, e, f, g) {
                O && c.cancel(O);
                K = B = null;
                0 === d && (d = e ? 200 : "file" == xa(k).protocol ? 404 : 0);
                a(1223 === d ? 204 : d, e, f, g || "");
                b.$$completeOutstandingRequest(v)
            }
            var t;
            b.$$incOutstandingRequestCount();
            k = k || b.url();
            if ("jsonp" == x(e)) {
                var y = "_" + (d.counter++).toString(36);
                d[y] = function(a) {
                    d[y].data = a;
                    d[y].called = !0
                };
                var K = f(k.replace("JSON_CALLBACK", "angular.callbacks." + y), y,
                    function(a, b) {
                        w(l, a, d[y].data, "", b);
                        d[y] = v
                    })
            } else {
                var B = a(e);
                B.open(e, k, !0);
                r(n,
                    function(a, b) {
                        D(a) && B.setRequestHeader(b, a)
                    });
                B.onreadystatechange = function() {
                    if (B && 4 == B.readyState) {
                        var a = null,
                            b = null,
                            c = "";
                        t !== g && (a = B.getAllResponseHeaders(), b = "response" in B ? B.response: B.responseText);
                        t === g && 10 > R || (c = B.statusText);
                        w(l, t || B.status, b, a, c)
                    }
                };
                p && (B.withCredentials = !0);
                if (s) try {
                    B.responseType = s
                } catch(ba) {
                    if ("json" !== s) throw ba;
                }
                B.send(m || null)
            }
            if (0 < q) var O = c(J, q);
            else q && N(q.then) && q.then(J)
        }
    }
    function Rd() {
        var b = "{{",
            a = "}}";
        this.startSymbol = function(a) {
            return a ? (b = a, this) : b
        };
        this.endSymbol = function(b) {
            return b ? (a = b, this) : a
        };
        this.$get = ["$parse", "$exceptionHandler", "$sce",
            function(c, d, e) {
                function f(f, m, l) {
                    for (var n, q, p = 0,
                             s = [], J = f.length, w = !1, t = []; p < J;) - 1 != (n = f.indexOf(b, p)) && -1 != (q = f.indexOf(a, n + g)) ? (p != n && s.push(f.substring(p, n)), s.push(p = c(w = f.substring(n + g, q))), p.exp = w, p = q + h, w = !0) : (p != J && s.push(f.substring(p)), p = J); (J = s.length) || (s.push(""), J = 1);
                    if (l && 1 < s.length) throw wc("noconcat", f);
                    if (!m || w) return t.length = J,
                        p = function(a) {
                            try {
                                for (var b = 0,
                                         c = J,
                                         g; b < c; b++) {
                                    if ("function" == typeof(g = s[b])) if (g = g(a), g = l ? e.getTrusted(l, g) : e.valueOf(g), null == g) g = "";
                                    else switch (typeof g) {
                                            case "string":
                                                break;
                                            case "number":
                                                g = "" + g;
                                                break;
                                            default:
                                                g = oa(g)
                                        }
                                    t[b] = g
                                }
                                return t.join("")
                            } catch(h) {
                                a = wc("interr", f, h.toString()),
                                    d(a)
                            }
                        },
                        p.exp = f,
                        p.parts = s,
                        p
                }
                var g = b.length,
                    h = a.length;
                f.startSymbol = function() {
                    return b
                };
                f.endSymbol = function() {
                    return a
                };
                return f
            }]
    }
    function Sd() {
        this.$get = ["$rootScope", "$window", "$q",
            function(b, a, c) {
                function d(d, g, h, k) {
                    var m = a.setInterval,
                        l = a.clearInterval,
                        n = c.defer(),
                        q = n.promise,
                        p = 0,
                        s = D(k) && !k;
                    h = D(h) ? h: 0;
                    q.then(null, null, d);
                    q.$$intervalId = m(function() {
                            n.notify(p++);
                            0 < h && p >= h && (n.resolve(p), l(q.$$intervalId), delete e[q.$$intervalId]);
                            s || b.$apply()
                        },
                        g);
                    e[q.$$intervalId] = n;
                    return q
                }
                var e = {};
                d.cancel = function(b) {
                    return b && b.$$intervalId in e ? (e[b.$$intervalId].reject("canceled"), a.clearInterval(b.$$intervalId), delete e[b.$$intervalId], !0) : !1
                };
                return d
            }]
    }
    function ad() {
        this.$get = function() {
            return {
                id: "en-us",
                NUMBER_FORMATS: {
                    DECIMAL_SEP: ".",
                    GROUP_SEP: ",",
                    PATTERNS: [{
                        minInt: 1,
                        minFrac: 0,
                        maxFrac: 3,
                        posPre: "",
                        posSuf: "",
                        negPre: "-",
                        negSuf: "",
                        gSize: 3,
                        lgSize: 3
                    },
                        {
                            minInt: 1,
                            minFrac: 2,
                            maxFrac: 2,
                            posPre: "\u00a4",
                            posSuf: "",
                            negPre: "(\u00a4",
                            negSuf: ")",
                            gSize: 3,
                            lgSize: 3
                        }],
                    CURRENCY_SYM: "$"
                },
                DATETIME_FORMATS: {
                    MONTH: "January February March April May June July August September October November December".split(" "),
                    SHORTMONTH: "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
                    DAY: "Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
                    SHORTDAY: "Sun Mon Tue Wed Thu Fri Sat".split(" "),
                    AMPMS: ["AM", "PM"],
                    medium: "MMM d, y h:mm:ss a",
                    "short": "M/d/yy h:mm a",
                    fullDate: "EEEE, MMMM d, y",
                    longDate: "MMMM d, y",
                    mediumDate: "MMM d, y",
                    shortDate: "M/d/yy",
                    mediumTime: "h:mm:ss a",
                    shortTime: "h:mm a"
                },
                pluralCat: function(b) {
                    return 1 === b ? "one": "other"
                }
            }
        }
    }
    function Qb(b) {
        b = b.split("/");
        for (var a = b.length; a--;) b[a] = mb(b[a]);
        return b.join("/")
    }
    function xc(b, a, c) {
        b = xa(b, c);
        a.$$protocol = b.protocol;
        a.$$host = b.hostname;
        a.$$port = U(b.port) || ze[b.protocol] || null
    }
    function yc(b, a, c) {
        var d = "/" !== b.charAt(0);
        d && (b = "/" + b);
        b = xa(b, c);
        a.$$path = decodeURIComponent(d && "/" === b.pathname.charAt(0) ? b.pathname.substring(1) : b.pathname);
        a.$$search = cc(b.search);
        a.$$hash = decodeURIComponent(b.hash);
        a.$$path && "/" != a.$$path.charAt(0) && (a.$$path = "/" + a.$$path)
    }
    function ta(b, a) {
        if (0 === a.indexOf(b)) return a.substr(b.length)
    }
    function Ga(b) {
        var a = b.indexOf("#");
        return - 1 == a ? b: b.substr(0, a)
    }
    function Rb(b) {
        return b.substr(0, Ga(b).lastIndexOf("/") + 1)
    }
    function zc(b, a) {
        this.$$html5 = !0;
        a = a || "";
        var c = Rb(b);
        xc(b, this, b);
        this.$$parse = function(a) {
            var e = ta(c, a);
            if (!G(e)) throw Sb("ipthprfx", a, c);
            yc(e, this, b);
            this.$$path || (this.$$path = "/");
            this.$$compose()
        };
        this.$$compose = function() {
            var a = Cb(this.$$search),
                b = this.$$hash ? "#" + mb(this.$$hash) : "";
            this.$$url = Qb(this.$$path) + (a ? "?" + a: "") + b;
            this.$$absUrl = c + this.$$url.substr(1)
        };
        this.$$parseLinkUrl = function(d, e) {
            var f, g; (f = ta(b, d)) !== u ? (g = f, g = (f = ta(a, f)) !== u ? c + (ta("/", f) || f) : b + g) : (f = ta(c, d)) !== u ? g = c + f: c == d + "/" && (g = c);
            g && this.$$parse(g);
            return !! g
        }
    }
    function Tb(b, a) {
        var c = Rb(b);
        xc(b, this, b);
        this.$$parse = function(d) {
            var e = ta(b, d) || ta(c, d),
                e = "#" == e.charAt(0) ? ta(a, e) : this.$$html5 ? e: "";
            if (!G(e)) throw Sb("ihshprfx", d, a);
            yc(e, this, b);
            d = this.$$path;
            var f = /^\/[A-Z]:(\/.*)/;
            0 === e.indexOf(b) && (e = e.replace(b, ""));
            f.exec(e) || (d = (e = f.exec(d)) ? e[1] : d);
            this.$$path = d;
            this.$$compose()
        };
        this.$$compose = function() {
            var c = Cb(this.$$search),
                e = this.$$hash ? "#" + mb(this.$$hash) : "";
            this.$$url = Qb(this.$$path) + (c ? "?" + c: "") + e;
            this.$$absUrl = b + (this.$$url ? a + this.$$url: "")
        };
        this.$$parseLinkUrl = function(a, c) {
            return Ga(b) == Ga(a) ? (this.$$parse(a), !0) : !1
        }
    }
    function Ac(b, a) {
        this.$$html5 = !0;
        Tb.apply(this, arguments);
        var c = Rb(b);
        this.$$parseLinkUrl = function(d, e) {
            var f, g;
            b == Ga(d) ? f = d: (g = ta(c, d)) ? f = b + a + g: c === d + "/" && (f = c);
            f && this.$$parse(f);
            return !! f
        };
        this.$$compose = function() {
            var c = Cb(this.$$search),
                e = this.$$hash ? "#" + mb(this.$$hash) : "";
            this.$$url = Qb(this.$$path) + (c ? "?" + c: "") + e;
            this.$$absUrl = b + a + this.$$url
        }
    }
    function tb(b) {
        return function() {
            return this[b]
        }
    }
    function Bc(b, a) {
        return function(c) {
            if (F(c)) return this[b];
            this[b] = a(c);
            this.$$compose();
            return this
        }
    }
    function Vd() {
        var b = "",
            a = !1;
        this.hashPrefix = function(a) {
            return D(a) ? (b = a, this) : b
        };
        this.html5Mode = function(b) {
            return D(b) ? (a = b, this) : a
        };
        this.$get = ["$rootScope", "$browser", "$sniffer", "$rootElement",
            function(c, d, e, f) {
                function g(a) {
                    c.$broadcast("$locationChangeSuccess", h.absUrl(), a)
                }
                var h, k = d.baseHref(),
                    m = d.url();
                a ? (k = m.substring(0, m.indexOf("/", m.indexOf("//") + 2)) + (k || "/"), e = e.history ? zc: Ac) : (k = Ga(m), e = Tb);
                h = new e(k, "#" + b);
                h.$$parseLinkUrl(m, m);
                var l = /^\s*(javascript|mailto):/i;
                f.on("click",
                    function(a) {
                        if (!a.ctrlKey && !a.metaKey && 2 != a.which) {
                            for (var b = A(a.target);
                                 "a" !== x(b[0].nodeName);) if (b[0] === f[0] || !(b = b.parent())[0]) return;
                            var e = b.prop("href"),
                                g = b.attr("href") || b.attr("xlink:href");
                            T(e) && "[object SVGAnimatedString]" === e.toString() && (e = xa(e.animVal).href);
                            l.test(e) || (!e || (b.attr("target") || a.isDefaultPrevented()) || !h.$$parseLinkUrl(e, g)) || (a.preventDefault(), h.absUrl() != d.url() && (c.$apply(), W.angular["ff-684208-preventDefault"] = !0))
                        }
                    });
                h.absUrl() != m && d.url(h.absUrl(), !0);
                d.onUrlChange(function(a) {
                    h.absUrl() != a && (c.$evalAsync(function() {
                        var b = h.absUrl();
                        h.$$parse(a);
                        c.$broadcast("$locationChangeStart", a, b).defaultPrevented ? (h.$$parse(b), d.url(b)) : g(b)
                    }), c.$$phase || c.$digest())
                });
                var n = 0;
                c.$watch(function() {
                    var a = d.url(),
                        b = h.$$replace;
                    n && a == h.absUrl() || (n++, c.$evalAsync(function() {
                        c.$broadcast("$locationChangeStart", h.absUrl(), a).defaultPrevented ? h.$$parse(a) : (d.url(h.absUrl(), b), g(a))
                    }));
                    h.$$replace = !1;
                    return n
                });
                return h
            }]
    }
    function Wd() {
        var b = !0,
            a = this;
        this.debugEnabled = function(a) {
            return D(a) ? (b = a, this) : b
        };
        this.$get = ["$window",
            function(c) {
                function d(a) {
                    a instanceof Error && (a.stack ? a = a.message && -1 === a.stack.indexOf(a.message) ? "Error: " + a.message + "\n" + a.stack: a.stack: a.sourceURL && (a = a.message + "\n" + a.sourceURL + ":" + a.line));
                    return a
                }
                function e(a) {
                    var b = c.console || {},
                        e = b[a] || b.log || v;
                    a = !1;
                    try {
                        a = !!e.apply
                    } catch(k) {}
                    return a ?
                        function() {
                            var a = [];
                            r(arguments,
                                function(b) {
                                    a.push(d(b))
                                });
                            return e.apply(b, a)
                        }: function(a, b) {
                            e(a, null == b ? "": b)
                        }
                }
                return {
                    log: e("log"),
                    info: e("info"),
                    warn: e("warn"),
                    error: e("error"),
                    debug: function() {
                        var c = e("debug");
                        return function() {
                            b && c.apply(a, arguments)
                        }
                    } ()
                }
            }]
    }
    function ka(b, a) {
        if ("__defineGetter__" === b || "__defineSetter__" === b || "__lookupGetter__" === b || "__lookupSetter__" === b || "__proto__" === b) throw la("isecfld", a);
        return b
    }
    function ma(b, a) {
        if (b) {
            if (b.constructor === b) throw la("isecfn", a);
            if (b.document && b.location && b.alert && b.setInterval) throw la("isecwindow", a);
            if (b.children && (b.nodeName || b.prop && b.attr && b.find)) throw la("isecdom", a);
            if (b === Object) throw la("isecobj", a);
        }
        return b
    }
    function ub(b, a, c, d, e) {
        ma(b, d);
        e = e || {};
        a = a.split(".");
        for (var f, g = 0; 1 < a.length; g++) {
            f = ka(a.shift(), d);
            var h = ma(b[f], d);
            h || (h = {},
                b[f] = h);
            b = h;
            b.then && e.unwrapPromises && (ya(d), "$$v" in b ||
            function(a) {
                a.then(function(b) {
                    a.$$v = b
                })
            } (b), b.$$v === u && (b.$$v = {}), b = b.$$v)
        }
        f = ka(a.shift(), d);
        ma(b[f], d);
        return b[f] = c
    }
    function Qa(b) {
        return "constructor" == b
    }
    function Cc(b, a, c, d, e, f, g) {
        ka(b, f);
        ka(a, f);
        ka(c, f);
        ka(d, f);
        ka(e, f);
        var h = function(a) {
                return ma(a, f)
            },
            k = g.expensiveChecks,
            m = k || Qa(b) ? h: ga,
            l = k || Qa(a) ? h: ga,
            n = k || Qa(c) ? h: ga,
            q = k || Qa(d) ? h: ga,
            p = k || Qa(e) ? h: ga;
        return g.unwrapPromises ?
            function(g, h) {
                var k = h && h.hasOwnProperty(b) ? h: g,
                    t;
                if (null == k) return k; (k = m(k[b])) && k.then && (ya(f), "$$v" in k || (t = k, t.$$v = u, t.then(function(a) {
                    t.$$v = m(a)
                })), k = m(k.$$v));
                if (!a) return k;
                if (null == k) return u; (k = l(k[a])) && k.then && (ya(f), "$$v" in k || (t = k, t.$$v = u, t.then(function(a) {
                    t.$$v = l(a)
                })), k = l(k.$$v));
                if (!c) return k;
                if (null == k) return u; (k = n(k[c])) && k.then && (ya(f), "$$v" in k || (t = k, t.$$v = u, t.then(function(a) {
                    t.$$v = n(a)
                })), k = n(k.$$v));
                if (!d) return k;
                if (null == k) return u; (k = q(k[d])) && k.then && (ya(f), "$$v" in k || (t = k, t.$$v = u, t.then(function(a) {
                    t.$$v = q(a)
                })), k = q(k.$$v));
                if (!e) return k;
                if (null == k) return u; (k = p(k[e])) && k.then && (ya(f), "$$v" in k || (t = k, t.$$v = u, t.then(function(a) {
                    t.$$v = p(a)
                })), k = p(k.$$v));
                return k
            }: function(f, g) {
                var h = g && g.hasOwnProperty(b) ? g: f;
                if (null == h) return h;
                h = m(h[b]);
                if (!a) return h;
                if (null == h) return u;
                h = l(h[a]);
                if (!c) return h;
                if (null == h) return u;
                h = n(h[c]);
                if (!d) return h;
                if (null == h) return u;
                h = q(h[d]);
                return e ? null == h ? u: h = p(h[e]) : h
            }
    }
    function Ae(b, a) {
        return function(c, d) {
            return b(c, d, ya, ma, a)
        }
    }
    function Dc(b, a, c) {
        var d = a.expensiveChecks,
            e = d ? Be: Ce;
        if (e.hasOwnProperty(b)) return e[b];
        var f = b.split("."),
            g = f.length,
            h;
        if (a.csp) h = 6 > g ? Cc(f[0], f[1], f[2], f[3], f[4], c, a) : function(b, d) {
            var e = 0,
                h;
            do h = Cc(f[e++], f[e++], f[e++], f[e++], f[e++], c, a)(b, d),
                d = u,
                b = h;
            while (e < g);
            return h
        };
        else {
            var k = "var p;\n";
            d && (k += "s = eso(s, fe);\nl = eso(l, fe);\n");
            var m = d;
            r(f,
                function(b, e) {
                    ka(b, c);
                    var f = (e ? "s": '((l&&l.hasOwnProperty("' + b + '"))?l:s)') + '["' + b + '"]',
                        g = d || Qa(b);
                    g && (f = "eso(" + f + ", fe)", m = !0);
                    k += "if(s == null) return undefined;\ns=" + f + ";\n";
                    a.unwrapPromises && (k += 'if (s && s.then) {\n pw("' + c.replace(/(["\r\n])/g, "\\$1") + '");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=' + (g ? "eso(v)": "v") + ";});\n}\n s=" + (g ? "eso(s.$$v)": "s.$$v") + "\n}\n")
                });
            k += "return s;";
            h = new Function("s", "l", "pw", "eso", "fe", k);
            h.toString = aa(k);
            if (m || a.unwrapPromises) h = Ae(h, c)
        }
        "hasOwnProperty" !== b && (e[b] = h);
        return h
    }
    function Xd() {
        var b = {},
            a = {},
            c = {
                csp: !1,
                unwrapPromises: !1,
                logPromiseWarnings: !0,
                expensiveChecks: !1
            };
        this.unwrapPromises = function(a) {
            return D(a) ? (c.unwrapPromises = !!a, this) : c.unwrapPromises
        };
        this.logPromiseWarnings = function(a) {
            return D(a) ? (c.logPromiseWarnings = a, this) : c.logPromiseWarnings
        };
        this.$get = ["$filter", "$sniffer", "$log",
            function(d, e, f) {
                c.csp = e.csp;
                var g = {
                    csp: c.csp,
                    unwrapPromises: c.unwrapPromises,
                    logPromiseWarnings: c.logPromiseWarnings,
                    expensiveChecks: !0
                };
                ya = function(a) {
                    c.logPromiseWarnings && !Ec.hasOwnProperty(a) && (Ec[a] = !0, f.warn("[$parse] Promise found in the expression `" + a + "`. Automatic unwrapping of promises in Angular expressions is deprecated."))
                };
                return function(e, f) {
                    var m;
                    switch (typeof e) {
                        case "string":
                            var l = f ? a: b;
                            if (l.hasOwnProperty(e)) return l[e];
                            m = f ? g: c;
                            var n = new Ub(m);
                            m = (new gb(n, d, m)).parse(e);
                            "hasOwnProperty" !== e && (l[e] = m);
                            return m;
                        case "function":
                            return e;
                        default:
                            return v
                    }
                }
            }]
    }
    function Zd() {
        this.$get = ["$rootScope", "$exceptionHandler",
            function(b, a) {
                return De(function(a) {
                        b.$evalAsync(a)
                    },
                    a)
            }]
    }
    function De(b, a) {
        function c(a) {
            return a
        }
        function d(a) {
            return g(a)
        }
        var e = function() {
                var g = [],
                    m,
                    l;
                return l = {
                    resolve: function(a) {
                        if (g) {
                            var c = g;
                            g = u;
                            m = f(a);
                            c.length && b(function() {
                                for (var a, b = 0,
                                         d = c.length; b < d; b++) a = c[b],
                                    m.then(a[0], a[1], a[2])
                            })
                        }
                    },
                    reject: function(a) {
                        l.resolve(h(a))
                    },
                    notify: function(a) {
                        if (g) {
                            var c = g;
                            g.length && b(function() {
                                for (var b, d = 0,
                                         e = c.length; d < e; d++) b = c[d],
                                    b[2](a)
                            })
                        }
                    },
                    promise: {
                        then: function(b, f, h) {
                            var l = e(),
                                J = function(d) {
                                    try {
                                        l.resolve((N(b) ? b: c)(d))
                                    } catch(e) {
                                        l.reject(e),
                                            a(e)
                                    }
                                },
                                w = function(b) {
                                    try {
                                        l.resolve((N(f) ? f: d)(b))
                                    } catch(c) {
                                        l.reject(c),
                                            a(c)
                                    }
                                },
                                t = function(b) {
                                    try {
                                        l.notify((N(h) ? h: c)(b))
                                    } catch(d) {
                                        a(d)
                                    }
                                };
                            g ? g.push([J, w, t]) : m.then(J, w, t);
                            return l.promise
                        },
                        "catch": function(a) {
                            return this.then(null, a)
                        },
                        "finally": function(a) {
                            function b(a, c) {
                                var d = e();
                                c ? d.resolve(a) : d.reject(a);
                                return d.promise
                            }
                            function d(e, f) {
                                var g = null;
                                try {
                                    g = (a || c)()
                                } catch(h) {
                                    return b(h, !1)
                                }
                                return g && N(g.then) ? g.then(function() {
                                        return b(e, f)
                                    },
                                    function(a) {
                                        return b(a, !1)
                                    }) : b(e, f)
                            }
                            return this.then(function(a) {
                                    return d(a, !0)
                                },
                                function(a) {
                                    return d(a, !1)
                                })
                        }
                    }
                }
            },
            f = function(a) {
                return a && N(a.then) ? a: {
                    then: function(c) {
                        var d = e();
                        b(function() {
                            d.resolve(c(a))
                        });
                        return d.promise
                    }
                }
            },
            g = function(a) {
                var b = e();
                b.reject(a);
                return b.promise
            },
            h = function(c) {
                return {
                    then: function(f, g) {
                        var h = e();
                        b(function() {
                            try {
                                h.resolve((N(g) ? g: d)(c))
                            } catch(b) {
                                h.reject(b),
                                    a(b)
                            }
                        });
                        return h.promise
                    }
                }
            };
        return {
            defer: e,
            reject: g,
            when: function(h, m, l, n) {
                var q = e(),
                    p,
                    s = function(b) {
                        try {
                            return (N(m) ? m: c)(b)
                        } catch(d) {
                            return a(d),
                                g(d)
                        }
                    },
                    J = function(b) {
                        try {
                            return (N(l) ? l: d)(b)
                        } catch(c) {
                            return a(c),
                                g(c)
                        }
                    },
                    w = function(b) {
                        try {
                            return (N(n) ? n: c)(b)
                        } catch(d) {
                            a(d)
                        }
                    };
                b(function() {
                    f(h).then(function(a) {
                            p || (p = !0, q.resolve(f(a).then(s, J, w)))
                        },
                        function(a) {
                            p || (p = !0, q.resolve(J(a)))
                        },
                        function(a) {
                            p || q.notify(w(a))
                        })
                });
                return q.promise
            },
            all: function(a) {
                var b = e(),
                    c = 0,
                    d = L(a) ? [] : {};
                r(a,
                    function(a, e) {
                        c++;
                        f(a).then(function(a) {
                                d.hasOwnProperty(e) || (d[e] = a, --c || b.resolve(d))
                            },
                            function(a) {
                                d.hasOwnProperty(e) || b.reject(a)
                            })
                    });
                0 === c && b.resolve(d);
                return b.promise
            }
        }
    }
    function fe() {
        this.$get = ["$window", "$timeout",
            function(b, a) {
                var c = b.requestAnimationFrame || b.webkitRequestAnimationFrame || b.mozRequestAnimationFrame,
                    d = b.cancelAnimationFrame || b.webkitCancelAnimationFrame || b.mozCancelAnimationFrame || b.webkitCancelRequestAnimationFrame,
                    e = !!c,
                    f = e ?
                        function(a) {
                            var b = c(a);
                            return function() {
                                d(b)
                            }
                        }: function(b) {
                            var c = a(b, 16.66, !1);
                            return function() {
                                a.cancel(c)
                            }
                        };
                f.supported = e;
                return f
            }]
    }
    function Yd() {
        var b = 10,
            a = z("$rootScope"),
            c = null;
        this.digestTtl = function(a) {
            arguments.length && (b = a);
            return b
        };
        this.$get = ["$injector", "$exceptionHandler", "$parse", "$browser",
            function(d, e, f, g) {
                function h() {
                    this.$id = ib();
                    this.$$phase = this.$parent = this.$$watchers = this.$$nextSibling = this.$$prevSibling = this.$$childHead = this.$$childTail = null;
                    this["this"] = this.$root = this;
                    this.$$destroyed = !1;
                    this.$$asyncQueue = [];
                    this.$$postDigestQueue = [];
                    this.$$listeners = {};
                    this.$$listenerCount = {};
                    this.$$isolateBindings = {}
                }
                function k(b) {
                    if (q.$$phase) throw a("inprog", q.$$phase);
                    q.$$phase = b
                }
                function m(a, b) {
                    var c = f(a);
                    Ya(c, b);
                    return c
                }
                function l(a, b, c) {
                    do a.$$listenerCount[c] -= b,
                    0 === a.$$listenerCount[c] && delete a.$$listenerCount[c];
                    while (a = a.$parent)
                }
                function n() {}
                h.prototype = {
                    constructor: h,
                    $new: function(a) {
                        a ? (a = new h, a.$root = this.$root, a.$$asyncQueue = this.$$asyncQueue, a.$$postDigestQueue = this.$$postDigestQueue) : (this.$$childScopeClass || (this.$$childScopeClass = function() {
                            this.$$watchers = this.$$nextSibling = this.$$childHead = this.$$childTail = null;
                            this.$$listeners = {};
                            this.$$listenerCount = {};
                            this.$id = ib();
                            this.$$childScopeClass = null
                        },
                            this.$$childScopeClass.prototype = this), a = new this.$$childScopeClass);
                        a["this"] = a;
                        a.$parent = this;
                        a.$$prevSibling = this.$$childTail;
                        this.$$childHead ? this.$$childTail = this.$$childTail.$$nextSibling = a: this.$$childHead = this.$$childTail = a;
                        return a
                    },
                    $watch: function(a, b, d) {
                        var e = m(a, "watch"),
                            f = this.$$watchers,
                            g = {
                                fn: b,
                                last: n,
                                get: e,
                                exp: a,
                                eq: !!d
                            };
                        c = null;
                        if (!N(b)) {
                            var h = m(b || v, "listener");
                            g.fn = function(a, b, c) {
                                h(c)
                            }
                        }
                        if ("string" == typeof a && e.constant) {
                            var k = g.fn;
                            g.fn = function(a, b, c) {
                                k.call(this, a, b, c);
                                Ua(f, g)
                            }
                        }
                        f || (f = this.$$watchers = []);
                        f.unshift(g);
                        return function() {
                            Ua(f, g);
                            c = null
                        }
                    },
                    $watchCollection: function(a, b) {
                        var c = this,
                            d, e, g, h = 1 < b.length,
                            k = 0,
                            l = f(a),
                            m = [],
                            n = {},
                            q = !0,
                            r = 0;
                        return this.$watch(function() {
                                d = l(c);
                                var a, b, f;
                                if (T(d)) if (Sa(d)) for (e !== m && (e = m, r = e.length = 0, k++), a = d.length, r !== a && (k++, e.length = r = a), b = 0; b < a; b++) f = e[b] !== e[b] && d[b] !== d[b],
                                f || e[b] === d[b] || (k++, e[b] = d[b]);
                                else {
                                    e !== n && (e = n = {},
                                        r = 0, k++);
                                    a = 0;
                                    for (b in d) d.hasOwnProperty(b) && (a++, e.hasOwnProperty(b) ? (f = e[b] !== e[b] && d[b] !== d[b], f || e[b] === d[b] || (k++, e[b] = d[b])) : (r++, e[b] = d[b], k++));
                                    if (r > a) for (b in k++, e) e.hasOwnProperty(b) && !d.hasOwnProperty(b) && (r--, delete e[b])
                                } else e !== d && (e = d, k++);
                                return k
                            },
                            function() {
                                q ? (q = !1, b(d, d, c)) : b(d, g, c);
                                if (h) if (T(d)) if (Sa(d)) {
                                    g = Array(d.length);
                                    for (var a = 0; a < d.length; a++) g[a] = d[a]
                                } else for (a in g = {},
                                    d) lb.call(d, a) && (g[a] = d[a]);
                                else g = d
                            })
                    },
                    $digest: function() {
                        var d, f, h, l, m = this.$$asyncQueue,
                            r = this.$$postDigestQueue,
                            K, B, u = b,
                            O, M = [],
                            A,
                            P,
                            C;
                        k("$digest");
                        g.$$checkUrlChange();
                        c = null;
                        do {
                            B = !1;
                            for (O = this; m.length;) {
                                try {
                                    C = m.shift(),
                                        C.scope.$eval(C.expression)
                                } catch(I) {
                                    q.$$phase = null,
                                        e(I)
                                }
                                c = null
                            }
                            a: do {
                                if (l = O.$$watchers) for (K = l.length; K--;) try {
                                    if (d = l[K]) if ((f = d.get(O)) !== (h = d.last) && !(d.eq ? Ca(f, h) : "number" === typeof f && "number" === typeof h && isNaN(f) && isNaN(h))) B = !0,
                                        c = d,
                                        d.last = d.eq ? Ka(f, null) : f,
                                        d.fn(f, h === n ? f: h, O),
                                    5 > u && (A = 4 - u, M[A] || (M[A] = []), P = N(d.exp) ? "fn: " + (d.exp.name || d.exp.toString()) : d.exp, P += "; newVal: " + oa(f) + "; oldVal: " + oa(h), M[A].push(P));
                                    else if (d === c) {
                                        B = !1;
                                        break a
                                    }
                                } catch(D) {
                                    q.$$phase = null,
                                        e(D)
                                }
                                if (! (l = O.$$childHead || O !== this && O.$$nextSibling)) for (; O !== this && !(l = O.$$nextSibling);) O = O.$parent
                            } while ( O = l );
                            if ((B || m.length) && !u--) throw q.$$phase = null, a("infdig", b, oa(M));
                        } while ( B || m . length );
                        for (q.$$phase = null; r.length;) try {
                            r.shift()()
                        } catch(x) {
                            e(x)
                        }
                    },
                    $destroy: function() {
                        if (!this.$$destroyed) {
                            var a = this.$parent;
                            this.$broadcast("$destroy");
                            this.$$destroyed = !0;
                            this !== q && (r(this.$$listenerCount, Bb(null, l, this)), a.$$childHead == this && (a.$$childHead = this.$$nextSibling), a.$$childTail == this && (a.$$childTail = this.$$prevSibling), this.$$prevSibling && (this.$$prevSibling.$$nextSibling = this.$$nextSibling), this.$$nextSibling && (this.$$nextSibling.$$prevSibling = this.$$prevSibling), this.$parent = this.$$nextSibling = this.$$prevSibling = this.$$childHead = this.$$childTail = this.$root = null, this.$$listeners = {},
                                this.$$watchers = this.$$asyncQueue = this.$$postDigestQueue = [], this.$destroy = this.$digest = this.$apply = v, this.$on = this.$watch = function() {
                                return v
                            })
                        }
                    },
                    $eval: function(a, b) {
                        return f(a)(this, b)
                    },
                    $evalAsync: function(a) {
                        q.$$phase || q.$$asyncQueue.length || g.defer(function() {
                            q.$$asyncQueue.length && q.$digest()
                        });
                        this.$$asyncQueue.push({
                            scope: this,
                            expression: a
                        })
                    },
                    $$postDigest: function(a) {
                        this.$$postDigestQueue.push(a)
                    },
                    $apply: function(a) {
                        try {
                            return k("$apply"),
                                this.$eval(a)
                        } catch(b) {
                            e(b)
                        } finally {
                            q.$$phase = null;
                            try {
                                q.$digest()
                            } catch(c) {
                                throw e(c),
                                    c;
                            }
                        }
                    },
                    $on: function(a, b) {
                        var c = this.$$listeners[a];
                        c || (this.$$listeners[a] = c = []);
                        c.push(b);
                        var d = this;
                        do d.$$listenerCount[a] || (d.$$listenerCount[a] = 0),
                            d.$$listenerCount[a]++;
                        while (d = d.$parent);
                        var e = this;
                        return function() {
                            var d = Ta(c, b); - 1 !== d && (c[d] = null, l(e, 1, a))
                        }
                    },
                    $emit: function(a, b) {
                        var c = [],
                            d,
                            f = this,
                            g = !1,
                            h = {
                                name: a,
                                targetScope: f,
                                stopPropagation: function() {
                                    g = !0
                                },
                                preventDefault: function() {
                                    h.defaultPrevented = !0
                                },
                                defaultPrevented: !1
                            },
                            k = [h].concat(wa.call(arguments, 1)),
                            l,
                            m;
                        do {
                            d = f.$$listeners[a] || c;
                            h.currentScope = f;
                            l = 0;
                            for (m = d.length; l < m; l++) if (d[l]) try {
                                d[l].apply(null, k)
                            } catch(n) {
                                e(n)
                            } else d.splice(l, 1), l--, m--;
                            if (g) break;
                            f = f.$parent
                        } while ( f );
                        return h
                    },
                    $broadcast: function(a, b) {
                        for (var c = this,
                                 d = this,
                                 f = {
                                     name: a,
                                     targetScope: this,
                                     preventDefault: function() {
                                         f.defaultPrevented = !0
                                     },
                                     defaultPrevented: !1
                                 },
                                 g = [f].concat(wa.call(arguments, 1)), h, k; c = d;) {
                            f.currentScope = c;
                            d = c.$$listeners[a] || [];
                            h = 0;
                            for (k = d.length; h < k; h++) if (d[h]) try {
                                d[h].apply(null, g)
                            } catch(l) {
                                e(l)
                            } else d.splice(h, 1),
                                h--,
                                k--;
                            if (! (d = c.$$listenerCount[a] && c.$$childHead || c !== this && c.$$nextSibling)) for (; c !== this && !(d = c.$$nextSibling);) c = c.$parent
                        }
                        return f
                    }
                };
                var q = new h;
                return q
            }]
    }
    function bd() {
        var b = /^\s*(https?|ftp|mailto|tel|file):/,
            a = /^\s*((https?|ftp|file):|data:image\/)/;
        this.aHrefSanitizationWhitelist = function(a) {
            return D(a) ? (b = a, this) : b
        };
        this.imgSrcSanitizationWhitelist = function(b) {
            return D(b) ? (a = b, this) : a
        };
        this.$get = function() {
            return function(c, d) {
                var e = d ? a: b,
                    f;
                if (!R || 8 <= R) if (f = xa(c).href, "" !== f && !f.match(e)) return "unsafe:" + f;
                return c
            }
        }
    }
    function Ee(b) {
        if ("self" === b) return b;
        if (G(b)) {
            if ( - 1 < b.indexOf("***")) throw za("iwcard", b);
            b = b.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g, "\\$1").replace(/\x08/g, "\\x08").replace("\\*\\*", ".*").replace("\\*", "[^:/.?&;]*");
            return RegExp("^" + b + "$")
        }
        if (kb(b)) return RegExp("^" + b.source + "$");
        throw za("imatcher");
    }
    function Fc(b) {
        var a = [];
        D(b) && r(b,
            function(b) {
                a.push(Ee(b))
            });
        return a
    }
    function ae() {
        this.SCE_CONTEXTS = fa;
        var b = ["self"],
            a = [];
        this.resourceUrlWhitelist = function(a) {
            arguments.length && (b = Fc(a));
            return b
        };
        this.resourceUrlBlacklist = function(b) {
            arguments.length && (a = Fc(b));
            return a
        };
        this.$get = ["$injector",
            function(c) {
                function d(a) {
                    var b = function(a) {
                        this.$$unwrapTrustedValue = function() {
                            return a
                        }
                    };
                    a && (b.prototype = new a);
                    b.prototype.valueOf = function() {
                        return this.$$unwrapTrustedValue()
                    };
                    b.prototype.toString = function() {
                        return this.$$unwrapTrustedValue().toString()
                    };
                    return b
                }
                var e = function(a) {
                    throw za("unsafe");
                };
                c.has("$sanitize") && (e = c.get("$sanitize"));
                var f = d(),
                    g = {};
                g[fa.HTML] = d(f);
                g[fa.CSS] = d(f);
                g[fa.URL] = d(f);
                g[fa.JS] = d(f);
                g[fa.RESOURCE_URL] = d(g[fa.URL]);
                return {
                    trustAs: function(a, b) {
                        var c = g.hasOwnProperty(a) ? g[a] : null;
                        if (!c) throw za("icontext", a, b);
                        if (null === b || b === u || "" === b) return b;
                        if ("string" !== typeof b) throw za("itype", a);
                        return new c(b)
                    },
                    getTrusted: function(c, d) {
                        if (null === d || d === u || "" === d) return d;
                        var f = g.hasOwnProperty(c) ? g[c] : null;
                        if (f && d instanceof f) return d.$$unwrapTrustedValue();
                        if (c === fa.RESOURCE_URL) {
                            var f = xa(d.toString()),
                                l,
                                n,
                                q = !1;
                            l = 0;
                            for (n = b.length; l < n; l++) if ("self" === b[l] ? Pb(f) : b[l].exec(f.href)) {
                                q = !0;
                                break
                            }
                            if (q) for (l = 0, n = a.length; l < n; l++) if ("self" === a[l] ? Pb(f) : a[l].exec(f.href)) {
                                q = !1;
                                break
                            }
                            if (q) return d;
                            throw za("insecurl", d.toString());
                        }
                        if (c === fa.HTML) return e(d);
                        throw za("unsafe");
                    },
                    valueOf: function(a) {
                        return a instanceof f ? a.$$unwrapTrustedValue() : a
                    }
                }
            }]
    }
    function $d() {
        var b = !0;
        this.enabled = function(a) {
            arguments.length && (b = !!a);
            return b
        };
        this.$get = ["$parse", "$sniffer", "$sceDelegate",
            function(a, c, d) {
                if (b && c.msie && 8 > c.msieDocumentMode) throw za("iequirks");
                var e = ha(fa);
                e.isEnabled = function() {
                    return b
                };
                e.trustAs = d.trustAs;
                e.getTrusted = d.getTrusted;
                e.valueOf = d.valueOf;
                b || (e.trustAs = e.getTrusted = function(a, b) {
                    return b
                },
                    e.valueOf = ga);
                e.parseAs = function(b, c) {
                    var d = a(c);
                    return d.literal && d.constant ? d: function(a, c) {
                        return e.getTrusted(b, d(a, c))
                    }
                };
                var f = e.parseAs,
                    g = e.getTrusted,
                    h = e.trustAs;
                r(fa,
                    function(a, b) {
                        var c = x(b);
                        e[ab("parse_as_" + c)] = function(b) {
                            return f(a, b)
                        };
                        e[ab("get_trusted_" + c)] = function(b) {
                            return g(a, b)
                        };
                        e[ab("trust_as_" + c)] = function(b) {
                            return h(a, b)
                        }
                    });
                return e
            }]
    }
    function be() {
        this.$get = ["$window", "$document",
            function(b, a) {
                var c = {},
                    d = U((/android (\d+)/.exec(x((b.navigator || {}).userAgent)) || [])[1]),
                    e = /Boxee/i.test((b.navigator || {}).userAgent),
                    f = a[0] || {},
                    g = f.documentMode,
                    h,
                    k = /^(Moz|webkit|O|ms)(?=[A-Z])/,
                    m = f.body && f.body.style,
                    l = !1,
                    n = !1;
                if (m) {
                    for (var q in m) if (l = k.exec(q)) {
                        h = l[0];
                        h = h.substr(0, 1).toUpperCase() + h.substr(1);
                        break
                    }
                    h || (h = "WebkitOpacity" in m && "webkit");
                    l = !!("transition" in m || h + "Transition" in m);
                    n = !!("animation" in m || h + "Animation" in m); ! d || l && n || (l = G(f.body.style.webkitTransition), n = G(f.body.style.webkitAnimation))
                }
                return {
                    history: !(!b.history || !b.history.pushState || 4 > d || e),
                    hashchange: "onhashchange" in b && (!g || 7 < g),
                    hasEvent: function(a) {
                        if ("input" == a && 9 == R) return ! 1;
                        if (F(c[a])) {
                            var b = f.createElement("div");
                            c[a] = "on" + a in b
                        }
                        return c[a]
                    },
                    csp: Za(),
                    vendorPrefix: h,
                    transitions: l,
                    animations: n,
                    android: d,
                    msie: R,
                    msieDocumentMode: g
                }
            }]
    }
    function de() {
        this.$get = ["$rootScope", "$browser", "$q", "$exceptionHandler",
            function(b, a, c, d) {
                function e(e, h, k) {
                    var m = c.defer(),
                        l = m.promise,
                        n = D(k) && !k;
                    h = a.defer(function() {
                            try {
                                m.resolve(e())
                            } catch(a) {
                                m.reject(a),
                                    d(a)
                            } finally {
                                delete f[l.$$timeoutId]
                            }
                            n || b.$apply()
                        },
                        h);
                    l.$$timeoutId = h;
                    f[h] = m;
                    return l
                }
                var f = {};
                e.cancel = function(b) {
                    return b && b.$$timeoutId in f ? (f[b.$$timeoutId].reject("canceled"), delete f[b.$$timeoutId], a.defer.cancel(b.$$timeoutId)) : !1
                };
                return e
            }]
    }
    function xa(b, a) {
        var c = b;
        R && (Y.setAttribute("href", c), c = Y.href);
        Y.setAttribute("href", c);
        return {
            href: Y.href,
            protocol: Y.protocol ? Y.protocol.replace(/:$/, "") : "",
            host: Y.host,
            search: Y.search ? Y.search.replace(/^\?/, "") : "",
            hash: Y.hash ? Y.hash.replace(/^#/, "") : "",
            hostname: Y.hostname,
            port: Y.port,
            pathname: "/" === Y.pathname.charAt(0) ? Y.pathname: "/" + Y.pathname
        }
    }
    function Pb(b) {
        b = G(b) ? xa(b) : b;
        return b.protocol === Gc.protocol && b.host === Gc.host
    }
    function ee() {
        this.$get = aa(W)
    }
    function kc(b) {
        function a(d, e) {
            if (T(d)) {
                var f = {};
                r(d,
                    function(b, c) {
                        f[c] = a(c, b)
                    });
                return f
            }
            return b.factory(d + c, e)
        }
        var c = "Filter";
        this.register = a;
        this.$get = ["$injector",
            function(a) {
                return function(b) {
                    return a.get(b + c)
                }
            }];
        a("currency", Hc);
        a("date", Ic);
        a("filter", Fe);
        a("json", Ge);
        a("limitTo", He);
        a("lowercase", Ie);
        a("number", Jc);
        a("orderBy", Kc);
        a("uppercase", Je)
    }
    function Fe() {
        return function(b, a, c) {
            if (!L(b)) return b;
            var d = typeof c,
                e = [];
            e.check = function(a) {
                for (var b = 0; b < e.length; b++) if (!e[b](a)) return ! 1;
                return ! 0
            };
            "function" !== d && (c = "boolean" === d && c ?
                function(a, b) {
                    return Xa.equals(a, b)
                }: function(a, b) {
                    if (a && b && "object" === typeof a && "object" === typeof b) {
                        for (var d in a) if ("$" !== d.charAt(0) && lb.call(a, d) && c(a[d], b[d])) return ! 0;
                        return ! 1
                    }
                    b = ("" + b).toLowerCase();
                    return - 1 < ("" + a).toLowerCase().indexOf(b)
                });
            var f = function(a, b) {
                if ("string" === typeof b && "!" === b.charAt(0)) return ! f(a, b.substr(1));
                switch (typeof a) {
                    case "boolean":
                    case "number":
                    case "string":
                        return c(a, b);
                    case "object":
                        switch (typeof b) {
                            case "object":
                                return c(a, b);
                            default:
                                for (var d in a) if ("$" !== d.charAt(0) && f(a[d], b)) return ! 0
                        }
                        return ! 1;
                    case "array":
                        for (d = 0; d < a.length; d++) if (f(a[d], b)) return ! 0;
                        return ! 1;
                    default:
                        return ! 1
                }
            };
            switch (typeof a) {
                case "boolean":
                case "number":
                case "string":
                    a = {
                        $: a
                    };
                case "object":
                    for (var g in a)(function(b) {
                        "undefined" !== typeof a[b] && e.push(function(c) {
                            return f("$" == b ? c: c && c[b], a[b])
                        })
                    })(g);
                    break;
                case "function":
                    e.push(a);
                    break;
                default:
                    return b
            }
            d = [];
            for (g = 0; g < b.length; g++) {
                var h = b[g];
                e.check(h) && d.push(h)
            }
            return d
        }
    }
    function Hc(b) {
        var a = b.NUMBER_FORMATS;
        return function(b, d) {
            F(d) && (d = a.CURRENCY_SYM);
            return Lc(b, a.PATTERNS[1], a.GROUP_SEP, a.DECIMAL_SEP, 2).replace(/\u00A4/g, d)
        }
    }
    function Jc(b) {
        var a = b.NUMBER_FORMATS;
        return function(b, d) {
            return Lc(b, a.PATTERNS[0], a.GROUP_SEP, a.DECIMAL_SEP, d)
        }
    }
    function Lc(b, a, c, d, e) {
        if (null == b || !isFinite(b) || T(b)) return "";
        var f = 0 > b;
        b = Math.abs(b);
        var g = b + "",
            h = "",
            k = [],
            m = !1;
        if ( - 1 !== g.indexOf("e")) {
            var l = g.match(/([\d\.]+)e(-?)(\d+)/);
            l && "-" == l[2] && l[3] > e + 1 ? (g = "0", b = 0) : (h = g, m = !0)
        }
        if (m) 0 < e && ( - 1 < b && 1 > b) && (h = b.toFixed(e));
        else {
            g = (g.split(Mc)[1] || "").length;
            F(e) && (e = Math.min(Math.max(a.minFrac, g), a.maxFrac));
            b = +(Math.round( + (b.toString() + "e" + e)).toString() + "e" + -e);
            0 === b && (f = !1);
            b = ("" + b).split(Mc);
            g = b[0];
            b = b[1] || "";
            var l = 0,
                n = a.lgSize,
                q = a.gSize;
            if (g.length >= n + q) for (l = g.length - n, m = 0; m < l; m++) 0 === (l - m) % q && 0 !== m && (h += c),
                h += g.charAt(m);
            for (m = l; m < g.length; m++) 0 === (g.length - m) % n && 0 !== m && (h += c),
                h += g.charAt(m);
            for (; b.length < e;) b += "0";
            e && "0" !== e && (h += d + b.substr(0, e))
        }
        k.push(f ? a.negPre: a.posPre);
        k.push(h);
        k.push(f ? a.negSuf: a.posSuf);
        return k.join("")
    }
    function Vb(b, a, c) {
        var d = "";
        0 > b && (d = "-", b = -b);
        for (b = "" + b; b.length < a;) b = "0" + b;
        c && (b = b.substr(b.length - a));
        return d + b
    }
    function Z(b, a, c, d) {
        c = c || 0;
        return function(e) {
            e = e["get" + b]();
            if (0 < c || e > -c) e += c;
            0 === e && -12 == c && (e = 12);
            return Vb(e, a, d)
        }
    }
    function vb(b, a) {
        return function(c, d) {
            var e = c["get" + b](),
                f = La(a ? "SHORT" + b: b);
            return d[f][e]
        }
    }
    function Ic(b) {
        function a(a) {
            var b;
            if (b = a.match(c)) {
                a = new Date(0);
                var f = 0,
                    g = 0,
                    h = b[8] ? a.setUTCFullYear: a.setFullYear,
                    k = b[8] ? a.setUTCHours: a.setHours;
                b[9] && (f = U(b[9] + b[10]), g = U(b[9] + b[11]));
                h.call(a, U(b[1]), U(b[2]) - 1, U(b[3]));
                f = U(b[4] || 0) - f;
                g = U(b[5] || 0) - g;
                h = U(b[6] || 0);
                b = Math.round(1E3 * parseFloat("0." + (b[7] || 0)));
                k.call(a, f, g, h, b)
            }
            return a
        }
        var c = /^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;
        return function(c, e) {
            var f = "",
                g = [],
                h,
                k;
            e = e || "mediumDate";
            e = b.DATETIME_FORMATS[e] || e;
            G(c) && (c = Ke.test(c) ? U(c) : a(c));
            jb(c) && (c = new Date(c));
            if (!va(c)) return c;
            for (; e;)(k = Le.exec(e)) ? (g = g.concat(wa.call(k, 1)), e = g.pop()) : (g.push(e), e = null);
            r(g,
                function(a) {
                    h = Me[a];
                    f += h ? h(c, b.DATETIME_FORMATS) : a.replace(/(^'|'$)/g, "").replace(/''/g, "'")
                });
            return f
        }
    }
    function Ge() {
        return function(b) {
            return oa(b, !0)
        }
    }
    function He() {
        return function(b, a) {
            if (!L(b) && !G(b)) return b;
            a = Infinity === Math.abs(Number(a)) ? Number(a) : U(a);
            if (G(b)) return a ? 0 <= a ? b.slice(0, a) : b.slice(a, b.length) : "";
            var c = [],
                d,
                e;
            a > b.length ? a = b.length: a < -b.length && (a = -b.length);
            0 < a ? (d = 0, e = a) : (d = b.length + a, e = b.length);
            for (; d < e; d++) c.push(b[d]);
            return c
        }
    }
    function Kc(b) {
        return function(a, c, d) {
            function e(a, b) {
                return Wa(b) ?
                    function(b, c) {
                        return a(c, b)
                    }: a
            }
            function f(a, b) {
                var c = typeof a,
                    d = typeof b;
                return c == d ? (va(a) && va(b) && (a = a.valueOf(), b = b.valueOf()), "string" == c && (a = a.toLowerCase(), b = b.toLowerCase()), a === b ? 0 : a < b ? -1 : 1) : c < d ? -1 : 1
            }
            if (!Sa(a)) return a;
            c = L(c) ? c: [c];
            0 === c.length && (c = ["+"]);
            c = Uc(c,
                function(a) {
                    var c = !1,
                        d = a || ga;
                    if (G(a)) {
                        if ("+" == a.charAt(0) || "-" == a.charAt(0)) c = "-" == a.charAt(0),
                            a = a.substring(1);
                        if ("" === a) return e(function(a, b) {
                                return f(a, b)
                            },
                            c);
                        d = b(a);
                        if (d.constant) {
                            var m = d();
                            return e(function(a, b) {
                                    return f(a[m], b[m])
                                },
                                c)
                        }
                    }
                    return e(function(a, b) {
                            return f(d(a), d(b))
                        },
                        c)
                });
            return wa.call(a).sort(e(function(a, b) {
                    for (var d = 0; d < c.length; d++) {
                        var e = c[d](a, b);
                        if (0 !== e) return e
                    }
                    return 0
                },
                d))
        }
    }
    function Aa(b) {
        N(b) && (b = {
            link: b
        });
        b.restrict = b.restrict || "AC";
        return aa(b)
    }
    function Nc(b, a, c, d) {
        function e(a, c) {
            c = c ? "-" + nb(c, "-") : "";
            d.setClass(b, (a ? wb: xb) + c, (a ? xb: wb) + c)
        }
        var f = this,
            g = b.parent().controller("form") || yb,
            h = 0,
            k = f.$error = {},
            m = [];
        f.$name = a.name || a.ngForm;
        f.$dirty = !1;
        f.$pristine = !0;
        f.$valid = !0;
        f.$invalid = !1;
        g.$addControl(f);
        b.addClass(Ra);
        e(!0);
        f.$addControl = function(a) {
            Ea(a.$name, "input");
            m.push(a);
            a.$name && (f[a.$name] = a)
        };
        f.$removeControl = function(a) {
            a.$name && f[a.$name] === a && delete f[a.$name];
            r(k,
                function(b, c) {
                    f.$setValidity(c, !0, a)
                });
            Ua(m, a)
        };
        f.$setValidity = function(a, b, c) {
            var d = k[a];
            if (b) d && (Ua(d, c), d.length || (h--, h || (e(b), f.$valid = !0, f.$invalid = !1), k[a] = !1, e(!0, a), g.$setValidity(a, !0, f)));
            else {
                h || e(b);
                if (d) {
                    if ( - 1 != Ta(d, c)) return
                } else k[a] = d = [],
                    h++,
                    e(!1, a),
                    g.$setValidity(a, !1, f);
                d.push(c);
                f.$valid = !1;
                f.$invalid = !0
            }
        };
        f.$setDirty = function() {
            d.removeClass(b, Ra);
            d.addClass(b, zb);
            f.$dirty = !0;
            f.$pristine = !1;
            g.$setDirty()
        };
        f.$setPristine = function() {
            d.removeClass(b, zb);
            d.addClass(b, Ra);
            f.$dirty = !1;
            f.$pristine = !0;
            r(m,
                function(a) {
                    a.$setPristine()
                })
        }
    }
    function ua(b, a, c, d) {
        b.$setValidity(a, c);
        return c ? d: u
    }
    function Oc(b, a) {
        var c, d;
        if (a) for (c = 0; c < a.length; ++c) if (d = a[c], b[d]) return ! 0;
        return ! 1
    }
    function Ne(b, a, c, d, e) {
        T(e) && (b.$$hasNativeValidators = !0, b.$parsers.push(function(f) {
            if (b.$error[a] || Oc(e, d) || !Oc(e, c)) return f;
            b.$setValidity(a, !1)
        }))
    }
    function Ab(b, a, c, d, e, f) {
        var g = a.prop(Oe),
            h = a[0].placeholder,
            k = {},
            m = x(a[0].type);
        d.$$validityState = g;
        if (!e.android) {
            var l = !1;
            a.on("compositionstart",
                function(a) {
                    l = !0
                });
            a.on("compositionend",
                function() {
                    l = !1;
                    n()
                })
        }
        var n = function(e) {
            if (!l) {
                var f = a.val();
                if (R && "input" === (e || k).type && a[0].placeholder !== h) h = a[0].placeholder;
                else if ("password" !== m && Wa(c.ngTrim || "T") && (f = $(f)), e = g && d.$$hasNativeValidators, d.$viewValue !== f || "" === f && e) b.$root.$$phase ? d.$setViewValue(f) : b.$apply(function() {
                    d.$setViewValue(f)
                })
            }
        };
        if (e.hasEvent("input")) a.on("input", n);
        else {
            var q, p = function() {
                q || (q = f.defer(function() {
                    n();
                    q = null
                }))
            };
            a.on("keydown",
                function(a) {
                    a = a.keyCode;
                    91 === a || (15 < a && 19 > a || 37 <= a && 40 >= a) || p()
                });
            if (e.hasEvent("paste")) a.on("paste cut", p)
        }
        a.on("change", n);
        d.$render = function() {
            a.val(d.$isEmpty(d.$viewValue) ? "": d.$viewValue)
        };
        var s = c.ngPattern;
        s && ((e = s.match(/^\/(.*)\/([gim]*)$/)) ? (s = RegExp(e[1], e[2]), e = function(a) {
            return ua(d, "pattern", d.$isEmpty(a) || s.test(a), a)
        }) : e = function(c) {
            var e = b.$eval(s);
            if (!e || !e.test) throw z("ngPattern")("noregexp", s, e, ia(a));
            return ua(d, "pattern", d.$isEmpty(c) || e.test(c), c)
        },
            d.$formatters.push(e), d.$parsers.push(e));
        if (c.ngMinlength) {
            var r = U(c.ngMinlength);
            e = function(a) {
                return ua(d, "minlength", d.$isEmpty(a) || a.length >= r, a)
            };
            d.$parsers.push(e);
            d.$formatters.push(e)
        }
        if (c.ngMaxlength) {
            var w = U(c.ngMaxlength);
            e = function(a) {
                return ua(d, "maxlength", d.$isEmpty(a) || a.length <= w, a)
            };
            d.$parsers.push(e);
            d.$formatters.push(e)
        }
    }
    function Wb(b, a) {
        b = "ngClass" + b;
        return ["$animate",
            function(c) {
                function d(a, b) {
                    var c = [],
                        d = 0;
                    a: for (; d < a.length; d++) {
                        for (var e = a[d], l = 0; l < b.length; l++) if (e == b[l]) continue a;
                        c.push(e)
                    }
                    return c
                }
                function e(a) {
                    if (!L(a)) {
                        if (G(a)) return a.split(" ");
                        if (T(a)) {
                            var b = [];
                            r(a,
                                function(a, c) {
                                    a && (b = b.concat(c.split(" ")))
                                });
                            return b
                        }
                    }
                    return a
                }
                return {
                    restrict: "AC",
                    link: function(f, g, h) {
                        function k(a, b) {
                            var c = g.data("$classCounts") || {},
                                d = [];
                            r(a,
                                function(a) {
                                    if (0 < b || c[a]) c[a] = (c[a] || 0) + b,
                                    c[a] === +(0 < b) && d.push(a)
                                });
                            g.data("$classCounts", c);
                            return d.join(" ")
                        }
                        function m(b) {
                            if (!0 === a || f.$index % 2 === a) {
                                var m = e(b || []);
                                if (!l) {
                                    var p = k(m, 1);
                                    h.$addClass(p)
                                } else if (!Ca(b, l)) {
                                    var s = e(l),
                                        p = d(m, s),
                                        m = d(s, m),
                                        m = k(m, -1),
                                        p = k(p, 1);
                                    0 === p.length ? c.removeClass(g, m) : 0 === m.length ? c.addClass(g, p) : c.setClass(g, p, m)
                                }
                            }
                            l = ha(b)
                        }
                        var l;
                        f.$watch(h[b], m, !0);
                        h.$observe("class",
                            function(a) {
                                m(f.$eval(h[b]))
                            });
                        "ngClass" !== b && f.$watch("$index",
                            function(c, d) {
                                var g = c & 1;
                                if (g !== (d & 1)) {
                                    var l = e(f.$eval(h[b]));
                                    g === a ? (g = k(l, 1), h.$addClass(g)) : (g = k(l, -1), h.$removeClass(g))
                                }
                            })
                    }
                }
            }]
    }
    var Oe = "validity",
        x = function(b) {
            return G(b) ? b.toLowerCase() : b
        },
        lb = Object.prototype.hasOwnProperty,
        La = function(b) {
            return G(b) ? b.toUpperCase() : b
        },
        R,
        A,
        Fa,
        wa = [].slice,
        Pe = [].push,
        Ba = Object.prototype.toString,
        Va = z("ng"),
        Xa = W.angular || (W.angular = {}),
        $a,
        Pa,
        na = ["0", "0", "0"];
    R = U((/msie (\d+)/.exec(x(navigator.userAgent)) || [])[1]);
    isNaN(R) && (R = U((/trident\/.*; rv:(\d+)/.exec(x(navigator.userAgent)) || [])[1]));
    v.$inject = [];
    ga.$inject = [];
    var L = function() {
            return N(Array.isArray) ? Array.isArray: function(b) {
                return "[object Array]" === Ba.call(b)
            }
        } (),
        $ = function() {
            return String.prototype.trim ?
                function(b) {
                    return G(b) ? b.trim() : b
                }: function(b) {
                    return G(b) ? b.replace(/^\s\s*/, "").replace(/\s\s*$/, "") : b
                }
        } ();
    Pa = 9 > R ?
        function(b) {
            b = b.nodeName ? b: b[0];
            return b.scopeName && "HTML" != b.scopeName ? La(b.scopeName + ":" + b.nodeName) : b.nodeName
        }: function(b) {
            return b.nodeName ? b.nodeName: b[0].nodeName
        };
    var Za = function() {
            if (D(Za.isActive_)) return Za.isActive_;
            var b = !(!X.querySelector("[ng-csp]") && !X.querySelector("[data-ng-csp]"));
            if (!b) try {
                new Function("")
            } catch(a) {
                b = !0
            }
            return Za.isActive_ = b
        },
        Xc = /[A-Z]/g,
        $c = {
            full: "1.2.28",
            major: 1,
            minor: 2,
            dot: 28,
            codeName: "finnish-disembarkation"
        };
    S.expando = "ng339";
    var cb = S.cache = {},
        me = 1,
        sb = W.document.addEventListener ?
            function(b, a, c) {
                b.addEventListener(a, c, !1)
            }: function(b, a, c) {
                b.attachEvent("on" + a, c)
            },
        bb = W.document.removeEventListener ?
            function(b, a, c) {
                b.removeEventListener(a, c, !1)
            }: function(b, a, c) {
                b.detachEvent("on" + a, c)
            };
    S._data = function(b) {
        return this.cache[b[this.expando]] || {}
    };
    var he = /([\:\-\_]+(.))/g,
        ie = /^moz([A-Z])/,
        Hb = z("jqLite"),
        je = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
        Ib = /<|&#?\w+;/,
        ke = /<([\w:]+)/,
        le = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
        da = {
            option: [1, '<select multiple="multiple">', "</select>"],
            thead: [1, "<table>", "</table>"],
            col: [2, "<table><colgroup>", "</colgroup></table>"],
            tr: [2, "<table><tbody>", "</tbody></table>"],
            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
            _default: [0, "", ""]
        };
    da.optgroup = da.option;
    da.tbody = da.tfoot = da.colgroup = da.caption = da.thead;
    da.th = da.td;
    var Oa = S.prototype = {
            ready: function(b) {
                function a() {
                    c || (c = !0, b())
                }
                var c = !1;
                "complete" === X.readyState ? setTimeout(a) : (this.on("DOMContentLoaded", a), S(W).on("load", a))
            },
            toString: function() {
                var b = [];
                r(this,
                    function(a) {
                        b.push("" + a)
                    });
                return "[" + b.join(", ") + "]"
            },
            eq: function(b) {
                return 0 <= b ? A(this[b]) : A(this[this.length + b])
            },
            length: 0,
            push: Pe,
            sort: [].sort,
            splice: [].splice
        },
        rb = {};
    r("multiple selected checked disabled readOnly required open".split(" "),
        function(b) {
            rb[x(b)] = b
        });
    var pc = {};
    r("input select option textarea button form details".split(" "),
        function(b) {
            pc[La(b)] = !0
        });
    r({
            data: Mb,
            removeData: Lb
        },
        function(b, a) {
            S[a] = b
        });
    r({
            data: Mb,
            inheritedData: qb,
            scope: function(b) {
                return A.data(b, "$scope") || qb(b.parentNode || b, ["$isolateScope", "$scope"])
            },
            isolateScope: function(b) {
                return A.data(b, "$isolateScope") || A.data(b, "$isolateScopeNoTemplate")
            },
            controller: mc,
            injector: function(b) {
                return qb(b, "$injector")
            },
            removeAttr: function(b, a) {
                b.removeAttribute(a)
            },
            hasClass: Nb,
            css: function(b, a, c) {
                a = ab(a);
                if (D(c)) b.style[a] = c;
                else {
                    var d;
                    8 >= R && (d = b.currentStyle && b.currentStyle[a], "" === d && (d = "auto"));
                    d = d || b.style[a];
                    8 >= R && (d = "" === d ? u: d);
                    return d
                }
            },
            attr: function(b, a, c) {
                var d = x(a);
                if (rb[d]) if (D(c)) c ? (b[a] = !0, b.setAttribute(a, d)) : (b[a] = !1, b.removeAttribute(d));
                else return b[a] || (b.attributes.getNamedItem(a) || v).specified ? d: u;
                else if (D(c)) b.setAttribute(a, c);
                else if (b.getAttribute) return b = b.getAttribute(a, 2),
                    null === b ? u: b
            },
            prop: function(b, a, c) {
                if (D(c)) b[a] = c;
                else return b[a]
            },
            text: function() {
                function b(b, d) {
                    var e = a[b.nodeType];
                    if (F(d)) return e ? b[e] : "";
                    b[e] = d
                }
                var a = [];
                9 > R ? (a[1] = "innerText", a[3] = "nodeValue") : a[1] = a[3] = "textContent";
                b.$dv = "";
                return b
            } (),
            val: function(b, a) {
                if (F(a)) {
                    if ("SELECT" === Pa(b) && b.multiple) {
                        var c = [];
                        r(b.options,
                            function(a) {
                                a.selected && c.push(a.value || a.text)
                            });
                        return 0 === c.length ? null: c
                    }
                    return b.value
                }
                b.value = a
            },
            html: function(b, a) {
                if (F(a)) return b.innerHTML;
                for (var c = 0,
                         d = b.childNodes; c < d.length; c++) Ma(d[c]);
                b.innerHTML = a
            },
            empty: nc
        },
        function(b, a) {
            S.prototype[a] = function(a, d) {
                var e, f, g = this.length;
                if (b !== nc && (2 == b.length && b !== Nb && b !== mc ? a: d) === u) {
                    if (T(a)) {
                        for (e = 0; e < g; e++) if (b === Mb) b(this[e], a);
                        else for (f in a) b(this[e], f, a[f]);
                        return this
                    }
                    e = b.$dv;
                    g = e === u ? Math.min(g, 1) : g;
                    for (f = 0; f < g; f++) {
                        var h = b(this[f], a, d);
                        e = e ? e + h: h
                    }
                    return e
                }
                for (e = 0; e < g; e++) b(this[e], a, d);
                return this
            }
        });
    r({
            removeData: Lb,
            dealoc: Ma,
            on: function a(c, d, e, f) {
                if (D(f)) throw Hb("onargs");
                var g = pa(c, "events"),
                    h = pa(c, "handle");
                g || pa(c, "events", g = {});
                h || pa(c, "handle", h = ne(c, g));
                r(d.split(" "),
                    function(d) {
                        var f = g[d];
                        if (!f) {
                            if ("mouseenter" == d || "mouseleave" == d) {
                                var l = X.body.contains || X.body.compareDocumentPosition ?
                                    function(a, c) {
                                        var d = 9 === a.nodeType ? a.documentElement: a,
                                            e = c && c.parentNode;
                                        return a === e || !!(e && 1 === e.nodeType && (d.contains ? d.contains(e) : a.compareDocumentPosition && a.compareDocumentPosition(e) & 16))
                                    }: function(a, c) {
                                        if (c) for (; c = c.parentNode;) if (c === a) return ! 0;
                                        return ! 1
                                    };
                                g[d] = [];
                                a(c, {
                                        mouseleave: "mouseout",
                                        mouseenter: "mouseover"
                                    } [d],
                                    function(a) {
                                        var c = a.relatedTarget;
                                        c && (c === this || l(this, c)) || h(a, d)
                                    })
                            } else sb(c, d, h),
                                g[d] = [];
                            f = g[d]
                        }
                        f.push(e)
                    })
            },
            off: lc,
            one: function(a, c, d) {
                a = A(a);
                a.on(c,
                    function f() {
                        a.off(c, d);
                        a.off(c, f)
                    });
                a.on(c, d)
            },
            replaceWith: function(a, c) {
                var d, e = a.parentNode;
                Ma(a);
                r(new S(c),
                    function(c) {
                        d ? e.insertBefore(c, d.nextSibling) : e.replaceChild(c, a);
                        d = c
                    })
            },
            children: function(a) {
                var c = [];
                r(a.childNodes,
                    function(a) {
                        1 === a.nodeType && c.push(a)
                    });
                return c
            },
            contents: function(a) {
                return a.contentDocument || a.childNodes || []
            },
            append: function(a, c) {
                r(new S(c),
                    function(c) {
                        1 !== a.nodeType && 11 !== a.nodeType || a.appendChild(c)
                    })
            },
            prepend: function(a, c) {
                if (1 === a.nodeType) {
                    var d = a.firstChild;
                    r(new S(c),
                        function(c) {
                            a.insertBefore(c, d)
                        })
                }
            },
            wrap: function(a, c) {
                c = A(c)[0];
                var d = a.parentNode;
                d && d.replaceChild(c, a);
                c.appendChild(a)
            },
            remove: function(a) {
                Ma(a);
                var c = a.parentNode;
                c && c.removeChild(a)
            },
            after: function(a, c) {
                var d = a,
                    e = a.parentNode;
                r(new S(c),
                    function(a) {
                        e.insertBefore(a, d.nextSibling);
                        d = a
                    })
            },
            addClass: pb,
            removeClass: ob,
            toggleClass: function(a, c, d) {
                c && r(c.split(" "),
                    function(c) {
                        var f = d;
                        F(f) && (f = !Nb(a, c)); (f ? pb: ob)(a, c)
                    })
            },
            parent: function(a) {
                return (a = a.parentNode) && 11 !== a.nodeType ? a: null
            },
            next: function(a) {
                if (a.nextElementSibling) return a.nextElementSibling;
                for (a = a.nextSibling; null != a && 1 !== a.nodeType;) a = a.nextSibling;
                return a
            },
            find: function(a, c) {
                return a.getElementsByTagName ? a.getElementsByTagName(c) : []
            },
            clone: Kb,
            triggerHandler: function(a, c, d) {
                var e, f;
                e = c.type || c;
                var g = (pa(a, "events") || {})[e];
                g && (e = {
                    preventDefault: function() {
                        this.defaultPrevented = !0
                    },
                    isDefaultPrevented: function() {
                        return ! 0 === this.defaultPrevented
                    },
                    stopPropagation: v,
                    type: e,
                    target: a
                },
                c.type && (e = E(e, c)), c = ha(g), f = d ? [e].concat(d) : [e], r(c,
                    function(c) {
                        c.apply(a, f)
                    }))
            }
        },
        function(a, c) {
            S.prototype[c] = function(c, e, f) {
                for (var g, h = 0; h < this.length; h++) F(g) ? (g = a(this[h], c, e, f), D(g) && (g = A(g))) : Jb(g, a(this[h], c, e, f));
                return D(g) ? g: this
            };
            S.prototype.bind = S.prototype.on;
            S.prototype.unbind = S.prototype.off
        });
    db.prototype = {
        put: function(a, c) {
            this[Na(a, this.nextUid)] = c
        },
        get: function(a) {
            return this[Na(a, this.nextUid)]
        },
        remove: function(a) {
            var c = this[a = Na(a, this.nextUid)];
            delete this[a];
            return c
        }
    };
    var pe = /^function\s*[^\(]*\(\s*([^\)]*)\)/m,
        qe = /,/,
        re = /^\s*(_?)(\S+?)\1\s*$/,
        oe = /((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,
        eb = z("$injector"),
        Qe = z("$animate"),
        Ld = ["$provide",
            function(a) {
                this.$$selectors = {};
                this.register = function(c, d) {
                    var e = c + "-animation";
                    if (c && "." != c.charAt(0)) throw Qe("notcsel", c);
                    this.$$selectors[c.substr(1)] = e;
                    a.factory(e, d)
                };
                this.classNameFilter = function(a) {
                    1 === arguments.length && (this.$$classNameFilter = a instanceof RegExp ? a: null);
                    return this.$$classNameFilter
                };
                this.$get = ["$timeout", "$$asyncCallback",
                    function(a, d) {
                        return {
                            enter: function(a, c, g, h) {
                                g ? g.after(a) : (c && c[0] || (c = g.parent()), c.append(a));
                                h && d(h)
                            },
                            leave: function(a, c) {
                                a.remove();
                                c && d(c)
                            },
                            move: function(a, c, d, h) {
                                this.enter(a, c, d, h)
                            },
                            addClass: function(a, c, g) {
                                c = G(c) ? c: L(c) ? c.join(" ") : "";
                                r(a,
                                    function(a) {
                                        pb(a, c)
                                    });
                                g && d(g)
                            },
                            removeClass: function(a, c, g) {
                                c = G(c) ? c: L(c) ? c.join(" ") : "";
                                r(a,
                                    function(a) {
                                        ob(a, c)
                                    });
                                g && d(g)
                            },
                            setClass: function(a, c, g, h) {
                                r(a,
                                    function(a) {
                                        pb(a, c);
                                        ob(a, g)
                                    });
                                h && d(h)
                            },
                            enabled: v
                        }
                    }]
            }],
        ja = z("$compile");
    gc.$inject = ["$provide", "$$sanitizeUriProvider"];
    var we = /^(x[\:\-_]|data[\:\-_])/i,
        wc = z("$interpolate"),
        Re = /^([^\?#]*)(\?([^#]*))?(#(.*))?$/,
        ze = {
            http: 80,
            https: 443,
            ftp: 21
        },
        Sb = z("$location");
    Ac.prototype = Tb.prototype = zc.prototype = {
        $$html5: !1,
        $$replace: !1,
        absUrl: tb("$$absUrl"),
        url: function(a) {
            if (F(a)) return this.$$url;
            a = Re.exec(a);
            a[1] && this.path(decodeURIComponent(a[1])); (a[2] || a[1]) && this.search(a[3] || "");
            this.hash(a[5] || "");
            return this
        },
        protocol: tb("$$protocol"),
        host: tb("$$host"),
        port: tb("$$port"),
        path: Bc("$$path",
            function(a) {
                a = null !== a ? a.toString() : "";
                return "/" == a.charAt(0) ? a: "/" + a
            }),
        search: function(a, c) {
            switch (arguments.length) {
                case 0:
                    return this.$$search;
                case 1:
                    if (G(a) || jb(a)) a = a.toString(),
                        this.$$search = cc(a);
                    else if (T(a)) r(a,
                        function(c, e) {
                            null == c && delete a[e]
                        }),
                        this.$$search = a;
                    else throw Sb("isrcharg");
                    break;
                default:
                    F(c) || null === c ? delete this.$$search[a] : this.$$search[a] = c
            }
            this.$$compose();
            return this
        },
        hash: Bc("$$hash",
            function(a) {
                return null !== a ? a.toString() : ""
            }),
        replace: function() {
            this.$$replace = !0;
            return this
        }
    };
    var la = z("$parse"),
        Ec = {},
        ya,
        Se = Function.prototype.call,
        Te = Function.prototype.apply,
        Pc = Function.prototype.bind,
        hb = {
            "null": function() {
                return null
            },
            "true": function() {
                return ! 0
            },
            "false": function() {
                return ! 1
            },
            undefined: v,
            "+": function(a, c, d, e) {
                d = d(a, c);
                e = e(a, c);
                return D(d) ? D(e) ? d + e: d: D(e) ? e: u
            },
            "-": function(a, c, d, e) {
                d = d(a, c);
                e = e(a, c);
                return (D(d) ? d: 0) - (D(e) ? e: 0)
            },
            "*": function(a, c, d, e) {
                return d(a, c) * e(a, c)
            },
            "/": function(a, c, d, e) {
                return d(a, c) / e(a, c)
            },
            "%": function(a, c, d, e) {
                return d(a, c) % e(a, c)
            },
            "^": function(a, c, d, e) {
                return d(a, c) ^ e(a, c)
            },
            "=": v,
            "===": function(a, c, d, e) {
                return d(a, c) === e(a, c)
            },
            "!==": function(a, c, d, e) {
                return d(a, c) !== e(a, c)
            },
            "==": function(a, c, d, e) {
                return d(a, c) == e(a, c)
            },
            "!=": function(a, c, d, e) {
                return d(a, c) != e(a, c)
            },
            "<": function(a, c, d, e) {
                return d(a, c) < e(a, c)
            },
            ">": function(a, c, d, e) {
                return d(a, c) > e(a, c)
            },
            "<=": function(a, c, d, e) {
                return d(a, c) <= e(a, c)
            },
            ">=": function(a, c, d, e) {
                return d(a, c) >= e(a, c)
            },
            "&&": function(a, c, d, e) {
                return d(a, c) && e(a, c)
            },
            "||": function(a, c, d, e) {
                return d(a, c) || e(a, c)
            },
            "&": function(a, c, d, e) {
                return d(a, c) & e(a, c)
            },
            "|": function(a, c, d, e) {
                return e(a, c)(a, c, d(a, c))
            },
            "!": function(a, c, d) {
                return ! d(a, c)
            }
        },
        Ue = {
            n: "\n",
            f: "\f",
            r: "\r",
            t: "\t",
            v: "\v",
            "'": "'",
            '"': '"'
        },
        Ub = function(a) {
            this.options = a
        };
    Ub.prototype = {
        constructor: Ub,
        lex: function(a) {
            this.text = a;
            this.index = 0;
            this.ch = u;
            this.lastCh = ":";
            for (this.tokens = []; this.index < this.text.length;) {
                this.ch = this.text.charAt(this.index);
                if (this.is("\"'")) this.readString(this.ch);
                else if (this.isNumber(this.ch) || this.is(".") && this.isNumber(this.peek())) this.readNumber();
                else if (this.isIdent(this.ch)) this.readIdent();
                else if (this.is("(){}[].,;:?")) this.tokens.push({
                    index: this.index,
                    text: this.ch
                }),
                    this.index++;
                else if (this.isWhitespace(this.ch)) {
                    this.index++;
                    continue
                } else {
                    a = this.ch + this.peek();
                    var c = a + this.peek(2),
                        d = hb[this.ch],
                        e = hb[a],
                        f = hb[c];
                    f ? (this.tokens.push({
                        index: this.index,
                        text: c,
                        fn: f
                    }), this.index += 3) : e ? (this.tokens.push({
                        index: this.index,
                        text: a,
                        fn: e
                    }), this.index += 2) : d ? (this.tokens.push({
                        index: this.index,
                        text: this.ch,
                        fn: d
                    }), this.index += 1) : this.throwError("Unexpected next character ", this.index, this.index + 1)
                }
                this.lastCh = this.ch
            }
            return this.tokens
        },
        is: function(a) {
            return - 1 !== a.indexOf(this.ch)
        },
        was: function(a) {
            return - 1 !== a.indexOf(this.lastCh)
        },
        peek: function(a) {
            a = a || 1;
            return this.index + a < this.text.length ? this.text.charAt(this.index + a) : !1
        },
        isNumber: function(a) {
            return "0" <= a && "9" >= a
        },
        isWhitespace: function(a) {
            return " " === a || "\r" === a || "\t" === a || "\n" === a || "\v" === a || "\u00a0" === a
        },
        isIdent: function(a) {
            return "a" <= a && "z" >= a || "A" <= a && "Z" >= a || "_" === a || "$" === a
        },
        isExpOperator: function(a) {
            return "-" === a || "+" === a || this.isNumber(a)
        },
        throwError: function(a, c, d) {
            d = d || this.index;
            c = D(c) ? "s " + c + "-" + this.index + " [" + this.text.substring(c, d) + "]": " " + d;
            throw la("lexerr", a, c, this.text);
        },
        readNumber: function() {
            for (var a = "",
                     c = this.index; this.index < this.text.length;) {
                var d = x(this.text.charAt(this.index));
                if ("." == d || this.isNumber(d)) a += d;
                else {
                    var e = this.peek();
                    if ("e" == d && this.isExpOperator(e)) a += d;
                    else if (this.isExpOperator(d) && e && this.isNumber(e) && "e" == a.charAt(a.length - 1)) a += d;
                    else if (!this.isExpOperator(d) || e && this.isNumber(e) || "e" != a.charAt(a.length - 1)) break;
                    else this.throwError("Invalid exponent")
                }
                this.index++
            }
            a *= 1;
            this.tokens.push({
                index: c,
                text: a,
                literal: !0,
                constant: !0,
                fn: function() {
                    return a
                }
            })
        },
        readIdent: function() {
            for (var a = this,
                     c = "",
                     d = this.index,
                     e, f, g, h; this.index < this.text.length;) {
                h = this.text.charAt(this.index);
                if ("." === h || this.isIdent(h) || this.isNumber(h))"." === h && (e = this.index),
                    c += h;
                else break;
                this.index++
            }
            if (e) for (f = this.index; f < this.text.length;) {
                h = this.text.charAt(f);
                if ("(" === h) {
                    g = c.substr(e - d + 1);
                    c = c.substr(0, e - d);
                    this.index = f;
                    break
                }
                if (this.isWhitespace(h)) f++;
                else break
            }
            d = {
                index: d,
                text: c
            };
            if (hb.hasOwnProperty(c)) d.fn = hb[c],
                d.literal = !0,
                d.constant = !0;
            else {
                var k = Dc(c, this.options, this.text);
                d.fn = E(function(a, c) {
                        return k(a, c)
                    },
                    {
                        assign: function(d, e) {
                            return ub(d, c, e, a.text, a.options)
                        }
                    })
            }
            this.tokens.push(d);
            g && (this.tokens.push({
                index: e,
                text: "."
            }), this.tokens.push({
                index: e + 1,
                text: g
            }))
        },
        readString: function(a) {
            var c = this.index;
            this.index++;
            for (var d = "",
                     e = a,
                     f = !1; this.index < this.text.length;) {
                var g = this.text.charAt(this.index),
                    e = e + g;
                if (f)"u" === g ? (f = this.text.substring(this.index + 1, this.index + 5), f.match(/[\da-f]{4}/i) || this.throwError("Invalid unicode escape [\\u" + f + "]"), this.index += 4, d += String.fromCharCode(parseInt(f, 16))) : d += Ue[g] || g,
                    f = !1;
                else if ("\\" === g) f = !0;
                else {
                    if (g === a) {
                        this.index++;
                        this.tokens.push({
                            index: c,
                            text: e,
                            string: d,
                            literal: !0,
                            constant: !0,
                            fn: function() {
                                return d
                            }
                        });
                        return
                    }
                    d += g
                }
                this.index++
            }
            this.throwError("Unterminated quote", c)
        }
    };
    var gb = function(a, c, d) {
        this.lexer = a;
        this.$filter = c;
        this.options = d
    };
    gb.ZERO = E(function() {
            return 0
        },
        {
            constant: !0
        });
    gb.prototype = {
        constructor: gb,
        parse: function(a) {
            this.text = a;
            this.tokens = this.lexer.lex(a);
            a = this.statements();
            0 !== this.tokens.length && this.throwError("is an unexpected token", this.tokens[0]);
            a.literal = !!a.literal;
            a.constant = !!a.constant;
            return a
        },
        primary: function() {
            var a;
            if (this.expect("(")) a = this.filterChain(),
                this.consume(")");
            else if (this.expect("[")) a = this.arrayDeclaration();
            else if (this.expect("{")) a = this.object();
            else {
                var c = this.expect(); (a = c.fn) || this.throwError("not a primary expression", c);
                a.literal = !!c.literal;
                a.constant = !!c.constant
            }
            for (var d; c = this.expect("(", "[", ".");)"(" === c.text ? (a = this.functionCall(a, d), d = null) : "[" === c.text ? (d = a, a = this.objectIndex(a)) : "." === c.text ? (d = a, a = this.fieldAccess(a)) : this.throwError("IMPOSSIBLE");
            return a
        },
        throwError: function(a, c) {
            throw la("syntax", c.text, a, c.index + 1, this.text, this.text.substring(c.index));
        },
        peekToken: function() {
            if (0 === this.tokens.length) throw la("ueoe", this.text);
            return this.tokens[0]
        },
        peek: function(a, c, d, e) {
            if (0 < this.tokens.length) {
                var f = this.tokens[0],
                    g = f.text;
                if (g === a || g === c || g === d || g === e || !(a || c || d || e)) return f
            }
            return ! 1
        },
        expect: function(a, c, d, e) {
            return (a = this.peek(a, c, d, e)) ? (this.tokens.shift(), a) : !1
        },
        consume: function(a) {
            this.expect(a) || this.throwError("is unexpected, expecting [" + a + "]", this.peek())
        },
        unaryFn: function(a, c) {
            return E(function(d, e) {
                    return a(d, e, c)
                },
                {
                    constant: c.constant
                })
        },
        ternaryFn: function(a, c, d) {
            return E(function(e, f) {
                    return a(e, f) ? c(e, f) : d(e, f)
                },
                {
                    constant: a.constant && c.constant && d.constant
                })
        },
        binaryFn: function(a, c, d) {
            return E(function(e, f) {
                    return c(e, f, a, d)
                },
                {
                    constant: a.constant && d.constant
                })
        },
        statements: function() {
            for (var a = [];;) if (0 < this.tokens.length && !this.peek("}", ")", ";", "]") && a.push(this.filterChain()), !this.expect(";")) return 1 === a.length ? a[0] : function(c, d) {
                for (var e, f = 0; f < a.length; f++) {
                    var g = a[f];
                    g && (e = g(c, d))
                }
                return e
            }
        },
        filterChain: function() {
            for (var a = this.expression(), c;;) if (c = this.expect("|")) a = this.binaryFn(a, c.fn, this.filter());
            else return a
        },
        filter: function() {
            for (var a = this.expect(), c = this.$filter(a.text), d = [];;) if (a = this.expect(":")) d.push(this.expression());
            else {
                var e = function(a, e, h) {
                    h = [h];
                    for (var k = 0; k < d.length; k++) h.push(d[k](a, e));
                    return c.apply(a, h)
                };
                return function() {
                    return e
                }
            }
        },
        expression: function() {
            return this.assignment()
        },
        assignment: function() {
            var a = this.ternary(),
                c,
                d;
            return (d = this.expect("=")) ? (a.assign || this.throwError("implies assignment but [" + this.text.substring(0, d.index) + "] can not be assigned to", d), c = this.ternary(),
                function(d, f) {
                    return a.assign(d, c(d, f), f)
                }) : a
        },
        ternary: function() {
            var a = this.logicalOR(),
                c,
                d;
            if (this.expect("?")) {
                c = this.assignment();
                if (d = this.expect(":")) return this.ternaryFn(a, c, this.assignment());
                this.throwError("expected :", d)
            } else return a
        },
        logicalOR: function() {
            for (var a = this.logicalAND(), c;;) if (c = this.expect("||")) a = this.binaryFn(a, c.fn, this.logicalAND());
            else return a
        },
        logicalAND: function() {
            var a = this.equality(),
                c;
            if (c = this.expect("&&")) a = this.binaryFn(a, c.fn, this.logicalAND());
            return a
        },
        equality: function() {
            var a = this.relational(),
                c;
            if (c = this.expect("==", "!=", "===", "!==")) a = this.binaryFn(a, c.fn, this.equality());
            return a
        },
        relational: function() {
            var a = this.additive(),
                c;
            if (c = this.expect("<", ">", "<=", ">=")) a = this.binaryFn(a, c.fn, this.relational());
            return a
        },
        additive: function() {
            for (var a = this.multiplicative(), c; c = this.expect("+", "-");) a = this.binaryFn(a, c.fn, this.multiplicative());
            return a
        },
        multiplicative: function() {
            for (var a = this.unary(), c; c = this.expect("*", "/", "%");) a = this.binaryFn(a, c.fn, this.unary());
            return a
        },
        unary: function() {
            var a;
            return this.expect("+") ? this.primary() : (a = this.expect("-")) ? this.binaryFn(gb.ZERO, a.fn, this.unary()) : (a = this.expect("!")) ? this.unaryFn(a.fn, this.unary()) : this.primary()
        },
        fieldAccess: function(a) {
            var c = this,
                d = this.expect().text,
                e = Dc(d, this.options, this.text);
            return E(function(c, d, h) {
                    return e(h || a(c, d))
                },
                {
                    assign: function(e, g, h) { (h = a(e, h)) || a.assign(e, h = {});
                        return ub(h, d, g, c.text, c.options)
                    }
                })
        },
        objectIndex: function(a) {
            var c = this,
                d = this.expression();
            this.consume("]");
            return E(function(e, f) {
                    var g = a(e, f),
                        h = d(e, f),
                        k;
                    ka(h, c.text);
                    if (!g) return u; (g = ma(g[h], c.text)) && (g.then && c.options.unwrapPromises) && (k = g, "$$v" in g || (k.$$v = u, k.then(function(a) {
                        k.$$v = a
                    })), g = g.$$v);
                    return g
                },
                {
                    assign: function(e, f, g) {
                        var h = ka(d(e, g), c.text); (g = ma(a(e, g), c.text)) || a.assign(e, g = {});
                        return g[h] = f
                    }
                })
        },
        functionCall: function(a, c) {
            var d = [];
            if (")" !== this.peekToken().text) {
                do d.push(this.expression());
                while (this.expect(","))
            }
            this.consume(")");
            var e = this;
            return function(f, g) {
                for (var h = [], k = c ? c(f, g) : f, m = 0; m < d.length; m++) h.push(ma(d[m](f, g), e.text));
                m = a(f, g, k) || v;
                ma(k, e.text);
                var l = e.text;
                if (m) {
                    if (m.constructor === m) throw la("isecfn", l);
                    if (m === Se || m === Te || Pc && m === Pc) throw la("isecff", l);
                }
                h = m.apply ? m.apply(k, h) : m(h[0], h[1], h[2], h[3], h[4]);
                return ma(h, e.text)
            }
        },
        arrayDeclaration: function() {
            var a = [],
                c = !0;
            if ("]" !== this.peekToken().text) {
                do {
                    if (this.peek("]")) break;
                    var d = this.expression();
                    a.push(d);
                    d.constant || (c = !1)
                } while ( this . expect (","))
            }
            this.consume("]");
            return E(function(c, d) {
                    for (var g = [], h = 0; h < a.length; h++) g.push(a[h](c, d));
                    return g
                },
                {
                    literal: !0,
                    constant: c
                })
        },
        object: function() {
            var a = [],
                c = !0;
            if ("}" !== this.peekToken().text) {
                do {
                    if (this.peek("}")) break;
                    var d = this.expect(), d = d.string || d.text;
                    this.consume(":");
                    var e = this.expression();
                    a.push({
                        key: d,
                        value: e
                    });
                    e.constant || (c = !1)
                } while ( this . expect (","))
            }
            this.consume("}");
            return E(function(c, d) {
                    for (var e = {},
                             k = 0; k < a.length; k++) {
                        var m = a[k];
                        e[m.key] = m.value(c, d)
                    }
                    return e
                },
                {
                    literal: !0,
                    constant: c
                })
        }
    };
    var Ce = {},
        Be = {},
        za = z("$sce"),
        fa = {
            HTML: "html",
            CSS: "css",
            URL: "url",
            RESOURCE_URL: "resourceUrl",
            JS: "js"
        },
        Y = X.createElement("a"),
        Gc = xa(W.location.href, !0);
    kc.$inject = ["$provide"];
    Hc.$inject = ["$locale"];
    Jc.$inject = ["$locale"];
    var Mc = ".",
        Me = {
            yyyy: Z("FullYear", 4),
            yy: Z("FullYear", 2, 0, !0),
            y: Z("FullYear", 1),
            MMMM: vb("Month"),
            MMM: vb("Month", !0),
            MM: Z("Month", 2, 1),
            M: Z("Month", 1, 1),
            dd: Z("Date", 2),
            d: Z("Date", 1),
            HH: Z("Hours", 2),
            H: Z("Hours", 1),
            hh: Z("Hours", 2, -12),
            h: Z("Hours", 1, -12),
            mm: Z("Minutes", 2),
            m: Z("Minutes", 1),
            ss: Z("Seconds", 2),
            s: Z("Seconds", 1),
            sss: Z("Milliseconds", 3),
            EEEE: vb("Day"),
            EEE: vb("Day", !0),
            a: function(a, c) {
                return 12 > a.getHours() ? c.AMPMS[0] : c.AMPMS[1]
            },
            Z: function(a) {
                a = -1 * a.getTimezoneOffset();
                return a = (0 <= a ? "+": "") + (Vb(Math[0 < a ? "floor": "ceil"](a / 60), 2) + Vb(Math.abs(a % 60), 2))
            }
        },
        Le = /((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,
        Ke = /^\-?\d+$/;
    Ic.$inject = ["$locale"];
    var Ie = aa(x),
        Je = aa(La);
    Kc.$inject = ["$parse"];
    var cd = aa({
            restrict: "E",
            compile: function(a, c) {
                8 >= R && (c.href || c.name || c.$set("href", ""), a.append(X.createComment("IE fix")));
                if (!c.href && !c.xlinkHref && !c.name) return function(a, c) {
                    var f = "[object SVGAnimatedString]" === Ba.call(c.prop("href")) ? "xlink:href": "href";
                    c.on("click",
                        function(a) {
                            c.attr(f) || a.preventDefault()
                        })
                }
            }
        }),
        Fb = {};
    r(rb,
        function(a, c) {
            if ("multiple" != a) {
                var d = qa("ng-" + c);
                Fb[d] = function() {
                    return {
                        priority: 100,
                        link: function(a, f, g) {
                            a.$watch(g[d],
                                function(a) {
                                    g.$set(c, !!a)
                                })
                        }
                    }
                }
            }
        });
    r(["src", "srcset", "href"],
        function(a) {
            var c = qa("ng-" + a);
            Fb[c] = function() {
                return {
                    priority: 99,
                    link: function(d, e, f) {
                        var g = a,
                            h = a;
                        "href" === a && "[object SVGAnimatedString]" === Ba.call(e.prop("href")) && (h = "xlinkHref", f.$attr[h] = "xlink:href", g = null);
                        f.$observe(c,
                            function(c) {
                                c ? (f.$set(h, c), R && g && e.prop(g, f[h])) : "href" === a && f.$set(h, null)
                            })
                    }
                }
            }
        });
    var yb = {
        $addControl: v,
        $removeControl: v,
        $setValidity: v,
        $setDirty: v,
        $setPristine: v
    };
    Nc.$inject = ["$element", "$attrs", "$scope", "$animate"];
    var Qc = function(a) {
            return ["$timeout",
                function(c) {
                    return {
                        name: "form",
                        restrict: a ? "EAC": "E",
                        controller: Nc,
                        compile: function() {
                            return {
                                pre: function(a, e, f, g) {
                                    if (!f.action) {
                                        var h = function(a) {
                                            a.preventDefault ? a.preventDefault() : a.returnValue = !1
                                        };
                                        sb(e[0], "submit", h);
                                        e.on("$destroy",
                                            function() {
                                                c(function() {
                                                        bb(e[0], "submit", h)
                                                    },
                                                    0, !1)
                                            })
                                    }
                                    var k = e.parent().controller("form"),
                                        m = f.name || f.ngForm;
                                    m && ub(a, m, g, m);
                                    if (k) e.on("$destroy",
                                        function() {
                                            k.$removeControl(g);
                                            m && ub(a, m, u, m);
                                            E(g, yb)
                                        })
                                }
                            }
                        }
                    }
                }]
        },
        dd = Qc(),
        qd = Qc(!0),
        Ve = /^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,
        We = /^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,
        Xe = /^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,
        Rc = {
            text: Ab,
            number: function(a, c, d, e, f, g) {
                Ab(a, c, d, e, f, g);
                e.$parsers.push(function(a) {
                    var c = e.$isEmpty(a);
                    if (c || Xe.test(a)) return e.$setValidity("number", !0),
                        "" === a ? null: c ? a: parseFloat(a);
                    e.$setValidity("number", !1);
                    return u
                });
                Ne(e, "number", Ye, null, e.$$validityState);
                e.$formatters.push(function(a) {
                    return e.$isEmpty(a) ? "": "" + a
                });
                d.min && (a = function(a) {
                    var c = parseFloat(d.min);
                    return ua(e, "min", e.$isEmpty(a) || a >= c, a)
                },
                    e.$parsers.push(a), e.$formatters.push(a));
                d.max && (a = function(a) {
                    var c = parseFloat(d.max);
                    return ua(e, "max", e.$isEmpty(a) || a <= c, a)
                },
                    e.$parsers.push(a), e.$formatters.push(a));
                e.$formatters.push(function(a) {
                    return ua(e, "number", e.$isEmpty(a) || jb(a), a)
                })
            },
            url: function(a, c, d, e, f, g) {
                Ab(a, c, d, e, f, g);
                a = function(a) {
                    return ua(e, "url", e.$isEmpty(a) || Ve.test(a), a)
                };
                e.$formatters.push(a);
                e.$parsers.push(a)
            },
            email: function(a, c, d, e, f, g) {
                Ab(a, c, d, e, f, g);
                a = function(a) {
                    return ua(e, "email", e.$isEmpty(a) || We.test(a), a)
                };
                e.$formatters.push(a);
                e.$parsers.push(a)
            },
            radio: function(a, c, d, e) {
                F(d.name) && c.attr("name", ib());
                c.on("click",
                    function() {
                        c[0].checked && a.$apply(function() {
                            e.$setViewValue(d.value)
                        })
                    });
                e.$render = function() {
                    c[0].checked = d.value == e.$viewValue
                };
                d.$observe("value", e.$render)
            },
            checkbox: function(a, c, d, e) {
                var f = d.ngTrueValue,
                    g = d.ngFalseValue;
                G(f) || (f = !0);
                G(g) || (g = !1);
                c.on("click",
                    function() {
                        a.$apply(function() {
                            e.$setViewValue(c[0].checked)
                        })
                    });
                e.$render = function() {
                    c[0].checked = e.$viewValue
                };
                e.$isEmpty = function(a) {
                    return a !== f
                };
                e.$formatters.push(function(a) {
                    return a === f
                });
                e.$parsers.push(function(a) {
                    return a ? f: g
                })
            },
            hidden: v,
            button: v,
            submit: v,
            reset: v,
            file: v
        },
        Ye = ["badInput"],
        hc = ["$browser", "$sniffer",
            function(a, c) {
                return {
                    restrict: "E",
                    require: "?ngModel",
                    link: function(d, e, f, g) {
                        g && (Rc[x(f.type)] || Rc.text)(d, e, f, g, c, a)
                    }
                }
            }],
        wb = "ng-valid",
        xb = "ng-invalid",
        Ra = "ng-pristine",
        zb = "ng-dirty",
        Ze = ["$scope", "$exceptionHandler", "$attrs", "$element", "$parse", "$animate",
            function(a, c, d, e, f, g) {
                function h(a, c) {
                    c = c ? "-" + nb(c, "-") : "";
                    g.removeClass(e, (a ? xb: wb) + c);
                    g.addClass(e, (a ? wb: xb) + c)
                }
                this.$modelValue = this.$viewValue = Number.NaN;
                this.$parsers = [];
                this.$formatters = [];
                this.$viewChangeListeners = [];
                this.$pristine = !0;
                this.$dirty = !1;
                this.$valid = !0;
                this.$invalid = !1;
                this.$name = d.name;
                var k = f(d.ngModel),
                    m = k.assign;
                if (!m) throw z("ngModel")("nonassign", d.ngModel, ia(e));
                this.$render = v;
                this.$isEmpty = function(a) {
                    return F(a) || "" === a || null === a || a !== a
                };
                var l = e.inheritedData("$formController") || yb,
                    n = 0,
                    q = this.$error = {};
                e.addClass(Ra);
                h(!0);
                this.$setValidity = function(a, c) {
                    q[a] !== !c && (c ? (q[a] && n--, n || (h(!0), this.$valid = !0, this.$invalid = !1)) : (h(!1), this.$invalid = !0, this.$valid = !1, n++), q[a] = !c, h(c, a), l.$setValidity(a, c, this))
                };
                this.$setPristine = function() {
                    this.$dirty = !1;
                    this.$pristine = !0;
                    g.removeClass(e, zb);
                    g.addClass(e, Ra)
                };
                this.$setViewValue = function(d) {
                    this.$viewValue = d;
                    this.$pristine && (this.$dirty = !0, this.$pristine = !1, g.removeClass(e, Ra), g.addClass(e, zb), l.$setDirty());
                    r(this.$parsers,
                        function(a) {
                            d = a(d)
                        });
                    this.$modelValue !== d && (this.$modelValue = d, m(a, d), r(this.$viewChangeListeners,
                        function(a) {
                            try {
                                a()
                            } catch(d) {
                                c(d)
                            }
                        }))
                };
                var p = this;
                a.$watch(function() {
                    var c = k(a);
                    if (p.$modelValue !== c) {
                        var d = p.$formatters,
                            e = d.length;
                        for (p.$modelValue = c; e--;) c = d[e](c);
                        p.$viewValue !== c && (p.$viewValue = c, p.$render())
                    }
                    return c
                })
            }],
        Fd = function() {
            return {
                require: ["ngModel", "^?form"],
                controller: Ze,
                link: function(a, c, d, e) {
                    var f = e[0],
                        g = e[1] || yb;
                    g.$addControl(f);
                    a.$on("$destroy",
                        function() {
                            g.$removeControl(f)
                        })
                }
            }
        },
        Hd = aa({
            require: "ngModel",
            link: function(a, c, d, e) {
                e.$viewChangeListeners.push(function() {
                    a.$eval(d.ngChange)
                })
            }
        }),
        ic = function() {
            return {
                require: "?ngModel",
                link: function(a, c, d, e) {
                    if (e) {
                        d.required = !0;
                        var f = function(a) {
                            if (d.required && e.$isEmpty(a)) e.$setValidity("required", !1);
                            else return e.$setValidity("required", !0),
                                a
                        };
                        e.$formatters.push(f);
                        e.$parsers.unshift(f);
                        d.$observe("required",
                            function() {
                                f(e.$viewValue)
                            })
                    }
                }
            }
        },
        Gd = function() {
            return {
                require: "ngModel",
                link: function(a, c, d, e) {
                    var f = (a = /\/(.*)\//.exec(d.ngList)) && RegExp(a[1]) || d.ngList || ",";
                    e.$parsers.push(function(a) {
                        if (!F(a)) {
                            var c = [];
                            a && r(a.split(f),
                                function(a) {
                                    a && c.push($(a))
                                });
                            return c
                        }
                    });
                    e.$formatters.push(function(a) {
                        return L(a) ? a.join(", ") : u
                    });
                    e.$isEmpty = function(a) {
                        return ! a || !a.length
                    }
                }
            }
        },
        $e = /^(true|false|\d+)$/,
        Id = function() {
            return {
                priority: 100,
                compile: function(a, c) {
                    return $e.test(c.ngValue) ?
                        function(a, c, f) {
                            f.$set("value", a.$eval(f.ngValue))
                        }: function(a, c, f) {
                            a.$watch(f.ngValue,
                                function(a) {
                                    f.$set("value", a)
                                })
                        }
                }
            }
        },
        id = Aa({
            compile: function(a) {
                a.addClass("ng-binding");
                return function(a, d, e) {
                    d.data("$binding", e.ngBind);
                    a.$watch(e.ngBind,
                        function(a) {
                            d.text(a == u ? "": a)
                        })
                }
            }
        }),
        kd = ["$interpolate",
            function(a) {
                return function(c, d, e) {
                    c = a(d.attr(e.$attr.ngBindTemplate));
                    d.addClass("ng-binding").data("$binding", c);
                    e.$observe("ngBindTemplate",
                        function(a) {
                            d.text(a)
                        })
                }
            }],
        jd = ["$sce", "$parse",
            function(a, c) {
                return {
                    compile: function(d) {
                        d.addClass("ng-binding");
                        return function(d, f, g) {
                            f.data("$binding", g.ngBindHtml);
                            var h = c(g.ngBindHtml);
                            d.$watch(function() {
                                    return (h(d) || "").toString()
                                },
                                function(c) {
                                    f.html(a.getTrustedHtml(h(d)) || "")
                                })
                        }
                    }
                }
            }],
        ld = Wb("", !0),
        nd = Wb("Odd", 0),
        md = Wb("Even", 1),
        od = Aa({
            compile: function(a, c) {
                c.$set("ngCloak", u);
                a.removeClass("ng-cloak")
            }
        }),
        pd = [function() {
            return {
                scope: !0,
                controller: "@",
                priority: 500
            }
        }],
        jc = {},
        af = {
            blur: !0,
            focus: !0
        };
    r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),
        function(a) {
            var c = qa("ng-" + a);
            jc[c] = ["$parse", "$rootScope",
                function(d, e) {
                    return {
                        compile: function(f, g) {
                            var h = d(g[c], !0);
                            return function(c, d) {
                                d.on(a,
                                    function(d) {
                                        var f = function() {
                                            h(c, {
                                                $event: d
                                            })
                                        };
                                        af[a] && e.$$phase ? c.$evalAsync(f) : c.$apply(f)
                                    })
                            }
                        }
                    }
                }]
        });
    var sd = ["$animate",
            function(a) {
                return {
                    transclude: "element",
                    priority: 600,
                    terminal: !0,
                    restrict: "A",
                    $$tlb: !0,
                    link: function(c, d, e, f, g) {
                        var h, k, m;
                        c.$watch(e.ngIf,
                            function(f) {
                                Wa(f) ? k || (k = c.$new(), g(k,
                                    function(c) {
                                        c[c.length++] = X.createComment(" end ngIf: " + e.ngIf + " ");
                                        h = {
                                            clone: c
                                        };
                                        a.enter(c, d.parent(), d)
                                    })) : (m && (m.remove(), m = null), k && (k.$destroy(), k = null), h && (m = Eb(h.clone), a.leave(m,
                                    function() {
                                        m = null
                                    }), h = null))
                            })
                    }
                }
            }],
        td = ["$http", "$templateCache", "$anchorScroll", "$animate", "$sce",
            function(a, c, d, e, f) {
                return {
                    restrict: "ECA",
                    priority: 400,
                    terminal: !0,
                    transclude: "element",
                    controller: Xa.noop,
                    compile: function(g, h) {
                        var k = h.ngInclude || h.src,
                            m = h.onload || "",
                            l = h.autoscroll;
                        return function(g, h, p, r, J) {
                            var w = 0,
                                t, y, u, B = function() {
                                    y && (y.remove(), y = null);
                                    t && (t.$destroy(), t = null);
                                    u && (e.leave(u,
                                        function() {
                                            y = null
                                        }), y = u, u = null)
                                };
                            g.$watch(f.parseAsResourceUrl(k),
                                function(f) {
                                    var k = function() { ! D(l) || l && !g.$eval(l) || d()
                                        },
                                        p = ++w;
                                    f ? (a.get(f, {
                                        cache: c
                                    }).success(function(a) {
                                        if (p === w) {
                                            var c = g.$new();
                                            r.template = a;
                                            a = J(c,
                                                function(a) {
                                                    B();
                                                    e.enter(a, null, h, k)
                                                });
                                            t = c;
                                            u = a;
                                            t.$emit("$includeContentLoaded");
                                            g.$eval(m)
                                        }
                                    }).error(function() {
                                        p === w && B()
                                    }), g.$emit("$includeContentRequested")) : (B(), r.template = null)
                                })
                        }
                    }
                }
            }],
        Jd = ["$compile",
            function(a) {
                return {
                    restrict: "ECA",
                    priority: -400,
                    require: "ngInclude",
                    link: function(c, d, e, f) {
                        d.html(f.template);
                        a(d.contents())(c)
                    }
                }
            }],
        ud = Aa({
            priority: 450,
            compile: function() {
                return {
                    pre: function(a, c, d) {
                        a.$eval(d.ngInit)
                    }
                }
            }
        }),
        vd = Aa({
            terminal: !0,
            priority: 1E3
        }),
        wd = ["$locale", "$interpolate",
            function(a, c) {
                var d = /{}/g;
                return {
                    restrict: "EA",
                    link: function(e, f, g) {
                        var h = g.count,
                            k = g.$attr.when && f.attr(g.$attr.when),
                            m = g.offset || 0,
                            l = e.$eval(k) || {},
                            n = {},
                            q = c.startSymbol(),
                            p = c.endSymbol(),
                            s = /^when(Minus)?(.+)$/;
                        r(g,
                            function(a, c) {
                                s.test(c) && (l[x(c.replace("when", "").replace("Minus", "-"))] = f.attr(g.$attr[c]))
                            });
                        r(l,
                            function(a, e) {
                                n[e] = c(a.replace(d, q + h + "-" + m + p))
                            });
                        e.$watch(function() {
                                var c = parseFloat(e.$eval(h));
                                if (isNaN(c)) return "";
                                c in l || (c = a.pluralCat(c - m));
                                return n[c](e, f, !0)
                            },
                            function(a) {
                                f.text(a)
                            })
                    }
                }
            }],
        xd = ["$parse", "$animate",
            function(a, c) {
                var d = z("ngRepeat");
                return {
                    transclude: "element",
                    priority: 1E3,
                    terminal: !0,
                    $$tlb: !0,
                    link: function(e, f, g, h, k) {
                        var m = g.ngRepeat,
                            l = m.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),
                            n,
                            q,
                            p,
                            s,
                            u,
                            w,
                            t = {
                                $id: Na
                            };
                        if (!l) throw d("iexp", m);
                        g = l[1];
                        h = l[2]; (l = l[3]) ? (n = a(l), q = function(a, c, d) {
                            w && (t[w] = a);
                            t[u] = c;
                            t.$index = d;
                            return n(e, t)
                        }) : (p = function(a, c) {
                            return Na(c)
                        },
                            s = function(a) {
                                return a
                            });
                        l = g.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/);
                        if (!l) throw d("iidexp", g);
                        u = l[3] || l[1];
                        w = l[2];
                        var y = {};
                        e.$watchCollection(h,
                            function(a) {
                                var g, h, l = f[0],
                                    n,
                                    t = {},
                                    D,
                                    C,
                                    I,
                                    x,
                                    G,
                                    v,
                                    z,
                                    F = [];
                                if (Sa(a)) v = a,
                                    G = q || p;
                                else {
                                    G = q || s;
                                    v = [];
                                    for (I in a) a.hasOwnProperty(I) && "$" != I.charAt(0) && v.push(I);
                                    v.sort()
                                }
                                D = v.length;
                                h = F.length = v.length;
                                for (g = 0; g < h; g++) if (I = a === v ? g: v[g], x = a[I], n = G(I, x, g), Ea(n, "`track by` id"), y.hasOwnProperty(n)) z = y[n],
                                    delete y[n],
                                    t[n] = z,
                                    F[g] = z;
                                else {
                                    if (t.hasOwnProperty(n)) throw r(F,
                                        function(a) {
                                            a && a.scope && (y[a.id] = a)
                                        }),
                                        d("dupes", m, n, oa(x));
                                    F[g] = {
                                        id: n
                                    };
                                    t[n] = !1
                                }
                                for (I in y) y.hasOwnProperty(I) && (z = y[I], g = Eb(z.clone), c.leave(g), r(g,
                                    function(a) {
                                        a.$$NG_REMOVED = !0
                                    }), z.scope.$destroy());
                                g = 0;
                                for (h = v.length; g < h; g++) {
                                    I = a === v ? g: v[g];
                                    x = a[I];
                                    z = F[g];
                                    F[g - 1] && (l = F[g - 1].clone[F[g - 1].clone.length - 1]);
                                    if (z.scope) {
                                        C = z.scope;
                                        n = l;
                                        do n = n.nextSibling;
                                        while (n && n.$$NG_REMOVED);
                                        z.clone[0] != n && c.move(Eb(z.clone), null, A(l));
                                        l = z.clone[z.clone.length - 1]
                                    } else C = e.$new();
                                    C[u] = x;
                                    w && (C[w] = I);
                                    C.$index = g;
                                    C.$first = 0 === g;
                                    C.$last = g === D - 1;
                                    C.$middle = !(C.$first || C.$last);
                                    C.$odd = !(C.$even = 0 === (g & 1));
                                    z.scope || k(C,
                                        function(a) {
                                            a[a.length++] = X.createComment(" end ngRepeat: " + m + " ");
                                            c.enter(a, null, A(l));
                                            l = a;
                                            z.scope = C;
                                            z.clone = a;
                                            t[z.id] = z
                                        })
                                }
                                y = t
                            })
                    }
                }
            }],
        yd = ["$animate",
            function(a) {
                return function(c, d, e) {
                    c.$watch(e.ngShow,
                        function(c) {
                            a[Wa(c) ? "removeClass": "addClass"](d, "ng-hide")
                        })
                }
            }],
        rd = ["$animate",
            function(a) {
                return function(c, d, e) {
                    c.$watch(e.ngHide,
                        function(c) {
                            a[Wa(c) ? "addClass": "removeClass"](d, "ng-hide")
                        })
                }
            }],
        zd = Aa(function(a, c, d) {
            a.$watch(d.ngStyle,
                function(a, d) {
                    d && a !== d && r(d,
                        function(a, d) {
                            c.css(d, "")
                        });
                    a && c.css(a)
                },
                !0)
        }),
        Ad = ["$animate",
            function(a) {
                return {
                    restrict: "EA",
                    require: "ngSwitch",
                    controller: ["$scope",
                        function() {
                            this.cases = {}
                        }],
                    link: function(c, d, e, f) {
                        var g = [],
                            h = [],
                            k = [],
                            m = [];
                        c.$watch(e.ngSwitch || e.on,
                            function(d) {
                                var n, q;
                                n = 0;
                                for (q = k.length; n < q; ++n) k[n].remove();
                                n = k.length = 0;
                                for (q = m.length; n < q; ++n) {
                                    var p = h[n];
                                    m[n].$destroy();
                                    k[n] = p;
                                    a.leave(p,
                                        function() {
                                            k.splice(n, 1)
                                        })
                                }
                                h.length = 0;
                                m.length = 0;
                                if (g = f.cases["!" + d] || f.cases["?"]) c.$eval(e.change),
                                    r(g,
                                        function(d) {
                                            var e = c.$new();
                                            m.push(e);
                                            d.transclude(e,
                                                function(c) {
                                                    var e = d.element;
                                                    h.push(c);
                                                    a.enter(c, e.parent(), e)
                                                })
                                        })
                            })
                    }
                }
            }],
        Bd = Aa({
            transclude: "element",
            priority: 800,
            require: "^ngSwitch",
            link: function(a, c, d, e, f) {
                e.cases["!" + d.ngSwitchWhen] = e.cases["!" + d.ngSwitchWhen] || [];
                e.cases["!" + d.ngSwitchWhen].push({
                    transclude: f,
                    element: c
                })
            }
        }),
        Cd = Aa({
            transclude: "element",
            priority: 800,
            require: "^ngSwitch",
            link: function(a, c, d, e, f) {
                e.cases["?"] = e.cases["?"] || [];
                e.cases["?"].push({
                    transclude: f,
                    element: c
                })
            }
        }),
        Ed = Aa({
            link: function(a, c, d, e, f) {
                if (!f) throw z("ngTransclude")("orphan", ia(c));
                f(function(a) {
                    c.empty();
                    c.append(a)
                })
            }
        }),
        ed = ["$templateCache",
            function(a) {
                return {
                    restrict: "E",
                    terminal: !0,
                    compile: function(c, d) {
                        "text/ng-template" == d.type && a.put(d.id, c[0].text)
                    }
                }
            }],
        bf = z("ngOptions"),
        Dd = aa({
            terminal: !0
        }),
        fd = ["$compile", "$parse",
            function(a, c) {
                var d = /^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,
                    e = {
                        $setViewValue: v
                    };
                return {
                    restrict: "E",
                    require: ["select", "?ngModel"],
                    controller: ["$element", "$scope", "$attrs",
                        function(a, c, d) {
                            var k = this,
                                m = {},
                                l = e,
                                n;
                            k.databound = d.ngModel;
                            k.init = function(a, c, d) {
                                l = a;
                                n = d
                            };
                            k.addOption = function(c) {
                                Ea(c, '"option value"');
                                m[c] = !0;
                                l.$viewValue == c && (a.val(c), n.parent() && n.remove())
                            };
                            k.removeOption = function(a) {
                                this.hasOption(a) && (delete m[a], l.$viewValue == a && this.renderUnknownOption(a))
                            };
                            k.renderUnknownOption = function(c) {
                                c = "? " + Na(c) + " ?";
                                n.val(c);
                                a.prepend(n);
                                a.val(c);
                                n.prop("selected", !0)
                            };
                            k.hasOption = function(a) {
                                return m.hasOwnProperty(a)
                            };
                            c.$on("$destroy",
                                function() {
                                    k.renderUnknownOption = v
                                })
                        }],
                    link: function(e, g, h, k) {
                        function m(a, c, d, e) {
                            d.$render = function() {
                                var a = d.$viewValue;
                                e.hasOption(a) ? (x.parent() && x.remove(), c.val(a), "" === a && w.prop("selected", !0)) : F(a) && w ? c.val("") : e.renderUnknownOption(a)
                            };
                            c.on("change",
                                function() {
                                    a.$apply(function() {
                                        x.parent() && x.remove();
                                        d.$setViewValue(c.val())
                                    })
                                })
                        }
                        function l(a, c, d) {
                            var e;
                            d.$render = function() {
                                var a = new db(d.$viewValue);
                                r(c.find("option"),
                                    function(c) {
                                        c.selected = D(a.get(c.value))
                                    })
                            };
                            a.$watch(function() {
                                Ca(e, d.$viewValue) || (e = ha(d.$viewValue), d.$render())
                            });
                            c.on("change",
                                function() {
                                    a.$apply(function() {
                                        var a = [];
                                        r(c.find("option"),
                                            function(c) {
                                                c.selected && a.push(c.value)
                                            });
                                        d.$setViewValue(a)
                                    })
                                })
                        }
                        function n(e, f, g) {
                            function h() {
                                var a = {
                                        "": []
                                    },
                                    c = [""],
                                    d,
                                    k,
                                    s,
                                    u,
                                    v;
                                s = g.$modelValue;
                                u = A(e) || [];
                                var F = n ? Xb(u) : u,
                                    G,
                                    Q,
                                    C;
                                Q = {};
                                C = !1;
                                if (p) if (k = g.$modelValue, w && L(k)) for (C = new db([]), d = {},
                                                                                  v = 0; v < k.length; v++) d[m] = k[v],
                                    C.put(w(e, d), k[v]);
                                else C = new db(k);
                                v = C;
                                var E, K;
                                for (C = 0; G = F.length, C < G; C++) {
                                    k = C;
                                    if (n) {
                                        k = F[C];
                                        if ("$" === k.charAt(0)) continue;
                                        Q[n] = k
                                    }
                                    Q[m] = u[k];
                                    d = r(e, Q) || ""; (k = a[d]) || (k = a[d] = [], c.push(d));
                                    p ? d = D(v.remove(w ? w(e, Q) : x(e, Q))) : (w ? (d = {},
                                        d[m] = s, d = w(e, d) === w(e, Q)) : d = s === x(e, Q), v = v || d);
                                    E = l(e, Q);
                                    E = D(E) ? E: "";
                                    k.push({
                                        id: w ? w(e, Q) : n ? F[C] : C,
                                        label: E,
                                        selected: d
                                    })
                                }
                                p || (z || null === s ? a[""].unshift({
                                    id: "",
                                    label: "",
                                    selected: !v
                                }) : v || a[""].unshift({
                                    id: "?",
                                    label: "",
                                    selected: !0
                                }));
                                Q = 0;
                                for (F = c.length; Q < F; Q++) {
                                    d = c[Q];
                                    k = a[d];
                                    B.length <= Q ? (s = {
                                        element: y.clone().attr("label", d),
                                        label: k.label
                                    },
                                        u = [s], B.push(u), f.append(s.element)) : (u = B[Q], s = u[0], s.label != d && s.element.attr("label", s.label = d));
                                    E = null;
                                    C = 0;
                                    for (G = k.length; C < G; C++) d = k[C],
                                        (v = u[C + 1]) ? (E = v.element, v.label !== d.label && (E.text(v.label = d.label), E.prop("label", v.label)), v.id !== d.id && E.val(v.id = d.id), E[0].selected !== d.selected && (E.prop("selected", v.selected = d.selected), R && E.prop("selected", v.selected))) : ("" === d.id && z ? K = z: (K = t.clone()).val(d.id).prop("selected", d.selected).attr("selected", d.selected).prop("label", d.label).text(d.label), u.push({
                                            element: K,
                                            label: d.label,
                                            id: d.id,
                                            selected: d.selected
                                        }), q.addOption(d.label, K), E ? E.after(K) : s.element.append(K), E = K);
                                    for (C++; u.length > C;) d = u.pop(),
                                        q.removeOption(d.label),
                                        d.element.remove()
                                }
                                for (; B.length > Q;) B.pop()[0].element.remove()
                            }
                            var k;
                            if (! (k = s.match(d))) throw bf("iexp", s, ia(f));
                            var l = c(k[2] || k[1]),
                                m = k[4] || k[6],
                                n = k[5],
                                r = c(k[3] || ""),
                                x = c(k[2] ? k[1] : m),
                                A = c(k[7]),
                                w = k[8] ? c(k[8]) : null,
                                B = [[{
                                    element: f,
                                    label: ""
                                }]];
                            z && (a(z)(e), z.removeClass("ng-scope"), z.remove());
                            f.empty();
                            f.on("change",
                                function() {
                                    e.$apply(function() {
                                        var a, c = A(e) || [],
                                            d = {},
                                            k,
                                            l,
                                            q,
                                            r,
                                            s,
                                            t,
                                            v;
                                        if (p) for (l = [], r = 0, t = B.length; r < t; r++) for (a = B[r], q = 1, s = a.length; q < s; q++) {
                                            if ((k = a[q].element)[0].selected) {
                                                k = k.val();
                                                n && (d[n] = k);
                                                if (w) for (v = 0; v < c.length && (d[m] = c[v], w(e, d) != k); v++);
                                                else d[m] = c[k];
                                                l.push(x(e, d))
                                            }
                                        } else if (k = f.val(), "?" == k) l = u;
                                        else if ("" === k) l = null;
                                        else if (w) for (v = 0; v < c.length; v++) {
                                            if (d[m] = c[v], w(e, d) == k) {
                                                l = x(e, d);
                                                break
                                            }
                                        } else d[m] = c[k],
                                        n && (d[n] = k),
                                            l = x(e, d);
                                        g.$setViewValue(l);
                                        h()
                                    })
                                });
                            g.$render = h;
                            e.$watchCollection(A, h);
                            e.$watchCollection(function() {
                                    var a = {},
                                        c = A(e);
                                    if (c) {
                                        for (var d = Array(c.length), f = 0, g = c.length; f < g; f++) a[m] = c[f],
                                            d[f] = l(e, a);
                                        return d
                                    }
                                },
                                h);
                            p && e.$watchCollection(function() {
                                    return g.$modelValue
                                },
                                h)
                        }
                        if (k[1]) {
                            var q = k[0];
                            k = k[1];
                            var p = h.multiple,
                                s = h.ngOptions,
                                z = !1,
                                w, t = A(X.createElement("option")),
                                y = A(X.createElement("optgroup")),
                                x = t.clone();
                            h = 0;
                            for (var B = g.children(), v = B.length; h < v; h++) if ("" === B[h].value) {
                                w = z = B.eq(h);
                                break
                            }
                            q.init(k, z, x);
                            p && (k.$isEmpty = function(a) {
                                return ! a || 0 === a.length
                            });
                            s ? n(e, g, k) : p ? l(e, g, k) : m(e, g, k, q)
                        }
                    }
                }
            }],
        hd = ["$interpolate",
            function(a) {
                var c = {
                    addOption: v,
                    removeOption: v
                };
                return {
                    restrict: "E",
                    priority: 100,
                    compile: function(d, e) {
                        if (F(e.value)) {
                            var f = a(d.text(), !0);
                            f || e.$set("value", d.text())
                        }
                        return function(a, d, e) {
                            var m = d.parent(),
                                l = m.data("$selectController") || m.parent().data("$selectController");
                            l && l.databound ? d.prop("selected", !1) : l = c;
                            f ? a.$watch(f,
                                function(a, c) {
                                    e.$set("value", a);
                                    a !== c && l.removeOption(c);
                                    l.addOption(a)
                                }) : l.addOption(e.value);
                            d.on("$destroy",
                                function() {
                                    l.removeOption(e.value)
                                })
                        }
                    }
                }
            }],
        gd = aa({
            restrict: "E",
            terminal: !0
        });
    W.angular.bootstrap ? console.log("WARNING: Tried to load angular more than once.") : ((Fa = W.jQuery) && Fa.fn.on ? (A = Fa, E(Fa.fn, {
        scope: Oa.scope,
        isolateScope: Oa.isolateScope,
        controller: Oa.controller,
        injector: Oa.injector,
        inheritedData: Oa.inheritedData
    }), Gb("remove", !0, !0, !1), Gb("empty", !1, !1, !1), Gb("html", !1, !1, !0)) : A = S, Xa.element = A, Zc(Xa), A(X).ready(function() {
        Wc(X, dc)
    }))
})(window, document); ! window.angular.$$csp() && window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>');
//# sourceMappingURL=angular.min.js.map
/*
 AngularJS v1.2.28
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(n, e, A) {
    'use strict';
    function x(s, g, h) {
        return {
            restrict: "ECA",
            terminal: !0,
            priority: 400,
            transclude: "element",
            link: function(a, c, b, f, w) {
                function y() {
                    p && (p.remove(), p = null);
                    k && (k.$destroy(), k = null);
                    l && (h.leave(l,
                        function() {
                            p = null
                        }), p = l, l = null)
                }
                function v() {
                    var b = s.current && s.current.locals;
                    if (e.isDefined(b && b.$template)) {
                        var b = a.$new(),
                            d = s.current;
                        l = w(b,
                            function(d) {
                                h.enter(d, null, l || c,
                                    function() { ! e.isDefined(t) || t && !a.$eval(t) || g()
                                    });
                                y()
                            });
                        k = d.scope = b;
                        k.$emit("$viewContentLoaded");
                        k.$eval(u)
                    } else y()
                }
                var k, l, p, t = b.autoscroll,
                    u = b.onload || "";
                a.$on("$routeChangeSuccess", v);
                v()
            }
        }
    }
    function z(e, g, h) {
        return {
            restrict: "ECA",
            priority: -400,
            link: function(a, c) {
                var b = h.current,
                    f = b.locals;
                c.html(f.$template);
                var w = e(c.contents());
                b.controller && (f.$scope = a, f = g(b.controller, f), b.controllerAs && (a[b.controllerAs] = f), c.data("$ngControllerController", f), c.children().data("$ngControllerController", f));
                w(a)
            }
        }
    }
    n = e.module("ngRoute", ["ng"]).provider("$route",
        function() {
            function s(a, c) {
                return e.extend(new(e.extend(function() {},
                    {
                        prototype: a
                    })), c)
            }
            function g(a, e) {
                var b = e.caseInsensitiveMatch,
                    f = {
                        originalPath: a,
                        regexp: a
                    },
                    h = f.keys = [];
                a = a.replace(/([().])/g, "\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,
                    function(a, e, b, c) {
                        a = "?" === c ? c: null;
                        c = "*" === c ? c: null;
                        h.push({
                            name: b,
                            optional: !!a
                        });
                        e = e || "";
                        return "" + (a ? "": e) + "(?:" + (a ? e: "") + (c && "(.+?)" || "([^/]+)") + (a || "") + ")" + (a || "")
                    }).replace(/([\/$\*])/g, "\\$1");
                f.regexp = RegExp("^" + a + "$", b ? "i": "");
                return f
            }
            var h = {};
            this.when = function(a, c) {
                h[a] = e.extend({
                        reloadOnSearch: !0
                    },
                    c, a && g(a, c));
                if (a) {
                    var b = "/" == a[a.length - 1] ? a.substr(0, a.length - 1) : a + "/";
                    h[b] = e.extend({
                            redirectTo: a
                        },
                        g(b, c))
                }
                return this
            };
            this.otherwise = function(a) {
                this.when(null, a);
                return this
            };
            this.$get = ["$rootScope", "$location", "$routeParams", "$q", "$injector", "$http", "$templateCache", "$sce",
                function(a, c, b, f, g, n, v, k) {
                    function l() {
                        var d = p(),
                            m = r.current;
                        if (d && m && d.$$route === m.$$route && e.equals(d.pathParams, m.pathParams) && !d.reloadOnSearch && !u) m.params = d.params,
                            e.copy(m.params, b),
                            a.$broadcast("$routeUpdate", m);
                        else if (d || m) u = !1,
                            a.$broadcast("$routeChangeStart", d, m),
                        (r.current = d) && d.redirectTo && (e.isString(d.redirectTo) ? c.path(t(d.redirectTo, d.params)).search(d.params).replace() : c.url(d.redirectTo(d.pathParams, c.path(), c.search())).replace()),
                            f.when(d).then(function() {
                                if (d) {
                                    var a = e.extend({},
                                        d.resolve),
                                        c,
                                        b;
                                    e.forEach(a,
                                        function(d, c) {
                                            a[c] = e.isString(d) ? g.get(d) : g.invoke(d)
                                        });
                                    e.isDefined(c = d.template) ? e.isFunction(c) && (c = c(d.params)) : e.isDefined(b = d.templateUrl) && (e.isFunction(b) && (b = b(d.params)), b = k.getTrustedResourceUrl(b), e.isDefined(b) && (d.loadedTemplateUrl = b, c = n.get(b, {
                                        cache: v
                                    }).then(function(a) {
                                        return a.data
                                    })));
                                    e.isDefined(c) && (a.$template = c);
                                    return f.all(a)
                                }
                            }).then(function(c) {
                                    d == r.current && (d && (d.locals = c, e.copy(d.params, b)), a.$broadcast("$routeChangeSuccess", d, m))
                                },
                                function(c) {
                                    d == r.current && a.$broadcast("$routeChangeError", d, m, c)
                                })
                    }
                    function p() {
                        var a, b;
                        e.forEach(h,
                            function(f, h) {
                                var q;
                                if (q = !b) {
                                    var g = c.path();
                                    q = f.keys;
                                    var l = {};
                                    if (f.regexp) if (g = f.regexp.exec(g)) {
                                        for (var k = 1,
                                                 p = g.length; k < p; ++k) {
                                            var n = q[k - 1],
                                                r = g[k];
                                            n && r && (l[n.name] = r)
                                        }
                                        q = l
                                    } else q = null;
                                    else q = null;
                                    q = a = q
                                }
                                q && (b = s(f, {
                                    params: e.extend({},
                                        c.search(), a),
                                    pathParams: a
                                }), b.$$route = f)
                            });
                        return b || h[null] && s(h[null], {
                            params: {},
                            pathParams: {}
                        })
                    }
                    function t(a, c) {
                        var b = [];
                        e.forEach((a || "").split(":"),
                            function(a, d) {
                                if (0 === d) b.push(a);
                                else {
                                    var e = a.match(/(\w+)(?:[?*])?(.*)/),
                                        f = e[1];
                                    b.push(c[f]);
                                    b.push(e[2] || "");
                                    delete c[f]
                                }
                            });
                        return b.join("")
                    }
                    var u = !1,
                        r = {
                            routes: h,
                            reload: function() {
                                u = !0;
                                a.$evalAsync(l)
                            }
                        };
                    a.$on("$locationChangeSuccess", l);
                    return r
                }]
        });
    n.provider("$routeParams",
        function() {
            this.$get = function() {
                return {}
            }
        });
    n.directive("ngView", x);
    n.directive("ngView", z);
    x.$inject = ["$route", "$anchorScroll", "$animate"];
    z.$inject = ["$compile", "$controller", "$route"]
})(window, window.angular);
//# sourceMappingURL=angular-route.min.js.map
/*
 AngularJS v1.2.28
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(y, w, z) {
    'use strict';
    function u(f, a, c) {
        r.directive(f, ["$parse", "$swipe",
            function(m, p) {
                var q = 75,
                    g = 0.3,
                    e = 30;
                return function(h, n, l) {
                    function k(d) {
                        if (!b) return ! 1;
                        var s = Math.abs(d.y - b.y);
                        d = (d.x - b.x) * a;
                        return v && s < q && 0 < d && d > e && s / d < g
                    }
                    var s = m(l[f]),
                        b,
                        v;
                    p.bind(n, {
                        start: function(d, s) {
                            b = d;
                            v = !0
                        },
                        cancel: function(b) {
                            v = !1
                        },
                        end: function(b, a) {
                            k(b) && h.$apply(function() {
                                n.triggerHandler(c);
                                s(h, {
                                    $event: a
                                })
                            })
                        }
                    })
                }
            }])
    }
    var r = w.module("ngTouch", []);
    r.factory("$swipe", [function() {
        function f(a) {
            var c = a.touches && a.touches.length ? a.touches: [a];
            a = a.changedTouches && a.changedTouches[0] || a.originalEvent && a.originalEvent.changedTouches && a.originalEvent.changedTouches[0] || c[0].originalEvent || c[0];
            return {
                x: a.clientX,
                y: a.clientY
            }
        }
        return {
            bind: function(a, c) {
                var m, p, q, g, e = !1;
                a.on("touchstart mousedown",
                    function(a) {
                        q = f(a);
                        e = !0;
                        p = m = 0;
                        g = q;
                        c.start && c.start(q, a)
                    });
                a.on("touchcancel",
                    function(a) {
                        e = !1;
                        c.cancel && c.cancel(a)
                    });
                a.on("touchmove mousemove",
                    function(a) {
                        if (e && q) {
                            var n = f(a);
                            m += Math.abs(n.x - g.x);
                            p += Math.abs(n.y - g.y);
                            g = n;
                            10 > m && 10 > p || (p > m ? (e = !1, c.cancel && c.cancel(a)) : (a.preventDefault(), c.move && c.move(n, a)))
                        }
                    });
                a.on("touchend mouseup",
                    function(a) {
                        e && (e = !1, c.end && c.end(f(a), a))
                    })
            }
        }
    }]);
    r.config(["$provide",
        function(f) {
            f.decorator("ngClickDirective", ["$delegate",
                function(a) {
                    a.shift();
                    return a
                }])
        }]);
    r.directive("ngClick", ["$parse", "$timeout", "$rootElement",
        function(f, a, c) {
            function m(a, b, c) {
                for (var d = 0; d < a.length; d += 2) if (Math.abs(a[d] - b) < e && Math.abs(a[d + 1] - c) < e) return a.splice(d, d + 2),
                    !0;
                return ! 1
            }
            function p(a) {
                if (! (Date.now() - n > g)) {
                    var b = a.touches && a.touches.length ? a.touches: [a],
                        c = b[0].clientX,
                        b = b[0].clientY;
                    1 > c && 1 > b || k && k[0] === c && k[1] === b || (k && (k = null), "label" === a.target.tagName.toLowerCase() && (k = [c, b]), m(l, c, b) || (a.stopPropagation(), a.preventDefault(), a.target && a.target.blur()))
                }
            }
            function q(c) {
                c = c.touches && c.touches.length ? c.touches: [c];
                var b = c[0].clientX,
                    e = c[0].clientY;
                l.push(b, e);
                a(function() {
                        for (var a = 0; a < l.length; a += 2) if (l[a] == b && l[a + 1] == e) {
                            l.splice(a, a + 2);
                            break
                        }
                    },
                    g, !1)
            }
            var g = 2500,
                e = 25,
                h = "ng-click-active",
                n, l, k;
            return function(a, b, e) {
                function d() {
                    k = !1;
                    b.removeClass(h)
                }
                var g = f(e.ngClick),
                    k = !1,
                    t,
                    r,
                    u,
                    x;
                b.on("touchstart",
                    function(a) {
                        k = !0;
                        t = a.target ? a.target: a.srcElement;
                        3 == t.nodeType && (t = t.parentNode);
                        b.addClass(h);
                        r = Date.now();
                        a = a.touches && a.touches.length ? a.touches: [a];
                        a = a[0].originalEvent || a[0];
                        u = a.clientX;
                        x = a.clientY
                    });
                b.on("touchmove",
                    function(a) {
                        d()
                    });
                b.on("touchcancel",
                    function(a) {
                        d()
                    });
                b.on("touchend",
                    function(a) {
                        var g = Date.now() - r,
                            f = a.changedTouches && a.changedTouches.length ? a.changedTouches: a.touches && a.touches.length ? a.touches: [a],
                            h = f[0].originalEvent || f[0],
                            f = h.clientX,
                            h = h.clientY,
                            s = Math.sqrt(Math.pow(f - u, 2) + Math.pow(h - x, 2));
                        k && (750 > g && 12 > s) && (l || (c[0].addEventListener("click", p, !0), c[0].addEventListener("touchstart", q, !0), l = []), n = Date.now(), m(l, f, h), t && t.blur(), w.isDefined(e.disabled) && !1 !== e.disabled || b.triggerHandler("click", [a]));
                        d()
                    });
                b.onclick = function(a) {};
                b.on("click",
                    function(b, c) {
                        a.$apply(function() {
                            g(a, {
                                $event: c || b
                            })
                        })
                    });
                b.on("mousedown",
                    function(a) {
                        b.addClass(h)
                    });
                b.on("mousemove mouseup",
                    function(a) {
                        b.removeClass(h)
                    })
            }
        }]);
    u("ngSwipeLeft", -1, "swipeleft");
    u("ngSwipeRight", 1, "swiperight")
})(window, window.angular);
//# sourceMappingURL=angular-touch.min.js.map
/*
 AngularJS v1.2.28
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(G, d, P) {
    'use strict';
    d.module("ngAnimate", ["ng"]).directive("ngAnimateChildren",
        function() {
            return function(H, z, e) {
                e = e.ngAnimateChildren;
                d.isString(e) && 0 === e.length ? z.data("$$ngAnimateChildren", !0) : H.$watch(e,
                    function(d) {
                        z.data("$$ngAnimateChildren", !!d)
                    })
            }
        }).factory("$$animateReflow", ["$$rAF", "$document",
        function(d, z) {
            return function(e) {
                return d(function() {
                    e()
                })
            }
        }]).config(["$provide", "$animateProvider",
        function(H, z) {
            function e(d) {
                for (var e = 0; e < d.length; e++) {
                    var g = d[e];
                    if (g.nodeType == ba) return g
                }
            }
            function E(g) {
                return d.element(e(g))
            }
            var q = d.noop,
                w = d.forEach,
                Q = z.$$selectors,
                ba = 1,
                g = "$$ngAnimateState",
                ga = "$$ngAnimateChildren",
                I = "ng-animate",
                h = {
                    running: !0
                };
            H.decorator("$animate", ["$delegate", "$injector", "$sniffer", "$rootElement", "$$asyncCallback", "$rootScope", "$document",
                function(y, G, aa, J, K, k, P) {
                    function R(a) {
                        var b = a.data(g) || {};
                        b.running = !0;
                        a.data(g, b)
                    }
                    function ha(a) {
                        if (a) {
                            var b = [],
                                c = {};
                            a = a.substr(1).split("."); (aa.transitions || aa.animations) && b.push(G.get(Q[""]));
                            for (var f = 0; f < a.length; f++) {
                                var d = a[f],
                                    e = Q[d];
                                e && !c[d] && (b.push(G.get(e)), c[d] = !0)
                            }
                            return b
                        }
                    }
                    function M(a, b, c) {
                        function f(a, b) {
                            var c = a[b],
                                d = a["before" + b.charAt(0).toUpperCase() + b.substr(1)];
                            if (c || d) return "leave" == b && (d = c, c = null),
                                S.push({
                                    event: b,
                                    fn: c
                                }),
                                n.push({
                                    event: b,
                                    fn: d
                                }),
                                !0
                        }
                        function e(b, d, f) {
                            var g = [];
                            w(b,
                                function(a) {
                                    a.fn && g.push(a)
                                });
                            var r = 0;
                            w(g,
                                function(b, e) {
                                    var C = function() {
                                        a: {
                                            if (d) { (d[e] || q)();
                                                if (++r < g.length) break a;
                                                d = null
                                            }
                                            f()
                                        }
                                    };
                                    switch (b.event) {
                                        case "setClass":
                                            d.push(b.fn(a, l, A, C));
                                            break;
                                        case "addClass":
                                            d.push(b.fn(a, l || c, C));
                                            break;
                                        case "removeClass":
                                            d.push(b.fn(a, A || c, C));
                                            break;
                                        default:
                                            d.push(b.fn(a, C))
                                    }
                                });
                            d && 0 === d.length && f()
                        }
                        var g = a[0];
                        if (g) {
                            var p = "setClass" == b,
                                h = p || "addClass" == b || "removeClass" == b,
                                l, A;
                            d.isArray(c) && (l = c[0], A = c[1], c = l + " " + A);
                            var k = a.attr("class") + " " + c;
                            if (U(k)) {
                                var t = q,
                                    v = [],
                                    n = [],
                                    x = q,
                                    u = [],
                                    S = [],
                                    k = (" " + k).replace(/\s+/g, ".");
                                w(ha(k),
                                    function(a) { ! f(a, b) && p && (f(a, "addClass"), f(a, "removeClass"))
                                    });
                                return {
                                    node: g,
                                    event: b,
                                    className: c,
                                    isClassBased: h,
                                    isSetClassOperation: p,
                                    before: function(a) {
                                        t = a;
                                        e(n, v,
                                            function() {
                                                t = q;
                                                a()
                                            })
                                    },
                                    after: function(a) {
                                        x = a;
                                        e(S, u,
                                            function() {
                                                x = q;
                                                a()
                                            })
                                    },
                                    cancel: function() {
                                        v && (w(v,
                                            function(a) { (a || q)(!0)
                                            }), t(!0));
                                        u && (w(u,
                                            function(a) { (a || q)(!0)
                                            }), x(!0))
                                    }
                                }
                            }
                        }
                    }
                    function F(a, b, c, f, e, m, p) {
                        function k(d) {
                            var e = "$animate:" + d;
                            x && (x[e] && 0 < x[e].length) && K(function() {
                                c.triggerHandler(e, {
                                    event: a,
                                    className: b
                                })
                            })
                        }
                        function l() {
                            k("before")
                        }
                        function A() {
                            k("after")
                        }
                        function q() {
                            k("close");
                            p && K(function() {
                                p()
                            })
                        }
                        function t() {
                            t.hasBeenRun || (t.hasBeenRun = !0, m())
                        }
                        function v() {
                            if (!v.hasBeenRun) {
                                v.hasBeenRun = !0;
                                var e = c.data(g);
                                e && (n && n.isClassBased ? B(c, b) : (K(function() {
                                    var e = c.data(g) || {};
                                    s == e.index && B(c, b, a)
                                }), c.data(g, e)));
                                q()
                            }
                        }
                        var n = M(c, a, b);
                        if (n) {
                            b = n.className;
                            var x = d.element._data(n.node),
                                x = x && x.events;
                            f || (f = e ? e.parent() : c.parent());
                            var u = c.data(g) || {};
                            e = u.active || {};
                            var h = u.totalActive || 0,
                                C = u.last,
                                D;
                            n.isClassBased && (D = u.running || u.disabled || C && !C.isClassBased);
                            if (D || N(c, f)) t(),
                                l(),
                                A(),
                                v();
                            else {
                                f = !1;
                                if (0 < h) {
                                    D = [];
                                    if (n.isClassBased)"setClass" == C.event ? (D.push(C), B(c, b)) : e[b] && (y = e[b], y.event == a ? f = !0 : (D.push(y), B(c, b)));
                                    else if ("leave" == a && e["ng-leave"]) f = !0;
                                    else {
                                        for (var y in e) D.push(e[y]),
                                            B(c, y);
                                        e = {};
                                        h = 0
                                    }
                                    0 < D.length && w(D,
                                        function(a) {
                                            a.cancel()
                                        })
                                } ! n.isClassBased || (n.isSetClassOperation || f) || (f = "addClass" == a == c.hasClass(b));
                                if (f) t(),
                                    l(),
                                    A(),
                                    q();
                                else {
                                    if ("leave" == a) c.one("$destroy",
                                        function(a) {
                                            a = d.element(this);
                                            var b = a.data(g);
                                            b && (b = b.active["ng-leave"]) && (b.cancel(), B(a, "ng-leave"))
                                        });
                                    c.addClass(I);
                                    var s = O++;
                                    h++;
                                    e[b] = n;
                                    c.data(g, {
                                        last: n,
                                        active: e,
                                        index: s,
                                        totalActive: h
                                    });
                                    l();
                                    n.before(function(e) {
                                        var d = c.data(g);
                                        e = e || !d || !d.active[b] || n.isClassBased && d.active[b].event != a;
                                        t(); ! 0 === e ? v() : (A(), n.after(v))
                                    })
                                }
                            }
                        } else t(),
                            l(),
                            A(),
                            v()
                    }
                    function V(a) {
                        if (a = e(a)) a = d.isFunction(a.getElementsByClassName) ? a.getElementsByClassName(I) : a.querySelectorAll("." + I),
                            w(a,
                                function(a) {
                                    a = d.element(a); (a = a.data(g)) && a.active && w(a.active,
                                        function(a) {
                                            a.cancel()
                                        })
                                })
                    }
                    function B(a, b) {
                        if (e(a) == e(J)) h.disabled || (h.running = !1, h.structural = !1);
                        else if (b) {
                            var c = a.data(g) || {},
                                d = !0 === b; ! d && (c.active && c.active[b]) && (c.totalActive--, delete c.active[b]);
                            if (d || !c.totalActive) a.removeClass(I),
                                a.removeData(g)
                        }
                    }
                    function N(a, b) {
                        if (h.disabled) return ! 0;
                        if (e(a) == e(J)) return h.running;
                        var c, f, k;
                        do {
                            if (0 === b.length) break;
                            var m = e(b) == e(J), p = m ? h: b.data(g) || {};
                            if (p.disabled) return ! 0;
                            m && (k = !0); ! 1 !== c && (m = b.data(ga), d.isDefined(m) && (c = m));
                            f = f || p.running || p.last && !p.last.isClassBased
                        } while ( b = b . parent ());
                        return ! k || !c && f
                    }
                    var O = 0;
                    J.data(g, h);
                    k.$$postDigest(function() {
                        k.$$postDigest(function() {
                            h.running = !1
                        })
                    });
                    var W = z.classNameFilter(),
                        U = W ?
                            function(a) {
                                return W.test(a)
                            }: function() {
                                return ! 0
                            };
                    return {
                        enter: function(a, b, c, e) {
                            a = d.element(a);
                            b = b && d.element(b);
                            c = c && d.element(c);
                            R(a);
                            y.enter(a, b, c);
                            k.$$postDigest(function() {
                                a = E(a);
                                F("enter", "ng-enter", a, b, c, q, e)
                            })
                        },
                        leave: function(a, b) {
                            a = d.element(a);
                            V(a);
                            R(a);
                            k.$$postDigest(function() {
                                F("leave", "ng-leave", E(a), null, null,
                                    function() {
                                        y.leave(a)
                                    },
                                    b)
                            })
                        },
                        move: function(a, b, c, e) {
                            a = d.element(a);
                            b = b && d.element(b);
                            c = c && d.element(c);
                            V(a);
                            R(a);
                            y.move(a, b, c);
                            k.$$postDigest(function() {
                                a = E(a);
                                F("move", "ng-move", a, b, c, q, e)
                            })
                        },
                        addClass: function(a, b, c) {
                            a = d.element(a);
                            a = E(a);
                            F("addClass", b, a, null, null,
                                function() {
                                    y.addClass(a, b)
                                },
                                c)
                        },
                        removeClass: function(a, b, c) {
                            a = d.element(a);
                            a = E(a);
                            F("removeClass", b, a, null, null,
                                function() {
                                    y.removeClass(a, b)
                                },
                                c)
                        },
                        setClass: function(a, b, c, e) {
                            a = d.element(a);
                            a = E(a);
                            F("setClass", [b, c], a, null, null,
                                function() {
                                    y.setClass(a, b, c)
                                },
                                e)
                        },
                        enabled: function(a, b) {
                            switch (arguments.length) {
                                case 2:
                                    if (a) B(b);
                                    else {
                                        var c = b.data(g) || {};
                                        c.disabled = !0;
                                        b.data(g, c)
                                    }
                                    break;
                                case 1:
                                    h.disabled = !a;
                                    break;
                                default:
                                    a = !h.disabled
                            }
                            return !! a
                        }
                    }
                }]);
            z.register("", ["$window", "$sniffer", "$timeout", "$$animateReflow",
                function(g, h, z, J) {
                    function K() {
                        L || (L = J(function() {
                            T = [];
                            L = null;
                            s = {}
                        }))
                    }
                    function k(a, X) {
                        L && L();
                        T.push(X);
                        L = J(function() {
                            w(T,
                                function(a) {
                                    a()
                                });
                            T = [];
                            L = null;
                            s = {}
                        })
                    }
                    function E(a, X) {
                        var b = e(a);
                        a = d.element(b);
                        Y.push(a);
                        b = Date.now() + X;
                        b <= fa || (z.cancel(ea), fa = b, ea = z(function() {
                                R(Y);
                                Y = []
                            },
                            X, !1))
                    }
                    function R(a) {
                        w(a,
                            function(a) { (a = a.data(u)) && (a.closeAnimationFn || q)()
                            })
                    }
                    function I(a, b) {
                        var c = b ? s[b] : null;
                        if (!c) {
                            var e = 0,
                                d = 0,
                                f = 0,
                                k = 0,
                                h, Z, $, m;
                            w(a,
                                function(a) {
                                    if (a.nodeType == ba) {
                                        a = g.getComputedStyle(a) || {};
                                        $ = a[p + Q];
                                        e = Math.max(M($), e);
                                        m = a[p + t];
                                        h = a[p + v];
                                        d = Math.max(M(h), d);
                                        Z = a[l + v];
                                        k = Math.max(M(Z), k);
                                        var b = M(a[l + Q]);
                                        0 < b && (b *= parseInt(a[l + n], 10) || 1);
                                        f = Math.max(b, f)
                                    }
                                });
                            c = {
                                total: 0,
                                transitionPropertyStyle: m,
                                transitionDurationStyle: $,
                                transitionDelayStyle: h,
                                transitionDelay: d,
                                transitionDuration: e,
                                animationDelayStyle: Z,
                                animationDelay: k,
                                animationDuration: f
                            };
                            b && (s[b] = c)
                        }
                        return c
                    }
                    function M(a) {
                        var b = 0;
                        a = d.isString(a) ? a.split(/\s*,\s*/) : [];
                        w(a,
                            function(a) {
                                b = Math.max(parseFloat(a) || 0, b)
                            });
                        return b
                    }
                    function F(a) {
                        var b = a.parent(),
                            c = b.data(x);
                        c || (b.data(x, ++da), c = da);
                        return c + "-" + e(a).getAttribute("class")
                    }
                    function V(a, b, c, d) {
                        var f = F(b),
                            g = f + " " + c,
                            k = s[g] ? ++s[g].total: 0,
                            h = {};
                        if (0 < k) {
                            var m = c + "-stagger",
                                h = f + " " + m; (f = !s[h]) && b.addClass(m);
                            h = I(b, h);
                            f && b.removeClass(m)
                        }
                        d = d ||
                            function(a) {
                                return a()
                            };
                        b.addClass(c);
                        var m = b.data(u) || {},
                            n = d(function() {
                                return I(b, g)
                            });
                        d = n.transitionDuration;
                        f = n.animationDuration;
                        if (0 === d && 0 === f) return b.removeClass(c),
                            !1;
                        b.data(u, {
                            running: m.running || 0,
                            itemIndex: k,
                            stagger: h,
                            timings: n,
                            closeAnimationFn: q
                        });
                        a = 0 < m.running || "setClass" == a;
                        0 < d && B(b, c, a);
                        0 < f && (0 < h.animationDelay && 0 === h.animationDuration) && (e(b).style[l] = "none 0s");
                        return ! 0
                    }
                    function B(a, b, c) {
                        "ng-enter" != b && ("ng-move" != b && "ng-leave" != b) && c ? a.addClass(S) : e(a).style[p + t] = "none"
                    }
                    function N(a, b) {
                        var c = p + t,
                            d = e(a);
                        d.style[c] && 0 < d.style[c].length && (d.style[c] = "");
                        a.removeClass(S)
                    }
                    function O(a) {
                        var b = l;
                        a = e(a);
                        a.style[b] && 0 < a.style[b].length && (a.style[b] = "")
                    }
                    function W(a, b, c, d) {
                        function g(a) {
                            b.off(z, h);
                            b.removeClass(n);
                            f(b, c);
                            a = e(b);
                            for (var d in s) a.style.removeProperty(s[d])
                        }
                        function h(a) {
                            a.stopPropagation();
                            var b = a.originalEvent || a;
                            a = b.$manualTimeStamp || b.timeStamp || Date.now();
                            b = parseFloat(b.elapsedTime.toFixed(C));
                            Math.max(a - y, 0) >= x && b >= t && d()
                        }
                        var k = e(b);
                        a = b.data(u);
                        if ( - 1 != k.getAttribute("class").indexOf(c) && a) {
                            var n = "";
                            w(c.split(" "),
                                function(a, b) {
                                    n += (0 < b ? " ": "") + a + "-active"
                                });
                            var p = a.stagger,
                                l = a.timings,
                                q = a.itemIndex,
                                t = Math.max(l.transitionDuration, l.animationDuration),
                                v = Math.max(l.transitionDelay, l.animationDelay),
                                x = v * ca,
                                y = Date.now(),
                                z = A + " " + H,
                                r = "",
                                s = [];
                            if (0 < l.transitionDuration) {
                                var B = l.transitionPropertyStyle; - 1 == B.indexOf("all") && (r += m + "transition-property: " + B + ";", r += m + "transition-duration: " + l.transitionDurationStyle + ";", s.push(m + "transition-property"), s.push(m + "transition-duration"))
                            }
                            0 < q && (0 < p.transitionDelay && 0 === p.transitionDuration && (r += m + "transition-delay: " + U(l.transitionDelayStyle, p.transitionDelay, q) + "; ", s.push(m + "transition-delay")), 0 < p.animationDelay && 0 === p.animationDuration && (r += m + "animation-delay: " + U(l.animationDelayStyle, p.animationDelay, q) + "; ", s.push(m + "animation-delay")));
                            0 < s.length && (l = k.getAttribute("style") || "", k.setAttribute("style", l + "; " + r));
                            b.on(z, h);
                            b.addClass(n);
                            a.closeAnimationFn = function() {
                                g();
                                d()
                            };
                            k = (q * (Math.max(p.animationDelay, p.transitionDelay) || 0) + (v + t) * D) * ca;
                            a.running++;
                            E(b, k);
                            return g
                        }
                        d()
                    }
                    function U(a, b, c) {
                        var d = "";
                        w(a.split(","),
                            function(a, e) {
                                d += (0 < e ? ",": "") + (c * b + parseInt(a, 10)) + "s"
                            });
                        return d
                    }
                    function a(a, b, c, d) {
                        if (V(a, b, c, d)) return function(a) {
                            a && f(b, c)
                        }
                    }
                    function b(a, b, c, d) {
                        if (b.data(u)) return W(a, b, c, d);
                        f(b, c);
                        d()
                    }
                    function c(c, d, e, f) {
                        var g = a(c, d, e);
                        if (g) {
                            var h = g;
                            k(d,
                                function() {
                                    N(d, e);
                                    O(d);
                                    h = b(c, d, e, f)
                                });
                            return function(a) { (h || q)(a)
                            }
                        }
                        K();
                        f()
                    }
                    function f(a, b) {
                        a.removeClass(b);
                        var c = a.data(u);
                        c && (c.running && c.running--, c.running && 0 !== c.running || a.removeData(u))
                    }
                    function r(a, b) {
                        var c = "";
                        a = d.isArray(a) ? a: a.split(/\s+/);
                        w(a,
                            function(a, d) {
                                a && 0 < a.length && (c += (0 < d ? " ": "") + a + b)
                            });
                        return c
                    }
                    var m = "",
                        p, H, l, A;
                    G.ontransitionend === P && G.onwebkittransitionend !== P ? (m = "-webkit-", p = "WebkitTransition", H = "webkitTransitionEnd transitionend") : (p = "transition", H = "transitionend");
                    G.onanimationend === P && G.onwebkitanimationend !== P ? (m = "-webkit-", l = "WebkitAnimation", A = "webkitAnimationEnd animationend") : (l = "animation", A = "animationend");
                    var Q = "Duration",
                        t = "Property",
                        v = "Delay",
                        n = "IterationCount",
                        x = "$$ngAnimateKey",
                        u = "$$ngAnimateCSS3Data",
                        S = "ng-animate-block-transitions",
                        C = 3,
                        D = 1.5,
                        ca = 1E3,
                        s = {},
                        da = 0,
                        T = [],
                        L,
                        ea = null,
                        fa = 0,
                        Y = [];
                    return {
                        enter: function(a, b) {
                            return c("enter", a, "ng-enter", b)
                        },
                        leave: function(a, b) {
                            return c("leave", a, "ng-leave", b)
                        },
                        move: function(a, b) {
                            return c("move", a, "ng-move", b)
                        },
                        beforeSetClass: function(b, c, d, e) {
                            var f = r(d, "-remove") + " " + r(c, "-add"),
                                g = a("setClass", b, f,
                                    function(a) {
                                        var e = b.attr("class");
                                        b.removeClass(d);
                                        b.addClass(c);
                                        a = a();
                                        b.attr("class", e);
                                        return a
                                    });
                            if (g) return k(b,
                                function() {
                                    N(b, f);
                                    O(b);
                                    e()
                                }),
                                g;
                            K();
                            e()
                        },
                        beforeAddClass: function(b, c, d) {
                            var e = a("addClass", b, r(c, "-add"),
                                function(a) {
                                    b.addClass(c);
                                    a = a();
                                    b.removeClass(c);
                                    return a
                                });
                            if (e) return k(b,
                                function() {
                                    N(b, c);
                                    O(b);
                                    d()
                                }),
                                e;
                            K();
                            d()
                        },
                        setClass: function(a, c, d, e) {
                            d = r(d, "-remove");
                            c = r(c, "-add");
                            return b("setClass", a, d + " " + c, e)
                        },
                        addClass: function(a, c, d) {
                            return b("addClass", a, r(c, "-add"), d)
                        },
                        beforeRemoveClass: function(b, c, d) {
                            var e = a("removeClass", b, r(c, "-remove"),
                                function(a) {
                                    var d = b.attr("class");
                                    b.removeClass(c);
                                    a = a();
                                    b.attr("class", d);
                                    return a
                                });
                            if (e) return k(b,
                                function() {
                                    N(b, c);
                                    O(b);
                                    d()
                                }),
                                e;
                            d()
                        },
                        removeClass: function(a, c, d) {
                            return b("removeClass", a, r(c, "-remove"), d)
                        }
                    }
                }])
        }])
})(window, window.angular);
//# sourceMappingURL=angular-animate.min.js.map
/*
 AngularJS v1.2.28
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(q, g, r) {
    'use strict';
    function F(a) {
        var d = [];
        t(d, g.noop).chars(a);
        return d.join("")
    }
    function l(a) {
        var d = {};
        a = a.split(",");
        var c;
        for (c = 0; c < a.length; c++) d[a[c]] = !0;
        return d
    }
    function G(a, d) {
        function c(a, b, c, h) {
            b = g.lowercase(b);
            if (u[b]) for (; f.last() && v[f.last()];) e("", f.last());
            w[b] && f.last() == b && e("", b); (h = x[b] || !!h) || f.push(b);
            var n = {};
            c.replace(H,
                function(a, b, d, c, e) {
                    n[b] = s(d || c || e || "")
                });
            d.start && d.start(b, n, h)
        }
        function e(a, b) {
            var c = 0,
                e;
            if (b = g.lowercase(b)) for (c = f.length - 1; 0 <= c && f[c] != b; c--);
            if (0 <= c) {
                for (e = f.length - 1; e >= c; e--) d.end && d.end(f[e]);
                f.length = c
            }
        }
        "string" !== typeof a && (a = null === a || "undefined" === typeof a ? "": "" + a);
        var b, k, f = [],
            n = a,
            h;
        for (f.last = function() {
            return f[f.length - 1]
        }; a;) {
            h = "";
            k = !0;
            if (f.last() && y[f.last()]) a = a.replace(RegExp("(.*)<\\s*\\/\\s*" + f.last() + "[^>]*>", "i"),
                function(a, b) {
                    b = b.replace(I, "$1").replace(J, "$1");
                    d.chars && d.chars(s(b));
                    return ""
                }),
                e("", f.last());
            else {
                if (0 === a.indexOf("\x3c!--")) b = a.indexOf("--", 4),
                0 <= b && a.lastIndexOf("--\x3e", b) === b && (d.comment && d.comment(a.substring(4, b)), a = a.substring(b + 3), k = !1);
                else if (z.test(a)) {
                    if (b = a.match(z)) a = a.replace(b[0], ""),
                        k = !1
                } else if (K.test(a)) {
                    if (b = a.match(A)) a = a.substring(b[0].length),
                        b[0].replace(A, e),
                        k = !1
                } else L.test(a) && ((b = a.match(B)) ? (b[4] && (a = a.substring(b[0].length), b[0].replace(B, c)), k = !1) : (h += "<", a = a.substring(1)));
                k && (b = a.indexOf("<"), h += 0 > b ? a: a.substring(0, b), a = 0 > b ? "": a.substring(b), d.chars && d.chars(s(h)))
            }
            if (a == n) throw M("badparse", a);
            n = a
        }
        e()
    }
    function s(a) {
        if (!a) return "";
        var d = N.exec(a);
        a = d[1];
        var c = d[3];
        if (d = d[2]) p.innerHTML = d.replace(/</g, "&lt;"),
            d = "textContent" in p ? p.textContent: p.innerText;
        return a + d + c
    }
    function C(a) {
        return a.replace(/&/g, "&amp;").replace(O,
            function(a) {
                var c = a.charCodeAt(0);
                a = a.charCodeAt(1);
                return "&#" + (1024 * (c - 55296) + (a - 56320) + 65536) + ";"
            }).replace(P,
            function(a) {
                return "&#" + a.charCodeAt(0) + ";"
            }).replace(/</g, "&lt;").replace(/>/g, "&gt;")
    }
    function t(a, d) {
        var c = !1,
            e = g.bind(a, a.push);
        return {
            start: function(a, k, f) {
                a = g.lowercase(a); ! c && y[a] && (c = a);
                c || !0 !== D[a] || (e("<"), e(a), g.forEach(k,
                    function(c, f) {
                        var m = g.lowercase(f),
                            k = "img" === a && "src" === m || "background" === m; ! 0 !== Q[m] || !0 === E[m] && !d(c, k) || (e(" "), e(f), e('="'), e(C(c)), e('"'))
                    }), e(f ? "/>": ">"))
            },
            end: function(a) {
                a = g.lowercase(a);
                c || !0 !== D[a] || (e("</"), e(a), e(">"));
                a == c && (c = !1)
            },
            chars: function(a) {
                c || e(C(a))
            }
        }
    }
    var M = g.$$minErr("$sanitize"),
        B = /^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,
        A = /^<\/\s*([\w:-]+)[^>]*>/,
        H = /([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,
        L = /^</,
        K = /^<\//,
        I = /\x3c!--(.*?)--\x3e/g,
        z = /<!DOCTYPE([^>]*?)>/i,
        J = /<!\[CDATA\[(.*?)]]\x3e/g,
        O = /[\uD800-\uDBFF][\uDC00-\uDFFF]/g,
        P = /([^\#-~| |!])/g,
        x = l("area,br,col,hr,img,wbr");
    q = l("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr");
    r = l("rp,rt");
    var w = g.extend({},
        r, q),
        u = g.extend({},
            q, l("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),
        v = g.extend({},
            r, l("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),
        y = l("script,style"),
        D = g.extend({},
            x, u, v, w),
        E = l("background,cite,href,longdesc,src,usemap"),
        Q = g.extend({},
            E, l("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),
        p = document.createElement("pre"),
        N = /^(\s*)([\s\S]*?)(\s*)$/;
    g.module("ngSanitize", []).provider("$sanitize",
        function() {
            this.$get = ["$$sanitizeUri",
                function(a) {
                    return function(d) {
                        var c = [];
                        G(d, t(c,
                            function(c, b) {
                                return ! /^unsafe/.test(a(c, b))
                            }));
                        return c.join("")
                    }
                }]
        });
    g.module("ngSanitize").filter("linky", ["$sanitize",
        function(a) {
            var d = /((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"]/,
                c = /^mailto:/;
            return function(e, b) {
                function k(a) {
                    a && m.push(F(a))
                }
                function f(a, c) {
                    m.push("<a ");
                    g.isDefined(b) && (m.push('target="'), m.push(b), m.push('" '));
                    m.push('href="', a.replace('"', "&quot;"), '">');
                    k(c);
                    m.push("</a>")
                }
                if (!e) return e;
                for (var n, h = e,
                         m = [], l, p; n = h.match(d);) l = n[0],
                n[2] == n[3] && (l = "mailto:" + l),
                    p = n.index,
                    k(h.substr(0, p)),
                    f(l, n[0].replace(c, "")),
                    h = h.substring(p + n[0].length);
                k(h);
                return a(m.join(""))
            }
        }])
})(window, window.angular);
//# sourceMappingURL=angular-sanitize.min.js.map
// jQuery Mask Plugin v1.14.0
// github.com/igorescobar/jQuery-Mask-Plugin
(function(b) {
    "function" === typeof define && define.amd ? define(["jquery"], b) : "object" === typeof exports ? module.exports = b(require("jquery")) : b(jQuery || Zepto)
})(function(b) {
    var y = function(a, e, d) {
        var c = {
            invalid: [],
            getCaret: function() {
                try {
                    var r, b = 0,
                        e = a.get(0),
                        d = document.selection,
                        f = e.selectionStart;
                    if (d && -1 === navigator.appVersion.indexOf("MSIE 10")) r = d.createRange(),
                        r.moveStart("character", -c.val().length),
                        b = r.text.length;
                    else if (f || "0" === f) b = f;
                    return b
                } catch(g) {}
            },
            setCaret: function(r) {
                try {
                    if (a.is(":focus")) {
                        var c, b = a.get(0);
                        b.setSelectionRange ? (b.focus(), b.setSelectionRange(r, r)) : (c = b.createTextRange(), c.collapse(!0), c.moveEnd("character", r), c.moveStart("character", r), c.select())
                    }
                } catch(e) {}
            },
            events: function() {
                a.on("keydown.mask",
                    function(c) {
                        a.data("mask-keycode", c.keyCode || c.which)
                    }).on(b.jMaskGlobals.useInput ? "input.mask": "keyup.mask", c.behaviour).on("paste.mask drop.mask",
                    function() {
                        setTimeout(function() {
                                a.keydown().keyup()
                            },
                            100)
                    }).on("change.mask",
                    function() {
                        a.data("changed", !0)
                    }).on("blur.mask",
                    function() {
                        n === c.val() || a.data("changed") || a.trigger("change");
                        a.data("changed", !1)
                    }).on("blur.mask",
                    function() {
                        n = c.val()
                    }).on("focus.mask",
                    function(a) { ! 0 === d.selectOnFocus && b(a.target).select()
                    }).on("focusout.mask",
                    function() {
                        d.clearIfNotMatch && !p.test(c.val()) && c.val("")
                    })
            },
            getRegexMask: function() {
                for (var a = [], c, b, d, f, l = 0; l < e.length; l++)(c = g.translation[e.charAt(l)]) ? (b = c.pattern.toString().replace(/.{1}$|^.{1}/g, ""), d = c.optional, (c = c.recursive) ? (a.push(e.charAt(l)), f = {
                    digit: e.charAt(l),
                    pattern: b
                }) : a.push(d || c ? b + "?": b)) : a.push(e.charAt(l).replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&"));
                a = a.join("");
                f && (a = a.replace(new RegExp("(" + f.digit + "(.*" + f.digit + ")?)"), "($1)?").replace(new RegExp(f.digit, "g"), f.pattern));
                return new RegExp(a)
            },
            destroyEvents: function() {
                a.off("input keydown keyup paste drop blur focusout ".split(" ").join(".mask "))
            },
            val: function(c) {
                var b = a.is("input") ? "val": "text";
                if (0 < arguments.length) {
                    if (a[b]() !== c) a[b](c);
                    b = a
                } else b = a[b]();
                return b
            },
            getMCharsBeforeCount: function(a, c) {
                for (var b = 0,
                         d = 0,
                         f = e.length; d < f && d < a; d++) g.translation[e.charAt(d)] || (a = c ? a + 1 : a, b++);
                return b
            },
            caretPos: function(a, b, d, h) {
                return g.translation[e.charAt(Math.min(a - 1, e.length - 1))] ? Math.min(a + d - b - h, d) : c.caretPos(a + 1, b, d, h)
            },
            behaviour: function(d) {
                d = d || window.event;
                c.invalid = [];
                var e = a.data("mask-keycode");
                if ( - 1 === b.inArray(e, g.byPassKeys)) {
                    var m = c.getCaret(),
                        h = c.val().length,
                        f = c.getMasked(),
                        l = f.length,
                        k = c.getMCharsBeforeCount(l - 1) - c.getMCharsBeforeCount(h - 1),
                        n = m < h;
                    c.val(f);
                    n && (8 !== e && 46 !== e && (m = c.caretPos(m, h, l, k)), c.setCaret(m));
                    return c.callbacks(d)
                }
            },
            getMasked: function(a, b) {
                var m = [],
                    h = void 0 === b ? c.val() : b + "",
                    f = 0,
                    l = e.length,
                    k = 0,
                    n = h.length,
                    q = 1,
                    p = "push",
                    u = -1,
                    t,
                    w;
                d.reverse ? (p = "unshift", q = -1, t = 0, f = l - 1, k = n - 1, w = function() {
                    return - 1 < f && -1 < k
                }) : (t = l - 1, w = function() {
                    return f < l && k < n
                });
                for (; w();) {
                    var x = e.charAt(f),
                        v = h.charAt(k),
                        s = g.translation[x];
                    if (s) v.match(s.pattern) ? (m[p](v), s.recursive && ( - 1 === u ? u = f: f === t && (f = u - q), t === u && (f -= q)), f += q) : s.optional ? (f += q, k -= q) : s.fallback ? (m[p](s.fallback), f += q, k -= q) : c.invalid.push({
                        p: k,
                        v: v,
                        e: s.pattern
                    }),
                        k += q;
                    else {
                        if (!a) m[p](x);
                        v === x && (k += q);
                        f += q
                    }
                }
                h = e.charAt(t);
                l !== n + 1 || g.translation[h] || m.push(h);
                return m.join("")
            },
            callbacks: function(b) {
                var g = c.val(),
                    m = g !== n,
                    h = [g, b, a, d],
                    f = function(a, b, c) {
                        "function" === typeof d[a] && b && d[a].apply(this, c)
                    };
                f("onChange", !0 === m, h);
                f("onKeyPress", !0 === m, h);
                f("onComplete", g.length === e.length, h);
                f("onInvalid", 0 < c.invalid.length, [g, b, a, c.invalid, d])
            }
        };
        a = b(a);
        var g = this,
            n = c.val(),
            p;
        e = "function" === typeof e ? e(c.val(), void 0, a, d) : e;
        g.mask = e;
        g.options = d;
        g.remove = function() {
            var b = c.getCaret();
            c.destroyEvents();
            c.val(g.getCleanVal());
            c.setCaret(b - c.getMCharsBeforeCount(b));
            return a
        };
        g.getCleanVal = function() {
            return c.getMasked(!0)
        };
        g.getMaskedVal = function(a) {
            return c.getMasked(!1, a)
        };
        g.init = function(e) {
            e = e || !1;
            d = d || {};
            g.clearIfNotMatch = b.jMaskGlobals.clearIfNotMatch;
            g.byPassKeys = b.jMaskGlobals.byPassKeys;
            g.translation = b.extend({},
                b.jMaskGlobals.translation, d.translation);
            g = b.extend(!0, {},
                g, d);
            p = c.getRegexMask(); ! 1 === e ? (d.placeholder && a.attr("placeholder", d.placeholder), a.data("mask") && a.attr("autocomplete", "off"), c.destroyEvents(), c.events(), e = c.getCaret(), c.val(c.getMasked()), c.setCaret(e + c.getMCharsBeforeCount(e, !0))) : (c.events(), c.val(c.getMasked()))
        };
        g.init(!a.is("input"))
    };
    b.maskWatchers = {};
    var A = function() {
            var a = b(this),
                e = {},
                d = a.attr("data-mask");
            a.attr("data-mask-reverse") && (e.reverse = !0);
            a.attr("data-mask-clearifnotmatch") && (e.clearIfNotMatch = !0);
            "true" === a.attr("data-mask-selectonfocus") && (e.selectOnFocus = !0);
            if (z(a, d, e)) return a.data("mask", new y(this, d, e))
        },
        z = function(a, e, d) {
            d = d || {};
            var c = b(a).data("mask"),
                g = JSON.stringify;
            a = b(a).val() || b(a).text();
            try {
                return "function" === typeof e && (e = e(a)),
                "object" !== typeof c || g(c.options) !== g(d) || c.mask !== e
            } catch(n) {}
        };
    b.fn.mask = function(a, e) {
        e = e || {};
        var d = this.selector,
            c = b.jMaskGlobals,
            g = c.watchInterval,
            c = e.watchInputs || c.watchInputs,
            n = function() {
                if (z(this, a, e)) return b(this).data("mask", new y(this, a, e))
            };
        b(this).each(n);
        d && "" !== d && c && (clearInterval(b.maskWatchers[d]), b.maskWatchers[d] = setInterval(function() {
                b(document).find(d).each(n)
            },
            g));
        return this
    };
    b.fn.masked = function(a) {
        return this.data("mask").getMaskedVal(a)
    };
    b.fn.unmask = function() {
        clearInterval(b.maskWatchers[this.selector]);
        delete b.maskWatchers[this.selector];
        return this.each(function() {
            var a = b(this).data("mask");
            a && a.remove().removeData("mask")
        })
    };
    b.fn.cleanVal = function() {
        return this.data("mask").getCleanVal()
    };
    b.applyDataMask = function(a) {
        a = a || b.jMaskGlobals.maskElements; (a instanceof b ? a: b(a)).filter(b.jMaskGlobals.dataMaskAttr).each(A)
    };
    var p = {
        maskElements: "input,td,span,div",
        dataMaskAttr: "*[data-mask]",
        dataMask: !0,
        watchInterval: 300,
        watchInputs: !0,
        useInput: function(a) {
            var b = document.createElement("div"),
                d;
            a = "on" + a;
            d = a in b;
            d || (b.setAttribute(a, "return;"), d = "function" === typeof b[a]);
            return d
        } ("input"),
        watchDataMask: !1,
        byPassKeys: [9, 16, 17, 18, 36, 37, 38, 39, 40, 91],
        translation: {
            0 : {
                pattern: /\d/
            },
            9 : {
                pattern: /\d/,
                optional: !0
            },
            "#": {
                pattern: /\d/,
                recursive: !0
            },
            A: {
                pattern: /[a-zA-Z0-9]/
            },
            S: {
                pattern: /[a-zA-Z]/
            }
        }
    };
    b.jMaskGlobals = b.jMaskGlobals || {};
    p = b.jMaskGlobals = b.extend(!0, {},
        p, b.jMaskGlobals);
    p.dataMask && b.applyDataMask();
    setInterval(function() {
            b.jMaskGlobals.watchDataMask && b.applyDataMask()
        },
        p.watchInterval)
});

/*!
 *         ,/
 *       ,'/
 *     ,' /
 *   ,'  /_____,
 * .'____    ,'
 *      /  ,'
 *     / ,'
 *    /,'
 *   /'
 *
 * Selectric ϟ v1.10.1 (Jun 30 2016) - http://lcdsantos.github.io/jQuery-Selectric/
 *
 * Copyright (c) 2016 Leonardo Santos; MIT License
 *
 */

(function(factory) {
    /* global define */
    /* istanbul ignore next */
    if (typeof define === 'function' && define.amd) {
        define(['jquery'], factory);
    } else if (typeof module === 'object' && module.exports) {
        // Node/CommonJS
        module.exports = function(root, jQuery) {
            if (jQuery === undefined) {
                if (typeof window !== 'undefined') {
                    jQuery = require('jquery');
                } else {
                    jQuery = require('jquery')(root);
                }
            }
            factory(jQuery);
            return jQuery;
        };
    } else {
        // Browser globals
        factory(jQuery);
    }
} (function($) {
    'use strict';

    var $doc = $(document);
    var $win = $(window);

    var pluginName = 'selectric';
    var classList = 'Input Items Open Disabled TempShow HideSelect Wrapper Focus Hover Responsive Above Scroll Group GroupLabel';
    var bindSufix = '.sl';

    var chars = ['a', 'e', 'i', 'o', 'u', 'n', 'c', 'y'];
    var diacritics = [/[\xE0-\xE5]/g, // a
        / [\xE8 - \xEB] / g, // e
        / [\xEC - \xEF] / g, // i
        / [\xF2 - \xF6] / g, // o
        / [\xF9 - \xFC] / g, // u
        / [\xF1] / g, // n
        / [\xE7] / g, // c
        / [\xFD - \xFF] / g // y
    ];

    /**
     * Create an instance of Selectric
     *
     * @constructor
     * @param {Node} element - The &lt;select&gt; element
     * @param {object}  opts - Options
     */
    var Selectric = function(element, opts) {
        var _this = this;

        _this.element = element;
        _this.$element = $(element);

        _this.state = {
            enabled: false,
            opened: false,
            currValue: -1,
            selectedIdx: -1
        };

        _this.eventTriggers = {
            open: _this.open,
            close: _this.close,
            destroy: _this.destroy,
            refresh: _this.refresh,
            init: _this.init
        };

        _this.init(opts);
    };

    Selectric.prototype = {
        utils: {
            /**
             * Detect mobile browser
             *
             * @return {boolean}
             */
            isMobile: function() {
                return /android|ip(hone|od|ad)/i.test(navigator.userAgent);
            },

            /**
             * Escape especial characters in string (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions)
             *
             * @param  {string} str - The string to be escaped
             * @return {string}       The string with the special characters escaped
             */
            escapeRegExp: function(str) {
                return str.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); // $& means the whole matched string
            },

            /**
             * Replace diacritics
             *
             * @param  {string} str - The string to replace the diacritics
             * @return {string}       The string with diacritics replaced with ascii characters
             */
            replaceDiacritics: function(str) {
                var k = diacritics.length;

                while (k--) {
                    str = str.toLowerCase().replace(diacritics[k], chars[k]);
                }

                return str;
            },

            /**
             * Format string
             * https://gist.github.com/atesgoral/984375
             *
             * @param  {string} f - String to be formated
             * @return {string}     String formated
             */
            format: function(f) {
                var a = arguments; // store outer arguments
                return ('' + f) // force format specifier to String
                    .replace( // replace tokens in format specifier
                        / \ { ( ? :(\d + ) | (\w + ))\
            }
    /g, / / match {
    token
}
    references
    function(s, // the matched string (ignored)
             i, // an argument index
             p // a property name
    ) {
        return p && a[1] // if property name and first argument exist
            ? a[1][p] // return property from first argument
            : a[i]; // assume argument index and return i-th argument
    });
},

/**
 * Get the next enabled item in the options list.
 *
 * @param  {object} selectItems - The options object.
 * @param  {number}    selected - Index of the currently selected option.
 * @return {object}               The next enabled item.
 */
nextEnabledItem: function(selectItems, selected) {
    while (selectItems[selected = (selected + 1) % selectItems.length].disabled) {
        // empty
    }
    return selected;
},

/**
 * Get the previous enabled item in the options list.
 *
 * @param  {object} selectItems - The options object.
 * @param  {number}    selected - Index of the currently selected option.
 * @return {object}               The previous enabled item.
 */
previousEnabledItem: function(selectItems, selected) {
    while (selectItems[selected = (selected > 0 ? selected: selectItems.length) - 1].disabled) {
        // empty
    }
    return selected;
},

/**
 * Transform camelCase string to dash-case.
 *
 * @param  {string} str - The camelCased string.
 * @return {string}       The string transformed to dash-case.
 */
toDash: function(str) {
    return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();
},

/**
 * Calls the events and hooks registered with function name.
 *
 * @param {string}    fn - The name of the function.
 * @param {number} scope - Scope that should be set on the function.
 */
triggerCallback: function(fn, scope) {
    var elm = scope.element;
    var func = scope.options['on' + fn];

    if ($.isFunction(func)) {
        func.call(elm, elm, scope);
    }

    if ($.fn[pluginName].hooks[fn]) {
        $.each($.fn[pluginName].hooks[fn],
            function() {
                this.call(elm, elm, scope);
            });
    }

    $(elm).trigger(pluginName + '-' + this.toDash(fn), scope);
}
},

/** Initializes */
init: function(opts) {
    var _this = this;

    // Set options
    _this.options = $.extend(true, {},
        $.fn[pluginName].defaults, _this.options, opts);

    _this.utils.triggerCallback('BeforeInit', _this);

    // Preserve data
    _this.destroy(true);

    // Disable on mobile browsers
    if (_this.options.disableOnMobile && _this.utils.isMobile()) {
        _this.disableOnMobile = true;
        return;
    }

    // Get classes
    _this.classes = _this.getClassNames();

    // Create elements
    var input = $('<input/>', {
        'class': _this.classes.input,
        'readonly': _this.utils.isMobile()
    });
    var items = $('<div/>', {
        'class': _this.classes.items,
        'tabindex': -1
    });
    var itemsScroll = $('<div/>', {
        'class': _this.classes.scroll
    });
    var wrapper = $('<div/>', {
        'class': _this.classes.prefix,
        'html': _this.options.arrowButtonMarkup
    });
    var label = $('<p/>', {
        'class': 'label'
    });
    var outerWrapper = _this.$element.wrap('<div/>').parent().append(wrapper.prepend(label), items, input);

    _this.elements = {
        input: input,
        items: items,
        itemsScroll: itemsScroll,
        wrapper: wrapper,
        label: label,
        outerWrapper: outerWrapper
    };

    _this.$element.on(_this.eventTriggers).wrap('<div class="' + _this.classes.hideselect + '"/>');

    _this.originalTabindex = _this.$element.prop('tabindex');
    _this.$element.prop('tabindex', false);

    _this.populate();
    _this.activate();

    _this.utils.triggerCallback('Init', _this);
},

/** Activates the plugin */
activate: function() {
    var _this = this;
    var originalWidth = _this.$element.width();

    _this.utils.triggerCallback('BeforeActivate', _this);

    _this.elements.outerWrapper.prop('class', [_this.classes.wrapper, _this.$element.prop('class').replace(/\S+/g, _this.classes.prefix + '-$&'), _this.options.responsive ? _this.classes.responsive: ''].join(' '));

    if (_this.options.inheritOriginalWidth && originalWidth > 0) {
        _this.elements.outerWrapper.width(originalWidth);
    }

    if (!_this.$element.prop('disabled')) {
        _this.state.enabled = true;

        // Not disabled, so... Removing disabled class
        _this.elements.outerWrapper.removeClass(_this.classes.disabled);

        // Remove styles from items box
        // Fix incorrect height when refreshed is triggered with fewer options
        _this.$li = _this.elements.items.removeAttr('style').find('li');

        _this.bindEvents();
    } else {
        _this.elements.outerWrapper.addClass(_this.classes.disabled);
        _this.elements.input.prop('disabled', true);
    }

    _this.utils.triggerCallback('Activate', _this);
},

/**
 * Generate classNames for elements
 *
 * @return {object} Classes object
 */
getClassNames: function() {
    var _this = this;
    var customClass = _this.options.customClass;
    var classesObj = {};

    $.each(classList.split(' '),
        function(i, currClass) {
            var c = customClass.prefix + currClass;
            classesObj[currClass.toLowerCase()] = customClass.camelCase ? c: _this.utils.toDash(c);
        });

    classesObj.prefix = customClass.prefix;

    return classesObj;
},

/** Set the label text */
setLabel: function() {
    var _this = this;
    var labelBuilder = _this.options.labelBuilder;
    var currItem = _this.lookupItems[_this.state.currValue];

    _this.elements.label.html($.isFunction(labelBuilder) ? labelBuilder(currItem) : _this.utils.format(labelBuilder, currItem));
},

/** Get and save the available options */
populate: function() {
    var _this = this;
    var $options = _this.$element.children();
    var $justOptions = _this.$element.find('option');
    var selectedIndex = $justOptions.index($justOptions.filter(':selected'));
    var currIndex = 0;

    _this.state.currValue = (_this.state.selected = ~selectedIndex ? selectedIndex: 0);
    _this.state.selectedIdx = _this.state.currValue;
    _this.items = [];
    _this.lookupItems = [];

    if ($options.length) {
        // Build options markup
        $options.each(function(i) {
            var $elm = $(this);

            if ($elm.is('optgroup')) {

                var optionsGroup = {
                    element: $elm,
                    label: $elm.prop('label'),
                    groupDisabled: $elm.prop('disabled'),
                    items: []
                };

                $elm.children().each(function(i) {
                    var $elm = $(this);
                    var optionText = $elm.html();

                    optionsGroup.items[i] = {
                        index: currIndex,
                        element: $elm,
                        value: $elm.val(),
                        text: optionText,
                        slug: _this.utils.replaceDiacritics(optionText),
                        disabled: optionsGroup.groupDisabled
                    };

                    _this.lookupItems[currIndex] = optionsGroup.items[i];

                    currIndex++;
                });

                _this.items[i] = optionsGroup;

            } else {

                var optionText = $elm.html();

                _this.items[i] = {
                    index: currIndex,
                    element: $elm,
                    value: $elm.val(),
                    text: optionText,
                    slug: _this.utils.replaceDiacritics(optionText),
                    disabled: $elm.prop('disabled')
                };

                _this.lookupItems[currIndex] = _this.items[i];

                currIndex++;

            }
        });

        _this.setLabel();
        _this.elements.items.append(_this.elements.itemsScroll.html(_this.getItemsMarkup(_this.items)));
    }
},

/**
 * Generate options markup
 *
 * @param  {object} items - Object containing all available options
 * @return {string}         HTML for the options box
 */
getItemsMarkup: function(items) {
    var _this = this;
    var markup = '<ul>';

    $.each(items,
        function(i, elm) {
            if (elm.label !== undefined) {

                markup += _this.utils.format('<ul class="{1}"><li class="{2}">{3}</li>', $.trim([_this.classes.group, elm.groupDisabled ? 'disabled': '', elm.element.prop('class')].join(' ')), _this.classes.grouplabel, elm.element.prop('label'));

                $.each(elm.items,
                    function(i, elm) {
                        markup += _this.getItemMarkup(elm.index, elm);
                    });

                markup += '</ul>';

            } else {

                markup += _this.getItemMarkup(elm.index, elm);

            }
        });

    return markup + '</ul>';
},

/**
 * Generate every option markup
 *
 * @param  {number} i   - Index of current item
 * @param  {object} elm - Current item
 * @return {string}       HTML for the option
 */
getItemMarkup: function(i, elm) {
    var _this = this;
    var itemBuilder = _this.options.optionsItemBuilder;

    return _this.utils.format('<li data-index="{1}" class="{2}">{3}</li>', i, $.trim([i === _this.state.currValue ? 'selected': '', i === _this.items.length - 1 ? 'last': '', elm.disabled ? 'disabled': ''].join(' ')), $.isFunction(itemBuilder) ? itemBuilder(elm, elm.element, i) : _this.utils.format(itemBuilder, elm));
},

/** Bind events on the elements */
bindEvents: function() {
    var _this = this;

    _this.elements.wrapper.add(_this.$element).add(_this.elements.outerWrapper).add(_this.elements.input).off(bindSufix);

    _this.elements.outerWrapper.on('mouseenter' + bindSufix + ' mouseleave' + bindSufix,
        function(e) {
            $(this).toggleClass(_this.classes.hover, e.type === 'mouseenter');

            // Delay close effect when openOnHover is true
            if (_this.options.openOnHover) {
                clearTimeout(_this.closeTimer);

                if (e.type === 'mouseleave') {
                    _this.closeTimer = setTimeout($.proxy(_this.close, _this), _this.options.hoverIntentTimeout);
                } else {
                    _this.open();
                }
            }
        });

    // Toggle open/close
    _this.elements.wrapper.on('click' + bindSufix,
        function(e) {
            _this.state.opened ? _this.close() : _this.open(e);
        });

    _this.elements.input.prop({
        tabindex: _this.originalTabindex,
        disabled: false
    }).on('keydown' + bindSufix, $.proxy(_this.handleKeys, _this)).on('focusin' + bindSufix,
        function(e) {
            _this.elements.outerWrapper.addClass(_this.classes.focus);

            // Prevent the flicker when focusing out and back again in the browser window
            _this.elements.input.one('blur',
                function() {
                    _this.elements.input.blur();
                });

            if (_this.options.openOnFocus && !_this.state.opened) {
                _this.open(e);
            }
        }).on('focusout' + bindSufix,
        function() {
            _this.elements.outerWrapper.removeClass(_this.classes.focus);
        }).on('input propertychange',
        function() {
            var val = _this.elements.input.val();

            // Clear search
            clearTimeout(_this.resetStr);
            _this.resetStr = setTimeout(function() {
                    _this.elements.input.val('');
                },
                _this.options.keySearchTimeout);

            if (val.length) {
                // Search in select options
                $.each(_this.items,
                    function(i, elm) {
                        if (RegExp('^' + _this.utils.escapeRegExp(val), 'i').test(elm.slug) && !elm.disabled) {
                            _this.select(i);
                            return false;
                        }
                    });
            }
        });

    _this.$li.on({
        // Prevent <input> blur on Chrome
        mousedown: function(e) {
            e.preventDefault();
            e.stopPropagation();
        },
        click: function() {
            // The second parameter is to close the box after click
            _this.select($(this).data('index'), true);

            // Chrome doesn't close options box if select is wrapped with a label
            // We need to 'return false' to avoid that
            return false;
        }
    });
},

/**
 * Behavior when keyboard keys is pressed
 *
 * @param {object} e - Event object
 */
handleKeys: function(e) {
    var _this = this;
    var key = e.keyCode || e.which;
    var keys = _this.options.keys;

    var isPrev = $.inArray(key, keys.previous) > -1;
    var isNext = $.inArray(key, keys.next) > -1;
    var isSelect = $.inArray(key, keys.select) > -1;
    var isOpen = $.inArray(key, keys.open) > -1;
    var idx = _this.state.selectedIdx;
    var isFirstOrLastItem = (isPrev && idx === 0) || (isNext && (idx + 1) === _this.items.length);
    var goToItem = 0;

    // Enter / Space
    if (key === 13 || key === 32) {
        e.preventDefault();
    }

    // If it's a directional key
    if (isPrev || isNext) {
        if (!_this.options.allowWrap && isFirstOrLastItem) {
            return;
        }

        if (isPrev) {
            goToItem = _this.utils.previousEnabledItem(_this.items, idx);
        }

        if (isNext) {
            goToItem = _this.utils.nextEnabledItem(_this.items, idx);
        }

        _this.select(goToItem);
    }

    // Tab / Enter / ESC
    if (isSelect && _this.state.opened) {
        _this.select(idx, true);
        return;
    }

    // Space / Enter / Left / Up / Right / Down
    if (isOpen && !_this.state.opened) {
        _this.open();
    }
},

/** Update the items object */
refresh: function() {
    var _this = this;

    _this.populate();
    _this.activate();
    _this.utils.triggerCallback('Refresh', _this);
},

/** Set options box width/height */
setOptionsDimensions: function() {
    var _this = this;

    // Calculate options box height
    // Set a temporary class on the hidden parent of the element
    var hiddenChildren = _this.elements.items.closest(':visible').children(':hidden').addClass(_this.classes.tempshow);
    var maxHeight = _this.options.maxHeight;
    var itemsWidth = _this.elements.items.outerWidth();
    var wrapperWidth = _this.elements.wrapper.outerWidth() - (itemsWidth - _this.elements.items.width());

    // Set the dimensions, minimum is wrapper width, expand for long items if option is true
    if (!_this.options.expandToItemText || wrapperWidth > itemsWidth) {
        _this.finalWidth = wrapperWidth;
    } else {
        // Make sure the scrollbar width is included
        _this.elements.items.css('overflow', 'scroll');

        // Set a really long width for _this.elements.outerWrapper
        _this.elements.outerWrapper.width(9e4);
        _this.finalWidth = _this.elements.items.width();
        // Set scroll bar to auto
        _this.elements.items.css('overflow', '');
        _this.elements.outerWrapper.width('');
    }

    _this.elements.items.width(_this.finalWidth).height() > maxHeight && _this.elements.items.height(maxHeight);

    // Remove the temporary class
    hiddenChildren.removeClass(_this.classes.tempshow);
},

/** Detect if the options box is inside the window */
isInViewport: function() {
    var _this = this;
    var scrollTop = $win.scrollTop();
    var winHeight = $win.height();
    var uiPosX = _this.elements.outerWrapper.offset().top;
    var uiHeight = _this.elements.outerWrapper.outerHeight();

    var fitsDown = (uiPosX + uiHeight + _this.itemsHeight) <= (scrollTop + winHeight);
    var fitsAbove = (uiPosX - _this.itemsHeight) > scrollTop;

    // If it does not fit below, only render it
    // above it fit's there.
    // It's acceptable that the user needs to
    // scroll the viewport to see the cut off UI
    var renderAbove = !fitsDown && fitsAbove;

    _this.elements.outerWrapper.toggleClass(_this.classes.above, renderAbove);
},

/**
 * Detect if currently selected option is visible and scroll the options box to show it
 *
 * @param {number} index - Index of the selected items
 */
detectItemVisibility: function(index) {
    var _this = this;
    var liHeight = _this.$li.eq(index).outerHeight();
    var liTop = _this.$li[index].offsetTop;
    var itemsScrollTop = _this.elements.itemsScroll.scrollTop();
    var scrollT = liTop + liHeight * 2;

    _this.elements.itemsScroll.scrollTop(scrollT > itemsScrollTop + _this.itemsHeight ? scrollT - _this.itemsHeight: liTop - liHeight < itemsScrollTop ? liTop - liHeight: itemsScrollTop);
},

/**
 * Open the select options box
 *
 * @param {event} e - Event
 */
open: function(e) {
    var _this = this;

    _this.utils.triggerCallback('BeforeOpen', _this);

    if (e) {
        e.preventDefault();
        e.stopPropagation();
    }

    if (_this.state.enabled) {
        _this.setOptionsDimensions();

        // Find any other opened instances of select and close it
        $('.' + _this.classes.hideselect, '.' + _this.classes.open).children()[pluginName]('close');

        _this.state.opened = true;
        _this.itemsHeight = _this.elements.items.outerHeight();
        _this.itemsInnerHeight = _this.elements.items.height();

        // Toggle options box visibility
        _this.elements.outerWrapper.addClass(_this.classes.open);

        // Give dummy input focus
        _this.elements.input.val('');
        if (e && e.type !== 'focusin') {
            _this.elements.input.focus();
        }

        $doc.on('click' + bindSufix, $.proxy(_this.close, _this)).on('scroll' + bindSufix, $.proxy(_this.isInViewport, _this));
        _this.isInViewport();

        // Prevent window scroll when using mouse wheel inside items box
        if (_this.options.preventWindowScroll) {
            /* istanbul ignore next */
            $doc.on('mousewheel' + bindSufix + ' DOMMouseScroll' + bindSufix, '.' + _this.classes.scroll,
                function(e) {
                    var orgEvent = e.originalEvent;
                    var scrollTop = $(this).scrollTop();
                    var deltaY = 0;

                    if ('detail' in orgEvent) {
                        deltaY = orgEvent.detail * -1;
                    }
                    if ('wheelDelta' in orgEvent) {
                        deltaY = orgEvent.wheelDelta;
                    }
                    if ('wheelDeltaY' in orgEvent) {
                        deltaY = orgEvent.wheelDeltaY;
                    }
                    if ('deltaY' in orgEvent) {
                        deltaY = orgEvent.deltaY * -1;
                    }

                    if (scrollTop === (this.scrollHeight - _this.itemsInnerHeight) && deltaY < 0 || scrollTop === 0 && deltaY > 0) {
                        e.preventDefault();
                    }
                });
        }

        _this.detectItemVisibility(_this.state.selectedIdx);

        _this.utils.triggerCallback('Open', _this);
    }
},

/** Close the select options box */
close: function() {
    var _this = this;

    _this.utils.triggerCallback('BeforeClose', _this);

    _this.change();

    // Remove custom events on document
    $doc.off(bindSufix);

    // Remove visible class to hide options box
    _this.elements.outerWrapper.removeClass(_this.classes.open);

    _this.state.opened = false;

    _this.utils.triggerCallback('Close', _this);
},

/** Select current option and change the label */
change: function() {
    var _this = this;

    _this.utils.triggerCallback('BeforeChange', _this);

    if (_this.state.currValue !== _this.state.selectedIdx) {
        // Apply changed value to original select
        _this.$element.prop('selectedIndex', _this.state.currValue = _this.state.selectedIdx).data('value', _this.lookupItems[_this.state.selectedIdx].text);

        // Change label text
        _this.setLabel();
    }

    _this.utils.triggerCallback('Change', _this);
},

/**
 * Select option
 *
 * @param {number}  index - Index of the option that will be selected
 * @param {boolean} close - Close the options box after selecting
 */
select: function(index, close) {
    var _this = this;

    // Parameter index is required
    if (index === undefined) {
        return;
    }

    // If element is disabled, can't select it
    if (!_this.lookupItems[index].disabled) {
        _this.$li.filter('[data-index]').removeClass('selected').eq(_this.state.selectedIdx = index).addClass('selected');

        _this.detectItemVisibility(index);

        // If 'close' is false (default), the options box won't close after
        // each selected item, this is necessary for keyboard navigation
        if (close) {
            _this.close();
        }
    }
},

/**
 * Unbind and remove
 *
 * @param {boolean} preserveData - Check if the data on the element should be removed too
 */
destroy: function(preserveData) {
    var _this = this;

    if (_this.state && _this.state.enabled) {
        _this.elements.items.add(_this.elements.wrapper).add(_this.elements.input).remove();

        if (!preserveData) {
            _this.$element.removeData(pluginName).removeData('value');
        }

        _this.$element.prop('tabindex', _this.originalTabindex).off(bindSufix).off(_this.eventTriggers).unwrap().unwrap();

        _this.state.enabled = false;
    }
}
};

// A really lightweight plugin wrapper around the constructor,
// preventing against multiple instantiations
$.fn[pluginName] = function(args) {
    return this.each(function() {
        var data = $.data(this, pluginName);

        if (data && !data.disableOnMobile) { (typeof args === 'string' && data[args]) ? data[args]() : data.init(args);
        } else {
            $.data(this, pluginName, new Selectric(this, args));
        }
    });
};

/**
 * Hooks for the callbacks
 *
 * @type {object}
 */
$.fn[pluginName].hooks = {
    /**
     * @param {string} callbackName - The callback name.
     * @param {string}     hookName - The name of the hook to be attached.
     * @param {function}         fn - Callback function.
     */
    add: function(callbackName, hookName, fn) {
        if (!this[callbackName]) {
            this[callbackName] = {};
        }

        this[callbackName][hookName] = fn;
    },

    /**
     * @param {string} callbackName - The callback name.
     * @param {string}     hookName - The name of the hook that will be removed.
     */
    remove: function(callbackName, hookName) {
        delete this[callbackName][hookName];
    }
};

/**
 * Default plugin options
 *
 * @type {object}
 */
$.fn[pluginName].defaults = {
    onChange: function(elm) {
        $(elm).change();
    },
    maxHeight: 300,
    keySearchTimeout: 500,
    arrowButtonMarkup: '<b class="button">&#x25be;</b>',
    disableOnMobile: true,
    openOnFocus: true,
    openOnHover: false,
    hoverIntentTimeout: 500,
    expandToItemText: false,
    responsive: false,
    preventWindowScroll: true,
    inheritOriginalWidth: false,
    allowWrap: true,
    optionsItemBuilder: '{text}',
    // function(itemData, element, index)
    labelBuilder: '{text}',
    // function(currItem)
    keys: {
        previous: [37, 38],
        // Left / Up
        next: [39, 40],
        // Right / Down
        select: [9, 13, 27],
        // Tab / Enter / Escape
        open: [13, 32, 37, 38, 39, 40],
        // Enter / Space / Left / Up / Right / Down
        close: [9, 27] // Tab / Escape
    },
    customClass: {
        prefix: pluginName,
        camelCase: false
    }
};
}));

/*! VelocityJS.org (1.2.3). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License */
/*! VelocityJS.org jQuery Shim (1.0.1). (C) 2014 The jQuery Foundation. MIT @license: en.wikipedia.org/wiki/MIT_License. */
!
    function(a) {
        function b(a) {
            var b = a.length,
                d = c.type(a);
            return "function" === d || c.isWindow(a) ? !1 : 1 === a.nodeType && b ? !0 : "array" === d || 0 === b || "number" == typeof b && b > 0 && b - 1 in a
        }
        if (!a.jQuery) {
            var c = function(a, b) {
                return new c.fn.init(a, b)
            };
            c.isWindow = function(a) {
                return null != a && a == a.window
            },
                c.type = function(a) {
                    return null == a ? a + "": "object" == typeof a || "function" == typeof a ? e[g.call(a)] || "object": typeof a
                },
                c.isArray = Array.isArray ||
                    function(a) {
                        return "array" === c.type(a)
                    },
                c.isPlainObject = function(a) {
                    var b;
                    if (!a || "object" !== c.type(a) || a.nodeType || c.isWindow(a)) return ! 1;
                    try {
                        if (a.constructor && !f.call(a, "constructor") && !f.call(a.constructor.prototype, "isPrototypeOf")) return ! 1
                    } catch(d) {
                        return ! 1
                    }
                    for (b in a);
                    return void 0 === b || f.call(a, b)
                },
                c.each = function(a, c, d) {
                    var e, f = 0,
                        g = a.length,
                        h = b(a);
                    if (d) {
                        if (h) for (; g > f && (e = c.apply(a[f], d), e !== !1); f++);
                        else for (f in a) if (e = c.apply(a[f], d), e === !1) break
                    } else if (h) for (; g > f && (e = c.call(a[f], f, a[f]), e !== !1); f++);
                    else for (f in a) if (e = c.call(a[f], f, a[f]), e === !1) break;
                    return a
                },
                c.data = function(a, b, e) {
                    if (void 0 === e) {
                        var f = a[c.expando],
                            g = f && d[f];
                        if (void 0 === b) return g;
                        if (g && b in g) return g[b]
                    } else if (void 0 !== b) {
                        var f = a[c.expando] || (a[c.expando] = ++c.uuid);
                        return d[f] = d[f] || {},
                            d[f][b] = e,
                            e
                    }
                },
                c.removeData = function(a, b) {
                    var e = a[c.expando],
                        f = e && d[e];
                    f && c.each(b,
                        function(a, b) {
                            delete f[b]
                        })
                },
                c.extend = function() {
                    var a, b, d, e, f, g, h = arguments[0] || {},
                        i = 1,
                        j = arguments.length,
                        k = !1;
                    for ("boolean" == typeof h && (k = h, h = arguments[i] || {},
                        i++), "object" != typeof h && "function" !== c.type(h) && (h = {}), i === j && (h = this, i--); j > i; i++) if (null != (f = arguments[i])) for (e in f) a = h[e],
                        d = f[e],
                    h !== d && (k && d && (c.isPlainObject(d) || (b = c.isArray(d))) ? (b ? (b = !1, g = a && c.isArray(a) ? a: []) : g = a && c.isPlainObject(a) ? a: {},
                        h[e] = c.extend(k, g, d)) : void 0 !== d && (h[e] = d));
                    return h
                },
                c.queue = function(a, d, e) {
                    function f(a, c) {
                        var d = c || [];
                        return null != a && (b(Object(a)) ? !
                            function(a, b) {
                                for (var c = +b.length,
                                         d = 0,
                                         e = a.length; c > d;) a[e++] = b[d++];
                                if (c !== c) for (; void 0 !== b[d];) a[e++] = b[d++];
                                return a.length = e,
                                    a
                            } (d, "string" == typeof a ? [a] : a) : [].push.call(d, a)),
                            d
                    }
                    if (a) {
                        d = (d || "fx") + "queue";
                        var g = c.data(a, d);
                        return e ? (!g || c.isArray(e) ? g = c.data(a, d, f(e)) : g.push(e), g) : g || []
                    }
                },
                c.dequeue = function(a, b) {
                    c.each(a.nodeType ? [a] : a,
                        function(a, d) {
                            b = b || "fx";
                            var e = c.queue(d, b),
                                f = e.shift();
                            "inprogress" === f && (f = e.shift()),
                            f && ("fx" === b && e.unshift("inprogress"), f.call(d,
                                function() {
                                    c.dequeue(d, b)
                                }))
                        })
                },
                c.fn = c.prototype = {
                    init: function(a) {
                        if (a.nodeType) return this[0] = a,
                            this;
                        throw new Error("Not a DOM node.")
                    },
                    offset: function() {
                        var b = this[0].getBoundingClientRect ? this[0].getBoundingClientRect() : {
                            top: 0,
                            left: 0
                        };
                        return {
                            top: b.top + (a.pageYOffset || document.scrollTop || 0) - (document.clientTop || 0),
                            left: b.left + (a.pageXOffset || document.scrollLeft || 0) - (document.clientLeft || 0)
                        }
                    },
                    position: function() {
                        function a() {
                            for (var a = this.offsetParent || document; a && "html" === !a.nodeType.toLowerCase && "static" === a.style.position;) a = a.offsetParent;
                            return a || document
                        }
                        var b = this[0],
                            a = a.apply(b),
                            d = this.offset(),
                            e = /^(?:body|html)$/i.test(a.nodeName) ? {
                                top: 0,
                                left: 0
                            }: c(a).offset();
                        return d.top -= parseFloat(b.style.marginTop) || 0,
                            d.left -= parseFloat(b.style.marginLeft) || 0,
                        a.style && (e.top += parseFloat(a.style.borderTopWidth) || 0, e.left += parseFloat(a.style.borderLeftWidth) || 0),
                            {
                                top: d.top - e.top,
                                left: d.left - e.left
                            }
                    }
                };
            var d = {};
            c.expando = "velocity" + (new Date).getTime(),
                c.uuid = 0;
            for (var e = {},
                     f = e.hasOwnProperty,
                     g = e.toString,
                     h = "Boolean Number String Function Array Date RegExp Object Error".split(" "), i = 0; i < h.length; i++) e["[object " + h[i] + "]"] = h[i].toLowerCase();
            c.fn.init.prototype = c.fn,
                a.Velocity = {
                    Utilities: c
                }
        }
    } (window),
    function(a) {
        "object" == typeof module && "object" == typeof module.exports ? module.exports = a() : "function" == typeof define && define.amd ? define(a) : a()
    } (function() {
        return function(a, b, c, d) {
            function e(a) {
                for (var b = -1,
                         c = a ? a.length: 0, d = []; ++b < c;) {
                    var e = a[b];
                    e && d.push(e)
                }
                return d
            }
            function f(a) {
                return p.isWrapped(a) ? a = [].slice.call(a) : p.isNode(a) && (a = [a]),
                    a
            }
            function g(a) {
                var b = m.data(a, "velocity");
                return null === b ? d: b
            }
            function h(a) {
                return function(b) {
                    return Math.round(b * a) * (1 / a)
                }
            }
            function i(a, c, d, e) {
                function f(a, b) {
                    return 1 - 3 * b + 3 * a
                }
                function g(a, b) {
                    return 3 * b - 6 * a
                }
                function h(a) {
                    return 3 * a
                }
                function i(a, b, c) {
                    return ((f(b, c) * a + g(b, c)) * a + h(b)) * a
                }
                function j(a, b, c) {
                    return 3 * f(b, c) * a * a + 2 * g(b, c) * a + h(b)
                }
                function k(b, c) {
                    for (var e = 0; p > e; ++e) {
                        var f = j(c, a, d);
                        if (0 === f) return c;
                        var g = i(c, a, d) - b;
                        c -= g / f
                    }
                    return c
                }
                function l() {
                    for (var b = 0; t > b; ++b) x[b] = i(b * u, a, d)
                }
                function m(b, c, e) {
                    var f, g, h = 0;
                    do g = c + (e - c) / 2,
                        f = i(g, a, d) - b,
                        f > 0 ? e = g: c = g;
                    while (Math.abs(f) > r && ++h < s);
                    return g
                }
                function n(b) {
                    for (var c = 0,
                             e = 1,
                             f = t - 1; e != f && x[e] <= b; ++e) c += u; --e;
                    var g = (b - x[e]) / (x[e + 1] - x[e]),
                        h = c + g * u,
                        i = j(h, a, d);
                    return i >= q ? k(b, h) : 0 == i ? h: m(b, c, c + u)
                }
                function o() {
                    y = !0,
                    (a != c || d != e) && l()
                }
                var p = 4,
                    q = .001,
                    r = 1e-7,
                    s = 10,
                    t = 11,
                    u = 1 / (t - 1),
                    v = "Float32Array" in b;
                if (4 !== arguments.length) return ! 1;
                for (var w = 0; 4 > w; ++w) if ("number" != typeof arguments[w] || isNaN(arguments[w]) || !isFinite(arguments[w])) return ! 1;
                a = Math.min(a, 1),
                    d = Math.min(d, 1),
                    a = Math.max(a, 0),
                    d = Math.max(d, 0);
                var x = v ? new Float32Array(t) : new Array(t),
                    y = !1,
                    z = function(b) {
                        return y || o(),
                            a === c && d === e ? b: 0 === b ? 0 : 1 === b ? 1 : i(n(b), c, e)
                    };
                z.getControlPoints = function() {
                    return [{
                        x: a,
                        y: c
                    },
                        {
                            x: d,
                            y: e
                        }]
                };
                var A = "generateBezier(" + [a, c, d, e] + ")";
                return z.toString = function() {
                    return A
                },
                    z
            }
            function j(a, b) {
                var c = a;
                return p.isString(a) ? t.Easings[a] || (c = !1) : c = p.isArray(a) && 1 === a.length ? h.apply(null, a) : p.isArray(a) && 2 === a.length ? u.apply(null, a.concat([b])) : p.isArray(a) && 4 === a.length ? i.apply(null, a) : !1,
                c === !1 && (c = t.Easings[t.defaults.easing] ? t.defaults.easing: s),
                    c
            }
            function k(a) {
                if (a) {
                    var b = (new Date).getTime(),
                        c = t.State.calls.length;
                    c > 1e4 && (t.State.calls = e(t.State.calls));
                    for (var f = 0; c > f; f++) if (t.State.calls[f]) {
                        var h = t.State.calls[f],
                            i = h[0],
                            j = h[2],
                            n = h[3],
                            o = !!n,
                            q = null;
                        n || (n = t.State.calls[f][3] = b - 16);
                        for (var r = Math.min((b - n) / j.duration, 1), s = 0, u = i.length; u > s; s++) {
                            var w = i[s],
                                y = w.element;
                            if (g(y)) {
                                var z = !1;
                                if (j.display !== d && null !== j.display && "none" !== j.display) {
                                    if ("flex" === j.display) {
                                        var A = ["-webkit-box", "-moz-box", "-ms-flexbox", "-webkit-flex"];
                                        m.each(A,
                                            function(a, b) {
                                                v.setPropertyValue(y, "display", b)
                                            })
                                    }
                                    v.setPropertyValue(y, "display", j.display)
                                }
                                j.visibility !== d && "hidden" !== j.visibility && v.setPropertyValue(y, "visibility", j.visibility);
                                for (var B in w) if ("element" !== B) {
                                    var C, D = w[B],
                                        E = p.isString(D.easing) ? t.Easings[D.easing] : D.easing;
                                    if (1 === r) C = D.endValue;
                                    else {
                                        var F = D.endValue - D.startValue;
                                        if (C = D.startValue + F * E(r, j, F), !o && C === D.currentValue) continue
                                    }
                                    if (D.currentValue = C, "tween" === B) q = C;
                                    else {
                                        if (v.Hooks.registered[B]) {
                                            var G = v.Hooks.getRoot(B),
                                                H = g(y).rootPropertyValueCache[G];
                                            H && (D.rootPropertyValue = H)
                                        }
                                        var I = v.setPropertyValue(y, B, D.currentValue + (0 === parseFloat(C) ? "": D.unitType), D.rootPropertyValue, D.scrollData);
                                        v.Hooks.registered[B] && (g(y).rootPropertyValueCache[G] = v.Normalizations.registered[G] ? v.Normalizations.registered[G]("extract", null, I[1]) : I[1]),
                                        "transform" === I[0] && (z = !0)
                                    }
                                }
                                j.mobileHA && g(y).transformCache.translate3d === d && (g(y).transformCache.translate3d = "(0px, 0px, 0px)", z = !0),
                                z && v.flushTransformCache(y)
                            }
                        }
                        j.display !== d && "none" !== j.display && (t.State.calls[f][2].display = !1),
                        j.visibility !== d && "hidden" !== j.visibility && (t.State.calls[f][2].visibility = !1),
                        j.progress && j.progress.call(h[1], h[1], r, Math.max(0, n + j.duration - b), n, q),
                        1 === r && l(f)
                    }
                }
                t.State.isTicking && x(k)
            }
            function l(a, b) {
                if (!t.State.calls[a]) return ! 1;
                for (var c = t.State.calls[a][0], e = t.State.calls[a][1], f = t.State.calls[a][2], h = t.State.calls[a][4], i = !1, j = 0, k = c.length; k > j; j++) {
                    var l = c[j].element;
                    if (b || f.loop || ("none" === f.display && v.setPropertyValue(l, "display", f.display), "hidden" === f.visibility && v.setPropertyValue(l, "visibility", f.visibility)), f.loop !== !0 && (m.queue(l)[1] === d || !/\.velocityQueueEntryFlag/i.test(m.queue(l)[1])) && g(l)) {
                        g(l).isAnimating = !1,
                            g(l).rootPropertyValueCache = {};
                        var n = !1;
                        m.each(v.Lists.transforms3D,
                            function(a, b) {
                                var c = /^scale/.test(b) ? 1 : 0,
                                    e = g(l).transformCache[b];
                                g(l).transformCache[b] !== d && new RegExp("^\\(" + c + "[^.]").test(e) && (n = !0, delete g(l).transformCache[b])
                            }),
                        f.mobileHA && (n = !0, delete g(l).transformCache.translate3d),
                        n && v.flushTransformCache(l),
                            v.Values.removeClass(l, "velocity-animating")
                    }
                    if (!b && f.complete && !f.loop && j === k - 1) try {
                        f.complete.call(e, e)
                    } catch(o) {
                        setTimeout(function() {
                                throw o
                            },
                            1)
                    }
                    h && f.loop !== !0 && h(e),
                    g(l) && f.loop === !0 && !b && (m.each(g(l).tweensContainer,
                        function(a, b) { / ^rotate / .test(a) && 360 === parseFloat(b.endValue) && (b.endValue = 0, b.startValue = 360),
                        /^backgroundPosition/.test(a) && 100 === parseFloat(b.endValue) && "%" === b.unitType && (b.endValue = 0, b.startValue = 100)
                        }), t(l, "reverse", {
                        loop: !0,
                        delay: f.delay
                    })),
                    f.queue !== !1 && m.dequeue(l, f.queue)
                }
                t.State.calls[a] = !1;
                for (var p = 0,
                         q = t.State.calls.length; q > p; p++) if (t.State.calls[p] !== !1) {
                    i = !0;
                    break
                }
                i === !1 && (t.State.isTicking = !1, delete t.State.calls, t.State.calls = [])
            }
            var m, n = function() {
                    if (c.documentMode) return c.documentMode;
                    for (var a = 7; a > 4; a--) {
                        var b = c.createElement("div");
                        if (b.innerHTML = "<!--[if IE " + a + "]><span></span><![endif]-->", b.getElementsByTagName("span").length) return b = null,
                            a
                    }
                    return d
                } (),
                o = function() {
                    var a = 0;
                    return b.webkitRequestAnimationFrame || b.mozRequestAnimationFrame ||
                        function(b) {
                            var c, d = (new Date).getTime();
                            return c = Math.max(0, 16 - (d - a)),
                                a = d + c,
                                setTimeout(function() {
                                        b(d + c)
                                    },
                                    c)
                        }
                } (),
                p = {
                    isString: function(a) {
                        return "string" == typeof a
                    },
                    isArray: Array.isArray ||
                    function(a) {
                        return "[object Array]" === Object.prototype.toString.call(a)
                    },
                    isFunction: function(a) {
                        return "[object Function]" === Object.prototype.toString.call(a)
                    },
                    isNode: function(a) {
                        return a && a.nodeType
                    },
                    isNodeList: function(a) {
                        return "object" == typeof a && /^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(a)) && a.length !== d && (0 === a.length || "object" == typeof a[0] && a[0].nodeType > 0)
                    },
                    isWrapped: function(a) {
                        return a && (a.jquery || b.Zepto && b.Zepto.zepto.isZ(a))
                    },
                    isSVG: function(a) {
                        return b.SVGElement && a instanceof b.SVGElement
                    },
                    isEmptyObject: function(a) {
                        for (var b in a) return ! 1;
                        return ! 0
                    }
                },
                q = !1;
            if (a.fn && a.fn.jquery ? (m = a, q = !0) : m = b.Velocity.Utilities, 8 >= n && !q) throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");
            if (7 >= n) return void(jQuery.fn.velocity = jQuery.fn.animate);
            var r = 400,
                s = "swing",
                t = {
                    State: {
                        isMobile: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),
                        isAndroid: /Android/i.test(navigator.userAgent),
                        isGingerbread: /Android 2\.3\.[3-7]/i.test(navigator.userAgent),
                        isChrome: b.chrome,
                        isFirefox: /Firefox/i.test(navigator.userAgent),
                        prefixElement: c.createElement("div"),
                        prefixMatches: {},
                        scrollAnchor: null,
                        scrollPropertyLeft: null,
                        scrollPropertyTop: null,
                        isTicking: !1,
                        calls: []
                    },
                    CSS: {},
                    Utilities: m,
                    Redirects: {},
                    Easings: {},
                    Promise: b.Promise,
                    defaults: {
                        queue: "",
                        duration: r,
                        easing: s,
                        begin: d,
                        complete: d,
                        progress: d,
                        display: d,
                        visibility: d,
                        loop: !1,
                        delay: !1,
                        mobileHA: !0,
                        _cacheValues: !0
                    },
                    init: function(a) {
                        m.data(a, "velocity", {
                            isSVG: p.isSVG(a),
                            isAnimating: !1,
                            computedStyle: null,
                            tweensContainer: null,
                            rootPropertyValueCache: {},
                            transformCache: {}
                        })
                    },
                    hook: null,
                    mock: !1,
                    version: {
                        major: 1,
                        minor: 2,
                        patch: 2
                    },
                    debug: !1
                };
            b.pageYOffset !== d ? (t.State.scrollAnchor = b, t.State.scrollPropertyLeft = "pageXOffset", t.State.scrollPropertyTop = "pageYOffset") : (t.State.scrollAnchor = c.documentElement || c.body.parentNode || c.body, t.State.scrollPropertyLeft = "scrollLeft", t.State.scrollPropertyTop = "scrollTop");
            var u = function() {
                function a(a) {
                    return - a.tension * a.x - a.friction * a.v
                }
                function b(b, c, d) {
                    var e = {
                        x: b.x + d.dx * c,
                        v: b.v + d.dv * c,
                        tension: b.tension,
                        friction: b.friction
                    };
                    return {
                        dx: e.v,
                        dv: a(e)
                    }
                }
                function c(c, d) {
                    var e = {
                            dx: c.v,
                            dv: a(c)
                        },
                        f = b(c, .5 * d, e),
                        g = b(c, .5 * d, f),
                        h = b(c, d, g),
                        i = 1 / 6 * (e.dx + 2 * (f.dx + g.dx) + h.dx),
                        j = 1 / 6 * (e.dv + 2 * (f.dv + g.dv) + h.dv);
                    return c.x = c.x + i * d,
                        c.v = c.v + j * d,
                        c
                }
                return function d(a, b, e) {
                    var f, g, h, i = {
                            x: -1,
                            v: 0,
                            tension: null,
                            friction: null
                        },
                        j = [0],
                        k = 0,
                        l = 1e-4,
                        m = .016;
                    for (a = parseFloat(a) || 500, b = parseFloat(b) || 20, e = e || null, i.tension = a, i.friction = b, f = null !== e, f ? (k = d(a, b), g = k / e * m) : g = m;;) if (h = c(h || i, g), j.push(1 + h.x), k += 16, !(Math.abs(h.x) > l && Math.abs(h.v) > l)) break;
                    return f ?
                        function(a) {
                            return j[a * (j.length - 1) | 0]
                        }: k
                }
            } ();
            t.Easings = {
                linear: function(a) {
                    return a
                },
                swing: function(a) {
                    return.5 - Math.cos(a * Math.PI) / 2
                },
                spring: function(a) {
                    return 1 - Math.cos(4.5 * a * Math.PI) * Math.exp(6 * -a)
                }
            },
                m.each([["ease", [.25, .1, .25, 1]], ["ease-in", [.42, 0, 1, 1]], ["ease-out", [0, 0, .58, 1]], ["ease-in-out", [.42, 0, .58, 1]], ["easeInSine", [.47, 0, .745, .715]], ["easeOutSine", [.39, .575, .565, 1]], ["easeInOutSine", [.445, .05, .55, .95]], ["easeInQuad", [.55, .085, .68, .53]], ["easeOutQuad", [.25, .46, .45, .94]], ["easeInOutQuad", [.455, .03, .515, .955]], ["easeInCubic", [.55, .055, .675, .19]], ["easeOutCubic", [.215, .61, .355, 1]], ["easeInOutCubic", [.645, .045, .355, 1]], ["easeInQuart", [.895, .03, .685, .22]], ["easeOutQuart", [.165, .84, .44, 1]], ["easeInOutQuart", [.77, 0, .175, 1]], ["easeInQuint", [.755, .05, .855, .06]], ["easeOutQuint", [.23, 1, .32, 1]], ["easeInOutQuint", [.86, 0, .07, 1]], ["easeInExpo", [.95, .05, .795, .035]], ["easeOutExpo", [.19, 1, .22, 1]], ["easeInOutExpo", [1, 0, 0, 1]], ["easeInCirc", [.6, .04, .98, .335]], ["easeOutCirc", [.075, .82, .165, 1]], ["easeInOutCirc", [.785, .135, .15, .86]]],
                    function(a, b) {
                        t.Easings[b[0]] = i.apply(null, b[1])
                    });
            var v = t.CSS = {
                RegEx: {
                    isHex: /^#([A-f\d]{3}){1,2}$/i,
                    valueUnwrap: /^[A-z]+\((.*)\)$/i,
                    wrappedValueAlreadyExtracted: /[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,
                    valueSplit: /([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi
                },
                Lists: {
                    colors: ["fill", "stroke", "stopColor", "color", "backgroundColor", "borderColor", "borderTopColor", "borderRightColor", "borderBottomColor", "borderLeftColor", "outlineColor"],
                    transformsBase: ["translateX", "translateY", "scale", "scaleX", "scaleY", "skewX", "skewY", "rotateZ"],
                    transforms3D: ["transformPerspective", "translateZ", "scaleZ", "rotateX", "rotateY"]
                },
                Hooks: {
                    templates: {
                        textShadow: ["Color X Y Blur", "black 0px 0px 0px"],
                        boxShadow: ["Color X Y Blur Spread", "black 0px 0px 0px 0px"],
                        clip: ["Top Right Bottom Left", "0px 0px 0px 0px"],
                        backgroundPosition: ["X Y", "0% 0%"],
                        transformOrigin: ["X Y Z", "50% 50% 0px"],
                        perspectiveOrigin: ["X Y", "50% 50%"]
                    },
                    registered: {},
                    register: function() {
                        for (var a = 0; a < v.Lists.colors.length; a++) {
                            var b = "color" === v.Lists.colors[a] ? "0 0 0 1": "255 255 255 1";
                            v.Hooks.templates[v.Lists.colors[a]] = ["Red Green Blue Alpha", b]
                        }
                        var c, d, e;
                        if (n) for (c in v.Hooks.templates) {
                            d = v.Hooks.templates[c],
                                e = d[0].split(" ");
                            var f = d[1].match(v.RegEx.valueSplit);
                            "Color" === e[0] && (e.push(e.shift()), f.push(f.shift()), v.Hooks.templates[c] = [e.join(" "), f.join(" ")])
                        }
                        for (c in v.Hooks.templates) {
                            d = v.Hooks.templates[c],
                                e = d[0].split(" ");
                            for (var a in e) {
                                var g = c + e[a],
                                    h = a;
                                v.Hooks.registered[g] = [c, h]
                            }
                        }
                    },
                    getRoot: function(a) {
                        var b = v.Hooks.registered[a];
                        return b ? b[0] : a
                    },
                    cleanRootPropertyValue: function(a, b) {
                        return v.RegEx.valueUnwrap.test(b) && (b = b.match(v.RegEx.valueUnwrap)[1]),
                        v.Values.isCSSNullValue(b) && (b = v.Hooks.templates[a][1]),
                            b
                    },
                    extractValue: function(a, b) {
                        var c = v.Hooks.registered[a];
                        if (c) {
                            var d = c[0],
                                e = c[1];
                            return b = v.Hooks.cleanRootPropertyValue(d, b),
                                b.toString().match(v.RegEx.valueSplit)[e]
                        }
                        return b
                    },
                    injectValue: function(a, b, c) {
                        var d = v.Hooks.registered[a];
                        if (d) {
                            var e, f, g = d[0],
                                h = d[1];
                            return c = v.Hooks.cleanRootPropertyValue(g, c),
                                e = c.toString().match(v.RegEx.valueSplit),
                                e[h] = b,
                                f = e.join(" ")
                        }
                        return c
                    }
                },
                Normalizations: {
                    registered: {
                        clip: function(a, b, c) {
                            switch (a) {
                                case "name":
                                    return "clip";
                                case "extract":
                                    var d;
                                    return v.RegEx.wrappedValueAlreadyExtracted.test(c) ? d = c: (d = c.toString().match(v.RegEx.valueUnwrap), d = d ? d[1].replace(/,(\s+)?/g, " ") : c),
                                        d;
                                case "inject":
                                    return "rect(" + c + ")"
                            }
                        },
                        blur: function(a, b, c) {
                            switch (a) {
                                case "name":
                                    return t.State.isFirefox ? "filter": "-webkit-filter";
                                case "extract":
                                    var d = parseFloat(c);
                                    if (!d && 0 !== d) {
                                        var e = c.toString().match(/blur\(([0-9]+[A-z]+)\)/i);
                                        d = e ? e[1] : 0
                                    }
                                    return d;
                                case "inject":
                                    return parseFloat(c) ? "blur(" + c + ")": "none"
                            }
                        },
                        opacity: function(a, b, c) {
                            if (8 >= n) switch (a) {
                                case "name":
                                    return "filter";
                                case "extract":
                                    var d = c.toString().match(/alpha\(opacity=(.*)\)/i);
                                    return c = d ? d[1] / 100 : 1;
                                case "inject":
                                    return b.style.zoom = 1,
                                        parseFloat(c) >= 1 ? "": "alpha(opacity=" + parseInt(100 * parseFloat(c), 10) + ")"
                            } else switch (a) {
                                case "name":
                                    return "opacity";
                                case "extract":
                                    return c;
                                case "inject":
                                    return c
                            }
                        }
                    },
                    register: function() {
                        9 >= n || t.State.isGingerbread || (v.Lists.transformsBase = v.Lists.transformsBase.concat(v.Lists.transforms3D));
                        for (var a = 0; a < v.Lists.transformsBase.length; a++) !
                            function() {
                                var b = v.Lists.transformsBase[a];
                                v.Normalizations.registered[b] = function(a, c, e) {
                                    switch (a) {
                                        case "name":
                                            return "transform";
                                        case "extract":
                                            return g(c) === d || g(c).transformCache[b] === d ? /^scale/i.test(b) ? 1 : 0 : g(c).transformCache[b].replace(/[()]/g, "");
                                        case "inject":
                                            var f = !1;
                                            switch (b.substr(0, b.length - 1)) {
                                                case "translate":
                                                    f = !/(%|px|em|rem|vw|vh|\d)$/i.test(e);
                                                    break;
                                                case "scal":
                                                case "scale":
                                                    t.State.isAndroid && g(c).transformCache[b] === d && 1 > e && (e = 1),
                                                        f = !/(\d)$/i.test(e);
                                                    break;
                                                case "skew":
                                                    f = !/(deg|\d)$/i.test(e);
                                                    break;
                                                case "rotate":
                                                    f = !/(deg|\d)$/i.test(e)
                                            }
                                            return f || (g(c).transformCache[b] = "(" + e + ")"),
                                                g(c).transformCache[b]
                                    }
                                }
                            } ();
                        for (var a = 0; a < v.Lists.colors.length; a++) !
                            function() {
                                var b = v.Lists.colors[a];
                                v.Normalizations.registered[b] = function(a, c, e) {
                                    switch (a) {
                                        case "name":
                                            return b;
                                        case "extract":
                                            var f;
                                            if (v.RegEx.wrappedValueAlreadyExtracted.test(e)) f = e;
                                            else {
                                                var g, h = {
                                                    black: "rgb(0, 0, 0)",
                                                    blue: "rgb(0, 0, 255)",
                                                    gray: "rgb(128, 128, 128)",
                                                    green: "rgb(0, 128, 0)",
                                                    red: "rgb(255, 0, 0)",
                                                    white: "rgb(255, 255, 255)"
                                                };
                                                /^[A-z]+$/i.test(e) ? g = h[e] !== d ? h[e] : h.black: v.RegEx.isHex.test(e) ? g = "rgb(" + v.Values.hexToRgb(e).join(" ") + ")": /^rgba?\(/i.test(e) || (g = h.black),
                                                    f = (g || e).toString().match(v.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g, " ")
                                            }
                                            return 8 >= n || 3 !== f.split(" ").length || (f += " 1"),
                                                f;
                                        case "inject":
                                            return 8 >= n ? 4 === e.split(" ").length && (e = e.split(/\s+/).slice(0, 3).join(" ")) : 3 === e.split(" ").length && (e += " 1"),
                                            (8 >= n ? "rgb": "rgba") + "(" + e.replace(/\s+/g, ",").replace(/\.(\d)+(?=,)/g, "") + ")"
                                    }
                                }
                            } ()
                    }
                },
                Names: {
                    camelCase: function(a) {
                        return a.replace(/-(\w)/g,
                            function(a, b) {
                                return b.toUpperCase()
                            })
                    },
                    SVGAttribute: function(a) {
                        var b = "width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";
                        return (n || t.State.isAndroid && !t.State.isChrome) && (b += "|transform"),
                            new RegExp("^(" + b + ")$", "i").test(a)
                    },
                    prefixCheck: function(a) {
                        if (t.State.prefixMatches[a]) return [t.State.prefixMatches[a], !0];
                        for (var b = ["", "Webkit", "Moz", "ms", "O"], c = 0, d = b.length; d > c; c++) {
                            var e;
                            if (e = 0 === c ? a: b[c] + a.replace(/^\w/,
                                    function(a) {
                                        return a.toUpperCase()
                                    }), p.isString(t.State.prefixElement.style[e])) return t.State.prefixMatches[a] = e,
                                [e, !0]
                        }
                        return [a, !1]
                    }
                },
                Values: {
                    hexToRgb: function(a) {
                        var b, c = /^#?([a-f\d])([a-f\d])([a-f\d])$/i,
                            d = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;
                        return a = a.replace(c,
                            function(a, b, c, d) {
                                return b + b + c + c + d + d
                            }),
                            b = d.exec(a),
                            b ? [parseInt(b[1], 16), parseInt(b[2], 16), parseInt(b[3], 16)] : [0, 0, 0]
                    },
                    isCSSNullValue: function(a) {
                        return 0 == a || /^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(a)
                    },
                    getUnitType: function(a) {
                        return /^(rotate|skew)/i.test(a) ? "deg": /(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(a) ? "": "px"
                    },
                    getDisplayType: function(a) {
                        var b = a && a.tagName.toString().toLowerCase();
                        return /^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(b) ? "inline": /^(li)$/i.test(b) ? "list-item": /^(tr)$/i.test(b) ? "table-row": /^(table)$/i.test(b) ? "table": /^(tbody)$/i.test(b) ? "table-row-group": "block"
                    },
                    addClass: function(a, b) {
                        a.classList ? a.classList.add(b) : a.className += (a.className.length ? " ": "") + b
                    },
                    removeClass: function(a, b) {
                        a.classList ? a.classList.remove(b) : a.className = a.className.toString().replace(new RegExp("(^|\\s)" + b.split(" ").join("|") + "(\\s|$)", "gi"), " ")
                    }
                },
                getPropertyValue: function(a, c, e, f) {
                    function h(a, c) {
                        function e() {
                            j && v.setPropertyValue(a, "display", "none")
                        }
                        var i = 0;
                        if (8 >= n) i = m.css(a, c);
                        else {
                            var j = !1;
                            if (/^(width|height)$/.test(c) && 0 === v.getPropertyValue(a, "display") && (j = !0, v.setPropertyValue(a, "display", v.Values.getDisplayType(a))), !f) {
                                if ("height" === c && "border-box" !== v.getPropertyValue(a, "boxSizing").toString().toLowerCase()) {
                                    var k = a.offsetHeight - (parseFloat(v.getPropertyValue(a, "borderTopWidth")) || 0) - (parseFloat(v.getPropertyValue(a, "borderBottomWidth")) || 0) - (parseFloat(v.getPropertyValue(a, "paddingTop")) || 0) - (parseFloat(v.getPropertyValue(a, "paddingBottom")) || 0);
                                    return e(),
                                        k
                                }
                                if ("width" === c && "border-box" !== v.getPropertyValue(a, "boxSizing").toString().toLowerCase()) {
                                    var l = a.offsetWidth - (parseFloat(v.getPropertyValue(a, "borderLeftWidth")) || 0) - (parseFloat(v.getPropertyValue(a, "borderRightWidth")) || 0) - (parseFloat(v.getPropertyValue(a, "paddingLeft")) || 0) - (parseFloat(v.getPropertyValue(a, "paddingRight")) || 0);
                                    return e(),
                                        l
                                }
                            }
                            var o;
                            o = g(a) === d ? b.getComputedStyle(a, null) : g(a).computedStyle ? g(a).computedStyle: g(a).computedStyle = b.getComputedStyle(a, null),
                            "borderColor" === c && (c = "borderTopColor"),
                                i = 9 === n && "filter" === c ? o.getPropertyValue(c) : o[c],
                            ("" === i || null === i) && (i = a.style[c]),
                                e()
                        }
                        if ("auto" === i && /^(top|right|bottom|left)$/i.test(c)) {
                            var p = h(a, "position"); ("fixed" === p || "absolute" === p && /top|left/i.test(c)) && (i = m(a).position()[c] + "px")
                        }
                        return i
                    }
                    var i;
                    if (v.Hooks.registered[c]) {
                        var j = c,
                            k = v.Hooks.getRoot(j);
                        e === d && (e = v.getPropertyValue(a, v.Names.prefixCheck(k)[0])),
                        v.Normalizations.registered[k] && (e = v.Normalizations.registered[k]("extract", a, e)),
                            i = v.Hooks.extractValue(j, e)
                    } else if (v.Normalizations.registered[c]) {
                        var l, o;
                        l = v.Normalizations.registered[c]("name", a),
                        "transform" !== l && (o = h(a, v.Names.prefixCheck(l)[0]), v.Values.isCSSNullValue(o) && v.Hooks.templates[c] && (o = v.Hooks.templates[c][1])),
                            i = v.Normalizations.registered[c]("extract", a, o)
                    }
                    if (!/^[\d-]/.test(i)) if (g(a) && g(a).isSVG && v.Names.SVGAttribute(c)) if (/^(height|width)$/i.test(c)) try {
                        i = a.getBBox()[c]
                    } catch(p) {
                        i = 0
                    } else i = a.getAttribute(c);
                    else i = h(a, v.Names.prefixCheck(c)[0]);
                    return v.Values.isCSSNullValue(i) && (i = 0),
                    t.debug >= 2 && console.log("Get " + c + ": " + i),
                        i
                },
                setPropertyValue: function(a, c, d, e, f) {
                    var h = c;
                    if ("scroll" === c) f.container ? f.container["scroll" + f.direction] = d: "Left" === f.direction ? b.scrollTo(d, f.alternateValue) : b.scrollTo(f.alternateValue, d);
                    else if (v.Normalizations.registered[c] && "transform" === v.Normalizations.registered[c]("name", a)) v.Normalizations.registered[c]("inject", a, d),
                        h = "transform",
                        d = g(a).transformCache[c];
                    else {
                        if (v.Hooks.registered[c]) {
                            var i = c,
                                j = v.Hooks.getRoot(c);
                            e = e || v.getPropertyValue(a, j),
                                d = v.Hooks.injectValue(i, d, e),
                                c = j
                        }
                        if (v.Normalizations.registered[c] && (d = v.Normalizations.registered[c]("inject", a, d), c = v.Normalizations.registered[c]("name", a)), h = v.Names.prefixCheck(c)[0], 8 >= n) try {
                            a.style[h] = d
                        } catch(k) {
                            t.debug && console.log("Browser does not support [" + d + "] for [" + h + "]")
                        } else g(a) && g(a).isSVG && v.Names.SVGAttribute(c) ? a.setAttribute(c, d) : a.style[h] = d;
                        t.debug >= 2 && console.log("Set " + c + " (" + h + "): " + d)
                    }
                    return [h, d]
                },
                flushTransformCache: function(a) {
                    function b(b) {
                        return parseFloat(v.getPropertyValue(a, b))
                    }
                    var c = "";
                    if ((n || t.State.isAndroid && !t.State.isChrome) && g(a).isSVG) {
                        var d = {
                            translate: [b("translateX"), b("translateY")],
                            skewX: [b("skewX")],
                            skewY: [b("skewY")],
                            scale: 1 !== b("scale") ? [b("scale"), b("scale")] : [b("scaleX"), b("scaleY")],
                            rotate: [b("rotateZ"), 0, 0]
                        };
                        m.each(g(a).transformCache,
                            function(a) { / ^translate / i.test(a) ? a = "translate": /^scale/i.test(a) ? a = "scale": /^rotate/i.test(a) && (a = "rotate"),
                            d[a] && (c += a + "(" + d[a].join(" ") + ") ", delete d[a])
                            })
                    } else {
                        var e, f;
                        m.each(g(a).transformCache,
                            function(b) {
                                return e = g(a).transformCache[b],
                                    "transformPerspective" === b ? (f = e, !0) : (9 === n && "rotateZ" === b && (b = "rotate"), void(c += b + e + " "))
                            }),
                        f && (c = "perspective" + f + " " + c)
                    }
                    v.setPropertyValue(a, "transform", c)
                }
            };
            v.Hooks.register(),
                v.Normalizations.register(),
                t.hook = function(a, b, c) {
                    var e = d;
                    return a = f(a),
                        m.each(a,
                            function(a, f) {
                                if (g(f) === d && t.init(f), c === d) e === d && (e = t.CSS.getPropertyValue(f, b));
                                else {
                                    var h = t.CSS.setPropertyValue(f, b, c);
                                    "transform" === h[0] && t.CSS.flushTransformCache(f),
                                        e = h
                                }
                            }),
                        e
                };
            var w = function() {
                function a() {
                    return h ? B.promise || null: i
                }
                function e() {
                    function a() {
                        function a(a, b) {
                            var c = d,
                                e = d,
                                g = d;
                            return p.isArray(a) ? (c = a[0], !p.isArray(a[1]) && /^[\d-]/.test(a[1]) || p.isFunction(a[1]) || v.RegEx.isHex.test(a[1]) ? g = a[1] : (p.isString(a[1]) && !v.RegEx.isHex.test(a[1]) || p.isArray(a[1])) && (e = b ? a[1] : j(a[1], h.duration), a[2] !== d && (g = a[2]))) : c = a,
                            b || (e = e || h.easing),
                            p.isFunction(c) && (c = c.call(f, y, x)),
                            p.isFunction(g) && (g = g.call(f, y, x)),
                                [c || 0, e, g]
                        }
                        function l(a, b) {
                            var c, d;
                            return d = (b || "0").toString().toLowerCase().replace(/[%A-z]+$/,
                                function(a) {
                                    return c = a,
                                        ""
                                }),
                            c || (c = v.Values.getUnitType(a)),
                                [d, c]
                        }
                        function n() {
                            var a = {
                                    myParent: f.parentNode || c.body,
                                    position: v.getPropertyValue(f, "position"),
                                    fontSize: v.getPropertyValue(f, "fontSize")
                                },
                                d = a.position === I.lastPosition && a.myParent === I.lastParent,
                                e = a.fontSize === I.lastFontSize;
                            I.lastParent = a.myParent,
                                I.lastPosition = a.position,
                                I.lastFontSize = a.fontSize;
                            var h = 100,
                                i = {};
                            if (e && d) i.emToPx = I.lastEmToPx,
                                i.percentToPxWidth = I.lastPercentToPxWidth,
                                i.percentToPxHeight = I.lastPercentToPxHeight;
                            else {
                                var j = g(f).isSVG ? c.createElementNS("http://www.w3.org/2000/svg", "rect") : c.createElement("div");
                                t.init(j),
                                    a.myParent.appendChild(j),
                                    m.each(["overflow", "overflowX", "overflowY"],
                                        function(a, b) {
                                            t.CSS.setPropertyValue(j, b, "hidden")
                                        }),
                                    t.CSS.setPropertyValue(j, "position", a.position),
                                    t.CSS.setPropertyValue(j, "fontSize", a.fontSize),
                                    t.CSS.setPropertyValue(j, "boxSizing", "content-box"),
                                    m.each(["minWidth", "maxWidth", "width", "minHeight", "maxHeight", "height"],
                                        function(a, b) {
                                            t.CSS.setPropertyValue(j, b, h + "%")
                                        }),
                                    t.CSS.setPropertyValue(j, "paddingLeft", h + "em"),
                                    i.percentToPxWidth = I.lastPercentToPxWidth = (parseFloat(v.getPropertyValue(j, "width", null, !0)) || 1) / h,
                                    i.percentToPxHeight = I.lastPercentToPxHeight = (parseFloat(v.getPropertyValue(j, "height", null, !0)) || 1) / h,
                                    i.emToPx = I.lastEmToPx = (parseFloat(v.getPropertyValue(j, "paddingLeft")) || 1) / h,
                                    a.myParent.removeChild(j)
                            }
                            return null === I.remToPx && (I.remToPx = parseFloat(v.getPropertyValue(c.body, "fontSize")) || 16),
                            null === I.vwToPx && (I.vwToPx = parseFloat(b.innerWidth) / 100, I.vhToPx = parseFloat(b.innerHeight) / 100),
                                i.remToPx = I.remToPx,
                                i.vwToPx = I.vwToPx,
                                i.vhToPx = I.vhToPx,
                            t.debug >= 1 && console.log("Unit ratios: " + JSON.stringify(i), f),
                                i
                        }
                        if (h.begin && 0 === y) try {
                            h.begin.call(o, o)
                        } catch(r) {
                            setTimeout(function() {
                                    throw r
                                },
                                1)
                        }
                        if ("scroll" === C) {
                            var u, w, z, A = /^x$/i.test(h.axis) ? "Left": "Top",
                                D = parseFloat(h.offset) || 0;
                            h.container ? p.isWrapped(h.container) || p.isNode(h.container) ? (h.container = h.container[0] || h.container, u = h.container["scroll" + A], z = u + m(f).position()[A.toLowerCase()] + D) : h.container = null: (u = t.State.scrollAnchor[t.State["scrollProperty" + A]], w = t.State.scrollAnchor[t.State["scrollProperty" + ("Left" === A ? "Top": "Left")]], z = m(f).offset()[A.toLowerCase()] + D),
                                i = {
                                    scroll: {
                                        rootPropertyValue: !1,
                                        startValue: u,
                                        currentValue: u,
                                        endValue: z,
                                        unitType: "",
                                        easing: h.easing,
                                        scrollData: {
                                            container: h.container,
                                            direction: A,
                                            alternateValue: w
                                        }
                                    },
                                    element: f
                                },
                            t.debug && console.log("tweensContainer (scroll): ", i.scroll, f)
                        } else if ("reverse" === C) {
                            if (!g(f).tweensContainer) return void m.dequeue(f, h.queue);
                            "none" === g(f).opts.display && (g(f).opts.display = "auto"),
                            "hidden" === g(f).opts.visibility && (g(f).opts.visibility = "visible"),
                                g(f).opts.loop = !1,
                                g(f).opts.begin = null,
                                g(f).opts.complete = null,
                            s.easing || delete h.easing,
                            s.duration || delete h.duration,
                                h = m.extend({},
                                    g(f).opts, h);
                            var E = m.extend(!0, {},
                                g(f).tweensContainer);
                            for (var F in E) if ("element" !== F) {
                                var G = E[F].startValue;
                                E[F].startValue = E[F].currentValue = E[F].endValue,
                                    E[F].endValue = G,
                                p.isEmptyObject(s) || (E[F].easing = h.easing),
                                t.debug && console.log("reverse tweensContainer (" + F + "): " + JSON.stringify(E[F]), f)
                            }
                            i = E
                        } else if ("start" === C) {
                            var E;
                            g(f).tweensContainer && g(f).isAnimating === !0 && (E = g(f).tweensContainer),
                                m.each(q,
                                    function(b, c) {
                                        if (RegExp("^" + v.Lists.colors.join("$|^") + "$").test(b)) {
                                            var e = a(c, !0),
                                                f = e[0],
                                                g = e[1],
                                                h = e[2];
                                            if (v.RegEx.isHex.test(f)) {
                                                for (var i = ["Red", "Green", "Blue"], j = v.Values.hexToRgb(f), k = h ? v.Values.hexToRgb(h) : d, l = 0; l < i.length; l++) {
                                                    var m = [j[l]];
                                                    g && m.push(g),
                                                    k !== d && m.push(k[l]),
                                                        q[b + i[l]] = m
                                                }
                                                delete q[b]
                                            }
                                        }
                                    });
                            for (var H in q) {
                                var K = a(q[H]),
                                    L = K[0],
                                    M = K[1],
                                    N = K[2];
                                H = v.Names.camelCase(H);
                                var O = v.Hooks.getRoot(H),
                                    P = !1;
                                if (g(f).isSVG || "tween" === O || v.Names.prefixCheck(O)[1] !== !1 || v.Normalizations.registered[O] !== d) { (h.display !== d && null !== h.display && "none" !== h.display || h.visibility !== d && "hidden" !== h.visibility) && /opacity|filter/.test(H) && !N && 0 !== L && (N = 0),
                                    h._cacheValues && E && E[H] ? (N === d && (N = E[H].endValue + E[H].unitType), P = g(f).rootPropertyValueCache[O]) : v.Hooks.registered[H] ? N === d ? (P = v.getPropertyValue(f, O), N = v.getPropertyValue(f, H, P)) : P = v.Hooks.templates[O][1] : N === d && (N = v.getPropertyValue(f, H));
                                    var Q, R, S, T = !1;
                                    if (Q = l(H, N), N = Q[0], S = Q[1], Q = l(H, L), L = Q[0].replace(/^([+-\/*])=/,
                                            function(a, b) {
                                                return T = b,
                                                    ""
                                            }), R = Q[1], N = parseFloat(N) || 0, L = parseFloat(L) || 0, "%" === R && (/^(fontSize|lineHeight)$/.test(H) ? (L /= 100, R = "em") : /^scale/.test(H) ? (L /= 100, R = "") : /(Red|Green|Blue)$/i.test(H) && (L = L / 100 * 255, R = "")), /[\/*]/.test(T)) R = S;
                                    else if (S !== R && 0 !== N) if (0 === L) R = S;
                                    else {
                                        e = e || n();
                                        var U = /margin|padding|left|right|width|text|word|letter/i.test(H) || /X$/.test(H) || "x" === H ? "x": "y";
                                        switch (S) {
                                            case "%":
                                                N *= "x" === U ? e.percentToPxWidth: e.percentToPxHeight;
                                                break;
                                            case "px":
                                                break;
                                            default:
                                                N *= e[S + "ToPx"]
                                        }
                                        switch (R) {
                                            case "%":
                                                N *= 1 / ("x" === U ? e.percentToPxWidth: e.percentToPxHeight);
                                                break;
                                            case "px":
                                                break;
                                            default:
                                                N *= 1 / e[R + "ToPx"]
                                        }
                                    }
                                    switch (T) {
                                        case "+":
                                            L = N + L;
                                            break;
                                        case "-":
                                            L = N - L;
                                            break;
                                        case "*":
                                            L = N * L;
                                            break;
                                        case "/":
                                            L = N / L
                                    }
                                    i[H] = {
                                        rootPropertyValue: P,
                                        startValue: N,
                                        currentValue: N,
                                        endValue: L,
                                        unitType: R,
                                        easing: M
                                    },
                                    t.debug && console.log("tweensContainer (" + H + "): " + JSON.stringify(i[H]), f)
                                } else t.debug && console.log("Skipping [" + O + "] due to a lack of browser support.")
                            }
                            i.element = f
                        }
                        i.element && (v.Values.addClass(f, "velocity-animating"), J.push(i), "" === h.queue && (g(f).tweensContainer = i, g(f).opts = h), g(f).isAnimating = !0, y === x - 1 ? (t.State.calls.push([J, o, h, null, B.resolver]), t.State.isTicking === !1 && (t.State.isTicking = !0, k())) : y++)
                    }
                    var e, f = this,
                        h = m.extend({},
                            t.defaults, s),
                        i = {};
                    switch (g(f) === d && t.init(f), parseFloat(h.delay) && h.queue !== !1 && m.queue(f, h.queue,
                        function(a) {
                            t.velocityQueueEntryFlag = !0,
                                g(f).delayTimer = {
                                    setTimeout: setTimeout(a, parseFloat(h.delay)),
                                    next: a
                                }
                        }), h.duration.toString().toLowerCase()) {
                        case "fast":
                            h.duration = 200;
                            break;
                        case "normal":
                            h.duration = r;
                            break;
                        case "slow":
                            h.duration = 600;
                            break;
                        default:
                            h.duration = parseFloat(h.duration) || 1
                    }
                    t.mock !== !1 && (t.mock === !0 ? h.duration = h.delay = 1 : (h.duration *= parseFloat(t.mock) || 1, h.delay *= parseFloat(t.mock) || 1)),
                        h.easing = j(h.easing, h.duration),
                    h.begin && !p.isFunction(h.begin) && (h.begin = null),
                    h.progress && !p.isFunction(h.progress) && (h.progress = null),
                    h.complete && !p.isFunction(h.complete) && (h.complete = null),
                    h.display !== d && null !== h.display && (h.display = h.display.toString().toLowerCase(), "auto" === h.display && (h.display = t.CSS.Values.getDisplayType(f))),
                    h.visibility !== d && null !== h.visibility && (h.visibility = h.visibility.toString().toLowerCase()),
                        h.mobileHA = h.mobileHA && t.State.isMobile && !t.State.isGingerbread,
                        h.queue === !1 ? h.delay ? setTimeout(a, h.delay) : a() : m.queue(f, h.queue,
                            function(b, c) {
                                return c === !0 ? (B.promise && B.resolver(o), !0) : (t.velocityQueueEntryFlag = !0, void a(b))
                            }),
                    "" !== h.queue && "fx" !== h.queue || "inprogress" === m.queue(f)[0] || m.dequeue(f)
                }
                var h, i, n, o, q, s, u = arguments[0] && (arguments[0].p || m.isPlainObject(arguments[0].properties) && !arguments[0].properties.names || p.isString(arguments[0].properties));
                if (p.isWrapped(this) ? (h = !1, n = 0, o = this, i = this) : (h = !0, n = 1, o = u ? arguments[0].elements || arguments[0].e: arguments[0]), o = f(o)) {
                    u ? (q = arguments[0].properties || arguments[0].p, s = arguments[0].options || arguments[0].o) : (q = arguments[n], s = arguments[n + 1]);
                    var x = o.length,
                        y = 0;
                    if (!/^(stop|finish|finishAll)$/i.test(q) && !m.isPlainObject(s)) {
                        var z = n + 1;
                        s = {};
                        for (var A = z; A < arguments.length; A++) p.isArray(arguments[A]) || !/^(fast|normal|slow)$/i.test(arguments[A]) && !/^\d/.test(arguments[A]) ? p.isString(arguments[A]) || p.isArray(arguments[A]) ? s.easing = arguments[A] : p.isFunction(arguments[A]) && (s.complete = arguments[A]) : s.duration = arguments[A]
                    }
                    var B = {
                        promise: null,
                        resolver: null,
                        rejecter: null
                    };
                    h && t.Promise && (B.promise = new t.Promise(function(a, b) {
                        B.resolver = a,
                            B.rejecter = b
                    }));
                    var C;
                    switch (q) {
                        case "scroll":
                            C = "scroll";
                            break;
                        case "reverse":
                            C = "reverse";
                            break;
                        case "finish":
                        case "finishAll":
                        case "stop":
                            m.each(o,
                                function(a, b) {
                                    g(b) && g(b).delayTimer && (clearTimeout(g(b).delayTimer.setTimeout), g(b).delayTimer.next && g(b).delayTimer.next(), delete g(b).delayTimer),
                                    "finishAll" !== q || s !== !0 && !p.isString(s) || (m.each(m.queue(b, p.isString(s) ? s: ""),
                                        function(a, b) {
                                            p.isFunction(b) && b()
                                        }), m.queue(b, p.isString(s) ? s: "", []))
                                });
                            var D = [];
                            return m.each(t.State.calls,
                                function(a, b) {
                                    b && m.each(b[1],
                                        function(c, e) {
                                            var f = s === d ? "": s;
                                            return f === !0 || b[2].queue === f || s === d && b[2].queue === !1 ? void m.each(o,
                                                function(c, d) {
                                                    d === e && ((s === !0 || p.isString(s)) && (m.each(m.queue(d, p.isString(s) ? s: ""),
                                                        function(a, b) {
                                                            p.isFunction(b) && b(null, !0)
                                                        }), m.queue(d, p.isString(s) ? s: "", [])), "stop" === q ? (g(d) && g(d).tweensContainer && f !== !1 && m.each(g(d).tweensContainer,
                                                        function(a, b) {
                                                            b.endValue = b.currentValue
                                                        }), D.push(a)) : ("finish" === q || "finishAll" === q) && (b[2].duration = 1))
                                                }) : !0
                                        })
                                }),
                            "stop" === q && (m.each(D,
                                function(a, b) {
                                    l(b, !0)
                                }), B.promise && B.resolver(o)),
                                a();
                        default:
                            if (!m.isPlainObject(q) || p.isEmptyObject(q)) {
                                if (p.isString(q) && t.Redirects[q]) {
                                    var E = m.extend({},
                                        s),
                                        F = E.duration,
                                        G = E.delay || 0;
                                    return E.backwards === !0 && (o = m.extend(!0, [], o).reverse()),
                                        m.each(o,
                                            function(a, b) {
                                                parseFloat(E.stagger) ? E.delay = G + parseFloat(E.stagger) * a: p.isFunction(E.stagger) && (E.delay = G + E.stagger.call(b, a, x)),
                                                E.drag && (E.duration = parseFloat(F) || (/^(callout|transition)/.test(q) ? 1e3: r), E.duration = Math.max(E.duration * (E.backwards ? 1 - a / x: (a + 1) / x), .75 * E.duration, 200)),
                                                    t.Redirects[q].call(b, b, E || {},
                                                        a, x, o, B.promise ? B: d)
                                            }),
                                        a()
                                }
                                var H = "Velocity: First argument (" + q + ") was not a property map, a known action, or a registered redirect. Aborting.";
                                return B.promise ? B.rejecter(new Error(H)) : console.log(H),
                                    a()
                            }
                            C = "start"
                    }
                    var I = {
                            lastParent: null,
                            lastPosition: null,
                            lastFontSize: null,
                            lastPercentToPxWidth: null,
                            lastPercentToPxHeight: null,
                            lastEmToPx: null,
                            remToPx: null,
                            vwToPx: null,
                            vhToPx: null
                        },
                        J = [];
                    m.each(o,
                        function(a, b) {
                            p.isNode(b) && e.call(b)
                        });
                    var K, E = m.extend({},
                        t.defaults, s);
                    if (E.loop = parseInt(E.loop), K = 2 * E.loop - 1, E.loop) for (var L = 0; K > L; L++) {
                        var M = {
                            delay: E.delay,
                            progress: E.progress
                        };
                        L === K - 1 && (M.display = E.display, M.visibility = E.visibility, M.complete = E.complete),
                            w(o, "reverse", M)
                    }
                    return a()
                }
            };
            t = m.extend(w, t),
                t.animate = w;
            var x = b.requestAnimationFrame || o;
            return t.State.isMobile || c.hidden === d || c.addEventListener("visibilitychange",
                function() {
                    c.hidden ? (x = function(a) {
                        return setTimeout(function() {
                                a(!0)
                            },
                            16)
                    },
                        k()) : x = b.requestAnimationFrame || o
                }),
                a.Velocity = t,
            a !== b && (a.fn.velocity = w, a.fn.velocity.defaults = t.defaults),
                m.each(["Down", "Up"],
                    function(a, b) {
                        t.Redirects["slide" + b] = function(a, c, e, f, g, h) {
                            var i = m.extend({},
                                c),
                                j = i.begin,
                                k = i.complete,
                                l = {
                                    height: "",
                                    marginTop: "",
                                    marginBottom: "",
                                    paddingTop: "",
                                    paddingBottom: ""
                                },
                                n = {};
                            i.display === d && (i.display = "Down" === b ? "inline" === t.CSS.Values.getDisplayType(a) ? "inline-block": "block": "none"),
                                i.begin = function() {
                                    j && j.call(g, g);
                                    for (var c in l) {
                                        n[c] = a.style[c];
                                        var d = t.CSS.getPropertyValue(a, c);
                                        l[c] = "Down" === b ? [d, 0] : [0, d]
                                    }
                                    n.overflow = a.style.overflow,
                                        a.style.overflow = "hidden"
                                },
                                i.complete = function() {
                                    for (var b in n) a.style[b] = n[b];
                                    k && k.call(g, g),
                                    h && h.resolver(g)
                                },
                                t(a, l, i)
                        }
                    }),
                m.each(["In", "Out"],
                    function(a, b) {
                        t.Redirects["fade" + b] = function(a, c, e, f, g, h) {
                            var i = m.extend({},
                                c),
                                j = {
                                    opacity: "In" === b ? 1 : 0
                                },
                                k = i.complete;
                            i.complete = e !== f - 1 ? i.begin = null: function() {
                                k && k.call(g, g),
                                h && h.resolver(g)
                            },
                            i.display === d && (i.display = "In" === b ? "auto": "none"),
                                t(this, j, i)
                        }
                    }),
                t
        } (window.jQuery || window.Zepto || window, window, document)
    }); !
    function(i) {
        "use strict";
        "function" == typeof define && define.amd ? define(["jquery"], i) : "undefined" != typeof exports ? module.exports = i(require("jquery")) : i(jQuery)
    } (function(i) {
        "use strict";
        var e = window.Slick || {};
        e = function() {
            function e(e, s) {
                var o, n = this;
                n.defaults = {
                    enableAnchor: !1,
                    accessibility: !0,
                    adaptiveHeight: !1,
                    appendArrows: i(e).closest(".container"),
                    appendDots: i(e).closest(".container"),
                    searchForLinks: i(e).closest(".container"),
                    arrows: !0,
                    arrowsPlain: !1,
                    asNavFor: null,
                    prevArrow: '<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button"><span class="icon-left-carat slick-arrow__icon"></span></button>',
                    nextArrow: '<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button"><span class="icon-right-carat slick-arrow__icon"></span></button>',
                    autoplay: !1,
                    autoplaySpeed: 3e3,
                    centerMode: !1,
                    centerPadding: "50px",
                    cssEase: "ease-out",
                    customPaging: function(i, e) {
                        return '<button type="button" data-role="none" role="button" aria-required="false" tabindex="0">' + (e + 1) + "</button>"
                    },
                    dots: !1,
                    dotsClass: "slick-dots",
                    links: !1,
                    linkClass: "slick-links",
                    draggable: !0,
                    easing: "ease-out",
                    edgeFriction: .35,
                    fade: !1,
                    focusOnSelect: !1,
                    infinite: !0,
                    initialSlide: 0,
                    lazyLoad: "ondemand",
                    mobileFirst: !1,
                    pauseOnHover: !0,
                    pauseOnDotsHover: !1,
                    respondTo: "window",
                    responsive: null,
                    rows: 1,
                    rtl: !1,
                    slide: "",
                    slidesPerRow: 1,
                    slidesToShow: 1,
                    slidesToScroll: 1,
                    speed: 1e3,
                    swipe: !0,
                    swipeToSlide: !1,
                    touchMove: !0,
                    touchThreshold: 5,
                    useCSS: !0,
                    useTransform: !1,
                    variableWidth: !1,
                    vertical: !1,
                    verticalSwiping: !1,
                    waitForAnimate: !0,
                    zIndex: 1e3,
                    shiftAnimate: !1,
                    shiftPecentage: .5,
                    scaleAnimate: !1,
                    setClassToContainer: !1,
                    mixMode: []
                },
                    n.initials = {
                        $ele: i(e),
                        animating: !1,
                        dragging: !1,
                        autoPlayTimer: null,
                        currentDirection: 0,
                        currentLeft: null,
                        currentSlide: 0,
                        direction: 1,
                        $dots: null,
                        $links: null,
                        listWidth: null,
                        listHeight: null,
                        loadIndex: 0,
                        $nextArrow: null,
                        $prevArrow: null,
                        slideCount: null,
                        slideWidth: null,
                        $slideTrack: null,
                        $slides: null,
                        sliding: !1,
                        slideOffset: 0,
                        swipeLeft: null,
                        $list: null,
                        touchObject: {},
                        transformsEnabled: !1,
                        unslicked: !1
                    },
                    i.extend(n, n.initials),
                    n.activeBreakpoint = null,
                    n.animType = null,
                    n.animProp = null,
                    n.breakpoints = [],
                    n.breakpointSettings = [],
                    n.cssTransitions = !1,
                    n.hidden = "hidden",
                    n.paused = !1,
                    n.positionProp = null,
                    n.respondTo = null,
                    n.rowCount = 1,
                    n.shouldClick = !0,
                    n.$slider = i(e),
                    n.$slidesCache = null,
                    n.transformType = null,
                    n.transitionType = null,
                    n.visibilityChange = "visibilitychange",
                    n.windowWidth = 0,
                    n.windowTimer = null,
                    o = i(e).data("slick") || {},
                    n.options = i.extend({},
                        n.defaults, o, s),
                    n.currentSlide = n.options.initialSlide,
                    n.originalSettings = n.options,
                    "undefined" != typeof document.mozHidden ? (n.hidden = "mozHidden", n.visibilityChange = "mozvisibilitychange") : "undefined" != typeof document.webkitHidden && (n.hidden = "webkitHidden", n.visibilityChange = "webkitvisibilitychange"),
                    n.autoPlay = i.proxy(n.autoPlay, n),
                    n.autoPlayClear = i.proxy(n.autoPlayClear, n),
                    n.changeSlide = i.proxy(n.changeSlide, n),
                    n.clickHandler = i.proxy(n.clickHandler, n),
                    n.selectHandler = i.proxy(n.selectHandler, n),
                    n.setPosition = i.proxy(n.setPosition, n),
                    n.swipeHandler = i.proxy(n.swipeHandler, n),
                    n.dragHandler = i.proxy(n.dragHandler, n),
                    n.keyHandler = i.proxy(n.keyHandler, n),
                    n.autoPlayIterator = i.proxy(n.autoPlayIterator, n),
                    n.instanceUid = t++,
                    n.htmlExpr = /^(?:\s*(<[\w\W]+>)[^>]*)$/,
                    n.registerBreakpoints(),
                    n.init(!0),
                    n.checkResponsive(!0)
            }
            var t = 0;
            return e
        } (),
            e.prototype.addSlide = e.prototype.slickAdd = function(e, t, s) {
                var o = this;
                if ("boolean" == typeof t) s = t,
                    t = null;
                else if (0 > t || t >= o.slideCount) return ! 1;
                o.unload(),
                    "number" == typeof t ? 0 === t && 0 === o.$slides.length ? i(e).appendTo(o.$slideTrack) : s ? i(e).insertBefore(o.$slides.eq(t)) : i(e).insertAfter(o.$slides.eq(t)) : s === !0 ? i(e).prependTo(o.$slideTrack) : i(e).appendTo(o.$slideTrack),
                    o.$slides = o.$slideTrack.children(this.options.slide),
                    o.$slideTrack.children(this.options.slide).detach(),
                    o.$slideTrack.append(o.$slides),
                    o.$slides.each(function(e, t) {
                        i(t).attr("data-slick-index", e)
                    }),
                    o.$slidesCache = o.$slides,
                    o.reinit()
            },
            e.prototype.animateHeight = function() {
                var i = this;
                if (1 === i.options.slidesToShow && i.options.adaptiveHeight === !0 && i.options.vertical === !1) {
                    var e = i.$slides.eq(i.currentSlide).outerHeight(!0);
                    i.$list.velocity({
                            height: e
                        },
                        i.options.speed)
                }
            },
            e.prototype.animateSlide = function(e, t) {
                var s = {},
                    o = this;
                o.animateHeight(),
                o.options.rtl === !0 && o.options.vertical === !1 && (e = -e),
                    o.transformsEnabled === !1 ? o.options.vertical === !1 ? o.$slideTrack.velocity({
                            left: e
                        },
                        o.options.speed, o.options.easing, t) : o.$slideTrack.velocity({
                            top: e
                        },
                        o.options.speed, o.options.easing, t) : o.cssTransitions === !1 ? (o.options.rtl === !0 && (o.currentLeft = -o.currentLeft), i({
                        animStart: o.currentLeft
                    }).animate({
                            animStart: e
                        },
                        {
                            duration: o.options.speed,
                            easing: o.options.easing,
                            step: function(i) {
                                i = Math.ceil(i),
                                    o.options.vertical === !1 ? (s[o.animType] = "translate(" + i + "px, 0px)", o.$slideTrack.css(s)) : (s[o.animType] = "translate(0px," + i + "px)", o.$slideTrack.css(s))
                            },
                            complete: function() {
                                t && t.call()
                            }
                        })) : (o.applyTransition(), e = Math.ceil(e), s[o.animType] = o.options.vertical === !1 ? "translate3d(" + e + "px, 0px, 0px)": "translate3d(0px," + e + "px, 0px)", o.$slideTrack.css(s), t && setTimeout(function() {
                            o.disableTransition(),
                                t.call()
                        },
                        o.options.speed))
            },
            e.prototype.asNavFor = function(e) {
                var t = this,
                    s = t.options.asNavFor;
                s && null !== s && (s = i(s).not(t.$slider)),
                null !== s && "object" == typeof s && s.each(function() {
                    var t = i(this).slick("getSlick");
                    t.unslicked || t.slideHandler(e, !0)
                })
            },
            e.prototype.applyTransition = function(i, e) {
                var t = this,
                    s = {};
                e = e || t.options.speed,
                    s[t.transitionType] = t.options.fade === !1 ? t.transformType + " " + t.options.speed + "ms " + t.options.cssEase: "opacity " + e + "ms " + t.options.cssEase,
                    t.options.fade === !1 ? t.$slideTrack.css(s) : t.$slides.eq(i).css(s)
            },
            e.prototype.autoPlay = function() {
                var i = this;
                i.autoPlayTimer && clearInterval(i.autoPlayTimer),
                i.slideCount > i.options.slidesToShow && i.paused !== !0 && (i.autoPlayTimer = setInterval(i.autoPlayIterator, i.options.autoplaySpeed))
            },
            e.prototype.autoPlayClear = function() {
                var i = this;
                i.autoPlayTimer && clearInterval(i.autoPlayTimer)
            },
            e.prototype.autoPlayIterator = function() {
                var i = this;
                i.options.infinite === !1 ? 1 === i.direction ? (i.currentSlide + 1 === i.slideCount - 1 && (i.direction = 0), i.slideHandler(i.currentSlide + i.options.slidesToScroll)) : (i.currentSlide - 1 === 0 && (i.direction = 1), i.slideHandler(i.currentSlide - i.options.slidesToScroll)) : i.slideHandler(i.currentSlide + i.options.slidesToScroll)
            },
            e.prototype.buildArrows = function() {
                var e = this;
                e.options.arrows === !0 && (e.$prevArrow = i(e.options.prevArrow).addClass("slick-arrow"), e.$nextArrow = i(e.options.nextArrow).addClass("slick-arrow"), e.options.arrowsPlain === !0 && (e.$prevArrow.addClass("slick-arrow--plain"), e.$nextArrow.addClass("slick-arrow--plain")), e.slideCount > e.options.slidesToShow ? (e.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"), e.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"), e.htmlExpr.test(e.options.prevArrow) && e.$prevArrow.prependTo(e.options.appendArrows), e.htmlExpr.test(e.options.nextArrow) && e.$nextArrow.appendTo(e.options.appendArrows), e.options.infinite !== !0 && e.$prevArrow.addClass("slick-disabled").attr("aria-disabled", "true")) : e.$prevArrow.add(e.$nextArrow).addClass("slick-hidden").attr({
                    "aria-disabled": "true",
                    tabindex: "-1"
                }))
            },
            e.prototype.buildDots = function() {
                var e, t, s = this;
                if (s.options.dots === !0 && s.slideCount > s.options.slidesToShow) {
                    for (t = '<ul class="' + s.options.dotsClass + '">', e = 0; e <= s.getDotCount(); e += 1) t += "<li>" + s.options.customPaging.call(this, s, e) + "</li>";
                    t += "</ul>",
                        s.$dots = i(t).appendTo(s.options.appendDots),
                        s.$dots.find("li").first().addClass("slick-active").attr("aria-hidden", "false")
                }
            },
            e.prototype.buildLinks = function() {
                var i = this;
                i.options.links === !0 && i.slideCount >= i.options.slidesToShow && (i.$links = i.options.searchForLinks.find("." + i.options.linkClass))
            },
            e.prototype.buildOut = function() {
                var e = this;
                e.$slides = e.$slider.children(e.options.slide + ":not(.slick-cloned)").addClass("slick-slide"),
                    e.slideCount = e.$slides.length;
                var t = 0;
                e.$slides.each(function(s, o) {
                    i(o).attr("data-slick-index", s).data("originalStyling", i(o).attr("style") || ""),
                    e.options.shiftAnimate === !0 && (e.options.mixMode.length > 0 ? i(e.$slides[s]).attr("data-class") === e.options.mixMode[0] && i(e.$slides[s - 1]).attr("data-class") === e.options.mixMode[0] ? (t += 100 * e.options.shiftPecentage, i(o).css({
                        transform: "translateX(-" + t + "%)"
                    })) : (t += 0, i(o).css({
                        transform: "translateX(-" + t + "%)"
                    })) : (t = 100 * s * e.options.shiftPecentage, i(o).css({
                        transform: "translateX(-" + t + "%)"
                    })))
                }),
                    e.$slider.addClass("slick-slider"),
                    e.$slideTrack = 0 === e.slideCount ? i('<div class="slick-track"/>').appendTo(e.$slider) : e.$slides.wrapAll('<div class="slick-track"/>').parent(),
                    e.$list = e.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),
                    e.$slideTrack.css("opacity", 0),
                (e.options.centerMode === !0 || e.options.swipeToSlide === !0) && (e.options.slidesToScroll = 1),
                    i("img[data-lazy]", e.$slider).not("[src]").addClass("slick-loading"),
                    e.setupInfinite(),
                    e.buildArrows(),
                    e.buildDots(),
                    e.buildLinks(),
                    e.updateDots(),
                    e.updateLinks(),
                    e.setSlideClasses("number" == typeof e.currentSlide ? e.currentSlide: 0),
                e.options.draggable === !0 && e.$list.addClass("draggable")
            },
            e.prototype.buildRows = function() {
                var i, e, t, s, o, n, l, r = this;
                if (s = document.createDocumentFragment(), n = r.$slider.children(), r.options.rows > 1) {
                    for (l = r.options.slidesPerRow * r.options.rows, o = Math.ceil(n.length / l), i = 0; o > i; i++) {
                        var a = document.createElement("div");
                        for (e = 0; e < r.options.rows; e++) {
                            var d = document.createElement("div");
                            for (t = 0; t < r.options.slidesPerRow; t++) {
                                var c = i * l + (e * r.options.slidesPerRow + t);
                                n.get(c) && d.appendChild(n.get(c))
                            }
                            a.appendChild(d)
                        }
                        s.appendChild(a)
                    }
                    r.$slider.html(s),
                        r.$slider.children().children().children().css({
                            width: 100 / r.options.slidesPerRow + "%",
                            display: "inline-block"
                        })
                }
            },
            e.prototype.checkResponsive = function(e, t) {
                var s, o, n, l = this,
                    r = !1,
                    a = l.$slider.width(),
                    d = window.innerWidth || i(window).width();
                if ("window" === l.respondTo ? n = d: "slider" === l.respondTo ? n = a: "min" === l.respondTo && (n = Math.min(d, a)), l.options.responsive && l.options.responsive.length && null !== l.options.responsive) {
                    o = null;
                    for (s in l.breakpoints) l.breakpoints.hasOwnProperty(s) && (l.originalSettings.mobileFirst === !1 ? n < l.breakpoints[s] && (o = l.breakpoints[s]) : n > l.breakpoints[s] && (o = l.breakpoints[s]));
                    null !== o ? null !== l.activeBreakpoint ? (o !== l.activeBreakpoint || t) && (l.activeBreakpoint = o, "unslick" === l.breakpointSettings[o] ? l.unslick(o) : (l.options = i.extend({},
                        l.originalSettings, l.breakpointSettings[o]), e === !0 && (l.currentSlide = l.options.initialSlide), l.refresh(e)), r = o) : (l.activeBreakpoint = o, "unslick" === l.breakpointSettings[o] ? l.unslick(o) : (l.options = i.extend({},
                        l.originalSettings, l.breakpointSettings[o]), e === !0 && (l.currentSlide = l.options.initialSlide), l.refresh(e)), r = o) : null !== l.activeBreakpoint && (l.activeBreakpoint = null, l.options = l.originalSettings, e === !0 && (l.currentSlide = l.options.initialSlide), l.refresh(e), r = o),
                    e || r === !1 || l.$slider.trigger("breakpoint", [l, r])
                }
            },
            e.prototype.changeSlide = function(e, t) {
                var s, o, n, l = this,
                    r = i(e.target);
                switch (r.is("a") && (l.options.enableAnchor ? window.loaction.href = r.attr("href") : e.preventDefault()), r.is("li") || (r = r.closest("li")), n = l.slideCount % l.options.slidesToScroll !== 0, s = n ? 0 : (l.slideCount - l.currentSlide) % l.options.slidesToScroll, e.data.message) {
                    case "previous":
                        o = 0 === s ? l.options.slidesToScroll: l.options.slidesToShow - s,
                        l.slideCount > l.options.slidesToShow && l.slideHandler(l.currentSlide - o, !1, t);
                        break;
                    case "next":
                        o = 0 === s ? l.options.slidesToScroll: s,
                        l.slideCount > l.options.slidesToShow && l.slideHandler(l.currentSlide + o, !1, t);
                        break;
                    case "index":
                        var a = 0 === e.data.index ? 0 : e.data.index || r.index() * l.options.slidesToScroll;
                        l.slideHandler(l.checkNavigable(a), !1, t),
                            r.children().trigger("focus");
                        break;
                    default:
                        return
                }
            },
            e.prototype.checkNavigable = function(i) {
                var e, t, s = this;
                if (e = s.getNavigableIndexes(), t = 0, i > e[e.length - 1]) i = e[e.length - 1];
                else for (var o in e) {
                    if (i < e[o]) {
                        i = t;
                        break
                    }
                    t = e[o]
                }
                return i
            },
            e.prototype.cleanUpEvents = function() {
                var e = this;
                e.options.dots && null !== e.$dots && (i("li", e.$dots).off("click.slick", e.changeSlide), e.options.pauseOnDotsHover === !0 && e.options.autoplay === !0 && i("li", e.$dots).off("mouseenter.slick", i.proxy(e.setPaused, e, !0)).off("mouseleave.slick", i.proxy(e.setPaused, e, !1))),
                e.options.arrows === !0 && e.slideCount > e.options.slidesToShow && (e.$prevArrow && e.$prevArrow.off("click.slick", e.changeSlide), e.$nextArrow && e.$nextArrow.off("click.slick", e.changeSlide)),
                    e.$list.off("touchstart.slick mousedown.slick", e.swipeHandler),
                    e.$list.off("touchmove.slick mousemove.slick", e.swipeHandler),
                    e.$list.off("touchend.slick mouseup.slick", e.swipeHandler),
                    e.$list.off("touchcancel.slick mouseleave.slick", e.swipeHandler),
                    e.$list.off("click.slick", e.clickHandler),
                    i(document).off(e.visibilityChange, e.visibility),
                    e.$list.off("mouseenter.slick", i.proxy(e.setPaused, e, !0)),
                    e.$list.off("mouseleave.slick", i.proxy(e.setPaused, e, !1)),
                e.options.accessibility === !0 && e.$list.off("keydown.slick", e.keyHandler),
                e.options.focusOnSelect === !0 && i(e.$slideTrack).children().off("click.slick", e.selectHandler),
                    i(window).off("orientationchange.slick.slick-" + e.instanceUid, e.orientationChange),
                    i(window).off("resize.slick.slick-" + e.instanceUid, e.resize),
                    i("[draggable!=true]", e.$slideTrack).off("dragstart", e.preventDefault),
                    i(window).off("load.slick.slick-" + e.instanceUid, e.setPosition),
                    i(document).off("ready.slick.slick-" + e.instanceUid, e.setPosition)
            },
            e.prototype.cleanUpRows = function() {
                var i, e = this;
                e.options.rows > 1 && (i = e.$slides.children().children(), i.removeAttr("style"), e.$slider.html(i))
            },
            e.prototype.clickHandler = function(i) {
                var e = this;
                e.shouldClick === !1 && (i.stopImmediatePropagation(), i.stopPropagation(), i.preventDefault())
            },
            e.prototype.destroy = function(e) {
                var t = this;
                t.autoPlayClear(),
                    t.touchObject = {},
                    t.cleanUpEvents(),
                    i(".slick-cloned", t.$slider).detach(),
                t.$dots && t.$dots.remove(),
                t.$prevArrow && t.$prevArrow.length && (t.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display", ""), t.htmlExpr.test(t.options.prevArrow) && t.$prevArrow.remove()),
                t.$nextArrow && t.$nextArrow.length && (t.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display", ""), t.htmlExpr.test(t.options.nextArrow) && t.$nextArrow.remove()),
                t.$slides && (t.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current slick-scale slick-shift").removeAttr("aria-hidden").removeAttr("data-slick-index").removeAttr("tabindex").each(function() {
                    i(this).attr("style", i(this).data("originalStyling")),
                        i(this).find("a").removeAttr("tabindex")
                }), t.$slideTrack.children(this.options.slide).detach(), t.$slideTrack.detach(), t.$list.detach(), t.$slider.append(t.$slides)),
                    t.cleanUpRows(),
                    t.$slider.removeClass("slick-slider"),
                    t.$slider.removeClass("slick-initialized"),
                    t.unslicked = !0,
                e || t.$slider.trigger("destroy", [t])
            },
            e.prototype.disableTransition = function(i) {
                var e = this,
                    t = {};
                t[e.transitionType] = "",
                    e.options.fade === !1 ? e.$slideTrack.css(t) : e.$slides.eq(i).css(t)
            },
            e.prototype.fadeSlide = function(i, e) {
                var t = this;
                t.cssTransitions === !1 ? (t.$slides.eq(i).css({
                    zIndex: t.options.zIndex
                }), t.$slides.eq(i).animate({
                        opacity: 1
                    },
                    t.options.speed, t.options.easing, e)) : (t.applyTransition(i, t.options.speed - 300), setTimeout(function() {
                        t.$slides.eq(i).css({
                            opacity: 1,
                            zIndex: t.options.zIndex
                        })
                    },
                    800), e && setTimeout(function() {
                        t.disableTransition(i),
                            e.call()
                    },
                    t.options.speed))
            },
            e.prototype.fadeSlideOut = function(i) {
                var e = this;
                e.cssTransitions === !1 ? e.$slides.eq(i).animate({
                        opacity: 0,
                        zIndex: e.options.zIndex - 2
                    },
                    e.options.speed, e.options.easing) : (e.applyTransition(i, e.options.speed - 100), e.$slides.eq(i).css({
                    opacity: 0,
                    zIndex: e.options.zIndex - 2
                }))
            },
            e.prototype.filterSlides = e.prototype.slickFilter = function(i) {
                var e = this;
                null !== i && (e.$slidesCache = e.$slides, e.unload(), e.$slideTrack.children(this.options.slide).detach(), e.$slidesCache.filter(i).appendTo(e.$slideTrack), e.reinit())
            },
            e.prototype.getCurrent = e.prototype.slickCurrentSlide = function() {
                var i = this;
                return i.currentSlide
            },
            e.prototype.getDotCount = function() {
                var i = this,
                    e = 0,
                    t = 0,
                    s = 0;
                if (i.options.infinite === !0) for (; e < i.slideCount;)++s,
                    e = t + i.options.slidesToScroll,
                    t += i.options.slidesToScroll <= i.options.slidesToShow ? i.options.slidesToScroll: i.options.slidesToShow;
                else if (i.options.centerMode === !0) s = i.slideCount;
                else for (; e < i.slideCount;)++s,
                        e = t + i.options.slidesToScroll,
                        t += i.options.slidesToScroll <= i.options.slidesToShow ? i.options.slidesToScroll: i.options.slidesToShow;
                return s - 1
            },
            e.prototype.getLeft = function(e) {
                var t, s, o, n = this,
                    l = 0;
                if (n.slideOffset = 0, s = n.$slides.first().outerHeight(!0), n.options.infinite === !0 ? (n.slideCount > n.options.slidesToShow && (n.slideOffset = n.slideWidth * n.options.slidesToShow * -1, l = s * n.options.slidesToShow * -1), n.slideCount % n.options.slidesToScroll !== 0 && e + n.options.slidesToScroll > n.slideCount && n.slideCount > n.options.slidesToShow && (e > n.slideCount ? (n.slideOffset = (n.options.slidesToShow - (e - n.slideCount)) * n.slideWidth * -1, l = (n.options.slidesToShow - (e - n.slideCount)) * s * -1) : (n.slideOffset = n.slideCount % n.options.slidesToScroll * n.slideWidth * -1, l = n.slideCount % n.options.slidesToScroll * s * -1))) : e + n.options.slidesToShow > n.slideCount && (n.slideOffset = (e + n.options.slidesToShow - n.slideCount) * n.slideWidth, l = (e + n.options.slidesToShow - n.slideCount) * s), n.slideCount <= n.options.slidesToShow && (n.slideOffset = 0, l = 0), n.options.centerMode === !0 && n.options.infinite === !0 ? n.slideOffset += n.slideWidth * Math.floor(n.options.slidesToShow / 2) - n.slideWidth: n.options.centerMode === !0 && (n.slideOffset = 0, n.slideOffset += n.slideWidth * Math.floor(n.options.slidesToShow / 2)), n.options.shiftAnimate === !0 && n.options.centerMode === !1) if (n.options.mixMode.length > 0) {
                    var r = 0,
                        a = "";
                    n.$slides.each(function(t) {
                        t >= e || 0 == t || i(this).attr("data-class") === n.options.mixMode[0] && (a === n.options.mixMode[0] && r++, a = i(this).attr("data-class"))
                    }),
                        n.slideOffset = i(n.$slides[e]).attr("data-class") === n.options.mixMode[0] && e > 0 && i(n.$slides[e - 1]).attr("data-class") === n.options.mixMode[0] ? (r + 1) * n.slideWidth * n.options.shiftPecentage: r * n.slideWidth * n.options.shiftPecentage
                } else n.slideOffset = e * n.slideWidth * n.options.shiftPecentage;
                return t = n.options.vertical === !1 ? e * n.slideWidth * -1 + n.slideOffset: e * s * -1 + l,
                n.options.variableWidth === !0 && (o = n.$slideTrack.children(".slick-slide").eq(n.slideCount <= n.options.slidesToShow || n.options.infinite === !1 ? e: e + n.options.slidesToShow), t = n.options.rtl === !0 ? o[0] ? -1 * (n.$slideTrack.width() - o[0].offsetLeft - o.width()) : 0 : o[0] ? -1 * o[0].offsetLeft: 0, n.options.centerMode === !0 && (o = n.$slideTrack.children(".slick-slide").eq(n.slideCount <= n.options.slidesToShow || n.options.infinite === !1 ? e: e + n.options.slidesToShow + 1), t = n.options.rtl === !0 ? o[0] ? -1 * (n.$slideTrack.width() - o[0].offsetLeft - o.width()) : 0 : o[0] ? -1 * o[0].offsetLeft: 0, t += (n.$list.width() - o.outerWidth()) / 2)),
                    t
            },
            e.prototype.getOption = e.prototype.slickGetOption = function(i) {
                var e = this;
                return e.options[i]
            },
            e.prototype.getNavigableIndexes = function() {
                var i, e = this,
                    t = 0,
                    s = 0,
                    o = [];
                for (e.options.infinite === !1 ? i = e.slideCount: (t = -1 * e.options.slidesToScroll, s = -1 * e.options.slidesToScroll, i = 2 * e.slideCount); i > t;) o.push(t),
                    t = s + e.options.slidesToScroll,
                    s += e.options.slidesToScroll <= e.options.slidesToShow ? e.options.slidesToScroll: e.options.slidesToShow;
                return o
            },
            e.prototype.getSlick = function() {
                return this
            },
            e.prototype.getSlideCount = function() {
                var e, t, s, o = this;
                return s = o.options.centerMode === !0 ? o.slideWidth * Math.floor(o.options.slidesToShow / 2) : 0,
                    o.options.swipeToSlide === !0 ? (o.$slideTrack.find(".slick-slide").each(function(e, n) {
                        return n.offsetLeft - s + i(n).outerWidth() / 2 > -1 * o.swipeLeft ? (t = n, !1) : void 0
                    }), e = Math.abs(i(t).attr("data-slick-index") - o.currentSlide) || 1) : o.options.slidesToScroll
            },
            e.prototype.goTo = e.prototype.slickGoTo = function(i, e) {
                var t = this;
                t.changeSlide({
                        data: {
                            message: "index",
                            index: parseInt(i)
                        }
                    },
                    e)
            },
            e.prototype.init = function(e) {
                var t = this;
                i(t.$slider).hasClass("slick-initialized") || (i(t.$slider).addClass("slick-initialized"), t.buildRows(), t.buildOut(), t.setProps(), t.startLoad(), t.loadSlider(), t.initializeEvents(), t.updateArrows(), t.updateDots(), t.updateLinks()),
                t.options.setClassToContainer && t.updateContainerClass(),
                e && t.$slider.trigger("init", [t]),
                t.options.accessibility === !0 && t.initADA()
            },
            e.prototype.initArrowEvents = function() {
                var i = this;
                i.options.arrows === !0 && i.slideCount > i.options.slidesToShow && (i.$prevArrow.on("click.slick", {
                        message: "previous"
                    },
                    i.changeSlide), i.$nextArrow.on("click.slick", {
                        message: "next"
                    },
                    i.changeSlide))
            },
            e.prototype.initDotEvents = function() {
                var e = this;
                e.options.dots === !0 && e.slideCount > e.options.slidesToShow && i("li", e.$dots).on("click.slick", {
                        message: "index"
                    },
                    e.changeSlide),
                e.options.dots === !0 && e.options.pauseOnDotsHover === !0 && e.options.autoplay === !0 && i("li", e.$dots).on("mouseenter.slick", i.proxy(e.setPaused, e, !0)).on("mouseleave.slick", i.proxy(e.setPaused, e, !1))
            },
            e.prototype.initLinkEvents = function() {
                var e = this;
                if (e.options.links === !0 && e.$links.length > 0) {
                    var t = i("li", e.$links);
                    e.slideCount > e.options.slidesToShow && t.on("click.slick", {
                            message: "index"
                        },
                        e.changeSlide),
                    e.options.pauseOnDotsHover === !0 && e.options.autoplay === !0 && t.on("mouseenter.slick", i.proxy(e.setPaused, e, !0)).on("mouseleave.slick", i.proxy(e.setPaused, e, !1))
                }
            },
            e.prototype.initializeEvents = function() {
                var e = this;
                e.initArrowEvents(),
                    e.initDotEvents(),
                    e.initLinkEvents(),
                    e.$list.on("touchstart.slick mousedown.slick", {
                            action: "start"
                        },
                        e.swipeHandler),
                    e.$list.on("touchmove.slick mousemove.slick", {
                            action: "move"
                        },
                        e.swipeHandler),
                    e.$list.on("touchend.slick mouseup.slick", {
                            action: "end"
                        },
                        e.swipeHandler),
                    e.$list.on("touchcancel.slick mouseleave.slick", {
                            action: "end"
                        },
                        e.swipeHandler),
                    e.$list.on("click.slick", e.clickHandler),
                    i(document).on(e.visibilityChange, i.proxy(e.visibility, e)),
                    e.$list.on("mouseenter.slick", i.proxy(e.setPaused, e, !0)),
                    e.$list.on("mouseleave.slick", i.proxy(e.setPaused, e, !1)),
                e.options.accessibility === !0 && e.$list.on("keydown.slick", e.keyHandler),
                e.options.focusOnSelect === !0 && i(e.$slideTrack).children().on("click.slick", e.selectHandler),
                    i(window).on("orientationchange.slick.slick-" + e.instanceUid, i.proxy(e.orientationChange, e)),
                    i(window).on("resize.slick.slick-" + e.instanceUid, i.proxy(e.resize, e)),
                    i("[draggable!=true]", e.$slideTrack).on("dragstart", e.preventDefault),
                    i(window).on("load.slick.slick-" + e.instanceUid, e.setPosition),
                    i(document).on("ready.slick.slick-" + e.instanceUid, e.setPosition)
            },
            e.prototype.initUI = function() {
                var i = this;
                i.options.arrows === !0 && i.slideCount > i.options.slidesToShow && (i.$prevArrow.show(), i.$nextArrow.show()),
                i.options.dots === !0 && i.slideCount > i.options.slidesToShow && i.$dots.show(),
                i.options.autoplay === !0 && i.autoPlay()
            },
            e.prototype.keyHandler = function(i) {
                var e = this;
                i.target.tagName.match("TEXTAREA|INPUT|SELECT") || (37 === i.keyCode && e.options.accessibility === !0 ? e.changeSlide({
                    data: {
                        message: "previous"
                    }
                }) : 39 === i.keyCode && e.options.accessibility === !0 && e.changeSlide({
                    data: {
                        message: "next"
                    }
                }))
            },
            e.prototype.lazyLoad = function() {
                function e(e) {
                    i("img[data-lazy]", e).each(function() {
                        var e = i(this),
                            t = i(this).attr("data-lazy"),
                            s = document.createElement("img");
                        s.onload = function() {
                            e.animate({
                                    opacity: 0
                                },
                                100,
                                function() {
                                    e.attr("src", t).animate({
                                            opacity: 1
                                        },
                                        200,
                                        function() {
                                            e.removeAttr("data-lazy").removeClass("slick-loading")
                                        })
                                })
                        },
                            s.src = t
                    })
                }
                var t, s, o, n, l = this;
                l.options.centerMode === !0 ? l.options.infinite === !0 ? (o = l.currentSlide + (l.options.slidesToShow / 2 + 1), n = o + l.options.slidesToShow + 2) : (o = Math.max(0, l.currentSlide - (l.options.slidesToShow / 2 + 1)), n = 2 + (l.options.slidesToShow / 2 + 1) + l.currentSlide) : (o = l.options.infinite ? l.options.slidesToShow + l.currentSlide: l.currentSlide, n = o + l.options.slidesToShow, l.options.fade === !0 && (o > 0 && o--, n <= l.slideCount && n++)),
                    t = l.$slider.find(".slick-slide").slice(o, n),
                    e(t),
                    l.slideCount <= l.options.slidesToShow ? (s = l.$slider.find(".slick-slide"), e(s)) : l.currentSlide >= l.slideCount - l.options.slidesToShow ? (s = l.$slider.find(".slick-cloned").slice(0, l.options.slidesToShow), e(s)) : 0 === l.currentSlide && (s = l.$slider.find(".slick-cloned").slice( - 1 * l.options.slidesToShow), e(s))
            },
            e.prototype.loadSlider = function() {
                var i = this;
                i.setPosition(),
                    i.$slideTrack.css({
                        opacity: 1
                    }),
                    i.$slider.removeClass("slick-loading"),
                    i.initUI(),
                "progressive" === i.options.lazyLoad && i.progressiveLazyLoad()
            },
            e.prototype.next = e.prototype.slickNext = function() {
                var i = this;
                i.changeSlide({
                    data: {
                        message: "next"
                    }
                })
            },
            e.prototype.orientationChange = function() {
                var i = this;
                i.checkResponsive(),
                    i.setPosition()
            },
            e.prototype.pause = e.prototype.slickPause = function() {
                var i = this;
                i.autoPlayClear(),
                    i.paused = !0
            },
            e.prototype.play = e.prototype.slickPlay = function() {
                var i = this;
                i.paused = !1,
                    i.autoPlay()
            },
            e.prototype.postSlide = function(i) {
                var e = this;
                e.$slider.trigger("afterChange", [e, i]),
                    e.animating = !1,
                    e.setPosition(),
                    e.swipeLeft = null,
                e.options.autoplay === !0 && e.paused === !1 && e.autoPlay(),
                e.options.accessibility === !0 && e.initADA()
            },
            e.prototype.prev = e.prototype.slickPrev = function() {
                var i = this;
                i.changeSlide({
                    data: {
                        message: "previous"
                    }
                })
            },
            e.prototype.preventDefault = function(i) {
                i.preventDefault()
            },
            e.prototype.progressiveLazyLoad = function() {
                var e, t, s = this;
                e = i("img[data-lazy]", s.$slider).length,
                e > 0 && (t = i("img[data-lazy]", s.$slider).first(), t.attr("src", null), t.attr("src", t.attr("data-lazy")).removeClass("slick-loading").load(function() {
                    t.removeAttr("data-lazy"),
                        s.progressiveLazyLoad(),
                    s.options.adaptiveHeight === !0 && s.setPosition()
                }).error(function() {
                    t.removeAttr("data-lazy"),
                        s.progressiveLazyLoad()
                }))
            },
            e.prototype.refresh = function(e) {
                var t, s, o = this;
                s = o.slideCount - o.options.slidesToShow,
                o.options.infinite || (o.slideCount <= o.options.slidesToShow ? o.currentSlide = 0 : o.currentSlide > s && (o.currentSlide = s)),
                    t = o.currentSlide,
                    o.destroy(!0),
                    i.extend(o, o.initials, {
                        currentSlide: t
                    }),
                    o.init(),
                e || o.changeSlide({
                        data: {
                            message: "index",
                            index: t
                        }
                    },
                    !1)
            },
            e.prototype.registerBreakpoints = function() {
                var e, t, s, o = this,
                    n = o.options.responsive || null;
                if ("array" === i.type(n) && n.length) {
                    o.respondTo = o.options.respondTo || "window";
                    for (e in n) if (s = o.breakpoints.length - 1, t = n[e].breakpoint, n.hasOwnProperty(e)) {
                        for (; s >= 0;) o.breakpoints[s] && o.breakpoints[s] === t && o.breakpoints.splice(s, 1),
                            s--;
                        o.breakpoints.push(t),
                            o.breakpointSettings[t] = n[e].settings
                    }
                    o.breakpoints.sort(function(i, e) {
                        return o.options.mobileFirst ? i - e: e - i
                    })
                }
            },
            e.prototype.reinit = function() {
                var e = this;
                e.$slides = e.$slideTrack.children(e.options.slide).addClass("slick-slide"),
                    e.slideCount = e.$slides.length,
                e.currentSlide >= e.slideCount && 0 !== e.currentSlide && (e.currentSlide = e.currentSlide - e.options.slidesToScroll),
                e.slideCount <= e.options.slidesToShow && (e.currentSlide = 0),
                    e.registerBreakpoints(),
                    e.setProps(),
                    e.setupInfinite(),
                    e.buildArrows(),
                    e.updateArrows(),
                    e.initArrowEvents(),
                    e.buildDots(),
                    e.updateDots(),
                    e.updateLinks(),
                    e.initDotEvents(),
                    e.buildLinks(),
                    e.initLinkEvents(),
                    e.checkResponsive(!1, !0),
                e.options.setClassToContainer && e.updateContainerClass(),
                e.options.focusOnSelect === !0 && i(e.$slideTrack).children().on("click.slick", e.selectHandler),
                    e.setSlideClasses(0),
                    e.setPosition(),
                    e.$slider.trigger("reInit", [e]),
                e.options.autoplay === !0 && e.focusHandler()
            },
            e.prototype.resize = function() {
                var e = this;
                i(window).width() !== e.windowWidth && (clearTimeout(e.windowDelay), e.windowDelay = window.setTimeout(function() {
                        e.windowWidth = i(window).width(),
                            e.checkResponsive(),
                        e.unslicked || e.setPosition()
                    },
                    50))
            },
            e.prototype.removeSlide = e.prototype.slickRemove = function(i, e, t) {
                var s = this;
                return "boolean" == typeof i ? (e = i, i = e === !0 ? 0 : s.slideCount - 1) : i = e === !0 ? --i: i,
                    s.slideCount < 1 || 0 > i || i > s.slideCount - 1 ? !1 : (s.unload(), t === !0 ? s.$slideTrack.children().remove() : s.$slideTrack.children(this.options.slide).eq(i).remove(), s.$slides = s.$slideTrack.children(this.options.slide), s.$slideTrack.children(this.options.slide).detach(), s.$slideTrack.append(s.$slides), s.$slidesCache = s.$slides, void s.reinit())
            },
            e.prototype.setCSS = function(i) {
                var e, t, s = this,
                    o = {};
                s.options.rtl === !0 && (i = -i),
                    e = "left" == s.positionProp ? Math.ceil(i) + "px": "0px",
                    t = "top" == s.positionProp ? Math.ceil(i) + "px": "0px",
                    o[s.positionProp] = i,
                    s.transformsEnabled === !1 ? s.$slideTrack.css(o) : (o = {},
                        s.cssTransitions === !1 ? (o[s.animType] = "translate(" + e + ", " + t + ")", s.$slideTrack.css(o)) : (o[s.animType] = "translate3d(" + e + ", " + t + ", 0px)", s.$slideTrack.css(o)))
            },
            e.prototype.setDimensions = function() {
                var i = this;
                i.options.vertical === !1 ? i.options.centerMode === !0 && i.$list.css({
                    padding: "0px " + i.options.centerPadding
                }) : (i.$list.height(i.$slides.first().outerHeight(!0) * i.options.slidesToShow), i.options.centerMode === !0 && i.$list.css({
                    padding: i.options.centerPadding + " 0px"
                })),
                    i.listWidth = i.$list.width(),
                    i.listHeight = i.$list.height(),
                    i.options.vertical === !1 && i.options.variableWidth === !1 ? (i.slideWidth = Math.ceil(i.listWidth / i.options.slidesToShow), i.$slideTrack.width(Math.ceil(i.slideWidth * i.$slideTrack.children(".slick-slide").length))) : i.options.variableWidth === !0 ? i.$slideTrack.width(5e3 * i.slideCount) : (i.slideWidth = Math.ceil(i.listWidth), i.$slideTrack.height(Math.ceil(i.$slides.first().outerHeight(!0) * i.$slideTrack.children(".slick-slide").length)));
                var e = i.$slides.first().outerWidth(!0) - i.$slides.first().width();
                i.options.variableWidth === !1 && i.$slideTrack.children(".slick-slide").width(i.slideWidth - e)
            },
            e.prototype.setFade = function() {
                var e, t = this;
                t.$slides.each(function(s, o) {
                    e = t.slideWidth * s * -1,
                        i(o).css(t.options.rtl === !0 ? {
                            position: "relative",
                            right: e,
                            top: 0,
                            zIndex: t.options.zIndex - 2,
                            opacity: 0
                        }: {
                            position: "relative",
                            left: e,
                            top: 0,
                            zIndex: t.options.zIndex - 2,
                            opacity: 0
                        })
                }),
                    t.$slides.eq(t.currentSlide).css({
                        zIndex: t.options.zIndex - 1,
                        opacity: 1
                    })
            },
            e.prototype.setHeight = function() {
                var i = this;
                if (1 === i.options.slidesToShow && i.options.adaptiveHeight === !0 && i.options.vertical === !1) {
                    var e = i.$slides.eq(i.currentSlide).outerHeight(!0) + 2;
                    i.$list.css("height", e)
                }
            },
            e.prototype.setOption = e.prototype.slickSetOption = function(e, t, s) {
                var o, n, l = this;
                if ("responsive" === e && "array" === i.type(t)) for (n in t) if ("array" !== i.type(l.options.responsive)) l.options.responsive = [t[n]];
                else {
                    for (o = l.options.responsive.length - 1; o >= 0;) l.options.responsive[o].breakpoint === t[n].breakpoint && l.options.responsive.splice(o, 1),
                        o--;
                    l.options.responsive.push(t[n])
                } else l.options[e] = t;
                s === !0 && (l.unload(), l.reinit())
            },
            e.prototype.setPosition = function() {
                var i = this;
                i.setDimensions(),
                    i.setHeight(),
                    i.options.fade === !1 ? i.setCSS(i.getLeft(i.currentSlide)) : i.setFade(),
                    i.$slider.trigger("setPosition", [i])
            },
            e.prototype.setProps = function() {
                var i = this,
                    e = document.body.style;
                i.positionProp = i.options.vertical === !0 ? "top": "left",
                    "top" === i.positionProp ? i.$slider.addClass("slick-vertical") : i.$slider.removeClass("slick-vertical"),
                (void 0 !== e.WebkitTransition || void 0 !== e.MozTransition || void 0 !== e.msTransition) && i.options.useCSS === !0 && (i.cssTransitions = !0),
                i.options.fade && ("number" == typeof i.options.zIndex ? i.options.zIndex < 3 && (i.options.zIndex = 3) : i.options.zIndex = i.defaults.zIndex),
                void 0 !== e.OTransform && (i.animType = "OTransform", i.transformType = "-o-transform", i.transitionType = "OTransition", void 0 === e.perspectiveProperty && void 0 === e.webkitPerspective && (i.animType = !1)),
                void 0 !== e.MozTransform && (i.animType = "MozTransform", i.transformType = "-moz-transform", i.transitionType = "MozTransition", void 0 === e.perspectiveProperty && void 0 === e.MozPerspective && (i.animType = !1)),
                void 0 !== e.webkitTransform && (i.animType = "webkitTransform", i.transformType = "-webkit-transform", i.transitionType = "webkitTransition", void 0 === e.perspectiveProperty && void 0 === e.webkitPerspective && (i.animType = !1)),
                void 0 !== e.msTransform && (i.animType = "msTransform", i.transformType = "-ms-transform", i.transitionType = "msTransition", void 0 === e.msTransform && (i.animType = !1)),
                void 0 !== e.transform && i.animType !== !1 && (i.animType = "transform", i.transformType = "transform", i.transitionType = "transition"),
                    i.transformsEnabled = i.options.useTransform && null !== i.animType && i.animType !== !1
            },
            e.prototype.setSlideClasses = function(i) {
                var e, t, s, o, n = this;
                t = n.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current slick-scale slick-shift").attr("aria-hidden", "true"),
                    n.$slides.eq(i).addClass("slick-current"),
                n.options.shiftAnimate === !0 && n.$slides.each(function(e) {
                    e !== i && n.$slides.eq(e).addClass("slick-shift")
                }),
                n.options.scaleAnimate === !0 && n.$slides.each(function(e) {
                    e !== i && n.$slides.eq(e).addClass("slick-scale")
                }),
                    n.options.centerMode === !0 ? (e = Math.floor(n.options.slidesToShow / 2), n.options.infinite === !0 && (i >= e && i <= n.slideCount - 1 - e ? n.$slides.slice(i - e, i + e + 1).addClass("slick-active").attr("aria-hidden", "false") : (s = n.options.slidesToShow + i, t.slice(s - e + 1, s + e + 2).addClass("slick-active").attr("aria-hidden", "false")), 0 === i ? t.eq(t.length - 1 - n.options.slidesToShow).addClass("slick-center") : i === n.slideCount - 1 && t.eq(n.options.slidesToShow).addClass("slick-center")), n.$slides.eq(i).addClass("slick-center")) : i >= 0 && i <= n.slideCount - n.options.slidesToShow ? n.$slides.slice(i, i + n.options.slidesToShow).addClass("slick-active").attr("aria-hidden", "false") : t.length <= n.options.slidesToShow ? t.addClass("slick-active").attr("aria-hidden", "false") : (o = n.slideCount % n.options.slidesToShow, s = n.options.infinite === !0 ? n.options.slidesToShow + i: i, n.options.slidesToShow == n.options.slidesToScroll && n.slideCount - i < n.options.slidesToShow ? t.slice(s - (n.options.slidesToShow - o), s + o).addClass("slick-active").attr("aria-hidden", "false") : t.slice(s, s + n.options.slidesToShow).addClass("slick-active").attr("aria-hidden", "false")),
                "ondemand" === n.options.lazyLoad && n.lazyLoad()
            },
            e.prototype.setupInfinite = function() {
                var e, t, s, o = this;
                if (o.options.fade === !0 && (o.options.centerMode = !1), o.options.infinite === !0 && o.options.fade === !1 && (t = null, o.slideCount > o.options.slidesToShow)) {
                    for (s = o.options.centerMode === !0 ? o.options.slidesToShow + 1 : o.options.slidesToShow, e = o.slideCount; e > o.slideCount - s; e -= 1) t = e - 1,
                        i(o.$slides[t]).clone(!0).attr("id", "").attr("data-slick-index", t - o.slideCount).prependTo(o.$slideTrack).addClass("slick-cloned");
                    for (e = 0; s > e; e += 1) t = e,
                        i(o.$slides[t]).clone(!0).attr("id", "").attr("data-slick-index", t + o.slideCount).appendTo(o.$slideTrack).addClass("slick-cloned");
                    o.$slideTrack.find(".slick-cloned").find("[id]").each(function() {
                        i(this).attr("id", "")
                    })
                }
            },
            e.prototype.setPaused = function(i) {
                var e = this;
                e.options.autoplay === !0 && e.options.pauseOnHover === !0 && (e.paused = i, i ? e.autoPlayClear() : e.autoPlay())
            },
            e.prototype.selectHandler = function(e) {
                var t = this,
                    s = i(e.target).is(".slick-slide") ? i(e.target) : i(e.target).parents(".slick-slide"),
                    o = parseInt(s.attr("data-slick-index"));
                return o || (o = 0),
                    t.slideCount <= t.options.slidesToShow ? (t.setSlideClasses(o), void t.asNavFor(o)) : void t.slideHandler(o)
            },
            e.prototype.slideHandler = function(i, e, t) {
                var s, o, n, l, r = null,
                    a = this;
                return e = e || !1,
                    a.animating === !0 && a.options.waitForAnimate === !0 || a.options.fade === !0 && a.currentSlide === i || a.slideCount <= a.options.slidesToShow ? void 0 : (e === !1 && a.asNavFor(i), s = i, r = a.getLeft(s), l = a.getLeft(a.currentSlide), a.currentLeft = null === a.swipeLeft ? l: a.swipeLeft, a.options.infinite === !1 && a.options.centerMode === !1 && (0 > i || i > a.getDotCount() * a.options.slidesToScroll) ? void(a.options.fade === !1 && (s = a.currentSlide, t !== !0 ? a.animateSlide(l,
                        function() {
                            a.postSlide(s)
                        }) : a.postSlide(s))) : a.options.infinite === !1 && a.options.centerMode === !0 && (0 > i || i > a.slideCount - a.options.slidesToScroll) ? void(a.options.fade === !1 && (s = a.currentSlide, t !== !0 ? a.animateSlide(l,
                        function() {
                            a.postSlide(s)
                        }) : a.postSlide(s))) : (a.options.autoplay === !0 && clearInterval(a.autoPlayTimer), o = 0 > s ? a.slideCount % a.options.slidesToScroll !== 0 ? a.slideCount - a.slideCount % a.options.slidesToScroll: a.slideCount + s: s >= a.slideCount ? a.slideCount % a.options.slidesToScroll !== 0 ? 0 : s - a.slideCount: s, a.animating = !0, a.$slider.trigger("beforeChange", [a, a.currentSlide, o]), n = a.currentSlide, a.currentSlide = o, a.setSlideClasses(a.currentSlide), a.updateDots(), a.updateLinks(), a.updateArrows(), a.options.setClassToContainer === !0 && a.updateContainerClass(), a.options.fade === !0 ? (t !== !0 ? (a.fadeSlideOut(n), a.fadeSlide(o,
                        function() {
                            a.postSlide(o)
                        })) : a.postSlide(o), void a.animateHeight()) : void(t !== !0 ? a.animateSlide(r,
                        function() {
                            a.postSlide(o)
                        }) : a.postSlide(o))))
            },
            e.prototype.startLoad = function() {
                var i = this;
                i.options.arrows === !0 && i.slideCount > i.options.slidesToShow && (i.$prevArrow.hide(), i.$nextArrow.hide()),
                i.options.dots === !0 && i.slideCount > i.options.slidesToShow && i.$dots.hide(),
                    i.$slider.addClass("slick-loading")
            },
            e.prototype.swipeDirection = function() {
                var i, e, t, s, o = this;
                return i = o.touchObject.startX - o.touchObject.curX,
                    e = o.touchObject.startY - o.touchObject.curY,
                    t = Math.atan2(e, i),
                    s = Math.round(180 * t / Math.PI),
                0 > s && (s = 360 - Math.abs(s)),
                    45 >= s && s >= 0 ? o.options.rtl === !1 ? "left": "right": 360 >= s && s >= 315 ? o.options.rtl === !1 ? "left": "right": s >= 135 && 225 >= s ? o.options.rtl === !1 ? "right": "left": o.options.verticalSwiping === !0 ? s >= 35 && 135 >= s ? "left": "right": "vertical"
            },
            e.prototype.swipeEnd = function(i) {
                var e, t = this;
                if (t.dragging = !1, t.shouldClick = t.touchObject.swipeLength > 10 ? !1 : !0, void 0 === t.touchObject.curX) return ! 1;
                if (t.touchObject.edgeHit === !0 && t.$slider.trigger("edge", [t, t.swipeDirection()]), t.touchObject.swipeLength >= t.touchObject.minSwipe) switch (t.swipeDirection()) {
                    case "left":
                        e = t.options.swipeToSlide ? t.checkNavigable(t.currentSlide + t.getSlideCount()) : t.currentSlide + t.getSlideCount(),
                            t.slideHandler(e),
                            t.currentDirection = 0,
                            t.touchObject = {},
                            t.$slider.trigger("swipe", [t, "left"]);
                        break;
                    case "right":
                        e = t.options.swipeToSlide ? t.checkNavigable(t.currentSlide - t.getSlideCount()) : t.currentSlide - t.getSlideCount(),
                            t.slideHandler(e),
                            t.currentDirection = 1,
                            t.touchObject = {},
                            t.$slider.trigger("swipe", [t, "right"])
                } else t.touchObject.startX !== t.touchObject.curX && (t.slideHandler(t.currentSlide), t.touchObject = {})
            },
            e.prototype.swipeHandler = function(i) {
                var e = this;
                if (! (e.options.swipe === !1 || "ontouchend" in document && e.options.swipe === !1 || e.options.draggable === !1 && -1 !== i.type.indexOf("mouse"))) switch (e.touchObject.fingerCount = i.originalEvent && void 0 !== i.originalEvent.touches ? i.originalEvent.touches.length: 1, e.touchObject.minSwipe = e.listWidth / e.options.touchThreshold, e.options.verticalSwiping === !0 && (e.touchObject.minSwipe = e.listHeight / e.options.touchThreshold), i.data.action) {
                    case "start":
                        e.swipeStart(i);
                        break;
                    case "move":
                        e.swipeMove(i);
                        break;
                    case "end":
                        e.swipeEnd(i)
                }
            },
            e.prototype.swipeMove = function(i) {
                var e, t, s, o, n, l = this;
                return n = void 0 !== i.originalEvent ? i.originalEvent.touches: null,
                    !l.dragging || n && 1 !== n.length ? !1 : (e = l.getLeft(l.currentSlide), l.touchObject.curX = void 0 !== n ? n[0].pageX: i.clientX, l.touchObject.curY = void 0 !== n ? n[0].pageY: i.clientY, l.touchObject.swipeLength = Math.round(Math.sqrt(Math.pow(l.touchObject.curX - l.touchObject.startX, 2))), l.options.verticalSwiping === !0 && (l.touchObject.swipeLength = Math.round(Math.sqrt(Math.pow(l.touchObject.curY - l.touchObject.startY, 2)))), t = l.swipeDirection(), "vertical" !== t ? (void 0 !== i.originalEvent && l.touchObject.swipeLength > 4 && i.preventDefault(), o = (l.options.rtl === !1 ? 1 : -1) * (l.touchObject.curX > l.touchObject.startX ? 1 : -1), l.options.verticalSwiping === !0 && (o = l.touchObject.curY > l.touchObject.startY ? 1 : -1), s = l.touchObject.swipeLength, l.touchObject.edgeHit = !1, l.options.infinite === !1 && (0 === l.currentSlide && "right" === t || l.currentSlide >= l.getDotCount() && "left" === t) && (s = l.touchObject.swipeLength * l.options.edgeFriction, l.touchObject.edgeHit = !0), l.swipeLeft = l.options.vertical === !1 ? e + s * o: e + s * (l.$list.height() / l.listWidth) * o, l.options.verticalSwiping === !0 && (l.swipeLeft = e + s * o), l.options.fade === !0 || l.options.touchMove === !1 ? !1 : l.animating === !0 ? (l.swipeLeft = null, !1) : void l.setCSS(l.swipeLeft)) : void 0)
            },
            e.prototype.swipeStart = function(i) {
                var e, t = this;
                return 1 !== t.touchObject.fingerCount || t.slideCount <= t.options.slidesToShow ? (t.touchObject = {},
                    !1) : (void 0 !== i.originalEvent && void 0 !== i.originalEvent.touches && (e = i.originalEvent.touches[0]), t.touchObject.startX = t.touchObject.curX = void 0 !== e ? e.pageX: i.clientX, t.touchObject.startY = t.touchObject.curY = void 0 !== e ? e.pageY: i.clientY, void(t.dragging = !0))
            },
            e.prototype.unfilterSlides = e.prototype.slickUnfilter = function() {
                var i = this;
                null !== i.$slidesCache && (i.unload(), i.$slideTrack.children(this.options.slide).detach(), i.$slidesCache.appendTo(i.$slideTrack), i.reinit())
            },
            e.prototype.unload = function() {
                var e = this;
                i(".slick-cloned", e.$slider).remove(),
                e.$dots && e.$dots.remove(),
                e.$prevArrow && e.htmlExpr.test(e.options.prevArrow) && e.$prevArrow.remove(),
                e.$nextArrow && e.htmlExpr.test(e.options.nextArrow) && e.$nextArrow.remove(),
                    e.$slides.removeClass("slick-slide slick-active slick-visible slick-current slick-scale slick-shift").attr("aria-hidden", "true").css("width", "")
            },
            e.prototype.unslick = function(i) {
                var e = this;
                e.$slider.trigger("unslick", [e, i]),
                    e.destroy()
            },
            e.prototype.updateArrows = function() {
                var i, e = this;
                i = Math.floor(e.options.slidesToShow / 2),
                e.options.arrows === !0 && e.slideCount > e.options.slidesToShow && !e.options.infinite && (e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled", "false"), e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled", "false"), 0 === e.currentSlide ? (e.$prevArrow.addClass("slick-disabled").attr("aria-disabled", "true"), e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled", "false")) : e.currentSlide >= e.slideCount - e.options.slidesToShow && e.options.centerMode === !1 ? (e.$nextArrow.addClass("slick-disabled").attr("aria-disabled", "true"), e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled", "false")) : e.currentSlide >= e.slideCount - 1 && e.options.centerMode === !0 && (e.$nextArrow.addClass("slick-disabled").attr("aria-disabled", "true"), e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled", "false")))
            },
            e.prototype.updateContainerClass = function() {
                var i = this,
                    e = i.$ele.closest(".container");
                e.attr("class", e.attr("class").replace(/\bwith_.*?\b/g, "")),
                    e.addClass("with_" + i.$slides.eq(i.currentSlide).attr("data-class"))
            },
            e.prototype.updateDots = function() {
                var e = this;
                null !== e.$dots && (e.$dots.find("li").removeClass("slick-active").attr("aria-hidden", "true"), e.$dots.find("li").eq(Math.floor(e.currentSlide / e.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden", "false"), e.slideCount > 6 && e.$dots.find("li").each(function(t) {
                    i(this).removeClass("slick-active-1").removeClass("slick-active-2").removeClass("slick-active-3").removeClass("slick-active-4"),
                        i(this).addClass(e.slideCount - 1 - e.currentSlide === 2 ? t >= e.currentSlide ? "slick-active-1": t === e.currentSlide - 1 ? "slick-active-2": t === e.currentSlide - 2 ? "slick-active-3": "slick-active-4": e.slideCount - 1 - e.currentSlide === 1 ? t >= e.currentSlide - 1 ? "slick-active-1": t === e.currentSlide - 2 ? "slick-active-2": t === e.currentSlide - 3 ? "slick-active-3": "slick-active-4": e.slideCount - 1 - e.currentSlide === 0 ? t >= e.currentSlide - 2 ? "slick-active-1": t === e.currentSlide - 3 ? "slick-active-2": t === e.currentSlide - 4 ? "slick-active-3": "slick-active-4": 2 === e.currentSlide ? t <= e.currentSlide ? "slick-active-1": t === e.currentSlide + 1 ? "slick-active-2": t === e.currentSlide + 2 ? "slick-active-3": "slick-active-4": 1 === e.currentSlide ? t <= e.currentSlide + 1 ? "slick-active-1": t === e.currentSlide + 2 ? "slick-active-2": t === e.currentSlide + 3 ? "slick-active-3": "slick-active-4": 0 === e.currentSlide ? t <= e.currentSlide + 2 ? "slick-active-1": t === e.currentSlide + 3 ? "slick-active-2": t === e.currentSlide + 4 ? "slick-active-3": "slick-active-4": Math.abs(t - e.currentSlide) < 2 ? "slick-active-1": 2 === Math.abs(t - e.currentSlide) ? "slick-active-2": "slick-active-4")
                }))
            },
            e.prototype.updateLinks = function() {
                var i = this;
                null !== i.$links && (i.$links.find("li").removeClass("slick-active").attr("aria-hidden", "true"), i.$links.find("li").eq(Math.floor(i.currentSlide / i.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden", "false"))
            },
            e.prototype.visibility = function() {
                var i = this;
                document[i.hidden] ? (i.paused = !0, i.autoPlayClear()) : i.options.autoplay === !0 && (i.paused = !1, i.autoPlay())
            },
            e.prototype.initADA = function() {
                var e = this;
                e.$slides.add(e.$slideTrack.find(".slick-cloned")).attr({
                    "aria-hidden": "true",
                    tabindex: "-1"
                }).find("a, input, button, select").attr({
                    tabindex: "-1"
                }),
                    e.$slideTrack.attr("role", "listbox"),
                    e.$slides.not(e.$slideTrack.find(".slick-cloned")).each(function(t) {
                        i(this).attr({
                            role: "option",
                            "aria-describedby": "slick-slide" + e.instanceUid + t
                        })
                    }),
                null !== e.$dots && e.$dots.attr("role", "tablist").find("li").each(function(t) {
                    i(this).attr({
                        role: "presentation",
                        "aria-selected": "false",
                        "aria-controls": "navigation" + e.instanceUid + t,
                        id: "slick-slide" + e.instanceUid + t
                    })
                }).first().attr("aria-selected", "true").end().find("button").attr("role", "button").end().closest("div").attr("role", "toolbar"),
                    e.activateADA()
            },
            e.prototype.activateADA = function() {
                var i = this;
                i.$slideTrack.find(".slick-active").attr({
                    "aria-hidden": "false"
                }).find("a, input, button, select").attr({
                    tabindex: "0"
                })
            },
            e.prototype.focusHandler = function() {
                var e = this;
                e.$slider.on("focus.slick blur.slick", "*",
                    function(t) {
                        t.stopImmediatePropagation();
                        var s = i(this);
                        setTimeout(function() {
                                e.isPlay && (s.is(":focus") ? (e.autoPlayClear(), e.paused = !0) : (e.paused = !1, e.autoPlay()))
                            },
                            0)
                    })
            },
            i.fn.slick = function() {
                var i, t, s = this,
                    o = arguments[0],
                    n = Array.prototype.slice.call(arguments, 1),
                    l = s.length;
                for (i = 0; l > i; i++) if ("object" == typeof o || "undefined" == typeof o ? s[i].slick = new e(s[i], o) : t = s[i].slick[o].apply(s[i].slick, n), "undefined" != typeof t) return t;
                return s
            }
    }),
    function(i) {
        "use strict";
        i.fn.slickExtension = function(e) {
            function t() {
                return Math.max(document.documentElement.clientWidth, window.innerWidth || 0)
            }
            function s() {
                var i = t();
                return 769 > i ? void(a.hasClass("slick-initialized") || a.slick(e)) : a.hasClass("slick-initialized") ? a.slick("unslick") : void 0
            }
            function o() {
                var i = t();
                769 > i ? e.equalize[0][0].find(".equalized").length > 0 && d.find(".equalized").css({
                    width: "",
                    height: ""
                }).removeClass("equalized") : l()
            }
            function n() {
                e.mobileOnly && s(),
                !e.equalizeMobile && e.equalize.length > 0 && o(),
                    i(window).resize(function() {
                        e.mobileOnly && s(),
                        !e.equalizeMobile && e.equalize.length > 0 && o()
                    })
            }
            function l() {
                var t;
                for (t = 0; t < e.equalize.length; t++) i(e.equalize[t][0], e.equalize[t][1]).equalize({
                    reset: !0
                })
            }
            function r() {
                l(),
                    a.slick(e),
                (e.mobileOnly || !e.equalizeMobile && e.equalize.length > 0) && n()
            }
            e = i.extend({
                    mobileOnly: !1,
                    equalize: [],
                    equalizeMobile: !1
                },
                e);
            var a = this,
                d = a.closest(".container");
            r()
        }
    } (jQuery); !
    function(e, t, n) {
        e.cookie = function(e, t, i) {
            return t !== n ? Cookies.set(e, t, i) : Cookies.get(e)
        },
            e.removeCookie = function(t, n) {
                return null !== e.cookie(t) ? (e.cookie(t, null, n), !0) : !1
            }
    } (jQuery, document),
    angular.module("ui.bootstrap", ["ui.bootstrap.typeahead", "ui.bootstrap.position", "ui.bootstrap.bindHtml", "ui.bootstrap.modal", "ui.bootstrap.transition"]),
    angular.module("ui.bootstrap.typeahead", ["ui.bootstrap.position", "ui.bootstrap.bindHtml"]).factory("typeaheadParser", ["$parse",
        function(e) {
            var t = /^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;
            return {
                parse: function(n) {
                    var i = n.match(t);
                    if (!i) throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "' + n + '".');
                    return {
                        itemName: i[3],
                        source: e(i[4]),
                        viewMapper: e(i[2] || i[1]),
                        modelMapper: e(i[1])
                    }
                }
            }
        }]).directive("typeahead", ["$compile", "$parse", "$q", "$timeout", "$document", "$position", "typeaheadParser",
        function(e, t, n, i, r, a, o) {
            var s = [9, 13, 27, 38, 40];
            return {
                require: "ngModel",
                link: function(c, l, d, p) {
                    var u, f = c.$eval(d.typeaheadMinLength) || 1,
                        h = c.$eval(d.typeaheadWaitMs) || 0,
                        g = c.$eval(d.typeaheadEditable) !== !1,
                        m = t(d.typeaheadLoading).assign || angular.noop,
                        y = t(d.typeaheadOnSelect),
                        v = d.typeaheadInputFormatter ? t(d.typeaheadInputFormatter) : void 0,
                        C = d.typeaheadAppendToBody ? c.$eval(d.typeaheadAppendToBody) : !1,
                        S = c.$eval(d.typeaheadFocusFirst) !== !1,
                        _ = t(d.ngModel).assign,
                        b = o.parse(d.typeahead),
                        E = c.$new();
                    c.$on("$destroy",
                        function() {
                            E.$destroy()
                        });
                    var I = "typeahead-" + E.$id + "-" + Math.floor(1e4 * Math.random());
                    l.attr({
                        "aria-autocomplete": "list",
                        "aria-expanded": !1,
                        "aria-owns": I
                    });
                    var A = angular.element("<div typeahead-popup></div>");
                    A.attr({
                        id: I,
                        matches: "matches",
                        active: "activeIdx",
                        select: "select(activeIdx)",
                        query: "query",
                        position: "position"
                    }),
                    angular.isDefined(d.typeaheadTemplateUrl) && A.attr("template-url", d.typeaheadTemplateUrl);
                    var T = function() {
                            E.matches = [],
                                E.activeIdx = -1,
                                l.attr("aria-expanded", !1)
                        },
                        k = function(e) {
                            return I + "-option-" + e
                        };
                    E.$watch("activeIdx",
                        function(e) {
                            0 > e ? l.removeAttr("aria-activedescendant") : l.attr("aria-activedescendant", k(e))
                        });
                    var w = function(e) {
                        var t = {
                            $viewValue: e
                        };
                        m(c, !0),
                            n.when(b.source(c, t)).then(function(n) {
                                    var i = e === p.$viewValue;
                                    if (i && u) if (n.length > 0) {
                                        E.activeIdx = S ? 0 : -1,
                                            E.matches.length = 0;
                                        for (var r = 0; r < n.length; r++) t[b.itemName] = n[r],
                                            E.matches.push({
                                                id: k(r),
                                                label: b.viewMapper(E, t),
                                                model: n[r]
                                            });
                                        E.query = e,
                                            E.position = C ? a.offset(l) : a.position(l),
                                            E.position.top = E.position.top + l.prop("offsetHeight"),
                                            l.attr("aria-expanded", !0)
                                    } else T();
                                    i && m(c, !1)
                                },
                                function() {
                                    T(),
                                        m(c, !1)
                                })
                    };
                    T(),
                        E.query = void 0;
                    var $, P = function(e) {
                            $ = i(function() {
                                    w(e)
                                },
                                h)
                        },
                        N = function() {
                            $ && i.cancel($)
                        };
                    p.$parsers.unshift(function(e) {
                        return u = !0,
                            e && e.length >= f ? h > 0 ? (N(), P(e)) : w(e) : (m(c, !1), N(), T()),
                            g ? e: e ? void p.$setValidity("editable", !1) : (p.$setValidity("editable", !0), e)
                    }),
                        p.$formatters.push(function(e) {
                            var t, n, i = {};
                            return v ? (i.$model = e, v(c, i)) : (i[b.itemName] = e, t = b.viewMapper(c, i), i[b.itemName] = void 0, n = b.viewMapper(c, i), t !== n ? t: e)
                        }),
                        E.select = function(e) {
                            var t, n, r = {};
                            r[b.itemName] = n = E.matches[e].model,
                                t = b.modelMapper(c, r),
                                _(c, t),
                                p.$setValidity("editable", !0),
                                y(c, {
                                    $item: n,
                                    $model: t,
                                    $label: b.viewMapper(c, r)
                                }),
                                T(),
                                i(function() {
                                        l[0].focus()
                                    },
                                    0, !1)
                        },
                        l.bind("keydown",
                            function(e) {
                                0 !== E.matches.length && -1 !== s.indexOf(e.which) && ( - 1 != E.activeIdx || 13 !== e.which && 9 !== e.which) && (e.preventDefault(), 40 === e.which ? (E.activeIdx = (E.activeIdx + 1) % E.matches.length, E.$digest()) : 38 === e.which ? (E.activeIdx = (E.activeIdx > 0 ? E.activeIdx: E.matches.length) - 1, E.$digest()) : 13 === e.which || 9 === e.which ? E.$apply(function() {
                                    E.select(E.activeIdx)
                                }) : 27 === e.which && (e.stopPropagation(), T(), E.$digest()))
                            }),
                        l.bind("blur",
                            function() {
                                u = !1
                            });
                    var D = function(e) {
                        l[0] !== e.target && (T(), E.$digest())
                    };
                    r.bind("click", D),
                        c.$on("$destroy",
                            function() {
                                r.unbind("click", D),
                                C && R.remove()
                            });
                    var R = e(A)(E);
                    C ? r.find("body").append(R) : l.after(R)
                }
            }
        }]).directive("typeaheadPopup",
        function() {
            return {
                restrict: "EA",
                scope: {
                    matches: "=",
                    query: "=",
                    active: "=",
                    position: "=",
                    select: "&"
                },
                replace: !0,
                templateUrl: "template/typeahead/typeahead-popup.html",
                link: function(e, t, n) {
                    e.templateUrl = n.templateUrl,
                        e.isOpen = function() {
                            return e.matches.length > 0
                        },
                        e.isActive = function(t) {
                            return e.active == t
                        },
                        e.selectActive = function(t) {
                            e.active = t
                        },
                        e.selectMatch = function(t) {
                            e.select({
                                activeIdx: t
                            })
                        }
                }
            }
        }).directive("typeaheadMatch", ["$http", "$templateCache", "$compile", "$parse",
        function(e, t, n, i) {
            return {
                restrict: "EA",
                scope: {
                    index: "=",
                    match: "=",
                    query: "="
                },
                link: function(r, a, o) {
                    var s = i(o.templateUrl)(r.$parent) || "template/typeahead/typeahead-match.html";
                    e.get(s, {
                        cache: t
                    }).success(function(e) {
                        a.replaceWith(n(e.trim())(r))
                    })
                }
            }
        }]).filter("typeaheadHighlight",
        function() {
            function e(e) {
                return e.replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1")
            }
            return function(t, n) {
                return n ? ("" + t).replace(new RegExp(e(n), "gi"), "<strong>$&</strong>") : t
            }
        }),
    angular.module("ui.bootstrap.position", []).factory("$position", ["$document", "$window",
        function(e, t) {
            function n(e, n) {
                return e.currentStyle ? e.currentStyle[n] : t.getComputedStyle ? t.getComputedStyle(e)[n] : e.style[n]
            }
            function i(e) {
                return "static" === (n(e, "position") || "static")
            }
            var r = function(t) {
                for (var n = e[0], r = t.offsetParent || n; r && r !== n && i(r);) r = r.offsetParent;
                return r || n
            };
            return {
                position: function(t) {
                    var n = this.offset(t),
                        i = {
                            top: 0,
                            left: 0
                        },
                        a = r(t[0]);
                    a != e[0] && (i = this.offset(angular.element(a)), i.top += a.clientTop - a.scrollTop, i.left += a.clientLeft - a.scrollLeft);
                    var o = t[0].getBoundingClientRect();
                    return {
                        width: o.width || t.prop("offsetWidth"),
                        height: o.height || t.prop("offsetHeight"),
                        top: n.top - i.top,
                        left: n.left - i.left
                    }
                },
                offset: function(n) {
                    var i = n[0].getBoundingClientRect();
                    return {
                        width: i.width || n.prop("offsetWidth"),
                        height: i.height || n.prop("offsetHeight"),
                        top: i.top + (t.pageYOffset || e[0].documentElement.scrollTop),
                        left: i.left + (t.pageXOffset || e[0].documentElement.scrollLeft)
                    }
                },
                positionElements: function(e, t, n, i) {
                    var r, a, o, s, c = n.split("-"),
                        l = c[0],
                        d = c[1] || "center";
                    r = i ? this.offset(e) : this.position(e),
                        a = t.prop("offsetWidth"),
                        o = t.prop("offsetHeight");
                    var p = {
                            center: function() {
                                return r.left + r.width / 2 - a / 2
                            },
                            left: function() {
                                return r.left
                            },
                            right: function() {
                                return r.left + r.width
                            }
                        },
                        u = {
                            center: function() {
                                return r.top + r.height / 2 - o / 2
                            },
                            top: function() {
                                return r.top
                            },
                            bottom: function() {
                                return r.top + r.height
                            }
                        };
                    switch (l) {
                        case "right":
                            s = {
                                top: u[d](),
                                left: p[l]()
                            };
                            break;
                        case "left":
                            s = {
                                top: u[d](),
                                left: r.left - a
                            };
                            break;
                        case "bottom":
                            s = {
                                top: u[l](),
                                left: p[d]()
                            };
                            break;
                        default:
                            s = {
                                top: r.top - o,
                                left: p[d]()
                            }
                    }
                    return s
                }
            }
        }]),
    angular.module("ui.bootstrap.bindHtml", []).directive("bindHtmlUnsafe",
        function() {
            return function(e, t, n) {
                t.addClass("ng-binding").data("$binding", n.bindHtmlUnsafe),
                    e.$watch(n.bindHtmlUnsafe,
                        function(e) {
                            t.html(e || "")
                        })
            }
        }),
    angular.module("ui.bootstrap.modal", ["ui.bootstrap.transition"]).factory("$$stackedMap",
        function() {
            return {
                createNew: function() {
                    var e = [];
                    return {
                        add: function(t, n) {
                            e.push({
                                key: t,
                                value: n
                            })
                        },
                        get: function(t) {
                            for (var n = 0; n < e.length; n++) if (t == e[n].key) return e[n]
                        },
                        keys: function() {
                            for (var t = [], n = 0; n < e.length; n++) t.push(e[n].key);
                            return t
                        },
                        top: function() {
                            return e[e.length - 1]
                        },
                        remove: function(t) {
                            for (var n = -1,
                                     i = 0; i < e.length; i++) if (t == e[i].key) {
                                n = i;
                                break
                            }
                            return e.splice(n, 1)[0]
                        },
                        removeTop: function() {
                            return e.splice(e.length - 1, 1)[0]
                        },
                        length: function() {
                            return e.length
                        }
                    }
                }
            }
        }).directive("modalBackdrop", ["$timeout",
        function(e) {
            return {
                restrict: "EA",
                replace: !0,
                templateUrl: "template/modal/backdrop.html",
                link: function(t, n, i) {
                    t.backdropClass = i.backdropClass || "",
                        t.animate = !1,
                        e(function() {
                            t.animate = !0
                        })
                }
            }
        }]).directive("modalWindow", ["$modalStack", "$timeout",
        function(e, t) {
            return {
                restrict: "EA",
                scope: {
                    index: "@",
                    animate: "="
                },
                replace: !0,
                transclude: !0,
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/modal/window.html"
                },
                link: function(n, i, r) {
                    i.addClass(r.windowClass || ""),
                        n.size = r.size,
                        t(function() {
                            n.animate = !0,
                            i[0].querySelectorAll("[autofocus]").length || i[0].focus()
                        }),
                        n.close = function(t) {
                            var n = e.getTop();
                            n && n.value.backdrop && "static" != n.value.backdrop && t.target === t.currentTarget && (t.preventDefault(), t.stopPropagation(), e.dismiss(n.key, "backdrop click"))
                        }
                }
            }
        }]).directive("modalTransclude",
        function() {
            return {
                link: function(e, t, n, i, r) {
                    r(e.$parent,
                        function(e) {
                            t.empty(),
                                t.append(e)
                        })
                }
            }
        }).factory("$modalStack", ["$transition", "$timeout", "$document", "$compile", "$rootScope", "$$stackedMap",
        function(e, t, n, i, r, a) {
            function o() {
                for (var e = -1,
                         t = f.keys(), n = 0; n < t.length; n++) f.get(t[n]).value.backdrop && (e = n);
                return e
            }
            function s(e) {
                var t = n.find("body").eq(0),
                    i = f.get(e).value;
                f.remove(e),
                    l(i.modalDomEl, i.modalScope, 300,
                        function() {
                            i.modalScope.$destroy(),
                                t.toggleClass(u, f.length() > 0),
                                c()
                        })
            }
            function c() {
                if (d && -1 == o()) {
                    var e = p;
                    l(d, p, 150,
                        function() {
                            e.$destroy(),
                                e = null
                        }),
                        d = void 0,
                        p = void 0
                }
            }
            function l(n, i, r, a) {
                function o() {
                    o.done || (o.done = !0, n.remove(), a && a())
                }
                i.animate = !1;
                var s = e.transitionEndEventName;
                if (s) {
                    var c = t(o, r);
                    n.bind(s,
                        function() {
                            t.cancel(c),
                                o(),
                                i.$apply()
                        })
                } else t(o)
            }
            var d, p, u = "modal-open",
                f = a.createNew(),
                h = {};
            return r.$watch(o,
                function(e) {
                    p && (p.index = e)
                }),
                n.bind("keydown",
                    function(e) {
                        var t;
                        27 === e.which && (t = f.top(), t && t.value.keyboard && (e.preventDefault(), r.$apply(function() {
                            h.dismiss(t.key, "escape key press")
                        })))
                    }),
                h.open = function(e, t) {
                    f.add(e, {
                        deferred: t.deferred,
                        modalScope: t.scope,
                        backdrop: t.backdrop,
                        keyboard: t.keyboard
                    });
                    var a = n.find("body").eq(0),
                        s = o();
                    if (s >= 0 && !d) {
                        p = r.$new(!0),
                            p.index = s;
                        var c = angular.element("<div modal-backdrop></div>");
                        c.attr("backdrop-class", t.backdropClass),
                            d = i(c)(p),
                            a.append(d)
                    }
                    var l = angular.element("<div modal-window></div>");
                    l.attr({
                        "template-url": t.windowTemplateUrl,
                        "window-class": t.windowClass,
                        size: t.size,
                        index: f.length() - 1,
                        animate: "animate"
                    }).html(t.content);
                    var h = i(l)(t.scope);
                    f.top().value.modalDomEl = h,
                        a.append(h),
                        a.addClass(u)
                },
                h.close = function(e, t) {
                    var n = f.get(e);
                    n && (n.value.deferred.resolve(t), s(e))
                },
                h.dismiss = function(e, t) {
                    var n = f.get(e);
                    n && (n.value.deferred.reject(t), s(e))
                },
                h.dismissAll = function(e) {
                    for (var t = this.getTop(); t;) this.dismiss(t.key, e),
                        t = this.getTop()
                },
                h.getTop = function() {
                    return f.top()
                },
                h
        }]).provider("$modal",
        function() {
            var e = {
                options: {
                    backdrop: !0,
                    keyboard: !0
                },
                $get: ["$injector", "$rootScope", "$q", "$http", "$templateCache", "$controller", "$modalStack",
                    function(t, n, i, r, a, o, s) {
                        function c(e) {
                            return e.template ? i.when(e.template) : r.get(angular.isFunction(e.templateUrl) ? e.templateUrl() : e.templateUrl, {
                                cache: a
                            }).then(function(e) {
                                return e.data
                            })
                        }
                        function l(e) {
                            var n = [];
                            return angular.forEach(e,
                                function(e) { (angular.isFunction(e) || angular.isArray(e)) && n.push(i.when(t.invoke(e)))
                                }),
                                n
                        }
                        var d = {};
                        return d.open = function(t) {
                            var r = i.defer(),
                                a = i.defer(),
                                d = {
                                    result: r.promise,
                                    opened: a.promise,
                                    close: function(e) {
                                        s.close(d, e)
                                    },
                                    dismiss: function(e) {
                                        s.dismiss(d, e)
                                    }
                                };
                            if (t = angular.extend({},
                                    e.options, t), t.resolve = t.resolve || {},
                                !t.template && !t.templateUrl) throw new Error("One of template or templateUrl options is required.");
                            var p = i.all([c(t)].concat(l(t.resolve)));
                            return p.then(function(e) {
                                    var i = (t.scope || n).$new();
                                    i.$close = d.close,
                                        i.$dismiss = d.dismiss;
                                    var a, c = {},
                                        l = 1;
                                    t.controller && (c.$scope = i, c.$modalInstance = d, angular.forEach(t.resolve,
                                        function(t, n) {
                                            c[n] = e[l++]
                                        }), a = o(t.controller, c), t.controllerAs && (i[t.controllerAs] = a)),
                                        s.open(d, {
                                            scope: i,
                                            deferred: r,
                                            content: e[0],
                                            backdrop: t.backdrop,
                                            keyboard: t.keyboard,
                                            backdropClass: t.backdropClass,
                                            windowClass: t.windowClass,
                                            windowTemplateUrl: t.windowTemplateUrl,
                                            size: t.size
                                        })
                                },
                                function(e) {
                                    r.reject(e)
                                }),
                                p.then(function() {
                                        a.resolve(!0)
                                    },
                                    function() {
                                        a.reject(!1)
                                    }),
                                d
                        },
                            d
                    }]
            };
            return e
        }),
    angular.module("ui.bootstrap.transition", []).factory("$transition", ["$q", "$timeout", "$rootScope",
        function(e, t, n) {
            function i(e) {
                for (var t in e) if (void 0 !== a.style[t]) return e[t]
            }
            var r = function(i, a, o) {
                    o = o || {};
                    var s = e.defer(),
                        c = r[o.animation ? "animationEndEventName": "transitionEndEventName"],
                        l = function() {
                            n.$apply(function() {
                                i.unbind(c, l),
                                    s.resolve(i)
                            })
                        };
                    return c && i.bind(c, l),
                        t(function() {
                            angular.isString(a) ? i.addClass(a) : angular.isFunction(a) ? a(i) : angular.isObject(a) && i.css(a),
                            c || s.resolve(i)
                        }),
                        s.promise.cancel = function() {
                            c && i.unbind(c, l),
                                s.reject("Transition cancelled")
                        },
                        s.promise
                },
                a = document.createElement("trans"),
                o = {
                    WebkitTransition: "webkitTransitionEnd",
                    MozTransition: "transitionend",
                    OTransition: "oTransitionEnd",
                    transition: "transitionend"
                },
                s = {
                    WebkitTransition: "webkitAnimationEnd",
                    MozTransition: "animationend",
                    OTransition: "oAnimationEnd",
                    transition: "animationend"
                };
            return r.transitionEndEventName = i(o),
                r.animationEndEventName = i(s),
                r
        }]),
    angular.module("ui.bootstrap", ["ui.bootstrap.tpls", "ui.bootstrap.typeahead", "ui.bootstrap.position", "ui.bootstrap.bindHtml", "ui.bootstrap.modal", "ui.bootstrap.transition"]),
    angular.module("ui.bootstrap.tpls", ["template/typeahead/typeahead-match.html", "template/typeahead/typeahead-popup.html", "template/modal/backdrop.html", "template/modal/window.html"]),
    angular.module("ui.bootstrap.typeahead", ["ui.bootstrap.position", "ui.bootstrap.bindHtml"]).factory("typeaheadParser", ["$parse",
        function(e) {
            var t = /^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;
            return {
                parse: function(n) {
                    var i = n.match(t);
                    if (!i) throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "' + n + '".');
                    return {
                        itemName: i[3],
                        source: e(i[4]),
                        viewMapper: e(i[2] || i[1]),
                        modelMapper: e(i[1])
                    }
                }
            }
        }]).directive("typeahead", ["$compile", "$parse", "$q", "$timeout", "$document", "$position", "typeaheadParser",
        function(e, t, n, i, r, a, o) {
            var s = [9, 13, 27, 38, 40];
            return {
                require: "ngModel",
                link: function(c, l, d, p) {
                    var u, f = c.$eval(d.typeaheadMinLength) || 1,
                        h = c.$eval(d.typeaheadWaitMs) || 0,
                        g = c.$eval(d.typeaheadEditable) !== !1,
                        m = t(d.typeaheadLoading).assign || angular.noop,
                        y = t(d.typeaheadOnSelect),
                        v = d.typeaheadInputFormatter ? t(d.typeaheadInputFormatter) : void 0,
                        C = d.typeaheadAppendToBody ? c.$eval(d.typeaheadAppendToBody) : !1,
                        S = c.$eval(d.typeaheadFocusFirst) !== !1,
                        _ = t(d.ngModel).assign,
                        b = o.parse(d.typeahead),
                        E = c.$new();
                    c.$on("$destroy",
                        function() {
                            E.$destroy()
                        });
                    var I = "typeahead-" + E.$id + "-" + Math.floor(1e4 * Math.random());
                    l.attr({
                        "aria-autocomplete": "list",
                        "aria-expanded": !1,
                        "aria-owns": I
                    });
                    var A = angular.element("<div typeahead-popup></div>");
                    A.attr({
                        id: I,
                        matches: "matches",
                        active: "activeIdx",
                        select: "select(activeIdx)",
                        query: "query",
                        position: "position"
                    }),
                    angular.isDefined(d.typeaheadTemplateUrl) && A.attr("template-url", d.typeaheadTemplateUrl);
                    var T = function() {
                            E.matches = [],
                                E.activeIdx = -1,
                                l.attr("aria-expanded", !1)
                        },
                        k = function(e) {
                            return I + "-option-" + e
                        };
                    E.$watch("activeIdx",
                        function(e) {
                            0 > e ? l.removeAttr("aria-activedescendant") : l.attr("aria-activedescendant", k(e))
                        });
                    var w = function(e) {
                        var t = {
                            $viewValue: e
                        };
                        m(c, !0),
                            n.when(b.source(c, t)).then(function(n) {
                                    var i = e === p.$viewValue;
                                    if (i && u) if (n.length > 0) {
                                        E.activeIdx = S ? 0 : -1,
                                            E.matches.length = 0;
                                        for (var r = 0; r < n.length; r++) t[b.itemName] = n[r],
                                            E.matches.push({
                                                id: k(r),
                                                label: b.viewMapper(E, t),
                                                model: n[r]
                                            });
                                        E.query = e,
                                            E.position = C ? a.offset(l) : a.position(l),
                                            E.position.top = E.position.top + l.prop("offsetHeight"),
                                            l.attr("aria-expanded", !0)
                                    } else T();
                                    i && m(c, !1)
                                },
                                function() {
                                    T(),
                                        m(c, !1)
                                })
                    };
                    T(),
                        E.query = void 0;
                    var $, P = function(e) {
                            $ = i(function() {
                                    w(e)
                                },
                                h)
                        },
                        N = function() {
                            $ && i.cancel($)
                        };
                    p.$parsers.unshift(function(e) {
                        return u = !0,
                            e && e.length >= f ? h > 0 ? (N(), P(e)) : w(e) : (m(c, !1), N(), T()),
                            g ? e: e ? void p.$setValidity("editable", !1) : (p.$setValidity("editable", !0), e)
                    }),
                        p.$formatters.push(function(e) {
                            var t, n, i = {};
                            return v ? (i.$model = e, v(c, i)) : (i[b.itemName] = e, t = b.viewMapper(c, i), i[b.itemName] = void 0, n = b.viewMapper(c, i), t !== n ? t: e)
                        }),
                        E.select = function(e) {
                            var t, n, r = {};
                            r[b.itemName] = n = E.matches[e].model,
                                t = b.modelMapper(c, r),
                                _(c, t),
                                p.$setValidity("editable", !0),
                                y(c, {
                                    $item: n,
                                    $model: t,
                                    $label: b.viewMapper(c, r)
                                }),
                                T(),
                                i(function() {
                                        l[0].focus()
                                    },
                                    0, !1)
                        },
                        l.bind("keydown",
                            function(e) {
                                0 !== E.matches.length && -1 !== s.indexOf(e.which) && ( - 1 != E.activeIdx || 13 !== e.which && 9 !== e.which) && (e.preventDefault(), 40 === e.which ? (E.activeIdx = (E.activeIdx + 1) % E.matches.length, E.$digest()) : 38 === e.which ? (E.activeIdx = (E.activeIdx > 0 ? E.activeIdx: E.matches.length) - 1, E.$digest()) : 13 === e.which || 9 === e.which ? E.$apply(function() {
                                    E.select(E.activeIdx)
                                }) : 27 === e.which && (e.stopPropagation(), T(), E.$digest()))
                            }),
                        l.bind("blur",
                            function() {
                                u = !1
                            });
                    var D = function(e) {
                        l[0] !== e.target && (T(), E.$digest())
                    };
                    r.bind("click", D),
                        c.$on("$destroy",
                            function() {
                                r.unbind("click", D),
                                C && R.remove()
                            });
                    var R = e(A)(E);
                    C ? r.find("body").append(R) : l.after(R)
                }
            }
        }]).directive("typeaheadPopup",
        function() {
            return {
                restrict: "EA",
                scope: {
                    matches: "=",
                    query: "=",
                    active: "=",
                    position: "=",
                    select: "&"
                },
                replace: !0,
                templateUrl: "template/typeahead/typeahead-popup.html",
                link: function(e, t, n) {
                    e.templateUrl = n.templateUrl,
                        e.isOpen = function() {
                            return e.matches.length > 0
                        },
                        e.isActive = function(t) {
                            return e.active == t
                        },
                        e.selectActive = function(t) {
                            e.active = t
                        },
                        e.selectMatch = function(t) {
                            e.select({
                                activeIdx: t
                            })
                        }
                }
            }
        }).directive("typeaheadMatch", ["$http", "$templateCache", "$compile", "$parse",
        function(e, t, n, i) {
            return {
                restrict: "EA",
                scope: {
                    index: "=",
                    match: "=",
                    query: "="
                },
                link: function(r, a, o) {
                    var s = i(o.templateUrl)(r.$parent) || "template/typeahead/typeahead-match.html";
                    e.get(s, {
                        cache: t
                    }).success(function(e) {
                        a.replaceWith(n(e.trim())(r))
                    })
                }
            }
        }]).filter("typeaheadHighlight",
        function() {
            function e(e) {
                return e.replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1")
            }
            return function(t, n) {
                return n ? ("" + t).replace(new RegExp(e(n), "gi"), "<strong>$&</strong>") : t
            }
        }),
    angular.module("ui.bootstrap.position", []).factory("$position", ["$document", "$window",
        function(e, t) {
            function n(e, n) {
                return e.currentStyle ? e.currentStyle[n] : t.getComputedStyle ? t.getComputedStyle(e)[n] : e.style[n]
            }
            function i(e) {
                return "static" === (n(e, "position") || "static")
            }
            var r = function(t) {
                for (var n = e[0], r = t.offsetParent || n; r && r !== n && i(r);) r = r.offsetParent;
                return r || n
            };
            return {
                position: function(t) {
                    var n = this.offset(t),
                        i = {
                            top: 0,
                            left: 0
                        },
                        a = r(t[0]);
                    a != e[0] && (i = this.offset(angular.element(a)), i.top += a.clientTop - a.scrollTop, i.left += a.clientLeft - a.scrollLeft);
                    var o = t[0].getBoundingClientRect();
                    return {
                        width: o.width || t.prop("offsetWidth"),
                        height: o.height || t.prop("offsetHeight"),
                        top: n.top - i.top,
                        left: n.left - i.left
                    }
                },
                offset: function(n) {
                    var i = n[0].getBoundingClientRect();
                    return {
                        width: i.width || n.prop("offsetWidth"),
                        height: i.height || n.prop("offsetHeight"),
                        top: i.top + (t.pageYOffset || e[0].documentElement.scrollTop),
                        left: i.left + (t.pageXOffset || e[0].documentElement.scrollLeft)
                    }
                },
                positionElements: function(e, t, n, i) {
                    var r, a, o, s, c = n.split("-"),
                        l = c[0],
                        d = c[1] || "center";
                    r = i ? this.offset(e) : this.position(e),
                        a = t.prop("offsetWidth"),
                        o = t.prop("offsetHeight");
                    var p = {
                            center: function() {
                                return r.left + r.width / 2 - a / 2
                            },
                            left: function() {
                                return r.left
                            },
                            right: function() {
                                return r.left + r.width
                            }
                        },
                        u = {
                            center: function() {
                                return r.top + r.height / 2 - o / 2
                            },
                            top: function() {
                                return r.top
                            },
                            bottom: function() {
                                return r.top + r.height
                            }
                        };
                    switch (l) {
                        case "right":
                            s = {
                                top: u[d](),
                                left: p[l]()
                            };
                            break;
                        case "left":
                            s = {
                                top: u[d](),
                                left: r.left - a
                            };
                            break;
                        case "bottom":
                            s = {
                                top: u[l](),
                                left: p[d]()
                            };
                            break;
                        default:
                            s = {
                                top: r.top - o,
                                left: p[d]()
                            }
                    }
                    return s
                }
            }
        }]),
    angular.module("ui.bootstrap.bindHtml", []).directive("bindHtmlUnsafe",
        function() {
            return function(e, t, n) {
                t.addClass("ng-binding").data("$binding", n.bindHtmlUnsafe),
                    e.$watch(n.bindHtmlUnsafe,
                        function(e) {
                            t.html(e || "")
                        })
            }
        }),
    angular.module("ui.bootstrap.modal", ["ui.bootstrap.transition"]).factory("$$stackedMap",
        function() {
            return {
                createNew: function() {
                    var e = [];
                    return {
                        add: function(t, n) {
                            e.push({
                                key: t,
                                value: n
                            })
                        },
                        get: function(t) {
                            for (var n = 0; n < e.length; n++) if (t == e[n].key) return e[n]
                        },
                        keys: function() {
                            for (var t = [], n = 0; n < e.length; n++) t.push(e[n].key);
                            return t
                        },
                        top: function() {
                            return e[e.length - 1]
                        },
                        remove: function(t) {
                            for (var n = -1,
                                     i = 0; i < e.length; i++) if (t == e[i].key) {
                                n = i;
                                break
                            }
                            return e.splice(n, 1)[0]
                        },
                        removeTop: function() {
                            return e.splice(e.length - 1, 1)[0]
                        },
                        length: function() {
                            return e.length
                        }
                    }
                }
            }
        }).directive("modalBackdrop", ["$timeout",
        function(e) {
            return {
                restrict: "EA",
                replace: !0,
                templateUrl: "template/modal/backdrop.html",
                link: function(t, n, i) {
                    t.backdropClass = i.backdropClass || "",
                        t.animate = !1,
                        e(function() {
                            t.animate = !0
                        })
                }
            }
        }]).directive("modalWindow", ["$modalStack", "$timeout",
        function(e, t) {
            return {
                restrict: "EA",
                scope: {
                    index: "@",
                    animate: "="
                },
                replace: !0,
                transclude: !0,
                templateUrl: function(e, t) {
                    return t.templateUrl || "template/modal/window.html"
                },
                link: function(n, i, r) {
                    i.addClass(r.windowClass || ""),
                        n.size = r.size,
                        t(function() {
                            n.animate = !0,
                            i[0].querySelectorAll("[autofocus]").length || i[0].focus()
                        }),
                        n.close = function(t) {
                            var n = e.getTop();
                            n && n.value.backdrop && "static" != n.value.backdrop && t.target === t.currentTarget && (t.preventDefault(), t.stopPropagation(), e.dismiss(n.key, "backdrop click"))
                        }
                }
            }
        }]).directive("modalTransclude",
        function() {
            return {
                link: function(e, t, n, i, r) {
                    r(e.$parent,
                        function(e) {
                            t.empty(),
                                t.append(e)
                        })
                }
            }
        }).factory("$modalStack", ["$transition", "$timeout", "$document", "$compile", "$rootScope", "$$stackedMap",
        function(e, t, n, i, r, a) {
            function o() {
                for (var e = -1,
                         t = f.keys(), n = 0; n < t.length; n++) f.get(t[n]).value.backdrop && (e = n);
                return e
            }
            function s(e) {
                var t = n.find("body").eq(0),
                    i = f.get(e).value;
                f.remove(e),
                    l(i.modalDomEl, i.modalScope, 300,
                        function() {
                            i.modalScope.$destroy(),
                                t.toggleClass(u, f.length() > 0),
                                c()
                        })
            }
            function c() {
                if (d && -1 == o()) {
                    var e = p;
                    l(d, p, 150,
                        function() {
                            e.$destroy(),
                                e = null
                        }),
                        d = void 0,
                        p = void 0
                }
            }
            function l(n, i, r, a) {
                function o() {
                    o.done || (o.done = !0, n.remove(), a && a())
                }
                i.animate = !1;
                var s = e.transitionEndEventName;
                if (s) {
                    var c = t(o, r);
                    n.bind(s,
                        function() {
                            t.cancel(c),
                                o(),
                                i.$apply()
                        })
                } else t(o)
            }
            var d, p, u = "modal-open",
                f = a.createNew(),
                h = {};
            return r.$watch(o,
                function(e) {
                    p && (p.index = e)
                }),
                n.bind("keydown",
                    function(e) {
                        var t;
                        27 === e.which && (t = f.top(), t && t.value.keyboard && (e.preventDefault(), r.$apply(function() {
                            h.dismiss(t.key, "escape key press")
                        })))
                    }),
                h.open = function(e, t) {
                    f.add(e, {
                        deferred: t.deferred,
                        modalScope: t.scope,
                        backdrop: t.backdrop,
                        keyboard: t.keyboard
                    });
                    var a = n.find("body").eq(0),
                        s = o();
                    if (s >= 0 && !d) {
                        p = r.$new(!0),
                            p.index = s;
                        var c = angular.element("<div modal-backdrop></div>");
                        c.attr("backdrop-class", t.backdropClass),
                            d = i(c)(p),
                            a.append(d)
                    }
                    var l = angular.element("<div modal-window></div>");
                    l.attr({
                        "template-url": t.windowTemplateUrl,
                        "window-class": t.windowClass,
                        size: t.size,
                        index: f.length() - 1,
                        animate: "animate"
                    }).html(t.content);
                    var h = i(l)(t.scope);
                    f.top().value.modalDomEl = h,
                        a.append(h),
                        a.addClass(u)
                },
                h.close = function(e, t) {
                    var n = f.get(e);
                    n && (n.value.deferred.resolve(t), s(e))
                },
                h.dismiss = function(e, t) {
                    var n = f.get(e);
                    n && (n.value.deferred.reject(t), s(e))
                },
                h.dismissAll = function(e) {
                    for (var t = this.getTop(); t;) this.dismiss(t.key, e),
                        t = this.getTop()
                },
                h.getTop = function() {
                    return f.top()
                },
                h
        }]).provider("$modal",
        function() {
            var e = {
                options: {
                    backdrop: !0,
                    keyboard: !0
                },
                $get: ["$injector", "$rootScope", "$q", "$http", "$templateCache", "$controller", "$modalStack",
                    function(t, n, i, r, a, o, s) {
                        function c(e) {
                            return e.template ? i.when(e.template) : r.get(angular.isFunction(e.templateUrl) ? e.templateUrl() : e.templateUrl, {
                                cache: a
                            }).then(function(e) {
                                return e.data
                            })
                        }
                        function l(e) {
                            var n = [];
                            return angular.forEach(e,
                                function(e) { (angular.isFunction(e) || angular.isArray(e)) && n.push(i.when(t.invoke(e)))
                                }),
                                n
                        }
                        var d = {};
                        return d.open = function(t) {
                            var r = i.defer(),
                                a = i.defer(),
                                d = {
                                    result: r.promise,
                                    opened: a.promise,
                                    close: function(e) {
                                        s.close(d, e)
                                    },
                                    dismiss: function(e) {
                                        s.dismiss(d, e)
                                    }
                                };
                            if (t = angular.extend({},
                                    e.options, t), t.resolve = t.resolve || {},
                                !t.template && !t.templateUrl) throw new Error("One of template or templateUrl options is required.");
                            var p = i.all([c(t)].concat(l(t.resolve)));
                            return p.then(function(e) {
                                    var i = (t.scope || n).$new();
                                    i.$close = d.close,
                                        i.$dismiss = d.dismiss;
                                    var a, c = {},
                                        l = 1;
                                    t.controller && (c.$scope = i, c.$modalInstance = d, angular.forEach(t.resolve,
                                        function(t, n) {
                                            c[n] = e[l++]
                                        }), a = o(t.controller, c), t.controllerAs && (i[t.controllerAs] = a)),
                                        s.open(d, {
                                            scope: i,
                                            deferred: r,
                                            content: e[0],
                                            backdrop: t.backdrop,
                                            keyboard: t.keyboard,
                                            backdropClass: t.backdropClass,
                                            windowClass: t.windowClass,
                                            windowTemplateUrl: t.windowTemplateUrl,
                                            size: t.size
                                        })
                                },
                                function(e) {
                                    r.reject(e)
                                }),
                                p.then(function() {
                                        a.resolve(!0)
                                    },
                                    function() {
                                        a.reject(!1)
                                    }),
                                d
                        },
                            d
                    }]
            };
            return e
        }),
    angular.module("ui.bootstrap.transition", []).factory("$transition", ["$q", "$timeout", "$rootScope",
        function(e, t, n) {
            function i(e) {
                for (var t in e) if (void 0 !== a.style[t]) return e[t]
            }
            var r = function(i, a, o) {
                    o = o || {};
                    var s = e.defer(),
                        c = r[o.animation ? "animationEndEventName": "transitionEndEventName"],
                        l = function() {
                            n.$apply(function() {
                                i.unbind(c, l),
                                    s.resolve(i)
                            })
                        };
                    return c && i.bind(c, l),
                        t(function() {
                            angular.isString(a) ? i.addClass(a) : angular.isFunction(a) ? a(i) : angular.isObject(a) && i.css(a),
                            c || s.resolve(i)
                        }),
                        s.promise.cancel = function() {
                            c && i.unbind(c, l),
                                s.reject("Transition cancelled")
                        },
                        s.promise
                },
                a = document.createElement("trans"),
                o = {
                    WebkitTransition: "webkitTransitionEnd",
                    MozTransition: "transitionend",
                    OTransition: "oTransitionEnd",
                    transition: "transitionend"
                },
                s = {
                    WebkitTransition: "webkitAnimationEnd",
                    MozTransition: "animationend",
                    OTransition: "oAnimationEnd",
                    transition: "animationend"
                };
            return r.transitionEndEventName = i(o),
                r.animationEndEventName = i(s),
                r
        }]),
    angular.module("template/typeahead/typeahead-match.html", []).run(["$templateCache",
        function(e) {
            e.put("template/typeahead/typeahead-match.html", '<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')
        }]),
    angular.module("template/typeahead/typeahead-popup.html", []).run(["$templateCache",
        function(e) {
            e.put("template/typeahead/typeahead-popup.html", '<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')
        }]),
    angular.module("template/modal/backdrop.html", []).run(["$templateCache",
        function(e) {
            e.put("template/modal/backdrop.html", '<div class="modal-backdrop fade {{ backdropClass }}"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')
        }]),
    angular.module("template/modal/window.html", []).run(["$templateCache",
        function(e) {
            e.put("template/modal/window.html", '<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" modal-transclude></div></div>\n</div>')
        }]),
    $(function() {
        function e() {
            var e;
            null != localStorage.getItem("unloadData") && (e = JSON.parse(localStorage.getItem("unloadData")), newrelic.addPageAction("checkout-unload-done", {
                unloadTimeDuration: Number(e.time),
                targetURL: e.href,
                sourceElementId: e.id,
                ourceElementClass: e["class"],
                deviceType: window.isMobile() ? "Mobile": "Desktop",
                ecomSessionId: $.cookie("s_ecom_session"),
                isLoggedIn: window.isLogin() ? !0 : !1
            }), localStorage.removeItem("unloadData"))
        }
        function t() {
            window.onbeforeunload = function() {
                var e = new Date;
                n = e.getTime()
            },
                window.onunload = function() {
                    var e = new Date,
                        t = e.getTime(),
                        i = {};
                    i.time = ((t - n) / 1e3).toFixed(2),
                    document && document.activeElement && (i.id = document.activeElement.id, i.href = document.activeElement.href, i["class"] = document.activeElement.classList ? document.activeElement.classList.toString() : ""),
                        localStorage.setItem("unloadData", JSON.stringify(i))
                }
        }
        window.newrelic = window.newrelic || {};
        var n;
        "undefined" != typeof Storage && localStorage.getItem("unloadData") && e(),
            t(),
            window.newrelic.fireCustomPageAction = function(e, t, n) {
                if (performance && performance.timing) {
                    var i = t - performance.timing.navigationStart,
                        r = (i / 1e3).toFixed(2),
                        a = navigator.connection || navigator.mozConnection || navigator.webkitConnection || navigator.msConnection,
                        o = new UAParser;
                    o.setUA(window.navigator.userAgent);
                    var s = o.getResult(),
                        c = [];
                    n && n.line_items && (c = n.line_items.map(function(e) {
                        return e.sku_id
                    })),
                        newrelic.addPageAction(e, {
                            loadTimeDuration: Number(r),
                            deviceType: window.isMobile() ? "Mobile": "Desktop",
                            bandwidth: a && a.bandwidth ? a.bandwidth: "",
                            isLoggedIn: window.isLogin() ? !0 : !1,
                            userAgentString: window.navigator.userAgent,
                            OSversion: s.os.version ? s.os.version: "",
                            userAgentType: s.device.type ? s.device.type: "",
                            checkoutv3ui: $.cookie("checkoutv3ui"),
                            isEppUser: SCart.isEppUser(),
                            ecomSessionId: $.cookie("s_ecom_session"),
                            skuIds: c
                        })
                }
            },
            window.newrelic.fireCustomPageLoadTag = function(e, t) {
                var n = new UAParser;
                n.setUA(window.navigator.userAgent);
                var i = n.getResult();
                newrelic.addPageAction(e, {
                    loadTimeDuration: Number(t),
                    deviceType: window.isMobile() ? "Mobile": "Desktop",
                    isLoggedIn: window.isLogin() ? !0 : !1,
                    userAgentString: window.navigator.userAgent,
                    OSversion: i.os.version ? i.os.version: "",
                    userAgentString: window.navigator.userAgent,
                    checkoutv3ui: $.cookie("checkoutv3ui"),
                    isEppUser: SCart.isEppUser(),
                    ecomSessionId: $.cookie("s_ecom_session")
                })
            }
    }),
    angular.module("slickCarousel", []).constant("slickCarouselConfig", {
        method: {},
        event: {}
    }).directive("slick", ["$timeout", "slickCarouselConfig",
        function(e, t) {
            var n, i;
            return n = ["slickGoTo", "slickNext", "slickPrev", "slickPause", "slickPlay", "slickAdd", "slickRemove", "slickFilter", "slickUnfilter", "unslick"],
                i = ["afterChange", "beforeChange", "breakpoint", "destroy", "edge", "init", "reInit", "setPosition", "swipe"],
                {
                    scope: {
                        settings: "=",
                        enabled: "@",
                        accessibility: "@",
                        adaptiveHeight: "@",
                        autoplay: "@",
                        autoplaySpeed: "@",
                        arrows: "@",
                        asNavFor: "@",
                        appendArrows: "@",
                        prevArrow: "@",
                        nextArrow: "@",
                        centerMode: "@",
                        centerPadding: "@",
                        cssEase: "@",
                        customPaging: "&",
                        dots: "@",
                        draggable: "@",
                        fade: "@",
                        focusOnSelect: "@",
                        easing: "@",
                        edgeFriction: "@",
                        infinite: "@",
                        initialSlide: "@",
                        lazyLoad: "@",
                        mobileFirst: "@",
                        pauseOnHover: "@",
                        pauseOnDotsHover: "@",
                        respondTo: "@",
                        responsive: "=?",
                        rows: "@",
                        slide: "@",
                        slidesPerRow: "@",
                        slidesToShow: "@",
                        slidesToScroll: "@",
                        speed: "@",
                        swipe: "@",
                        swipeToSlide: "@",
                        touchMove: "@",
                        touchThreshold: "@",
                        useCSS: "@",
                        variableWidth: "@",
                        vertical: "@",
                        verticalSwiping: "@",
                        rtl: "@"
                    },
                    restrict: "AE",
                    link: function(i, r, a) {
                        angular.element(r).css("display", "none");
                        var o, s, c, l, d, p;
                        return s = function() {
                            o = angular.extend(angular.copy(t), {
                                    enabled: "false" !== i.enabled,
                                    accessibility: "false" !== i.accessibility,
                                    adaptiveHeight: "true" === i.adaptiveHeight,
                                    autoplay: "true" === i.autoplay,
                                    autoplaySpeed: null != i.autoplaySpeed ? parseInt(i.autoplaySpeed, 10) : 3e3,
                                    arrows: "false" !== i.arrows,
                                    asNavFor: i.asNavFor ? i.asNavFor: void 0,
                                    appendArrows: angular.element(i.appendArrows ? i.appendArrows: r),
                                    prevArrow: i.prevArrow ? angular.element(i.prevArrow) : void 0,
                                    nextArrow: i.nextArrow ? angular.element(i.nextArrow) : void 0,
                                    centerMode: "true" === i.centerMode,
                                    centerPadding: i.centerPadding || "50px",
                                    cssEase: i.cssEase || "ease",
                                    customPaging: a.customPaging ?
                                        function(e, t) {
                                            return i.customPaging({
                                                slick: e,
                                                index: t
                                            })
                                        }: void 0,
                                    dots: "true" === i.dots,
                                    draggable: "false" !== i.draggable,
                                    fade: "true" === i.fade,
                                    focusOnSelect: "true" === i.focusOnSelect,
                                    easing: i.easing || "linear",
                                    edgeFriction: i.edgeFriction || .15,
                                    infinite: "false" !== i.infinite,
                                    initialSlide: parseInt(i.initialSlide) || 0,
                                    lazyLoad: i.lazyLoad || "ondemand",
                                    mobileFirst: "true" === i.mobileFirst,
                                    pauseOnHover: "false" !== i.pauseOnHover,
                                    pauseOnDotsHover: "true" === i.pauseOnDotsHover,
                                    respondTo: null != i.respondTo ? i.respondTo: "window",
                                    responsive: i.responsive || void 0,
                                    rows: null != i.rows ? parseInt(i.rows, 10) : 1,
                                    slide: i.slide || "",
                                    slidesPerRow: null != i.slidesPerRow ? parseInt(i.slidesPerRow, 10) : 1,
                                    slidesToShow: null != i.slidesToShow ? parseInt(i.slidesToShow, 10) : 1,
                                    slidesToScroll: null != i.slidesToScroll ? parseInt(i.slidesToScroll, 10) : 1,
                                    speed: null != i.speed ? parseInt(i.speed, 10) : 300,
                                    swipe: "false" !== i.swipe,
                                    swipeToSlide: "true" === i.swipeToSlide,
                                    touchMove: "false" !== i.touchMove,
                                    touchThreshold: i.touchThreshold ? parseInt(i.touchThreshold, 10) : 5,
                                    useCSS: "false" !== i.useCSS,
                                    variableWidth: "true" === i.variableWidth,
                                    vertical: "true" === i.vertical,
                                    verticalSwiping: "true" === i.verticalSwiping,
                                    rtl: "true" === i.rtl
                                },
                                i.settings)
                        },
                            c = function() {
                                var e = angular.element(r);
                                return e.hasClass("slick-initialized") && (e.remove("slick-list"), e.slick("unslick")),
                                    e
                            },
                            l = function() {
                                s();
                                var t = angular.element(r);
                                if (angular.element(r).hasClass("slick-initialized")) {
                                    if (o.enabled) return t.slick("getSlick");
                                    c()
                                } else {
                                    if (!o.enabled) return;
                                    t.on("init",
                                        function(e, t) {
                                            return "undefined" != typeof o.event.init && o.event.init(e, t),
                                                "undefined" != typeof p ? t.slideHandler(p) : void 0
                                        }),
                                        e(function() {
                                            angular.element(r).css("display", "block"),
                                                t.slick(o)
                                        })
                                }
                                i.internalControl = o.method || {},
                                    n.forEach(function(e) {
                                        i.internalControl[e] = function() {
                                            var n;
                                            n = Array.prototype.slice.call(arguments),
                                                n.unshift(e),
                                                t.slick.apply(r, n)
                                        }
                                    }),
                                    t.on("afterChange",
                                        function(t, n, r, a) {
                                            p = r,
                                            "undefined" != typeof o.event.afterChange && e(function() {
                                                i.$apply(function() {
                                                    o.event.afterChange(t, n, r, a)
                                                })
                                            })
                                        }),
                                    t.on("beforeChange",
                                        function(t, n, r, a) {
                                            "undefined" != typeof o.event.beforeChange && e(function() {
                                                e(function() {
                                                    i.$apply(function() {
                                                        o.event.beforeChange(t, n, r, a)
                                                    })
                                                })
                                            })
                                        }),
                                    t.on("reInit",
                                        function(t, n) {
                                            "undefined" != typeof o.event.reInit && e(function() {
                                                i.$apply(function() {
                                                    o.event.reInit(t, n)
                                                })
                                            })
                                        }),
                                "undefined" != typeof o.event.breakpoint && t.on("breakpoint",
                                    function(t, n, r) {
                                        e(function() {
                                            i.$apply(function() {
                                                o.event.breakpoint(t, n, r)
                                            })
                                        })
                                    }),
                                "undefined" != typeof o.event.destroy && t.on("destroy",
                                    function(t, n) {
                                        e(function() {
                                            i.$apply(function() {
                                                o.event.destroy(t, n)
                                            })
                                        })
                                    }),
                                "undefined" != typeof o.event.edge && t.on("edge",
                                    function(t, n, r) {
                                        e(function() {
                                            i.$apply(function() {
                                                o.event.edge(t, n, r)
                                            })
                                        })
                                    }),
                                "undefined" != typeof o.event.setPosition && t.on("setPosition",
                                    function(t, n) {
                                        e(function() {
                                            i.$apply(function() {
                                                o.event.setPosition(t, n)
                                            })
                                        })
                                    }),
                                "undefined" != typeof o.event.swipe && t.on("swipe",
                                    function(t, n, r) {
                                        e(function() {
                                            i.$apply(function() {
                                                o.event.swipe(t, n, r)
                                            })
                                        })
                                    })
                            },
                            d = function() {
                                c(),
                                    l()
                            },
                            r.one("$destroy",
                                function() {
                                    c()
                                }),
                            i.$watch("settings",
                                function(e, t) {
                                    return null !== e ? d() : void 0
                                },
                                !0)
                    }
                }
        }]),
    function(e, t, n) {
        "use strict";
        function i(e) {
            function t(e, t) {
                return e ? r(e) ? e.indexOf(t) >= 0 : e.hasOwnProperty(t) : void 0
            }
            return ["$animate",
                function(e) {
                    return {
                        restrict: "AE",
                        transclude: "element",
                        terminal: !0,
                        require: "^^ngMessages",
                        link: function(n, i, a, o, s) {
                            var c, l = i[0],
                                d = a.ngMessage || a.when,
                                p = a.ngMessageExp || a.whenExp,
                                u = function(e) {
                                    c = e ? r(e) ? e: e.split(/[\s,]+/) : null,
                                        o.reRender()
                                };
                            p ? (u(n.$eval(p)), n.$watchCollection(p, u)) : u(d);
                            var f, h;
                            o.register(l, h = {
                                test: function(e) {
                                    return t(c, e)
                                },
                                attach: function() {
                                    f || s(n,
                                        function(t) {
                                            e.enter(t, null, i),
                                                f = t,
                                                f.on("$destroy",
                                                    function() {
                                                        f && (o.deregister(l), h.detach())
                                                    })
                                        })
                                },
                                detach: function() {
                                    if (f) {
                                        var t = f;
                                        f = null,
                                            e.leave(t)
                                    }
                                }
                            })
                        }
                    }
                }]
        }
        var r = t.isArray,
            a = t.forEach,
            o = t.isString,
            s = t.element;
        t.module("ngMessages", []).directive("ngMessages", ["$animate",
            function(e) {
                function t(e, t) {
                    return o(t) && 0 === t.length || n(e.$eval(t))
                }
                function n(e) {
                    return o(e) ? e.length: !!e
                }
                var i = "ng-active",
                    r = "ng-inactive";
                return {
                    require: "ngMessages",
                    restrict: "AE",
                    controller: ["$element", "$scope", "$attrs",
                        function(o, s, c) {
                            function l(e, t) {
                                for (var n = t,
                                         i = []; n && n !== e;) {
                                    var r = n.$$ngMessageNode;
                                    if (r && r.length) return m[r];
                                    n.childNodes.length && -1 == i.indexOf(n) ? (i.push(n), n = n.childNodes[n.childNodes.length - 1]) : n = n.previousSibling || n.parentNode
                                }
                            }
                            function d(e, t, n) {
                                var i = m[n];
                                if (h.head) {
                                    var r = l(e, t);
                                    r ? (i.next = r.next, r.next = i) : (i.next = h.head, h.head = i)
                                } else h.head = i
                            }
                            function p(e, t, n) {
                                var i = m[n],
                                    r = l(e, t);
                                r ? r.next = i.next: h.head = i.next
                            }
                            var u, f, h = this,
                                g = 0,
                                m = this.messages = {};
                            this.render = function(l) {
                                l = l || {},
                                    u = !1,
                                    f = l;
                                for (var d = t(s, c.ngMessagesMultiple) || t(s, c.multiple), p = [], g = {},
                                         m = h.head, y = !1, v = 0; null != m;) {
                                    v++;
                                    var C = m.message,
                                        S = !1;
                                    y || a(l,
                                        function(e, t) {
                                            if (!S && n(e) && C.test(t)) {
                                                if (g[t]) return;
                                                g[t] = !0,
                                                    S = !0,
                                                    C.attach()
                                            }
                                        }),
                                        S ? y = !d: p.push(C),
                                        m = m.next
                                }
                                a(p,
                                    function(e) {
                                        e.detach()
                                    }),
                                    p.length !== v ? e.setClass(o, i, r) : e.setClass(o, r, i)
                            },
                                s.$watchCollection(c.ngMessages || c["for"], h.render),
                                this.reRender = function() {
                                    u || (u = !0, s.$evalAsync(function() {
                                        u && f && h.render(f)
                                    }))
                                },
                                this.register = function(e, t) {
                                    var n = g.toString();
                                    m[n] = {
                                        message: t
                                    },
                                        d(o[0], e, n),
                                        e.$$ngMessageNode = n,
                                        g++,
                                        h.reRender()
                                },
                                this.deregister = function(e) {
                                    var t = e.$$ngMessageNode;
                                    delete e.$$ngMessageNode,
                                        p(o[0], e, t),
                                        delete m[t],
                                        h.reRender()
                                }
                        }]
                }
            }]).directive("ngMessagesInclude", ["$templateRequest", "$document", "$compile",
            function(e, t, n) {
                return {
                    restrict: "AE",
                    require: "^^ngMessages",
                    link: function(i, r, a) {
                        var o = a.ngMessagesInclude || a.src;
                        e(o).then(function(e) {
                            n(e)(i,
                                function(e) {
                                    r.after(e);
                                    var n = s(t[0].createComment(" ngMessagesInclude: " + o + " "));
                                    r.after(n),
                                        r.remove()
                                })
                        })
                    }
                }
            }]).directive("ngMessage", i("AE")).directive("ngMessageExp", i("A"))
    } (window, window.angular),
    function(e, t) {
        "function" == typeof define && define.amd ? define([], t) : e.forge = t()
    } (this,
        function() {
            var e, t, n;
            return function(i) {
                function r(e, t) {
                    return S.call(e, t)
                }
                function a(e, t) {
                    var n, i, r, a, o, s, c, l, d, p, u, f = t && t.split("/"),
                        h = v.map,
                        g = h && h["*"] || {};
                    if (e && "." === e.charAt(0)) if (t) {
                        for (f = f.slice(0, f.length - 1), e = e.split("/"), o = e.length - 1, v.nodeIdCompat && b.test(e[o]) && (e[o] = e[o].replace(b, "")), e = f.concat(e), d = 0; d < e.length; d += 1) if (u = e[d], "." === u) e.splice(d, 1),
                            d -= 1;
                        else if (".." === u) {
                            if (1 === d && (".." === e[2] || ".." === e[0])) break;
                            d > 0 && (e.splice(d - 1, 2), d -= 2)
                        }
                        e = e.join("/")
                    } else 0 === e.indexOf("./") && (e = e.substring(2));
                    if ((f || g) && h) {
                        for (n = e.split("/"), d = n.length; d > 0; d -= 1) {
                            if (i = n.slice(0, d).join("/"), f) for (p = f.length; p > 0; p -= 1) if (r = h[f.slice(0, p).join("/")], r && (r = r[i])) {
                                a = r,
                                    s = d;
                                break
                            }
                            if (a) break; ! c && g && g[i] && (c = g[i], l = d)
                        } ! a && c && (a = c, s = l),
                        a && (n.splice(0, s, a), e = n.join("/"))
                    }
                    return e
                }
                function o(e, t) {
                    return function() {
                        return f.apply(i, _.call(arguments, 0).concat([e, t]))
                    }
                }
                function s(e) {
                    return function(t) {
                        return a(t, e)
                    }
                }
                function c(e) {
                    return function(t) {
                        m[e] = t
                    }
                }
                function l(e) {
                    if (r(y, e)) {
                        var t = y[e];
                        delete y[e],
                            C[e] = !0,
                            u.apply(i, t)
                    }
                    if (!r(m, e) && !r(C, e)) throw new Error("No " + e);
                    return m[e]
                }
                function d(e) {
                    var t, n = e ? e.indexOf("!") : -1;
                    return n > -1 && (t = e.substring(0, n), e = e.substring(n + 1, e.length)),
                        [t, e]
                }
                function p(e) {
                    return function() {
                        return v && v.config && v.config[e] || {}
                    }
                }
                var u, f, h, g, m = {},
                    y = {},
                    v = {},
                    C = {},
                    S = Object.prototype.hasOwnProperty,
                    _ = [].slice,
                    b = /\.js$/;
                h = function(e, t) {
                    var n, i = d(e),
                        r = i[0];
                    return e = i[1],
                    r && (r = a(r, t), n = l(r)),
                        r ? e = n && n.normalize ? n.normalize(e, s(t)) : a(e, t) : (e = a(e, t), i = d(e), r = i[0], e = i[1], r && (n = l(r))),
                        {
                            f: r ? r + "!" + e: e,
                            n: e,
                            pr: r,
                            p: n
                        }
                },
                    g = {
                        require: function(e) {
                            return o(e)
                        },
                        exports: function(e) {
                            var t = m[e];
                            return "undefined" != typeof t ? t: m[e] = {}
                        },
                        module: function(e) {
                            return {
                                id: e,
                                uri: "",
                                exports: m[e],
                                config: p(e)
                            }
                        }
                    },
                    u = function(e, t, n, a) {
                        var s, d, p, u, f, v, S = [],
                            _ = typeof n;
                        if (a = a || e, "undefined" === _ || "function" === _) {
                            for (t = !t.length && n.length ? ["require", "exports", "module"] : t, f = 0; f < t.length; f += 1) if (u = h(t[f], a), d = u.f, "require" === d) S[f] = g.require(e);
                            else if ("exports" === d) S[f] = g.exports(e),
                                v = !0;
                            else if ("module" === d) s = S[f] = g.module(e);
                            else if (r(m, d) || r(y, d) || r(C, d)) S[f] = l(d);
                            else {
                                if (!u.p) throw new Error(e + " missing " + d);
                                u.p.load(u.n, o(a, !0), c(d), {}),
                                    S[f] = m[d]
                            }
                            p = n ? n.apply(m[e], S) : void 0,
                            e && (s && s.exports !== i && s.exports !== m[e] ? m[e] = s.exports: p === i && v || (m[e] = p))
                        } else e && (m[e] = n)
                    },
                    e = t = f = function(e, t, n, r, a) {
                        if ("string" == typeof e) return g[e] ? g[e](t) : l(h(e, t).f);
                        if (!e.splice) {
                            if (v = e, v.deps && f(v.deps, v.callback), !t) return;
                            t.splice ? (e = t, t = n, n = null) : e = i
                        }
                        return t = t ||
                            function() {},
                        "function" == typeof n && (n = r, r = a),
                            r ? u(i, e, t, n) : setTimeout(function() {
                                    u(i, e, t, n)
                                },
                                4),
                            f
                    },
                    f.config = function(e) {
                        return f(e)
                    },
                    e._defined = m,
                    n = function(e, t, n) {
                        t.splice || (n = t, t = []),
                        !r(m, e) && !r(y, e) && (y[e] = [e, t, n])
                    },
                    n.amd = {
                        jQuery: !0
                    }
            } (),
                n("node_modules/almond/almond",
                    function() {}),
                function() {
                    function e(e) {
                        function t(e) {
                            if (this.data = "", this.read = 0, "string" == typeof e) this.data = e;
                            else if (i.isArrayBuffer(e) || i.isArrayBufferView(e)) {
                                var n = new Uint8Array(e);
                                try {
                                    this.data = String.fromCharCode.apply(null, n)
                                } catch(r) {
                                    for (var a = 0; a < n.length; ++a) this.putByte(n[a])
                                }
                            } else(e instanceof t || "object" == typeof e && "string" == typeof e.data && "number" == typeof e.read) && (this.data = e.data, this.read = e.read);
                            this._constructedStringLength = 0
                        }
                        function n(e, t) {
                            t = t || {},
                                this.read = t.readOffset || 0,
                                this.growSize = t.growSize || 1024;
                            var n = i.isArrayBuffer(e),
                                r = i.isArrayBufferView(e);
                            return n || r ? (this.data = n ? new DataView(e) : new DataView(e.buffer, e.byteOffset, e.byteLength), void(this.write = "writeOffset" in t ? t.writeOffset: this.data.byteLength)) : (this.data = new DataView(new ArrayBuffer(0)), this.write = 0, null !== e && void 0 !== e && this.putBytes(e), "writeOffset" in t && (this.write = t.writeOffset), void 0)
                        }
                        var i = e.util = e.util || {}; !
                            function() {
                                function e(e) {
                                    if (e.source === window && e.data === t) {
                                        e.stopPropagation();
                                        var i = n.slice();
                                        n.length = 0,
                                            i.forEach(function(e) {
                                                e()
                                            })
                                    }
                                }
                                if ("undefined" != typeof process && process.nextTick) return i.nextTick = process.nextTick,
                                    void(i.setImmediate = "function" == typeof setImmediate ? setImmediate: i.nextTick);
                                if ("function" == typeof setImmediate) return i.setImmediate = function() {
                                    return setImmediate.apply(void 0, arguments)
                                },
                                    void(i.nextTick = function(e) {
                                        return setImmediate(e)
                                    });
                                if (i.setImmediate = function(e) {
                                        setTimeout(e, 0)
                                    },
                                    "undefined" != typeof window && "function" == typeof window.postMessage) {
                                    var t = "forge.setImmediate",
                                        n = [];
                                    i.setImmediate = function(e) {
                                        n.push(e),
                                        1 === n.length && window.postMessage(t, "*")
                                    },
                                        window.addEventListener("message", e, !0)
                                }
                                if ("undefined" != typeof MutationObserver) {
                                    var r = Date.now(),
                                        a = !0,
                                        o = document.createElement("div"),
                                        n = [];
                                    new MutationObserver(function() {
                                        var e = n.slice();
                                        n.length = 0,
                                            e.forEach(function(e) {
                                                e()
                                            })
                                    }).observe(o, {
                                        attributes: !0
                                    });
                                    var s = i.setImmediate;
                                    i.setImmediate = function(e) {
                                        Date.now() - r > 15 ? (r = Date.now(), s(e)) : (n.push(e), 1 === n.length && o.setAttribute("a", a = !a))
                                    }
                                }
                                i.nextTick = i.setImmediate
                            } (),
                            i.isArray = Array.isArray ||
                                function(e) {
                                    return "[object Array]" === Object.prototype.toString.call(e)
                                },
                            i.isArrayBuffer = function(e) {
                                return "undefined" != typeof ArrayBuffer && e instanceof ArrayBuffer
                            },
                            i.isArrayBufferView = function(e) {
                                return e && i.isArrayBuffer(e.buffer) && void 0 !== e.byteLength
                            },
                            i.ByteBuffer = t,
                            i.ByteStringBuffer = t;
                        var r = 4096;
                        i.ByteStringBuffer.prototype._optimizeConstructedString = function(e) {
                            this._constructedStringLength += e,
                            this._constructedStringLength > r && (this.data.substr(0, 1), this._constructedStringLength = 0)
                        },
                            i.ByteStringBuffer.prototype.length = function() {
                                return this.data.length - this.read
                            },
                            i.ByteStringBuffer.prototype.isEmpty = function() {
                                return this.length() <= 0
                            },
                            i.ByteStringBuffer.prototype.putByte = function(e) {
                                return this.putBytes(String.fromCharCode(e))
                            },
                            i.ByteStringBuffer.prototype.fillWithByte = function(e, t) {
                                e = String.fromCharCode(e);
                                for (var n = this.data; t > 0;) 1 & t && (n += e),
                                    t >>>= 1,
                                t > 0 && (e += e);
                                return this.data = n,
                                    this._optimizeConstructedString(t),
                                    this
                            },
                            i.ByteStringBuffer.prototype.putBytes = function(e) {
                                return this.data += e,
                                    this._optimizeConstructedString(e.length),
                                    this
                            },
                            i.ByteStringBuffer.prototype.putString = function(e) {
                                return this.putBytes(i.encodeUtf8(e))
                            },
                            i.ByteStringBuffer.prototype.putInt16 = function(e) {
                                return this.putBytes(String.fromCharCode(e >> 8 & 255) + String.fromCharCode(255 & e))
                            },
                            i.ByteStringBuffer.prototype.putInt24 = function(e) {
                                return this.putBytes(String.fromCharCode(e >> 16 & 255) + String.fromCharCode(e >> 8 & 255) + String.fromCharCode(255 & e))
                            },
                            i.ByteStringBuffer.prototype.putInt32 = function(e) {
                                return this.putBytes(String.fromCharCode(e >> 24 & 255) + String.fromCharCode(e >> 16 & 255) + String.fromCharCode(e >> 8 & 255) + String.fromCharCode(255 & e))
                            },
                            i.ByteStringBuffer.prototype.putInt16Le = function(e) {
                                return this.putBytes(String.fromCharCode(255 & e) + String.fromCharCode(e >> 8 & 255))
                            },
                            i.ByteStringBuffer.prototype.putInt24Le = function(e) {
                                return this.putBytes(String.fromCharCode(255 & e) + String.fromCharCode(e >> 8 & 255) + String.fromCharCode(e >> 16 & 255))
                            },
                            i.ByteStringBuffer.prototype.putInt32Le = function(e) {
                                return this.putBytes(String.fromCharCode(255 & e) + String.fromCharCode(e >> 8 & 255) + String.fromCharCode(e >> 16 & 255) + String.fromCharCode(e >> 24 & 255))
                            },
                            i.ByteStringBuffer.prototype.putInt = function(e, t) {
                                var n = "";
                                do t -= 8,
                                    n += String.fromCharCode(e >> t & 255);
                                while (t > 0);
                                return this.putBytes(n)
                            },
                            i.ByteStringBuffer.prototype.putSignedInt = function(e, t) {
                                return 0 > e && (e += 2 << t - 1),
                                    this.putInt(e, t)
                            },
                            i.ByteStringBuffer.prototype.putBuffer = function(e) {
                                return this.putBytes(e.getBytes())
                            },
                            i.ByteStringBuffer.prototype.getByte = function() {
                                return this.data.charCodeAt(this.read++)
                            },
                            i.ByteStringBuffer.prototype.getInt16 = function() {
                                var e = this.data.charCodeAt(this.read) << 8 ^ this.data.charCodeAt(this.read + 1);
                                return this.read += 2,
                                    e
                            },
                            i.ByteStringBuffer.prototype.getInt24 = function() {
                                var e = this.data.charCodeAt(this.read) << 16 ^ this.data.charCodeAt(this.read + 1) << 8 ^ this.data.charCodeAt(this.read + 2);
                                return this.read += 3,
                                    e
                            },
                            i.ByteStringBuffer.prototype.getInt32 = function() {
                                var e = this.data.charCodeAt(this.read) << 24 ^ this.data.charCodeAt(this.read + 1) << 16 ^ this.data.charCodeAt(this.read + 2) << 8 ^ this.data.charCodeAt(this.read + 3);
                                return this.read += 4,
                                    e
                            },
                            i.ByteStringBuffer.prototype.getInt16Le = function() {
                                var e = this.data.charCodeAt(this.read) ^ this.data.charCodeAt(this.read + 1) << 8;
                                return this.read += 2,
                                    e
                            },
                            i.ByteStringBuffer.prototype.getInt24Le = function() {
                                var e = this.data.charCodeAt(this.read) ^ this.data.charCodeAt(this.read + 1) << 8 ^ this.data.charCodeAt(this.read + 2) << 16;
                                return this.read += 3,
                                    e
                            },
                            i.ByteStringBuffer.prototype.getInt32Le = function() {
                                var e = this.data.charCodeAt(this.read) ^ this.data.charCodeAt(this.read + 1) << 8 ^ this.data.charCodeAt(this.read + 2) << 16 ^ this.data.charCodeAt(this.read + 3) << 24;
                                return this.read += 4,
                                    e
                            },
                            i.ByteStringBuffer.prototype.getInt = function(e) {
                                var t = 0;
                                do t = (t << 8) + this.data.charCodeAt(this.read++),
                                    e -= 8;
                                while (e > 0);
                                return t
                            },
                            i.ByteStringBuffer.prototype.getSignedInt = function(e) {
                                var t = this.getInt(e),
                                    n = 2 << e - 2;
                                return t >= n && (t -= n << 1),
                                    t
                            },
                            i.ByteStringBuffer.prototype.getBytes = function(e) {
                                var t;
                                return e ? (e = Math.min(this.length(), e), t = this.data.slice(this.read, this.read + e), this.read += e) : 0 === e ? t = "": (t = 0 === this.read ? this.data: this.data.slice(this.read), this.clear()),
                                    t
                            },
                            i.ByteStringBuffer.prototype.bytes = function(e) {
                                return "undefined" == typeof e ? this.data.slice(this.read) : this.data.slice(this.read, this.read + e)
                            },
                            i.ByteStringBuffer.prototype.at = function(e) {
                                return this.data.charCodeAt(this.read + e)
                            },
                            i.ByteStringBuffer.prototype.setAt = function(e, t) {
                                return this.data = this.data.substr(0, this.read + e) + String.fromCharCode(t) + this.data.substr(this.read + e + 1),
                                    this
                            },
                            i.ByteStringBuffer.prototype.last = function() {
                                return this.data.charCodeAt(this.data.length - 1)
                            },
                            i.ByteStringBuffer.prototype.copy = function() {
                                var e = i.createBuffer(this.data);
                                return e.read = this.read,
                                    e
                            },
                            i.ByteStringBuffer.prototype.compact = function() {
                                return this.read > 0 && (this.data = this.data.slice(this.read), this.read = 0),
                                    this
                            },
                            i.ByteStringBuffer.prototype.clear = function() {
                                return this.data = "",
                                    this.read = 0,
                                    this
                            },
                            i.ByteStringBuffer.prototype.truncate = function(e) {
                                var t = Math.max(0, this.length() - e);
                                return this.data = this.data.substr(this.read, t),
                                    this.read = 0,
                                    this
                            },
                            i.ByteStringBuffer.prototype.toHex = function() {
                                for (var e = "",
                                         t = this.read; t < this.data.length; ++t) {
                                    var n = this.data.charCodeAt(t);
                                    16 > n && (e += "0"),
                                        e += n.toString(16)
                                }
                                return e
                            },
                            i.ByteStringBuffer.prototype.toString = function() {
                                return i.decodeUtf8(this.bytes())
                            },
                            i.DataBuffer = n,
                            i.DataBuffer.prototype.length = function() {
                                return this.write - this.read
                            },
                            i.DataBuffer.prototype.isEmpty = function() {
                                return this.length() <= 0
                            },
                            i.DataBuffer.prototype.accommodate = function(e, t) {
                                if (this.length() >= e) return this;
                                t = Math.max(t || this.growSize, e);
                                var n = new Uint8Array(this.data.buffer, this.data.byteOffset, this.data.byteLength),
                                    i = new Uint8Array(this.length() + t);
                                return i.set(n),
                                    this.data = new DataView(i.buffer),
                                    this
                            },
                            i.DataBuffer.prototype.putByte = function(e) {
                                return this.accommodate(1),
                                    this.data.setUint8(this.write++, e),
                                    this
                            },
                            i.DataBuffer.prototype.fillWithByte = function(e, t) {
                                this.accommodate(t);
                                for (var n = 0; t > n; ++n) this.data.setUint8(e);
                                return this
                            },
                            i.DataBuffer.prototype.putBytes = function(e, t) {
                                if (i.isArrayBufferView(e)) {
                                    var n = new Uint8Array(e.buffer, e.byteOffset, e.byteLength),
                                        r = n.byteLength - n.byteOffset;
                                    this.accommodate(r);
                                    var a = new Uint8Array(this.data.buffer, this.write);
                                    return a.set(n),
                                        this.write += r,
                                        this
                                }
                                if (i.isArrayBuffer(e)) {
                                    var n = new Uint8Array(e);
                                    this.accommodate(n.byteLength);
                                    var a = new Uint8Array(this.data.buffer);
                                    return a.set(n, this.write),
                                        this.write += n.byteLength,
                                        this
                                }
                                if (e instanceof i.DataBuffer || "object" == typeof e && "number" == typeof e.read && "number" == typeof e.write && i.isArrayBufferView(e.data)) {
                                    var n = new Uint8Array(e.data.byteLength, e.read, e.length());
                                    this.accommodate(n.byteLength);
                                    var a = new Uint8Array(e.data.byteLength, this.write);
                                    return a.set(n),
                                        this.write += n.byteLength,
                                        this
                                }
                                if (e instanceof i.ByteStringBuffer && (e = e.data, t = "binary"), t = t || "binary", "string" == typeof e) {
                                    var o;
                                    if ("hex" === t) return this.accommodate(Math.ceil(e.length / 2)),
                                        o = new Uint8Array(this.data.buffer, this.write),
                                        this.write += i.binary.hex.decode(e, o, this.write),
                                        this;
                                    if ("base64" === t) return this.accommodate(3 * Math.ceil(e.length / 4)),
                                        o = new Uint8Array(this.data.buffer, this.write),
                                        this.write += i.binary.base64.decode(e, o, this.write),
                                        this;
                                    if ("utf8" === t && (e = i.encodeUtf8(e), t = "binary"), "binary" === t || "raw" === t) return this.accommodate(e.length),
                                        o = new Uint8Array(this.data.buffer, this.write),
                                        this.write += i.binary.raw.decode(o),
                                        this;
                                    if ("utf16" === t) return this.accommodate(2 * e.length),
                                        o = new Uint16Array(this.data.buffer, this.write),
                                        this.write += i.text.utf16.encode(o),
                                        this;
                                    throw new Error("Invalid encoding: " + t)
                                }
                                throw Error("Invalid parameter: " + e)
                            },
                            i.DataBuffer.prototype.putBuffer = function(e) {
                                return this.putBytes(e),
                                    e.clear(),
                                    this
                            },
                            i.DataBuffer.prototype.putString = function(e) {
                                return this.putBytes(e, "utf16")
                            },
                            i.DataBuffer.prototype.putInt16 = function(e) {
                                return this.accommodate(2),
                                    this.data.setInt16(this.write, e),
                                    this.write += 2,
                                    this
                            },
                            i.DataBuffer.prototype.putInt24 = function(e) {
                                return this.accommodate(3),
                                    this.data.setInt16(this.write, e >> 8 & 65535),
                                    this.data.setInt8(this.write, e >> 16 & 255),
                                    this.write += 3,
                                    this
                            },
                            i.DataBuffer.prototype.putInt32 = function(e) {
                                return this.accommodate(4),
                                    this.data.setInt32(this.write, e),
                                    this.write += 4,
                                    this
                            },
                            i.DataBuffer.prototype.putInt16Le = function(e) {
                                return this.accommodate(2),
                                    this.data.setInt16(this.write, e, !0),
                                    this.write += 2,
                                    this
                            },
                            i.DataBuffer.prototype.putInt24Le = function(e) {
                                return this.accommodate(3),
                                    this.data.setInt8(this.write, e >> 16 & 255),
                                    this.data.setInt16(this.write, e >> 8 & 65535, !0),
                                    this.write += 3,
                                    this
                            },
                            i.DataBuffer.prototype.putInt32Le = function(e) {
                                return this.accommodate(4),
                                    this.data.setInt32(this.write, e, !0),
                                    this.write += 4,
                                    this
                            },
                            i.DataBuffer.prototype.putInt = function(e, t) {
                                this.accommodate(t / 8);
                                do t -= 8,
                                    this.data.setInt8(this.write++, e >> t & 255);
                                while (t > 0);
                                return this
                            },
                            i.DataBuffer.prototype.putSignedInt = function(e, t) {
                                return this.accommodate(t / 8),
                                0 > e && (e += 2 << t - 1),
                                    this.putInt(e, t)
                            },
                            i.DataBuffer.prototype.getByte = function() {
                                return this.data.getInt8(this.read++)
                            },
                            i.DataBuffer.prototype.getInt16 = function() {
                                var e = this.data.getInt16(this.read);
                                return this.read += 2,
                                    e
                            },
                            i.DataBuffer.prototype.getInt24 = function() {
                                var e = this.data.getInt16(this.read) << 8 ^ this.data.getInt8(this.read + 2);
                                return this.read += 3,
                                    e
                            },
                            i.DataBuffer.prototype.getInt32 = function() {
                                var e = this.data.getInt32(this.read);
                                return this.read += 4,
                                    e
                            },
                            i.DataBuffer.prototype.getInt16Le = function() {
                                var e = this.data.getInt16(this.read, !0);
                                return this.read += 2,
                                    e
                            },
                            i.DataBuffer.prototype.getInt24Le = function() {
                                var e = this.data.getInt8(this.read) ^ this.data.getInt16(this.read + 1, !0) << 8;
                                return this.read += 3,
                                    e
                            },
                            i.DataBuffer.prototype.getInt32Le = function() {
                                var e = this.data.getInt32(this.read, !0);
                                return this.read += 4,
                                    e
                            },
                            i.DataBuffer.prototype.getInt = function(e) {
                                var t = 0;
                                do t = (t << 8) + this.data.getInt8(this.read++),
                                    e -= 8;
                                while (e > 0);
                                return t
                            },
                            i.DataBuffer.prototype.getSignedInt = function(e) {
                                var t = this.getInt(e),
                                    n = 2 << e - 2;
                                return t >= n && (t -= n << 1),
                                    t
                            },
                            i.DataBuffer.prototype.getBytes = function(e) {
                                var t;
                                return e ? (e = Math.min(this.length(), e), t = this.data.slice(this.read, this.read + e), this.read += e) : 0 === e ? t = "": (t = 0 === this.read ? this.data: this.data.slice(this.read), this.clear()),
                                    t
                            },
                            i.DataBuffer.prototype.bytes = function(e) {
                                return "undefined" == typeof e ? this.data.slice(this.read) : this.data.slice(this.read, this.read + e)
                            },
                            i.DataBuffer.prototype.at = function(e) {
                                return this.data.getUint8(this.read + e)
                            },
                            i.DataBuffer.prototype.setAt = function(e, t) {
                                return this.data.setUint8(e, t),
                                    this
                            },
                            i.DataBuffer.prototype.last = function() {
                                return this.data.getUint8(this.write - 1)
                            },
                            i.DataBuffer.prototype.copy = function() {
                                return new i.DataBuffer(this)
                            },
                            i.DataBuffer.prototype.compact = function() {
                                if (this.read > 0) {
                                    var e = new Uint8Array(this.data.buffer, this.read),
                                        t = new Uint8Array(e.byteLength);
                                    t.set(e),
                                        this.data = new DataView(t),
                                        this.write -= this.read,
                                        this.read = 0
                                }
                                return this
                            },
                            i.DataBuffer.prototype.clear = function() {
                                return this.data = new DataView(new ArrayBuffer(0)),
                                    this.read = this.write = 0,
                                    this
                            },
                            i.DataBuffer.prototype.truncate = function(e) {
                                return this.write = Math.max(0, this.length() - e),
                                    this.read = Math.min(this.read, this.write),
                                    this
                            },
                            i.DataBuffer.prototype.toHex = function() {
                                for (var e = "",
                                         t = this.read; t < this.data.byteLength; ++t) {
                                    var n = this.data.getUint8(t);
                                    16 > n && (e += "0"),
                                        e += n.toString(16)
                                }
                                return e
                            },
                            i.DataBuffer.prototype.toString = function(e) {
                                var t = new Uint8Array(this.data, this.read, this.length());
                                if (e = e || "utf8", "binary" === e || "raw" === e) return i.binary.raw.encode(t);
                                if ("hex" === e) return i.binary.hex.encode(t);
                                if ("base64" === e) return i.binary.base64.encode(t);
                                if ("utf8" === e) return i.text.utf8.decode(t);
                                if ("utf16" === e) return i.text.utf16.decode(t);
                                throw new Error("Invalid encoding: " + e)
                            },
                            i.createBuffer = function(e, t) {
                                return t = t || "raw",
                                void 0 !== e && "utf8" === t && (e = i.encodeUtf8(e)),
                                    new i.ByteBuffer(e)
                            },
                            i.fillString = function(e, t) {
                                for (var n = ""; t > 0;) 1 & t && (n += e),
                                    t >>>= 1,
                                t > 0 && (e += e);
                                return n
                            },
                            i.xorBytes = function(e, t, n) {
                                for (var i = "",
                                         r = "",
                                         a = "",
                                         o = 0,
                                         s = 0; n > 0; --n, ++o) r = e.charCodeAt(o) ^ t.charCodeAt(o),
                                s >= 10 && (i += a, a = "", s = 0),
                                    a += String.fromCharCode(r),
                                    ++s;
                                return i += a
                            },
                            i.hexToBytes = function(e) {
                                var t = "",
                                    n = 0;
                                for (e.length & !0 && (n = 1, t += String.fromCharCode(parseInt(e[0], 16))); n < e.length; n += 2) t += String.fromCharCode(parseInt(e.substr(n, 2), 16));
                                return t
                            },
                            i.bytesToHex = function(e) {
                                return i.createBuffer(e).toHex()
                            },
                            i.int32ToBytes = function(e) {
                                return String.fromCharCode(e >> 24 & 255) + String.fromCharCode(e >> 16 & 255) + String.fromCharCode(e >> 8 & 255) + String.fromCharCode(255 & e)
                            };
                        var a = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
                            o = [62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, 64, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51];
                        i.encode64 = function(e, t) {
                            for (var n, i, r, o = "",
                                     s = "",
                                     c = 0; c < e.length;) n = e.charCodeAt(c++),
                                i = e.charCodeAt(c++),
                                r = e.charCodeAt(c++),
                                o += a.charAt(n >> 2),
                                o += a.charAt((3 & n) << 4 | i >> 4),
                                isNaN(i) ? o += "==": (o += a.charAt((15 & i) << 2 | r >> 6), o += isNaN(r) ? "=": a.charAt(63 & r)),
                            t && o.length > t && (s += o.substr(0, t) + "\r\n", o = o.substr(t));
                            return s += o
                        },
                            i.decode64 = function(e) {
                                e = e.replace(/[^A-Za-z0-9\+\/\=]/g, "");
                                for (var t, n, i, r, a = "",
                                         s = 0; s < e.length;) t = o[e.charCodeAt(s++) - 43],
                                    n = o[e.charCodeAt(s++) - 43],
                                    i = o[e.charCodeAt(s++) - 43],
                                    r = o[e.charCodeAt(s++) - 43],
                                    a += String.fromCharCode(t << 2 | n >> 4),
                                64 !== i && (a += String.fromCharCode((15 & n) << 4 | i >> 2), 64 !== r && (a += String.fromCharCode((3 & i) << 6 | r)));
                                return a
                            },
                            i.encodeUtf8 = function(e) {
                                return unescape(encodeURIComponent(e))
                            },
                            i.decodeUtf8 = function(e) {
                                return decodeURIComponent(escape(e))
                            },
                            i.binary = {
                                raw: {},
                                hex: {},
                                base64: {}
                            },
                            i.binary.raw.encode = function(e) {
                                return String.fromCharCode.apply(null, e)
                            },
                            i.binary.raw.decode = function(e, t, n) {
                                var i = t;
                                i || (i = new Uint8Array(e.length)),
                                    n = n || 0;
                                for (var r = n,
                                         a = 0; a < e.length; ++a) i[r++] = e.charCodeAt(a);
                                return t ? r - n: i
                            },
                            i.binary.hex.encode = i.bytesToHex,
                            i.binary.hex.decode = function(e, t, n) {
                                var i = t;
                                i || (i = new Uint8Array(Math.ceil(e.length / 2))),
                                    n = n || 0;
                                var r = 0,
                                    a = n;
                                for (1 & e.length && (r = 1, i[a++] = parseInt(e[0], 16)); r < e.length; r += 2) i[a++] = parseInt(e.substr(r, 2), 16);
                                return t ? a - n: i
                            },
                            i.binary.base64.encode = function(e, t) {
                                for (var n, i, r, o = "",
                                         s = "",
                                         c = 0; c < e.byteLength;) n = e[c++],
                                    i = e[c++],
                                    r = e[c++],
                                    o += a.charAt(n >> 2),
                                    o += a.charAt((3 & n) << 4 | i >> 4),
                                    isNaN(i) ? o += "==": (o += a.charAt((15 & i) << 2 | r >> 6), o += isNaN(r) ? "=": a.charAt(63 & r)),
                                t && o.length > t && (s += o.substr(0, t) + "\r\n", o = o.substr(t));
                                return s += o
                            },
                            i.binary.base64.decode = function(e, t, n) {
                                var i = t;
                                i || (i = new Uint8Array(3 * Math.ceil(e.length / 4))),
                                    e = e.replace(/[^A-Za-z0-9\+\/\=]/g, ""),
                                    n = n || 0;
                                for (var r, a, s, c, l = 0,
                                         d = n; l < e.length;) r = o[e.charCodeAt(l++) - 43],
                                    a = o[e.charCodeAt(l++) - 43],
                                    s = o[e.charCodeAt(l++) - 43],
                                    c = o[e.charCodeAt(l++) - 43],
                                    i[d++] = r << 2 | a >> 4,
                                64 !== s && (i[d++] = (15 & a) << 4 | s >> 2, 64 !== c && (i[d++] = (3 & s) << 6 | c));
                                return t ? d - n: i.subarray(0, d)
                            },
                            i.text = {
                                utf8: {},
                                utf16: {}
                            },
                            i.text.utf8.encode = function(e, t, n) {
                                e = i.encodeUtf8(e);
                                var r = t;
                                r || (r = new Uint8Array(e.length)),
                                    n = n || 0;
                                for (var a = n,
                                         o = 0; o < e.length; ++o) r[a++] = e.charCodeAt(o);
                                return t ? a - n: r
                            },
                            i.text.utf8.decode = function(e) {
                                return i.decodeUtf8(String.fromCharCode.apply(null, e))
                            },
                            i.text.utf16.encode = function(e, t, n) {
                                var i = t;
                                i || (i = new Uint8Array(2 * e.length));
                                var r = new Uint16Array(i.buffer);
                                n = n || 0;
                                for (var a = n,
                                         o = n,
                                         s = 0; s < e.length; ++s) r[o++] = e.charCodeAt(s),
                                    a += 2;
                                return t ? a - n: i
                            },
                            i.text.utf16.decode = function(e) {
                                return String.fromCharCode.apply(null, new Uint16Array(e.buffer))
                            },
                            i.deflate = function(e, t, n) {
                                if (t = i.decode64(e.deflate(i.encode64(t)).rval), n) {
                                    var r = 2,
                                        a = t.charCodeAt(1);
                                    32 & a && (r = 6),
                                        t = t.substring(r, t.length - 4)
                                }
                                return t
                            },
                            i.inflate = function(e, t, n) {
                                var r = e.inflate(i.encode64(t)).rval;
                                return null === r ? null: i.decode64(r)
                            };
                        var s = function(e, t, n) {
                                if (!e) throw new Error("WebStorage not available.");
                                var r;
                                if (null === n ? r = e.removeItem(t) : (n = i.encode64(JSON.stringify(n)), r = e.setItem(t, n)), "undefined" != typeof r && r.rval !== !0) {
                                    var a = new Error(r.error.message);
                                    throw a.id = r.error.id,
                                        a.name = r.error.name,
                                        a
                                }
                            },
                            c = function(e, t) {
                                if (!e) throw new Error("WebStorage not available.");
                                var n = e.getItem(t);
                                if (e.init) if (null === n.rval) {
                                    if (n.error) {
                                        var r = new Error(n.error.message);
                                        throw r.id = n.error.id,
                                            r.name = n.error.name,
                                            r
                                    }
                                    n = null
                                } else n = n.rval;
                                return null !== n && (n = JSON.parse(i.decode64(n))),
                                    n
                            },
                            l = function(e, t, n, i) {
                                var r = c(e, t);
                                null === r && (r = {}),
                                    r[n] = i,
                                    s(e, t, r)
                            },
                            d = function(e, t, n) {
                                var i = c(e, t);
                                return null !== i && (i = n in i ? i[n] : null),
                                    i
                            },
                            p = function(e, t, n) {
                                var i = c(e, t);
                                if (null !== i && n in i) {
                                    delete i[n];
                                    var r = !0;
                                    for (var a in i) {
                                        r = !1;
                                        break
                                    }
                                    r && (i = null),
                                        s(e, t, i)
                                }
                            },
                            u = function(e, t) {
                                s(e, t, null)
                            },
                            f = function(e, t, n) {
                                var i = null;
                                "undefined" == typeof n && (n = ["web", "flash"]);
                                var r, a = !1,
                                    o = null;
                                for (var s in n) {
                                    r = n[s];
                                    try {
                                        if ("flash" === r || "both" === r) {
                                            if (null === t[0]) throw new Error("Flash local storage not available.");
                                            i = e.apply(this, t),
                                                a = "flash" === r
                                        } ("web" === r || "both" === r) && (t[0] = localStorage, i = e.apply(this, t), a = !0)
                                    } catch(c) {
                                        o = c
                                    }
                                    if (a) break
                                }
                                if (!a) throw o;
                                return i
                            };
                        i.setItem = function(e, t, n, i, r) {
                            f(l, arguments, r)
                        },
                            i.getItem = function(e, t, n, i) {
                                return f(d, arguments, i)
                            },
                            i.removeItem = function(e, t, n, i) {
                                f(p, arguments, i)
                            },
                            i.clearItems = function(e, t, n) {
                                f(u, arguments, n)
                            },
                            i.parseUrl = function(e) {
                                var t = /^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;
                                t.lastIndex = 0;
                                var n = t.exec(e),
                                    i = null === n ? null: {
                                        full: e,
                                        scheme: n[1],
                                        host: n[2],
                                        port: n[3],
                                        path: n[4]
                                    };
                                return i && (i.fullHost = i.host, i.port ? 80 !== i.port && "http" === i.scheme ? i.fullHost += ":" + i.port: 443 !== i.port && "https" === i.scheme && (i.fullHost += ":" + i.port) : "http" === i.scheme ? i.port = 80 : "https" === i.scheme && (i.port = 443), i.full = i.scheme + "://" + i.fullHost),
                                    i
                            };
                        var h = null;
                        i.getQueryVariables = function(e) {
                            var t, n = function(e) {
                                for (var t = {},
                                         n = e.split("&"), i = 0; i < n.length; i++) {
                                    var r, a, o = n[i].indexOf("=");
                                    o > 0 ? (r = n[i].substring(0, o), a = n[i].substring(o + 1)) : (r = n[i], a = null),
                                    r in t || (t[r] = []),
                                    !(r in Object.prototype) && null !== a && t[r].push(unescape(a))
                                }
                                return t
                            };
                            return "undefined" == typeof e ? (null === h && (h = "undefined" != typeof window && window.location && window.location.search ? n(window.location.search.substring(1)) : {}), t = h) : t = n(e),
                                t
                        },
                            i.parseFragment = function(e) {
                                var t = e,
                                    n = "",
                                    r = e.indexOf("?");
                                r > 0 && (t = e.substring(0, r), n = e.substring(r + 1));
                                var a = t.split("/");
                                a.length > 0 && "" === a[0] && a.shift();
                                var o = "" === n ? {}: i.getQueryVariables(n);
                                return {
                                    pathString: t,
                                    queryString: n,
                                    path: a,
                                    query: o
                                }
                            },
                            i.makeRequest = function(e) {
                                var t = i.parseFragment(e),
                                    n = {
                                        path: t.pathString,
                                        query: t.queryString,
                                        getPath: function(e) {
                                            return "undefined" == typeof e ? t.path: t.path[e]
                                        },
                                        getQuery: function(e, n) {
                                            var i;
                                            return "undefined" == typeof e ? i = t.query: (i = t.query[e], i && "undefined" != typeof n && (i = i[n])),
                                                i
                                        },
                                        getQueryLast: function(e, t) {
                                            var i, r = n.getQuery(e);
                                            return i = r ? r[r.length - 1] : t
                                        }
                                    };
                                return n
                            },
                            i.makeLink = function(e, t, n) {
                                e = jQuery.isArray(e) ? e.join("/") : e;
                                var i = jQuery.param(t || {});
                                return n = n || "",
                                e + (i.length > 0 ? "?" + i: "") + (n.length > 0 ? "#" + n: "")
                            },
                            i.setPath = function(e, t, n) {
                                if ("object" == typeof e && null !== e) for (var i = 0,
                                                                                 r = t.length; r > i;) {
                                    var a = t[i++];
                                    if (i == r) e[a] = n;
                                    else {
                                        var o = a in e; (!o || o && "object" != typeof e[a] || o && null === e[a]) && (e[a] = {}),
                                            e = e[a]
                                    }
                                }
                            },
                            i.getPath = function(e, t, n) {
                                for (var i = 0,
                                         r = t.length,
                                         a = !0; a && r > i && "object" == typeof e && null !== e;) {
                                    var o = t[i++];
                                    a = o in e,
                                    a && (e = e[o])
                                }
                                return a ? e: n
                            },
                            i.deletePath = function(e, t) {
                                if ("object" == typeof e && null !== e) for (var n = 0,
                                                                                 i = t.length; i > n;) {
                                    var r = t[n++];
                                    if (n == i) delete e[r];
                                    else {
                                        if (! (r in e && "object" == typeof e[r] && null !== e[r])) break;
                                        e = e[r]
                                    }
                                }
                            },
                            i.isEmpty = function(e) {
                                for (var t in e) if (e.hasOwnProperty(t)) return ! 1;
                                return ! 0
                            },
                            i.format = function(e) {
                                for (var t, n, i = /%./g,
                                         r = 0,
                                         a = [], o = 0; t = i.exec(e);) {
                                    n = e.substring(o, i.lastIndex - 2),
                                    n.length > 0 && a.push(n),
                                        o = i.lastIndex;
                                    var s = t[0][1];
                                    switch (s) {
                                        case "s":
                                        case "o":
                                            a.push(r < arguments.length ? arguments[r+++1] : "<?>");
                                            break;
                                        case "%":
                                            a.push("%");
                                            break;
                                        default:
                                            a.push("<%" + s + "?>")
                                    }
                                }
                                return a.push(e.substring(o)),
                                    a.join("")
                            },
                            i.formatNumber = function(e, t, n, i) {
                                var r = e,
                                    a = isNaN(t = Math.abs(t)) ? 2 : t,
                                    o = void 0 === n ? ",": n,
                                    s = void 0 === i ? ".": i,
                                    c = 0 > r ? "-": "",
                                    l = parseInt(r = Math.abs( + r || 0).toFixed(a), 10) + "",
                                    d = l.length > 3 ? l.length % 3 : 0;
                                return c + (d ? l.substr(0, d) + s: "") + l.substr(d).replace(/(\d{3})(?=\d)/g, "$1" + s) + (a ? o + Math.abs(r - l).toFixed(a).slice(2) : "")
                            },
                            i.formatSize = function(e) {
                                return e = e >= 1073741824 ? i.formatNumber(e / 1073741824, 2, ".", "") + " GiB": e >= 1048576 ? i.formatNumber(e / 1048576, 2, ".", "") + " MiB": e >= 1024 ? i.formatNumber(e / 1024, 0) + " KiB": i.formatNumber(e, 0) + " bytes"
                            },
                            i.bytesFromIP = function(e) {
                                return - 1 !== e.indexOf(".") ? i.bytesFromIPv4(e) : -1 !== e.indexOf(":") ? i.bytesFromIPv6(e) : null
                            },
                            i.bytesFromIPv4 = function(e) {
                                if (e = e.split("."), 4 !== e.length) return null;
                                for (var t = i.createBuffer(), n = 0; n < e.length; ++n) {
                                    var r = parseInt(e[n], 10);
                                    if (isNaN(r)) return null;
                                    t.putByte(r)
                                }
                                return t.getBytes()
                            },
                            i.bytesFromIPv6 = function(e) {
                                var t = 0;
                                e = e.split(":").filter(function(e) {
                                    return 0 === e.length && ++t,
                                        !0
                                });
                                for (var n = 2 * (8 - e.length + t), r = i.createBuffer(), a = 0; 8 > a; ++a) if (e[a] && 0 !== e[a].length) {
                                    var o = i.hexToBytes(e[a]);
                                    o.length < 2 && r.putByte(0),
                                        r.putBytes(o)
                                } else r.fillWithByte(0, n),
                                    n = 0;
                                return r.getBytes()
                            },
                            i.bytesToIP = function(e) {
                                return 4 === e.length ? i.bytesToIPv4(e) : 16 === e.length ? i.bytesToIPv6(e) : null
                            },
                            i.bytesToIPv4 = function(e) {
                                if (4 !== e.length) return null;
                                for (var t = [], n = 0; n < e.length; ++n) t.push(e.charCodeAt(n));
                                return t.join(".")
                            },
                            i.bytesToIPv6 = function(e) {
                                if (16 !== e.length) return null;
                                for (var t = [], n = [], r = 0, a = 0; a < e.length; a += 2) {
                                    for (var o = i.bytesToHex(e[a] + e[a + 1]);
                                         "0" === o[0] && "0" !== o;) o = o.substr(1);
                                    if ("0" === o) {
                                        var s = n[n.length - 1],
                                            c = t.length;
                                        s && c === s.end + 1 ? (s.end = c, s.end - s.start > n[r].end - n[r].start && (r = n.length - 1)) : n.push({
                                            start: c,
                                            end: c
                                        })
                                    }
                                    t.push(o)
                                }
                                if (n.length > 0) {
                                    var l = n[r];
                                    l.end - l.start > 0 && (t.splice(l.start, l.end - l.start + 1, ""), 0 === l.start && t.unshift(""), 7 === l.end && t.push(""))
                                }
                                return t.join(":")
                            },
                            i.estimateCores = function(e, t) {
                                function n(e, s, c) {
                                    if (0 === s) {
                                        var l = Math.floor(e.reduce(function(e, t) {
                                                return e + t
                                            },
                                            0) / e.length);
                                        return i.cores = Math.max(1, l),
                                            URL.revokeObjectURL(o),
                                            t(null, i.cores)
                                    }
                                    r(c,
                                        function(t, i) {
                                            e.push(a(c, i)),
                                                n(e, s - 1, c)
                                        })
                                }
                                function r(e, t) {
                                    for (var n = [], i = [], r = 0; e > r; ++r) {
                                        var a = new Worker(o);
                                        a.addEventListener("message",
                                            function(r) {
                                                if (i.push(r.data), i.length === e) {
                                                    for (var a = 0; e > a; ++a) n[a].terminate();
                                                    t(null, i)
                                                }
                                            }),
                                            n.push(a)
                                    }
                                    for (var r = 0; e > r; ++r) n[r].postMessage(r)
                                }
                                function a(e, t) {
                                    for (var n = [], i = 0; e > i; ++i) for (var r = t[i], a = n[i] = [], o = 0; e > o; ++o) if (i !== o) {
                                        var s = t[o]; (r.st > s.st && r.st < s.et || s.st > r.st && s.st < r.et) && a.push(o)
                                    }
                                    return n.reduce(function(e, t) {
                                            return Math.max(e, t.length)
                                        },
                                        0)
                                }
                                if ("function" == typeof e && (t = e, e = {}), e = e || {},
                                    "cores" in i && !e.update) return t(null, i.cores);
                                if ("undefined" != typeof navigator && "hardwareConcurrency" in navigator && navigator.hardwareConcurrency > 0) return i.cores = navigator.hardwareConcurrency,
                                    t(null, i.cores);
                                if ("undefined" == typeof Worker) return i.cores = 1,
                                    t(null, i.cores);
                                if ("undefined" == typeof Blob) return i.cores = 2,
                                    t(null, i.cores);
                                var o = URL.createObjectURL(new Blob(["(",
                                    function() {
                                        self.addEventListener("message",
                                            function(e) {
                                                for (var t = Date.now(), n = t + 4; Date.now() < n;);
                                                self.postMessage({
                                                    st: t,
                                                    et: n
                                                })
                                            })
                                    }.toString(), ")()"], {
                                    type: "application/javascript"
                                }));
                                n([], 5, 16)
                            }
                    }
                    var i = "util";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/util", ["require", "module"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        e.cipher = e.cipher || {},
                            e.cipher.algorithms = e.cipher.algorithms || {},
                            e.cipher.createCipher = function(t, n) {
                                var i = t;
                                if ("string" == typeof i && (i = e.cipher.getAlgorithm(i), i && (i = i())), !i) throw new Error("Unsupported algorithm: " + t);

                                return new e.cipher.BlockCipher({
                                    algorithm: i,
                                    key: n,
                                    decrypt: !1
                                })
                            },
                            e.cipher.createDecipher = function(t, n) {
                                var i = t;
                                if ("string" == typeof i && (i = e.cipher.getAlgorithm(i), i && (i = i())), !i) throw new Error("Unsupported algorithm: " + t);
                                return new e.cipher.BlockCipher({
                                    algorithm: i,
                                    key: n,
                                    decrypt: !0
                                })
                            },
                            e.cipher.registerAlgorithm = function(t, n) {
                                t = t.toUpperCase(),
                                    e.cipher.algorithms[t] = n
                            },
                            e.cipher.getAlgorithm = function(t) {
                                return t = t.toUpperCase(),
                                    t in e.cipher.algorithms ? e.cipher.algorithms[t] : null
                            };
                        var t = e.cipher.BlockCipher = function(e) {
                            this.algorithm = e.algorithm,
                                this.mode = this.algorithm.mode,
                                this.blockSize = this.mode.blockSize,
                                this._finish = !1,
                                this._input = null,
                                this.output = null,
                                this._op = e.decrypt ? this.mode.decrypt: this.mode.encrypt,
                                this._decrypt = e.decrypt,
                                this.algorithm.initialize(e)
                        };
                        t.prototype.start = function(t) {
                            t = t || {};
                            var n = {};
                            for (var i in t) n[i] = t[i];
                            n.decrypt = this._decrypt,
                                this._finish = !1,
                                this._input = e.util.createBuffer(),
                                this.output = t.output || e.util.createBuffer(),
                                this.mode.start(n)
                        },
                            t.prototype.update = function(e) {
                                for (e && this._input.putBuffer(e); ! this._op.call(this.mode, this._input, this.output, this._finish) && !this._finish;);
                                this._input.compact()
                            },
                            t.prototype.finish = function(e) {
                                e && ("ECB" === this.mode.name || "CBC" === this.mode.name) && (this.mode.pad = function(t) {
                                    return e(this.blockSize, t, !1)
                                },
                                    this.mode.unpad = function(t) {
                                        return e(this.blockSize, t, !0)
                                    });
                                var t = {};
                                return t.decrypt = this._decrypt,
                                    t.overflow = this._input.length() % this.blockSize,
                                    this._decrypt || !this.mode.pad || this.mode.pad(this._input, t) ? (this._finish = !0, this.update(), this._decrypt && this.mode.unpad && !this.mode.unpad(this.output, t) ? !1 : this.mode.afterFinish && !this.mode.afterFinish(this.output, t) ? !1 : !0) : !1
                            }
                    }
                    var i = "cipher";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/cipher", ["require", "module", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(t) {
                            if ("string" == typeof t && (t = e.util.createBuffer(t)), e.util.isArray(t) && t.length > 4) {
                                var n = t;
                                t = e.util.createBuffer();
                                for (var i = 0; i < n.length; ++i) t.putByte(n[i])
                            }
                            return e.util.isArray(t) || (t = [t.getInt32(), t.getInt32(), t.getInt32(), t.getInt32()]),
                                t
                        }
                        function n(e) {
                            e[e.length - 1] = e[e.length - 1] + 1 & 4294967295
                        }
                        function i(e) {
                            return [e / 4294967296 | 0, 4294967295 & e]
                        }
                        e.cipher = e.cipher || {};
                        var r = e.cipher.modes = e.cipher.modes || {};
                        r.ecb = function(e) {
                            e = e || {},
                                this.name = "ECB",
                                this.cipher = e.cipher,
                                this.blockSize = e.blockSize || 16,
                                this._ints = this.blockSize / 4,
                                this._inBlock = new Array(this._ints),
                                this._outBlock = new Array(this._ints)
                        },
                            r.ecb.prototype.start = function(e) {},
                            r.ecb.prototype.encrypt = function(e, t, n) {
                                if (e.length() < this.blockSize && !(n && e.length() > 0)) return ! 0;
                                for (var i = 0; i < this._ints; ++i) this._inBlock[i] = e.getInt32();
                                this.cipher.encrypt(this._inBlock, this._outBlock);
                                for (var i = 0; i < this._ints; ++i) t.putInt32(this._outBlock[i])
                            },
                            r.ecb.prototype.decrypt = function(e, t, n) {
                                if (e.length() < this.blockSize && !(n && e.length() > 0)) return ! 0;
                                for (var i = 0; i < this._ints; ++i) this._inBlock[i] = e.getInt32();
                                this.cipher.decrypt(this._inBlock, this._outBlock);
                                for (var i = 0; i < this._ints; ++i) t.putInt32(this._outBlock[i])
                            },
                            r.ecb.prototype.pad = function(e, t) {
                                var n = e.length() === this.blockSize ? this.blockSize: this.blockSize - e.length();
                                return e.fillWithByte(n, n),
                                    !0
                            },
                            r.ecb.prototype.unpad = function(e, t) {
                                if (t.overflow > 0) return ! 1;
                                var n = e.length(),
                                    i = e.at(n - 1);
                                return i > this.blockSize << 2 ? !1 : (e.truncate(i), !0)
                            },
                            r.cbc = function(e) {
                                e = e || {},
                                    this.name = "CBC",
                                    this.cipher = e.cipher,
                                    this.blockSize = e.blockSize || 16,
                                    this._ints = this.blockSize / 4,
                                    this._inBlock = new Array(this._ints),
                                    this._outBlock = new Array(this._ints)
                            },
                            r.cbc.prototype.start = function(e) {
                                if (null === e.iv) {
                                    if (!this._prev) throw new Error("Invalid IV parameter.");
                                    this._iv = this._prev.slice(0)
                                } else {
                                    if (! ("iv" in e)) throw new Error("Invalid IV parameter.");
                                    this._iv = t(e.iv),
                                        this._prev = this._iv.slice(0)
                                }
                            },
                            r.cbc.prototype.encrypt = function(e, t, n) {
                                if (e.length() < this.blockSize && !(n && e.length() > 0)) return ! 0;
                                for (var i = 0; i < this._ints; ++i) this._inBlock[i] = this._prev[i] ^ e.getInt32();
                                this.cipher.encrypt(this._inBlock, this._outBlock);
                                for (var i = 0; i < this._ints; ++i) t.putInt32(this._outBlock[i]);
                                this._prev = this._outBlock
                            },
                            r.cbc.prototype.decrypt = function(e, t, n) {
                                if (e.length() < this.blockSize && !(n && e.length() > 0)) return ! 0;
                                for (var i = 0; i < this._ints; ++i) this._inBlock[i] = e.getInt32();
                                this.cipher.decrypt(this._inBlock, this._outBlock);
                                for (var i = 0; i < this._ints; ++i) t.putInt32(this._prev[i] ^ this._outBlock[i]);
                                this._prev = this._inBlock.slice(0)
                            },
                            r.cbc.prototype.pad = function(e, t) {
                                var n = e.length() === this.blockSize ? this.blockSize: this.blockSize - e.length();
                                return e.fillWithByte(n, n),
                                    !0
                            },
                            r.cbc.prototype.unpad = function(e, t) {
                                if (t.overflow > 0) return ! 1;
                                var n = e.length(),
                                    i = e.at(n - 1);
                                return i > this.blockSize << 2 ? !1 : (e.truncate(i), !0)
                            },
                            r.cfb = function(t) {
                                t = t || {},
                                    this.name = "CFB",
                                    this.cipher = t.cipher,
                                    this.blockSize = t.blockSize || 16,
                                    this._ints = this.blockSize / 4,
                                    this._inBlock = null,
                                    this._outBlock = new Array(this._ints),
                                    this._partialBlock = new Array(this._ints),
                                    this._partialOutput = e.util.createBuffer(),
                                    this._partialBytes = 0
                            },
                            r.cfb.prototype.start = function(e) {
                                if (! ("iv" in e)) throw new Error("Invalid IV parameter.");
                                this._iv = t(e.iv),
                                    this._inBlock = this._iv.slice(0),
                                    this._partialBytes = 0
                            },
                            r.cfb.prototype.encrypt = function(e, t, n) {
                                var i = e.length();
                                if (0 === i) return ! 0;
                                this.cipher.encrypt(this._inBlock, this._outBlock); {
                                    if (! (0 === this._partialBytes && i >= this.blockSize)) {
                                        var r = (this.blockSize - i) % this.blockSize;
                                        r > 0 && (r = this.blockSize - r),
                                            this._partialOutput.clear();
                                        for (var a = 0; a < this._ints; ++a) this._partialBlock[a] = e.getInt32() ^ this._outBlock[a],
                                            this._partialOutput.putInt32(this._partialBlock[a]);
                                        if (r > 0) e.read -= this.blockSize;
                                        else for (var a = 0; a < this._ints; ++a) this._inBlock[a] = this._partialBlock[a];
                                        return this._partialBytes > 0 && this._partialOutput.getBytes(this._partialBytes),
                                            r > 0 && !n ? (t.putBytes(this._partialOutput.getBytes(r - this._partialBytes)), this._partialBytes = r, !0) : (t.putBytes(this._partialOutput.getBytes(i - this._partialBytes)), void(this._partialBytes = 0))
                                    }
                                    for (var a = 0; a < this._ints; ++a) this._inBlock[a] = e.getInt32() ^ this._outBlock[a],
                                        t.putInt32(this._inBlock[a])
                                }
                            },
                            r.cfb.prototype.decrypt = function(e, t, n) {
                                var i = e.length();
                                if (0 === i) return ! 0;
                                this.cipher.encrypt(this._inBlock, this._outBlock); {
                                    if (! (0 === this._partialBytes && i >= this.blockSize)) {
                                        var r = (this.blockSize - i) % this.blockSize;
                                        r > 0 && (r = this.blockSize - r),
                                            this._partialOutput.clear();
                                        for (var a = 0; a < this._ints; ++a) this._partialBlock[a] = e.getInt32(),
                                            this._partialOutput.putInt32(this._partialBlock[a] ^ this._outBlock[a]);
                                        if (r > 0) e.read -= this.blockSize;
                                        else for (var a = 0; a < this._ints; ++a) this._inBlock[a] = this._partialBlock[a];
                                        return this._partialBytes > 0 && this._partialOutput.getBytes(this._partialBytes),
                                            r > 0 && !n ? (t.putBytes(this._partialOutput.getBytes(r - this._partialBytes)), this._partialBytes = r, !0) : (t.putBytes(this._partialOutput.getBytes(i - this._partialBytes)), void(this._partialBytes = 0))
                                    }
                                    for (var a = 0; a < this._ints; ++a) this._inBlock[a] = e.getInt32(),
                                        t.putInt32(this._inBlock[a] ^ this._outBlock[a])
                                }
                            },
                            r.ofb = function(t) {
                                t = t || {},
                                    this.name = "OFB",
                                    this.cipher = t.cipher,
                                    this.blockSize = t.blockSize || 16,
                                    this._ints = this.blockSize / 4,
                                    this._inBlock = null,
                                    this._outBlock = new Array(this._ints),
                                    this._partialOutput = e.util.createBuffer(),
                                    this._partialBytes = 0
                            },
                            r.ofb.prototype.start = function(e) {
                                if (! ("iv" in e)) throw new Error("Invalid IV parameter.");
                                this._iv = t(e.iv),
                                    this._inBlock = this._iv.slice(0),
                                    this._partialBytes = 0
                            },
                            r.ofb.prototype.encrypt = function(e, t, n) {
                                var i = e.length();
                                if (0 === e.length()) return ! 0;
                                this.cipher.encrypt(this._inBlock, this._outBlock); {
                                    if (! (0 === this._partialBytes && i >= this.blockSize)) {
                                        var r = (this.blockSize - i) % this.blockSize;
                                        r > 0 && (r = this.blockSize - r),
                                            this._partialOutput.clear();
                                        for (var a = 0; a < this._ints; ++a) this._partialOutput.putInt32(e.getInt32() ^ this._outBlock[a]);
                                        if (r > 0) e.read -= this.blockSize;
                                        else for (var a = 0; a < this._ints; ++a) this._inBlock[a] = this._outBlock[a];
                                        return this._partialBytes > 0 && this._partialOutput.getBytes(this._partialBytes),
                                            r > 0 && !n ? (t.putBytes(this._partialOutput.getBytes(r - this._partialBytes)), this._partialBytes = r, !0) : (t.putBytes(this._partialOutput.getBytes(i - this._partialBytes)), void(this._partialBytes = 0))
                                    }
                                    for (var a = 0; a < this._ints; ++a) t.putInt32(e.getInt32() ^ this._outBlock[a]),
                                        this._inBlock[a] = this._outBlock[a]
                                }
                            },
                            r.ofb.prototype.decrypt = r.ofb.prototype.encrypt,
                            r.ctr = function(t) {
                                t = t || {},
                                    this.name = "CTR",
                                    this.cipher = t.cipher,
                                    this.blockSize = t.blockSize || 16,
                                    this._ints = this.blockSize / 4,
                                    this._inBlock = null,
                                    this._outBlock = new Array(this._ints),
                                    this._partialOutput = e.util.createBuffer(),
                                    this._partialBytes = 0
                            },
                            r.ctr.prototype.start = function(e) {
                                if (! ("iv" in e)) throw new Error("Invalid IV parameter.");
                                this._iv = t(e.iv),
                                    this._inBlock = this._iv.slice(0),
                                    this._partialBytes = 0
                            },
                            r.ctr.prototype.encrypt = function(e, t, i) {
                                var r = e.length();
                                if (0 === r) return ! 0;
                                if (this.cipher.encrypt(this._inBlock, this._outBlock), 0 === this._partialBytes && r >= this.blockSize) for (var a = 0; a < this._ints; ++a) t.putInt32(e.getInt32() ^ this._outBlock[a]);
                                else {
                                    var o = (this.blockSize - r) % this.blockSize;
                                    o > 0 && (o = this.blockSize - o),
                                        this._partialOutput.clear();
                                    for (var a = 0; a < this._ints; ++a) this._partialOutput.putInt32(e.getInt32() ^ this._outBlock[a]);
                                    if (o > 0 && (e.read -= this.blockSize), this._partialBytes > 0 && this._partialOutput.getBytes(this._partialBytes), o > 0 && !i) return t.putBytes(this._partialOutput.getBytes(o - this._partialBytes)),
                                        this._partialBytes = o,
                                        !0;
                                    t.putBytes(this._partialOutput.getBytes(r - this._partialBytes)),
                                        this._partialBytes = 0
                                }
                                n(this._inBlock)
                            },
                            r.ctr.prototype.decrypt = r.ctr.prototype.encrypt,
                            r.gcm = function(t) {
                                t = t || {},
                                    this.name = "GCM",
                                    this.cipher = t.cipher,
                                    this.blockSize = t.blockSize || 16,
                                    this._ints = this.blockSize / 4,
                                    this._inBlock = new Array(this._ints),
                                    this._outBlock = new Array(this._ints),
                                    this._partialOutput = e.util.createBuffer(),
                                    this._partialBytes = 0,
                                    this._R = 3774873600
                            },
                            r.gcm.prototype.start = function(t) {
                                if (! ("iv" in t)) throw new Error("Invalid IV parameter.");
                                var r = e.util.createBuffer(t.iv);
                                this._cipherLength = 0;
                                var a;
                                if (a = "additionalData" in t ? e.util.createBuffer(t.additionalData) : e.util.createBuffer(), this._tagLength = "tagLength" in t ? t.tagLength: 128, this._tag = null, t.decrypt && (this._tag = e.util.createBuffer(t.tag).getBytes(), this._tag.length !== this._tagLength / 8)) throw new Error("Authentication tag does not match tag length.");
                                this._hashBlock = new Array(this._ints),
                                    this.tag = null,
                                    this._hashSubkey = new Array(this._ints),
                                    this.cipher.encrypt([0, 0, 0, 0], this._hashSubkey),
                                    this.componentBits = 4,
                                    this._m = this.generateHashTable(this._hashSubkey, this.componentBits);
                                var o = r.length();
                                if (12 === o) this._j0 = [r.getInt32(), r.getInt32(), r.getInt32(), 1];
                                else {
                                    for (this._j0 = [0, 0, 0, 0]; r.length() > 0;) this._j0 = this.ghash(this._hashSubkey, this._j0, [r.getInt32(), r.getInt32(), r.getInt32(), r.getInt32()]);
                                    this._j0 = this.ghash(this._hashSubkey, this._j0, [0, 0].concat(i(8 * o)))
                                }
                                this._inBlock = this._j0.slice(0),
                                    n(this._inBlock),
                                    this._partialBytes = 0,
                                    a = e.util.createBuffer(a),
                                    this._aDataLength = i(8 * a.length());
                                var s = a.length() % this.blockSize;
                                for (s && a.fillWithByte(0, this.blockSize - s), this._s = [0, 0, 0, 0]; a.length() > 0;) this._s = this.ghash(this._hashSubkey, this._s, [a.getInt32(), a.getInt32(), a.getInt32(), a.getInt32()])
                            },
                            r.gcm.prototype.encrypt = function(e, t, i) {
                                var r = e.length();
                                if (0 === r) return ! 0;
                                if (this.cipher.encrypt(this._inBlock, this._outBlock), 0 === this._partialBytes && r >= this.blockSize) {
                                    for (var a = 0; a < this._ints; ++a) t.putInt32(this._outBlock[a] ^= e.getInt32());
                                    this._cipherLength += this.blockSize
                                } else {
                                    var o = (this.blockSize - r) % this.blockSize;
                                    o > 0 && (o = this.blockSize - o),
                                        this._partialOutput.clear();
                                    for (var a = 0; a < this._ints; ++a) this._partialOutput.putInt32(e.getInt32() ^ this._outBlock[a]);
                                    if (0 === o || i) {
                                        if (i) {
                                            var s = r % this.blockSize;
                                            this._cipherLength += s,
                                                this._partialOutput.truncate(this.blockSize - s)
                                        } else this._cipherLength += this.blockSize;
                                        for (var a = 0; a < this._ints; ++a) this._outBlock[a] = this._partialOutput.getInt32();
                                        this._partialOutput.read -= this.blockSize
                                    }
                                    if (this._partialBytes > 0 && this._partialOutput.getBytes(this._partialBytes), o > 0 && !i) return e.read -= this.blockSize,
                                        t.putBytes(this._partialOutput.getBytes(o - this._partialBytes)),
                                        this._partialBytes = o,
                                        !0;
                                    t.putBytes(this._partialOutput.getBytes(r - this._partialBytes)),
                                        this._partialBytes = 0
                                }
                                this._s = this.ghash(this._hashSubkey, this._s, this._outBlock),
                                    n(this._inBlock)
                            },
                            r.gcm.prototype.decrypt = function(e, t, i) {
                                var r = e.length();
                                if (r < this.blockSize && !(i && r > 0)) return ! 0;
                                this.cipher.encrypt(this._inBlock, this._outBlock),
                                    n(this._inBlock),
                                    this._hashBlock[0] = e.getInt32(),
                                    this._hashBlock[1] = e.getInt32(),
                                    this._hashBlock[2] = e.getInt32(),
                                    this._hashBlock[3] = e.getInt32(),
                                    this._s = this.ghash(this._hashSubkey, this._s, this._hashBlock);
                                for (var a = 0; a < this._ints; ++a) t.putInt32(this._outBlock[a] ^ this._hashBlock[a]);
                                this._cipherLength += r < this.blockSize ? r % this.blockSize: this.blockSize
                            },
                            r.gcm.prototype.afterFinish = function(t, n) {
                                var r = !0;
                                n.decrypt && n.overflow && t.truncate(this.blockSize - n.overflow),
                                    this.tag = e.util.createBuffer();
                                var a = this._aDataLength.concat(i(8 * this._cipherLength));
                                this._s = this.ghash(this._hashSubkey, this._s, a);
                                var o = [];
                                this.cipher.encrypt(this._j0, o);
                                for (var s = 0; s < this._ints; ++s) this.tag.putInt32(this._s[s] ^ o[s]);
                                return this.tag.truncate(this.tag.length() % (this._tagLength / 8)),
                                n.decrypt && this.tag.bytes() !== this._tag && (r = !1),
                                    r
                            },
                            r.gcm.prototype.multiply = function(e, t) {
                                for (var n = [0, 0, 0, 0], i = t.slice(0), r = 0; 128 > r; ++r) {
                                    var a = e[r / 32 | 0] & 1 << 31 - r % 32;
                                    a && (n[0] ^= i[0], n[1] ^= i[1], n[2] ^= i[2], n[3] ^= i[3]),
                                        this.pow(i, i)
                                }
                                return n
                            },
                            r.gcm.prototype.pow = function(e, t) {
                                for (var n = 1 & e[3], i = 3; i > 0; --i) t[i] = e[i] >>> 1 | (1 & e[i - 1]) << 31;
                                t[0] = e[0] >>> 1,
                                n && (t[0] ^= this._R)
                            },
                            r.gcm.prototype.tableMultiply = function(e) {
                                for (var t = [0, 0, 0, 0], n = 0; 32 > n; ++n) {
                                    var i = n / 8 | 0,
                                        r = e[i] >>> 4 * (7 - n % 8) & 15,
                                        a = this._m[n][r];
                                    t[0] ^= a[0],
                                        t[1] ^= a[1],
                                        t[2] ^= a[2],
                                        t[3] ^= a[3]
                                }
                                return t
                            },
                            r.gcm.prototype.ghash = function(e, t, n) {
                                return t[0] ^= n[0],
                                    t[1] ^= n[1],
                                    t[2] ^= n[2],
                                    t[3] ^= n[3],
                                    this.tableMultiply(t)
                            },
                            r.gcm.prototype.generateHashTable = function(e, t) {
                                for (var n = 8 / t,
                                         i = 4 * n,
                                         r = 16 * n,
                                         a = new Array(r), o = 0; r > o; ++o) {
                                    var s = [0, 0, 0, 0],
                                        c = o / i | 0,
                                        l = (i - 1 - o % i) * t;
                                    s[c] = 1 << t - 1 << l,
                                        a[o] = this.generateSubHashTable(this.multiply(s, e), t)
                                }
                                return a
                            },
                            r.gcm.prototype.generateSubHashTable = function(e, t) {
                                var n = 1 << t,
                                    i = n >>> 1,
                                    r = new Array(n);
                                r[i] = e.slice(0);
                                for (var a = i >>> 1; a > 0;) this.pow(r[2 * a], r[a] = []),
                                    a >>= 1;
                                for (a = 2; i > a;) {
                                    for (var o = 1; a > o; ++o) {
                                        var s = r[a],
                                            c = r[o];
                                        r[a + o] = [s[0] ^ c[0], s[1] ^ c[1], s[2] ^ c[2], s[3] ^ c[3]]
                                    }
                                    a *= 2
                                }
                                for (r[0] = [0, 0, 0, 0], a = i + 1; n > a; ++a) {
                                    var l = r[a ^ i];
                                    r[a] = [e[0] ^ l[0], e[1] ^ l[1], e[2] ^ l[2], e[3] ^ l[3]]
                                }
                                return r
                            }
                    }
                    var i = "cipherModes";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/cipherModes", ["require", "module", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(t, n) {
                            var i = function() {
                                return new e.aes.Algorithm(t, n)
                            };
                            e.cipher.registerAlgorithm(t, i)
                        }
                        function n() {
                            p = !0,
                                c = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54];
                            for (var e = new Array(256), t = 0; 128 > t; ++t) e[t] = t << 1,
                                e[t + 128] = t + 128 << 1 ^ 283;
                            o = new Array(256),
                                s = new Array(256),
                                l = new Array(4),
                                d = new Array(4);
                            for (var t = 0; 4 > t; ++t) l[t] = new Array(256),
                                d[t] = new Array(256);
                            for (var n, i, r, a, u, f, h, g = 0,
                                     m = 0,
                                     t = 0; 256 > t; ++t) {
                                a = m ^ m << 1 ^ m << 2 ^ m << 3 ^ m << 4,
                                    a = a >> 8 ^ 255 & a ^ 99,
                                    o[g] = a,
                                    s[a] = g,
                                    u = e[a],
                                    n = e[g],
                                    i = e[n],
                                    r = e[i],
                                    f = u << 24 ^ a << 16 ^ a << 8 ^ (a ^ u),
                                    h = (n ^ i ^ r) << 24 ^ (g ^ r) << 16 ^ (g ^ i ^ r) << 8 ^ (g ^ n ^ r);
                                for (var y = 0; 4 > y; ++y) l[y][g] = f,
                                    d[y][a] = h,
                                    f = f << 24 | f >>> 8,
                                    h = h << 24 | h >>> 8;
                                0 === g ? g = m = 1 : (g = n ^ e[e[e[n ^ r]]], m ^= e[e[m]])
                            }
                        }
                        function i(e, t) {
                            for (var n, i = e.slice(0), r = 1, a = i.length, s = a + 6 + 1, l = u * s, p = a; l > p; ++p) n = i[p - 1],
                                p % a === 0 ? (n = o[n >>> 16 & 255] << 24 ^ o[n >>> 8 & 255] << 16 ^ o[255 & n] << 8 ^ o[n >>> 24] ^ c[r] << 24, r++) : a > 6 && p % a === 4 && (n = o[n >>> 24] << 24 ^ o[n >>> 16 & 255] << 16 ^ o[n >>> 8 & 255] << 8 ^ o[255 & n]),
                                i[p] = i[p - a] ^ n;
                            if (t) {
                                var f, h = d[0],
                                    g = d[1],
                                    m = d[2],
                                    y = d[3],
                                    v = i.slice(0);
                                l = i.length;
                                for (var p = 0,
                                         C = l - u; l > p; p += u, C -= u) if (0 === p || p === l - u) v[p] = i[C],
                                    v[p + 1] = i[C + 3],
                                    v[p + 2] = i[C + 2],
                                    v[p + 3] = i[C + 1];
                                else for (var S = 0; u > S; ++S) f = i[C + S],
                                        v[p + (3 & -S)] = h[o[f >>> 24]] ^ g[o[f >>> 16 & 255]] ^ m[o[f >>> 8 & 255]] ^ y[o[255 & f]];
                                i = v
                            }
                            return i
                        }
                        function r(e, t, n, i) {
                            var r, a, c, p, u, f = e.length / 4 - 1;
                            i ? (r = d[0], a = d[1], c = d[2], p = d[3], u = s) : (r = l[0], a = l[1], c = l[2], p = l[3], u = o);
                            var h, g, m, y, v, C, S;
                            h = t[0] ^ e[0],
                                g = t[i ? 3 : 1] ^ e[1],
                                m = t[2] ^ e[2],
                                y = t[i ? 1 : 3] ^ e[3];
                            for (var _ = 3,
                                     b = 1; f > b; ++b) v = r[h >>> 24] ^ a[g >>> 16 & 255] ^ c[m >>> 8 & 255] ^ p[255 & y] ^ e[++_],
                                C = r[g >>> 24] ^ a[m >>> 16 & 255] ^ c[y >>> 8 & 255] ^ p[255 & h] ^ e[++_],
                                S = r[m >>> 24] ^ a[y >>> 16 & 255] ^ c[h >>> 8 & 255] ^ p[255 & g] ^ e[++_],
                                y = r[y >>> 24] ^ a[h >>> 16 & 255] ^ c[g >>> 8 & 255] ^ p[255 & m] ^ e[++_],
                                h = v,
                                g = C,
                                m = S;
                            n[0] = u[h >>> 24] << 24 ^ u[g >>> 16 & 255] << 16 ^ u[m >>> 8 & 255] << 8 ^ u[255 & y] ^ e[++_],
                                n[i ? 3 : 1] = u[g >>> 24] << 24 ^ u[m >>> 16 & 255] << 16 ^ u[y >>> 8 & 255] << 8 ^ u[255 & h] ^ e[++_],
                                n[2] = u[m >>> 24] << 24 ^ u[y >>> 16 & 255] << 16 ^ u[h >>> 8 & 255] << 8 ^ u[255 & g] ^ e[++_],
                                n[i ? 1 : 3] = u[y >>> 24] << 24 ^ u[h >>> 16 & 255] << 16 ^ u[g >>> 8 & 255] << 8 ^ u[255 & m] ^ e[++_]
                        }
                        function a(t) {
                            t = t || {};
                            var n, i = (t.mode || "CBC").toUpperCase(),
                                r = "AES-" + i;
                            n = t.decrypt ? e.cipher.createDecipher(r, t.key) : e.cipher.createCipher(r, t.key);
                            var a = n.start;
                            return n.start = function(t, i) {
                                var r = null;
                                i instanceof e.util.ByteBuffer && (r = i, i = {}),
                                    i = i || {},
                                    i.output = r,
                                    i.iv = t,
                                    a.call(n, i)
                            },
                                n
                        }
                        e.aes = e.aes || {},
                            e.aes.startEncrypting = function(e, t, n, i) {
                                var r = a({
                                    key: e,
                                    output: n,
                                    decrypt: !1,
                                    mode: i
                                });
                                return r.start(t),
                                    r
                            },
                            e.aes.createEncryptionCipher = function(e, t) {
                                return a({
                                    key: e,
                                    output: null,
                                    decrypt: !1,
                                    mode: t
                                })
                            },
                            e.aes.startDecrypting = function(e, t, n, i) {
                                var r = a({
                                    key: e,
                                    output: n,
                                    decrypt: !0,
                                    mode: i
                                });
                                return r.start(t),
                                    r
                            },
                            e.aes.createDecryptionCipher = function(e, t) {
                                return a({
                                    key: e,
                                    output: null,
                                    decrypt: !0,
                                    mode: t
                                })
                            },
                            e.aes.Algorithm = function(e, t) {
                                p || n();
                                var i = this;
                                i.name = e,
                                    i.mode = new t({
                                        blockSize: 16,
                                        cipher: {
                                            encrypt: function(e, t) {
                                                return r(i._w, e, t, !1)
                                            },
                                            decrypt: function(e, t) {
                                                return r(i._w, e, t, !0)
                                            }
                                        }
                                    }),
                                    i._init = !1
                            },
                            e.aes.Algorithm.prototype.initialize = function(t) {
                                if (!this._init) {
                                    var n, r = t.key;
                                    if ("string" != typeof r || 16 !== r.length && 24 !== r.length && 32 !== r.length) {
                                        if (e.util.isArray(r) && (16 === r.length || 24 === r.length || 32 === r.length)) {
                                            n = r,
                                                r = e.util.createBuffer();
                                            for (var a = 0; a < n.length; ++a) r.putByte(n[a])
                                        }
                                    } else r = e.util.createBuffer(r);
                                    if (!e.util.isArray(r)) {
                                        n = r,
                                            r = [];
                                        var o = n.length();
                                        if (16 === o || 24 === o || 32 === o) {
                                            o >>>= 2;
                                            for (var a = 0; o > a; ++a) r.push(n.getInt32())
                                        }
                                    }
                                    if (!e.util.isArray(r) || 4 !== r.length && 6 !== r.length && 8 !== r.length) throw new Error("Invalid key parameter.");
                                    var s = this.mode.name,
                                        c = -1 !== ["CFB", "OFB", "CTR", "GCM"].indexOf(s);
                                    this._w = i(r, t.decrypt && !c),
                                        this._init = !0
                                }
                            },
                            e.aes._expandKey = function(e, t) {
                                return p || n(),
                                    i(e, t)
                            },
                            e.aes._updateBlock = r,
                            t("AES-ECB", e.cipher.modes.ecb),
                            t("AES-CBC", e.cipher.modes.cbc),
                            t("AES-CFB", e.cipher.modes.cfb),
                            t("AES-OFB", e.cipher.modes.ofb),
                            t("AES-CTR", e.cipher.modes.ctr),
                            t("AES-GCM", e.cipher.modes.gcm);
                        var o, s, c, l, d, p = !1,
                            u = 4
                    }
                    var i = "aes";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/aes", ["require", "module", "./cipher", "./cipherModes", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        e.pki = e.pki || {};
                        var t = e.pki.oids = e.oids = e.oids || {};
                        t["1.2.840.113549.1.1.1"] = "rsaEncryption",
                            t.rsaEncryption = "1.2.840.113549.1.1.1",
                            t["1.2.840.113549.1.1.4"] = "md5WithRSAEncryption",
                            t.md5WithRSAEncryption = "1.2.840.113549.1.1.4",
                            t["1.2.840.113549.1.1.5"] = "sha1WithRSAEncryption",
                            t.sha1WithRSAEncryption = "1.2.840.113549.1.1.5",
                            t["1.2.840.113549.1.1.7"] = "RSAES-OAEP",
                            t["RSAES-OAEP"] = "1.2.840.113549.1.1.7",
                            t["1.2.840.113549.1.1.8"] = "mgf1",
                            t.mgf1 = "1.2.840.113549.1.1.8",
                            t["1.2.840.113549.1.1.9"] = "pSpecified",
                            t.pSpecified = "1.2.840.113549.1.1.9",
                            t["1.2.840.113549.1.1.10"] = "RSASSA-PSS",
                            t["RSASSA-PSS"] = "1.2.840.113549.1.1.10",
                            t["1.2.840.113549.1.1.11"] = "sha256WithRSAEncryption",
                            t.sha256WithRSAEncryption = "1.2.840.113549.1.1.11",
                            t["1.2.840.113549.1.1.12"] = "sha384WithRSAEncryption",
                            t.sha384WithRSAEncryption = "1.2.840.113549.1.1.12",
                            t["1.2.840.113549.1.1.13"] = "sha512WithRSAEncryption",
                            t.sha512WithRSAEncryption = "1.2.840.113549.1.1.13",
                            t["1.3.14.3.2.7"] = "desCBC",
                            t.desCBC = "1.3.14.3.2.7",
                            t["1.3.14.3.2.26"] = "sha1",
                            t.sha1 = "1.3.14.3.2.26",
                            t["2.16.840.1.101.3.4.2.1"] = "sha256",
                            t.sha256 = "2.16.840.1.101.3.4.2.1",
                            t["2.16.840.1.101.3.4.2.2"] = "sha384",
                            t.sha384 = "2.16.840.1.101.3.4.2.2",
                            t["2.16.840.1.101.3.4.2.3"] = "sha512",
                            t.sha512 = "2.16.840.1.101.3.4.2.3",
                            t["1.2.840.113549.2.5"] = "md5",
                            t.md5 = "1.2.840.113549.2.5",
                            t["1.2.840.113549.1.7.1"] = "data",
                            t.data = "1.2.840.113549.1.7.1",
                            t["1.2.840.113549.1.7.2"] = "signedData",
                            t.signedData = "1.2.840.113549.1.7.2",
                            t["1.2.840.113549.1.7.3"] = "envelopedData",
                            t.envelopedData = "1.2.840.113549.1.7.3",
                            t["1.2.840.113549.1.7.4"] = "signedAndEnvelopedData",
                            t.signedAndEnvelopedData = "1.2.840.113549.1.7.4",
                            t["1.2.840.113549.1.7.5"] = "digestedData",
                            t.digestedData = "1.2.840.113549.1.7.5",
                            t["1.2.840.113549.1.7.6"] = "encryptedData",
                            t.encryptedData = "1.2.840.113549.1.7.6",
                            t["1.2.840.113549.1.9.1"] = "emailAddress",
                            t.emailAddress = "1.2.840.113549.1.9.1",
                            t["1.2.840.113549.1.9.2"] = "unstructuredName",
                            t.unstructuredName = "1.2.840.113549.1.9.2",
                            t["1.2.840.113549.1.9.3"] = "contentType",
                            t.contentType = "1.2.840.113549.1.9.3",
                            t["1.2.840.113549.1.9.4"] = "messageDigest",
                            t.messageDigest = "1.2.840.113549.1.9.4",
                            t["1.2.840.113549.1.9.5"] = "signingTime",
                            t.signingTime = "1.2.840.113549.1.9.5",
                            t["1.2.840.113549.1.9.6"] = "counterSignature",
                            t.counterSignature = "1.2.840.113549.1.9.6",
                            t["1.2.840.113549.1.9.7"] = "challengePassword",
                            t.challengePassword = "1.2.840.113549.1.9.7",
                            t["1.2.840.113549.1.9.8"] = "unstructuredAddress",
                            t.unstructuredAddress = "1.2.840.113549.1.9.8",
                            t["1.2.840.113549.1.9.14"] = "extensionRequest",
                            t.extensionRequest = "1.2.840.113549.1.9.14",
                            t["1.2.840.113549.1.9.20"] = "friendlyName",
                            t.friendlyName = "1.2.840.113549.1.9.20",
                            t["1.2.840.113549.1.9.21"] = "localKeyId",
                            t.localKeyId = "1.2.840.113549.1.9.21",
                            t["1.2.840.113549.1.9.22.1"] = "x509Certificate",
                            t.x509Certificate = "1.2.840.113549.1.9.22.1",
                            t["1.2.840.113549.1.12.10.1.1"] = "keyBag",
                            t.keyBag = "1.2.840.113549.1.12.10.1.1",
                            t["1.2.840.113549.1.12.10.1.2"] = "pkcs8ShroudedKeyBag",
                            t.pkcs8ShroudedKeyBag = "1.2.840.113549.1.12.10.1.2",
                            t["1.2.840.113549.1.12.10.1.3"] = "certBag",
                            t.certBag = "1.2.840.113549.1.12.10.1.3",
                            t["1.2.840.113549.1.12.10.1.4"] = "crlBag",
                            t.crlBag = "1.2.840.113549.1.12.10.1.4",
                            t["1.2.840.113549.1.12.10.1.5"] = "secretBag",
                            t.secretBag = "1.2.840.113549.1.12.10.1.5",
                            t["1.2.840.113549.1.12.10.1.6"] = "safeContentsBag",
                            t.safeContentsBag = "1.2.840.113549.1.12.10.1.6",
                            t["1.2.840.113549.1.5.13"] = "pkcs5PBES2",
                            t.pkcs5PBES2 = "1.2.840.113549.1.5.13",
                            t["1.2.840.113549.1.5.12"] = "pkcs5PBKDF2",
                            t.pkcs5PBKDF2 = "1.2.840.113549.1.5.12",
                            t["1.2.840.113549.1.12.1.1"] = "pbeWithSHAAnd128BitRC4",
                            t.pbeWithSHAAnd128BitRC4 = "1.2.840.113549.1.12.1.1",
                            t["1.2.840.113549.1.12.1.2"] = "pbeWithSHAAnd40BitRC4",
                            t.pbeWithSHAAnd40BitRC4 = "1.2.840.113549.1.12.1.2",
                            t["1.2.840.113549.1.12.1.3"] = "pbeWithSHAAnd3-KeyTripleDES-CBC",
                            t["pbeWithSHAAnd3-KeyTripleDES-CBC"] = "1.2.840.113549.1.12.1.3",
                            t["1.2.840.113549.1.12.1.4"] = "pbeWithSHAAnd2-KeyTripleDES-CBC",
                            t["pbeWithSHAAnd2-KeyTripleDES-CBC"] = "1.2.840.113549.1.12.1.4",
                            t["1.2.840.113549.1.12.1.5"] = "pbeWithSHAAnd128BitRC2-CBC",
                            t["pbeWithSHAAnd128BitRC2-CBC"] = "1.2.840.113549.1.12.1.5",
                            t["1.2.840.113549.1.12.1.6"] = "pbewithSHAAnd40BitRC2-CBC",
                            t["pbewithSHAAnd40BitRC2-CBC"] = "1.2.840.113549.1.12.1.6",
                            t["1.2.840.113549.3.7"] = "des-EDE3-CBC",
                            t["des-EDE3-CBC"] = "1.2.840.113549.3.7",
                            t["2.16.840.1.101.3.4.1.2"] = "aes128-CBC",
                            t["aes128-CBC"] = "2.16.840.1.101.3.4.1.2",
                            t["2.16.840.1.101.3.4.1.22"] = "aes192-CBC",
                        t["aes192-CBC"] = "2.16.840.1.101.3.4.1.22",
                        t["2.16.840.1.101.3.4.1.42"] = "aes256-CBC",
                        t["aes256-CBC"] = "2.16.840.1.101.3.4.1.42",
                        t["2.5.4.3"] = "commonName",
                        t.commonName = "2.5.4.3",
                        t["2.5.4.5"] = "serialName",
                        t.serialName = "2.5.4.5",
                        t["2.5.4.6"] = "countryName",
                        t.countryName = "2.5.4.6",
                        t["2.5.4.7"] = "localityName",
                        t.localityName = "2.5.4.7",
                        t["2.5.4.8"] = "stateOrProvinceName",
                        t.stateOrProvinceName = "2.5.4.8",
                        t["2.5.4.10"] = "organizationName",
                        t.organizationName = "2.5.4.10",
                        t["2.5.4.11"] = "organizationalUnitName",
                        t.organizationalUnitName = "2.5.4.11",
                        t["2.16.840.1.113730.1.1"] = "nsCertType",
                        t.nsCertType = "2.16.840.1.113730.1.1",
                        t["2.5.29.1"] = "authorityKeyIdentifier",
                        t["2.5.29.2"] = "keyAttributes",
                        t["2.5.29.3"] = "certificatePolicies",
                        t["2.5.29.4"] = "keyUsageRestriction",
                        t["2.5.29.5"] = "policyMapping",
                        t["2.5.29.6"] = "subtreesConstraint",
                        t["2.5.29.7"] = "subjectAltName",
                        t["2.5.29.8"] = "issuerAltName",
                        t["2.5.29.9"] = "subjectDirectoryAttributes",
                        t["2.5.29.10"] = "basicConstraints",
                        t["2.5.29.11"] = "nameConstraints",
                        t["2.5.29.12"] = "policyConstraints",
                        t["2.5.29.13"] = "basicConstraints",
                        t["2.5.29.14"] = "subjectKeyIdentifier",
                        t.subjectKeyIdentifier = "2.5.29.14",
                        t["2.5.29.15"] = "keyUsage",
                        t.keyUsage = "2.5.29.15",
                        t["2.5.29.16"] = "privateKeyUsagePeriod",
                        t["2.5.29.17"] = "subjectAltName",
                        t.subjectAltName = "2.5.29.17",
                        t["2.5.29.18"] = "issuerAltName",
                        t.issuerAltName = "2.5.29.18",
                        t["2.5.29.19"] = "basicConstraints",
                        t.basicConstraints = "2.5.29.19",
                        t["2.5.29.20"] = "cRLNumber",
                        t["2.5.29.21"] = "cRLReason",
                        t["2.5.29.22"] = "expirationDate",
                        t["2.5.29.23"] = "instructionCode",
                        t["2.5.29.24"] = "invalidityDate",
                        t["2.5.29.25"] = "cRLDistributionPoints",
                        t["2.5.29.26"] = "issuingDistributionPoint",
                        t["2.5.29.27"] = "deltaCRLIndicator",
                        t["2.5.29.28"] = "issuingDistributionPoint",
                        t["2.5.29.29"] = "certificateIssuer",
                        t["2.5.29.30"] = "nameConstraints",
                        t["2.5.29.31"] = "cRLDistributionPoints",
                        t["2.5.29.32"] = "certificatePolicies",
                        t["2.5.29.33"] = "policyMappings",
                        t["2.5.29.34"] = "policyConstraints",
                        t["2.5.29.35"] = "authorityKeyIdentifier",
                        t.authorityKeyIdentifier = "2.5.29.35",
                        t["2.5.29.36"] = "policyConstraints",
                        t["2.5.29.37"] = "extKeyUsage",
                        t.extKeyUsage = "2.5.29.37",
                        t["2.5.29.46"] = "freshestCRL",
                        t["2.5.29.54"] = "inhibitAnyPolicy",
                        t["1.3.6.1.5.5.7.3.1"] = "serverAuth",
                        t.serverAuth = "1.3.6.1.5.5.7.3.1",
                        t["1.3.6.1.5.5.7.3.2"] = "clientAuth",
                        t.clientAuth = "1.3.6.1.5.5.7.3.2",
                        t["1.3.6.1.5.5.7.3.3"] = "codeSigning",
                        t.codeSigning = "1.3.6.1.5.5.7.3.3",
                        t["1.3.6.1.5.5.7.3.4"] = "emailProtection",
                        t.emailProtection = "1.3.6.1.5.5.7.3.4",
                        t["1.3.6.1.5.5.7.3.8"] = "timeStamping",
                        t.timeStamping = "1.3.6.1.5.5.7.3.8"
                    }
                    var i = "oids";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/oids", ["require", "module"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        var t = e.asn1 = e.asn1 || {};
                        t.Class = {
                            UNIVERSAL: 0,
                            APPLICATION: 64,
                            CONTEXT_SPECIFIC: 128,
                            PRIVATE: 192
                        },
                            t.Type = {
                                NONE: 0,
                                BOOLEAN: 1,
                                INTEGER: 2,
                                BITSTRING: 3,
                                OCTETSTRING: 4,
                                NULL: 5,
                                OID: 6,
                                ODESC: 7,
                                EXTERNAL: 8,
                                REAL: 9,
                                ENUMERATED: 10,
                                EMBEDDED: 11,
                                UTF8: 12,
                                ROID: 13,
                                SEQUENCE: 16,
                                SET: 17,
                                PRINTABLESTRING: 19,
                                IA5STRING: 22,
                                UTCTIME: 23,
                                GENERALIZEDTIME: 24,
                                BMPSTRING: 30
                            },
                            t.create = function(t, n, i, r) {
                                if (e.util.isArray(r)) {
                                    for (var a = [], o = 0; o < r.length; ++o) void 0 !== r[o] && a.push(r[o]);
                                    r = a
                                }
                                return {
                                    tagClass: t,
                                    type: n,
                                    constructed: i,
                                    composed: i || e.util.isArray(r),
                                    value: r
                                }
                            };
                        var n = t.getBerValueLength = function(e) {
                            var t = e.getByte();
                            if (128 === t) return void 0;
                            var n, i = 128 & t;
                            return n = i ? e.getInt((127 & t) << 3) : t
                        };
                        t.fromDer = function(i, r) {
                            if (void 0 === r && (r = !0), "string" == typeof i && (i = e.util.createBuffer(i)), i.length() < 2) {
                                var a = new Error("Too few bytes to parse DER.");
                                throw a.bytes = i.length(),
                                    a
                            }
                            var o = i.getByte(),
                                s = 192 & o,
                                c = 31 & o,
                                l = n(i);
                            if (i.length() < l) {
                                if (r) {
                                    var a = new Error("Too few bytes to read ASN.1 value.");
                                    throw a.detail = i.length() + " < " + l,
                                        a
                                }
                                l = i.length()
                            }
                            var d, p = 32 === (32 & o),
                                u = p;
                            if (!u && s === t.Class.UNIVERSAL && c === t.Type.BITSTRING && l > 1) {
                                var f = i.read,
                                    h = i.getByte();
                                if (0 === h) {
                                    o = i.getByte();
                                    var g = 192 & o;
                                    if (g === t.Class.UNIVERSAL || g === t.Class.CONTEXT_SPECIFIC) try {
                                        var m = n(i);
                                        u = m === l - (i.read - f),
                                        u && (++f, --l)
                                    } catch(y) {}
                                }
                                i.read = f
                            }
                            if (u) if (d = [], void 0 === l) for (;;) {
                                if (i.bytes(2) === String.fromCharCode(0, 0)) {
                                    i.getBytes(2);
                                    break
                                }
                                d.push(t.fromDer(i, r))
                            } else for (var v = i.length(); l > 0;) d.push(t.fromDer(i, r)),
                                l -= v - i.length(),
                                v = i.length();
                            else {
                                if (void 0 === l) {
                                    if (r) throw new Error("Non-constructed ASN.1 object of indefinite length.");
                                    l = i.length()
                                }
                                if (c === t.Type.BMPSTRING) {
                                    d = "";
                                    for (var C = 0; l > C; C += 2) d += String.fromCharCode(i.getInt16())
                                } else d = i.getBytes(l)
                            }
                            return t.create(s, c, p, d)
                        },
                            t.toDer = function(n) {
                                var i = e.util.createBuffer(),
                                    r = n.tagClass | n.type,
                                    a = e.util.createBuffer();
                                if (n.composed) {
                                    n.constructed ? r |= 32 : a.putByte(0);
                                    for (var o = 0; o < n.value.length; ++o) void 0 !== n.value[o] && a.putBuffer(t.toDer(n.value[o]))
                                } else if (n.type === t.Type.BMPSTRING) for (var o = 0; o < n.value.length; ++o) a.putInt16(n.value.charCodeAt(o));
                                else a.putBytes(n.value);
                                if (i.putByte(r), a.length() <= 127) i.putByte(127 & a.length());
                                else {
                                    var s = a.length(),
                                        c = "";
                                    do c += String.fromCharCode(255 & s),
                                        s >>>= 8;
                                    while (s > 0);
                                    i.putByte(128 | c.length);
                                    for (var o = c.length - 1; o >= 0; --o) i.putByte(c.charCodeAt(o))
                                }
                                return i.putBuffer(a),
                                    i
                            },
                            t.oidToDer = function(t) {
                                var n = t.split("."),
                                    i = e.util.createBuffer();
                                i.putByte(40 * parseInt(n[0], 10) + parseInt(n[1], 10));
                                for (var r, a, o, s, c = 2; c < n.length; ++c) {
                                    r = !0,
                                        a = [],
                                        o = parseInt(n[c], 10);
                                    do s = 127 & o,
                                        o >>>= 7,
                                    r || (s |= 128),
                                        a.push(s),
                                        r = !1;
                                    while (o > 0);
                                    for (var l = a.length - 1; l >= 0; --l) i.putByte(a[l])
                                }
                                return i
                            },
                            t.derToOid = function(t) {
                                var n;
                                "string" == typeof t && (t = e.util.createBuffer(t));
                                var i = t.getByte();
                                n = Math.floor(i / 40) + "." + i % 40;
                                for (var r = 0; t.length() > 0;) i = t.getByte(),
                                    r <<= 7,
                                    128 & i ? r += 127 & i: (n += "." + (r + i), r = 0);
                                return n
                            },
                            t.utcTimeToDate = function(e) {
                                var t = new Date,
                                    n = parseInt(e.substr(0, 2), 10);
                                n = n >= 50 ? 1900 + n: 2e3 + n;
                                var i = parseInt(e.substr(2, 2), 10) - 1,
                                    r = parseInt(e.substr(4, 2), 10),
                                    a = parseInt(e.substr(6, 2), 10),
                                    o = parseInt(e.substr(8, 2), 10),
                                    s = 0;
                                if (e.length > 11) {
                                    var c = e.charAt(10),
                                        l = 10;
                                    "+" !== c && "-" !== c && (s = parseInt(e.substr(10, 2), 10), l += 2)
                                }
                                if (t.setUTCFullYear(n, i, r), t.setUTCHours(a, o, s, 0), l && (c = e.charAt(l), "+" === c || "-" === c)) {
                                    var d = parseInt(e.substr(l + 1, 2), 10),
                                        p = parseInt(e.substr(l + 4, 2), 10),
                                        u = 60 * d + p;
                                    u *= 6e4,
                                        t.setTime("+" === c ? +t - u: +t + u)
                                }
                                return t
                            },
                            t.generalizedTimeToDate = function(e) {
                                var t = new Date,
                                    n = parseInt(e.substr(0, 4), 10),
                                    i = parseInt(e.substr(4, 2), 10) - 1,
                                    r = parseInt(e.substr(6, 2), 10),
                                    a = parseInt(e.substr(8, 2), 10),
                                    o = parseInt(e.substr(10, 2), 10),
                                    s = parseInt(e.substr(12, 2), 10),
                                    c = 0,
                                    l = 0,
                                    d = !1;
                                "Z" === e.charAt(e.length - 1) && (d = !0);
                                var p = e.length - 5,
                                    u = e.charAt(p);
                                if ("+" === u || "-" === u) {
                                    var f = parseInt(e.substr(p + 1, 2), 10),
                                        h = parseInt(e.substr(p + 4, 2), 10);
                                    l = 60 * f + h,
                                        l *= 6e4,
                                    "+" === u && (l *= -1),
                                        d = !0
                                }
                                return "." === e.charAt(14) && (c = 1e3 * parseFloat(e.substr(14), 10)),
                                    d ? (t.setUTCFullYear(n, i, r), t.setUTCHours(a, o, s, c), t.setTime( + t + l)) : (t.setFullYear(n, i, r), t.setHours(a, o, s, c)),
                                    t
                            },
                            t.dateToUtcTime = function(e) {
                                if ("string" == typeof e) return e;
                                var t = "",
                                    n = [];
                                n.push(("" + e.getUTCFullYear()).substr(2)),
                                    n.push("" + (e.getUTCMonth() + 1)),
                                    n.push("" + e.getUTCDate()),
                                    n.push("" + e.getUTCHours()),
                                    n.push("" + e.getUTCMinutes()),
                                    n.push("" + e.getUTCSeconds());
                                for (var i = 0; i < n.length; ++i) n[i].length < 2 && (t += "0"),
                                    t += n[i];
                                return t += "Z"
                            },
                            t.dateToGeneralizedTime = function(e) {
                                if ("string" == typeof e) return e;
                                var t = "",
                                    n = [];
                                n.push("" + e.getUTCFullYear()),
                                    n.push("" + (e.getUTCMonth() + 1)),
                                    n.push("" + e.getUTCDate()),
                                    n.push("" + e.getUTCHours()),
                                    n.push("" + e.getUTCMinutes()),
                                    n.push("" + e.getUTCSeconds());
                                for (var i = 0; i < n.length; ++i) n[i].length < 2 && (t += "0"),
                                    t += n[i];
                                return t += "Z"
                            },
                            t.integerToDer = function(t) {
                                var n = e.util.createBuffer();
                                if (t >= -128 && 128 > t) return n.putSignedInt(t, 8);
                                if (t >= -32768 && 32768 > t) return n.putSignedInt(t, 16);
                                if (t >= -8388608 && 8388608 > t) return n.putSignedInt(t, 24);
                                if (t >= -2147483648 && 2147483648 > t) return n.putSignedInt(t, 32);
                                var i = new Error("Integer too large; max is 32-bits.");
                                throw i.integer = t,
                                    i
                            },
                            t.derToInteger = function(t) {
                                "string" == typeof t && (t = e.util.createBuffer(t));
                                var n = 8 * t.length();
                                if (n > 32) throw new Error("Integer too large; max is 32-bits.");
                                return t.getSignedInt(n)
                            },
                            t.validate = function(n, i, r, a) {
                                var o = !1;
                                if (n.tagClass !== i.tagClass && "undefined" != typeof i.tagClass || n.type !== i.type && "undefined" != typeof i.type) a && (n.tagClass !== i.tagClass && a.push("[" + i.name + '] Expected tag class "' + i.tagClass + '", got "' + n.tagClass + '"'), n.type !== i.type && a.push("[" + i.name + '] Expected type "' + i.type + '", got "' + n.type + '"'));
                                else if (n.constructed === i.constructed || "undefined" == typeof i.constructed) {
                                    if (o = !0, i.value && e.util.isArray(i.value)) for (var s = 0,
                                                                                             c = 0; o && c < i.value.length; ++c) o = i.value[c].optional || !1,
                                    n.value[s] && (o = t.validate(n.value[s], i.value[c], r, a), o ? ++s: i.value[c].optional && (o = !0)),
                                    !o && a && a.push("[" + i.name + '] Tag class "' + i.tagClass + '", type "' + i.type + '" expected value length "' + i.value.length + '", got "' + n.value.length + '"');
                                    o && r && (i.capture && (r[i.capture] = n.value), i.captureAsn1 && (r[i.captureAsn1] = n))
                                } else a && a.push("[" + i.name + '] Expected constructed "' + i.constructed + '", got "' + n.constructed + '"');
                                return o
                            };
                        var i = /[^\\u0000-\\u00ff]/;
                        t.prettyPrint = function(n, r, a) {
                            var o = "";
                            r = r || 0,
                                a = a || 2,
                            r > 0 && (o += "\n");
                            for (var s = "",
                                     c = 0; r * a > c; ++c) s += " ";
                            switch (o += s + "Tag: ", n.tagClass) {
                                case t.Class.UNIVERSAL:
                                    o += "Universal:";
                                    break;
                                case t.Class.APPLICATION:
                                    o += "Application:";
                                    break;
                                case t.Class.CONTEXT_SPECIFIC:
                                    o += "Context-Specific:";
                                    break;
                                case t.Class.PRIVATE:
                                    o += "Private:"
                            }
                            if (n.tagClass === t.Class.UNIVERSAL) switch (o += n.type, n.type) {
                                case t.Type.NONE:
                                    o += " (None)";
                                    break;
                                case t.Type.BOOLEAN:
                                    o += " (Boolean)";
                                    break;
                                case t.Type.BITSTRING:
                                    o += " (Bit string)";
                                    break;
                                case t.Type.INTEGER:
                                    o += " (Integer)";
                                    break;
                                case t.Type.OCTETSTRING:
                                    o += " (Octet string)";
                                    break;
                                case t.Type.NULL:
                                    o += " (Null)";
                                    break;
                                case t.Type.OID:
                                    o += " (Object Identifier)";
                                    break;
                                case t.Type.ODESC:
                                    o += " (Object Descriptor)";
                                    break;
                                case t.Type.EXTERNAL:
                                    o += " (External or Instance of)";
                                    break;
                                case t.Type.REAL:
                                    o += " (Real)";
                                    break;
                                case t.Type.ENUMERATED:
                                    o += " (Enumerated)";
                                    break;
                                case t.Type.EMBEDDED:
                                    o += " (Embedded PDV)";
                                    break;
                                case t.Type.UTF8:
                                    o += " (UTF8)";
                                    break;
                                case t.Type.ROID:
                                    o += " (Relative Object Identifier)";
                                    break;
                                case t.Type.SEQUENCE:
                                    o += " (Sequence)";
                                    break;
                                case t.Type.SET:
                                    o += " (Set)";
                                    break;
                                case t.Type.PRINTABLESTRING:
                                    o += " (Printable String)";
                                    break;
                                case t.Type.IA5String:
                                    o += " (IA5String (ASCII))";
                                    break;
                                case t.Type.UTCTIME:
                                    o += " (UTC time)";
                                    break;
                                case t.Type.GENERALIZEDTIME:
                                    o += " (Generalized time)";
                                    break;
                                case t.Type.BMPSTRING:
                                    o += " (BMP String)"
                            } else o += n.type;
                            if (o += "\n", o += s + "Constructed: " + n.constructed + "\n", n.composed) {
                                for (var l = 0,
                                         d = "",
                                         c = 0; c < n.value.length; ++c) void 0 !== n.value[c] && (l += 1, d += t.prettyPrint(n.value[c], r + 1, a), c + 1 < n.value.length && (d += ","));
                                o += s + "Sub values: " + l + d
                            } else {
                                if (o += s + "Value: ", n.type === t.Type.OID) {
                                    var p = t.derToOid(n.value);
                                    o += p,
                                    e.pki && e.pki.oids && p in e.pki.oids && (o += " (" + e.pki.oids[p] + ") ")
                                }
                                if (n.type === t.Type.INTEGER) try {
                                    o += t.derToInteger(n.value)
                                } catch(u) {
                                    o += "0x" + e.util.bytesToHex(n.value)
                                } else n.type === t.Type.OCTETSTRING ? (i.test(n.value) || (o += "(" + n.value + ") "), o += "0x" + e.util.bytesToHex(n.value)) : o += n.type === t.Type.UTF8 ? e.util.decodeUtf8(n.value) : n.type === t.Type.PRINTABLESTRING || n.type === t.Type.IA5String ? n.value: i.test(n.value) ? "0x" + e.util.bytesToHex(n.value) : 0 === n.value.length ? "[null]": n.value
                            }
                            return o
                        }
                    }
                    var i = "asn1";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/asn1", ["require", "module", "./util", "./oids"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t() {
                            r = String.fromCharCode(128),
                                r += e.util.fillString(String.fromCharCode(0), 64),
                                a = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 1, 6, 11, 0, 5, 10, 15, 4, 9, 14, 3, 8, 13, 2, 7, 12, 5, 8, 11, 14, 1, 4, 7, 10, 13, 0, 3, 6, 9, 12, 15, 2, 0, 7, 14, 5, 12, 3, 10, 1, 8, 15, 6, 13, 4, 11, 2, 9],
                                o = [7, 12, 17, 22, 7, 12, 17, 22, 7, 12, 17, 22, 7, 12, 17, 22, 5, 9, 14, 20, 5, 9, 14, 20, 5, 9, 14, 20, 5, 9, 14, 20, 4, 11, 16, 23, 4, 11, 16, 23, 4, 11, 16, 23, 4, 11, 16, 23, 6, 10, 15, 21, 6, 10, 15, 21, 6, 10, 15, 21, 6, 10, 15, 21],
                                s = new Array(64);
                            for (var t = 0; 64 > t; ++t) s[t] = Math.floor(4294967296 * Math.abs(Math.sin(t + 1)));
                            c = !0
                        }
                        function n(e, t, n) {
                            for (var i, r, c, l, d, p, u, f, h = n.length(); h >= 64;) {
                                for (r = e.h0, c = e.h1, l = e.h2, d = e.h3, f = 0; 16 > f; ++f) t[f] = n.getInt32Le(),
                                    p = d ^ c & (l ^ d),
                                    i = r + p + s[f] + t[f],
                                    u = o[f],
                                    r = d,
                                    d = l,
                                    l = c,
                                    c += i << u | i >>> 32 - u;
                                for (; 32 > f; ++f) p = l ^ d & (c ^ l),
                                    i = r + p + s[f] + t[a[f]],
                                    u = o[f],
                                    r = d,
                                    d = l,
                                    l = c,
                                    c += i << u | i >>> 32 - u;
                                for (; 48 > f; ++f) p = c ^ l ^ d,
                                    i = r + p + s[f] + t[a[f]],
                                    u = o[f],
                                    r = d,
                                    d = l,
                                    l = c,
                                    c += i << u | i >>> 32 - u;
                                for (; 64 > f; ++f) p = l ^ (c | ~d),
                                    i = r + p + s[f] + t[a[f]],
                                    u = o[f],
                                    r = d,
                                    d = l,
                                    l = c,
                                    c += i << u | i >>> 32 - u;
                                e.h0 = e.h0 + r | 0,
                                    e.h1 = e.h1 + c | 0,
                                    e.h2 = e.h2 + l | 0,
                                    e.h3 = e.h3 + d | 0,
                                    h -= 64
                            }
                        }
                        var i = e.md5 = e.md5 || {};
                        e.md = e.md || {},
                            e.md.algorithms = e.md.algorithms || {},
                            e.md.md5 = e.md.algorithms.md5 = i,
                            i.create = function() {
                                c || t();
                                var i = null,
                                    a = e.util.createBuffer(),
                                    o = new Array(16),
                                    s = {
                                        algorithm: "md5",
                                        blockLength: 64,
                                        digestLength: 16,
                                        messageLength: 0,
                                        fullMessageLength: null,
                                        messageLengthSize: 8
                                    };
                                return s.start = function() {
                                    s.messageLength = 0,
                                        s.fullMessageLength = s.messageLength64 = [];
                                    for (var t = s.messageLengthSize / 4,
                                             n = 0; t > n; ++n) s.fullMessageLength.push(0);
                                    return a = e.util.createBuffer(),
                                        i = {
                                            h0: 1732584193,
                                            h1: 4023233417,
                                            h2: 2562383102,
                                            h3: 271733878
                                        },
                                        s
                                },
                                    s.start(),
                                    s.update = function(t, r) {
                                        "utf8" === r && (t = e.util.encodeUtf8(t));
                                        var c = t.length;
                                        s.messageLength += c,
                                            c = [c / 4294967296 >>> 0, c >>> 0];
                                        for (var l = s.fullMessageLength.length - 1; l >= 0; --l) s.fullMessageLength[l] += c[1],
                                            c[1] = c[0] + (s.fullMessageLength[l] / 4294967296 >>> 0),
                                            s.fullMessageLength[l] = s.fullMessageLength[l] >>> 0,
                                            c[0] = c[1] / 4294967296 >>> 0;
                                        return a.putBytes(t),
                                            n(i, o, a),
                                        (a.read > 2048 || 0 === a.length()) && a.compact(),
                                            s
                                    },
                                    s.digest = function() {
                                        var t = e.util.createBuffer();
                                        t.putBytes(a.bytes());
                                        var c = s.fullMessageLength[s.fullMessageLength.length - 1] + s.messageLengthSize,
                                            l = c & s.blockLength - 1;
                                        t.putBytes(r.substr(0, s.blockLength - l));
                                        for (var d, p = 0,
                                                 u = s.fullMessageLength.length - 1; u >= 0; --u) d = 8 * s.fullMessageLength[u] + p,
                                            p = d / 4294967296 >>> 0,
                                            t.putInt32Le(d >>> 0);
                                        var f = {
                                            h0: i.h0,
                                            h1: i.h1,
                                            h2: i.h2,
                                            h3: i.h3
                                        };
                                        n(f, o, t);
                                        var h = e.util.createBuffer();
                                        return h.putInt32Le(f.h0),
                                            h.putInt32Le(f.h1),
                                            h.putInt32Le(f.h2),
                                            h.putInt32Le(f.h3),
                                            h
                                    },
                                    s
                            };
                        var r = null,
                            a = null,
                            o = null,
                            s = null,
                            c = !1
                    }
                    var i = "md5";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/md5", ["require", "module", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t() {
                            r = String.fromCharCode(128),
                                r += e.util.fillString(String.fromCharCode(0), 64),
                                a = !0
                        }
                        function n(e, t, n) {
                            for (var i, r, a, o, s, c, l, d, p = n.length(); p >= 64;) {
                                for (r = e.h0, a = e.h1, o = e.h2, s = e.h3, c = e.h4, d = 0; 16 > d; ++d) i = n.getInt32(),
                                    t[d] = i,
                                    l = s ^ a & (o ^ s),
                                    i = (r << 5 | r >>> 27) + l + c + 1518500249 + i,
                                    c = s,
                                    s = o,
                                    o = a << 30 | a >>> 2,
                                    a = r,
                                    r = i;
                                for (; 20 > d; ++d) i = t[d - 3] ^ t[d - 8] ^ t[d - 14] ^ t[d - 16],
                                    i = i << 1 | i >>> 31,
                                    t[d] = i,
                                    l = s ^ a & (o ^ s),
                                    i = (r << 5 | r >>> 27) + l + c + 1518500249 + i,
                                    c = s,
                                    s = o,
                                    o = a << 30 | a >>> 2,
                                    a = r,
                                    r = i;
                                for (; 32 > d; ++d) i = t[d - 3] ^ t[d - 8] ^ t[d - 14] ^ t[d - 16],
                                    i = i << 1 | i >>> 31,
                                    t[d] = i,
                                    l = a ^ o ^ s,
                                    i = (r << 5 | r >>> 27) + l + c + 1859775393 + i,
                                    c = s,
                                    s = o,
                                    o = a << 30 | a >>> 2,
                                    a = r,
                                    r = i;
                                for (; 40 > d; ++d) i = t[d - 6] ^ t[d - 16] ^ t[d - 28] ^ t[d - 32],
                                    i = i << 2 | i >>> 30,
                                    t[d] = i,
                                    l = a ^ o ^ s,
                                    i = (r << 5 | r >>> 27) + l + c + 1859775393 + i,
                                    c = s,
                                    s = o,
                                    o = a << 30 | a >>> 2,
                                    a = r,
                                    r = i;
                                for (; 60 > d; ++d) i = t[d - 6] ^ t[d - 16] ^ t[d - 28] ^ t[d - 32],
                                    i = i << 2 | i >>> 30,
                                    t[d] = i,
                                    l = a & o | s & (a ^ o),
                                    i = (r << 5 | r >>> 27) + l + c + 2400959708 + i,
                                    c = s,
                                    s = o,
                                    o = a << 30 | a >>> 2,
                                    a = r,
                                    r = i;
                                for (; 80 > d; ++d) i = t[d - 6] ^ t[d - 16] ^ t[d - 28] ^ t[d - 32],
                                    i = i << 2 | i >>> 30,
                                    t[d] = i,
                                    l = a ^ o ^ s,
                                    i = (r << 5 | r >>> 27) + l + c + 3395469782 + i,
                                    c = s,
                                    s = o,
                                    o = a << 30 | a >>> 2,
                                    a = r,
                                    r = i;
                                e.h0 = e.h0 + r | 0,
                                    e.h1 = e.h1 + a | 0,
                                    e.h2 = e.h2 + o | 0,
                                    e.h3 = e.h3 + s | 0,
                                    e.h4 = e.h4 + c | 0,
                                    p -= 64
                            }
                        }
                        var i = e.sha1 = e.sha1 || {};
                        e.md = e.md || {},
                            e.md.algorithms = e.md.algorithms || {},
                            e.md.sha1 = e.md.algorithms.sha1 = i,
                            i.create = function() {
                                a || t();
                                var i = null,
                                    o = e.util.createBuffer(),
                                    s = new Array(80),
                                    c = {
                                        algorithm: "sha1",
                                        blockLength: 64,
                                        digestLength: 20,
                                        messageLength: 0,
                                        fullMessageLength: null,
                                        messageLengthSize: 8
                                    };
                                return c.start = function() {
                                    c.messageLength = 0,
                                        c.fullMessageLength = c.messageLength64 = [];
                                    for (var t = c.messageLengthSize / 4,
                                             n = 0; t > n; ++n) c.fullMessageLength.push(0);
                                    return o = e.util.createBuffer(),
                                        i = {
                                            h0: 1732584193,
                                            h1: 4023233417,
                                            h2: 2562383102,
                                            h3: 271733878,
                                            h4: 3285377520
                                        },
                                        c
                                },
                                    c.start(),
                                    c.update = function(t, r) {
                                        "utf8" === r && (t = e.util.encodeUtf8(t));
                                        var a = t.length;
                                        c.messageLength += a,
                                            a = [a / 4294967296 >>> 0, a >>> 0];
                                        for (var l = c.fullMessageLength.length - 1; l >= 0; --l) c.fullMessageLength[l] += a[1],
                                            a[1] = a[0] + (c.fullMessageLength[l] / 4294967296 >>> 0),
                                            c.fullMessageLength[l] = c.fullMessageLength[l] >>> 0,
                                            a[0] = a[1] / 4294967296 >>> 0;
                                        return o.putBytes(t),
                                            n(i, s, o),
                                        (o.read > 2048 || 0 === o.length()) && o.compact(),
                                            c
                                    },
                                    c.digest = function() {
                                        var t = e.util.createBuffer();
                                        t.putBytes(o.bytes());
                                        var a = c.fullMessageLength[c.fullMessageLength.length - 1] + c.messageLengthSize,
                                            l = a & c.blockLength - 1;
                                        t.putBytes(r.substr(0, c.blockLength - l));
                                        for (var d, p, u = (e.util.createBuffer(), 8 * c.fullMessageLength[0]), f = 0; f < c.fullMessageLength.length; ++f) d = 8 * c.fullMessageLength[f + 1],
                                            p = d / 4294967296 >>> 0,
                                            u += p,
                                            t.putInt32(u >>> 0),
                                            u = d;
                                        var h = {
                                            h0: i.h0,
                                            h1: i.h1,
                                            h2: i.h2,
                                            h3: i.h3,
                                            h4: i.h4
                                        };
                                        n(h, s, t);
                                        var g = e.util.createBuffer();
                                        return g.putInt32(h.h0),
                                            g.putInt32(h.h1),
                                            g.putInt32(h.h2),
                                            g.putInt32(h.h3),
                                            g.putInt32(h.h4),
                                            g
                                    },
                                    c
                            };
                        var r = null,
                            a = !1
                    }
                    var i = "sha1";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/sha1", ["require", "module", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t() {
                            r = String.fromCharCode(128),
                                r += e.util.fillString(String.fromCharCode(0), 64),
                                o = [1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993, 2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987, 1925078388, 2162078206, 2614888103, 3248222580, 3835390401, 4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, 2554220882, 2821834349, 2952996808, 3210313671, 3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051, 2177026350, 2456956037, 2730485921, 2820302411, 3259730800, 3345764771, 3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222, 2024104815, 2227730452, 2361852424, 2428436474, 2756734187, 3204031479, 3329325298],
                                a = !0
                        }
                        function n(e, t, n) {
                            for (var i, r, a, s, c, l, d, p, u, f, h, g, m, y, v, C = n.length(); C >= 64;) {
                                for (d = 0; 16 > d; ++d) t[d] = n.getInt32();
                                for (; 64 > d; ++d) i = t[d - 2],
                                    i = (i >>> 17 | i << 15) ^ (i >>> 19 | i << 13) ^ i >>> 10,
                                    r = t[d - 15],
                                    r = (r >>> 7 | r << 25) ^ (r >>> 18 | r << 14) ^ r >>> 3,
                                    t[d] = i + t[d - 7] + r + t[d - 16] | 0;
                                for (p = e.h0, u = e.h1, f = e.h2, h = e.h3, g = e.h4, m = e.h5, y = e.h6, v = e.h7, d = 0; 64 > d; ++d) s = (g >>> 6 | g << 26) ^ (g >>> 11 | g << 21) ^ (g >>> 25 | g << 7),
                                    c = y ^ g & (m ^ y),
                                    a = (p >>> 2 | p << 30) ^ (p >>> 13 | p << 19) ^ (p >>> 22 | p << 10),
                                    l = p & u | f & (p ^ u),
                                    i = v + s + c + o[d] + t[d],
                                    r = a + l,
                                    v = y,
                                    y = m,
                                    m = g,
                                    g = h + i | 0,
                                    h = f,
                                    f = u,
                                    u = p,
                                    p = i + r | 0;
                                e.h0 = e.h0 + p | 0,
                                    e.h1 = e.h1 + u | 0,
                                    e.h2 = e.h2 + f | 0,
                                    e.h3 = e.h3 + h | 0,
                                    e.h4 = e.h4 + g | 0,
                                    e.h5 = e.h5 + m | 0,
                                    e.h6 = e.h6 + y | 0,
                                    e.h7 = e.h7 + v | 0,
                                    C -= 64
                            }
                        }
                        var i = e.sha256 = e.sha256 || {};
                        e.md = e.md || {},
                            e.md.algorithms = e.md.algorithms || {},
                            e.md.sha256 = e.md.algorithms.sha256 = i,
                            i.create = function() {
                                a || t();
                                var i = null,
                                    o = e.util.createBuffer(),
                                    s = new Array(64),
                                    c = {
                                        algorithm: "sha256",
                                        blockLength: 64,
                                        digestLength: 32,
                                        messageLength: 0,
                                        fullMessageLength: null,
                                        messageLengthSize: 8
                                    };
                                return c.start = function() {
                                    c.messageLength = 0,
                                        c.fullMessageLength = c.messageLength64 = [];
                                    for (var t = c.messageLengthSize / 4,
                                             n = 0; t > n; ++n) c.fullMessageLength.push(0);
                                    return o = e.util.createBuffer(),
                                        i = {
                                            h0: 1779033703,
                                            h1: 3144134277,
                                            h2: 1013904242,
                                            h3: 2773480762,
                                            h4: 1359893119,
                                            h5: 2600822924,
                                            h6: 528734635,
                                            h7: 1541459225
                                        },
                                        c
                                },
                                    c.start(),
                                    c.update = function(t, r) {
                                        "utf8" === r && (t = e.util.encodeUtf8(t));
                                        var a = t.length;
                                        c.messageLength += a,
                                            a = [a / 4294967296 >>> 0, a >>> 0];
                                        for (var l = c.fullMessageLength.length - 1; l >= 0; --l) c.fullMessageLength[l] += a[1],
                                            a[1] = a[0] + (c.fullMessageLength[l] / 4294967296 >>> 0),
                                            c.fullMessageLength[l] = c.fullMessageLength[l] >>> 0,
                                            a[0] = a[1] / 4294967296 >>> 0;
                                        return o.putBytes(t),
                                            n(i, s, o),
                                        (o.read > 2048 || 0 === o.length()) && o.compact(),
                                            c
                                    },
                                    c.digest = function() {
                                        var t = e.util.createBuffer();
                                        t.putBytes(o.bytes());
                                        var a = c.fullMessageLength[c.fullMessageLength.length - 1] + c.messageLengthSize,
                                            l = a & c.blockLength - 1;
                                        t.putBytes(r.substr(0, c.blockLength - l));
                                        for (var d, p, u = (e.util.createBuffer(), 8 * c.fullMessageLength[0]), f = 0; f < c.fullMessageLength.length; ++f) d = 8 * c.fullMessageLength[f + 1],
                                            p = d / 4294967296 >>> 0,
                                            u += p,
                                            t.putInt32(u >>> 0),
                                            u = d;
                                        var h = {
                                            h0: i.h0,
                                            h1: i.h1,
                                            h2: i.h2,
                                            h3: i.h3,
                                            h4: i.h4,
                                            h5: i.h5,
                                            h6: i.h6,
                                            h7: i.h7
                                        };
                                        n(h, s, t);
                                        var g = e.util.createBuffer();
                                        return g.putInt32(h.h0),
                                            g.putInt32(h.h1),
                                            g.putInt32(h.h2),
                                            g.putInt32(h.h3),
                                            g.putInt32(h.h4),
                                            g.putInt32(h.h5),
                                            g.putInt32(h.h6),
                                            g.putInt32(h.h7),
                                            g
                                    },
                                    c
                            };
                        var r = null,
                            a = !1,
                            o = null
                    }
                    var i = "sha256";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/sha256", ["require", "module", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t() {
                            a = String.fromCharCode(128),
                                a += e.util.fillString(String.fromCharCode(0), 128),
                                s = [[1116352408, 3609767458], [1899447441, 602891725], [3049323471, 3964484399], [3921009573, 2173295548], [961987163, 4081628472], [1508970993, 3053834265], [2453635748, 2937671579], [2870763221, 3664609560], [3624381080, 2734883394], [310598401, 1164996542], [607225278, 1323610764], [1426881987, 3590304994], [1925078388, 4068182383], [2162078206, 991336113], [2614888103, 633803317], [3248222580, 3479774868], [3835390401, 2666613458], [4022224774, 944711139], [264347078, 2341262773], [604807628, 2007800933], [770255983, 1495990901], [1249150122, 1856431235], [1555081692, 3175218132], [1996064986, 2198950837], [2554220882, 3999719339], [2821834349, 766784016], [2952996808, 2566594879], [3210313671, 3203337956], [3336571891, 1034457026], [3584528711, 2466948901], [113926993, 3758326383], [338241895, 168717936], [666307205, 1188179964], [773529912, 1546045734], [1294757372, 1522805485], [1396182291, 2643833823], [1695183700, 2343527390], [1986661051, 1014477480], [2177026350, 1206759142], [2456956037, 344077627], [2730485921, 1290863460], [2820302411, 3158454273], [3259730800, 3505952657], [3345764771, 106217008], [3516065817, 3606008344], [3600352804, 1432725776], [4094571909, 1467031594], [275423344, 851169720], [430227734, 3100823752], [506948616, 1363258195], [659060556, 3750685593], [883997877, 3785050280], [958139571, 3318307427], [1322822218, 3812723403], [1537002063, 2003034995], [1747873779, 3602036899], [1955562222, 1575990012], [2024104815, 1125592928], [2227730452, 2716904306], [2361852424, 442776044], [2428436474, 593698344], [2756734187, 3733110249], [3204031479, 2999351573], [3329325298, 3815920427], [3391569614, 3928383900], [3515267271, 566280711], [3940187606, 3454069534], [4118630271, 4000239992], [116418474, 1914138554], [174292421, 2731055270], [289380356, 3203993006], [460393269, 320620315], [685471733, 587496836], [852142971, 1086792851], [1017036298, 365543100], [1126000580, 2618297676], [1288033470, 3409855158], [1501505948, 4234509866], [1607167915, 987167468], [1816402316, 1246189591]],
                                c = {},
                                c["SHA-512"] = [[1779033703, 4089235720], [3144134277, 2227873595], [1013904242, 4271175723], [2773480762, 1595750129], [1359893119, 2917565137], [2600822924, 725511199], [528734635, 4215389547], [1541459225, 327033209]],
                                c["SHA-384"] = [[3418070365, 3238371032], [1654270250, 914150663], [2438529370, 812702999], [355462360, 4144912697], [1731405415, 4290775857], [2394180231, 1750603025], [3675008525, 1694076839], [1203062813, 3204075428]],
                                c["SHA-512/256"] = [[573645204, 4230739756], [2673172387, 3360449730], [596883563, 1867755857], [2520282905, 1497426621], [2519219938, 2827943907], [3193839141, 1401305490], [721525244, 746961066], [246885852, 2177182882]],
                                c["SHA-512/224"] = [[2352822216, 424955298], [1944164710, 2312950998], [502970286, 855612546], [1738396948, 1479516111], [258812777, 2077511080], [2011393907, 79989058], [1067287976, 1780299464], [286451373, 2446758561]],
                                o = !0
                        }
                        function n(e, t, n) {
                            for (var i, r, a, o, c, l, d, p, u, f, h, g, m, y, v, C, S, _, b, E, I, A, T, k, w, $, P, N, D, R, B, O, U, L, M, x = n.length(); x >= 128;) {
                                for (D = 0; 16 > D; ++D) t[D][0] = n.getInt32() >>> 0,
                                    t[D][1] = n.getInt32() >>> 0;
                                for (; 80 > D; ++D) O = t[D - 2],
                                    R = O[0],
                                    B = O[1],
                                    i = ((R >>> 19 | B << 13) ^ (B >>> 29 | R << 3) ^ R >>> 6) >>> 0,
                                    r = ((R << 13 | B >>> 19) ^ (B << 3 | R >>> 29) ^ (R << 26 | B >>> 6)) >>> 0,
                                    L = t[D - 15],
                                    R = L[0],
                                    B = L[1],
                                    a = ((R >>> 1 | B << 31) ^ (R >>> 8 | B << 24) ^ R >>> 7) >>> 0,
                                    o = ((R << 31 | B >>> 1) ^ (R << 24 | B >>> 8) ^ (R << 25 | B >>> 7)) >>> 0,
                                    U = t[D - 7],
                                    M = t[D - 16],
                                    B = r + U[1] + o + M[1],
                                    t[D][0] = i + U[0] + a + M[0] + (B / 4294967296 >>> 0) >>> 0,
                                    t[D][1] = B >>> 0;
                                for (m = e[0][0], y = e[0][1], v = e[1][0], C = e[1][1], S = e[2][0], _ = e[2][1], b = e[3][0], E = e[3][1], I = e[4][0], A = e[4][1], T = e[5][0], k = e[5][1], w = e[6][0], $ = e[6][1], P = e[7][0], N = e[7][1], D = 0; 80 > D; ++D) d = ((I >>> 14 | A << 18) ^ (I >>> 18 | A << 14) ^ (A >>> 9 | I << 23)) >>> 0,
                                    p = ((I << 18 | A >>> 14) ^ (I << 14 | A >>> 18) ^ (A << 23 | I >>> 9)) >>> 0,
                                    u = (w ^ I & (T ^ w)) >>> 0,
                                    f = ($ ^ A & (k ^ $)) >>> 0,
                                    c = ((m >>> 28 | y << 4) ^ (y >>> 2 | m << 30) ^ (y >>> 7 | m << 25)) >>> 0,
                                    l = ((m << 4 | y >>> 28) ^ (y << 30 | m >>> 2) ^ (y << 25 | m >>> 7)) >>> 0,
                                    h = (m & v | S & (m ^ v)) >>> 0,
                                    g = (y & C | _ & (y ^ C)) >>> 0,
                                    B = N + p + f + s[D][1] + t[D][1],
                                    i = P + d + u + s[D][0] + t[D][0] + (B / 4294967296 >>> 0) >>> 0,
                                    r = B >>> 0,
                                    B = l + g,
                                    a = c + h + (B / 4294967296 >>> 0) >>> 0,
                                    o = B >>> 0,
                                    P = w,
                                    N = $,
                                    w = T,
                                    $ = k,
                                    T = I,
                                    k = A,
                                    B = E + r,
                                    I = b + i + (B / 4294967296 >>> 0) >>> 0,
                                    A = B >>> 0,
                                    b = S,
                                    E = _,
                                    S = v,
                                    _ = C,
                                    v = m,
                                    C = y,
                                    B = r + o,
                                    m = i + a + (B / 4294967296 >>> 0) >>> 0,
                                    y = B >>> 0;
                                B = e[0][1] + y,
                                    e[0][0] = e[0][0] + m + (B / 4294967296 >>> 0) >>> 0,
                                    e[0][1] = B >>> 0,
                                    B = e[1][1] + C,
                                    e[1][0] = e[1][0] + v + (B / 4294967296 >>> 0) >>> 0,
                                    e[1][1] = B >>> 0,
                                    B = e[2][1] + _,
                                    e[2][0] = e[2][0] + S + (B / 4294967296 >>> 0) >>> 0,
                                    e[2][1] = B >>> 0,
                                    B = e[3][1] + E,
                                    e[3][0] = e[3][0] + b + (B / 4294967296 >>> 0) >>> 0,
                                    e[3][1] = B >>> 0,
                                    B = e[4][1] + A,
                                    e[4][0] = e[4][0] + I + (B / 4294967296 >>> 0) >>> 0,
                                    e[4][1] = B >>> 0,
                                    B = e[5][1] + k,
                                    e[5][0] = e[5][0] + T + (B / 4294967296 >>> 0) >>> 0,
                                    e[5][1] = B >>> 0,
                                    B = e[6][1] + $,
                                    e[6][0] = e[6][0] + w + (B / 4294967296 >>> 0) >>> 0,
                                    e[6][1] = B >>> 0,
                                    B = e[7][1] + N,
                                    e[7][0] = e[7][0] + P + (B / 4294967296 >>> 0) >>> 0,
                                    e[7][1] = B >>> 0,
                                    x -= 128
                            }
                        }
                        var i = e.sha512 = e.sha512 || {};
                        e.md = e.md || {},
                            e.md.algorithms = e.md.algorithms || {},
                            e.md.sha512 = e.md.algorithms.sha512 = i;
                        var r = e.sha384 = e.sha512.sha384 = e.sha512.sha384 || {};
                        r.create = function() {
                            return i.create("SHA-384")
                        },
                            e.md.sha384 = e.md.algorithms.sha384 = r,
                            e.sha512.sha256 = e.sha512.sha256 || {
                                create: function() {
                                    return i.create("SHA-512/256")
                                }
                            },
                            e.md["sha512/256"] = e.md.algorithms["sha512/256"] = e.sha512.sha256,
                            e.sha512.sha224 = e.sha512.sha224 || {
                                create: function() {
                                    return i.create("SHA-512/224")
                                }
                            },
                            e.md["sha512/224"] = e.md.algorithms["sha512/224"] = e.sha512.sha224,
                            i.create = function(i) {
                                if (o || t(), "undefined" == typeof i && (i = "SHA-512"), i in c) {
                                    for (var r = c[i], s = null, l = e.util.createBuffer(), d = new Array(80), p = 0; 80 > p; ++p) d[p] = new Array(2);
                                    var u = {
                                        algorithm: i.replace("-", "").toLowerCase(),
                                        blockLength: 128,
                                        digestLength: 64,
                                        messageLength: 0,
                                        fullMessageLength: null,
                                        messageLengthSize: 16
                                    };
                                    return u.start = function() {
                                        u.messageLength = 0,
                                            u.fullMessageLength = u.messageLength128 = [];
                                        for (var t = u.messageLengthSize / 4,
                                                 n = 0; t > n; ++n) u.fullMessageLength.push(0);
                                        l = e.util.createBuffer(),
                                            s = new Array(r.length);
                                        for (var n = 0; n < r.length; ++n) s[n] = r[n].slice(0);
                                        return u
                                    },
                                        u.start(),
                                        u.update = function(t, i) {
                                            "utf8" === i && (t = e.util.encodeUtf8(t));
                                            var r = t.length;
                                            u.messageLength += r,
                                                r = [r / 4294967296 >>> 0, r >>> 0];
                                            for (var a = u.fullMessageLength.length - 1; a >= 0; --a) u.fullMessageLength[a] += r[1],
                                                r[1] = r[0] + (u.fullMessageLength[a] / 4294967296 >>> 0),
                                                u.fullMessageLength[a] = u.fullMessageLength[a] >>> 0,
                                                r[0] = r[1] / 4294967296 >>> 0;
                                            return l.putBytes(t),
                                                n(s, d, l),
                                            (l.read > 2048 || 0 === l.length()) && l.compact(),
                                                u
                                        },
                                        u.digest = function() {
                                            var t = e.util.createBuffer();
                                            t.putBytes(l.bytes());
                                            var r = u.fullMessageLength[u.fullMessageLength.length - 1] + u.messageLengthSize,
                                                o = r & u.blockLength - 1;
                                            t.putBytes(a.substr(0, u.blockLength - o));
                                            for (var c, p, f = (e.util.createBuffer(), 8 * u.fullMessageLength[0]), h = 0; h < u.fullMessageLength.length; ++h) c = 8 * u.fullMessageLength[h + 1],
                                                p = c / 4294967296 >>> 0,
                                                f += p,
                                                t.putInt32(f >>> 0),
                                                f = c;
                                            for (var g = new Array(s.length), h = 0; h < s.length; ++h) g[h] = s[h].slice(0);
                                            n(g, d, t);
                                            var m, y = e.util.createBuffer();
                                            m = "SHA-512" === i ? g.length: "SHA-384" === i ? g.length - 2 : g.length - 4;
                                            for (var h = 0; m > h; ++h) y.putInt32(g[h][0]),
                                            (h !== m - 1 || "SHA-512/224" !== i) && y.putInt32(g[h][1]);
                                            return y
                                        },
                                        u
                                }
                                throw new Error("Invalid SHA-512 algorithm: " + i)
                            };
                        var a = null,
                            o = !1,
                            s = null,
                            c = null
                    }
                    var i = "sha512";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/sha512", ["require", "module", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        e.md = e.md || {},
                            e.md.algorithms = {
                                md5: e.md5,
                                sha1: e.sha1,
                                sha256: e.sha256
                            },
                            e.md.md5 = e.md5,
                            e.md.sha1 = e.sha1,
                            e.md.sha256 = e.sha256
                    }
                    var i = "md";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/md", ["require", "module", "./md5", "./sha1", "./sha256", "./sha512"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        var t = e.hmac = e.hmac || {};
                        t.create = function() {
                            var t = null,
                                n = null,
                                i = null,
                                r = null,
                                a = {};
                            return a.start = function(a, o) {
                                if (null !== a) if ("string" == typeof a) {
                                    if (a = a.toLowerCase(), !(a in e.md.algorithms)) throw new Error('Unknown hash algorithm "' + a + '"');
                                    n = e.md.algorithms[a].create()
                                } else n = a;
                                if (null === o) o = t;
                                else {
                                    if ("string" == typeof o) o = e.util.createBuffer(o);
                                    else if (e.util.isArray(o)) {
                                        var s = o;
                                        o = e.util.createBuffer();
                                        for (var c = 0; c < s.length; ++c) o.putByte(s[c])
                                    }
                                    var l = o.length();
                                    l > n.blockLength && (n.start(), n.update(o.bytes()), o = n.digest()),
                                        i = e.util.createBuffer(),
                                        r = e.util.createBuffer(),
                                        l = o.length();
                                    for (var c = 0; l > c; ++c) {
                                        var s = o.at(c);
                                        i.putByte(54 ^ s),
                                            r.putByte(92 ^ s)
                                    }
                                    if (l < n.blockLength) for (var s = n.blockLength - l,
                                                                    c = 0; s > c; ++c) i.putByte(54),
                                        r.putByte(92);
                                    t = o,
                                        i = i.bytes(),
                                        r = r.bytes()
                                }
                                n.start(),
                                    n.update(i)
                            },
                                a.update = function(e) {
                                    n.update(e)
                                },
                                a.getMac = function() {
                                    var e = n.digest().bytes();
                                    return n.start(),
                                        n.update(r),
                                        n.update(e),
                                        n.digest()
                                },
                                a.digest = a.getMac,
                                a
                        }
                    }
                    var i = "hmac";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/hmac", ["require", "module", "./md", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(e) {
                            for (var t = e.name + ": ",
                                     n = [], i = function(e, t) {
                                    return " " + t
                                },
                                     r = 0; r < e.values.length; ++r) n.push(e.values[r].replace(/^(\S+\r\n)/, i));
                            t += n.join(",") + "\r\n";
                            for (var a = 0,
                                     o = -1,
                                     r = 0; r < t.length; ++r, ++a) if (a > 65 && -1 !== o) {
                                var s = t[o];
                                "," === s ? (++o, t = t.substr(0, o) + "\r\n " + t.substr(o)) : t = t.substr(0, o) + "\r\n" + s + t.substr(o + 1),
                                    a = r - o - 1,
                                    o = -1,
                                    ++r
                            } else(" " === t[r] || "	" === t[r] || "," === t[r]) && (o = r);
                            return t
                        }
                        function n(e) {
                            return e.replace(/^\s+/, "")
                        }
                        var i = e.pem = e.pem || {};
                        i.encode = function(n, i) {
                            i = i || {};
                            var r, a = "-----BEGIN " + n.type + "-----\r\n";
                            if (n.procType && (r = {
                                    name: "Proc-Type",
                                    values: [String(n.procType.version), n.procType.type]
                                },
                                    a += t(r)), n.contentDomain && (r = {
                                    name: "Content-Domain",
                                    values: [n.contentDomain]
                                },
                                    a += t(r)), n.dekInfo && (r = {
                                    name: "DEK-Info",
                                    values: [n.dekInfo.algorithm]
                                },
                                n.dekInfo.parameters && r.values.push(n.dekInfo.parameters), a += t(r)), n.headers) for (var o = 0; o < n.headers.length; ++o) a += t(n.headers[o]);
                            return n.procType && (a += "\r\n"),
                                a += e.util.encode64(n.body, i.maxline || 64) + "\r\n",
                                a += "-----END " + n.type + "-----\r\n"
                        },
                            i.decode = function(t) {
                                for (var i, r = [], a = /\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g, o = /([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/, s = /\r?\n/; i = a.exec(t), i;) {
                                    var c = {
                                        type: i[1],
                                        procType: null,
                                        contentDomain: null,
                                        dekInfo: null,
                                        headers: [],
                                        body: e.util.decode64(i[3])
                                    };
                                    if (r.push(c), i[2]) {
                                        for (var l = i[2].split(s), d = 0; i && d < l.length;) {
                                            for (var p = l[d].replace(/\s+$/, ""), u = d + 1; u < l.length; ++u) {
                                                var f = l[u];
                                                if (!/\s/.test(f[0])) break;
                                                p += f,
                                                    d = u
                                            }
                                            if (i = p.match(o)) {
                                                for (var h = {
                                                        name: i[1],
                                                        values: []
                                                    },
                                                         g = i[2].split(","), m = 0; m < g.length; ++m) h.values.push(n(g[m]));
                                                if (c.procType) if (c.contentDomain || "Content-Domain" !== h.name) if (c.dekInfo || "DEK-Info" !== h.name) c.headers.push(h);
                                                else {
                                                    if (0 === h.values.length) throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');
                                                    c.dekInfo = {
                                                        algorithm: g[0],
                                                        parameters: g[1] || null
                                                    }
                                                } else c.contentDomain = g[0] || "";
                                                else {
                                                    if ("Proc-Type" !== h.name) throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');
                                                    if (2 !== h.values.length) throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');
                                                    c.procType = {
                                                        version: g[0],
                                                        type: g[1]
                                                    }
                                                }
                                            }++d
                                        }
                                        if ("ENCRYPTED" === c.procType && !c.dekInfo) throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')
                                    }
                                }
                                if (0 === r.length) throw new Error("Invalid PEM formatted message.");
                                return r
                            }
                    }
                    var i = "pem";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/pem", ["require", "module", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(t, n) {
                            var i = function() {
                                return new e.des.Algorithm(t, n)
                            };
                            e.cipher.registerAlgorithm(t, i)
                        }
                        function n(e) {
                            for (var t, n = [0, 4, 536870912, 536870916, 65536, 65540, 536936448, 536936452, 512, 516, 536871424, 536871428, 66048, 66052, 536936960, 536936964], i = [0, 1, 1048576, 1048577, 67108864, 67108865, 68157440, 68157441, 256, 257, 1048832, 1048833, 67109120, 67109121, 68157696, 68157697], r = [0, 8, 2048, 2056, 16777216, 16777224, 16779264, 16779272, 0, 8, 2048, 2056, 16777216, 16777224, 16779264, 16779272], a = [0, 2097152, 134217728, 136314880, 8192, 2105344, 134225920, 136323072, 131072, 2228224, 134348800, 136445952, 139264, 2236416, 134356992, 136454144], o = [0, 262144, 16, 262160, 0, 262144, 16, 262160, 4096, 266240, 4112, 266256, 4096, 266240, 4112, 266256], s = [0, 1024, 32, 1056, 0, 1024, 32, 1056, 33554432, 33555456, 33554464, 33555488, 33554432, 33555456, 33554464, 33555488], c = [0, 268435456, 524288, 268959744, 2, 268435458, 524290, 268959746, 0, 268435456, 524288, 268959744, 2, 268435458, 524290, 268959746], l = [0, 65536, 2048, 67584, 536870912, 536936448, 536872960, 536938496, 131072, 196608, 133120, 198656, 537001984, 537067520, 537004032, 537069568], d = [0, 262144, 0, 262144, 2, 262146, 2, 262146, 33554432, 33816576, 33554432, 33816576, 33554434, 33816578, 33554434, 33816578], p = [0, 268435456, 8, 268435464, 0, 268435456, 8, 268435464, 1024, 268436480, 1032, 268436488, 1024, 268436480, 1032, 268436488], u = [0, 32, 0, 32, 1048576, 1048608, 1048576, 1048608, 8192, 8224, 8192, 8224, 1056768, 1056800, 1056768, 1056800], f = [0, 16777216, 512, 16777728, 2097152, 18874368, 2097664, 18874880, 67108864, 83886080, 67109376, 83886592, 69206016, 85983232, 69206528, 85983744], h = [0, 4096, 134217728, 134221824, 524288, 528384, 134742016, 134746112, 16, 4112, 134217744, 134221840, 524304, 528400, 134742032, 134746128], g = [0, 4, 256, 260, 0, 4, 256, 260, 1, 5, 257, 261, 1, 5, 257, 261], m = e.length() > 8 ? 3 : 1, y = [], v = [0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0], C = 0, S = 0; m > S; S++) {
                                var _ = e.getInt32(),
                                    b = e.getInt32();
                                t = 252645135 & (_ >>> 4 ^ b),
                                    b ^= t,
                                    _ ^= t << 4,
                                    t = 65535 & (b >>> -16 ^ _),
                                    _ ^= t,
                                    b ^= t << -16,
                                    t = 858993459 & (_ >>> 2 ^ b),
                                    b ^= t,
                                    _ ^= t << 2,
                                    t = 65535 & (b >>> -16 ^ _),
                                    _ ^= t,
                                    b ^= t << -16,
                                    t = 1431655765 & (_ >>> 1 ^ b),
                                    b ^= t,
                                    _ ^= t << 1,
                                    t = 16711935 & (b >>> 8 ^ _),
                                    _ ^= t,
                                    b ^= t << 8,
                                    t = 1431655765 & (_ >>> 1 ^ b),
                                    b ^= t,
                                    _ ^= t << 1,
                                    t = _ << 8 | b >>> 20 & 240,
                                    _ = b << 24 | b << 8 & 16711680 | b >>> 8 & 65280 | b >>> 24 & 240,
                                    b = t;
                                for (var E = 0; E < v.length; ++E) {
                                    v[E] ? (_ = _ << 2 | _ >>> 26, b = b << 2 | b >>> 26) : (_ = _ << 1 | _ >>> 27, b = b << 1 | b >>> 27),
                                        _ &= -15,
                                        b &= -15;
                                    var I = n[_ >>> 28] | i[_ >>> 24 & 15] | r[_ >>> 20 & 15] | a[_ >>> 16 & 15] | o[_ >>> 12 & 15] | s[_ >>> 8 & 15] | c[_ >>> 4 & 15],
                                        A = l[b >>> 28] | d[b >>> 24 & 15] | p[b >>> 20 & 15] | u[b >>> 16 & 15] | f[b >>> 12 & 15] | h[b >>> 8 & 15] | g[b >>> 4 & 15];
                                    t = 65535 & (A >>> 16 ^ I),
                                        y[C++] = I ^ t,
                                        y[C++] = A ^ t << 16
                                }
                            }
                            return y
                        }
                        function i(e, t, n, i) {
                            var r, f = 32 === e.length ? 3 : 9;
                            r = 3 === f ? i ? [30, -2, -2] : [0, 32, 2] : i ? [94, 62, -2, 32, 64, 2, 30, -2, -2] : [0, 32, 2, 62, 30, -2, 64, 96, 2];
                            var h, g = t[0],
                                m = t[1];
                            h = 252645135 & (g >>> 4 ^ m),
                                m ^= h,
                                g ^= h << 4,
                                h = 65535 & (g >>> 16 ^ m),
                                m ^= h,
                                g ^= h << 16,
                                h = 858993459 & (m >>> 2 ^ g),
                                g ^= h,
                                m ^= h << 2,
                                h = 16711935 & (m >>> 8 ^ g),
                                g ^= h,
                                m ^= h << 8,
                                h = 1431655765 & (g >>> 1 ^ m),
                                m ^= h,
                                g ^= h << 1,
                                g = g << 1 | g >>> 31,
                                m = m << 1 | m >>> 31;
                            for (var y = 0; f > y; y += 3) {
                                for (var v = r[y + 1], C = r[y + 2], S = r[y]; S != v; S += C) {
                                    var _ = m ^ e[S],
                                        b = (m >>> 4 | m << 28) ^ e[S + 1];
                                    h = g,
                                        g = m,
                                        m = h ^ (o[_ >>> 24 & 63] | c[_ >>> 16 & 63] | d[_ >>> 8 & 63] | u[63 & _] | a[b >>> 24 & 63] | s[b >>> 16 & 63] | l[b >>> 8 & 63] | p[63 & b])
                                }
                                h = g,
                                    g = m,
                                    m = h
                            }
                            g = g >>> 1 | g << 31,
                                m = m >>> 1 | m << 31,
                                h = 1431655765 & (g >>> 1 ^ m),
                                m ^= h,
                                g ^= h << 1,
                                h = 16711935 & (m >>> 8 ^ g),
                                g ^= h,
                                m ^= h << 8,
                                h = 858993459 & (m >>> 2 ^ g),
                                g ^= h,
                                m ^= h << 2,
                                h = 65535 & (g >>> 16 ^ m),
                                m ^= h,
                                g ^= h << 16,
                                h = 252645135 & (g >>> 4 ^ m),
                                m ^= h,
                                g ^= h << 4,
                                n[0] = g,
                                n[1] = m
                        }
                        function r(t) {
                            t = t || {};
                            var n, i = (t.mode || "CBC").toUpperCase(),
                                r = "DES-" + i;
                            n = t.decrypt ? e.cipher.createDecipher(r, t.key) : e.cipher.createCipher(r, t.key);
                            var a = n.start;
                            return n.start = function(t, i) {
                                var r = null;
                                i instanceof e.util.ByteBuffer && (r = i, i = {}),
                                    i = i || {},
                                    i.output = r,
                                    i.iv = t,
                                    a.call(n, i)
                            },
                                n
                        }
                        e.des = e.des || {},
                            e.des.startEncrypting = function(e, t, n, i) {
                                var a = r({
                                    key: e,
                                    output: n,
                                    decrypt: !1,
                                    mode: i || (null === t ? "ECB": "CBC")
                                });
                                return a.start(t),
                                    a
                            },
                            e.des.createEncryptionCipher = function(e, t) {
                                return r({
                                    key: e,
                                    output: null,
                                    decrypt: !1,
                                    mode: t
                                })
                            },
                            e.des.startDecrypting = function(e, t, n, i) {
                                var a = r({
                                    key: e,
                                    output: n,
                                    decrypt: !0,
                                    mode: i || (null === t ? "ECB": "CBC")
                                });
                                return a.start(t),
                                    a
                            },
                            e.des.createDecryptionCipher = function(e, t) {
                                return r({
                                    key: e,
                                    output: null,
                                    decrypt: !0,
                                    mode: t
                                })
                            },
                            e.des.Algorithm = function(e, t) {
                                var n = this;
                                n.name = e,
                                    n.mode = new t({
                                        blockSize: 8,
                                        cipher: {
                                            encrypt: function(e, t) {
                                                return i(n._keys, e, t, !1)
                                            },
                                            decrypt: function(e, t) {
                                                return i(n._keys, e, t, !0)
                                            }
                                        }
                                    }),
                                    n._init = !1
                            },
                            e.des.Algorithm.prototype.initialize = function(t) {
                                if (!this._init) {
                                    var i = e.util.createBuffer(t.key);
                                    if (0 === this.name.indexOf("3DES") && 24 !== i.length()) throw new Error("Invalid Triple-DES key size: " + 8 * i.length());
                                    this._keys = n(i),
                                        this._init = !0
                                }
                            },
                            t("DES-ECB", e.cipher.modes.ecb),
                            t("DES-CBC", e.cipher.modes.cbc),
                            t("DES-CFB", e.cipher.modes.cfb),
                            t("DES-OFB", e.cipher.modes.ofb),
                            t("DES-CTR", e.cipher.modes.ctr),
                            t("3DES-ECB", e.cipher.modes.ecb),
                            t("3DES-CBC", e.cipher.modes.cbc),
                            t("3DES-CFB", e.cipher.modes.cfb),
                            t("3DES-OFB", e.cipher.modes.ofb),
                            t("3DES-CTR", e.cipher.modes.ctr);
                        var a = [16843776, 0, 65536, 16843780, 16842756, 66564, 4, 65536, 1024, 16843776, 16843780, 1024, 16778244, 16842756, 16777216, 4, 1028, 16778240, 16778240, 66560, 66560, 16842752, 16842752, 16778244, 65540, 16777220, 16777220, 65540, 0, 1028, 66564, 16777216, 65536, 16843780, 4, 16842752, 16843776, 16777216, 16777216, 1024, 16842756, 65536, 66560, 16777220, 1024, 4, 16778244, 66564, 16843780, 65540, 16842752, 16778244, 16777220, 1028, 66564, 16843776, 1028, 16778240, 16778240, 0, 65540, 66560, 0, 16842756],
                            o = [ - 2146402272, -2147450880, 32768, 1081376, 1048576, 32, -2146435040, -2147450848, -2147483616, -2146402272, -2146402304, -2147483648, -2147450880, 1048576, 32, -2146435040, 1081344, 1048608, -2147450848, 0, -2147483648, 32768, 1081376, -2146435072, 1048608, -2147483616, 0, 1081344, 32800, -2146402304, -2146435072, 32800, 0, 1081376, -2146435040, 1048576, -2147450848, -2146435072, -2146402304, 32768, -2146435072, -2147450880, 32, -2146402272, 1081376, 32, 32768, -2147483648, 32800, -2146402304, 1048576, -2147483616, 1048608, -2147450848, -2147483616, 1048608, 1081344, 0, -2147450880, 32800, -2147483648, -2146435040, -2146402272, 1081344],
                            s = [520, 134349312, 0, 134348808, 134218240, 0, 131592, 134218240, 131080, 134217736, 134217736, 131072, 134349320, 131080, 134348800, 520, 134217728, 8, 134349312, 512, 131584, 134348800, 134348808, 131592, 134218248, 131584, 131072, 134218248, 8, 134349320, 512, 134217728, 134349312, 134217728, 131080, 520, 131072, 134349312, 134218240, 0, 512, 131080, 134349320, 134218240, 134217736, 512, 0, 134348808, 134218248, 131072, 134217728, 134349320, 8, 131592, 131584, 134217736, 134348800, 134218248, 520, 134348800, 131592, 8, 134348808, 131584],
                            c = [8396801, 8321, 8321, 128, 8396928, 8388737, 8388609, 8193, 0, 8396800, 8396800, 8396929, 129, 0, 8388736, 8388609, 1, 8192, 8388608, 8396801, 128, 8388608, 8193, 8320, 8388737, 1, 8320, 8388736, 8192, 8396928, 8396929, 129, 8388736, 8388609, 8396800, 8396929, 129, 0, 0, 8396800, 8320, 8388736, 8388737, 1, 8396801, 8321, 8321, 128, 8396929, 129, 1, 8192, 8388609, 8193, 8396928, 8388737, 8193, 8320, 8388608, 8396801, 128, 8388608, 8192, 8396928],
                            l = [256, 34078976, 34078720, 1107296512, 524288, 256, 1073741824, 34078720, 1074266368, 524288, 33554688, 1074266368, 1107296512, 1107820544, 524544, 1073741824, 33554432, 1074266112, 1074266112, 0, 1073742080, 1107820800, 1107820800, 33554688, 1107820544, 1073742080, 0, 1107296256, 34078976, 33554432, 1107296256, 524544, 524288, 1107296512, 256, 33554432, 1073741824, 34078720, 1107296512, 1074266368, 33554688, 1073741824, 1107820544, 34078976, 1074266368, 256, 33554432, 1107820544, 1107820800, 524544, 1107296256, 1107820800, 34078720, 0, 1074266112, 1107296256, 524544, 33554688, 1073742080, 524288, 0, 1074266112, 34078976, 1073742080],
                            d = [536870928, 541065216, 16384, 541081616, 541065216, 16, 541081616, 4194304, 536887296, 4210704, 4194304, 536870928, 4194320, 536887296, 536870912, 16400, 0, 4194320, 536887312, 16384, 4210688, 536887312, 16, 541065232, 541065232, 0, 4210704, 541081600, 16400, 4210688, 541081600, 536870912, 536887296, 16, 541065232, 4210688, 541081616, 4194304, 16400, 536870928, 4194304, 536887296, 536870912, 16400, 536870928, 541081616, 4210688, 541065216, 4210704, 541081600, 0, 541065232, 16, 16384, 541065216, 4210704, 16384, 4194320, 536887312, 0, 541081600, 536870912, 4194320, 536887312],
                            p = [2097152, 69206018, 67110914, 0, 2048, 67110914, 2099202, 69208064, 69208066, 2097152, 0, 67108866, 2, 67108864, 69206018, 2050, 67110912, 2099202, 2097154, 67110912, 67108866, 69206016, 69208064, 2097154, 69206016, 2048, 2050, 69208066, 2099200, 2, 67108864, 2099200, 67108864, 2099200, 2097152, 67110914, 67110914, 69206018, 69206018, 2, 2097154, 67108864, 67110912, 2097152, 69208064, 2050, 2099202, 69208064, 2050, 67108866, 69208066, 69206016, 2099200, 0, 2, 69208066, 0, 2099202, 69206016, 2048, 67108866, 67110912, 2048, 2097154],
                            u = [268439616, 4096, 262144, 268701760, 268435456, 268439616, 64, 268435456, 262208, 268697600, 268701760, 266240, 268701696, 266304, 4096, 64, 268697600, 268435520, 268439552, 4160, 266240, 262208, 268697664, 268701696, 4160, 0, 0, 268697664, 268435520, 268439552, 266304, 262144, 266304, 262144, 268701696, 4096, 64, 268697664, 4096, 266304, 268439552, 64, 268435520, 268697600, 268697664, 268435456, 262144, 268439616, 0, 268701760, 262208, 268435520, 268697600, 268439552, 268439616, 0, 268701760, 266240, 266240, 4160, 4160, 262208, 268435456, 268701696]
                    }
                    var i = "des";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/des", ["require", "module", "./cipher", "./cipherModes", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        var n, i = e.pkcs5 = e.pkcs5 || {},
                            r = "undefined" != typeof process && process.versions && process.versions.node;
                        r && !e.disableNativeCode && (n = t("crypto")),
                            e.pbkdf2 = i.pbkdf2 = function(t, i, a, o, s, c) {
                                function l() {
                                    return S > f ? c(null, C) : (g.start(null, null), g.update(i), g.update(e.util.int32ToBytes(S)), m = v = g.digest().getBytes(), _ = 2, d(), void 0)
                                }
                                function d() {
                                    return a >= _ ? (g.start(null, null), g.update(v), y = g.digest().getBytes(), m = e.util.xorBytes(m, y, p), v = y, ++_, e.util.setImmediate(d)) : (C += f > S ? m: m.substr(0, h), ++S, l(), void 0)
                                }
                                if ("function" == typeof s && (c = s, s = null), r && !e.disableNativeCode && n.pbkdf2 && (null === s || "object" != typeof s) && (n.pbkdf2Sync.length > 4 || !s || "sha1" === s)) return "string" != typeof s && (s = "sha1"),
                                    i = new Buffer(i, "binary"),
                                    c ? 4 === n.pbkdf2Sync.length ? n.pbkdf2(t, i, a, o,
                                        function(e, t) {
                                            return e ? c(e) : void c(null, t.toString("binary"))
                                        }) : n.pbkdf2(t, i, a, o, s,
                                        function(e, t) {
                                            return e ? c(e) : void c(null, t.toString("binary"))
                                        }) : 4 === n.pbkdf2Sync.length ? n.pbkdf2Sync(t, i, a, o).toString("binary") : n.pbkdf2Sync(t, i, a, o, s).toString("binary");
                                if (("undefined" == typeof s || null === s) && (s = e.md.sha1.create()), "string" == typeof s) {
                                    if (! (s in e.md.algorithms)) throw new Error("Unknown hash algorithm: " + s);
                                    s = e.md[s].create()
                                }
                                var p = s.digestLength;
                                if (o > 4294967295 * p) {
                                    var u = new Error("Derived key is too long.");
                                    if (c) return c(u);
                                    throw u
                                }
                                var f = Math.ceil(o / p),
                                    h = o - (f - 1) * p,
                                    g = e.hmac.create();
                                g.start(s, t);
                                var m, y, v, C = "";
                                if (!c) {
                                    for (var S = 1; f >= S; ++S) {
                                        g.start(null, null),
                                            g.update(i),
                                            g.update(e.util.int32ToBytes(S)),
                                            m = v = g.digest().getBytes();
                                        for (var _ = 2; a >= _; ++_) g.start(null, null),
                                            g.update(v),
                                            y = g.digest().getBytes(),
                                            m = e.util.xorBytes(m, y, p),
                                            v = y;
                                        C += f > S ? m: m.substr(0, h)
                                    }
                                    return C
                                }
                                var _, S = 1;
                                l()
                            }
                    }
                    var i = "pbkdf2";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/pbkdf2", ["require", "module", "./hmac", "./md", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        var n = "undefined" != typeof process && process.versions && process.versions.node,
                            i = null; ! e.disableNativeCode && n && !process.versions["node-webkit"] && (i = t("crypto"));
                        var r = e.prng = e.prng || {};
                        r.create = function(t) {
                            function n(e) {
                                if (s.pools[0].messageLength >= 32) return a(),
                                    e();
                                var t = 32 - s.pools[0].messageLength << 5;
                                s.seedFile(t,
                                    function(t, n) {
                                        return t ? e(t) : (s.collect(n), a(), e(), void 0)
                                    })
                            }
                            function r() {
                                if (s.pools[0].messageLength >= 32) return a();
                                var e = 32 - s.pools[0].messageLength << 5;
                                s.collect(s.seedFileSync(e)),
                                    a()
                            }
                            function a() {
                                var e = s.plugin.md.create();
                                e.update(s.pools[0].digest().getBytes()),
                                    s.pools[0].start();
                                for (var t = 1,
                                         n = 1; 32 > n; ++n) t = 31 === t ? 2147483648 : t << 2,
                                t % s.reseeds === 0 && (e.update(s.pools[n].digest().getBytes()), s.pools[n].start());
                                var i = e.digest().getBytes();
                                e.start(),
                                    e.update(i);
                                var r = e.digest().getBytes();
                                s.key = s.plugin.formatKey(i),
                                    s.seed = s.plugin.formatSeed(r),
                                    s.reseeds = 4294967295 === s.reseeds ? 0 : s.reseeds + 1,
                                    s.generated = 0
                            }
                            function o(t) {
                                var n = null;
                                if ("undefined" != typeof window) {
                                    var i = window.crypto || window.msCrypto;
                                    i && i.getRandomValues && (n = function(e) {
                                        return i.getRandomValues(e)
                                    })
                                }
                                var r = e.util.createBuffer();
                                if (n) for (; r.length() < t;) {
                                    var a = Math.max(1, Math.min(t - r.length(), 65536) / 4),
                                        o = new Uint32Array(Math.floor(a));
                                    try {
                                        n(o);
                                        for (var s = 0; s < o.length; ++s) r.putInt32(o[s])
                                    } catch(c) {
                                        if (! ("undefined" != typeof QuotaExceededError && c instanceof QuotaExceededError)) throw c
                                    }
                                }
                                if (r.length() < t) for (var l, d, p, u = Math.floor(65536 * Math.random()); r.length() < t;) {
                                    d = 16807 * (65535 & u),
                                        l = 16807 * (u >> 16),
                                        d += (32767 & l) << 16,
                                        d += l >> 15,
                                        d = (2147483647 & d) + (d >> 31),
                                        u = 4294967295 & d;
                                    for (var s = 0; 3 > s; ++s) p = u >>> (s << 3),
                                        p ^= Math.floor(256 * Math.random()),
                                        r.putByte(String.fromCharCode(255 & p))
                                }
                                return r.getBytes(t)
                            }
                            for (var s = {
                                    plugin: t,
                                    key: null,
                                    seed: null,
                                    time: null,
                                    reseeds: 0,
                                    generated: 0
                                },
                                     c = t.md, l = new Array(32), d = 0; 32 > d; ++d) l[d] = c.create();
                            return s.pools = l,
                                s.pool = 0,
                                s.generate = function(t, i) {
                                    function r(p) {
                                        if (p) return i(p);
                                        if (d.length() >= t) return i(null, d.getBytes(t));
                                        if (s.generated > 1048575 && (s.key = null), null === s.key) return e.util.nextTick(function() {
                                            n(r)
                                        });
                                        var u = a(s.key, s.seed);
                                        s.generated += u.length,
                                            d.putBytes(u),
                                            s.key = c(a(s.key, o(s.seed))),
                                            s.seed = l(a(s.key, s.seed)),
                                            e.util.setImmediate(r)
                                    }
                                    if (!i) return s.generateSync(t);
                                    var a = s.plugin.cipher,
                                        o = s.plugin.increment,
                                        c = s.plugin.formatKey,
                                        l = s.plugin.formatSeed,
                                        d = e.util.createBuffer();
                                    s.key = null,
                                        r()
                                },
                                s.generateSync = function(t) {
                                    var n = s.plugin.cipher,
                                        i = s.plugin.increment,
                                        a = s.plugin.formatKey,
                                        o = s.plugin.formatSeed;
                                    s.key = null;
                                    for (var c = e.util.createBuffer(); c.length() < t;) {
                                        s.generated > 1048575 && (s.key = null),
                                        null === s.key && r();
                                        var l = n(s.key, s.seed);
                                        s.generated += l.length,
                                            c.putBytes(l),
                                            s.key = a(n(s.key, i(s.seed))),
                                            s.seed = o(n(s.key, s.seed))
                                    }
                                    return c.getBytes(t)
                                },
                                i ? (s.seedFile = function(e, t) {
                                    i.randomBytes(e,
                                        function(e, n) {
                                            return e ? t(e) : void t(null, n.toString())
                                        })
                                },
                                    s.seedFileSync = function(e) {
                                        return i.randomBytes(e).toString()
                                    }) : (s.seedFile = function(e, t) {
                                    try {
                                        t(null, o(e))
                                    } catch(n) {
                                        t(n)
                                    }
                                },
                                    s.seedFileSync = o),
                                s.collect = function(e) {
                                    for (var t = e.length,
                                             n = 0; t > n; ++n) s.pools[s.pool].update(e.substr(n, 1)),
                                        s.pool = 31 === s.pool ? 0 : s.pool + 1
                                },
                                s.collectInt = function(e, t) {
                                    for (var n = "",
                                             i = 0; t > i; i += 8) n += String.fromCharCode(e >> i & 255);
                                    s.collect(n)
                                },
                                s.registerWorker = function(e) {
                                    if (e === self) s.seedFile = function(e, t) {
                                        function n(e) {
                                            var i = e.data;
                                            i.forge && i.forge.prng && (self.removeEventListener("message", n), t(i.forge.prng.err, i.forge.prng.bytes))
                                        }
                                        self.addEventListener("message", n),
                                            self.postMessage({
                                                forge: {
                                                    prng: {
                                                        needed: e
                                                    }
                                                }
                                            })
                                    };
                                    else {
                                        var t = function(t) {
                                            var n = t.data;
                                            n.forge && n.forge.prng && s.seedFile(n.forge.prng.needed,
                                                function(t, n) {
                                                    e.postMessage({
                                                        forge: {
                                                            prng: {
                                                                err: t,
                                                                bytes: n
                                                            }
                                                        }
                                                    })
                                                })
                                        };
                                        e.addEventListener("message", t)
                                    }
                                },
                                s
                        }
                    }
                    var i = "prng";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/prng", ["require", "module", "./md", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        e.random && e.random.getBytes || !
                            function(t) {
                                function n() {
                                    var t = e.prng.create(i);
                                    return t.getBytes = function(e, n) {
                                        return t.generate(e, n)
                                    },
                                        t.getBytesSync = function(e) {
                                            return t.generate(e)
                                        },
                                        t
                                }
                                var i = {},
                                    r = new Array(4),
                                    a = e.util.createBuffer();
                                i.formatKey = function(t) {
                                    var n = e.util.createBuffer(t);
                                    return t = new Array(4),
                                        t[0] = n.getInt32(),
                                        t[1] = n.getInt32(),
                                        t[2] = n.getInt32(),
                                        t[3] = n.getInt32(),
                                        e.aes._expandKey(t, !1)
                                },
                                    i.formatSeed = function(t) {
                                        var n = e.util.createBuffer(t);
                                        return t = new Array(4),
                                            t[0] = n.getInt32(),
                                            t[1] = n.getInt32(),
                                            t[2] = n.getInt32(),
                                            t[3] = n.getInt32(),
                                            t
                                    },
                                    i.cipher = function(t, n) {
                                        return e.aes._updateBlock(t, n, r, !1),
                                            a.putInt32(r[0]),
                                            a.putInt32(r[1]),
                                            a.putInt32(r[2]),
                                            a.putInt32(r[3]),
                                            a.getBytes()
                                    },
                                    i.increment = function(e) {
                                        return++e[3],
                                            e
                                    },
                                    i.md = e.md.sha256;
                                var o = n(),
                                    s = "undefined" != typeof process && process.versions && process.versions.node,
                                    c = null;
                                if ("undefined" != typeof window) {
                                    var l = window.crypto || window.msCrypto;
                                    l && l.getRandomValues && (c = function(e) {
                                        return l.getRandomValues(e)
                                    })
                                }
                                if (e.disableNativeCode || !s && !c) {
                                    if ("undefined" == typeof window || void 0 === window.document, o.collectInt( + new Date, 32), "undefined" != typeof navigator) {
                                        var d = "";
                                        for (var p in navigator) try {
                                            "string" == typeof navigator[p] && (d += navigator[p])
                                        } catch(u) {}
                                        o.collect(d),
                                            d = null
                                    }
                                    t && (t().mousemove(function(e) {
                                        o.collectInt(e.clientX, 16),
                                            o.collectInt(e.clientY, 16)
                                    }), t().keypress(function(e) {
                                        o.collectInt(e.charCode, 8)
                                    }))
                                }
                                if (e.random) for (var p in o) e.random[p] = o[p];
                                else e.random = o;
                                e.random.createInstance = n
                            } ("undefined" != typeof jQuery ? jQuery: null)
                    }
                    var i = "random";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/random", ["require", "module", "./aes", "./md", "./prng", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        var t = [217, 120, 249, 196, 25, 221, 181, 237, 40, 233, 253, 121, 74, 160, 216, 157, 198, 126, 55, 131, 43, 118, 83, 142, 98, 76, 100, 136, 68, 139, 251, 162, 23, 154, 89, 245, 135, 179, 79, 19, 97, 69, 109, 141, 9, 129, 125, 50, 189, 143, 64, 235, 134, 183, 123, 11, 240, 149, 33, 34, 92, 107, 78, 130, 84, 214, 101, 147, 206, 96, 178, 28, 115, 86, 192, 20, 167, 140, 241, 220, 18, 117, 202, 31, 59, 190, 228, 209, 66, 61, 212, 48, 163, 60, 182, 38, 111, 191, 14, 218, 70, 105, 7, 87, 39, 242, 29, 155, 188, 148, 67, 3, 248, 17, 199, 246, 144, 239, 62, 231, 6, 195, 213, 47, 200, 102, 30, 215, 8, 232, 234, 222, 128, 82, 238, 247, 132, 170, 114, 172, 53, 77, 106, 42, 150, 26, 210, 113, 90, 21, 73, 116, 75, 159, 208, 94, 4, 24, 164, 236, 194, 224, 65, 110, 15, 81, 203, 204, 36, 145, 175, 80, 161, 244, 112, 57, 153, 124, 58, 133, 35, 184, 180, 122, 252, 2, 54, 91, 37, 85, 151, 49, 45, 93, 250, 152, 227, 138, 146, 174, 5, 223, 41, 16, 103, 108, 186, 201, 211, 0, 230, 207, 225, 158, 168, 44, 99, 22, 1, 63, 88, 226, 137, 169, 13, 56, 52, 27, 171, 51, 255, 176, 187, 72, 12, 95, 185, 177, 205, 46, 197, 243, 219, 71, 229, 165, 156, 119, 10, 166, 32, 104, 254, 127, 193, 173],
                            n = [1, 2, 3, 5],
                            i = function(e, t) {
                                return e << t & 65535 | (65535 & e) >> 16 - t
                            },
                            r = function(e, t) {
                                return (65535 & e) >> t | e << 16 - t & 65535
                            };
                        e.rc2 = e.rc2 || {},
                            e.rc2.expandKey = function(n, i) {
                                "string" == typeof n && (n = e.util.createBuffer(n)),
                                    i = i || 128;
                                var r, a = n,
                                    o = n.length(),
                                    s = i,
                                    c = Math.ceil(s / 8),
                                    l = 255 >> (7 & s);
                                for (r = o; 128 > r; r++) a.putByte(t[a.at(r - 1) + a.at(r - o) & 255]);
                                for (a.setAt(128 - c, t[a.at(128 - c) & l]), r = 127 - c; r >= 0; r--) a.setAt(r, t[a.at(r + 1) ^ a.at(r + c)]);
                                return a
                            };
                        var a = function(t, a, o) {
                            var s, c, l, d, p = !1,
                                u = null,
                                f = null,
                                h = null,
                                g = [];
                            for (t = e.rc2.expandKey(t, a), l = 0; 64 > l; l++) g.push(t.getInt16Le());
                            o ? (s = function(e) {
                                for (l = 0; 4 > l; l++) e[l] += g[d] + (e[(l + 3) % 4] & e[(l + 2) % 4]) + (~e[(l + 3) % 4] & e[(l + 1) % 4]),
                                    e[l] = i(e[l], n[l]),
                                    d++
                            },
                                c = function(e) {
                                    for (l = 0; 4 > l; l++) e[l] += g[63 & e[(l + 3) % 4]]
                                }) : (s = function(e) {
                                for (l = 3; l >= 0; l--) e[l] = r(e[l], n[l]),
                                    e[l] -= g[d] + (e[(l + 3) % 4] & e[(l + 2) % 4]) + (~e[(l + 3) % 4] & e[(l + 1) % 4]),
                                    d--
                            },
                                c = function(e) {
                                    for (l = 3; l >= 0; l--) e[l] -= g[63 & e[(l + 3) % 4]]
                                });
                            var m = function(e) {
                                    var t = [];
                                    for (l = 0; 4 > l; l++) {
                                        var n = u.getInt16Le();
                                        null !== h && (o ? n ^= h.getInt16Le() : h.putInt16Le(n)),
                                            t.push(65535 & n)
                                    }
                                    d = o ? 0 : 63;
                                    for (var i = 0; i < e.length; i++) for (var r = 0; r < e[i][0]; r++) e[i][1](t);
                                    for (l = 0; 4 > l; l++) null !== h && (o ? h.putInt16Le(t[l]) : t[l] ^= h.getInt16Le()),
                                        f.putInt16Le(t[l])
                                },
                                y = null;
                            return y = {
                                start: function(t, n) {
                                    t && "string" == typeof t && (t = e.util.createBuffer(t)),
                                        p = !1,
                                        u = e.util.createBuffer(),
                                        f = n || new e.util.createBuffer,
                                        h = t,
                                        y.output = f
                                },
                                update: function(e) {
                                    for (p || u.putBuffer(e); u.length() >= 8;) m([[5, s], [1, c], [6, s], [1, c], [5, s]])
                                },
                                finish: function(e) {
                                    var t = !0;
                                    if (o) if (e) t = e(8, u, !o);
                                    else {
                                        var n = 8 === u.length() ? 8 : 8 - u.length();
                                        u.fillWithByte(n, n)
                                    }
                                    if (t && (p = !0, y.update()), !o && (t = 0 === u.length())) if (e) t = e(8, f, !o);
                                    else {
                                        var i = f.length(),
                                            r = f.at(i - 1);
                                        r > i ? t = !1 : f.truncate(r)
                                    }
                                    return t
                                }
                            }
                        };
                        e.rc2.startEncrypting = function(t, n, i) {
                            var r = e.rc2.createEncryptionCipher(t, 128);
                            return r.start(n, i),
                                r
                        },
                            e.rc2.createEncryptionCipher = function(e, t) {
                                return a(e, t, !0)
                            },
                            e.rc2.startDecrypting = function(t, n, i) {
                                var r = e.rc2.createDecryptionCipher(t, 128);
                                return r.start(n, i),
                                    r
                            },
                            e.rc2.createDecryptionCipher = function(e, t) {
                                return a(e, t, !1)
                            }
                    }
                    var i = "rc2";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/rc2", ["require", "module", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(e, t, n) {
                            this.data = [],
                            null != e && ("number" == typeof e ? this.fromNumber(e, t, n) : null == t && "string" != typeof e ? this.fromString(e, 256) : this.fromString(e, t))
                        }
                        function n() {
                            return new t(null)
                        }
                        function i(e, t, n, i, r, a) {
                            for (; --a >= 0;) {
                                var o = t * this.data[e++] + n.data[i] + r;
                                r = Math.floor(o / 67108864),
                                    n.data[i++] = 67108863 & o
                            }
                            return r
                        }
                        function r(e, t, n, i, r, a) {
                            for (var o = 32767 & t,
                                     s = t >> 15; --a >= 0;) {
                                var c = 32767 & this.data[e],
                                    l = this.data[e++] >> 15,
                                    d = s * c + l * o;
                                c = o * c + ((32767 & d) << 15) + n.data[i] + (1073741823 & r),
                                    r = (c >>> 30) + (d >>> 15) + s * l + (r >>> 30),
                                    n.data[i++] = 1073741823 & c
                            }
                            return r
                        }
                        function a(e, t, n, i, r, a) {
                            for (var o = 16383 & t,
                                     s = t >> 14; --a >= 0;) {
                                var c = 16383 & this.data[e],
                                    l = this.data[e++] >> 14,
                                    d = s * c + l * o;
                                c = o * c + ((16383 & d) << 14) + n.data[i] + r,
                                    r = (c >> 28) + (d >> 14) + s * l,
                                    n.data[i++] = 268435455 & c
                            }
                            return r
                        }
                        function o(e) {
                            return at.charAt(e)
                        }
                        function s(e, t) {
                            var n = ot[e.charCodeAt(t)];
                            return null == n ? -1 : n
                        }
                        function c(e) {
                            for (var t = this.t - 1; t >= 0; --t) e.data[t] = this.data[t];
                            e.t = this.t,
                                e.s = this.s
                        }
                        function l(e) {
                            this.t = 1,
                                this.s = 0 > e ? -1 : 0,
                                e > 0 ? this.data[0] = e: -1 > e ? this.data[0] = e + this.DV: this.t = 0
                        }
                        function d(e) {
                            var t = n();
                            return t.fromInt(e),
                                t
                        }
                        function p(e, n) {
                            var i;
                            if (16 == n) i = 4;
                            else if (8 == n) i = 3;
                            else if (256 == n) i = 8;
                            else if (2 == n) i = 1;
                            else if (32 == n) i = 5;
                            else {
                                if (4 != n) return void this.fromRadix(e, n);
                                i = 2
                            }
                            this.t = 0,
                                this.s = 0;
                            for (var r = e.length,
                                     a = !1,
                                     o = 0; --r >= 0;) {
                                var c = 8 == i ? 255 & e[r] : s(e, r);
                                0 > c ? "-" == e.charAt(r) && (a = !0) : (a = !1, 0 == o ? this.data[this.t++] = c: o + i > this.DB ? (this.data[this.t - 1] |= (c & (1 << this.DB - o) - 1) << o, this.data[this.t++] = c >> this.DB - o) : this.data[this.t - 1] |= c << o, o += i, o >= this.DB && (o -= this.DB))
                            }
                            8 == i && 0 != (128 & e[0]) && (this.s = -1, o > 0 && (this.data[this.t - 1] |= (1 << this.DB - o) - 1 << o)),
                                this.clamp(),
                            a && t.ZERO.subTo(this, this)
                        }
                        function u() {
                            for (var e = this.s & this.DM; this.t > 0 && this.data[this.t - 1] == e;)--this.t
                        }
                        function f(e) {
                            if (this.s < 0) return "-" + this.negate().toString(e);
                            var t;
                            if (16 == e) t = 4;
                            else if (8 == e) t = 3;
                            else if (2 == e) t = 1;
                            else if (32 == e) t = 5;
                            else {
                                if (4 != e) return this.toRadix(e);
                                t = 2
                            }
                            var n, i = (1 << t) - 1,
                                r = !1,
                                a = "",
                                s = this.t,
                                c = this.DB - s * this.DB % t;
                            if (s-->0) for (c < this.DB && (n = this.data[s] >> c) > 0 && (r = !0, a = o(n)); s >= 0;) t > c ? (n = (this.data[s] & (1 << c) - 1) << t - c, n |= this.data[--s] >> (c += this.DB - t)) : (n = this.data[s] >> (c -= t) & i, 0 >= c && (c += this.DB, --s)),
                            n > 0 && (r = !0),
                            r && (a += o(n));
                            return r ? a: "0"
                        }
                        function h() {
                            var e = n();
                            return t.ZERO.subTo(this, e),
                                e
                        }
                        function g() {
                            return this.s < 0 ? this.negate() : this
                        }
                        function m(e) {
                            var t = this.s - e.s;
                            if (0 != t) return t;
                            var n = this.t;
                            if (t = n - e.t, 0 != t) return this.s < 0 ? -t: t;
                            for (; --n >= 0;) if (0 != (t = this.data[n] - e.data[n])) return t;
                            return 0
                        }
                        function y(e) {
                            var t, n = 1;
                            return 0 != (t = e >>> 16) && (e = t, n += 16),
                            0 != (t = e >> 8) && (e = t, n += 8),
                            0 != (t = e >> 4) && (e = t, n += 4),
                            0 != (t = e >> 2) && (e = t, n += 2),
                            0 != (t = e >> 1) && (e = t, n += 1),
                                n
                        }
                        function v() {
                            return this.t <= 0 ? 0 : this.DB * (this.t - 1) + y(this.data[this.t - 1] ^ this.s & this.DM)
                        }
                        function C(e, t) {
                            var n;
                            for (n = this.t - 1; n >= 0; --n) t.data[n + e] = this.data[n];
                            for (n = e - 1; n >= 0; --n) t.data[n] = 0;
                            t.t = this.t + e,
                                t.s = this.s
                        }
                        function S(e, t) {
                            for (var n = e; n < this.t; ++n) t.data[n - e] = this.data[n];
                            t.t = Math.max(this.t - e, 0),
                                t.s = this.s
                        }
                        function _(e, t) {
                            var n, i = e % this.DB,
                                r = this.DB - i,
                                a = (1 << r) - 1,
                                o = Math.floor(e / this.DB),
                                s = this.s << i & this.DM;
                            for (n = this.t - 1; n >= 0; --n) t.data[n + o + 1] = this.data[n] >> r | s,
                                s = (this.data[n] & a) << i;
                            for (n = o - 1; n >= 0; --n) t.data[n] = 0;
                            t.data[o] = s,
                                t.t = this.t + o + 1,
                                t.s = this.s,
                                t.clamp()
                        }
                        function b(e, t) {
                            t.s = this.s;
                            var n = Math.floor(e / this.DB);
                            if (n >= this.t) return void(t.t = 0);
                            var i = e % this.DB,
                                r = this.DB - i,
                                a = (1 << i) - 1;
                            t.data[0] = this.data[n] >> i;
                            for (var o = n + 1; o < this.t; ++o) t.data[o - n - 1] |= (this.data[o] & a) << r,
                                t.data[o - n] = this.data[o] >> i;
                            i > 0 && (t.data[this.t - n - 1] |= (this.s & a) << r),
                                t.t = this.t - n,
                                t.clamp()
                        }
                        function E(e, t) {
                            for (var n = 0,
                                     i = 0,
                                     r = Math.min(e.t, this.t); r > n;) i += this.data[n] - e.data[n],
                                t.data[n++] = i & this.DM,
                                i >>= this.DB;
                            if (e.t < this.t) {
                                for (i -= e.s; n < this.t;) i += this.data[n],
                                    t.data[n++] = i & this.DM,
                                    i >>= this.DB;
                                i += this.s
                            } else {
                                for (i += this.s; n < e.t;) i -= e.data[n],
                                    t.data[n++] = i & this.DM,
                                    i >>= this.DB;
                                i -= e.s
                            }
                            t.s = 0 > i ? -1 : 0,
                                -1 > i ? t.data[n++] = this.DV + i: i > 0 && (t.data[n++] = i),
                                t.t = n,
                                t.clamp()
                        }
                        function I(e, n) {
                            var i = this.abs(),
                                r = e.abs(),
                                a = i.t;
                            for (n.t = a + r.t; --a >= 0;) n.data[a] = 0;
                            for (a = 0; a < r.t; ++a) n.data[a + i.t] = i.am(0, r.data[a], n, a, 0, i.t);
                            n.s = 0,
                                n.clamp(),
                            this.s != e.s && t.ZERO.subTo(n, n)
                        }
                        function A(e) {
                            for (var t = this.abs(), n = e.t = 2 * t.t; --n >= 0;) e.data[n] = 0;
                            for (n = 0; n < t.t - 1; ++n) {
                                var i = t.am(n, t.data[n], e, 2 * n, 0, 1); (e.data[n + t.t] += t.am(n + 1, 2 * t.data[n], e, 2 * n + 1, i, t.t - n - 1)) >= t.DV && (e.data[n + t.t] -= t.DV, e.data[n + t.t + 1] = 1)
                            }
                            e.t > 0 && (e.data[e.t - 1] += t.am(n, t.data[n], e, 2 * n, 0, 1)),
                                e.s = 0,
                                e.clamp()
                        }
                        function T(e, i, r) {
                            var a = e.abs();
                            if (! (a.t <= 0)) {
                                var o = this.abs();
                                if (o.t < a.t) return null != i && i.fromInt(0),
                                    void(null != r && this.copyTo(r));
                                null == r && (r = n());
                                var s = n(),
                                    c = this.s,
                                    l = e.s,
                                    d = this.DB - y(a.data[a.t - 1]);
                                d > 0 ? (a.lShiftTo(d, s), o.lShiftTo(d, r)) : (a.copyTo(s), o.copyTo(r));
                                var p = s.t,
                                    u = s.data[p - 1];
                                if (0 != u) {
                                    var f = u * (1 << this.F1) + (p > 1 ? s.data[p - 2] >> this.F2: 0),
                                        h = this.FV / f,
                                        g = (1 << this.F1) / f,
                                        m = 1 << this.F2,
                                        v = r.t,
                                        C = v - p,
                                        S = null == i ? n() : i;
                                    for (s.dlShiftTo(C, S), r.compareTo(S) >= 0 && (r.data[r.t++] = 1, r.subTo(S, r)), t.ONE.dlShiftTo(p, S), S.subTo(s, s); s.t < p;) s.data[s.t++] = 0;
                                    for (; --C >= 0;) {
                                        var _ = r.data[--v] == u ? this.DM: Math.floor(r.data[v] * h + (r.data[v - 1] + m) * g);
                                        if ((r.data[v] += s.am(0, _, r, C, 0, p)) < _) for (s.dlShiftTo(C, S), r.subTo(S, r); r.data[v] < --_;) r.subTo(S, r)
                                    }
                                    null != i && (r.drShiftTo(p, i), c != l && t.ZERO.subTo(i, i)),
                                        r.t = p,
                                        r.clamp(),
                                    d > 0 && r.rShiftTo(d, r),
                                    0 > c && t.ZERO.subTo(r, r)
                                }
                            }
                        }
                        function k(e) {
                            var i = n();
                            return this.abs().divRemTo(e, null, i),
                            this.s < 0 && i.compareTo(t.ZERO) > 0 && e.subTo(i, i),
                                i
                        }
                        function w(e) {
                            this.m = e
                        }
                        function $(e) {
                            return e.s < 0 || e.compareTo(this.m) >= 0 ? e.mod(this.m) : e
                        }
                        function P(e) {
                            return e
                        }
                        function N(e) {
                            e.divRemTo(this.m, null, e)
                        }
                        function D(e, t, n) {
                            e.multiplyTo(t, n),
                                this.reduce(n)
                        }
                        function R(e, t) {
                            e.squareTo(t),
                                this.reduce(t)
                        }
                        function B() {
                            if (this.t < 1) return 0;
                            var e = this.data[0];
                            if (0 == (1 & e)) return 0;
                            var t = 3 & e;
                            return t = t * (2 - (15 & e) * t) & 15,
                                t = t * (2 - (255 & e) * t) & 255,
                                t = t * (2 - ((65535 & e) * t & 65535)) & 65535,
                                t = t * (2 - e * t % this.DV) % this.DV,
                                t > 0 ? this.DV - t: -t
                        }
                        function O(e) {
                            this.m = e,
                                this.mp = e.invDigit(),
                                this.mpl = 32767 & this.mp,
                                this.mph = this.mp >> 15,
                                this.um = (1 << e.DB - 15) - 1,
                                this.mt2 = 2 * e.t
                        }
                        function U(e) {
                            var i = n();
                            return e.abs().dlShiftTo(this.m.t, i),
                                i.divRemTo(this.m, null, i),
                            e.s < 0 && i.compareTo(t.ZERO) > 0 && this.m.subTo(i, i),
                                i
                        }
                        function L(e) {
                            var t = n();
                            return e.copyTo(t),
                                this.reduce(t),
                                t
                        }
                        function M(e) {
                            for (; e.t <= this.mt2;) e.data[e.t++] = 0;
                            for (var t = 0; t < this.m.t; ++t) {
                                var n = 32767 & e.data[t],
                                    i = n * this.mpl + ((n * this.mph + (e.data[t] >> 15) * this.mpl & this.um) << 15) & e.DM;
                                for (n = t + this.m.t, e.data[n] += this.m.am(0, i, e, t, 0, this.m.t); e.data[n] >= e.DV;) e.data[n] -= e.DV,
                                    e.data[++n]++
                            }
                            e.clamp(),
                                e.drShiftTo(this.m.t, e),
                            e.compareTo(this.m) >= 0 && e.subTo(this.m, e)
                        }
                        function x(e, t) {
                            e.squareTo(t),
                                this.reduce(t)
                        }
                        function F(e, t, n) {
                            e.multiplyTo(t, n),
                                this.reduce(n)
                        }
                        function V() {
                            return 0 == (this.t > 0 ? 1 & this.data[0] : this.s)
                        }
                        function H(e, i) {
                            if (e > 4294967295 || 1 > e) return t.ONE;
                            var r = n(),
                                a = n(),
                                o = i.convert(this),
                                s = y(e) - 1;
                            for (o.copyTo(r); --s >= 0;) if (i.sqrTo(r, a), (e & 1 << s) > 0) i.mulTo(a, o, r);
                            else {
                                var c = r;
                                r = a,
                                    a = c
                            }
                            return i.revert(r)
                        }
                        function K(e, t) {
                            var n;
                            return n = 256 > e || t.isEven() ? new w(t) : new O(t),
                                this.exp(e, n)
                        }
                        function G() {
                            var e = n();
                            return this.copyTo(e),
                                e
                        }
                        function q() {
                            if (this.s < 0) {
                                if (1 == this.t) return this.data[0] - this.DV;
                                if (0 == this.t) return - 1
                            } else {
                                if (1 == this.t) return this.data[0];
                                if (0 == this.t) return 0
                            }
                            return (this.data[1] & (1 << 32 - this.DB) - 1) << this.DB | this.data[0]
                        }
                        function j() {
                            return 0 == this.t ? this.s: this.data[0] << 24 >> 24
                        }
                        function z() {
                            return 0 == this.t ? this.s: this.data[0] << 16 >> 16
                        }
                        function W(e) {
                            return Math.floor(Math.LN2 * this.DB / Math.log(e))
                        }
                        function Q() {
                            return this.s < 0 ? -1 : this.t <= 0 || 1 == this.t && this.data[0] <= 0 ? 0 : 1
                        }
                        function X(e) {
                            if (null == e && (e = 10), 0 == this.signum() || 2 > e || e > 36) return "0";
                            var t = this.chunkSize(e),
                                i = Math.pow(e, t),
                                r = d(i),
                                a = n(),
                                o = n(),
                                s = "";
                            for (this.divRemTo(r, a, o); a.signum() > 0;) s = (i + o.intValue()).toString(e).substr(1) + s,
                                a.divRemTo(r, a, o);
                            return o.intValue().toString(e) + s
                        }
                        function Y(e, n) {
                            this.fromInt(0),
                            null == n && (n = 10);
                            for (var i = this.chunkSize(n), r = Math.pow(n, i), a = !1, o = 0, c = 0, l = 0; l < e.length; ++l) {
                                var d = s(e, l);
                                0 > d ? "-" == e.charAt(l) && 0 == this.signum() && (a = !0) : (c = n * c + d, ++o >= i && (this.dMultiply(r), this.dAddOffset(c, 0), o = 0, c = 0))
                            }
                            o > 0 && (this.dMultiply(Math.pow(n, o)), this.dAddOffset(c, 0)),
                            a && t.ZERO.subTo(this, this)
                        }
                        function Z(e, n, i) {
                            if ("number" == typeof n) if (2 > e) this.fromInt(1);
                            else for (this.fromNumber(e, i), this.testBit(e - 1) || this.bitwiseTo(t.ONE.shiftLeft(e - 1), oe, this), this.isEven() && this.dAddOffset(1, 0); ! this.isProbablePrime(n);) this.dAddOffset(2, 0),
                                this.bitLength() > e && this.subTo(t.ONE.shiftLeft(e - 1), this);
                            else {
                                var r = new Array,
                                    a = 7 & e;
                                r.length = (e >> 3) + 1,
                                    n.nextBytes(r),
                                    a > 0 ? r[0] &= (1 << a) - 1 : r[0] = 0,
                                    this.fromString(r, 256)
                            }
                        }
                        function J() {
                            var e = this.t,
                                t = new Array;
                            t[0] = this.s;
                            var n, i = this.DB - e * this.DB % 8,
                                r = 0;
                            if (e-->0) for (i < this.DB && (n = this.data[e] >> i) != (this.s & this.DM) >> i && (t[r++] = n | this.s << this.DB - i); e >= 0;) 8 > i ? (n = (this.data[e] & (1 << i) - 1) << 8 - i, n |= this.data[--e] >> (i += this.DB - 8)) : (n = this.data[e] >> (i -= 8) & 255, 0 >= i && (i += this.DB, --e)),
                            0 != (128 & n) && (n |= -256),
                            0 == r && (128 & this.s) != (128 & n) && ++r,
                            (r > 0 || n != this.s) && (t[r++] = n);
                            return t
                        }
                        function ee(e) {
                            return 0 == this.compareTo(e)
                        }
                        function te(e) {
                            return this.compareTo(e) < 0 ? this: e
                        }
                        function ne(e) {
                            return this.compareTo(e) > 0 ? this: e
                        }
                        function ie(e, t, n) {
                            var i, r, a = Math.min(e.t, this.t);
                            for (i = 0; a > i; ++i) n.data[i] = t(this.data[i], e.data[i]);
                            if (e.t < this.t) {
                                for (r = e.s & this.DM, i = a; i < this.t; ++i) n.data[i] = t(this.data[i], r);
                                n.t = this.t
                            } else {
                                for (r = this.s & this.DM, i = a; i < e.t; ++i) n.data[i] = t(r, e.data[i]);
                                n.t = e.t
                            }
                            n.s = t(this.s, e.s),
                                n.clamp()
                        }
                        function re(e, t) {
                            return e & t
                        }
                        function ae(e) {
                            var t = n();
                            return this.bitwiseTo(e, re, t),
                                t
                        }
                        function oe(e, t) {
                            return e | t
                        }
                        function se(e) {
                            var t = n();
                            return this.bitwiseTo(e, oe, t),
                                t
                        }
                        function ce(e, t) {
                            return e ^ t
                        }
                        function le(e) {
                            var t = n();
                            return this.bitwiseTo(e, ce, t),
                                t
                        }
                        function de(e, t) {
                            return e & ~t
                        }
                        function pe(e) {
                            var t = n();
                            return this.bitwiseTo(e, de, t),
                                t
                        }
                        function ue() {
                            for (var e = n(), t = 0; t < this.t; ++t) e.data[t] = this.DM & ~this.data[t];
                            return e.t = this.t,
                                e.s = ~this.s,
                                e
                        }
                        function fe(e) {
                            var t = n();
                            return 0 > e ? this.rShiftTo( - e, t) : this.lShiftTo(e, t),
                                t
                        }
                        function he(e) {
                            var t = n();
                            return 0 > e ? this.lShiftTo( - e, t) : this.rShiftTo(e, t),
                                t
                        }
                        function ge(e) {
                            if (0 == e) return - 1;
                            var t = 0;
                            return 0 == (65535 & e) && (e >>= 16, t += 16),
                            0 == (255 & e) && (e >>= 8, t += 8),
                            0 == (15 & e) && (e >>= 4, t += 4),
                            0 == (3 & e) && (e >>= 2, t += 2),
                            0 == (1 & e) && ++t,
                                t
                        }
                        function me() {
                            for (var e = 0; e < this.t; ++e) if (0 != this.data[e]) return e * this.DB + ge(this.data[e]);
                            return this.s < 0 ? this.t * this.DB: -1
                        }
                        function ye(e) {
                            for (var t = 0; 0 != e;) e &= e - 1,
                                ++t;
                            return t
                        }
                        function ve() {
                            for (var e = 0,
                                     t = this.s & this.DM,
                                     n = 0; n < this.t; ++n) e += ye(this.data[n] ^ t);
                            return e
                        }
                        function Ce(e) {
                            var t = Math.floor(e / this.DB);
                            return t >= this.t ? 0 != this.s: 0 != (this.data[t] & 1 << e % this.DB)
                        }
                        function Se(e, n) {
                            var i = t.ONE.shiftLeft(e);
                            return this.bitwiseTo(i, n, i),
                                i
                        }
                        function _e(e) {
                            return this.changeBit(e, oe)
                        }
                        function be(e) {
                            return this.changeBit(e, de)
                        }
                        function Ee(e) {
                            return this.changeBit(e, ce)
                        }
                        function Ie(e, t) {
                            for (var n = 0,
                                     i = 0,
                                     r = Math.min(e.t, this.t); r > n;) i += this.data[n] + e.data[n],
                                t.data[n++] = i & this.DM,
                                i >>= this.DB;
                            if (e.t < this.t) {
                                for (i += e.s; n < this.t;) i += this.data[n],
                                    t.data[n++] = i & this.DM,
                                    i >>= this.DB;
                                i += this.s
                            } else {
                                for (i += this.s; n < e.t;) i += e.data[n],
                                    t.data[n++] = i & this.DM,
                                    i >>= this.DB;
                                i += e.s
                            }
                            t.s = 0 > i ? -1 : 0,
                                i > 0 ? t.data[n++] = i: -1 > i && (t.data[n++] = this.DV + i),
                                t.t = n,
                                t.clamp()
                        }
                        function Ae(e) {
                            var t = n();
                            return this.addTo(e, t),
                                t
                        }
                        function Te(e) {
                            var t = n();
                            return this.subTo(e, t),
                                t
                        }
                        function ke(e) {
                            var t = n();
                            return this.multiplyTo(e, t),
                                t
                        }
                        function we(e) {
                            var t = n();
                            return this.divRemTo(e, t, null),
                                t
                        }
                        function $e(e) {
                            var t = n();
                            return this.divRemTo(e, null, t),
                                t
                        }
                        function Pe(e) {
                            var t = n(),
                                i = n();
                            return this.divRemTo(e, t, i),
                                new Array(t, i)
                        }
                        function Ne(e) {
                            this.data[this.t] = this.am(0, e - 1, this, 0, 0, this.t),
                                ++this.t,
                                this.clamp()
                        }
                        function De(e, t) {
                            if (0 != e) {
                                for (; this.t <= t;) this.data[this.t++] = 0;
                                for (this.data[t] += e; this.data[t] >= this.DV;) this.data[t] -= this.DV,
                                ++t >= this.t && (this.data[this.t++] = 0),
                                    ++this.data[t]
                            }
                        }
                        function Re() {}
                        function Be(e) {
                            return e
                        }
                        function Oe(e, t, n) {
                            e.multiplyTo(t, n)
                        }
                        function Ue(e, t) {
                            e.squareTo(t)
                        }
                        function Le(e) {
                            return this.exp(e, new Re)
                        }
                        function Me(e, t, n) {
                            var i = Math.min(this.t + e.t, t);
                            for (n.s = 0, n.t = i; i > 0;) n.data[--i] = 0;
                            var r;
                            for (r = n.t - this.t; r > i; ++i) n.data[i + this.t] = this.am(0, e.data[i], n, i, 0, this.t);
                            for (r = Math.min(e.t, t); r > i; ++i) this.am(0, e.data[i], n, i, 0, t - i);
                            n.clamp()
                        }
                        function xe(e, t, n) {--t;
                            var i = n.t = this.t + e.t - t;
                            for (n.s = 0; --i >= 0;) n.data[i] = 0;
                            for (i = Math.max(t - this.t, 0); i < e.t; ++i) n.data[this.t + i - t] = this.am(t - i, e.data[i], n, 0, 0, this.t + i - t);
                            n.clamp(),
                                n.drShiftTo(1, n)
                        }
                        function Fe(e) {
                            this.r2 = n(),
                                this.q3 = n(),
                                t.ONE.dlShiftTo(2 * e.t, this.r2),
                                this.mu = this.r2.divide(e),
                                this.m = e
                        }
                        function Ve(e) {
                            if (e.s < 0 || e.t > 2 * this.m.t) return e.mod(this.m);
                            if (e.compareTo(this.m) < 0) return e;
                            var t = n();
                            return e.copyTo(t),
                                this.reduce(t),
                                t
                        }
                        function He(e) {
                            return e
                        }
                        function Ke(e) {
                            for (e.drShiftTo(this.m.t - 1, this.r2), e.t > this.m.t + 1 && (e.t = this.m.t + 1, e.clamp()), this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3), this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2); e.compareTo(this.r2) < 0;) e.dAddOffset(1, this.m.t + 1);
                            for (e.subTo(this.r2, e); e.compareTo(this.m) >= 0;) e.subTo(this.m, e)
                        }
                        function Ge(e, t) {
                            e.squareTo(t),
                                this.reduce(t)
                        }
                        function qe(e, t, n) {
                            e.multiplyTo(t, n),
                                this.reduce(n)
                        }
                        function je(e, t) {
                            var i, r, a = e.bitLength(),
                                o = d(1);
                            if (0 >= a) return o;
                            i = 18 > a ? 1 : 48 > a ? 3 : 144 > a ? 4 : 768 > a ? 5 : 6,
                                r = 8 > a ? new w(t) : t.isEven() ? new Fe(t) : new O(t);
                            var s = new Array,
                                c = 3,
                                l = i - 1,
                                p = (1 << i) - 1;
                            if (s[1] = r.convert(this), i > 1) {
                                var u = n();
                                for (r.sqrTo(s[1], u); p >= c;) s[c] = n(),
                                    r.mulTo(u, s[c - 2], s[c]),
                                    c += 2
                            }
                            var f, h, g = e.t - 1,
                                m = !0,
                                v = n();
                            for (a = y(e.data[g]) - 1; g >= 0;) {
                                for (a >= l ? f = e.data[g] >> a - l & p: (f = (e.data[g] & (1 << a + 1) - 1) << l - a, g > 0 && (f |= e.data[g - 1] >> this.DB + a - l)), c = i; 0 == (1 & f);) f >>= 1,
                                    --c;
                                if ((a -= c) < 0 && (a += this.DB, --g), m) s[f].copyTo(o),
                                    m = !1;
                                else {
                                    for (; c > 1;) r.sqrTo(o, v),
                                        r.sqrTo(v, o),
                                        c -= 2;
                                    c > 0 ? r.sqrTo(o, v) : (h = o, o = v, v = h),
                                        r.mulTo(v, s[f], o)
                                }
                                for (; g >= 0 && 0 == (e.data[g] & 1 << a);) r.sqrTo(o, v),
                                    h = o,
                                    o = v,
                                    v = h,
                                --a < 0 && (a = this.DB - 1, --g)
                            }
                            return r.revert(o)
                        }
                        function ze(e) {
                            var t = this.s < 0 ? this.negate() : this.clone(),
                                n = e.s < 0 ? e.negate() : e.clone();
                            if (t.compareTo(n) < 0) {
                                var i = t;
                                t = n,
                                    n = i
                            }
                            var r = t.getLowestSetBit(),
                                a = n.getLowestSetBit();
                            if (0 > a) return t;
                            for (a > r && (a = r), a > 0 && (t.rShiftTo(a, t), n.rShiftTo(a, n)); t.signum() > 0;)(r = t.getLowestSetBit()) > 0 && t.rShiftTo(r, t),
                            (r = n.getLowestSetBit()) > 0 && n.rShiftTo(r, n),
                                t.compareTo(n) >= 0 ? (t.subTo(n, t), t.rShiftTo(1, t)) : (n.subTo(t, n), n.rShiftTo(1, n));
                            return a > 0 && n.lShiftTo(a, n),
                                n
                        }
                        function We(e) {
                            if (0 >= e) return 0;
                            var t = this.DV % e,
                                n = this.s < 0 ? e - 1 : 0;
                            if (this.t > 0) if (0 == t) n = this.data[0] % e;
                            else for (var i = this.t - 1; i >= 0; --i) n = (t * n + this.data[i]) % e;
                            return n
                        }
                        function Qe(e) {
                            var n = e.isEven();
                            if (this.isEven() && n || 0 == e.signum()) return t.ZERO;
                            for (var i = e.clone(), r = this.clone(), a = d(1), o = d(0), s = d(0), c = d(1); 0 != i.signum();) {
                                for (; i.isEven();) i.rShiftTo(1, i),
                                    n ? (a.isEven() && o.isEven() || (a.addTo(this, a), o.subTo(e, o)), a.rShiftTo(1, a)) : o.isEven() || o.subTo(e, o),
                                    o.rShiftTo(1, o);
                                for (; r.isEven();) r.rShiftTo(1, r),
                                    n ? (s.isEven() && c.isEven() || (s.addTo(this, s), c.subTo(e, c)), s.rShiftTo(1, s)) : c.isEven() || c.subTo(e, c),
                                    c.rShiftTo(1, c);
                                i.compareTo(r) >= 0 ? (i.subTo(r, i), n && a.subTo(s, a), o.subTo(c, o)) : (r.subTo(i, r), n && s.subTo(a, s), c.subTo(o, c))
                            }
                            return 0 != r.compareTo(t.ONE) ? t.ZERO: c.compareTo(e) >= 0 ? c.subtract(e) : c.signum() < 0 ? (c.addTo(e, c), c.signum() < 0 ? c.add(e) : c) : c
                        }
                        function Xe(e) {
                            var t, n = this.abs();
                            if (1 == n.t && n.data[0] <= st[st.length - 1]) {
                                for (t = 0; t < st.length; ++t) if (n.data[0] == st[t]) return ! 0;
                                return ! 1
                            }
                            if (n.isEven()) return ! 1;
                            for (t = 1; t < st.length;) {
                                for (var i = st[t], r = t + 1; r < st.length && ct > i;) i *= st[r++];
                                for (i = n.modInt(i); r > t;) if (i % st[t++] == 0) return ! 1
                            }
                            return n.millerRabin(e)
                        }
                        function Ye(e) {
                            var n = this.subtract(t.ONE),
                                i = n.getLowestSetBit();
                            if (0 >= i) return ! 1;
                            for (var r, a = n.shiftRight(i), o = Ze(), s = 0; e > s; ++s) {
                                do r = new t(this.bitLength(), o);
                                while (r.compareTo(t.ONE) <= 0 || r.compareTo(n) >= 0);
                                var c = r.modPow(a, this);
                                if (0 != c.compareTo(t.ONE) && 0 != c.compareTo(n)) {
                                    for (var l = 1; l++<i && 0 != c.compareTo(n);) if (c = c.modPowInt(2, this), 0 == c.compareTo(t.ONE)) return ! 1;
                                    if (0 != c.compareTo(n)) return ! 1
                                }
                            }
                            return ! 0
                        }
                        function Ze() {
                            return {
                                nextBytes: function(e) {
                                    for (var t = 0; t < e.length; ++t) e[t] = Math.floor(256 * Math.random())
                                }
                            }
                        }
                        var Je, et = 0xdeadbeefcafe,
                            tt = 15715070 == (16777215 & et);
                        "undefined" == typeof navigator ? (t.prototype.am = a, Je = 28) : tt && "Microsoft Internet Explorer" == navigator.appName ? (t.prototype.am = r, Je = 30) : tt && "Netscape" != navigator.appName ? (t.prototype.am = i, Je = 26) : (t.prototype.am = a, Je = 28),
                            t.prototype.DB = Je,
                            t.prototype.DM = (1 << Je) - 1,
                            t.prototype.DV = 1 << Je;
                        var nt = 52;
                        t.prototype.FV = Math.pow(2, nt),
                            t.prototype.F1 = nt - Je,
                            t.prototype.F2 = 2 * Je - nt;
                        var it, rt, at = "0123456789abcdefghijklmnopqrstuvwxyz",
                            ot = new Array;
                        for (it = "0".charCodeAt(0), rt = 0; 9 >= rt; ++rt) ot[it++] = rt;
                        for (it = "a".charCodeAt(0), rt = 10; 36 > rt; ++rt) ot[it++] = rt;
                        for (it = "A".charCodeAt(0), rt = 10; 36 > rt; ++rt) ot[it++] = rt;
                        w.prototype.convert = $,
                            w.prototype.revert = P,
                            w.prototype.reduce = N,
                            w.prototype.mulTo = D,
                            w.prototype.sqrTo = R,
                            O.prototype.convert = U,
                            O.prototype.revert = L,
                            O.prototype.reduce = M,
                            O.prototype.mulTo = F,
                            O.prototype.sqrTo = x,
                            t.prototype.copyTo = c,
                            t.prototype.fromInt = l,
                            t.prototype.fromString = p,
                            t.prototype.clamp = u,
                            t.prototype.dlShiftTo = C,
                            t.prototype.drShiftTo = S,
                            t.prototype.lShiftTo = _,
                            t.prototype.rShiftTo = b,
                            t.prototype.subTo = E,
                            t.prototype.multiplyTo = I,
                            t.prototype.squareTo = A,
                            t.prototype.divRemTo = T,
                            t.prototype.invDigit = B,
                            t.prototype.isEven = V,
                            t.prototype.exp = H,
                            t.prototype.toString = f,
                            t.prototype.negate = h,
                            t.prototype.abs = g,
                            t.prototype.compareTo = m,
                            t.prototype.bitLength = v,
                            t.prototype.mod = k,
                            t.prototype.modPowInt = K,
                            t.ZERO = d(0),
                            t.ONE = d(1),
                            Re.prototype.convert = Be,
                            Re.prototype.revert = Be,
                            Re.prototype.mulTo = Oe,
                            Re.prototype.sqrTo = Ue,
                            Fe.prototype.convert = Ve,
                            Fe.prototype.revert = He,
                            Fe.prototype.reduce = Ke,
                            Fe.prototype.mulTo = qe,
                            Fe.prototype.sqrTo = Ge;
                        var st = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509],
                            ct = (1 << 26) / st[st.length - 1];
                        t.prototype.chunkSize = W,
                            t.prototype.toRadix = X,
                            t.prototype.fromRadix = Y,
                            t.prototype.fromNumber = Z,
                            t.prototype.bitwiseTo = ie,
                            t.prototype.changeBit = Se,
                            t.prototype.addTo = Ie,
                            t.prototype.dMultiply = Ne,
                            t.prototype.dAddOffset = De,
                            t.prototype.multiplyLowerTo = Me,
                            t.prototype.multiplyUpperTo = xe,
                            t.prototype.modInt = We,
                            t.prototype.millerRabin = Ye,
                            t.prototype.clone = G,
                            t.prototype.intValue = q,
                            t.prototype.byteValue = j,
                            t.prototype.shortValue = z,
                            t.prototype.signum = Q,
                            t.prototype.toByteArray = J,
                            t.prototype.equals = ee,
                            t.prototype.min = te,
                            t.prototype.max = ne,
                            t.prototype.and = ae,
                            t.prototype.or = se,
                            t.prototype.xor = le,
                            t.prototype.andNot = pe,
                            t.prototype.not = ue,
                            t.prototype.shiftLeft = fe,
                            t.prototype.shiftRight = he,
                            t.prototype.getLowestSetBit = me,
                            t.prototype.bitCount = ve,
                            t.prototype.testBit = Ce,
                            t.prototype.setBit = _e,
                            t.prototype.clearBit = be,
                            t.prototype.flipBit = Ee,
                            t.prototype.add = Ae,
                            t.prototype.subtract = Te,
                            t.prototype.multiply = ke,
                            t.prototype.divide = we,
                            t.prototype.remainder = $e,
                            t.prototype.divideAndRemainder = Pe,
                            t.prototype.modPow = je,
                            t.prototype.modInverse = Qe,
                            t.prototype.pow = Le,
                            t.prototype.gcd = ze,
                            t.prototype.isProbablePrime = Xe,
                            e.jsbn = e.jsbn || {},
                            e.jsbn.BigInteger = t
                    }
                    var i = "jsbn";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/jsbn", ["require", "module"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(t, n, i) {
                            i || (i = e.md.sha1.create());
                            for (var r = "",
                                     a = Math.ceil(n / i.digestLength), o = 0; a > o; ++o) {
                                var s = String.fromCharCode(o >> 24 & 255, o >> 16 & 255, o >> 8 & 255, 255 & o);
                                i.start(),
                                    i.update(t + s),
                                    r += i.digest().getBytes()
                            }
                            return r.substring(0, n)
                        }
                        var n = e.pkcs1 = e.pkcs1 || {};
                        n.encode_rsa_oaep = function(n, i, r) {
                            var a, o, s, c;
                            "string" == typeof r ? (a = r, o = arguments[3] || void 0, s = arguments[4] || void 0) : r && (a = r.label || void 0, o = r.seed || void 0, s = r.md || void 0, r.mgf1 && r.mgf1.md && (c = r.mgf1.md)),
                                s ? s.start() : s = e.md.sha1.create(),
                            c || (c = s);
                            var l = Math.ceil(n.n.bitLength() / 8),
                                d = l - 2 * s.digestLength - 2;
                            if (i.length > d) {
                                var p = new Error("RSAES-OAEP input message length is too long.");
                                throw p.length = i.length,
                                    p.maxLength = d,
                                    p
                            }
                            a || (a = ""),
                                s.update(a, "raw");
                            for (var u = s.digest(), f = "", h = d - i.length, g = 0; h > g; g++) f += "\x00";
                            var m = u.getBytes() + f + "" + i;
                            if (o) {
                                if (o.length !== s.digestLength) {
                                    var p = new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");
                                    throw p.seedLength = o.length,
                                        p.digestLength = s.digestLength,
                                        p
                                }
                            } else o = e.random.getBytes(s.digestLength);
                            var y = t(o, l - s.digestLength - 1, c),
                                v = e.util.xorBytes(m, y, m.length),
                                C = t(v, s.digestLength, c),
                                S = e.util.xorBytes(o, C, o.length);
                            return "\x00" + S + v
                        },
                            n.decode_rsa_oaep = function(n, i, r) {
                                var a, o, s;
                                "string" == typeof r ? (a = r, o = arguments[3] || void 0) : r && (a = r.label || void 0, o = r.md || void 0, r.mgf1 && r.mgf1.md && (s = r.mgf1.md));
                                var c = Math.ceil(n.n.bitLength() / 8);
                                if (i.length !== c) {
                                    var l = new Error("RSAES-OAEP encoded message length is invalid.");
                                    throw l.length = i.length,
                                        l.expectedLength = c,
                                        l
                                }
                                if (void 0 === o ? o = e.md.sha1.create() : o.start(), s || (s = o), c < 2 * o.digestLength + 2) throw new Error("RSAES-OAEP key is too short for the hash function.");
                                a || (a = ""),
                                    o.update(a, "raw");
                                for (var d = o.digest().getBytes(), p = i.charAt(0), u = i.substring(1, o.digestLength + 1), f = i.substring(1 + o.digestLength), h = t(f, o.digestLength, s), g = e.util.xorBytes(u, h, u.length), m = t(g, c - o.digestLength - 1, s), y = e.util.xorBytes(f, m, f.length), v = y.substring(0, o.digestLength), l = "\x00" !== p, C = 0; C < o.digestLength; ++C) l |= d.charAt(C) !== v.charAt(C);
                                for (var S = 1,
                                         _ = o.digestLength,
                                         b = o.digestLength; b < y.length; b++) {
                                    var E = y.charCodeAt(b),
                                        I = 1 & E ^ 1,
                                        A = S ? 65534 : 0;
                                    l |= E & A,
                                        S &= I,
                                        _ += S
                                }
                                if (l || 1 !== y.charCodeAt(_)) throw new Error("Invalid RSAES-OAEP padding.");
                                return y.substring(_ + 1)
                            }
                    }
                    var i = "pkcs1";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/pkcs1", ["require", "module", "./util", "./random", "./sha1"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(e, t, r, a) {
                            return "workers" in r ? i(e, t, r, a) : n(e, t, r, a)
                        }
                        function n(t, i, o, s) {
                            var l = r(t, i),
                                d = 0,
                                p = a(l.bitLength());
                            "millerRabinTests" in o && (p = o.millerRabinTests);
                            var u = 10;
                            "maxBlockTime" in o && (u = o.maxBlockTime);
                            var f = +new Date;
                            do {
                                if (l.bitLength() > t && (l = r(t, i)), l.isProbablePrime(p)) return s(null, l);
                                l.dAddOffset(c[d++%8], 0)
                            } while ( 0 > u || + new Date - f < u );
                            e.util.setImmediate(function() {
                                n(t, i, o, s)
                            })
                        }
                        function i(t, i, a, o) {
                            function c() {
                                function e(e) {
                                    if (!h) {--c;
                                        var a = e.data;
                                        if (a.found) {
                                            for (var d = 0; d < n.length; ++d) n[d].terminate();
                                            return h = !0,
                                                o(null, new s(a.prime, 16))
                                        }
                                        l.bitLength() > t && (l = r(t, i));
                                        var f = l.toString(16);
                                        e.target.postMessage({
                                            hex: f,
                                            workLoad: p
                                        }),
                                            l.dAddOffset(u, 0)
                                    }
                                }
                                d = Math.max(1, d);
                                for (var n = [], a = 0; d > a; ++a) n[a] = new Worker(f);
                                for (var c = d,
                                         a = 0; d > a; ++a) n[a].addEventListener("message", e);
                                var h = !1
                            }
                            if ("undefined" == typeof Worker) return n(t, i, a, o);
                            var l = r(t, i),
                                d = a.workers,
                                p = a.workLoad || 100,
                                u = 30 * p / 8,
                                f = a.workerScript || "forge/prime.worker.js";
                            return - 1 === d ? e.util.estimateCores(function(e, t) {
                                e && (t = 2),
                                    d = t - 1,
                                    c()
                            }) : void c()
                        }
                        function r(e, t) {
                            var n = new s(e, t),
                                i = e - 1;
                            return n.testBit(i) || n.bitwiseTo(s.ONE.shiftLeft(i), d, n),
                                n.dAddOffset(31 - n.mod(l).byteValue(), 0),
                                n
                        }
                        function a(e) {
                            return 100 >= e ? 27 : 150 >= e ? 18 : 200 >= e ? 15 : 250 >= e ? 12 : 300 >= e ? 9 : 350 >= e ? 8 : 400 >= e ? 7 : 500 >= e ? 6 : 600 >= e ? 5 : 800 >= e ? 4 : 1250 >= e ? 3 : 2
                        }
                        if (!e.prime) {
                            var o = e.prime = e.prime || {},
                                s = e.jsbn.BigInteger,
                                c = [6, 4, 2, 4, 2, 4, 6, 2],
                                l = new s(null);
                            l.fromInt(30);
                            var d = function(e, t) {
                                return e | t
                            };
                            o.generateProbablePrime = function(n, i, r) {
                                "function" == typeof i && (r = i, i = {}),
                                    i = i || {};
                                var a = i.algorithm || "PRIMEINC";
                                "string" == typeof a && (a = {
                                    name: a
                                }),
                                    a.options = a.options || {};
                                var o = i.prng || e.random,
                                    s = {
                                        nextBytes: function(e) {
                                            for (var t = o.getBytesSync(e.length), n = 0; n < e.length; ++n) e[n] = t.charCodeAt(n)
                                        }
                                    };
                                if ("PRIMEINC" === a.name) return t(n, s, a.options, r);
                                throw new Error("Invalid prime generation algorithm: " + a.name)
                            }
                        }
                    }
                    var i = "prime";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/prime", ["require", "module", "./util", "./jsbn", "./random"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(t, n, i) {
                            var r = e.util.createBuffer(),
                                a = Math.ceil(n.n.bitLength() / 8);
                            if (t.length > a - 11) {
                                var o = new Error("Message is too long for PKCS#1 v1.5 padding.");
                                throw o.length = t.length,
                                    o.max = a - 11,
                                    o
                            }
                            r.putByte(0),
                                r.putByte(i);
                            var s, c = a - 3 - t.length;
                            if (0 === i || 1 === i) {
                                s = 0 === i ? 0 : 255;
                                for (var l = 0; c > l; ++l) r.putByte(s)
                            } else for (; c > 0;) {
                                for (var d = 0,
                                         p = e.random.getBytes(c), l = 0; c > l; ++l) s = p.charCodeAt(l),
                                    0 === s ? ++d: r.putByte(s);
                                c = d
                            }
                            return r.putByte(0),
                                r.putBytes(t),
                                r
                        }
                        function n(t, n, i, r) {
                            var a = Math.ceil(n.n.bitLength() / 8),
                                o = e.util.createBuffer(t),
                                s = o.getByte(),
                                c = o.getByte();
                            if (0 !== s || i && 0 !== c && 1 !== c || !i && 2 != c || i && 0 === c && "undefined" == typeof r) throw new Error("Encryption block is invalid.");
                            var l = 0;
                            if (0 === c) {
                                l = a - 3 - r;
                                for (var d = 0; l > d; ++d) if (0 !== o.getByte()) throw new Error("Encryption block is invalid.")
                            } else if (1 === c) for (l = 0; o.length() > 1;) {
                                if (255 !== o.getByte()) {--o.read;
                                    break
                                }++l
                            } else if (2 === c) for (l = 0; o.length() > 1;) {
                                if (0 === o.getByte()) {--o.read;
                                    break
                                }++l
                            }
                            var p = o.getByte();
                            if (0 !== p || l !== a - 3 - o.length()) throw new Error("Encryption block is invalid.");
                            return o.getBytes()
                        }
                        function i(t, n, i) {
                            function r() {
                                a(t.pBits,
                                    function(e, n) {
                                        return e ? i(e) : (t.p = n, null !== t.q ? o(e, t.q) : void a(t.qBits, o))
                                    })
                            }
                            function a(t, n) {
                                e.prime.generateProbablePrime(t, s, n)
                            }
                            function o(e, n) {
                                if (e) return i(e);
                                if (t.q = n, t.p.compareTo(t.q) < 0) {
                                    var s = t.p;
                                    t.p = t.q,
                                        t.q = s
                                }
                                if (0 !== t.p.subtract(l.ONE).gcd(t.e).compareTo(l.ONE)) return t.p = null,
                                    void r();
                                if (0 !== t.q.subtract(l.ONE).gcd(t.e).compareTo(l.ONE)) return t.q = null,
                                    void a(t.qBits, o);
                                if (t.p1 = t.p.subtract(l.ONE), t.q1 = t.q.subtract(l.ONE), t.phi = t.p1.multiply(t.q1), 0 !== t.phi.gcd(t.e).compareTo(l.ONE)) return t.p = t.q = null,
                                    void r();
                                if (t.n = t.p.multiply(t.q), t.n.bitLength() !== t.bits) return t.q = null,
                                    void a(t.qBits, o);
                                var c = t.e.modInverse(t.phi);
                                t.keys = {
                                    privateKey: p.rsa.setPrivateKey(t.n, t.e, c, t.p, t.q, c.mod(t.p1), c.mod(t.q1), t.q.modInverse(t.p)),
                                    publicKey: p.rsa.setPublicKey(t.n, t.e)
                                },
                                    i(null, t.keys)
                            }
                            "function" == typeof n && (i = n, n = {}),
                                n = n || {};
                            var s = {
                                algorithm: {
                                    name: n.algorithm || "PRIMEINC",
                                    options: {
                                        workers: n.workers || 2,
                                        workLoad: n.workLoad || 100,
                                        workerScript: n.workerScript
                                    }
                                }
                            };
                            "prng" in n && (s.prng = n.prng),
                                r()
                        }
                        function r(t) {
                            var n = t.toString(16);
                            return n[0] >= "8" && (n = "00" + n),
                                e.util.hexToBytes(n)
                        }
                        function a(e) {
                            return 100 >= e ? 27 : 150 >= e ? 18 : 200 >= e ? 15 : 250 >= e ? 12 : 300 >= e ? 9 : 350 >= e ? 8 : 400 >= e ? 7 : 500 >= e ? 6 : 600 >= e ? 5 : 800 >= e ? 4 : 1250 >= e ? 3 : 2
                        }
                        function o(e) {
                            return "undefined" != typeof window && "object" == typeof window.crypto && "object" == typeof window.crypto.subtle && "function" == typeof window.crypto.subtle[e]
                        }
                        function s(e) {
                            return "undefined" != typeof window && "object" == typeof window.msCrypto && "object" == typeof window.msCrypto.subtle && "function" == typeof window.msCrypto.subtle[e]
                        }
                        function c(t) {
                            for (var n = e.util.hexToBytes(t.toString(16)), i = new Uint8Array(n.length), r = 0; r < n.length; ++r) i[r] = n.charCodeAt(r);
                            return i
                        }
                        if ("undefined" == typeof l) var l = e.jsbn.BigInteger;
                        var d = e.asn1;
                        e.pki = e.pki || {},
                            e.pki.rsa = e.rsa = e.rsa || {};
                        var p = e.pki,
                            u = [6, 4, 2, 4, 2, 4, 6, 2],
                            f = {
                                name: "PrivateKeyInfo",
                                tagClass: d.Class.UNIVERSAL,
                                type: d.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "PrivateKeyInfo.version",
                                    tagClass: d.Class.UNIVERSAL,
                                    type: d.Type.INTEGER,
                                    constructed: !1,
                                    capture: "privateKeyVersion"
                                },
                                    {
                                        name: "PrivateKeyInfo.privateKeyAlgorithm",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.SEQUENCE,
                                        constructed: !0,
                                        value: [{
                                            name: "AlgorithmIdentifier.algorithm",
                                            tagClass: d.Class.UNIVERSAL,
                                            type: d.Type.OID,
                                            constructed: !1,
                                            capture: "privateKeyOid"
                                        }]
                                    },
                                    {
                                        name: "PrivateKeyInfo",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.OCTETSTRING,
                                        constructed: !1,
                                        capture: "privateKey"
                                    }]
                            },
                            h = {
                                name: "RSAPrivateKey",
                                tagClass: d.Class.UNIVERSAL,
                                type: d.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "RSAPrivateKey.version",
                                    tagClass: d.Class.UNIVERSAL,
                                    type: d.Type.INTEGER,
                                    constructed: !1,
                                    capture: "privateKeyVersion"
                                },
                                    {
                                        name: "RSAPrivateKey.modulus",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.INTEGER,
                                        constructed: !1,
                                        capture: "privateKeyModulus"
                                    },
                                    {
                                        name: "RSAPrivateKey.publicExponent",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.INTEGER,
                                        constructed: !1,
                                        capture: "privateKeyPublicExponent"
                                    },
                                    {
                                        name: "RSAPrivateKey.privateExponent",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.INTEGER,
                                        constructed: !1,
                                        capture: "privateKeyPrivateExponent"
                                    },
                                    {
                                        name: "RSAPrivateKey.prime1",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.INTEGER,
                                        constructed: !1,
                                        capture: "privateKeyPrime1"
                                    },
                                    {
                                        name: "RSAPrivateKey.prime2",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.INTEGER,
                                        constructed: !1,
                                        capture: "privateKeyPrime2"
                                    },
                                    {
                                        name: "RSAPrivateKey.exponent1",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.INTEGER,
                                        constructed: !1,
                                        capture: "privateKeyExponent1"
                                    },
                                    {
                                        name: "RSAPrivateKey.exponent2",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.INTEGER,
                                        constructed: !1,
                                        capture: "privateKeyExponent2"
                                    },
                                    {
                                        name: "RSAPrivateKey.coefficient",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.INTEGER,
                                        constructed: !1,
                                        capture: "privateKeyCoefficient"
                                    }]
                            },
                            g = {
                                name: "RSAPublicKey",
                                tagClass: d.Class.UNIVERSAL,
                                type: d.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "RSAPublicKey.modulus",
                                    tagClass: d.Class.UNIVERSAL,
                                    type: d.Type.INTEGER,
                                    constructed: !1,
                                    capture: "publicKeyModulus"
                                },
                                    {
                                        name: "RSAPublicKey.exponent",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.INTEGER,
                                        constructed: !1,
                                        capture: "publicKeyExponent"
                                    }]
                            },
                            m = e.pki.rsa.publicKeyValidator = {
                                name: "SubjectPublicKeyInfo",
                                tagClass: d.Class.UNIVERSAL,
                                type: d.Type.SEQUENCE,
                                constructed: !0,
                                captureAsn1: "subjectPublicKeyInfo",
                                value: [{
                                    name: "SubjectPublicKeyInfo.AlgorithmIdentifier",
                                    tagClass: d.Class.UNIVERSAL,
                                    type: d.Type.SEQUENCE,
                                    constructed: !0,
                                    value: [{
                                        name: "AlgorithmIdentifier.algorithm",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.OID,
                                        constructed: !1,
                                        capture: "publicKeyOid"
                                    }]
                                },
                                    {
                                        name: "SubjectPublicKeyInfo.subjectPublicKey",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.BITSTRING,
                                        constructed: !1,
                                        value: [{
                                            name: "SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",
                                            tagClass: d.Class.UNIVERSAL,
                                            type: d.Type.SEQUENCE,
                                            constructed: !0,
                                            optional: !0,
                                            captureAsn1: "rsaPublicKey"
                                        }]
                                    }]
                            },
                            y = function(e) {
                                var t;
                                if (e.algorithm in p.oids) {
                                    t = p.oids[e.algorithm];
                                    var n = d.oidToDer(t).getBytes(),
                                        i = d.create(d.Class.UNIVERSAL, d.Type.SEQUENCE, !0, []),
                                        r = d.create(d.Class.UNIVERSAL, d.Type.SEQUENCE, !0, []);
                                    r.value.push(d.create(d.Class.UNIVERSAL, d.Type.OID, !1, n)),
                                        r.value.push(d.create(d.Class.UNIVERSAL, d.Type.NULL, !1, ""));
                                    var a = d.create(d.Class.UNIVERSAL, d.Type.OCTETSTRING, !1, e.digest().getBytes());
                                    return i.value.push(r),
                                        i.value.push(a),
                                        d.toDer(i).getBytes()
                                }
                                var o = new Error("Unknown message digest algorithm.");
                                throw o.algorithm = e.algorithm,
                                    o
                            },
                            v = function(t, n, i) {
                                if (i) return t.modPow(n.e, n.n);
                                if (!n.p || !n.q) return t.modPow(n.d, n.n);
                                n.dP || (n.dP = n.d.mod(n.p.subtract(l.ONE))),
                                n.dQ || (n.dQ = n.d.mod(n.q.subtract(l.ONE))),
                                n.qInv || (n.qInv = n.q.modInverse(n.p));
                                var r;
                                do r = new l(e.util.bytesToHex(e.random.getBytes(n.n.bitLength() / 8)), 16);
                                while (r.compareTo(n.n) >= 0 || !r.gcd(n.n).equals(l.ONE));
                                t = t.multiply(r.modPow(n.e, n.n)).mod(n.n);
                                for (var a = t.mod(n.p).modPow(n.dP, n.p), o = t.mod(n.q).modPow(n.dQ, n.q); a.compareTo(o) < 0;) a = a.add(n.p);
                                var s = a.subtract(o).multiply(n.qInv).mod(n.p).multiply(n.q).add(o);
                                return s = s.multiply(r.modInverse(n.n)).mod(n.n)
                            };
                        p.rsa.encrypt = function(n, i, r) {
                            var a, o = r,
                                s = Math.ceil(i.n.bitLength() / 8);
                            r !== !1 && r !== !0 ? (o = 2 === r, a = t(n, i, r)) : (a = e.util.createBuffer(), a.putBytes(n));
                            for (var c = new l(a.toHex(), 16), d = v(c, i, o), p = d.toString(16), u = e.util.createBuffer(), f = s - Math.ceil(p.length / 2); f > 0;) u.putByte(0),
                                --f;
                            return u.putBytes(e.util.hexToBytes(p)),
                                u.getBytes()
                        },
                            p.rsa.decrypt = function(t, i, r, a) {
                                var o = Math.ceil(i.n.bitLength() / 8);
                                if (t.length !== o) {
                                    var s = new Error("Encrypted message length is invalid.");
                                    throw s.length = t.length,
                                        s.expected = o,
                                        s
                                }
                                var c = new l(e.util.createBuffer(t).toHex(), 16);
                                if (c.compareTo(i.n) >= 0) throw new Error("Encrypted message is invalid.");
                                for (var d = v(c, i, r), p = d.toString(16), u = e.util.createBuffer(), f = o - Math.ceil(p.length / 2); f > 0;) u.putByte(0),
                                    --f;
                                return u.putBytes(e.util.hexToBytes(p)),
                                    a !== !1 ? n(u.getBytes(), i, r) : u.getBytes()
                            },
                            p.rsa.createKeyPairGenerationState = function(t, n, i) {
                                "string" == typeof t && (t = parseInt(t, 10)),
                                    t = t || 2048,
                                    i = i || {};
                                var r, a = i.prng || e.random,
                                    o = {
                                        nextBytes: function(e) {
                                            for (var t = a.getBytesSync(e.length), n = 0; n < e.length; ++n) e[n] = t.charCodeAt(n)
                                        }
                                    },
                                    s = i.algorithm || "PRIMEINC";
                                if ("PRIMEINC" !== s) throw new Error("Invalid key generation algorithm: " + s);
                                return r = {
                                    algorithm: s,
                                    state: 0,
                                    bits: t,
                                    rng: o,
                                    eInt: n || 65537,
                                    e: new l(null),
                                    p: null,
                                    q: null,
                                    qBits: t >> 1,
                                    pBits: t - (t >> 1),
                                    pqState: 0,
                                    num: null,
                                    keys: null
                                },
                                    r.e.fromInt(r.eInt),
                                    r
                            },
                            p.rsa.stepKeyPairGenerationState = function(e, t) {
                                "algorithm" in e || (e.algorithm = "PRIMEINC");
                                var n = new l(null);
                                n.fromInt(30);
                                for (var i, r = 0,
                                         o = function(e, t) {
                                             return e | t
                                         },
                                         s = +new Date, c = 0; null === e.keys && (0 >= t || t > c);) {
                                    if (0 === e.state) {
                                        var d = null === e.p ? e.pBits: e.qBits,
                                            f = d - 1;
                                        0 === e.pqState ? (e.num = new l(d, e.rng), e.num.testBit(f) || e.num.bitwiseTo(l.ONE.shiftLeft(f), o, e.num), e.num.dAddOffset(31 - e.num.mod(n).byteValue(), 0), r = 0, ++e.pqState) : 1 === e.pqState ? e.num.bitLength() > d ? e.pqState = 0 : e.num.isProbablePrime(a(e.num.bitLength())) ? ++e.pqState: e.num.dAddOffset(u[r++%8], 0) : 2 === e.pqState ? e.pqState = 0 === e.num.subtract(l.ONE).gcd(e.e).compareTo(l.ONE) ? 3 : 0 : 3 === e.pqState && (e.pqState = 0, null === e.p ? e.p = e.num: e.q = e.num, null !== e.p && null !== e.q && ++e.state, e.num = null)
                                    } else if (1 === e.state) e.p.compareTo(e.q) < 0 && (e.num = e.p, e.p = e.q, e.q = e.num),
                                        ++e.state;
                                    else if (2 === e.state) e.p1 = e.p.subtract(l.ONE),
                                        e.q1 = e.q.subtract(l.ONE),
                                        e.phi = e.p1.multiply(e.q1),
                                        ++e.state;
                                    else if (3 === e.state) 0 === e.phi.gcd(e.e).compareTo(l.ONE) ? ++e.state: (e.p = null, e.q = null, e.state = 0);
                                    else if (4 === e.state) e.n = e.p.multiply(e.q),
                                        e.n.bitLength() === e.bits ? ++e.state: (e.q = null, e.state = 0);
                                    else if (5 === e.state) {
                                        var h = e.e.modInverse(e.phi);
                                        e.keys = {
                                            privateKey: p.rsa.setPrivateKey(e.n, e.e, h, e.p, e.q, h.mod(e.p1), h.mod(e.q1), e.q.modInverse(e.p)),
                                            publicKey: p.rsa.setPublicKey(e.n, e.e)
                                        }
                                    }
                                    i = +new Date,
                                        c += i - s,
                                        s = i
                                }
                                return null !== e.keys
                            },
                            p.rsa.generateKeyPair = function(t, n, r, a) {
                                if (1 === arguments.length ? "object" == typeof t ? (r = t, t = void 0) : "function" == typeof t && (a = t, t = void 0) : 2 === arguments.length ? "number" == typeof t ? "function" == typeof n ? (a = n, n = void 0) : "number" != typeof n && (r = n, n = void 0) : (r = t, a = n, t = void 0, n = void 0) : 3 === arguments.length && ("number" == typeof n ? "function" == typeof r && (a = r, r = void 0) : (a = r, r = n, n = void 0)), r = r || {},
                                    void 0 === t && (t = r.bits || 2048), void 0 === n && (n = r.e || 65537), !e.disableNativeCode && a && t >= 256 && 16384 >= t && (65537 === n || 3 === n)) {
                                    if (o("generateKey") && o("exportKey")) return window.crypto.subtle.generateKey({
                                            name: "RSASSA-PKCS1-v1_5",
                                            modulusLength: t,
                                            publicExponent: c(n),
                                            hash: {
                                                name: "SHA-256"
                                            }
                                        },
                                        !0, ["sign", "verify"]).then(function(e) {
                                        return window.crypto.subtle.exportKey("pkcs8", e.privateKey)
                                    })["catch"](function(e) {
                                        a(e)
                                    }).then(function(t) {
                                        if (t) {
                                            var n = p.privateKeyFromAsn1(d.fromDer(e.util.createBuffer(t)));
                                            a(null, {
                                                privateKey: n,
                                                publicKey: p.setRsaPublicKey(n.n, n.e)
                                            })
                                        }
                                    });
                                    if (s("generateKey") && s("exportKey")) {
                                        var l = window.msCrypto.subtle.generateKey({
                                                name: "RSASSA-PKCS1-v1_5",
                                                modulusLength: t,
                                                publicExponent: c(n),
                                                hash: {
                                                    name: "SHA-256"
                                                }
                                            },
                                            !0, ["sign", "verify"]);
                                        return l.oncomplete = function(t) {
                                            var n = t.target.result,
                                                i = window.msCrypto.subtle.exportKey("pkcs8", n.privateKey);
                                            i.oncomplete = function(t) {
                                                var n = t.target.result,
                                                    i = p.privateKeyFromAsn1(d.fromDer(e.util.createBuffer(n)));
                                                a(null, {
                                                    privateKey: i,
                                                    publicKey: p.setRsaPublicKey(i.n, i.e)
                                                })
                                            },
                                                i.onerror = function(e) {
                                                    a(e)
                                                }
                                        },
                                            void(l.onerror = function(e) {
                                                a(e)
                                            })
                                    }
                                }
                                var u = p.rsa.createKeyPairGenerationState(t, n, r);
                                return a ? void i(u, r, a) : (p.rsa.stepKeyPairGenerationState(u, 0), u.keys)
                            },
                            p.setRsaPublicKey = p.rsa.setPublicKey = function(i, r) {
                                var a = {
                                    n: i,
                                    e: r
                                };
                                return a.encrypt = function(n, i, r) {
                                    if ("string" == typeof i ? i = i.toUpperCase() : void 0 === i && (i = "RSAES-PKCS1-V1_5"), "RSAES-PKCS1-V1_5" === i) i = {
                                        encode: function(e, n, i) {
                                            return t(e, n, 2).getBytes()
                                        }
                                    };
                                    else if ("RSA-OAEP" === i || "RSAES-OAEP" === i) i = {
                                        encode: function(t, n) {
                                            return e.pkcs1.encode_rsa_oaep(n, t, r)
                                        }
                                    };
                                    else if ( - 1 !== ["RAW", "NONE", "NULL", null].indexOf(i)) i = {
                                        encode: function(e) {
                                            return e
                                        }
                                    };
                                    else if ("string" == typeof i) throw new Error('Unsupported encryption scheme: "' + i + '".');
                                    var o = i.encode(n, a, !0);
                                    return p.rsa.encrypt(o, a, !0)
                                },
                                    a.verify = function(e, t, i) {
                                        "string" == typeof i ? i = i.toUpperCase() : void 0 === i && (i = "RSASSA-PKCS1-V1_5"),
                                            "RSASSA-PKCS1-V1_5" === i ? i = {
                                                verify: function(e, t) {
                                                    t = n(t, a, !0);
                                                    var i = d.fromDer(t);
                                                    return e === i.value[1].value
                                                }
                                            }: ("NONE" === i || "NULL" === i || null === i) && (i = {
                                                verify: function(e, t) {
                                                    return t = n(t, a, !0),
                                                    e === t
                                                }
                                            });
                                        var r = p.rsa.decrypt(t, a, !0, !1);
                                        return i.verify(e, r, a.n.bitLength())
                                    },
                                    a
                            },
                            p.setRsaPrivateKey = p.rsa.setPrivateKey = function(t, i, r, a, o, s, c, l) {
                                var d = {
                                    n: t,
                                    e: i,
                                    d: r,
                                    p: a,
                                    q: o,
                                    dP: s,
                                    dQ: c,
                                    qInv: l
                                };
                                return d.decrypt = function(t, i, r) {
                                    "string" == typeof i ? i = i.toUpperCase() : void 0 === i && (i = "RSAES-PKCS1-V1_5");
                                    var a = p.rsa.decrypt(t, d, !1, !1);
                                    if ("RSAES-PKCS1-V1_5" === i) i = {
                                        decode: n
                                    };
                                    else if ("RSA-OAEP" === i || "RSAES-OAEP" === i) i = {
                                        decode: function(t, n) {
                                            return e.pkcs1.decode_rsa_oaep(n, t, r)
                                        }
                                    };
                                    else {
                                        if ( - 1 === ["RAW", "NONE", "NULL", null].indexOf(i)) throw new Error('Unsupported encryption scheme: "' + i + '".');
                                        i = {
                                            decode: function(e) {
                                                return e
                                            }
                                        }
                                    }
                                    return i.decode(a, d, !1)
                                },
                                    d.sign = function(e, t) {
                                        var n = !1;
                                        "string" == typeof t && (t = t.toUpperCase()),
                                            void 0 === t || "RSASSA-PKCS1-V1_5" === t ? (t = {
                                                encode: y
                                            },
                                                n = 1) : ("NONE" === t || "NULL" === t || null === t) && (t = {
                                                encode: function() {
                                                    return e
                                                }
                                            },
                                                n = 1);
                                        var i = t.encode(e, d.n.bitLength());
                                        return p.rsa.encrypt(i, d, n)
                                    },
                                    d
                            },
                            p.wrapRsaPrivateKey = function(e) {
                                return d.create(d.Class.UNIVERSAL, d.Type.SEQUENCE, !0, [d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, d.integerToDer(0).getBytes()), d.create(d.Class.UNIVERSAL, d.Type.SEQUENCE, !0, [d.create(d.Class.UNIVERSAL, d.Type.OID, !1, d.oidToDer(p.oids.rsaEncryption).getBytes()), d.create(d.Class.UNIVERSAL, d.Type.NULL, !1, "")]), d.create(d.Class.UNIVERSAL, d.Type.OCTETSTRING, !1, d.toDer(e).getBytes())])
                            },
                            p.privateKeyFromAsn1 = function(t) {
                                var n = {},
                                    i = [];
                                if (d.validate(t, f, n, i) && (t = d.fromDer(e.util.createBuffer(n.privateKey))), n = {},
                                        i = [], !d.validate(t, h, n, i)) {
                                    var r = new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");
                                    throw r.errors = i,
                                        r
                                }
                                var a, o, s, c, u, g, m, y;
                                return a = e.util.createBuffer(n.privateKeyModulus).toHex(),
                                    o = e.util.createBuffer(n.privateKeyPublicExponent).toHex(),
                                    s = e.util.createBuffer(n.privateKeyPrivateExponent).toHex(),
                                    c = e.util.createBuffer(n.privateKeyPrime1).toHex(),
                                    u = e.util.createBuffer(n.privateKeyPrime2).toHex(),
                                    g = e.util.createBuffer(n.privateKeyExponent1).toHex(),
                                    m = e.util.createBuffer(n.privateKeyExponent2).toHex(),
                                    y = e.util.createBuffer(n.privateKeyCoefficient).toHex(),
                                    p.setRsaPrivateKey(new l(a, 16), new l(o, 16), new l(s, 16), new l(c, 16), new l(u, 16), new l(g, 16), new l(m, 16), new l(y, 16))
                            },
                            p.privateKeyToAsn1 = p.privateKeyToRSAPrivateKey = function(e) {
                                return d.create(d.Class.UNIVERSAL, d.Type.SEQUENCE, !0, [d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, d.integerToDer(0).getBytes()), d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, r(e.n)), d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, r(e.e)), d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, r(e.d)), d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, r(e.p)), d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, r(e.q)), d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, r(e.dP)), d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, r(e.dQ)), d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, r(e.qInv))])
                            },
                            p.publicKeyFromAsn1 = function(t) {
                                var n = {},
                                    i = [];
                                if (d.validate(t, m, n, i)) {
                                    var r = d.derToOid(n.publicKeyOid);
                                    if (r !== p.oids.rsaEncryption) {
                                        var a = new Error("Cannot read public key. Unknown OID.");
                                        throw a.oid = r,
                                            a
                                    }
                                    t = n.rsaPublicKey
                                }
                                if (i = [], !d.validate(t, g, n, i)) {
                                    var a = new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");
                                    throw a.errors = i,
                                        a
                                }
                                var o = e.util.createBuffer(n.publicKeyModulus).toHex(),
                                    s = e.util.createBuffer(n.publicKeyExponent).toHex();
                                return p.setRsaPublicKey(new l(o, 16), new l(s, 16))
                            },
                            p.publicKeyToAsn1 = p.publicKeyToSubjectPublicKeyInfo = function(e) {
                                return d.create(d.Class.UNIVERSAL, d.Type.SEQUENCE, !0, [d.create(d.Class.UNIVERSAL, d.Type.SEQUENCE, !0, [d.create(d.Class.UNIVERSAL, d.Type.OID, !1, d.oidToDer(p.oids.rsaEncryption).getBytes()), d.create(d.Class.UNIVERSAL, d.Type.NULL, !1, "")]), d.create(d.Class.UNIVERSAL, d.Type.BITSTRING, !1, [p.publicKeyToRSAPublicKey(e)])])
                            },
                            p.publicKeyToRSAPublicKey = function(e) {
                                return d.create(d.Class.UNIVERSAL, d.Type.SEQUENCE, !0, [d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, r(e.n)), d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, r(e.e))])
                            }
                    }
                    var i = "rsa";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/rsa", ["require", "module", "./asn1", "./jsbn", "./oids", "./pkcs1", "./prime", "./random", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(e, t) {
                            return e.start().update(t).digest().getBytes()
                        }
                        if ("undefined" == typeof n) var n = e.jsbn.BigInteger;
                        var i = e.asn1,
                            r = e.pki = e.pki || {};
                        r.pbe = e.pbe = e.pbe || {};
                        var a = r.oids,
                            o = {
                                name: "EncryptedPrivateKeyInfo",
                                tagClass: i.Class.UNIVERSAL,
                                type: i.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "EncryptedPrivateKeyInfo.encryptionAlgorithm",
                                    tagClass: i.Class.UNIVERSAL,
                                    type: i.Type.SEQUENCE,
                                    constructed: !0,
                                    value: [{
                                        name: "AlgorithmIdentifier.algorithm",
                                        tagClass: i.Class.UNIVERSAL,
                                        type: i.Type.OID,
                                        constructed: !1,
                                        capture: "encryptionOid"
                                    },
                                        {
                                            name: "AlgorithmIdentifier.parameters",
                                            tagClass: i.Class.UNIVERSAL,
                                            type: i.Type.SEQUENCE,
                                            constructed: !0,
                                            captureAsn1: "encryptionParams"
                                        }]
                                },
                                    {
                                        name: "EncryptedPrivateKeyInfo.encryptedData",
                                        tagClass: i.Class.UNIVERSAL,
                                        type: i.Type.OCTETSTRING,
                                        constructed: !1,
                                        capture: "encryptedData"
                                    }]
                            },
                            s = {
                                name: "PBES2Algorithms",
                                tagClass: i.Class.UNIVERSAL,
                                type: i.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "PBES2Algorithms.keyDerivationFunc",
                                    tagClass: i.Class.UNIVERSAL,
                                    type: i.Type.SEQUENCE,
                                    constructed: !0,
                                    value: [{
                                        name: "PBES2Algorithms.keyDerivationFunc.oid",
                                        tagClass: i.Class.UNIVERSAL,
                                        type: i.Type.OID,
                                        constructed: !1,
                                        capture: "kdfOid"
                                    },
                                        {
                                            name: "PBES2Algorithms.params",
                                            tagClass: i.Class.UNIVERSAL,
                                            type: i.Type.SEQUENCE,
                                            constructed: !0,
                                            value: [{
                                                name: "PBES2Algorithms.params.salt",
                                                tagClass: i.Class.UNIVERSAL,
                                                type: i.Type.OCTETSTRING,
                                                constructed: !1,
                                                capture: "kdfSalt"
                                            },
                                                {
                                                    name: "PBES2Algorithms.params.iterationCount",
                                                    tagClass: i.Class.UNIVERSAL,
                                                    type: i.Type.INTEGER,
                                                    onstructed: !0,
                                                    capture: "kdfIterationCount"
                                                }]
                                        }]
                                },
                                    {
                                        name: "PBES2Algorithms.encryptionScheme",
                                        tagClass: i.Class.UNIVERSAL,
                                        type: i.Type.SEQUENCE,
                                        constructed: !0,
                                        value: [{
                                            name: "PBES2Algorithms.encryptionScheme.oid",
                                            tagClass: i.Class.UNIVERSAL,
                                            type: i.Type.OID,
                                            constructed: !1,
                                            capture: "encOid"
                                        },
                                            {
                                                name: "PBES2Algorithms.encryptionScheme.iv",
                                                tagClass: i.Class.UNIVERSAL,
                                                type: i.Type.OCTETSTRING,
                                                constructed: !1,
                                                capture: "encIv"
                                            }]
                                    }]
                            },
                            c = {
                                name: "pkcs-12PbeParams",
                                tagClass: i.Class.UNIVERSAL,
                                type: i.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "pkcs-12PbeParams.salt",
                                    tagClass: i.Class.UNIVERSAL,
                                    type: i.Type.OCTETSTRING,
                                    constructed: !1,
                                    capture: "salt"
                                },
                                    {
                                        name: "pkcs-12PbeParams.iterations",
                                        tagClass: i.Class.UNIVERSAL,
                                        type: i.Type.INTEGER,
                                        constructed: !1,
                                        capture: "iterations"
                                    }]
                            };
                        r.encryptPrivateKeyInfo = function(t, n, o) {
                            o = o || {},
                                o.saltSize = o.saltSize || 8,
                                o.count = o.count || 2048,
                                o.algorithm = o.algorithm || "aes128";
                            var s, c, l, d = e.random.getBytesSync(o.saltSize),
                                p = o.count,
                                u = i.integerToDer(p);
                            if (0 === o.algorithm.indexOf("aes") || "des" === o.algorithm) {
                                var f, h, g;
                                switch (o.algorithm) {
                                    case "aes128":
                                        s = 16,
                                            f = 16,
                                            h = a["aes128-CBC"],
                                            g = e.aes.createEncryptionCipher;
                                        break;
                                    case "aes192":
                                        s = 24,
                                            f = 16,
                                            h = a["aes192-CBC"],
                                            g = e.aes.createEncryptionCipher;
                                        break;
                                    case "aes256":
                                        s = 32,
                                            f = 16,
                                            h = a["aes256-CBC"],
                                            g = e.aes.createEncryptionCipher;
                                        break;
                                    case "des":
                                        s = 8,
                                            f = 8,
                                            h = a.desCBC,
                                            g = e.des.createEncryptionCipher;
                                        break;
                                    default:
                                        var m = new Error("Cannot encrypt private key. Unknown encryption algorithm.");
                                        throw m.algorithm = o.algorithm,
                                            m
                                }
                                var y = e.pkcs5.pbkdf2(n, d, p, s),
                                    v = e.random.getBytesSync(f),
                                    C = g(y);
                                C.start(v),
                                    C.update(i.toDer(t)),
                                    C.finish(),
                                    l = C.output.getBytes(),
                                    c = i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(a.pkcs5PBES2).getBytes()), i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(a.pkcs5PBKDF2).getBytes()), i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OCTETSTRING, !1, d), i.create(i.Class.UNIVERSAL, i.Type.INTEGER, !1, u.getBytes())])]), i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(h).getBytes()), i.create(i.Class.UNIVERSAL, i.Type.OCTETSTRING, !1, v)])])])
                            } else {
                                if ("3des" !== o.algorithm) {
                                    var m = new Error("Cannot encrypt private key. Unknown encryption algorithm.");
                                    throw m.algorithm = o.algorithm,
                                        m
                                }
                                s = 24;
                                var S = new e.util.ByteBuffer(d),
                                    y = r.pbe.generatePkcs12Key(n, S, 1, p, s),
                                    v = r.pbe.generatePkcs12Key(n, S, 2, p, s),
                                    C = e.des.createEncryptionCipher(y);
                                C.start(v),
                                    C.update(i.toDer(t)),
                                    C.finish(),
                                    l = C.output.getBytes(),
                                    c = i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(a["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()), i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OCTETSTRING, !1, d), i.create(i.Class.UNIVERSAL, i.Type.INTEGER, !1, u.getBytes())])]);

                            }
                            var _ = i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [c, i.create(i.Class.UNIVERSAL, i.Type.OCTETSTRING, !1, l)]);
                            return _
                        },
                            r.decryptPrivateKeyInfo = function(t, n) {
                                var a = null,
                                    s = {},
                                    c = [];
                                if (!i.validate(t, o, s, c)) {
                                    var l = new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");
                                    throw l.errors = c,
                                        l
                                }
                                var d = i.derToOid(s.encryptionOid),
                                    p = r.pbe.getCipher(d, s.encryptionParams, n),
                                    u = e.util.createBuffer(s.encryptedData);
                                return p.update(u),
                                p.finish() && (a = i.fromDer(p.output)),
                                    a
                            },
                            r.encryptedPrivateKeyToPem = function(t, n) {
                                var r = {
                                    type: "ENCRYPTED PRIVATE KEY",
                                    body: i.toDer(t).getBytes()
                                };
                                return e.pem.encode(r, {
                                    maxline: n
                                })
                            },
                            r.encryptedPrivateKeyFromPem = function(t) {
                                var n = e.pem.decode(t)[0];
                                if ("ENCRYPTED PRIVATE KEY" !== n.type) {
                                    var r = new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');
                                    throw r.headerType = n.type,
                                        r
                                }
                                if (n.procType && "ENCRYPTED" === n.procType.type) throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");
                                return i.fromDer(n.body)
                            },
                            r.encryptRsaPrivateKey = function(t, n, a) {
                                if (a = a || {},
                                        !a.legacy) {
                                    var o = r.wrapRsaPrivateKey(r.privateKeyToAsn1(t));
                                    return o = r.encryptPrivateKeyInfo(o, n, a),
                                        r.encryptedPrivateKeyToPem(o)
                                }
                                var s, c, l, d;
                                switch (a.algorithm) {
                                    case "aes128":
                                        s = "AES-128-CBC",
                                            l = 16,
                                            c = e.random.getBytesSync(16),
                                            d = e.aes.createEncryptionCipher;
                                        break;
                                    case "aes192":
                                        s = "AES-192-CBC",
                                            l = 24,
                                            c = e.random.getBytesSync(16),
                                            d = e.aes.createEncryptionCipher;
                                        break;
                                    case "aes256":
                                        s = "AES-256-CBC",
                                            l = 32,
                                            c = e.random.getBytesSync(16),
                                            d = e.aes.createEncryptionCipher;
                                        break;
                                    case "3des":
                                        s = "DES-EDE3-CBC",
                                            l = 24,
                                            c = e.random.getBytesSync(8),
                                            d = e.des.createEncryptionCipher;
                                        break;
                                    case "des":
                                        s = "DES-CBC",
                                            l = 8,
                                            c = e.random.getBytesSync(8),
                                            d = e.des.createEncryptionCipher;
                                        break;
                                    default:
                                        var p = new Error('Could not encrypt RSA private key; unsupported encryption algorithm "' + a.algorithm + '".');
                                        throw p.algorithm = a.algorithm,
                                            p
                                }
                                var u = e.pbe.opensslDeriveBytes(n, c.substr(0, 8), l),
                                    f = d(u);
                                f.start(c),
                                    f.update(i.toDer(r.privateKeyToAsn1(t))),
                                    f.finish();
                                var h = {
                                    type: "RSA PRIVATE KEY",
                                    procType: {
                                        version: "4",
                                        type: "ENCRYPTED"
                                    },
                                    dekInfo: {
                                        algorithm: s,
                                        parameters: e.util.bytesToHex(c).toUpperCase()
                                    },
                                    body: f.output.getBytes()
                                };
                                return e.pem.encode(h)
                            },
                            r.decryptRsaPrivateKey = function(t, n) {
                                var a = null,
                                    o = e.pem.decode(t)[0];
                                if ("ENCRYPTED PRIVATE KEY" !== o.type && "PRIVATE KEY" !== o.type && "RSA PRIVATE KEY" !== o.type) {
                                    var s = new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');
                                    throw s.headerType = s,
                                        s
                                }
                                if (o.procType && "ENCRYPTED" === o.procType.type) {
                                    var c, l;
                                    switch (o.dekInfo.algorithm) {
                                        case "DES-CBC":
                                            c = 8,
                                                l = e.des.createDecryptionCipher;
                                            break;
                                        case "DES-EDE3-CBC":
                                            c = 24,
                                                l = e.des.createDecryptionCipher;
                                            break;
                                        case "AES-128-CBC":
                                            c = 16,
                                                l = e.aes.createDecryptionCipher;
                                            break;
                                        case "AES-192-CBC":
                                            c = 24,
                                                l = e.aes.createDecryptionCipher;
                                            break;
                                        case "AES-256-CBC":
                                            c = 32,
                                                l = e.aes.createDecryptionCipher;
                                            break;
                                        case "RC2-40-CBC":
                                            c = 5,
                                                l = function(t) {
                                                    return e.rc2.createDecryptionCipher(t, 40)
                                                };
                                            break;
                                        case "RC2-64-CBC":
                                            c = 8,
                                                l = function(t) {
                                                    return e.rc2.createDecryptionCipher(t, 64)
                                                };
                                            break;
                                        case "RC2-128-CBC":
                                            c = 16,
                                                l = function(t) {
                                                    return e.rc2.createDecryptionCipher(t, 128)
                                                };
                                            break;
                                        default:
                                            var s = new Error('Could not decrypt private key; unsupported encryption algorithm "' + o.dekInfo.algorithm + '".');
                                            throw s.algorithm = o.dekInfo.algorithm,
                                                s
                                    }
                                    var d = e.util.hexToBytes(o.dekInfo.parameters),
                                        p = e.pbe.opensslDeriveBytes(n, d.substr(0, 8), c),
                                        u = l(p);
                                    if (u.start(d), u.update(e.util.createBuffer(o.body)), !u.finish()) return a;
                                    a = u.output.getBytes()
                                } else a = o.body;
                                return a = "ENCRYPTED PRIVATE KEY" === o.type ? r.decryptPrivateKeyInfo(i.fromDer(a), n) : i.fromDer(a),
                                null !== a && (a = r.privateKeyFromAsn1(a)),
                                    a
                            },
                            r.pbe.generatePkcs12Key = function(t, n, i, r, a, o) {
                                var s, c; ("undefined" == typeof o || null === o) && (o = e.md.sha1.create());
                                var l = o.digestLength,
                                    d = o.blockLength,
                                    p = new e.util.ByteBuffer,
                                    u = new e.util.ByteBuffer;
                                if (null !== t && void 0 !== t) {
                                    for (c = 0; c < t.length; c++) u.putInt16(t.charCodeAt(c));
                                    u.putInt16(0)
                                }
                                var f = u.length(),
                                    h = n.length(),
                                    g = new e.util.ByteBuffer;
                                g.fillWithByte(i, d);
                                var m = d * Math.ceil(h / d),
                                    y = new e.util.ByteBuffer;
                                for (c = 0; m > c; c++) y.putByte(n.at(c % h));
                                var v = d * Math.ceil(f / d),
                                    C = new e.util.ByteBuffer;
                                for (c = 0; v > c; c++) C.putByte(u.at(c % f));
                                var S = y;
                                S.putBuffer(C);
                                for (var _ = Math.ceil(a / l), b = 1; _ >= b; b++) {
                                    var E = new e.util.ByteBuffer;
                                    E.putBytes(g.bytes()),
                                        E.putBytes(S.bytes());
                                    for (var I = 0; r > I; I++) o.start(),
                                        o.update(E.getBytes()),
                                        E = o.digest();
                                    var A = new e.util.ByteBuffer;
                                    for (c = 0; d > c; c++) A.putByte(E.at(c % l));
                                    var T = Math.ceil(h / d) + Math.ceil(f / d),
                                        k = new e.util.ByteBuffer;
                                    for (s = 0; T > s; s++) {
                                        var w = new e.util.ByteBuffer(S.getBytes(d)),
                                            $ = 511;
                                        for (c = A.length() - 1; c >= 0; c--) $ >>= 8,
                                            $ += A.at(c) + w.at(c),
                                            w.setAt(c, 255 & $);
                                        k.putBuffer(w)
                                    }
                                    S = k,
                                        p.putBuffer(E)
                                }
                                return p.truncate(p.length() - a),
                                    p
                            },
                            r.pbe.getCipher = function(e, t, n) {
                                switch (e) {
                                    case r.oids.pkcs5PBES2:
                                        return r.pbe.getCipherForPBES2(e, t, n);
                                    case r.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:
                                    case r.oids["pbewithSHAAnd40BitRC2-CBC"]:
                                        return r.pbe.getCipherForPKCS12PBE(e, t, n);
                                    default:
                                        var i = new Error("Cannot read encrypted PBE data block. Unsupported OID.");
                                        throw i.oid = e,
                                            i.supportedOids = ["pkcs5PBES2", "pbeWithSHAAnd3-KeyTripleDES-CBC", "pbewithSHAAnd40BitRC2-CBC"],
                                            i
                                }
                            },
                            r.pbe.getCipherForPBES2 = function(t, n, a) {
                                var o = {},
                                    c = [];
                                if (!i.validate(n, s, o, c)) {
                                    var l = new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");
                                    throw l.errors = c,
                                        l
                                }
                                if (t = i.derToOid(o.kdfOid), t !== r.oids.pkcs5PBKDF2) {
                                    var l = new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");
                                    throw l.oid = t,
                                        l.supportedOids = ["pkcs5PBKDF2"],
                                        l
                                }
                                if (t = i.derToOid(o.encOid), t !== r.oids["aes128-CBC"] && t !== r.oids["aes192-CBC"] && t !== r.oids["aes256-CBC"] && t !== r.oids["des-EDE3-CBC"] && t !== r.oids.desCBC) {
                                    var l = new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");
                                    throw l.oid = t,
                                        l.supportedOids = ["aes128-CBC", "aes192-CBC", "aes256-CBC", "des-EDE3-CBC", "desCBC"],
                                        l
                                }
                                var d = o.kdfSalt,
                                    p = e.util.createBuffer(o.kdfIterationCount);
                                p = p.getInt(p.length() << 3);
                                var u, f;
                                switch (r.oids[t]) {
                                    case "aes128-CBC":
                                        u = 16,
                                            f = e.aes.createDecryptionCipher;
                                        break;
                                    case "aes192-CBC":
                                        u = 24,
                                            f = e.aes.createDecryptionCipher;
                                        break;
                                    case "aes256-CBC":
                                        u = 32,
                                            f = e.aes.createDecryptionCipher;
                                        break;
                                    case "des-EDE3-CBC":
                                        u = 24,
                                            f = e.des.createDecryptionCipher;
                                        break;
                                    case "desCBC":
                                        u = 8,
                                            f = e.des.createDecryptionCipher
                                }
                                var h = e.pkcs5.pbkdf2(a, d, p, u),
                                    g = o.encIv,
                                    m = f(h);
                                return m.start(g),
                                    m
                            },
                            r.pbe.getCipherForPKCS12PBE = function(t, n, a) {
                                var o = {},
                                    s = [];
                                if (!i.validate(n, c, o, s)) {
                                    var l = new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");
                                    throw l.errors = s,
                                        l
                                }
                                var d = e.util.createBuffer(o.salt),
                                    p = e.util.createBuffer(o.iterations);
                                p = p.getInt(p.length() << 3);
                                var u, f, h;
                                switch (t) {
                                    case r.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:
                                        u = 24,
                                            f = 8,
                                            h = e.des.startDecrypting;
                                        break;
                                    case r.oids["pbewithSHAAnd40BitRC2-CBC"]:
                                        u = 5,
                                            f = 8,
                                            h = function(t, n) {
                                                var i = e.rc2.createDecryptionCipher(t, 40);
                                                return i.start(n, null),
                                                    i
                                            };
                                        break;
                                    default:
                                        var l = new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");
                                        throw l.oid = t,
                                            l
                                }
                                var g = r.pbe.generatePkcs12Key(a, d, 1, p, u),
                                    m = r.pbe.generatePkcs12Key(a, d, 2, p, f);
                                return h(g, m)
                            },
                            r.pbe.opensslDeriveBytes = function(n, i, r, a) { ("undefined" == typeof a || null === a) && (a = e.md.md5.create()),
                            null === i && (i = "");
                                for (var o = [t(a, n + i)], s = 16, c = 1; r > s; ++c, s += 16) o.push(t(a, o[c - 1] + n + i));
                                return o.join("").substr(0, r)
                            }
                    }
                    var i = "pbe";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/pbe", ["require", "module", "./aes", "./asn1", "./des", "./md", "./oids", "./pem", "./pbkdf2", "./random", "./rc2", "./rsa", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        var t = e.asn1,
                            n = e.pkcs7asn1 = e.pkcs7asn1 || {};
                        e.pkcs7 = e.pkcs7 || {},
                            e.pkcs7.asn1 = n;
                        var i = {
                            name: "ContentInfo",
                            tagClass: t.Class.UNIVERSAL,
                            type: t.Type.SEQUENCE,
                            constructed: !0,
                            value: [{
                                name: "ContentInfo.ContentType",
                                tagClass: t.Class.UNIVERSAL,
                                type: t.Type.OID,
                                constructed: !1,
                                capture: "contentType"
                            },
                                {
                                    name: "ContentInfo.content",
                                    tagClass: t.Class.CONTEXT_SPECIFIC,
                                    type: 0,
                                    constructed: !0,
                                    optional: !0,
                                    captureAsn1: "content"
                                }]
                        };
                        n.contentInfoValidator = i;
                        var r = {
                            name: "EncryptedContentInfo",
                            tagClass: t.Class.UNIVERSAL,
                            type: t.Type.SEQUENCE,
                            constructed: !0,
                            value: [{
                                name: "EncryptedContentInfo.contentType",
                                tagClass: t.Class.UNIVERSAL,
                                type: t.Type.OID,
                                constructed: !1,
                                capture: "contentType"
                            },
                                {
                                    name: "EncryptedContentInfo.contentEncryptionAlgorithm",
                                    tagClass: t.Class.UNIVERSAL,
                                    type: t.Type.SEQUENCE,
                                    constructed: !0,
                                    value: [{
                                        name: "EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",
                                        tagClass: t.Class.UNIVERSAL,
                                        type: t.Type.OID,
                                        constructed: !1,
                                        capture: "encAlgorithm"
                                    },
                                        {
                                            name: "EncryptedContentInfo.contentEncryptionAlgorithm.parameter",
                                            tagClass: t.Class.UNIVERSAL,
                                            captureAsn1: "encParameter"
                                        }]
                                },
                                {
                                    name: "EncryptedContentInfo.encryptedContent",
                                    tagClass: t.Class.CONTEXT_SPECIFIC,
                                    type: 0,
                                    capture: "encryptedContent",
                                    captureAsn1: "encryptedContentAsn1"
                                }]
                        };
                        n.envelopedDataValidator = {
                            name: "EnvelopedData",
                            tagClass: t.Class.UNIVERSAL,
                            type: t.Type.SEQUENCE,
                            constructed: !0,
                            value: [{
                                name: "EnvelopedData.Version",
                                tagClass: t.Class.UNIVERSAL,
                                type: t.Type.INTEGER,
                                constructed: !1,
                                capture: "version"
                            },
                                {
                                    name: "EnvelopedData.RecipientInfos",
                                    tagClass: t.Class.UNIVERSAL,
                                    type: t.Type.SET,
                                    constructed: !0,
                                    captureAsn1: "recipientInfos"
                                }].concat(r)
                        },
                            n.encryptedDataValidator = {
                                name: "EncryptedData",
                                tagClass: t.Class.UNIVERSAL,
                                type: t.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "EncryptedData.Version",
                                    tagClass: t.Class.UNIVERSAL,
                                    type: t.Type.INTEGER,
                                    constructed: !1,
                                    capture: "version"
                                }].concat(r)
                            };
                        var a = {
                            name: "SignerInfo",
                            tagClass: t.Class.UNIVERSAL,
                            type: t.Type.SEQUENCE,
                            constructed: !0,
                            value: [{
                                name: "SignerInfo.version",
                                tagClass: t.Class.UNIVERSAL,
                                type: t.Type.INTEGER,
                                constructed: !1
                            },
                                {
                                    name: "SignerInfo.issuerAndSerialNumber",
                                    tagClass: t.Class.UNIVERSAL,
                                    type: t.Type.SEQUENCE,
                                    constructed: !0,
                                    value: [{
                                        name: "SignerInfo.issuerAndSerialNumber.issuer",
                                        tagClass: t.Class.UNIVERSAL,
                                        type: t.Type.SEQUENCE,
                                        constructed: !0,
                                        captureAsn1: "issuer"
                                    },
                                        {
                                            name: "SignerInfo.issuerAndSerialNumber.serialNumber",
                                            tagClass: t.Class.UNIVERSAL,
                                            type: t.Type.INTEGER,
                                            constructed: !1,
                                            capture: "serial"
                                        }]
                                },
                                {
                                    name: "SignerInfo.digestAlgorithm",
                                    tagClass: t.Class.UNIVERSAL,
                                    type: t.Type.SEQUENCE,
                                    constructed: !0,
                                    value: [{
                                        name: "SignerInfo.digestAlgorithm.algorithm",
                                        tagClass: t.Class.UNIVERSAL,
                                        type: t.Type.OID,
                                        constructed: !1,
                                        capture: "digestAlgorithm"
                                    },
                                        {
                                            name: "SignerInfo.digestAlgorithm.parameter",
                                            tagClass: t.Class.UNIVERSAL,
                                            constructed: !1,
                                            captureAsn1: "digestParameter",
                                            optional: !0
                                        }]
                                },
                                {
                                    name: "SignerInfo.authenticatedAttributes",
                                    tagClass: t.Class.CONTEXT_SPECIFIC,
                                    type: 0,
                                    constructed: !0,
                                    optional: !0,
                                    capture: "authenticatedAttributes"
                                },
                                {
                                    name: "SignerInfo.digestEncryptionAlgorithm",
                                    tagClass: t.Class.UNIVERSAL,
                                    type: t.Type.SEQUENCE,
                                    constructed: !0,
                                    capture: "signatureAlgorithm"
                                },
                                {
                                    name: "SignerInfo.encryptedDigest",
                                    tagClass: t.Class.UNIVERSAL,
                                    type: t.Type.OCTETSTRING,
                                    constructed: !1,
                                    capture: "signature"
                                },
                                {
                                    name: "SignerInfo.unauthenticatedAttributes",
                                    tagClass: t.Class.CONTEXT_SPECIFIC,
                                    type: 1,
                                    constructed: !0,
                                    optional: !0,
                                    capture: "unauthenticatedAttributes"
                                }]
                        };
                        n.signedDataValidator = {
                            name: "SignedData",
                            tagClass: t.Class.UNIVERSAL,
                            type: t.Type.SEQUENCE,
                            constructed: !0,
                            value: [{
                                name: "SignedData.Version",
                                tagClass: t.Class.UNIVERSAL,
                                type: t.Type.INTEGER,
                                constructed: !1,
                                capture: "version"
                            },
                                {
                                    name: "SignedData.DigestAlgorithms",
                                    tagClass: t.Class.UNIVERSAL,
                                    type: t.Type.SET,
                                    constructed: !0,
                                    captureAsn1: "digestAlgorithms"
                                },
                                i, {
                                    name: "SignedData.Certificates",
                                    tagClass: t.Class.CONTEXT_SPECIFIC,
                                    type: 0,
                                    optional: !0,
                                    captureAsn1: "certificates"
                                },
                                {
                                    name: "SignedData.CertificateRevocationLists",
                                    tagClass: t.Class.CONTEXT_SPECIFIC,
                                    type: 1,
                                    optional: !0,
                                    captureAsn1: "crls"
                                },
                                {
                                    name: "SignedData.SignerInfos",
                                    tagClass: t.Class.UNIVERSAL,
                                    type: t.Type.SET,
                                    capture: "signerInfos",
                                    optional: !0,
                                    value: [a]
                                }]
                        },
                            n.recipientInfoValidator = {
                                name: "RecipientInfo",
                                tagClass: t.Class.UNIVERSAL,
                                type: t.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "RecipientInfo.version",
                                    tagClass: t.Class.UNIVERSAL,
                                    type: t.Type.INTEGER,
                                    constructed: !1,
                                    capture: "version"
                                },
                                    {
                                        name: "RecipientInfo.issuerAndSerial",
                                        tagClass: t.Class.UNIVERSAL,
                                        type: t.Type.SEQUENCE,
                                        constructed: !0,
                                        value: [{
                                            name: "RecipientInfo.issuerAndSerial.issuer",
                                            tagClass: t.Class.UNIVERSAL,
                                            type: t.Type.SEQUENCE,
                                            constructed: !0,
                                            captureAsn1: "issuer"
                                        },
                                            {
                                                name: "RecipientInfo.issuerAndSerial.serialNumber",
                                                tagClass: t.Class.UNIVERSAL,
                                                type: t.Type.INTEGER,
                                                constructed: !1,
                                                capture: "serial"
                                            }]
                                    },
                                    {
                                        name: "RecipientInfo.keyEncryptionAlgorithm",
                                        tagClass: t.Class.UNIVERSAL,
                                        type: t.Type.SEQUENCE,
                                        constructed: !0,
                                        value: [{
                                            name: "RecipientInfo.keyEncryptionAlgorithm.algorithm",
                                            tagClass: t.Class.UNIVERSAL,
                                            type: t.Type.OID,
                                            constructed: !1,
                                            capture: "encAlgorithm"
                                        },
                                            {
                                                name: "RecipientInfo.keyEncryptionAlgorithm.parameter",
                                                tagClass: t.Class.UNIVERSAL,
                                                constructed: !1,
                                                captureAsn1: "encParameter"
                                            }]
                                    },
                                    {
                                        name: "RecipientInfo.encryptedKey",
                                        tagClass: t.Class.UNIVERSAL,
                                        type: t.Type.OCTETSTRING,
                                        constructed: !1,
                                        capture: "encKey"
                                    }]
                            }
                    }
                    var i = "pkcs7asn1";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/pkcs7asn1", ["require", "module", "./asn1", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        e.mgf = e.mgf || {};
                        var t = e.mgf.mgf1 = e.mgf1 = e.mgf1 || {};
                        t.create = function(t) {
                            var n = {
                                generate: function(n, i) {
                                    for (var r = new e.util.ByteBuffer,
                                             a = Math.ceil(i / t.digestLength), o = 0; a > o; o++) {
                                        var s = new e.util.ByteBuffer;
                                        s.putInt32(o),
                                            t.start(),
                                            t.update(n + s.getBytes()),
                                            r.putBuffer(t.digest())
                                    }
                                    return r.truncate(r.length() - i),
                                        r.getBytes()
                                }
                            };
                            return n
                        }
                    }
                    var i = "mgf1";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/mgf1", ["require", "module", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        e.mgf = e.mgf || {},
                            e.mgf.mgf1 = e.mgf1
                    }
                    var i = "mgf";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/mgf", ["require", "module", "./mgf1"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        var t = e.pss = e.pss || {};
                        t.create = function(t) {
                            3 === arguments.length && (t = {
                                md: arguments[0],
                                mgf: arguments[1],
                                saltLength: arguments[2]
                            });
                            var n = t.md,
                                i = t.mgf,
                                r = n.digestLength,
                                a = t.salt || null;
                            "string" == typeof a && (a = e.util.createBuffer(a));
                            var o;
                            if ("saltLength" in t) o = t.saltLength;
                            else {
                                if (null === a) throw new Error("Salt length not specified or specific salt not given.");
                                o = a.length()
                            }
                            if (null !== a && a.length() !== o) throw new Error("Given salt length does not match length of given salt.");
                            var s = t.prng || e.random,
                                c = {};
                            return c.encode = function(t, c) {
                                var l, d = c - 1,
                                    p = Math.ceil(d / 8),
                                    u = t.digest().getBytes();
                                if (r + o + 2 > p) throw new Error("Message is too long to encrypt.");
                                var f;
                                f = null === a ? s.getBytesSync(o) : a.bytes();
                                var h = new e.util.ByteBuffer;
                                h.fillWithByte(0, 8),
                                    h.putBytes(u),
                                    h.putBytes(f),
                                    n.start(),
                                    n.update(h.getBytes());
                                var g = n.digest().getBytes(),
                                    m = new e.util.ByteBuffer;
                                m.fillWithByte(0, p - o - r - 2),
                                    m.putByte(1),
                                    m.putBytes(f);
                                var y = m.getBytes(),
                                    v = p - r - 1,
                                    C = i.generate(g, v),
                                    S = "";
                                for (l = 0; v > l; l++) S += String.fromCharCode(y.charCodeAt(l) ^ C.charCodeAt(l));
                                var _ = 65280 >> 8 * p - d & 255;
                                return S = String.fromCharCode(S.charCodeAt(0) & ~_) + S.substr(1),
                                S + g + String.fromCharCode(188)
                            },
                                c.verify = function(t, a, s) {
                                    var c, l = s - 1,
                                        d = Math.ceil(l / 8);
                                    if (a = a.substr( - d), r + o + 2 > d) throw new Error("Inconsistent parameters to PSS signature verification.");
                                    if (188 !== a.charCodeAt(d - 1)) throw new Error("Encoded message does not end in 0xBC.");
                                    var p = d - r - 1,
                                        u = a.substr(0, p),
                                        f = a.substr(p, r),
                                        h = 65280 >> 8 * d - l & 255;
                                    if (0 !== (u.charCodeAt(0) & h)) throw new Error("Bits beyond keysize not zero as expected.");
                                    var g = i.generate(f, p),
                                        m = "";
                                    for (c = 0; p > c; c++) m += String.fromCharCode(u.charCodeAt(c) ^ g.charCodeAt(c));
                                    m = String.fromCharCode(m.charCodeAt(0) & ~h) + m.substr(1);
                                    var y = d - r - o - 2;
                                    for (c = 0; y > c; c++) if (0 !== m.charCodeAt(c)) throw new Error("Leftmost octets not zero as expected");
                                    if (1 !== m.charCodeAt(y)) throw new Error("Inconsistent PSS signature, 0x01 marker not found");
                                    var v = m.substr( - o),
                                        C = new e.util.ByteBuffer;
                                    C.fillWithByte(0, 8),
                                        C.putBytes(t),
                                        C.putBytes(v),
                                        n.start(),
                                        n.update(C.getBytes());
                                    var S = n.digest().getBytes();
                                    return f === S
                                },
                                c
                        }
                    }
                    var i = "pss";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/pss", ["require", "module", "./random", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(e, t) {
                            "string" == typeof t && (t = {
                                shortName: t
                            });
                            for (var n, i = null,
                                     r = 0; null === i && r < e.attributes.length; ++r) n = e.attributes[r],
                                t.type && t.type === n.type ? i = n: t.name && t.name === n.name ? i = n: t.shortName && t.shortName === n.shortName && (i = n);
                            return i
                        }
                        function n(t) {
                            for (var n, i, r = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, []), a = t.attributes, o = 0; o < a.length; ++o) {
                                n = a[o];
                                var c = n.value,
                                    l = s.Type.PRINTABLESTRING;
                                "valueTagClass" in n && (l = n.valueTagClass, l === s.Type.UTF8 && (c = e.util.encodeUtf8(c))),
                                    i = s.create(s.Class.UNIVERSAL, s.Type.SET, !0, [s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(n.type).getBytes()), s.create(s.Class.UNIVERSAL, l, !1, c)])]),
                                    r.value.push(i)
                            }
                            return r
                        }
                        function i(e) {
                            for (var t, n = 0; n < e.length; ++n) {
                                if (t = e[n], "undefined" == typeof t.name && (t.type && t.type in c.oids ? t.name = c.oids[t.type] : t.shortName && t.shortName in d && (t.name = c.oids[d[t.shortName]])), "undefined" == typeof t.type) {
                                    if (! (t.name && t.name in c.oids)) {
                                        var i = new Error("Attribute type not specified.");
                                        throw i.attribute = t,
                                            i
                                    }
                                    t.type = c.oids[t.name]
                                }
                                if ("undefined" == typeof t.shortName && t.name && t.name in d && (t.shortName = d[t.name]), t.type === l.extensionRequest && (t.valueConstructed = !0, t.valueTagClass = s.Type.SEQUENCE, !t.value && t.extensions)) {
                                    t.value = [];
                                    for (var a = 0; a < t.extensions.length; ++a) t.value.push(c.certificateExtensionToAsn1(r(t.extensions[a])))
                                }
                                if ("undefined" == typeof t.value) {
                                    var i = new Error("Attribute value not specified.");
                                    throw i.attribute = t,
                                        i
                                }
                            }
                        }
                        function r(t, i) {
                            if (i = i || {},
                                "undefined" == typeof t.name && t.id && t.id in c.oids && (t.name = c.oids[t.id]), "undefined" == typeof t.id) {
                                if (! (t.name && t.name in c.oids)) {
                                    var r = new Error("Extension ID not specified.");
                                    throw r.extension = t,
                                        r
                                }
                                t.id = c.oids[t.name]
                            }
                            if ("undefined" != typeof t.value) return t;
                            if ("keyUsage" === t.name) {
                                var a = 0,
                                    o = 0,
                                    d = 0;
                                t.digitalSignature && (o |= 128, a = 7),
                                t.nonRepudiation && (o |= 64, a = 6),
                                t.keyEncipherment && (o |= 32, a = 5),
                                t.dataEncipherment && (o |= 16, a = 4),
                                t.keyAgreement && (o |= 8, a = 3),
                                t.keyCertSign && (o |= 4, a = 2),
                                t.cRLSign && (o |= 2, a = 1),
                                t.encipherOnly && (o |= 1, a = 0),
                                t.decipherOnly && (d |= 128, a = 7);
                                var p = String.fromCharCode(a);
                                0 !== d ? p += String.fromCharCode(o) + String.fromCharCode(d) : 0 !== o && (p += String.fromCharCode(o)),
                                    t.value = s.create(s.Class.UNIVERSAL, s.Type.BITSTRING, !1, p)
                            } else if ("basicConstraints" === t.name) t.value = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, []),
                            t.cA && t.value.value.push(s.create(s.Class.UNIVERSAL, s.Type.BOOLEAN, !1, String.fromCharCode(255))),
                            "pathLenConstraint" in t && t.value.value.push(s.create(s.Class.UNIVERSAL, s.Type.INTEGER, !1, s.integerToDer(t.pathLenConstraint).getBytes()));
                            else if ("extKeyUsage" === t.name) {
                                t.value = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, []);
                                var u = t.value.value;
                                for (var f in t) t[f] === !0 && (f in l ? u.push(s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(l[f]).getBytes())) : -1 !== f.indexOf(".") && u.push(s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(f).getBytes())))
                            } else if ("nsCertType" === t.name) {
                                var a = 0,
                                    o = 0;
                                t.client && (o |= 128, a = 7),
                                t.server && (o |= 64, a = 6),
                                t.email && (o |= 32, a = 5),
                                t.objsign && (o |= 16, a = 4),
                                t.reserved && (o |= 8, a = 3),
                                t.sslCA && (o |= 4, a = 2),
                                t.emailCA && (o |= 2, a = 1),
                                t.objCA && (o |= 1, a = 0);
                                var p = String.fromCharCode(a);
                                0 !== o && (p += String.fromCharCode(o)),
                                    t.value = s.create(s.Class.UNIVERSAL, s.Type.BITSTRING, !1, p)
                            } else if ("subjectAltName" === t.name || "issuerAltName" === t.name) {
                                t.value = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, []);
                                for (var h, g = 0; g < t.altNames.length; ++g) {
                                    h = t.altNames[g];
                                    var p = h.value;
                                    if (7 === h.type && h.ip) {
                                        if (p = e.util.bytesFromIP(h.ip), null === p) {
                                            var r = new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');
                                            throw r.extension = t,
                                                r
                                        }
                                    } else 8 === h.type && (p = s.oidToDer(h.oid ? s.oidToDer(h.oid) : p));
                                    t.value.value.push(s.create(s.Class.CONTEXT_SPECIFIC, h.type, !1, p))
                                }
                            } else if ("subjectKeyIdentifier" === t.name && i.cert) {
                                var m = i.cert.generateSubjectKeyIdentifier();
                                t.subjectKeyIdentifier = m.toHex(),
                                    t.value = s.create(s.Class.UNIVERSAL, s.Type.OCTETSTRING, !1, m.getBytes())
                            } else if ("authorityKeyIdentifier" === t.name && i.cert) {
                                t.value = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, []);
                                var u = t.value.value;
                                if (t.keyIdentifier) {
                                    var y = t.keyIdentifier === !0 ? i.cert.generateSubjectKeyIdentifier().getBytes() : t.keyIdentifier;
                                    u.push(s.create(s.Class.CONTEXT_SPECIFIC, 0, !1, y))
                                }
                                if (t.authorityCertIssuer) {
                                    var v = [s.create(s.Class.CONTEXT_SPECIFIC, 4, !0, [n(t.authorityCertIssuer === !0 ? i.cert.issuer: t.authorityCertIssuer)])];
                                    u.push(s.create(s.Class.CONTEXT_SPECIFIC, 1, !0, v))
                                }
                                if (t.serialNumber) {
                                    var C = e.util.hexToBytes(t.serialNumber === !0 ? i.cert.serialNumber: t.serialNumber);
                                    u.push(s.create(s.Class.CONTEXT_SPECIFIC, 2, !1, C))
                                }
                            } else if ("cRLDistributionPoints" === t.name) {
                                t.value = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, []);
                                for (var h, u = t.value.value,
                                         S = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, []), _ = s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, []), g = 0; g < t.altNames.length; ++g) {
                                    h = t.altNames[g];
                                    var p = h.value;
                                    if (7 === h.type && h.ip) {
                                        if (p = e.util.bytesFromIP(h.ip), null === p) {
                                            var r = new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');
                                            throw r.extension = t,
                                                r
                                        }
                                    } else 8 === h.type && (p = s.oidToDer(h.oid ? s.oidToDer(h.oid) : p));
                                    _.value.push(s.create(s.Class.CONTEXT_SPECIFIC, h.type, !1, p))
                                }
                                S.value.push(s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, [_])),
                                    u.push(S)
                            }
                            if ("undefined" == typeof t.value) {
                                var r = new Error("Extension value not specified.");
                                throw r.extension = t,
                                    r
                            }
                            return t
                        }
                        function a(e, t) {
                            switch (e) {
                                case l["RSASSA-PSS"]:
                                    var n = [];
                                    return void 0 !== t.hash.algorithmOid && n.push(s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, [s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(t.hash.algorithmOid).getBytes()), s.create(s.Class.UNIVERSAL, s.Type.NULL, !1, "")])])),
                                    void 0 !== t.mgf.algorithmOid && n.push(s.create(s.Class.CONTEXT_SPECIFIC, 1, !0, [s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(t.mgf.algorithmOid).getBytes()), s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(t.mgf.hash.algorithmOid).getBytes()), s.create(s.Class.UNIVERSAL, s.Type.NULL, !1, "")])])])),
                                    void 0 !== t.saltLength && n.push(s.create(s.Class.CONTEXT_SPECIFIC, 2, !0, [s.create(s.Class.UNIVERSAL, s.Type.INTEGER, !1, s.integerToDer(t.saltLength).getBytes())])),
                                        s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, n);
                                default:
                                    return s.create(s.Class.UNIVERSAL, s.Type.NULL, !1, "")
                            }
                        }
                        function o(t) {
                            var n = s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, []);
                            if (0 === t.attributes.length) return n;
                            for (var i = t.attributes,
                                     r = 0; r < i.length; ++r) {
                                var a = i[r],
                                    o = a.value,
                                    c = s.Type.UTF8;
                                "valueTagClass" in a && (c = a.valueTagClass),
                                c === s.Type.UTF8 && (o = e.util.encodeUtf8(o));
                                var l = !1;
                                "valueConstructed" in a && (l = a.valueConstructed);
                                var d = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(a.type).getBytes()), s.create(s.Class.UNIVERSAL, s.Type.SET, !0, [s.create(s.Class.UNIVERSAL, c, l, o)])]);
                                n.value.push(d)
                            }
                            return n
                        }
                        var s = e.asn1,
                            c = e.pki = e.pki || {},
                            l = c.oids,
                            d = {};
                        d.CN = l.commonName,
                            d.commonName = "CN",
                            d.C = l.countryName,
                            d.countryName = "C",
                            d.L = l.localityName,
                            d.localityName = "L",
                            d.ST = l.stateOrProvinceName,
                            d.stateOrProvinceName = "ST",
                            d.O = l.organizationName,
                            d.organizationName = "O",
                            d.OU = l.organizationalUnitName,
                            d.organizationalUnitName = "OU",
                            d.E = l.emailAddress,
                            d.emailAddress = "E";
                        var p = e.pki.rsa.publicKeyValidator,
                            u = {
                                name: "Certificate",
                                tagClass: s.Class.UNIVERSAL,
                                type: s.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "Certificate.TBSCertificate",
                                    tagClass: s.Class.UNIVERSAL,
                                    type: s.Type.SEQUENCE,
                                    constructed: !0,
                                    captureAsn1: "tbsCertificate",
                                    value: [{
                                        name: "Certificate.TBSCertificate.version",
                                        tagClass: s.Class.CONTEXT_SPECIFIC,
                                        type: 0,
                                        constructed: !0,
                                        optional: !0,
                                        value: [{
                                            name: "Certificate.TBSCertificate.version.integer",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Type.INTEGER,
                                            constructed: !1,
                                            capture: "certVersion"
                                        }]
                                    },
                                        {
                                            name: "Certificate.TBSCertificate.serialNumber",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Type.INTEGER,
                                            constructed: !1,
                                            capture: "certSerialNumber"
                                        },
                                        {
                                            name: "Certificate.TBSCertificate.signature",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Type.SEQUENCE,
                                            constructed: !0,
                                            value: [{
                                                name: "Certificate.TBSCertificate.signature.algorithm",
                                                tagClass: s.Class.UNIVERSAL,
                                                type: s.Type.OID,
                                                constructed: !1,
                                                capture: "certinfoSignatureOid"
                                            },
                                                {
                                                    name: "Certificate.TBSCertificate.signature.parameters",
                                                    tagClass: s.Class.UNIVERSAL,
                                                    optional: !0,
                                                    captureAsn1: "certinfoSignatureParams"
                                                }]
                                        },
                                        {
                                            name: "Certificate.TBSCertificate.issuer",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Type.SEQUENCE,
                                            constructed: !0,
                                            captureAsn1: "certIssuer"
                                        },
                                        {
                                            name: "Certificate.TBSCertificate.validity",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Type.SEQUENCE,
                                            constructed: !0,
                                            value: [{
                                                name: "Certificate.TBSCertificate.validity.notBefore (utc)",
                                                tagClass: s.Class.UNIVERSAL,
                                                type: s.Type.UTCTIME,
                                                constructed: !1,
                                                optional: !0,
                                                capture: "certValidity1UTCTime"
                                            },
                                                {
                                                    name: "Certificate.TBSCertificate.validity.notBefore (generalized)",
                                                    tagClass: s.Class.UNIVERSAL,
                                                    type: s.Type.GENERALIZEDTIME,
                                                    constructed: !1,
                                                    optional: !0,
                                                    capture: "certValidity2GeneralizedTime"
                                                },
                                                {
                                                    name: "Certificate.TBSCertificate.validity.notAfter (utc)",
                                                    tagClass: s.Class.UNIVERSAL,
                                                    type: s.Type.UTCTIME,
                                                    constructed: !1,
                                                    optional: !0,
                                                    capture: "certValidity3UTCTime"
                                                },
                                                {
                                                    name: "Certificate.TBSCertificate.validity.notAfter (generalized)",
                                                    tagClass: s.Class.UNIVERSAL,
                                                    type: s.Type.GENERALIZEDTIME,
                                                    constructed: !1,
                                                    optional: !0,
                                                    capture: "certValidity4GeneralizedTime"
                                                }]
                                        },
                                        {
                                            name: "Certificate.TBSCertificate.subject",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Type.SEQUENCE,
                                            constructed: !0,
                                            captureAsn1: "certSubject"
                                        },
                                        p, {
                                            name: "Certificate.TBSCertificate.issuerUniqueID",
                                            tagClass: s.Class.CONTEXT_SPECIFIC,
                                            type: 1,
                                            constructed: !0,
                                            optional: !0,
                                            value: [{
                                                name: "Certificate.TBSCertificate.issuerUniqueID.id",
                                                tagClass: s.Class.UNIVERSAL,
                                                type: s.Type.BITSTRING,
                                                constructed: !1,
                                                capture: "certIssuerUniqueId"
                                            }]
                                        },
                                        {
                                            name: "Certificate.TBSCertificate.subjectUniqueID",
                                            tagClass: s.Class.CONTEXT_SPECIFIC,
                                            type: 2,
                                            constructed: !0,
                                            optional: !0,
                                            value: [{
                                                name: "Certificate.TBSCertificate.subjectUniqueID.id",
                                                tagClass: s.Class.UNIVERSAL,
                                                type: s.Type.BITSTRING,
                                                constructed: !1,
                                                capture: "certSubjectUniqueId"
                                            }]
                                        },
                                        {
                                            name: "Certificate.TBSCertificate.extensions",
                                            tagClass: s.Class.CONTEXT_SPECIFIC,
                                            type: 3,
                                            constructed: !0,
                                            captureAsn1: "certExtensions",
                                            optional: !0
                                        }]
                                },
                                    {
                                        name: "Certificate.signatureAlgorithm",
                                        tagClass: s.Class.UNIVERSAL,
                                        type: s.Type.SEQUENCE,
                                        constructed: !0,
                                        value: [{
                                            name: "Certificate.signatureAlgorithm.algorithm",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Type.OID,
                                            constructed: !1,
                                            capture: "certSignatureOid"
                                        },
                                            {
                                                name: "Certificate.TBSCertificate.signature.parameters",
                                                tagClass: s.Class.UNIVERSAL,
                                                optional: !0,
                                                captureAsn1: "certSignatureParams"
                                            }]
                                    },
                                    {
                                        name: "Certificate.signatureValue",
                                        tagClass: s.Class.UNIVERSAL,
                                        type: s.Type.BITSTRING,
                                        constructed: !1,
                                        capture: "certSignature"
                                    }]
                            },
                            f = {
                                name: "rsapss",
                                tagClass: s.Class.UNIVERSAL,
                                type: s.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "rsapss.hashAlgorithm",
                                    tagClass: s.Class.CONTEXT_SPECIFIC,
                                    type: 0,
                                    constructed: !0,
                                    value: [{
                                        name: "rsapss.hashAlgorithm.AlgorithmIdentifier",
                                        tagClass: s.Class.UNIVERSAL,
                                        type: s.Class.SEQUENCE,
                                        constructed: !0,
                                        optional: !0,
                                        value: [{
                                            name: "rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Type.OID,
                                            constructed: !1,
                                            capture: "hashOid"
                                        }]
                                    }]
                                },
                                    {
                                        name: "rsapss.maskGenAlgorithm",
                                        tagClass: s.Class.CONTEXT_SPECIFIC,
                                        type: 1,
                                        constructed: !0,
                                        value: [{
                                            name: "rsapss.maskGenAlgorithm.AlgorithmIdentifier",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Class.SEQUENCE,
                                            constructed: !0,
                                            optional: !0,
                                            value: [{
                                                name: "rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",
                                                tagClass: s.Class.UNIVERSAL,
                                                type: s.Type.OID,
                                                constructed: !1,
                                                capture: "maskGenOid"
                                            },
                                                {
                                                    name: "rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",
                                                    tagClass: s.Class.UNIVERSAL,
                                                    type: s.Type.SEQUENCE,
                                                    constructed: !0,
                                                    value: [{
                                                        name: "rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",
                                                        tagClass: s.Class.UNIVERSAL,
                                                        type: s.Type.OID,
                                                        constructed: !1,
                                                        capture: "maskGenHashOid"
                                                    }]
                                                }]
                                        }]
                                    },
                                    {
                                        name: "rsapss.saltLength",
                                        tagClass: s.Class.CONTEXT_SPECIFIC,
                                        type: 2,
                                        optional: !0,
                                        value: [{
                                            name: "rsapss.saltLength.saltLength",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Class.INTEGER,
                                            constructed: !1,
                                            capture: "saltLength"
                                        }]
                                    },
                                    {
                                        name: "rsapss.trailerField",
                                        tagClass: s.Class.CONTEXT_SPECIFIC,
                                        type: 3,
                                        optional: !0,
                                        value: [{
                                            name: "rsapss.trailer.trailer",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Class.INTEGER,
                                            constructed: !1,
                                            capture: "trailer"
                                        }]
                                    }]
                            },
                            h = {
                                name: "CertificationRequestInfo",
                                tagClass: s.Class.UNIVERSAL,
                                type: s.Type.SEQUENCE,
                                constructed: !0,
                                captureAsn1: "certificationRequestInfo",
                                value: [{
                                    name: "CertificationRequestInfo.integer",
                                    tagClass: s.Class.UNIVERSAL,
                                    type: s.Type.INTEGER,
                                    constructed: !1,
                                    capture: "certificationRequestInfoVersion"
                                },
                                    {
                                        name: "CertificationRequestInfo.subject",
                                        tagClass: s.Class.UNIVERSAL,
                                        type: s.Type.SEQUENCE,
                                        constructed: !0,
                                        captureAsn1: "certificationRequestInfoSubject"
                                    },
                                    p, {
                                        name: "CertificationRequestInfo.attributes",
                                        tagClass: s.Class.CONTEXT_SPECIFIC,
                                        type: 0,
                                        constructed: !0,
                                        optional: !0,
                                        capture: "certificationRequestInfoAttributes",
                                        value: [{
                                            name: "CertificationRequestInfo.attributes",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Type.SEQUENCE,
                                            constructed: !0,
                                            value: [{
                                                name: "CertificationRequestInfo.attributes.type",
                                                tagClass: s.Class.UNIVERSAL,
                                                type: s.Type.OID,
                                                constructed: !1
                                            },
                                                {
                                                    name: "CertificationRequestInfo.attributes.value",
                                                    tagClass: s.Class.UNIVERSAL,
                                                    type: s.Type.SET,
                                                    constructed: !0
                                                }]
                                        }]
                                    }]
                            },
                            g = {
                                name: "CertificationRequest",
                                tagClass: s.Class.UNIVERSAL,
                                type: s.Type.SEQUENCE,
                                constructed: !0,
                                captureAsn1: "csr",
                                value: [h, {
                                    name: "CertificationRequest.signatureAlgorithm",
                                    tagClass: s.Class.UNIVERSAL,
                                    type: s.Type.SEQUENCE,
                                    constructed: !0,
                                    value: [{
                                        name: "CertificationRequest.signatureAlgorithm.algorithm",
                                        tagClass: s.Class.UNIVERSAL,
                                        type: s.Type.OID,
                                        constructed: !1,
                                        capture: "csrSignatureOid"
                                    },
                                        {
                                            name: "CertificationRequest.signatureAlgorithm.parameters",
                                            tagClass: s.Class.UNIVERSAL,
                                            optional: !0,
                                            captureAsn1: "csrSignatureParams"
                                        }]
                                },
                                    {
                                        name: "CertificationRequest.signature",
                                        tagClass: s.Class.UNIVERSAL,
                                        type: s.Type.BITSTRING,
                                        constructed: !1,
                                        capture: "csrSignature"
                                    }]
                            };
                        c.RDNAttributesAsArray = function(e, t) {
                            for (var n, i, r, a = [], o = 0; o < e.value.length; ++o) {
                                n = e.value[o];
                                for (var c = 0; c < n.value.length; ++c) r = {},
                                    i = n.value[c],
                                    r.type = s.derToOid(i.value[0].value),
                                    r.value = i.value[1].value,
                                    r.valueTagClass = i.value[1].type,
                                r.type in l && (r.name = l[r.type], r.name in d && (r.shortName = d[r.name])),
                                t && (t.update(r.type), t.update(r.value)),
                                    a.push(r)
                            }
                            return a
                        },
                            c.CRIAttributesAsArray = function(e) {
                                for (var t = [], n = 0; n < e.length; ++n) for (var i = e[n], r = s.derToOid(i.value[0].value), a = i.value[1].value, o = 0; o < a.length; ++o) {
                                    var p = {};
                                    if (p.type = r, p.value = a[o].value, p.valueTagClass = a[o].type, p.type in l && (p.name = l[p.type], p.name in d && (p.shortName = d[p.name])), p.type === l.extensionRequest) {
                                        p.extensions = [];
                                        for (var u = 0; u < p.value.length; ++u) p.extensions.push(c.certificateExtensionFromAsn1(p.value[u]))
                                    }
                                    t.push(p)
                                }
                                return t
                            };
                        var m = function(e, t, n) {
                            var i = {};
                            if (e !== l["RSASSA-PSS"]) return i;
                            n && (i = {
                                hash: {
                                    algorithmOid: l.sha1
                                },
                                mgf: {
                                    algorithmOid: l.mgf1,
                                    hash: {
                                        algorithmOid: l.sha1
                                    }
                                },
                                saltLength: 20
                            });
                            var r = {},
                                a = [];
                            if (!s.validate(t, f, r, a)) {
                                var o = new Error("Cannot read RSASSA-PSS parameter block.");
                                throw o.errors = a,
                                    o
                            }
                            return void 0 !== r.hashOid && (i.hash = i.hash || {},
                                i.hash.algorithmOid = s.derToOid(r.hashOid)),
                            void 0 !== r.maskGenOid && (i.mgf = i.mgf || {},
                                i.mgf.algorithmOid = s.derToOid(r.maskGenOid), i.mgf.hash = i.mgf.hash || {},
                                i.mgf.hash.algorithmOid = s.derToOid(r.maskGenHashOid)),
                            void 0 !== r.saltLength && (i.saltLength = r.saltLength.charCodeAt(0)),
                                i
                        };
                        c.certificateFromPem = function(t, n, i) {
                            var r = e.pem.decode(t)[0];
                            if ("CERTIFICATE" !== r.type && "X509 CERTIFICATE" !== r.type && "TRUSTED CERTIFICATE" !== r.type) {
                                var a = new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');
                                throw a.headerType = r.type,
                                    a
                            }
                            if (r.procType && "ENCRYPTED" === r.procType.type) throw new Error("Could not convert certificate from PEM; PEM is encrypted.");
                            var o = s.fromDer(r.body, i);
                            return c.certificateFromAsn1(o, n)
                        },
                            c.certificateToPem = function(t, n) {
                                var i = {
                                    type: "CERTIFICATE",
                                    body: s.toDer(c.certificateToAsn1(t)).getBytes()
                                };
                                return e.pem.encode(i, {
                                    maxline: n
                                })
                            },
                            c.publicKeyFromPem = function(t) {
                                var n = e.pem.decode(t)[0];
                                if ("PUBLIC KEY" !== n.type && "RSA PUBLIC KEY" !== n.type) {
                                    var i = new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');
                                    throw i.headerType = n.type,
                                        i
                                }
                                if (n.procType && "ENCRYPTED" === n.procType.type) throw new Error("Could not convert public key from PEM; PEM is encrypted.");
                                var r = s.fromDer(n.body);
                                return c.publicKeyFromAsn1(r)
                            },
                            c.publicKeyToPem = function(t, n) {
                                var i = {
                                    type: "PUBLIC KEY",
                                    body: s.toDer(c.publicKeyToAsn1(t)).getBytes()
                                };
                                return e.pem.encode(i, {
                                    maxline: n
                                })
                            },
                            c.publicKeyToRSAPublicKeyPem = function(t, n) {
                                var i = {
                                    type: "RSA PUBLIC KEY",
                                    body: s.toDer(c.publicKeyToRSAPublicKey(t)).getBytes()
                                };
                                return e.pem.encode(i, {
                                    maxline: n
                                })
                            },
                            c.getPublicKeyFingerprint = function(t, n) {
                                n = n || {};
                                var i, r = n.md || e.md.sha1.create(),
                                    a = n.type || "RSAPublicKey";
                                switch (a) {
                                    case "RSAPublicKey":
                                        i = s.toDer(c.publicKeyToRSAPublicKey(t)).getBytes();
                                        break;
                                    case "SubjectPublicKeyInfo":
                                        i = s.toDer(c.publicKeyToAsn1(t)).getBytes();
                                        break;
                                    default:
                                        throw new Error('Unknown fingerprint type "' + n.type + '".')
                                }
                                r.start(),
                                    r.update(i);
                                var o = r.digest();
                                if ("hex" === n.encoding) {
                                    var l = o.toHex();
                                    return n.delimiter ? l.match(/.{2}/g).join(n.delimiter) : l
                                }
                                if ("binary" === n.encoding) return o.getBytes();
                                if (n.encoding) throw new Error('Unknown encoding "' + n.encoding + '".');
                                return o
                            },
                            c.certificationRequestFromPem = function(t, n, i) {
                                var r = e.pem.decode(t)[0];
                                if ("CERTIFICATE REQUEST" !== r.type) {
                                    var a = new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');
                                    throw a.headerType = r.type,
                                        a
                                }
                                if (r.procType && "ENCRYPTED" === r.procType.type) throw new Error("Could not convert certification request from PEM; PEM is encrypted.");
                                var o = s.fromDer(r.body, i);
                                return c.certificationRequestFromAsn1(o, n)
                            },
                            c.certificationRequestToPem = function(t, n) {
                                var i = {
                                    type: "CERTIFICATE REQUEST",
                                    body: s.toDer(c.certificationRequestToAsn1(t)).getBytes()
                                };
                                return e.pem.encode(i, {
                                    maxline: n
                                })
                            },
                            c.createCertificate = function() {
                                var n = {};
                                return n.version = 2,
                                    n.serialNumber = "00",
                                    n.signatureOid = null,
                                    n.signature = null,
                                    n.siginfo = {},
                                    n.siginfo.algorithmOid = null,
                                    n.validity = {},
                                    n.validity.notBefore = new Date,
                                    n.validity.notAfter = new Date,
                                    n.issuer = {},
                                    n.issuer.getField = function(e) {
                                        return t(n.issuer, e)
                                    },
                                    n.issuer.addField = function(e) {
                                        i([e]),
                                            n.issuer.attributes.push(e)
                                    },
                                    n.issuer.attributes = [],
                                    n.issuer.hash = null,
                                    n.subject = {},
                                    n.subject.getField = function(e) {
                                        return t(n.subject, e)
                                    },
                                    n.subject.addField = function(e) {
                                        i([e]),
                                            n.subject.attributes.push(e)
                                    },
                                    n.subject.attributes = [],
                                    n.subject.hash = null,
                                    n.extensions = [],
                                    n.publicKey = null,
                                    n.md = null,
                                    n.setSubject = function(e, t) {
                                        i(e),
                                            n.subject.attributes = e,
                                            delete n.subject.uniqueId,
                                        t && (n.subject.uniqueId = t),
                                            n.subject.hash = null
                                    },
                                    n.setIssuer = function(e, t) {
                                        i(e),
                                            n.issuer.attributes = e,
                                            delete n.issuer.uniqueId,
                                        t && (n.issuer.uniqueId = t),
                                            n.issuer.hash = null
                                    },
                                    n.setExtensions = function(e) {
                                        for (var t = 0; t < e.length; ++t) r(e[t], {
                                            cert: n
                                        });
                                        n.extensions = e
                                    },
                                    n.getExtension = function(e) {
                                        "string" == typeof e && (e = {
                                            name: e
                                        });
                                        for (var t, i = null,
                                                 r = 0; null === i && r < n.extensions.length; ++r) t = n.extensions[r],
                                            e.id && t.id === e.id ? i = t: e.name && t.name === e.name && (i = t);
                                        return i
                                    },
                                    n.sign = function(t, i) {
                                        n.md = i || e.md.sha1.create();
                                        var r = l[n.md.algorithm + "WithRSAEncryption"];
                                        if (!r) {
                                            var a = new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");
                                            throw a.algorithm = n.md.algorithm,
                                                a
                                        }
                                        n.signatureOid = n.siginfo.algorithmOid = r,
                                            n.tbsCertificate = c.getTBSCertificate(n);
                                        var o = s.toDer(n.tbsCertificate);
                                        n.md.update(o.getBytes()),
                                            n.signature = t.sign(n.md)
                                    },
                                    n.verify = function(t) {
                                        var i = !1;
                                        if (!n.issued(t)) {
                                            var r = t.issuer,
                                                a = n.subject,
                                                o = new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");
                                            throw o.expectedIssuer = r.attributes,
                                                o.actualIssuer = a.attributes,
                                                o
                                        }
                                        var d = t.md;
                                        if (null === d) {
                                            if (t.signatureOid in l) {
                                                var p = l[t.signatureOid];
                                                switch (p) {
                                                    case "sha1WithRSAEncryption":
                                                        d = e.md.sha1.create();
                                                        break;
                                                    case "md5WithRSAEncryption":
                                                        d = e.md.md5.create();
                                                        break;
                                                    case "sha256WithRSAEncryption":
                                                        d = e.md.sha256.create();
                                                        break;
                                                    case "sha512WithRSAEncryption":
                                                        d = e.md.sha512.create();
                                                        break;
                                                    case "RSASSA-PSS":
                                                        d = e.md.sha256.create()
                                                }
                                            }
                                            if (null === d) {
                                                var o = new Error("Could not compute certificate digest. Unknown signature OID.");
                                                throw o.signatureOid = t.signatureOid,
                                                    o
                                            }
                                            var u = t.tbsCertificate || c.getTBSCertificate(t),
                                                f = s.toDer(u);
                                            d.update(f.getBytes())
                                        }
                                        if (null !== d) {
                                            var h;
                                            switch (t.signatureOid) {
                                                case l.sha1WithRSAEncryption:
                                                    h = void 0;
                                                    break;
                                                case l["RSASSA-PSS"]:
                                                    var g, m;
                                                    if (g = l[t.signatureParameters.mgf.hash.algorithmOid], void 0 === g || void 0 === e.md[g]) {
                                                        var o = new Error("Unsupported MGF hash function.");
                                                        throw o.oid = t.signatureParameters.mgf.hash.algorithmOid,
                                                            o.name = g,
                                                            o
                                                    }
                                                    if (m = l[t.signatureParameters.mgf.algorithmOid], void 0 === m || void 0 === e.mgf[m]) {
                                                        var o = new Error("Unsupported MGF function.");
                                                        throw o.oid = t.signatureParameters.mgf.algorithmOid,
                                                            o.name = m,
                                                            o
                                                    }
                                                    if (m = e.mgf[m].create(e.md[g].create()), g = l[t.signatureParameters.hash.algorithmOid], void 0 === g || void 0 === e.md[g]) throw {
                                                        message: "Unsupported RSASSA-PSS hash function.",
                                                        oid: t.signatureParameters.hash.algorithmOid,
                                                        name: g
                                                    };
                                                    h = e.pss.create(e.md[g].create(), m, t.signatureParameters.saltLength)
                                            }
                                            i = n.publicKey.verify(d.digest().getBytes(), t.signature, h)
                                        }
                                        return i
                                    },
                                    n.isIssuer = function(e) {
                                        var t = !1,
                                            i = n.issuer,
                                            r = e.subject;
                                        if (i.hash && r.hash) t = i.hash === r.hash;
                                        else if (i.attributes.length === r.attributes.length) {
                                            t = !0;
                                            for (var a, o, s = 0; t && s < i.attributes.length; ++s) a = i.attributes[s],
                                                o = r.attributes[s],
                                            (a.type !== o.type || a.value !== o.value) && (t = !1)
                                        }
                                        return t
                                    },
                                    n.issued = function(e) {
                                        return e.isIssuer(n)
                                    },
                                    n.generateSubjectKeyIdentifier = function() {
                                        return c.getPublicKeyFingerprint(n.publicKey, {
                                            type: "RSAPublicKey"
                                        })
                                    },
                                    n.verifySubjectKeyIdentifier = function() {
                                        for (var t = l.subjectKeyIdentifier,
                                                 i = 0; i < n.extensions.length; ++i) {
                                            var r = n.extensions[i];
                                            if (r.id === t) {
                                                var a = n.generateSubjectKeyIdentifier().getBytes();
                                                return e.util.hexToBytes(r.subjectKeyIdentifier) === a
                                            }
                                        }
                                        return ! 1
                                    },
                                    n
                            },
                            c.certificateFromAsn1 = function(n, r) {
                                var a = {},
                                    o = [];
                                if (!s.validate(n, u, a, o)) {
                                    var d = new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");
                                    throw d.errors = o,
                                        d
                                }
                                if ("string" != typeof a.certSignature) {
                                    for (var p = "\x00",
                                             f = 0; f < a.certSignature.length; ++f) p += s.toDer(a.certSignature[f]).getBytes();
                                    a.certSignature = p
                                }
                                var h = s.derToOid(a.publicKeyOid);
                                if (h !== c.oids.rsaEncryption) throw new Error("Cannot read public key. OID is not RSA.");
                                var g = c.createCertificate();
                                g.version = a.certVersion ? a.certVersion.charCodeAt(0) : 0;
                                var y = e.util.createBuffer(a.certSerialNumber);
                                g.serialNumber = y.toHex(),
                                    g.signatureOid = e.asn1.derToOid(a.certSignatureOid),
                                    g.signatureParameters = m(g.signatureOid, a.certSignatureParams, !0),
                                    g.siginfo.algorithmOid = e.asn1.derToOid(a.certinfoSignatureOid),
                                    g.siginfo.parameters = m(g.siginfo.algorithmOid, a.certinfoSignatureParams, !1);
                                var v = e.util.createBuffer(a.certSignature); ++v.read,
                                    g.signature = v.getBytes();
                                var C = [];
                                if (void 0 !== a.certValidity1UTCTime && C.push(s.utcTimeToDate(a.certValidity1UTCTime)), void 0 !== a.certValidity2GeneralizedTime && C.push(s.generalizedTimeToDate(a.certValidity2GeneralizedTime)), void 0 !== a.certValidity3UTCTime && C.push(s.utcTimeToDate(a.certValidity3UTCTime)), void 0 !== a.certValidity4GeneralizedTime && C.push(s.generalizedTimeToDate(a.certValidity4GeneralizedTime)), C.length > 2) throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");
                                if (C.length < 2) throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");
                                if (g.validity.notBefore = C[0], g.validity.notAfter = C[1], g.tbsCertificate = a.tbsCertificate, r) {
                                    if (g.md = null, g.signatureOid in l) {
                                        var h = l[g.signatureOid];
                                        switch (h) {
                                            case "sha1WithRSAEncryption":
                                                g.md = e.md.sha1.create();
                                                break;
                                            case "md5WithRSAEncryption":
                                                g.md = e.md.md5.create();
                                                break;
                                            case "sha256WithRSAEncryption":
                                                g.md = e.md.sha256.create();
                                                break;
                                            case "sha512WithRSAEncryption":
                                                g.md = e.md.sha512.create();
                                                break;
                                            case "RSASSA-PSS":
                                                g.md = e.md.sha256.create()
                                        }
                                    }
                                    if (null === g.md) {
                                        var d = new Error("Could not compute certificate digest. Unknown signature OID.");
                                        throw d.signatureOid = g.signatureOid,
                                            d
                                    }
                                    var S = s.toDer(g.tbsCertificate);
                                    g.md.update(S.getBytes())
                                }
                                var _ = e.md.sha1.create();
                                g.issuer.getField = function(e) {
                                    return t(g.issuer, e)
                                },
                                    g.issuer.addField = function(e) {
                                        i([e]),
                                            g.issuer.attributes.push(e)
                                    },
                                    g.issuer.attributes = c.RDNAttributesAsArray(a.certIssuer, _),
                                a.certIssuerUniqueId && (g.issuer.uniqueId = a.certIssuerUniqueId),
                                    g.issuer.hash = _.digest().toHex();
                                var b = e.md.sha1.create();
                                return g.subject.getField = function(e) {
                                    return t(g.subject, e)
                                },
                                    g.subject.addField = function(e) {
                                        i([e]),
                                            g.subject.attributes.push(e)
                                    },
                                    g.subject.attributes = c.RDNAttributesAsArray(a.certSubject, b),
                                a.certSubjectUniqueId && (g.subject.uniqueId = a.certSubjectUniqueId),
                                    g.subject.hash = b.digest().toHex(),
                                    g.extensions = a.certExtensions ? c.certificateExtensionsFromAsn1(a.certExtensions) : [],
                                    g.publicKey = c.publicKeyFromAsn1(a.subjectPublicKeyInfo),
                                    g
                            },
                            c.certificateExtensionsFromAsn1 = function(e) {
                                for (var t = [], n = 0; n < e.value.length; ++n) for (var i = e.value[n], r = 0; r < i.value.length; ++r) t.push(c.certificateExtensionFromAsn1(i.value[r]));
                                return t
                            },
                            c.certificateExtensionFromAsn1 = function(t) {
                                var n = {};
                                if (n.id = s.derToOid(t.value[0].value), n.critical = !1, t.value[1].type === s.Type.BOOLEAN ? (n.critical = 0 !== t.value[1].value.charCodeAt(0), n.value = t.value[2].value) : n.value = t.value[1].value, n.id in l) if (n.name = l[n.id], "keyUsage" === n.name) {
                                    var i = s.fromDer(n.value),
                                        r = 0,
                                        a = 0;
                                    i.value.length > 1 && (r = i.value.charCodeAt(1), a = i.value.length > 2 ? i.value.charCodeAt(2) : 0),
                                        n.digitalSignature = 128 === (128 & r),
                                        n.nonRepudiation = 64 === (64 & r),
                                        n.keyEncipherment = 32 === (32 & r),
                                        n.dataEncipherment = 16 === (16 & r),
                                        n.keyAgreement = 8 === (8 & r),
                                        n.keyCertSign = 4 === (4 & r),
                                        n.cRLSign = 2 === (2 & r),
                                        n.encipherOnly = 1 === (1 & r),
                                        n.decipherOnly = 128 === (128 & a)
                                } else if ("basicConstraints" === n.name) {
                                    var i = s.fromDer(n.value);
                                    n.cA = i.value.length > 0 && i.value[0].type === s.Type.BOOLEAN ? 0 !== i.value[0].value.charCodeAt(0) : !1;
                                    var o = null;
                                    i.value.length > 0 && i.value[0].type === s.Type.INTEGER ? o = i.value[0].value: i.value.length > 1 && (o = i.value[1].value),
                                    null !== o && (n.pathLenConstraint = s.derToInteger(o))
                                } else if ("extKeyUsage" === n.name) for (var i = s.fromDer(n.value), c = 0; c < i.value.length; ++c) {
                                    var d = s.derToOid(i.value[c].value);
                                    d in l ? n[l[d]] = !0 : n[d] = !0
                                } else if ("nsCertType" === n.name) {
                                    var i = s.fromDer(n.value),
                                        r = 0;
                                    i.value.length > 1 && (r = i.value.charCodeAt(1)),
                                        n.client = 128 === (128 & r),
                                        n.server = 64 === (64 & r),
                                        n.email = 32 === (32 & r),
                                        n.objsign = 16 === (16 & r),
                                        n.reserved = 8 === (8 & r),
                                        n.sslCA = 4 === (4 & r),
                                        n.emailCA = 2 === (2 & r),
                                        n.objCA = 1 === (1 & r)
                                } else if ("subjectAltName" === n.name || "issuerAltName" === n.name) {
                                    n.altNames = [];
                                    for (var p, i = s.fromDer(n.value), u = 0; u < i.value.length; ++u) {
                                        p = i.value[u];
                                        var f = {
                                            type: p.type,
                                            value: p.value
                                        };
                                        switch (n.altNames.push(f), p.type) {
                                            case 1:
                                            case 2:
                                            case 6:
                                                break;
                                            case 7:
                                                f.ip = e.util.bytesToIP(p.value);
                                                break;
                                            case 8:
                                                f.oid = s.derToOid(p.value)
                                        }
                                    }
                                } else if ("subjectKeyIdentifier" === n.name) {
                                    var i = s.fromDer(n.value);
                                    n.subjectKeyIdentifier = e.util.bytesToHex(i.value)
                                }
                                return n
                            },
                            c.certificationRequestFromAsn1 = function(n, r) {
                                var a = {},
                                    o = [];
                                if (!s.validate(n, g, a, o)) {
                                    var d = new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");
                                    throw d.errors = o,
                                        d
                                }
                                if ("string" != typeof a.csrSignature) {
                                    for (var p = "\x00",
                                             u = 0; u < a.csrSignature.length; ++u) p += s.toDer(a.csrSignature[u]).getBytes();
                                    a.csrSignature = p
                                }
                                var f = s.derToOid(a.publicKeyOid);
                                if (f !== c.oids.rsaEncryption) throw new Error("Cannot read public key. OID is not RSA.");
                                var h = c.createCertificationRequest();
                                h.version = a.csrVersion ? a.csrVersion.charCodeAt(0) : 0,
                                    h.signatureOid = e.asn1.derToOid(a.csrSignatureOid),
                                    h.signatureParameters = m(h.signatureOid, a.csrSignatureParams, !0),
                                    h.siginfo.algorithmOid = e.asn1.derToOid(a.csrSignatureOid),
                                    h.siginfo.parameters = m(h.siginfo.algorithmOid, a.csrSignatureParams, !1);
                                var y = e.util.createBuffer(a.csrSignature);
                                if (++y.read, h.signature = y.getBytes(), h.certificationRequestInfo = a.certificationRequestInfo, r) {
                                    if (h.md = null, h.signatureOid in l) {
                                        var f = l[h.signatureOid];
                                        switch (f) {
                                            case "sha1WithRSAEncryption":
                                                h.md = e.md.sha1.create();
                                                break;
                                            case "md5WithRSAEncryption":
                                                h.md = e.md.md5.create();
                                                break;
                                            case "sha256WithRSAEncryption":
                                                h.md = e.md.sha256.create();
                                                break;
                                            case "sha512WithRSAEncryption":
                                                h.md = e.md.sha512.create();
                                                break;
                                            case "RSASSA-PSS":
                                                h.md = e.md.sha256.create()
                                        }
                                    }
                                    if (null === h.md) {
                                        var d = new Error("Could not compute certification request digest. Unknown signature OID.");
                                        throw d.signatureOid = h.signatureOid,
                                            d
                                    }
                                    var v = s.toDer(h.certificationRequestInfo);
                                    h.md.update(v.getBytes())
                                }
                                var C = e.md.sha1.create();
                                return h.subject.getField = function(e) {
                                    return t(h.subject, e)
                                },
                                    h.subject.addField = function(e) {
                                        i([e]),
                                            h.subject.attributes.push(e)
                                    },
                                    h.subject.attributes = c.RDNAttributesAsArray(a.certificationRequestInfoSubject, C),
                                    h.subject.hash = C.digest().toHex(),
                                    h.publicKey = c.publicKeyFromAsn1(a.subjectPublicKeyInfo),
                                    h.getAttribute = function(e) {
                                        return t(h, e)
                                    },
                                    h.addAttribute = function(e) {
                                        i([e]),
                                            h.attributes.push(e)
                                    },
                                    h.attributes = c.CRIAttributesAsArray(a.certificationRequestInfoAttributes || []),
                                    h
                            },
                            c.createCertificationRequest = function() {
                                var n = {};
                                return n.version = 0,
                                    n.signatureOid = null,
                                    n.signature = null,
                                    n.siginfo = {},
                                    n.siginfo.algorithmOid = null,
                                    n.subject = {},
                                    n.subject.getField = function(e) {
                                        return t(n.subject, e)
                                    },
                                    n.subject.addField = function(e) {
                                        i([e]),
                                            n.subject.attributes.push(e)
                                    },
                                    n.subject.attributes = [],
                                    n.subject.hash = null,
                                    n.publicKey = null,
                                    n.attributes = [],
                                    n.getAttribute = function(e) {
                                        return t(n, e)
                                    },
                                    n.addAttribute = function(e) {
                                        i([e]),
                                            n.attributes.push(e)
                                    },
                                    n.md = null,
                                    n.setSubject = function(e) {
                                        i(e),
                                            n.subject.attributes = e,
                                            n.subject.hash = null
                                    },
                                    n.setAttributes = function(e) {
                                        i(e),
                                            n.attributes = e
                                    },
                                    n.sign = function(t, i) {
                                        n.md = i || e.md.sha1.create();
                                        var r = l[n.md.algorithm + "WithRSAEncryption"];
                                        if (!r) {
                                            var a = new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");
                                            throw a.algorithm = n.md.algorithm,
                                                a
                                        }
                                        n.signatureOid = n.siginfo.algorithmOid = r,
                                            n.certificationRequestInfo = c.getCertificationRequestInfo(n);
                                        var o = s.toDer(n.certificationRequestInfo);
                                        n.md.update(o.getBytes()),
                                            n.signature = t.sign(n.md)
                                    },
                                    n.verify = function() {
                                        var t = !1,
                                            i = n.md;
                                        if (null === i) {
                                            if (n.signatureOid in l) {
                                                var r = l[n.signatureOid];
                                                switch (r) {
                                                    case "sha1WithRSAEncryption":
                                                        i = e.md.sha1.create();
                                                        break;
                                                    case "md5WithRSAEncryption":
                                                        i = e.md.md5.create();
                                                        break;
                                                    case "sha256WithRSAEncryption":
                                                        i = e.md.sha256.create();
                                                        break;
                                                    case "sha512WithRSAEncryption":
                                                        i = e.md.sha512.create();
                                                        break;
                                                    case "RSASSA-PSS":
                                                        i = e.md.sha256.create()
                                                }
                                            }
                                            if (null === i) {
                                                var a = new Error("Could not compute certification request digest. Unknown signature OID.");
                                                throw a.signatureOid = n.signatureOid,
                                                    a
                                            }
                                            var o = n.certificationRequestInfo || c.getCertificationRequestInfo(n),
                                                d = s.toDer(o);
                                            i.update(d.getBytes())
                                        }
                                        if (null !== i) {
                                            var p;
                                            switch (n.signatureOid) {
                                                case l.sha1WithRSAEncryption:
                                                    break;
                                                case l["RSASSA-PSS"]:
                                                    var u, f;
                                                    if (u = l[n.signatureParameters.mgf.hash.algorithmOid], void 0 === u || void 0 === e.md[u]) {
                                                        var a = new Error("Unsupported MGF hash function.");
                                                        throw a.oid = n.signatureParameters.mgf.hash.algorithmOid,
                                                            a.name = u,
                                                            a
                                                    }
                                                    if (f = l[n.signatureParameters.mgf.algorithmOid], void 0 === f || void 0 === e.mgf[f]) {
                                                        var a = new Error("Unsupported MGF function.");
                                                        throw a.oid = n.signatureParameters.mgf.algorithmOid,
                                                            a.name = f,
                                                            a
                                                    }
                                                    if (f = e.mgf[f].create(e.md[u].create()), u = l[n.signatureParameters.hash.algorithmOid], void 0 === u || void 0 === e.md[u]) {
                                                        var a = new Error("Unsupported RSASSA-PSS hash function.");
                                                        throw a.oid = n.signatureParameters.hash.algorithmOid,
                                                            a.name = u,
                                                            a
                                                    }
                                                    p = e.pss.create(e.md[u].create(), f, n.signatureParameters.saltLength)
                                            }
                                            t = n.publicKey.verify(i.digest().getBytes(), n.signature, p)
                                        }
                                        return t
                                    },
                                    n
                            },
                            c.getTBSCertificate = function(t) {
                                var i = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, [s.create(s.Class.UNIVERSAL, s.Type.INTEGER, !1, s.integerToDer(t.version).getBytes())]), s.create(s.Class.UNIVERSAL, s.Type.INTEGER, !1, e.util.hexToBytes(t.serialNumber)), s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(t.siginfo.algorithmOid).getBytes()), a(t.siginfo.algorithmOid, t.siginfo.parameters)]), n(t.issuer), s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.UTCTIME, !1, s.dateToUtcTime(t.validity.notBefore)), s.create(s.Class.UNIVERSAL, s.Type.UTCTIME, !1, s.dateToUtcTime(t.validity.notAfter))]), n(t.subject), c.publicKeyToAsn1(t.publicKey)]);
                                return t.issuer.uniqueId && i.value.push(s.create(s.Class.CONTEXT_SPECIFIC, 1, !0, [s.create(s.Class.UNIVERSAL, s.Type.BITSTRING, !1, String.fromCharCode(0) + t.issuer.uniqueId)])),
                                t.subject.uniqueId && i.value.push(s.create(s.Class.CONTEXT_SPECIFIC, 2, !0, [s.create(s.Class.UNIVERSAL, s.Type.BITSTRING, !1, String.fromCharCode(0) + t.subject.uniqueId)])),
                                t.extensions.length > 0 && i.value.push(c.certificateExtensionsToAsn1(t.extensions)),
                                    i
                            },
                            c.getCertificationRequestInfo = function(e) {
                                var t = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.INTEGER, !1, s.integerToDer(e.version).getBytes()), n(e.subject), c.publicKeyToAsn1(e.publicKey), o(e)]);
                                return t
                            },
                            c.distinguishedNameToAsn1 = function(e) {
                                return n(e)
                            },
                            c.certificateToAsn1 = function(e) {
                                var t = e.tbsCertificate || c.getTBSCertificate(e);
                                return s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [t, s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(e.signatureOid).getBytes()), a(e.signatureOid, e.signatureParameters)]), s.create(s.Class.UNIVERSAL, s.Type.BITSTRING, !1, String.fromCharCode(0) + e.signature)])
                            },
                            c.certificateExtensionsToAsn1 = function(e) {
                                var t = s.create(s.Class.CONTEXT_SPECIFIC, 3, !0, []),
                                    n = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, []);
                                t.value.push(n);
                                for (var i = 0; i < e.length; ++i) n.value.push(c.certificateExtensionToAsn1(e[i]));
                                return t
                            },
                            c.certificateExtensionToAsn1 = function(e) {
                                var t = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, []);
                                t.value.push(s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(e.id).getBytes())),
                                e.critical && t.value.push(s.create(s.Class.UNIVERSAL, s.Type.BOOLEAN, !1, String.fromCharCode(255)));
                                var n = e.value;
                                return "string" != typeof e.value && (n = s.toDer(n).getBytes()),
                                    t.value.push(s.create(s.Class.UNIVERSAL, s.Type.OCTETSTRING, !1, n)),
                                    t
                            },
                            c.certificationRequestToAsn1 = function(e) {
                                var t = e.certificationRequestInfo || c.getCertificationRequestInfo(e);
                                return s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [t, s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(e.signatureOid).getBytes()), a(e.signatureOid, e.signatureParameters)]), s.create(s.Class.UNIVERSAL, s.Type.BITSTRING, !1, String.fromCharCode(0) + e.signature)])
                            },
                            c.createCaStore = function(t) {
                                function i(e) {
                                    return r(e),
                                    a.certs[e.hash] || null
                                }
                                function r(t) {
                                    if (!t.hash) {
                                        var i = e.md.sha1.create();
                                        t.attributes = c.RDNAttributesAsArray(n(t), i),
                                            t.hash = i.digest().toHex()
                                    }
                                }
                                var a = {
                                    certs: {}
                                };
                                if (a.getIssuer = function(e) {
                                        var t = i(e.issuer);
                                        return t
                                    },
                                        a.addCertificate = function(t) {
                                            if ("string" == typeof t && (t = e.pki.certificateFromPem(t)), r(t.subject), !a.hasCertificate(t)) if (t.subject.hash in a.certs) {
                                                var n = a.certs[t.subject.hash];
                                                e.util.isArray(n) || (n = [n]),
                                                    n.push(t),
                                                    a.certs[t.subject.hash] = n
                                            } else a.certs[t.subject.hash] = t
                                        },
                                        a.hasCertificate = function(t) {
                                            "string" == typeof t && (t = e.pki.certificateFromPem(t));
                                            var n = i(t.subject);
                                            if (!n) return ! 1;
                                            e.util.isArray(n) || (n = [n]);
                                            for (var r = s.toDer(c.certificateToAsn1(t)).getBytes(), a = 0; a < n.length; ++a) {
                                                var o = s.toDer(c.certificateToAsn1(n[a])).getBytes();
                                                if (r === o) return ! 0
                                            }
                                            return ! 1
                                        },
                                        a.listAllCertificates = function() {
                                            var t = [];
                                            for (var n in a.certs) if (a.certs.hasOwnProperty(n)) {
                                                var i = a.certs[n];
                                                if (e.util.isArray(i)) for (var r = 0; r < i.length; ++r) t.push(i[r]);
                                                else t.push(i)
                                            }
                                            return t
                                        },
                                        a.removeCertificate = function(t) {
                                            var n;
                                            if ("string" == typeof t && (t = e.pki.certificateFromPem(t)), r(t.subject), !a.hasCertificate(t)) return null;
                                            var o = i(t.subject);
                                            if (!e.util.isArray(o)) return n = a.certs[t.subject.hash],
                                                delete a.certs[t.subject.hash],
                                                n;
                                            for (var l = s.toDer(c.certificateToAsn1(t)).getBytes(), d = 0; d < o.length; ++d) {
                                                var p = s.toDer(c.certificateToAsn1(o[d])).getBytes();
                                                l === p && (n = o[d], o.splice(d, 1))
                                            }
                                            return 0 === o.length && delete a.certs[t.subject.hash],
                                                n
                                        },
                                        t) for (var o = 0; o < t.length; ++o) {
                                    var l = t[o];
                                    a.addCertificate(l)
                                }
                                return a
                            },
                            c.certificateError = {
                                bad_certificate: "forge.pki.BadCertificate",
                                unsupported_certificate: "forge.pki.UnsupportedCertificate",
                                certificate_revoked: "forge.pki.CertificateRevoked",
                                certificate_expired: "forge.pki.CertificateExpired",
                                certificate_unknown: "forge.pki.CertificateUnknown",
                                unknown_ca: "forge.pki.UnknownCertificateAuthority"
                            },
                            c.verifyCertificateChain = function(t, n, i) {
                                n = n.slice(0);
                                var r = n.slice(0),
                                    a = new Date,
                                    o = !0,
                                    s = null,
                                    l = 0;
                                do {
                                    var d = n.shift(), p = null, u = !1;
                                    if ((a < d.validity.notBefore || a > d.validity.notAfter) && (s = {
                                            message: "Certificate is not valid yet or has expired.",
                                            error: c.certificateError.certificate_expired,
                                            notBefore: d.validity.notBefore,
                                            notAfter: d.validity.notAfter,
                                            now: a
                                        }), null === s) {
                                        if (p = n[0] || t.getIssuer(d), null === p && d.isIssuer(d) && (u = !0, p = d), p) {
                                            var f = p;
                                            e.util.isArray(f) || (f = [f]);
                                            for (var h = !1; ! h && f.length > 0;) {
                                                p = f.shift();
                                                try {
                                                    h = p.verify(d)
                                                } catch(g) {}
                                            }
                                            h || (s = {
                                                message: "Certificate signature is invalid.",
                                                error: c.certificateError.bad_certificate
                                            })
                                        }
                                        null === s && (!p || u) && !t.hasCertificate(d) && (s = {
                                            message: "Certificate is not trusted.",
                                            error: c.certificateError.unknown_ca
                                        })
                                    }
                                    if (null === s && p && !d.isIssuer(p) && (s = {
                                            message: "Certificate issuer is invalid.",
                                            error: c.certificateError.bad_certificate
                                        }), null === s) for (var m = {
                                            keyUsage: !0,
                                            basicConstraints: !0
                                        },
                                                                 y = 0; null === s && y < d.extensions.length; ++y) {
                                        var v = d.extensions[y];
                                        v.critical && !(v.name in m) && (s = {
                                            message: "Certificate has an unsupported critical extension.",
                                            error: c.certificateError.unsupported_certificate
                                        })
                                    }
                                    if (null === s && (!o || 0 === n.length && (!p || u))) {
                                        var C = d.getExtension("basicConstraints"),
                                            S = d.getExtension("keyUsage");
                                        if (null !== S && (!S.keyCertSign || null === C) && (s = {
                                                message: "Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",
                                                error: c.certificateError.bad_certificate
                                            }), null === s && null !== C && !C.cA && (s = {
                                                message: "Certificate basicConstraints indicates the certificate is not a CA.",
                                                error: c.certificateError.bad_certificate
                                            }), null === s && null !== S && "pathLenConstraint" in C) {
                                            var _ = l - 1;
                                            _ > C.pathLenConstraint && (s = {
                                                message: "Certificate basicConstraints pathLenConstraint violated.",
                                                error: c.certificateError.bad_certificate
                                            })
                                        }
                                    }
                                    var b = null === s ? !0 : s.error, E = i ? i(b, l, r) : b;
                                    if (E !== !0) throw b === !0 && (s = {
                                        message: "The application rejected the certificate.",
                                        error: c.certificateError.bad_certificate
                                    }), (E || 0 === E) && ("object" != typeof E || e.util.isArray(E) ? "string" == typeof E && (s.error = E) : (E.message && (s.message = E.message), E.error && (s.error = E.error))), s;
                                    s = null, o = !1, ++l
                                } while ( n . length > 0 );
                                return ! 0
                            }
                    }
                    var i = "x509";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n.pki
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/x509", ["require", "module", "./aes", "./asn1", "./des", "./md", "./mgf", "./oids", "./pem", "./pss", "./rsa", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(e, t, n, i) {
                            for (var r = [], a = 0; a < e.length; a++) for (var o = 0; o < e[a].safeBags.length; o++) {
                                var s = e[a].safeBags[o]; (void 0 === i || s.type === i) && (null !== t ? void 0 !== s.attributes[t] && s.attributes[t].indexOf(n) >= 0 && r.push(s) : r.push(s))
                            }
                            return r
                        }
                        function n(t) {
                            if (t.composed || t.constructed) {
                                for (var n = e.util.createBuffer(), i = 0; i < t.value.length; ++i) n.putBytes(t.value[i].value);
                                t.composed = t.constructed = !1,
                                    t.value = n.getBytes()
                            }
                            return t
                        }
                        function i(e, t, i, o) {
                            if (t = s.fromDer(t, i), t.tagClass !== s.Class.UNIVERSAL || t.type !== s.Type.SEQUENCE || t.constructed !== !0) throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");
                            for (var l = 0; l < t.value.length; l++) {
                                var p = t.value[l],
                                    u = {},
                                    f = [];
                                if (!s.validate(p, d, u, f)) {
                                    var h = new Error("Cannot read ContentInfo.");
                                    throw h.errors = f,
                                        h
                                }
                                var g = {
                                        encrypted: !1
                                    },
                                    m = null,
                                    y = u.content.value[0];
                                switch (s.derToOid(u.contentType)) {
                                    case c.oids.data:
                                        if (y.tagClass !== s.Class.UNIVERSAL || y.type !== s.Type.OCTETSTRING) throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");
                                        m = n(y).value;
                                        break;
                                    case c.oids.encryptedData:
                                        m = r(y, o),
                                            g.encrypted = !0;
                                        break;
                                    default:
                                        var h = new Error("Unsupported PKCS#12 contentType.");
                                        throw h.contentType = s.derToOid(u.contentType),
                                            h
                                }
                                g.safeBags = a(m, i, o),
                                    e.safeContents.push(g)
                            }
                        }
                        function r(t, i) {
                            var r = {},
                                a = [];
                            if (!s.validate(t, e.pkcs7.asn1.encryptedDataValidator, r, a)) {
                                var o = new Error("Cannot read EncryptedContentInfo.");
                                throw o.errors = a,
                                    o
                            }
                            var l = s.derToOid(r.contentType);
                            if (l !== c.oids.data) {
                                var o = new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");
                                throw o.oid = l,
                                    o
                            }
                            l = s.derToOid(r.encAlgorithm);
                            var d = c.pbe.getCipher(l, r.encParameter, i),
                                p = n(r.encryptedContentAsn1),
                                u = e.util.createBuffer(p.value);
                            if (d.update(u), !d.finish()) throw new Error("Failed to decrypt PKCS#12 SafeContents.");
                            return d.output.getBytes()
                        }
                        function a(e, t, n) {
                            if (!t && 0 === e.length) return [];
                            if (e = s.fromDer(e, t), e.tagClass !== s.Class.UNIVERSAL || e.type !== s.Type.SEQUENCE || e.constructed !== !0) throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");
                            for (var i = [], r = 0; r < e.value.length; r++) {
                                var a = e.value[r],
                                    l = {},
                                    d = [];
                                if (!s.validate(a, u, l, d)) {
                                    var p = new Error("Cannot read SafeBag.");
                                    throw p.errors = d,
                                        p
                                }
                                var f = {
                                    type: s.derToOid(l.bagId),
                                    attributes: o(l.bagAttributes)
                                };
                                i.push(f);
                                var g, m, y = l.bagValue.value[0];
                                switch (f.type) {
                                    case c.oids.pkcs8ShroudedKeyBag:
                                        if (y = c.decryptPrivateKeyInfo(y, n), null === y) throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");
                                    case c.oids.keyBag:
                                        try {
                                            f.key = c.privateKeyFromAsn1(y)
                                        } catch(v) {
                                            f.key = null,
                                                f.asn1 = y
                                        }
                                        continue;
                                    case c.oids.certBag:
                                        g = h,
                                            m = function() {
                                                if (s.derToOid(l.certId) !== c.oids.x509Certificate) {
                                                    var e = new Error("Unsupported certificate type, only X.509 supported.");
                                                    throw e.oid = s.derToOid(l.certId),
                                                        e
                                                }
                                                var n = s.fromDer(l.cert, t);
                                                try {
                                                    f.cert = c.certificateFromAsn1(n, !0)
                                                } catch(i) {
                                                    f.cert = null,
                                                        f.asn1 = n
                                                }
                                            };
                                        break;
                                    default:
                                        var p = new Error("Unsupported PKCS#12 SafeBag type.");
                                        throw p.oid = f.type,
                                            p
                                }
                                if (void 0 !== g && !s.validate(y, g, l, d)) {
                                    var p = new Error("Cannot read PKCS#12 " + g.name);
                                    throw p.errors = d,
                                        p
                                }
                                m()
                            }
                            return i
                        }
                        function o(e) {
                            var t = {};
                            if (void 0 !== e) for (var n = 0; n < e.length; ++n) {
                                var i = {},
                                    r = [];
                                if (!s.validate(e[n], f, i, r)) {
                                    var a = new Error("Cannot read PKCS#12 BagAttribute.");
                                    throw a.errors = r,
                                        a
                                }
                                var o = s.derToOid(i.oid);
                                if (void 0 !== c.oids[o]) {
                                    t[c.oids[o]] = [];
                                    for (var l = 0; l < i.values.length; ++l) t[c.oids[o]].push(i.values[l].value)
                                }
                            }
                            return t
                        }
                        var s = e.asn1,
                            c = e.pki,
                            l = e.pkcs12 = e.pkcs12 || {},
                            d = {
                                name: "ContentInfo",
                                tagClass: s.Class.UNIVERSAL,
                                type: s.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "ContentInfo.contentType",
                                    tagClass: s.Class.UNIVERSAL,
                                    type: s.Type.OID,
                                    constructed: !1,
                                    capture: "contentType"
                                },
                                    {
                                        name: "ContentInfo.content",
                                        tagClass: s.Class.CONTEXT_SPECIFIC,
                                        constructed: !0,
                                        captureAsn1: "content"
                                    }]
                            },
                            p = {
                                name: "PFX",
                                tagClass: s.Class.UNIVERSAL,
                                type: s.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "PFX.version",
                                    tagClass: s.Class.UNIVERSAL,
                                    type: s.Type.INTEGER,
                                    constructed: !1,
                                    capture: "version"
                                },
                                    d, {
                                        name: "PFX.macData",
                                        tagClass: s.Class.UNIVERSAL,
                                        type: s.Type.SEQUENCE,
                                        constructed: !0,
                                        optional: !0,
                                        captureAsn1: "mac",
                                        value: [{
                                            name: "PFX.macData.mac",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Type.SEQUENCE,
                                            constructed: !0,
                                            value: [{
                                                name: "PFX.macData.mac.digestAlgorithm",
                                                tagClass: s.Class.UNIVERSAL,
                                                type: s.Type.SEQUENCE,
                                                constructed: !0,
                                                value: [{
                                                    name: "PFX.macData.mac.digestAlgorithm.algorithm",
                                                    tagClass: s.Class.UNIVERSAL,
                                                    type: s.Type.OID,
                                                    constructed: !1,
                                                    capture: "macAlgorithm"
                                                },
                                                    {
                                                        name: "PFX.macData.mac.digestAlgorithm.parameters",
                                                        tagClass: s.Class.UNIVERSAL,
                                                        captureAsn1: "macAlgorithmParameters"
                                                    }]
                                            },
                                                {
                                                    name: "PFX.macData.mac.digest",
                                                    tagClass: s.Class.UNIVERSAL,
                                                    type: s.Type.OCTETSTRING,
                                                    constructed: !1,
                                                    capture: "macDigest"
                                                }]
                                        },
                                            {
                                                name: "PFX.macData.macSalt",
                                                tagClass: s.Class.UNIVERSAL,
                                                type: s.Type.OCTETSTRING,
                                                constructed: !1,
                                                capture: "macSalt"
                                            },
                                            {
                                                name: "PFX.macData.iterations",
                                                tagClass: s.Class.UNIVERSAL,
                                                type: s.Type.INTEGER,
                                                constructed: !1,
                                                optional: !0,
                                                capture: "macIterations"
                                            }]
                                    }]
                            },
                            u = {
                                name: "SafeBag",
                                tagClass: s.Class.UNIVERSAL,
                                type: s.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "SafeBag.bagId",
                                    tagClass: s.Class.UNIVERSAL,
                                    type: s.Type.OID,
                                    constructed: !1,
                                    capture: "bagId"
                                },
                                    {
                                        name: "SafeBag.bagValue",
                                        tagClass: s.Class.CONTEXT_SPECIFIC,
                                        constructed: !0,
                                        captureAsn1: "bagValue"
                                    },
                                    {
                                        name: "SafeBag.bagAttributes",
                                        tagClass: s.Class.UNIVERSAL,
                                        type: s.Type.SET,
                                        constructed: !0,
                                        optional: !0,
                                        capture: "bagAttributes"
                                    }]
                            },
                            f = {
                                name: "Attribute",
                                tagClass: s.Class.UNIVERSAL,
                                type: s.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "Attribute.attrId",
                                    tagClass: s.Class.UNIVERSAL,
                                    type: s.Type.OID,
                                    constructed: !1,
                                    capture: "oid"
                                },
                                    {
                                        name: "Attribute.attrValues",
                                        tagClass: s.Class.UNIVERSAL,
                                        type: s.Type.SET,
                                        constructed: !0,
                                        capture: "values"
                                    }]
                            },
                            h = {
                                name: "CertBag",
                                tagClass: s.Class.UNIVERSAL,
                                type: s.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "CertBag.certId",
                                    tagClass: s.Class.UNIVERSAL,
                                    type: s.Type.OID,
                                    constructed: !1,
                                    capture: "certId"
                                },
                                    {
                                        name: "CertBag.certValue",
                                        tagClass: s.Class.CONTEXT_SPECIFIC,
                                        constructed: !0,
                                        value: [{
                                            name: "CertBag.certValue[0]",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Class.OCTETSTRING,
                                            constructed: !1,
                                            capture: "cert"
                                        }]
                                    }]
                            };
                        l.pkcs12FromAsn1 = function(r, a, o) {
                            "string" == typeof a ? (o = a, a = !0) : void 0 === a && (a = !0);
                            var d = {},
                                u = [];
                            if (!s.validate(r, p, d, u)) {
                                var f = new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");
                                throw f.errors = f,
                                    f
                            }
                            var h = {
                                version: d.version.charCodeAt(0),
                                safeContents: [],
                                getBags: function(n) {
                                    var i, r = {};
                                    return "localKeyId" in n ? i = n.localKeyId: "localKeyIdHex" in n && (i = e.util.hexToBytes(n.localKeyIdHex)),
                                    void 0 === i && !("friendlyName" in n) && "bagType" in n && (r[n.bagType] = t(h.safeContents, null, null, n.bagType)),
                                    void 0 !== i && (r.localKeyId = t(h.safeContents, "localKeyId", i, n.bagType)),
                                    "friendlyName" in n && (r.friendlyName = t(h.safeContents, "friendlyName", n.friendlyName, n.bagType)),
                                        r
                                },
                                getBagsByFriendlyName: function(e, n) {
                                    return t(h.safeContents, "friendlyName", e, n)
                                },
                                getBagsByLocalKeyId: function(e, n) {
                                    return t(h.safeContents, "localKeyId", e, n)
                                }
                            };
                            if (3 !== d.version.charCodeAt(0)) {
                                var f = new Error("PKCS#12 PFX of version other than 3 not supported.");
                                throw f.version = d.version.charCodeAt(0),
                                    f
                            }
                            if (s.derToOid(d.contentType) !== c.oids.data) {
                                var f = new Error("Only PKCS#12 PFX in password integrity mode supported.");
                                throw f.oid = s.derToOid(d.contentType),
                                    f
                            }
                            var g = d.content.value[0];
                            if (g.tagClass !== s.Class.UNIVERSAL || g.type !== s.Type.OCTETSTRING) throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");
                            if (g = n(g), d.mac) {
                                var m = null,
                                    y = 0,
                                    v = s.derToOid(d.macAlgorithm);
                                switch (v) {
                                    case c.oids.sha1:
                                        m = e.md.sha1.create(),
                                            y = 20;
                                        break;
                                    case c.oids.sha256:
                                        m = e.md.sha256.create(),
                                            y = 32;
                                        break;
                                    case c.oids.sha384:
                                        m = e.md.sha384.create(),
                                            y = 48;
                                        break;
                                    case c.oids.sha512:
                                        m = e.md.sha512.create(),
                                            y = 64;
                                        break;
                                    case c.oids.md5:
                                        m = e.md.md5.create(),
                                            y = 16
                                }
                                if (null === m) throw new Error("PKCS#12 uses unsupported MAC algorithm: " + v);
                                var C = new e.util.ByteBuffer(d.macSalt),
                                    S = "macIterations" in d ? parseInt(e.util.bytesToHex(d.macIterations), 16) : 1,
                                    _ = l.generateKey(o, C, 3, S, y, m),
                                    b = e.hmac.create();
                                b.start(m, _),
                                    b.update(g.value);
                                var E = b.getMac();
                                if (E.getBytes() !== d.macDigest) throw new Error("PKCS#12 MAC could not be verified. Invalid password?")
                            }
                            return i(h, g.value, a, o),
                                h
                        },
                            l.toPkcs12Asn1 = function(t, n, i, r) {
                                r = r || {},
                                    r.saltSize = r.saltSize || 8,
                                    r.count = r.count || 2048,
                                    r.algorithm = r.algorithm || r.encAlgorithm || "aes128",
                                "useMac" in r || (r.useMac = !0),
                                "localKeyId" in r || (r.localKeyId = null),
                                "generateLocalKeyId" in r || (r.generateLocalKeyId = !0);
                                var a, o = r.localKeyId;
                                if (null !== o) o = e.util.hexToBytes(o);
                                else if (r.generateLocalKeyId) if (n) {
                                    var d = e.util.isArray(n) ? n[0] : n;
                                    "string" == typeof d && (d = c.certificateFromPem(d));
                                    var p = e.md.sha1.create();
                                    p.update(s.toDer(c.certificateToAsn1(d)).getBytes()),
                                        o = p.digest().getBytes()
                                } else o = e.random.getBytes(20);
                                var u = [];
                                null !== o && u.push(s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(c.oids.localKeyId).getBytes()), s.create(s.Class.UNIVERSAL, s.Type.SET, !0, [s.create(s.Class.UNIVERSAL, s.Type.OCTETSTRING, !1, o)])])),
                                "friendlyName" in r && u.push(s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(c.oids.friendlyName).getBytes()), s.create(s.Class.UNIVERSAL, s.Type.SET, !0, [s.create(s.Class.UNIVERSAL, s.Type.BMPSTRING, !1, r.friendlyName)])])),
                                u.length > 0 && (a = s.create(s.Class.UNIVERSAL, s.Type.SET, !0, u));
                                var f = [],
                                    h = [];
                                null !== n && (h = e.util.isArray(n) ? n: [n]);
                                for (var g = [], m = 0; m < h.length; ++m) {
                                    n = h[m],
                                    "string" == typeof n && (n = c.certificateFromPem(n));
                                    var y = 0 === m ? a: void 0,
                                        v = c.certificateToAsn1(n),
                                        C = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(c.oids.certBag).getBytes()), s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, [s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(c.oids.x509Certificate).getBytes()), s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, [s.create(s.Class.UNIVERSAL, s.Type.OCTETSTRING, !1, s.toDer(v).getBytes())])])]), y]);
                                    g.push(C)
                                }
                                if (g.length > 0) {
                                    var S = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, g),
                                        _ = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(c.oids.data).getBytes()), s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, [s.create(s.Class.UNIVERSAL, s.Type.OCTETSTRING, !1, s.toDer(S).getBytes())])]);
                                    f.push(_)
                                }
                                var b = null;
                                if (null !== t) {
                                    var E = c.wrapRsaPrivateKey(c.privateKeyToAsn1(t));
                                    b = null === i ? s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(c.oids.keyBag).getBytes()), s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, [E]), a]) : s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(c.oids.pkcs8ShroudedKeyBag).getBytes()), s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, [c.encryptPrivateKeyInfo(E, i, r)]), a]);
                                    var I = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [b]),
                                        A = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(c.oids.data).getBytes()), s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, [s.create(s.Class.UNIVERSAL, s.Type.OCTETSTRING, !1, s.toDer(I).getBytes())])]);
                                    f.push(A)
                                }
                                var T, k = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, f);
                                if (r.useMac) {
                                    var p = e.md.sha1.create(),
                                        w = new e.util.ByteBuffer(e.random.getBytes(r.saltSize)),
                                        $ = r.count,
                                        t = l.generateKey(i, w, 3, $, 20),
                                        P = e.hmac.create();
                                    P.start(p, t),
                                        P.update(s.toDer(k).getBytes());
                                    var N = P.getMac();
                                    T = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(c.oids.sha1).getBytes()), s.create(s.Class.UNIVERSAL, s.Type.NULL, !1, "")]), s.create(s.Class.UNIVERSAL, s.Type.OCTETSTRING, !1, N.getBytes())]), s.create(s.Class.UNIVERSAL, s.Type.OCTETSTRING, !1, w.getBytes()), s.create(s.Class.UNIVERSAL, s.Type.INTEGER, !1, s.integerToDer($).getBytes())])
                                }
                                return s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.INTEGER, !1, s.integerToDer(3).getBytes()), s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(c.oids.data).getBytes()), s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, [s.create(s.Class.UNIVERSAL, s.Type.OCTETSTRING, !1, s.toDer(k).getBytes())])]), T])
                            },
                            l.generateKey = e.pbe.generatePkcs12Key
                    }
                    var i = "pkcs12";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/pkcs12", ["require", "module", "./asn1", "./hmac", "./oids", "./pkcs7asn1", "./pbe", "./random", "./rsa", "./sha1", "./util", "./x509"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        var t = e.asn1,
                            n = e.pki = e.pki || {};
                        n.pemToDer = function(t) {
                            var n = e.pem.decode(t)[0];
                            if (n.procType && "ENCRYPTED" === n.procType.type) throw new Error("Could not convert PEM to DER; PEM is encrypted.");
                            return e.util.createBuffer(n.body)
                        },
                            n.privateKeyFromPem = function(i) {
                                var r = e.pem.decode(i)[0];
                                if ("PRIVATE KEY" !== r.type && "RSA PRIVATE KEY" !== r.type) {
                                    var a = new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');
                                    throw a.headerType = r.type,
                                        a
                                }
                                if (r.procType && "ENCRYPTED" === r.procType.type) throw new Error("Could not convert private key from PEM; PEM is encrypted.");
                                var o = t.fromDer(r.body);
                                return n.privateKeyFromAsn1(o)
                            },
                            n.privateKeyToPem = function(i, r) {
                                var a = {
                                    type: "RSA PRIVATE KEY",
                                    body: t.toDer(n.privateKeyToAsn1(i)).getBytes()
                                };
                                return e.pem.encode(a, {
                                    maxline: r
                                })
                            },
                            n.privateKeyInfoToPem = function(n, i) {
                                var r = {
                                    type: "PRIVATE KEY",
                                    body: t.toDer(n).getBytes()
                                };
                                return e.pem.encode(r, {
                                    maxline: i
                                })
                            }
                    }
                    var i = "pki";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/pki", ["require", "module", "./asn1", "./oids", "./pbe", "./pem", "./pbkdf2", "./pkcs12", "./pss", "./rsa", "./util", "./x509"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        var t = function(t, n, i, r) {
                                var a = e.util.createBuffer(),
                                    o = t.length >> 1,
                                    s = o + (1 & t.length),
                                    c = t.substr(0, s),
                                    l = t.substr(o, s),
                                    d = e.util.createBuffer(),
                                    p = e.hmac.create();
                                i = n + i;
                                var u = Math.ceil(r / 16),
                                    f = Math.ceil(r / 20);
                                p.start("MD5", c);
                                var h = e.util.createBuffer();
                                d.putBytes(i);
                                for (var g = 0; u > g; ++g) p.start(null, null),
                                    p.update(d.getBytes()),
                                    d.putBuffer(p.digest()),
                                    p.start(null, null),
                                    p.update(d.bytes() + i),
                                    h.putBuffer(p.digest());
                                p.start("SHA1", l);
                                var m = e.util.createBuffer();
                                d.clear(),
                                    d.putBytes(i);
                                for (var g = 0; f > g; ++g) p.start(null, null),
                                    p.update(d.getBytes()),
                                    d.putBuffer(p.digest()),
                                    p.start(null, null),
                                    p.update(d.bytes() + i),
                                    m.putBuffer(p.digest());
                                return a.putBytes(e.util.xorBytes(h.getBytes(), m.getBytes(), r)),
                                    a
                            },
                            n = function(t, n, i) {
                                var r = e.hmac.create();
                                r.start("SHA1", t);
                                var a = e.util.createBuffer();
                                return a.putInt32(n[0]),
                                    a.putInt32(n[1]),
                                    a.putByte(i.type),
                                    a.putByte(i.version.major),
                                    a.putByte(i.version.minor),
                                    a.putInt16(i.length),
                                    a.putBytes(i.fragment.bytes()),
                                    r.update(a.getBytes()),
                                    r.digest().getBytes()
                            },
                            i = function(t, n, i) {
                                var r = !1;
                                try {
                                    var a = t.deflate(n.fragment.getBytes());
                                    n.fragment = e.util.createBuffer(a),
                                        n.length = a.length,
                                        r = !0
                                } catch(o) {}
                                return r
                            },
                            r = function(t, n, i) {
                                var r = !1;
                                try {
                                    var a = t.inflate(n.fragment.getBytes());
                                    n.fragment = e.util.createBuffer(a),
                                        n.length = a.length,
                                        r = !0
                                } catch(o) {}
                                return r
                            },
                            a = function(t, n) {
                                var i = 0;
                                switch (n) {
                                    case 1:
                                        i = t.getByte();
                                        break;
                                    case 2:
                                        i = t.getInt16();
                                        break;
                                    case 3:
                                        i = t.getInt24();
                                        break;
                                    case 4:
                                        i = t.getInt32()
                                }
                                return e.util.createBuffer(t.getBytes(i))
                            },
                            o = function(e, t, n) {
                                e.putInt(n.length(), t << 3),
                                    e.putBuffer(n)
                            },
                            s = {};
                        s.Versions = {
                            TLS_1_0: {
                                major: 3,
                                minor: 1
                            },
                            TLS_1_1: {
                                major: 3,
                                minor: 2
                            },
                            TLS_1_2: {
                                major: 3,
                                minor: 3
                            }
                        },
                            s.SupportedVersions = [s.Versions.TLS_1_1, s.Versions.TLS_1_0],
                            s.Version = s.SupportedVersions[0],
                            s.MaxFragment = 15360,
                            s.ConnectionEnd = {
                                server: 0,
                                client: 1
                            },
                            s.PRFAlgorithm = {
                                tls_prf_sha256: 0
                            },
                            s.BulkCipherAlgorithm = {
                                none: null,
                                rc4: 0,
                                des3: 1,
                                aes: 2
                            },
                            s.CipherType = {
                                stream: 0,
                                block: 1,
                                aead: 2
                            },
                            s.MACAlgorithm = {
                                none: null,
                                hmac_md5: 0,
                                hmac_sha1: 1,
                                hmac_sha256: 2,
                                hmac_sha384: 3,
                                hmac_sha512: 4
                            },
                            s.CompressionMethod = {
                                none: 0,
                                deflate: 1
                            },
                            s.ContentType = {
                                change_cipher_spec: 20,
                                alert: 21,
                                handshake: 22,
                                application_data: 23,
                                heartbeat: 24
                            },
                            s.HandshakeType = {
                                hello_request: 0,
                                client_hello: 1,
                                server_hello: 2,
                                certificate: 11,
                                server_key_exchange: 12,
                                certificate_request: 13,
                                server_hello_done: 14,
                                certificate_verify: 15,
                                client_key_exchange: 16,
                                finished: 20
                            },
                            s.Alert = {},
                            s.Alert.Level = {
                                warning: 1,
                                fatal: 2
                            },
                            s.Alert.Description = {
                                close_notify: 0,
                                unexpected_message: 10,
                                bad_record_mac: 20,
                                decryption_failed: 21,
                                record_overflow: 22,
                                decompression_failure: 30,
                                handshake_failure: 40,
                                bad_certificate: 42,
                                unsupported_certificate: 43,
                                certificate_revoked: 44,
                                certificate_expired: 45,
                                certificate_unknown: 46,
                                illegal_parameter: 47,
                                unknown_ca: 48,
                                access_denied: 49,
                                decode_error: 50,
                                decrypt_error: 51,
                                export_restriction: 60,
                                protocol_version: 70,
                                insufficient_security: 71,
                                internal_error: 80,
                                user_canceled: 90,
                                no_renegotiation: 100
                            },
                            s.HeartbeatMessageType = {
                                heartbeat_request: 1,
                                heartbeat_response: 2
                            },
                            s.CipherSuites = {},
                            s.getCipherSuite = function(e) {
                                var t = null;
                                for (var n in s.CipherSuites) {
                                    var i = s.CipherSuites[n];
                                    if (i.id[0] === e.charCodeAt(0) && i.id[1] === e.charCodeAt(1)) {
                                        t = i;
                                        break
                                    }
                                }
                                return t
                            },
                            s.handleUnexpected = function(e, t) {
                                var n = !e.open && e.entity === s.ConnectionEnd.client;
                                n || e.error(e, {
                                    message: "Unexpected message. Received TLS record out of order.",
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: s.Alert.Description.unexpected_message
                                    }
                                })
                            },
                            s.handleHelloRequest = function(e, t, n) { ! e.handshaking && e.handshakes > 0 && (s.queue(e, s.createAlert(e, {
                                level: s.Alert.Level.warning,
                                description: s.Alert.Description.no_renegotiation
                            })), s.flush(e)),
                                e.process()
                            },
                            s.parseHelloMessage = function(t, n, i) {
                                var r = null,
                                    o = t.entity === s.ConnectionEnd.client;
                                if (38 > i) t.error(t, {
                                    message: o ? "Invalid ServerHello message. Message too short.": "Invalid ClientHello message. Message too short.",
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: s.Alert.Description.illegal_parameter
                                    }
                                });
                                else {
                                    var c = n.fragment,
                                        l = c.length();
                                    if (r = {
                                            version: {
                                                major: c.getByte(),
                                                minor: c.getByte()
                                            },
                                            random: e.util.createBuffer(c.getBytes(32)),
                                            session_id: a(c, 1),
                                            extensions: []
                                        },
                                            o ? (r.cipher_suite = c.getBytes(2), r.compression_method = c.getByte()) : (r.cipher_suites = a(c, 2), r.compression_methods = a(c, 1)), l = i - (l - c.length()), l > 0) {
                                        for (var d = a(c, 2); d.length() > 0;) r.extensions.push({
                                            type: [d.getByte(), d.getByte()],
                                            data: a(d, 2)
                                        });
                                        if (!o) for (var p = 0; p < r.extensions.length; ++p) {
                                            var u = r.extensions[p];
                                            if (0 === u.type[0] && 0 === u.type[1]) for (var f = a(u.data, 2); f.length() > 0;) {
                                                var h = f.getByte();
                                                if (0 !== h) break;
                                                t.session.extensions.server_name.serverNameList.push(a(f, 2).getBytes())
                                            }
                                        }
                                    }
                                    if (t.session.version && (r.version.major !== t.session.version.major || r.version.minor !== t.session.version.minor)) return t.error(t, {
                                        message: "TLS version change is disallowed during renegotiation.",
                                        send: !0,
                                        alert: {
                                            level: s.Alert.Level.fatal,
                                            description: s.Alert.Description.protocol_version
                                        }
                                    });
                                    if (o) t.session.cipherSuite = s.getCipherSuite(r.cipher_suite);
                                    else for (var g = e.util.createBuffer(r.cipher_suites.bytes()); g.length() > 0 && (t.session.cipherSuite = s.getCipherSuite(g.getBytes(2)), null === t.session.cipherSuite););
                                    if (null === t.session.cipherSuite) return t.error(t, {
                                        message: "No cipher suites in common.",
                                        send: !0,
                                        alert: {
                                            level: s.Alert.Level.fatal,
                                            description: s.Alert.Description.handshake_failure
                                        },
                                        cipherSuite: e.util.bytesToHex(r.cipher_suite)
                                    });
                                    t.session.compressionMethod = o ? r.compression_method: s.CompressionMethod.none
                                }
                                return r
                            },
                            s.createSecurityParameters = function(e, t) {
                                var n = e.entity === s.ConnectionEnd.client,
                                    i = t.random.bytes(),
                                    r = n ? e.session.sp.client_random: i,
                                    a = n ? i: s.createRandom().getBytes();
                                e.session.sp = {
                                    entity: e.entity,
                                    prf_algorithm: s.PRFAlgorithm.tls_prf_sha256,
                                    bulk_cipher_algorithm: null,
                                    cipher_type: null,
                                    enc_key_length: null,
                                    block_length: null,
                                    fixed_iv_length: null,
                                    record_iv_length: null,
                                    mac_algorithm: null,
                                    mac_length: null,
                                    mac_key_length: null,
                                    compression_algorithm: e.session.compressionMethod,
                                    pre_master_secret: null,
                                    master_secret: null,
                                    client_random: r,
                                    server_random: a
                                }
                            },
                            s.handleServerHello = function(e, t, n) {
                                var i = s.parseHelloMessage(e, t, n);
                                if (!e.fail) {
                                    if (! (i.version.minor <= e.version.minor)) return e.error(e, {
                                        message: "Incompatible TLS version.",
                                        send: !0,
                                        alert: {
                                            level: s.Alert.Level.fatal,
                                            description: s.Alert.Description.protocol_version
                                        }
                                    });
                                    e.version.minor = i.version.minor,
                                        e.session.version = e.version;
                                    var r = i.session_id.bytes();
                                    r.length > 0 && r === e.session.id ? (e.expect = f, e.session.resuming = !0, e.session.sp.server_random = i.random.bytes()) : (e.expect = l, e.session.resuming = !1, s.createSecurityParameters(e, i)),
                                        e.session.id = r,
                                        e.process()
                                }
                            },
                            s.handleClientHello = function(t, n, i) {
                                var r = s.parseHelloMessage(t, n, i);
                                if (!t.fail) {
                                    var a = r.session_id.bytes(),
                                        o = null;
                                    if (t.sessionCache && (o = t.sessionCache.getSession(a), null === o ? a = "": (o.version.major !== r.version.major || o.version.minor > r.version.minor) && (o = null, a = "")), 0 === a.length && (a = e.random.getBytes(32)), t.session.id = a, t.session.clientHelloVersion = r.version, t.session.sp = {},
                                            o) t.version = t.session.version = o.version,
                                        t.session.sp = o.sp;
                                    else {
                                        for (var c, l = 1; l < s.SupportedVersions.length && (c = s.SupportedVersions[l], !(c.minor <= r.version.minor)); ++l);
                                        t.version = {
                                            major: c.major,
                                            minor: c.minor
                                        },
                                            t.session.version = t.version
                                    }
                                    null !== o ? (t.expect = _, t.session.resuming = !0, t.session.sp.client_random = r.random.bytes()) : (t.expect = t.verifyClient !== !1 ? v: C, t.session.resuming = !1, s.createSecurityParameters(t, r)),
                                        t.open = !0,
                                        s.queue(t, s.createRecord(t, {
                                            type: s.ContentType.handshake,
                                            data: s.createServerHello(t)
                                        })),
                                        t.session.resuming ? (s.queue(t, s.createRecord(t, {
                                            type: s.ContentType.change_cipher_spec,
                                            data: s.createChangeCipherSpec()
                                        })), t.state.pending = s.createConnectionState(t), t.state.current.write = t.state.pending.write, s.queue(t, s.createRecord(t, {
                                            type: s.ContentType.handshake,
                                            data: s.createFinished(t)
                                        }))) : (s.queue(t, s.createRecord(t, {
                                            type: s.ContentType.handshake,
                                            data: s.createCertificate(t)
                                        })), t.fail || (s.queue(t, s.createRecord(t, {
                                            type: s.ContentType.handshake,
                                            data: s.createServerKeyExchange(t)
                                        })), t.verifyClient !== !1 && s.queue(t, s.createRecord(t, {
                                            type: s.ContentType.handshake,
                                            data: s.createCertificateRequest(t)
                                        })), s.queue(t, s.createRecord(t, {
                                            type: s.ContentType.handshake,
                                            data: s.createServerHelloDone(t)
                                        })))),
                                        s.flush(t),
                                        t.process()
                                }
                            },
                            s.handleCertificate = function(t, n, i) {
                                if (3 > i) return t.error(t, {
                                    message: "Invalid Certificate message. Message too short.",
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: s.Alert.Description.illegal_parameter
                                    }
                                });
                                var r, o, c = n.fragment,
                                    l = {
                                        certificate_list: a(c, 3)
                                    },
                                    p = [];
                                try {
                                    for (; l.certificate_list.length() > 0;) r = a(l.certificate_list, 3),
                                        o = e.asn1.fromDer(r),
                                        r = e.pki.certificateFromAsn1(o, !0),
                                        p.push(r)
                                } catch(u) {
                                    return t.error(t, {
                                        message: "Could not parse certificate list.",
                                        cause: u,
                                        send: !0,
                                        alert: {
                                            level: s.Alert.Level.fatal,
                                            description: s.Alert.Description.bad_certificate
                                        }
                                    })
                                }
                                var f = t.entity === s.ConnectionEnd.client; ! f && t.verifyClient !== !0 || 0 !== p.length ? 0 === p.length ? t.expect = f ? d: C: (f ? t.session.serverCertificate = p[0] : t.session.clientCertificate = p[0], s.verifyCertificateChain(t, p) && (t.expect = f ? d: C)) : t.error(t, {
                                    message: f ? "No server certificate provided.": "No client certificate provided.",
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: s.Alert.Description.illegal_parameter
                                    }
                                }),
                                    t.process()
                            },
                            s.handleServerKeyExchange = function(e, t, n) {
                                return n > 0 ? e.error(e, {
                                    message: "Invalid key parameters. Only RSA is supported.",
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: s.Alert.Description.unsupported_certificate
                                    }
                                }) : (e.expect = p, void e.process())
                            },
                            s.handleClientKeyExchange = function(t, n, i) {
                                if (48 > i) return t.error(t, {
                                    message: "Invalid key parameters. Only RSA is supported.",
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: s.Alert.Description.unsupported_certificate
                                    }
                                });
                                var r = n.fragment,
                                    o = {
                                        enc_pre_master_secret: a(r, 2).getBytes()
                                    },
                                    c = null;
                                if (t.getPrivateKey) try {
                                    c = t.getPrivateKey(t, t.session.serverCertificate),
                                        c = e.pki.privateKeyFromPem(c)
                                } catch(l) {
                                    t.error(t, {
                                        message: "Could not get private key.",
                                        cause: l,
                                        send: !0,
                                        alert: {
                                            level: s.Alert.Level.fatal,
                                            description: s.Alert.Description.internal_error
                                        }
                                    })
                                }
                                if (null === c) return t.error(t, {
                                    message: "No private key set.",
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: s.Alert.Description.internal_error
                                    }
                                });
                                try {
                                    var d = t.session.sp;
                                    d.pre_master_secret = c.decrypt(o.enc_pre_master_secret);
                                    var p = t.session.clientHelloVersion;
                                    if (p.major !== d.pre_master_secret.charCodeAt(0) || p.minor !== d.pre_master_secret.charCodeAt(1)) throw new Error("TLS version rollback attack detected.")
                                } catch(l) {
                                    d.pre_master_secret = e.random.getBytes(48)
                                }
                                t.expect = _,
                                null !== t.session.clientCertificate && (t.expect = S),
                                    t.process()
                            },
                            s.handleCertificateRequest = function(e, t, n) {
                                if (3 > n) return e.error(e, {
                                    message: "Invalid CertificateRequest. Message too short.",
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: s.Alert.Description.illegal_parameter
                                    }
                                });
                                var i = t.fragment,
                                    r = {
                                        certificate_types: a(i, 1),
                                        certificate_authorities: a(i, 2)
                                    };
                                e.session.certificateRequest = r,
                                    e.expect = u,
                                    e.process()
                            },
                            s.handleCertificateVerify = function(t, n, i) {
                                if (2 > i) return t.error(t, {
                                    message: "Invalid CertificateVerify. Message too short.",
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: s.Alert.Description.illegal_parameter
                                    }
                                });
                                var r = n.fragment;
                                r.read -= 4;
                                var o = r.bytes();
                                r.read += 4;
                                var c = {
                                        signature: a(r, 2).getBytes()
                                    },
                                    l = e.util.createBuffer();
                                l.putBuffer(t.session.md5.digest()),
                                    l.putBuffer(t.session.sha1.digest()),
                                    l = l.getBytes();
                                try {
                                    var d = t.session.clientCertificate;
                                    if (!d.publicKey.verify(l, c.signature, "NONE")) throw new Error("CertificateVerify signature does not match.");
                                    t.session.md5.update(o),
                                        t.session.sha1.update(o)
                                } catch(p) {
                                    return t.error(t, {
                                        message: "Bad signature in CertificateVerify.",
                                        send: !0,
                                        alert: {
                                            level: s.Alert.Level.fatal,
                                            description: s.Alert.Description.handshake_failure
                                        }
                                    })
                                }
                                t.expect = _,
                                    t.process()
                            },
                            s.handleServerHelloDone = function(t, n, i) {
                                if (i > 0) return t.error(t, {
                                    message: "Invalid ServerHelloDone message. Invalid length.",
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: s.Alert.Description.record_overflow
                                    }
                                });
                                if (null === t.serverCertificate) {
                                    var r = {
                                            message: "No server certificate provided. Not enough security.",
                                            send: !0,
                                            alert: {
                                                level: s.Alert.Level.fatal,
                                                description: s.Alert.Description.insufficient_security
                                            }
                                        },
                                        a = 0,
                                        o = t.verify(t, r.alert.description, a, []);
                                    if (o !== !0) return (o || 0 === o) && ("object" != typeof o || e.util.isArray(o) ? "number" == typeof o && (r.alert.description = o) : (o.message && (r.message = o.message), o.alert && (r.alert.description = o.alert))),
                                        t.error(t, r)
                                }
                                null !== t.session.certificateRequest && (n = s.createRecord(t, {
                                    type: s.ContentType.handshake,
                                    data: s.createCertificate(t)
                                }), s.queue(t, n)),
                                    n = s.createRecord(t, {
                                        type: s.ContentType.handshake,
                                        data: s.createClientKeyExchange(t)
                                    }),
                                    s.queue(t, n),
                                    t.expect = m;
                                var c = function(e, t) {
                                    null !== e.session.certificateRequest && null !== e.session.clientCertificate && s.queue(e, s.createRecord(e, {
                                        type: s.ContentType.handshake,
                                        data: s.createCertificateVerify(e, t)
                                    })),
                                        s.queue(e, s.createRecord(e, {
                                            type: s.ContentType.change_cipher_spec,
                                            data: s.createChangeCipherSpec()
                                        })),
                                        e.state.pending = s.createConnectionState(e),
                                        e.state.current.write = e.state.pending.write,
                                        s.queue(e, s.createRecord(e, {
                                            type: s.ContentType.handshake,
                                            data: s.createFinished(e)
                                        })),
                                        e.expect = f,
                                        s.flush(e),
                                        e.process()
                                };
                                return null === t.session.certificateRequest || null === t.session.clientCertificate ? c(t, null) : void s.getClientSignature(t, c)
                            },
                            s.handleChangeCipherSpec = function(e, t) {
                                if (1 !== t.fragment.getByte()) return e.error(e, {
                                    message: "Invalid ChangeCipherSpec message received.",
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: s.Alert.Description.illegal_parameter
                                    }
                                });
                                var n = e.entity === s.ConnectionEnd.client; (e.session.resuming && n || !e.session.resuming && !n) && (e.state.pending = s.createConnectionState(e)),
                                    e.state.current.read = e.state.pending.read,
                                (!e.session.resuming && n || e.session.resuming && !n) && (e.state.pending = null),
                                    e.expect = n ? h: b,
                                    e.process()
                            },
                            s.handleFinished = function(n, i, r) {
                                var a = i.fragment;
                                a.read -= 4;
                                var o = a.bytes();
                                a.read += 4;
                                var c = i.fragment.getBytes();
                                a = e.util.createBuffer(),
                                    a.putBuffer(n.session.md5.digest()),
                                    a.putBuffer(n.session.sha1.digest());
                                var l = n.entity === s.ConnectionEnd.client,
                                    d = l ? "server finished": "client finished",
                                    p = n.session.sp,
                                    u = 12,
                                    f = t;
                                return a = f(p.master_secret, d, a.getBytes(), u),
                                    a.getBytes() !== c ? n.error(n, {
                                        message: "Invalid verify_data in Finished message.",
                                        send: !0,
                                        alert: {
                                            level: s.Alert.Level.fatal,
                                            description: s.Alert.Description.decrypt_error
                                        }
                                    }) : (n.session.md5.update(o), n.session.sha1.update(o), (n.session.resuming && l || !n.session.resuming && !l) && (s.queue(n, s.createRecord(n, {
                                        type: s.ContentType.change_cipher_spec,
                                        data: s.createChangeCipherSpec()
                                    })), n.state.current.write = n.state.pending.write, n.state.pending = null, s.queue(n, s.createRecord(n, {
                                        type: s.ContentType.handshake,
                                        data: s.createFinished(n)
                                    }))), n.expect = l ? g: E, n.handshaking = !1, ++n.handshakes, n.peerCertificate = l ? n.session.serverCertificate: n.session.clientCertificate, s.flush(n), n.isConnected = !0, n.connected(n), n.process(), void 0)
                            },
                            s.handleAlert = function(e, t) {
                                var n, i = t.fragment,
                                    r = {
                                        level: i.getByte(),
                                        description: i.getByte()
                                    };
                                switch (r.description) {
                                    case s.Alert.Description.close_notify:
                                        n = "Connection closed.";
                                        break;
                                    case s.Alert.Description.unexpected_message:
                                        n = "Unexpected message.";
                                        break;
                                    case s.Alert.Description.bad_record_mac:
                                        n = "Bad record MAC.";
                                        break;
                                    case s.Alert.Description.decryption_failed:
                                        n = "Decryption failed.";
                                        break;
                                    case s.Alert.Description.record_overflow:
                                        n = "Record overflow.";
                                        break;
                                    case s.Alert.Description.decompression_failure:
                                        n = "Decompression failed.";
                                        break;
                                    case s.Alert.Description.handshake_failure:
                                        n = "Handshake failure.";
                                        break;
                                    case s.Alert.Description.bad_certificate:
                                        n = "Bad certificate.";
                                        break;
                                    case s.Alert.Description.unsupported_certificate:
                                        n = "Unsupported certificate.";
                                        break;
                                    case s.Alert.Description.certificate_revoked:
                                        n = "Certificate revoked.";
                                        break;
                                    case s.Alert.Description.certificate_expired:
                                        n = "Certificate expired.";
                                        break;
                                    case s.Alert.Description.certificate_unknown:
                                        n = "Certificate unknown.";
                                        break;
                                    case s.Alert.Description.illegal_parameter:
                                        n = "Illegal parameter.";
                                        break;
                                    case s.Alert.Description.unknown_ca:
                                        n = "Unknown certificate authority.";
                                        break;
                                    case s.Alert.Description.access_denied:
                                        n = "Access denied.";
                                        break;
                                    case s.Alert.Description.decode_error:
                                        n = "Decode error.";
                                        break;
                                    case s.Alert.Description.decrypt_error:
                                        n = "Decrypt error.";
                                        break;
                                    case s.Alert.Description.export_restriction:
                                        n = "Export restriction.";
                                        break;
                                    case s.Alert.Description.protocol_version:
                                        n = "Unsupported protocol version.";
                                        break;
                                    case s.Alert.Description.insufficient_security:
                                        n = "Insufficient security.";
                                        break;
                                    case s.Alert.Description.internal_error:
                                        n = "Internal error.";
                                        break;
                                    case s.Alert.Description.user_canceled:
                                        n = "User canceled.";
                                        break;
                                    case s.Alert.Description.no_renegotiation:
                                        n = "Renegotiation not supported.";
                                        break;
                                    default:
                                        n = "Unknown error."
                                }
                                return r.description === s.Alert.Description.close_notify ? e.close() : (e.error(e, {
                                    message: n,
                                    send: !1,
                                    origin: e.entity === s.ConnectionEnd.client ? "server": "client",
                                    alert: r
                                }), void e.process())
                            },
                            s.handleHandshake = function(t, n) {
                                var i = n.fragment,
                                    r = i.getByte(),
                                    a = i.getInt24();
                                if (a > i.length()) return t.fragmented = n,
                                    n.fragment = e.util.createBuffer(),
                                    i.read -= 4,
                                    t.process();
                                t.fragmented = null,
                                    i.read -= 4;
                                var o = i.bytes(a + 4);
                                i.read += 4,
                                    r in M[t.entity][t.expect] ? (t.entity === s.ConnectionEnd.server && !t.open && !t.fail && (t.handshaking = !0, t.session = {
                                        version: null,
                                        extensions: {
                                            server_name: {
                                                serverNameList: []
                                            }
                                        },
                                        cipherSuite: null,
                                        compressionMethod: null,
                                        serverCertificate: null,
                                        clientCertificate: null,
                                        md5: e.md.md5.create(),
                                        sha1: e.md.sha1.create()
                                    }), r !== s.HandshakeType.hello_request && r !== s.HandshakeType.certificate_verify && r !== s.HandshakeType.finished && (t.session.md5.update(o), t.session.sha1.update(o)), M[t.entity][t.expect][r](t, n, a)) : s.handleUnexpected(t, n)
                            },
                            s.handleApplicationData = function(e, t) {
                                e.data.putBuffer(t.fragment),
                                    e.dataReady(e),
                                    e.process()
                            },
                            s.handleHeartbeat = function(t, n) {
                                var i = n.fragment,
                                    r = i.getByte(),
                                    a = i.getInt16(),
                                    o = i.getBytes(a);
                                if (r === s.HeartbeatMessageType.heartbeat_request) {
                                    if (t.handshaking || a > o.length) return t.process();
                                    s.queue(t, s.createRecord(t, {
                                        type: s.ContentType.heartbeat,
                                        data: s.createHeartbeat(s.HeartbeatMessageType.heartbeat_response, o)
                                    })),
                                        s.flush(t)
                                } else if (r === s.HeartbeatMessageType.heartbeat_response) {
                                    if (o !== t.expectedHeartbeatPayload) return t.process();
                                    t.heartbeatReceived && t.heartbeatReceived(t, e.util.createBuffer(o))
                                }
                                t.process()
                            };
                        var c = 0,
                            l = 1,
                            d = 2,
                            p = 3,
                            u = 4,
                            f = 5,
                            h = 6,
                            g = 7,
                            m = 8,
                            y = 0,
                            v = 1,
                            C = 2,
                            S = 3,
                            _ = 4,
                            b = 5,
                            E = 6,
                            I = s.handleUnexpected,
                            A = s.handleChangeCipherSpec,
                            T = s.handleAlert,
                            k = s.handleHandshake,
                            w = s.handleApplicationData,
                            $ = s.handleHeartbeat,
                            P = [];
                        P[s.ConnectionEnd.client] = [[I, T, k, I, $], [I, T, k, I, $], [I, T, k, I, $], [I, T, k, I, $], [I, T, k, I, $], [A, T, I, I, $], [I, T, k, I, $], [I, T, k, w, $], [I, T, k, I, $]],
                            P[s.ConnectionEnd.server] = [[I, T, k, I, $], [I, T, k, I, $], [I, T, k, I, $], [I, T, k, I, $], [A, T, I, I, $], [I, T, k, I, $], [I, T, k, w, $], [I, T, k, I, $]];
                        var N = s.handleHelloRequest,
                            D = s.handleServerHello,
                            R = s.handleCertificate,
                            B = s.handleServerKeyExchange,
                            O = s.handleCertificateRequest,
                            U = s.handleServerHelloDone,
                            L = s.handleFinished,
                            M = [];
                        M[s.ConnectionEnd.client] = [[I, I, D, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I], [N, I, I, I, I, I, I, I, I, I, I, R, B, O, U, I, I, I, I, I, I], [N, I, I, I, I, I, I, I, I, I, I, I, B, O, U, I, I, I, I, I, I], [N, I, I, I, I, I, I, I, I, I, I, I, I, O, U, I, I, I, I, I, I], [N, I, I, I, I, I, I, I, I, I, I, I, I, I, U, I, I, I, I, I, I], [N, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I], [N, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, L], [N, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I], [N, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I]];
                        var x = s.handleClientHello,
                            F = s.handleClientKeyExchange,
                            V = s.handleCertificateVerify;
                        M[s.ConnectionEnd.server] = [[I, x, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I], [I, I, I, I, I, I, I, I, I, I, I, R, I, I, I, I, I, I, I, I, I], [I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, F, I, I, I, I], [I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, V, I, I, I, I, I], [I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I], [I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, L], [I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I], [I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I]],
                            s.generateKeys = function(e, n) {
                                var i = t,
                                    r = n.client_random + n.server_random;
                                e.session.resuming || (n.master_secret = i(n.pre_master_secret, "master secret", r, 48).bytes(), n.pre_master_secret = null),
                                    r = n.server_random + n.client_random;
                                var a = 2 * n.mac_key_length + 2 * n.enc_key_length,
                                    o = e.version.major === s.Versions.TLS_1_0.major && e.version.minor === s.Versions.TLS_1_0.minor;
                                o && (a += 2 * n.fixed_iv_length);
                                var c = i(n.master_secret, "key expansion", r, a),
                                    l = {
                                        client_write_MAC_key: c.getBytes(n.mac_key_length),
                                        server_write_MAC_key: c.getBytes(n.mac_key_length),
                                        client_write_key: c.getBytes(n.enc_key_length),
                                        server_write_key: c.getBytes(n.enc_key_length)
                                    };
                                return o && (l.client_write_IV = c.getBytes(n.fixed_iv_length), l.server_write_IV = c.getBytes(n.fixed_iv_length)),
                                    l
                            },
                            s.createConnectionState = function(e) {
                                var t = e.entity === s.ConnectionEnd.client,
                                    n = function() {
                                        var e = {
                                            sequenceNumber: [0, 0],
                                            macKey: null,
                                            macLength: 0,
                                            macFunction: null,
                                            cipherState: null,
                                            cipherFunction: function(e) {
                                                return ! 0
                                            },
                                            compressionState: null,
                                            compressFunction: function(e) {
                                                return ! 0
                                            },
                                            updateSequenceNumber: function() {
                                                4294967295 === e.sequenceNumber[1] ? (e.sequenceNumber[1] = 0, ++e.sequenceNumber[0]) : ++e.sequenceNumber[1]
                                            }
                                        };
                                        return e
                                    },
                                    a = {
                                        read: n(),
                                        write: n()
                                    };
                                if (a.read.update = function(e, t) {
                                        return a.read.cipherFunction(t, a.read) ? a.read.compressFunction(e, t, a.read) || e.error(e, {
                                            message: "Could not decompress record.",
                                            send: !0,
                                            alert: {
                                                level: s.Alert.Level.fatal,
                                                description: s.Alert.Description.decompression_failure
                                            }
                                        }) : e.error(e, {
                                            message: "Could not decrypt record or bad MAC.",
                                            send: !0,
                                            alert: {
                                                level: s.Alert.Level.fatal,
                                                description: s.Alert.Description.bad_record_mac
                                            }
                                        }),
                                            !e.fail
                                    },
                                        a.write.update = function(e, t) {
                                            return a.write.compressFunction(e, t, a.write) ? a.write.cipherFunction(t, a.write) || e.error(e, {
                                                message: "Could not encrypt record.",
                                                send: !1,
                                                alert: {
                                                    level: s.Alert.Level.fatal,
                                                    description: s.Alert.Description.internal_error
                                                }
                                            }) : e.error(e, {
                                                message: "Could not compress record.",
                                                send: !1,
                                                alert: {
                                                    level: s.Alert.Level.fatal,
                                                    description: s.Alert.Description.internal_error
                                                }
                                            }),
                                                !e.fail
                                        },
                                        e.session) {
                                    var o = e.session.sp;
                                    switch (e.session.cipherSuite.initSecurityParameters(o), o.keys = s.generateKeys(e, o), a.read.macKey = t ? o.keys.server_write_MAC_key: o.keys.client_write_MAC_key, a.write.macKey = t ? o.keys.client_write_MAC_key: o.keys.server_write_MAC_key, e.session.cipherSuite.initConnectionState(a, e, o), o.compression_algorithm) {
                                        case s.CompressionMethod.none:
                                            break;
                                        case s.CompressionMethod.deflate:
                                            a.read.compressFunction = r,
                                                a.write.compressFunction = i;
                                            break;
                                        default:
                                            throw new Error("Unsupported compression algorithm.")
                                    }
                                }
                                return a
                            },
                            s.createRandom = function() {
                                var t = new Date,
                                    n = +t + 6e4 * t.getTimezoneOffset(),
                                    i = e.util.createBuffer();
                                return i.putInt32(n),
                                    i.putBytes(e.random.getBytes(28)),
                                    i
                            },
                            s.createRecord = function(e, t) {
                                if (!t.data) return null;
                                var n = {
                                    type: t.type,
                                    version: {
                                        major: e.version.major,
                                        minor: e.version.minor
                                    },
                                    length: t.data.length(),
                                    fragment: t.data
                                };
                                return n
                            },
                            s.createAlert = function(t, n) {
                                var i = e.util.createBuffer();
                                return i.putByte(n.level),
                                    i.putByte(n.description),
                                    s.createRecord(t, {
                                        type: s.ContentType.alert,
                                        data: i
                                    })
                            },
                            s.createClientHello = function(t) {
                                t.session.clientHelloVersion = {
                                    major: t.version.major,
                                    minor: t.version.minor
                                };
                                for (var n = e.util.createBuffer(), i = 0; i < t.cipherSuites.length; ++i) {
                                    var r = t.cipherSuites[i];
                                    n.putByte(r.id[0]),
                                        n.putByte(r.id[1])
                                }
                                var a = n.length(),
                                    c = e.util.createBuffer();
                                c.putByte(s.CompressionMethod.none);
                                var l = c.length(),
                                    d = e.util.createBuffer();
                                if (t.virtualHost) {
                                    var p = e.util.createBuffer();
                                    p.putByte(0),
                                        p.putByte(0);
                                    var u = e.util.createBuffer();
                                    u.putByte(0),
                                        o(u, 2, e.util.createBuffer(t.virtualHost));
                                    var f = e.util.createBuffer();
                                    o(f, 2, u),
                                        o(p, 2, f),
                                        d.putBuffer(p)
                                }
                                var h = d.length();
                                h > 0 && (h += 2);
                                var g = t.session.id,
                                    m = g.length + 1 + 2 + 4 + 28 + 2 + a + 1 + l + h,
                                    y = e.util.createBuffer();
                                return y.putByte(s.HandshakeType.client_hello),
                                    y.putInt24(m),
                                    y.putByte(t.version.major),
                                    y.putByte(t.version.minor),
                                    y.putBytes(t.session.sp.client_random),
                                    o(y, 1, e.util.createBuffer(g)),
                                    o(y, 2, n),
                                    o(y, 1, c),
                                h > 0 && o(y, 2, d),
                                    y
                            },
                            s.createServerHello = function(t) {
                                var n = t.session.id,
                                    i = n.length + 1 + 2 + 4 + 28 + 2 + 1,
                                    r = e.util.createBuffer();
                                return r.putByte(s.HandshakeType.server_hello),
                                    r.putInt24(i),
                                    r.putByte(t.version.major),
                                    r.putByte(t.version.minor),
                                    r.putBytes(t.session.sp.server_random),
                                    o(r, 1, e.util.createBuffer(n)),
                                    r.putByte(t.session.cipherSuite.id[0]),
                                    r.putByte(t.session.cipherSuite.id[1]),
                                    r.putByte(t.session.compressionMethod),
                                    r
                            },
                            s.createCertificate = function(t) {
                                var n = t.entity === s.ConnectionEnd.client,
                                    i = null;
                                if (t.getCertificate) {
                                    var r;
                                    r = n ? t.session.certificateRequest: t.session.extensions.server_name.serverNameList,
                                        i = t.getCertificate(t, r)
                                }
                                var a = e.util.createBuffer();
                                if (null !== i) try {
                                    e.util.isArray(i) || (i = [i]);
                                    for (var c = null,
                                             l = 0; l < i.length; ++l) {
                                        var d = e.pem.decode(i[l])[0];
                                        if ("CERTIFICATE" !== d.type && "X509 CERTIFICATE" !== d.type && "TRUSTED CERTIFICATE" !== d.type) {
                                            var p = new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');
                                            throw p.headerType = d.type,
                                                p
                                        }
                                        if (d.procType && "ENCRYPTED" === d.procType.type) throw new Error("Could not convert certificate from PEM; PEM is encrypted.");
                                        var u = e.util.createBuffer(d.body);
                                        null === c && (c = e.asn1.fromDer(u.bytes(), !1));
                                        var f = e.util.createBuffer();
                                        o(f, 3, u),
                                            a.putBuffer(f)
                                    }
                                    i = e.pki.certificateFromAsn1(c),
                                        n ? t.session.clientCertificate = i: t.session.serverCertificate = i
                                } catch(h) {
                                    return t.error(t, {
                                        message: "Could not send certificate list.",
                                        cause: h,
                                        send: !0,
                                        alert: {
                                            level: s.Alert.Level.fatal,
                                            description: s.Alert.Description.bad_certificate
                                        }
                                    })
                                }
                                var g = 3 + a.length(),
                                    m = e.util.createBuffer();
                                return m.putByte(s.HandshakeType.certificate),
                                    m.putInt24(g),
                                    o(m, 3, a),
                                    m
                            },
                            s.createClientKeyExchange = function(t) {
                                var n = e.util.createBuffer();
                                n.putByte(t.session.clientHelloVersion.major),
                                    n.putByte(t.session.clientHelloVersion.minor),
                                    n.putBytes(e.random.getBytes(46));
                                var i = t.session.sp;
                                i.pre_master_secret = n.getBytes();
                                var r = t.session.serverCertificate.publicKey;
                                n = r.encrypt(i.pre_master_secret);
                                var a = n.length + 2,
                                    o = e.util.createBuffer();
                                return o.putByte(s.HandshakeType.client_key_exchange),
                                    o.putInt24(a),
                                    o.putInt16(n.length),
                                    o.putBytes(n),
                                    o
                            },
                            s.createServerKeyExchange = function(t) {
                                var n = 0,
                                    i = e.util.createBuffer();
                                return n > 0 && (i.putByte(s.HandshakeType.server_key_exchange), i.putInt24(n)),
                                    i
                            },
                            s.getClientSignature = function(t, n) {
                                var i = e.util.createBuffer();
                                i.putBuffer(t.session.md5.digest()),
                                    i.putBuffer(t.session.sha1.digest()),
                                    i = i.getBytes(),
                                    t.getSignature = t.getSignature ||
                                        function(t, n, i) {
                                            var r = null;
                                            if (t.getPrivateKey) try {
                                                r = t.getPrivateKey(t, t.session.clientCertificate),
                                                    r = e.pki.privateKeyFromPem(r)
                                            } catch(a) {
                                                t.error(t, {
                                                    message: "Could not get private key.",
                                                    cause: a,
                                                    send: !0,
                                                    alert: {
                                                        level: s.Alert.Level.fatal,
                                                        description: s.Alert.Description.internal_error
                                                    }
                                                })
                                            }
                                            null === r ? t.error(t, {
                                                message: "No private key set.",
                                                send: !0,
                                                alert: {
                                                    level: s.Alert.Level.fatal,
                                                    description: s.Alert.Description.internal_error
                                                }
                                            }) : n = r.sign(n, null),
                                                i(t, n)
                                        },
                                    t.getSignature(t, i, n)
                            },
                            s.createCertificateVerify = function(t, n) {
                                var i = n.length + 2,
                                    r = e.util.createBuffer();
                                return r.putByte(s.HandshakeType.certificate_verify),
                                    r.putInt24(i),
                                    r.putInt16(n.length),
                                    r.putBytes(n),
                                    r
                            },
                            s.createCertificateRequest = function(t) {
                                var n = e.util.createBuffer();
                                n.putByte(1);
                                var i = e.util.createBuffer();
                                for (var r in t.caStore.certs) {
                                    var a = t.caStore.certs[r],
                                        c = e.pki.distinguishedNameToAsn1(a.subject),
                                        l = e.asn1.toDer(c);
                                    i.putInt16(l.length()),
                                        i.putBuffer(l)
                                }
                                var d = 1 + n.length() + 2 + i.length(),
                                    p = e.util.createBuffer();
                                return p.putByte(s.HandshakeType.certificate_request),
                                    p.putInt24(d),
                                    o(p, 1, n),
                                    o(p, 2, i),
                                    p
                            },
                            s.createServerHelloDone = function(t) {
                                var n = e.util.createBuffer();
                                return n.putByte(s.HandshakeType.server_hello_done),
                                    n.putInt24(0),
                                    n
                            },
                            s.createChangeCipherSpec = function() {
                                var t = e.util.createBuffer();
                                return t.putByte(1),
                                    t
                            },
                            s.createFinished = function(n) {
                                var i = e.util.createBuffer();
                                i.putBuffer(n.session.md5.digest()),
                                    i.putBuffer(n.session.sha1.digest());
                                var r = n.entity === s.ConnectionEnd.client,
                                    a = n.session.sp,
                                    o = 12,
                                    c = t,
                                    l = r ? "client finished": "server finished";
                                i = c(a.master_secret, l, i.getBytes(), o);
                                var d = e.util.createBuffer();
                                return d.putByte(s.HandshakeType.finished),
                                    d.putInt24(i.length()),
                                    d.putBuffer(i),
                                    d
                            },
                            s.createHeartbeat = function(t, n, i) {
                                "undefined" == typeof i && (i = n.length);
                                var r = e.util.createBuffer();
                                r.putByte(t),
                                    r.putInt16(i),
                                    r.putBytes(n);
                                var a = r.length(),
                                    o = Math.max(16, a - i - 3);
                                return r.putBytes(e.random.getBytes(o)),
                                    r
                            },
                            s.queue = function(t, n) {
                                if (n) {
                                    if (n.type === s.ContentType.handshake) {
                                        var i = n.fragment.bytes();
                                        t.session.md5.update(i),
                                            t.session.sha1.update(i),
                                            i = null
                                    }
                                    var r;
                                    if (n.fragment.length() <= s.MaxFragment) r = [n];
                                    else {
                                        r = [];
                                        for (var a = n.fragment.bytes(); a.length > s.MaxFragment;) r.push(s.createRecord(t, {
                                            type: n.type,
                                            data: e.util.createBuffer(a.slice(0, s.MaxFragment))
                                        })),
                                            a = a.slice(s.MaxFragment);
                                        a.length > 0 && r.push(s.createRecord(t, {
                                            type: n.type,
                                            data: e.util.createBuffer(a)
                                        }))
                                    }
                                    for (var o = 0; o < r.length && !t.fail; ++o) {
                                        var c = r[o],
                                            l = t.state.current.write;
                                        l.update(t, c) && t.records.push(c)
                                    }
                                }
                            },
                            s.flush = function(e) {
                                for (var t = 0; t < e.records.length; ++t) {
                                    var n = e.records[t];
                                    e.tlsData.putByte(n.type),
                                        e.tlsData.putByte(n.version.major),
                                        e.tlsData.putByte(n.version.minor),
                                        e.tlsData.putInt16(n.fragment.length()),
                                        e.tlsData.putBuffer(e.records[t].fragment)
                                }
                                return e.records = [],
                                    e.tlsDataReady(e)
                            };
                        var H = function(t) {
                                switch (t) {
                                    case ! 0 : return ! 0;
                                    case e.pki.certificateError.bad_certificate:
                                        return s.Alert.Description.bad_certificate;
                                    case e.pki.certificateError.unsupported_certificate:
                                        return s.Alert.Description.unsupported_certificate;
                                    case e.pki.certificateError.certificate_revoked:
                                        return s.Alert.Description.certificate_revoked;
                                    case e.pki.certificateError.certificate_expired:
                                        return s.Alert.Description.certificate_expired;
                                    case e.pki.certificateError.certificate_unknown:
                                        return s.Alert.Description.certificate_unknown;
                                    case e.pki.certificateError.unknown_ca:
                                        return s.Alert.Description.unknown_ca;
                                    default:
                                        return s.Alert.Description.bad_certificate
                                }
                            },
                            K = function(t) {
                                switch (t) {
                                    case ! 0 : return ! 0;
                                    case s.Alert.Description.bad_certificate:
                                        return e.pki.certificateError.bad_certificate;
                                    case s.Alert.Description.unsupported_certificate:
                                        return e.pki.certificateError.unsupported_certificate;
                                    case s.Alert.Description.certificate_revoked:
                                        return e.pki.certificateError.certificate_revoked;
                                    case s.Alert.Description.certificate_expired:
                                        return e.pki.certificateError.certificate_expired;
                                    case s.Alert.Description.certificate_unknown:
                                        return e.pki.certificateError.certificate_unknown;
                                    case s.Alert.Description.unknown_ca:
                                        return e.pki.certificateError.unknown_ca;
                                    default:
                                        return e.pki.certificateError.bad_certificate
                                }
                            };
                        s.verifyCertificateChain = function(t, n) {
                            try {
                                e.pki.verifyCertificateChain(t.caStore, n,
                                    function(n, i, r) {
                                        var a = (H(n), t.verify(t, n, i, r));
                                        if (a !== !0) {
                                            if ("object" == typeof a && !e.util.isArray(a)) {
                                                var o = new Error("The application rejected the certificate.");
                                                throw o.send = !0,
                                                    o.alert = {
                                                        level: s.Alert.Level.fatal,
                                                        description: s.Alert.Description.bad_certificate
                                                    },
                                                a.message && (o.message = a.message),
                                                a.alert && (o.alert.description = a.alert),
                                                    o
                                            }
                                            a !== n && (a = K(a))
                                        }
                                        return a
                                    })
                            } catch(i) {
                                var r = i; ("object" != typeof r || e.util.isArray(r)) && (r = {
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: H(i)
                                    }
                                }),
                                "send" in r || (r.send = !0),
                                "alert" in r || (r.alert = {
                                    level: s.Alert.Level.fatal,
                                    description: H(r.error)
                                }),
                                    t.error(t, r)
                            }
                            return ! t.fail
                        },
                            s.createSessionCache = function(t, n) {
                                var i = null;
                                if (t && t.getSession && t.setSession && t.order) i = t;
                                else {
                                    i = {},
                                        i.cache = t || {},
                                        i.capacity = Math.max(n || 100, 1),
                                        i.order = [];
                                    for (var r in t) i.order.length <= n ? i.order.push(r) : delete t[r];
                                    i.getSession = function(t) {
                                        var n = null,
                                            r = null;
                                        if (t ? r = e.util.bytesToHex(t) : i.order.length > 0 && (r = i.order[0]), null !== r && r in i.cache) {
                                            n = i.cache[r],
                                                delete i.cache[r];
                                            for (var a in i.order) if (i.order[a] === r) {
                                                i.order.splice(a, 1);
                                                break
                                            }
                                        }
                                        return n
                                    },
                                        i.setSession = function(t, n) {
                                            if (i.order.length === i.capacity) {
                                                var r = i.order.shift();
                                                delete i.cache[r]
                                            }
                                            var r = e.util.bytesToHex(t);
                                            i.order.push(r),
                                                i.cache[r] = n
                                        }
                                }
                                return i
                            },
                            s.createConnection = function(t) {
                                var n = null;
                                n = t.caStore ? e.util.isArray(t.caStore) ? e.pki.createCaStore(t.caStore) : t.caStore: e.pki.createCaStore();
                                var i = t.cipherSuites || null;
                                if (null === i) {
                                    i = [];
                                    for (var r in s.CipherSuites) i.push(s.CipherSuites[r])
                                }
                                var a = t.server ? s.ConnectionEnd.server: s.ConnectionEnd.client,
                                    o = t.sessionCache ? s.createSessionCache(t.sessionCache) : null,
                                    l = {
                                        version: {
                                            major: s.Version.major,
                                            minor: s.Version.minor
                                        },
                                        entity: a,
                                        sessionId: t.sessionId,
                                        caStore: n,
                                        sessionCache: o,
                                        cipherSuites: i,
                                        connected: t.connected,
                                        virtualHost: t.virtualHost || null,
                                        verifyClient: t.verifyClient || !1,
                                        verify: t.verify ||
                                        function(e, t, n, i) {
                                            return t
                                        },
                                        getCertificate: t.getCertificate || null,
                                        getPrivateKey: t.getPrivateKey || null,
                                        getSignature: t.getSignature || null,
                                        input: e.util.createBuffer(),
                                        tlsData: e.util.createBuffer(),
                                        data: e.util.createBuffer(),
                                        tlsDataReady: t.tlsDataReady,
                                        dataReady: t.dataReady,
                                        heartbeatReceived: t.heartbeatReceived,
                                        closed: t.closed,
                                        error: function(e, n) {
                                            n.origin = n.origin || (e.entity === s.ConnectionEnd.client ? "client": "server"),
                                            n.send && (s.queue(e, s.createAlert(e, n.alert)), s.flush(e));
                                            var i = n.fatal !== !1;
                                            i && (e.fail = !0),
                                                t.error(e, n),
                                            i && e.close(!1)
                                        },
                                        deflate: t.deflate || null,
                                        inflate: t.inflate || null
                                    };
                                l.reset = function(e) {
                                    l.version = {
                                        major: s.Version.major,
                                        minor: s.Version.minor
                                    },
                                        l.record = null,
                                        l.session = null,
                                        l.peerCertificate = null,
                                        l.state = {
                                            pending: null,
                                            current: null
                                        },
                                        l.expect = l.entity === s.ConnectionEnd.client ? c: y,
                                        l.fragmented = null,
                                        l.records = [],
                                        l.open = !1,
                                        l.handshakes = 0,
                                        l.handshaking = !1,
                                        l.isConnected = !1,
                                        l.fail = !e && "undefined" != typeof e,
                                        l.input.clear(),
                                        l.tlsData.clear(),
                                        l.data.clear(),
                                        l.state.current = s.createConnectionState(l)
                                },
                                    l.reset();
                                var d = function(e, t) {
                                        var n = t.type - s.ContentType.change_cipher_spec,
                                            i = P[e.entity][e.expect];
                                        n in i ? i[n](e, t) : s.handleUnexpected(e, t)
                                    },
                                    p = function(t) {
                                        var n = 0,
                                            i = t.input,
                                            r = i.length();
                                        if (5 > r) n = 5 - r;
                                        else {
                                            t.record = {
                                                type: i.getByte(),
                                                version: {
                                                    major: i.getByte(),
                                                    minor: i.getByte()
                                                },
                                                length: i.getInt16(),
                                                fragment: e.util.createBuffer(),
                                                ready: !1
                                            };
                                            var a = t.record.version.major === t.version.major;
                                            a && t.session && t.session.version && (a = t.record.version.minor === t.version.minor),
                                            a || t.error(t, {
                                                message: "Incompatible TLS version.",
                                                send: !0,
                                                alert: {
                                                    level: s.Alert.Level.fatal,
                                                    description: s.Alert.Description.protocol_version
                                                }
                                            })
                                        }
                                        return n
                                    },
                                    u = function(e) {
                                        var t = 0,
                                            n = e.input,
                                            i = n.length();
                                        if (i < e.record.length) t = e.record.length - i;
                                        else {
                                            e.record.fragment.putBytes(n.getBytes(e.record.length)),
                                                n.compact();
                                            var r = e.state.current.read;
                                            r.update(e, e.record) && (null !== e.fragmented && (e.fragmented.type === e.record.type ? (e.fragmented.fragment.putBuffer(e.record.fragment), e.record = e.fragmented) : e.error(e, {
                                                message: "Invalid fragmented record.",
                                                send: !0,
                                                alert: {
                                                    level: s.Alert.Level.fatal,
                                                    description: s.Alert.Description.unexpected_message
                                                }
                                            })), e.record.ready = !0)
                                        }
                                        return t
                                    };
                                return l.handshake = function(t) {
                                    if (l.entity !== s.ConnectionEnd.client) l.error(l, {
                                        message: "Cannot initiate handshake as a server.",
                                        fatal: !1
                                    });
                                    else if (l.handshaking) l.error(l, {
                                        message: "Handshake already in progress.",
                                        fatal: !1
                                    });
                                    else {
                                        l.fail && !l.open && 0 === l.handshakes && (l.fail = !1),
                                            l.handshaking = !0,
                                            t = t || "";
                                        var n = null;
                                        t.length > 0 && (l.sessionCache && (n = l.sessionCache.getSession(t)), null === n && (t = "")),
                                        0 === t.length && l.sessionCache && (n = l.sessionCache.getSession(), null !== n && (t = n.id)),
                                            l.session = {
                                                id: t,
                                                version: null,
                                                cipherSuite: null,
                                                compressionMethod: null,
                                                serverCertificate: null,
                                                certificateRequest: null,
                                                clientCertificate: null,
                                                sp: {},
                                                md5: e.md.md5.create(),
                                                sha1: e.md.sha1.create()
                                            },
                                        n && (l.version = n.version, l.session.sp = n.sp),
                                            l.session.sp.client_random = s.createRandom().getBytes(),
                                            l.open = !0,
                                            s.queue(l, s.createRecord(l, {
                                                type: s.ContentType.handshake,
                                                data: s.createClientHello(l)
                                            })),
                                            s.flush(l)
                                    }
                                },
                                    l.process = function(e) {
                                        var t = 0;
                                        return e && l.input.putBytes(e),
                                        l.fail || (null !== l.record && l.record.ready && l.record.fragment.isEmpty() && (l.record = null), null === l.record && (t = p(l)), !l.fail && null !== l.record && !l.record.ready && (t = u(l)), !l.fail && null !== l.record && l.record.ready && d(l, l.record)),
                                            t
                                    },
                                    l.prepare = function(t) {
                                        return s.queue(l, s.createRecord(l, {
                                            type: s.ContentType.application_data,
                                            data: e.util.createBuffer(t)
                                        })),
                                            s.flush(l)
                                    },
                                    l.prepareHeartbeatRequest = function(t, n) {
                                        return t instanceof e.util.ByteBuffer && (t = t.bytes()),
                                        "undefined" == typeof n && (n = t.length),
                                            l.expectedHeartbeatPayload = t,
                                            s.queue(l, s.createRecord(l, {
                                                type: s.ContentType.heartbeat,
                                                data: s.createHeartbeat(s.HeartbeatMessageType.heartbeat_request, t, n)
                                            })),
                                            s.flush(l)
                                    },
                                    l.close = function(e) {
                                        if (!l.fail && l.sessionCache && l.session) {
                                            var t = {
                                                id: l.session.id,
                                                version: l.session.version,
                                                sp: l.session.sp
                                            };
                                            t.sp.keys = null,
                                                l.sessionCache.setSession(t.id, t)
                                        }
                                        l.open && (l.open = !1, l.input.clear(), (l.isConnected || l.handshaking) && (l.isConnected = l.handshaking = !1, s.queue(l, s.createAlert(l, {
                                            level: s.Alert.Level.warning,
                                            description: s.Alert.Description.close_notify
                                        })), s.flush(l)), l.closed(l)),
                                            l.reset(e)
                                    },
                                    l
                            },
                            e.tls = e.tls || {};
                        for (var G in s)"function" != typeof s[G] && (e.tls[G] = s[G]);
                        e.tls.prf_tls1 = t,
                            e.tls.hmac_sha1 = n,
                            e.tls.createSessionCache = s.createSessionCache,
                            e.tls.createConnection = s.createConnection
                    }
                    var i = "tls";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/tls", ["require", "module", "./asn1", "./hmac", "./md", "./pem", "./pki", "./random", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(t, i, r) {
                            var o = i.entity === e.tls.ConnectionEnd.client;
                            t.read.cipherState = {
                                init: !1,
                                cipher: e.cipher.createDecipher("AES-CBC", o ? r.keys.server_write_key: r.keys.client_write_key),
                                iv: o ? r.keys.server_write_IV: r.keys.client_write_IV
                            },
                                t.write.cipherState = {
                                    init: !1,
                                    cipher: e.cipher.createCipher("AES-CBC", o ? r.keys.client_write_key: r.keys.server_write_key),
                                    iv: o ? r.keys.client_write_IV: r.keys.server_write_IV
                                },
                                t.read.cipherFunction = a,
                                t.write.cipherFunction = n,
                                t.read.macLength = t.write.macLength = r.mac_length,
                                t.read.macFunction = t.write.macFunction = s.hmac_sha1
                        }
                        function n(t, n) {
                            var r = !1,
                                a = n.macFunction(n.macKey, n.sequenceNumber, t);
                            t.fragment.putBytes(a),
                                n.updateSequenceNumber();
                            var o;
                            o = t.version.minor === s.Versions.TLS_1_0.minor ? n.cipherState.init ? null: n.cipherState.iv: e.random.getBytesSync(16),
                                n.cipherState.init = !0;
                            var c = n.cipherState.cipher;
                            return c.start({
                                iv: o
                            }),
                            t.version.minor >= s.Versions.TLS_1_1.minor && c.output.putBytes(o),
                                c.update(t.fragment),
                            c.finish(i) && (t.fragment = c.output, t.length = t.fragment.length(), r = !0),
                                r
                        }
                        function i(e, t, n) {
                            if (!n) {
                                var i = e - t.length() % e;
                                t.fillWithByte(i - 1, i)
                            }
                            return ! 0
                        }
                        function r(e, t, n) {
                            var i = !0;
                            if (n) {
                                for (var r = t.length(), a = t.last(), o = r - 1 - a; r - 1 > o; ++o) i = i && t.at(o) == a;
                                i && t.truncate(a + 1)
                            }
                            return i
                        }
                        function a(t, n) {
                            var i = !1; ++c;
                            var a;
                            a = t.version.minor === s.Versions.TLS_1_0.minor ? n.cipherState.init ? null: n.cipherState.iv: t.fragment.getBytes(16),
                                n.cipherState.init = !0;
                            var l = n.cipherState.cipher;
                            l.start({
                                iv: a
                            }),
                                l.update(t.fragment),
                                i = l.finish(r);
                            var d = n.macLength,
                                p = e.random.getBytesSync(d),
                                u = l.output.length();
                            u >= d ? (t.fragment = l.output.getBytes(u - d), p = l.output.getBytes(d)) : t.fragment = l.output.getBytes(),
                                t.fragment = e.util.createBuffer(t.fragment),
                                t.length = t.fragment.length();
                            var f = n.macFunction(n.macKey, n.sequenceNumber, t);
                            return n.updateSequenceNumber(),
                                i = o(n.macKey, p, f) && i
                        }
                        function o(t, n, i) {
                            var r = e.hmac.create();
                            return r.start("SHA1", t),
                                r.update(n),
                                n = r.digest().getBytes(),
                                r.start(null, null),
                                r.update(i),
                                i = r.digest().getBytes(),
                            n === i
                        }
                        var s = e.tls;
                        s.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA = {
                            id: [0, 47],
                            name: "TLS_RSA_WITH_AES_128_CBC_SHA",
                            initSecurityParameters: function(e) {
                                e.bulk_cipher_algorithm = s.BulkCipherAlgorithm.aes,
                                    e.cipher_type = s.CipherType.block,
                                    e.enc_key_length = 16,
                                    e.block_length = 16,
                                    e.fixed_iv_length = 16,
                                    e.record_iv_length = 16,
                                    e.mac_algorithm = s.MACAlgorithm.hmac_sha1,
                                    e.mac_length = 20,
                                    e.mac_key_length = 20
                            },
                            initConnectionState: t
                        },
                            s.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA = {
                                id: [0, 53],
                                name: "TLS_RSA_WITH_AES_256_CBC_SHA",
                                initSecurityParameters: function(e) {
                                    e.bulk_cipher_algorithm = s.BulkCipherAlgorithm.aes,
                                        e.cipher_type = s.CipherType.block,
                                        e.enc_key_length = 32,
                                        e.block_length = 16,
                                        e.fixed_iv_length = 16,
                                        e.record_iv_length = 16,
                                        e.mac_algorithm = s.MACAlgorithm.hmac_sha1,
                                        e.mac_length = 20,
                                        e.mac_key_length = 20
                                },
                                initConnectionState: t
                            };
                        var c = 0
                    }
                    var i = "aesCipherSuites";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/aesCipherSuites", ["require", "module", "./aes", "./tls"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        e.debug = e.debug || {},
                            e.debug.storage = {},
                            e.debug.get = function(t, n) {
                                var i;
                                return "undefined" == typeof t ? i = e.debug.storage: t in e.debug.storage && (i = "undefined" == typeof n ? e.debug.storage[t] : e.debug.storage[t][n]),
                                    i
                            },
                            e.debug.set = function(t, n, i) {
                                t in e.debug.storage || (e.debug.storage[t] = {}),
                                    e.debug.storage[t][n] = i
                            },
                            e.debug.clear = function(t, n) {
                                "undefined" == typeof t ? e.debug.storage = {}: t in e.debug.storage && ("undefined" == typeof n ? delete e.debug.storage[t] : delete e.debug.storage[t][n])
                            }
                    }
                    var i = "debug";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/debug", ["require", "module"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(t, n, i, r) {
                            t.generate = function(t, a) {
                                for (var o = new e.util.ByteBuffer,
                                         s = Math.ceil(a / r) + i, c = new e.util.ByteBuffer, l = i; s > l; ++l) {
                                    c.putInt32(l),
                                        n.start(),
                                        n.update(t + c.getBytes());
                                    var d = n.digest();
                                    o.putBytes(d.getBytes(r))
                                }
                                return o.truncate(o.length() - a),
                                    o.getBytes()
                            }
                        }
                        e.kem = e.kem || {};
                        var n = e.jsbn.BigInteger;
                        e.kem.rsa = {},
                            e.kem.rsa.create = function(t, i) {
                                i = i || {};
                                var r = i.prng || e.random,
                                    a = {};
                                return a.encrypt = function(i, a) {
                                    var o, s = Math.ceil(i.n.bitLength() / 8);
                                    do o = new n(e.util.bytesToHex(r.getBytesSync(s)), 16).mod(i.n);
                                    while (o.equals(n.ZERO));
                                    o = e.util.hexToBytes(o.toString(16));
                                    var c = s - o.length;
                                    c > 0 && (o = e.util.fillString(String.fromCharCode(0), c) + o);
                                    var l = i.encrypt(o, "NONE"),
                                        d = t.generate(o, a);
                                    return {
                                        encapsulation: l,
                                        key: d
                                    }
                                },
                                    a.decrypt = function(e, n, i) {
                                        var r = e.decrypt(n, "NONE");
                                        return t.generate(r, i)
                                    },
                                    a
                            },
                            e.kem.kdf1 = function(e, n) {
                                t(this, e, 0, n || e.digestLength)
                            },
                            e.kem.kdf2 = function(e, n) {
                                t(this, e, 1, n || e.digestLength)
                            }
                    }
                    var i = "kem";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/kem", ["require", "module", "./util", "./random", "./jsbn"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        e.log = e.log || {},
                            e.log.levels = ["none", "error", "warning", "info", "debug", "verbose", "max"];
                        var t = {},
                            n = [],
                            i = null;
                        e.log.LEVEL_LOCKED = 2,
                            e.log.NO_LEVEL_CHECK = 4,
                            e.log.INTERPOLATE = 8;
                        for (var r = 0; r < e.log.levels.length; ++r) {
                            var a = e.log.levels[r];
                            t[a] = {
                                index: r,
                                name: a.toUpperCase()
                            }
                        }
                        e.log.logMessage = function(i) {
                            for (var r = t[i.level].index, a = 0; a < n.length; ++a) {
                                var o = n[a];
                                if (o.flags & e.log.NO_LEVEL_CHECK) o.f(i);
                                else {
                                    var s = t[o.level].index;
                                    s >= r && o.f(o, i)
                                }
                            }
                        },
                            e.log.prepareStandard = function(e) {
                                "standard" in e || (e.standard = t[e.level].name + " [" + e.category + "] " + e.message)
                            },
                            e.log.prepareFull = function(t) {
                                if (! ("full" in t)) {
                                    var n = [t.message];
                                    n = n.concat([] || t.arguments),
                                        t.full = e.util.format.apply(this, n)
                                }
                            },
                            e.log.prepareStandardFull = function(t) {
                                "standardFull" in t || (e.log.prepareStandard(t), t.standardFull = t.standard)
                            };
                        for (var o = ["error", "warning", "info", "debug", "verbose"], r = 0; r < o.length; ++r)(function(t) {
                            e.log[t] = function(n, i) {
                                var r = Array.prototype.slice.call(arguments).slice(2),
                                    a = {
                                        timestamp: new Date,
                                        level: t,
                                        category: n,
                                        message: i,
                                        arguments: r
                                    };
                                e.log.logMessage(a)
                            }
                        })(o[r]);
                        if (e.log.makeLogger = function(t) {
                                var n = {
                                    flags: 0,
                                    f: t
                                };
                                return e.log.setLevel(n, "none"),
                                    n
                            },
                                e.log.setLevel = function(t, n) {
                                    var i = !1;
                                    if (t && !(t.flags & e.log.LEVEL_LOCKED)) for (var r = 0; r < e.log.levels.length; ++r) {
                                        var a = e.log.levels[r];
                                        if (n == a) {
                                            t.level = n,
                                                i = !0;
                                            break
                                        }
                                    }
                                    return i
                                },
                                e.log.lock = function(t, n) {
                                    "undefined" == typeof n || n ? t.flags |= e.log.LEVEL_LOCKED: t.flags &= ~e.log.LEVEL_LOCKED
                                },
                                e.log.addLogger = function(e) {
                                    n.push(e)
                                },
                            "undefined" != typeof console && "log" in console) {
                            var s;
                            if (console.error && console.warn && console.info && console.debug) {
                                var c = {
                                        error: console.error,
                                        warning: console.warn,
                                        info: console.info,
                                        debug: console.debug,
                                        verbose: console.debug
                                    },
                                    l = function(t, n) {
                                        e.log.prepareStandard(n);
                                        var i = c[n.level],
                                            r = [n.standard];
                                        r = r.concat(n.arguments.slice()),
                                            i.apply(console, r)
                                    };
                                s = e.log.makeLogger(l)
                            } else {
                                var l = function(t, n) {
                                    e.log.prepareStandardFull(n),
                                        console.log(n.standardFull)
                                };
                                s = e.log.makeLogger(l)
                            }
                            e.log.setLevel(s, "debug"),
                                e.log.addLogger(s),
                                i = s
                        } else console = {
                            log: function() {}
                        };
                        if (null !== i) {
                            var d = e.util.getQueryVariables();
                            if ("console.level" in d && e.log.setLevel(i, d["console.level"].slice( - 1)[0]), "console.lock" in d) {
                                var p = d["console.lock"].slice( - 1)[0];
                                "true" == p && e.log.lock(i)
                            }
                        }
                        e.log.consoleLogger = i
                    }
                    var i = "log";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/log", ["require", "module", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(t) {
                            var n = {},
                                i = [];
                            if (!u.validate(t, f.asn1.recipientInfoValidator, n, i)) {
                                var r = new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");
                                throw r.errors = i,
                                    r
                            }
                            return {
                                version: n.version.charCodeAt(0),
                                issuer: e.pki.RDNAttributesAsArray(n.issuer),
                                serialNumber: e.util.createBuffer(n.serial).toHex(),
                                encryptedContent: {
                                    algorithm: u.derToOid(n.encAlgorithm),
                                    parameter: n.encParameter.value,
                                    content: n.encKey
                                }
                            }
                        }
                        function n(t) {
                            return u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.INTEGER, !1, u.integerToDer(t.version).getBytes()), u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [e.pki.distinguishedNameToAsn1({
                                attributes: t.issuer
                            }), u.create(u.Class.UNIVERSAL, u.Type.INTEGER, !1, e.util.hexToBytes(t.serialNumber))]), u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.OID, !1, u.oidToDer(t.encryptedContent.algorithm).getBytes()), u.create(u.Class.UNIVERSAL, u.Type.NULL, !1, "")]), u.create(u.Class.UNIVERSAL, u.Type.OCTETSTRING, !1, t.encryptedContent.content)])
                        }
                        function i(e) {
                            for (var n = [], i = 0; i < e.length; ++i) n.push(t(e[i]));
                            return n
                        }
                        function r(e) {
                            for (var t = [], i = 0; i < e.length; ++i) t.push(n(e[i]));
                            return t
                        }
                        function a(t) {
                            var n = {},
                                i = [];
                            if (!u.validate(t, f.asn1.signerInfoValidator, n, i)) {
                                var r = new Error("Cannot read PKCS#7 SignerInfo. ASN.1 object is not an PKCS#7 SignerInfo.");
                                throw r.errors = i,
                                    r
                            } {
                                var a = {
                                    version: n.version.charCodeAt(0),
                                    issuer: e.pki.RDNAttributesAsArray(n.issuer),
                                    serialNumber: e.util.createBuffer(n.serial).toHex(),
                                    digestAlgorithm: u.derToOid(n.digestAlgorithm),
                                    signatureAlgorithm: u.derToOid(n.signatureAlgorithm),
                                    signature: n.signature,
                                    authenticatedAttributes: [],
                                    unauthenticatedAttributes: []
                                };
                                n.authenticatedAttributes || [],
                                n.unauthenticatedAttributes || []
                            }
                            return a
                        }
                        function o(t) {
                            var n = u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.INTEGER, !1, u.integerToDer(t.version).getBytes()), u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [e.pki.distinguishedNameToAsn1({
                                attributes: t.issuer
                            }), u.create(u.Class.UNIVERSAL, u.Type.INTEGER, !1, e.util.hexToBytes(t.serialNumber))]), u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.OID, !1, u.oidToDer(t.digestAlgorithm).getBytes()), u.create(u.Class.UNIVERSAL, u.Type.NULL, !1, "")])]);
                            if (t.authenticatedAttributesAsn1 && n.value.push(t.authenticatedAttributesAsn1), n.value.push(u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.OID, !1, u.oidToDer(t.signatureAlgorithm).getBytes()), u.create(u.Class.UNIVERSAL, u.Type.NULL, !1, "")])), n.value.push(u.create(u.Class.UNIVERSAL, u.Type.OCTETSTRING, !1, t.signature)), t.unauthenticatedAttributes.length > 0) {
                                for (var i = u.create(u.Class.CONTEXT_SPECIFIC, 1, !0, []), r = 0; r < t.unauthenticatedAttributes.length; ++r) {
                                    var a = t.unauthenticatedAttributes[r];
                                    i.values.push(c(a))
                                }
                                n.value.push(i)
                            }
                            return n
                        }
                        function s(e) {
                            for (var t = [], n = 0; n < e.length; ++n) t.push(o(e[n]));
                            return t
                        }
                        function c(t) {
                            var n;
                            if (t.type === e.pki.oids.contentType) n = u.create(u.Class.UNIVERSAL, u.Type.OID, !1, u.oidToDer(t.value).getBytes());
                            else if (t.type === e.pki.oids.messageDigest) n = u.create(u.Class.UNIVERSAL, u.Type.OCTETSTRING, !1, t.value.bytes());
                            else if (t.type === e.pki.oids.signingTime) {
                                var i = new Date("1950-01-01T00:00:00Z"),
                                    r = new Date("2050-01-01T00:00:00Z"),
                                    a = t.value;
                                if ("string" == typeof a) {
                                    var o = Date.parse(a);
                                    a = isNaN(o) ? 13 === a.length ? u.utcTimeToDate(a) : u.generalizedTimeToDate(a) : new Date(o)
                                }
                                n = a >= i && r > a ? u.create(u.Class.UNIVERSAL, u.Type.UTCTIME, !1, u.dateToUtcTime(a)) : u.create(u.Class.UNIVERSAL, u.Type.GENERALIZEDTIME, !1, u.dateToGeneralizedTime(a))
                            }
                            return u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.OID, !1, u.oidToDer(t.type).getBytes()), u.create(u.Class.UNIVERSAL, u.Type.SET, !0, [n])])
                        }
                        function l(t) {
                            return [u.create(u.Class.UNIVERSAL, u.Type.OID, !1, u.oidToDer(e.pki.oids.data).getBytes()), u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.OID, !1, u.oidToDer(t.algorithm).getBytes()), u.create(u.Class.UNIVERSAL, u.Type.OCTETSTRING, !1, t.parameter.getBytes())]), u.create(u.Class.CONTEXT_SPECIFIC, 0, !0, [u.create(u.Class.UNIVERSAL, u.Type.OCTETSTRING, !1, t.content.getBytes())])]
                        }
                        function d(t, n, i) {
                            var r = {},
                                a = [];
                            if (!u.validate(n, i, r, a)) {
                                var o = new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");
                                throw o.errors = o,
                                    o
                            }
                            var s = u.derToOid(r.contentType);
                            if (s !== e.pki.oids.data) throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");
                            if (r.encryptedContent) {
                                var c = "";
                                if (e.util.isArray(r.encryptedContent)) for (var l = 0; l < r.encryptedContent.length; ++l) {
                                    if (r.encryptedContent[l].type !== u.Type.OCTETSTRING) throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");
                                    c += r.encryptedContent[l].value
                                } else c = r.encryptedContent;
                                t.encryptedContent = {
                                    algorithm: u.derToOid(r.encAlgorithm),
                                    parameter: e.util.createBuffer(r.encParameter.value),
                                    content: e.util.createBuffer(c)
                                }
                            }
                            if (r.content) {
                                var c = "";
                                if (e.util.isArray(r.content)) for (var l = 0; l < r.content.length; ++l) {
                                    if (r.content[l].type !== u.Type.OCTETSTRING) throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");
                                    c += r.content[l].value
                                } else c = r.content;
                                t.content = e.util.createBuffer(c)
                            }
                            return t.version = r.version.charCodeAt(0),
                                t.rawCapture = r,
                                r
                        }
                        function p(t) {
                            if (void 0 === t.encryptedContent.key) throw new Error("Symmetric key not available.");
                            if (void 0 === t.content) {
                                var n;
                                switch (t.encryptedContent.algorithm) {
                                    case e.pki.oids["aes128-CBC"]:
                                    case e.pki.oids["aes192-CBC"]:
                                    case e.pki.oids["aes256-CBC"]:
                                        n = e.aes.createDecryptionCipher(t.encryptedContent.key);
                                        break;
                                    case e.pki.oids.desCBC:
                                    case e.pki.oids["des-EDE3-CBC"]:
                                        n = e.des.createDecryptionCipher(t.encryptedContent.key);
                                        break;
                                    default:
                                        throw new Error("Unsupported symmetric cipher, OID " + t.encryptedContent.algorithm)
                                }
                                if (n.start(t.encryptedContent.parameter), n.update(t.encryptedContent.content), !n.finish()) throw new Error("Symmetric decryption failed.");
                                t.content = n.output
                            }
                        }
                        var u = e.asn1,
                            f = e.pkcs7 = e.pkcs7 || {};
                        f.messageFromPem = function(t) {
                            var n = e.pem.decode(t)[0];
                            if ("PKCS7" !== n.type) {
                                var i = new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');
                                throw i.headerType = n.type,
                                    i
                            }
                            if (n.procType && "ENCRYPTED" === n.procType.type) throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");
                            var r = u.fromDer(n.body);
                            return f.messageFromAsn1(r)
                        },
                            f.messageToPem = function(t, n) {
                                var i = {
                                    type: "PKCS7",
                                    body: u.toDer(t.toAsn1()).getBytes()
                                };
                                return e.pem.encode(i, {
                                    maxline: n
                                })
                            },
                            f.messageFromAsn1 = function(t) {
                                var n = {},
                                    i = [];
                                if (!u.validate(t, f.asn1.contentInfoValidator, n, i)) {
                                    var r = new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");
                                    throw r.errors = i,
                                        r
                                }
                                var a, o = u.derToOid(n.contentType);
                                switch (o) {
                                    case e.pki.oids.envelopedData:
                                        a = f.createEnvelopedData();
                                        break;
                                    case e.pki.oids.encryptedData:
                                        a = f.createEncryptedData();
                                        break;
                                    case e.pki.oids.signedData:
                                        a = f.createSignedData();
                                        break;
                                    default:
                                        throw new Error("Cannot read PKCS#7 message. ContentType with OID " + o + " is not (yet) supported.")
                                }
                                return a.fromAsn1(n.content.value[0]),
                                    a
                            },
                            f.createSignedData = function() {
                                function t() {
                                    for (var t = {},
                                             n = 0; n < i.signers.length; ++n) {
                                        var r = i.signers[n],
                                            a = r.digestAlgorithm;
                                        a in t || (t[a] = e.md[e.pki.oids[a]].create()),
                                            r.md = 0 === r.authenticatedAttributes.length ? t[a] : e.md[e.pki.oids[a]].create()
                                    }
                                    i.digestAlgorithmIdentifiers = [];
                                    for (var a in t) i.digestAlgorithmIdentifiers.push(u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.OID, !1, u.oidToDer(a).getBytes()), u.create(u.Class.UNIVERSAL, u.Type.NULL, !1, "")]));
                                    return t
                                }
                                function n(t) {
                                    if (i.contentInfo.value.length < 2) throw new Error("Could not sign PKCS#7 message; there is no content to sign.");
                                    var n = u.derToOid(i.contentInfo.value[0].value),
                                        r = i.contentInfo.value[1];
                                    r = r.value[0];
                                    var a = u.toDer(r);
                                    a.getByte(),
                                        u.getBerValueLength(a),
                                        a = a.getBytes();
                                    for (var o in t) t[o].start().update(a);
                                    for (var l = new Date,
                                             d = 0; d < i.signers.length; ++d) {
                                        var p = i.signers[d];
                                        if (0 === p.authenticatedAttributes.length) {
                                            if (n !== e.pki.oids.data) throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")
                                        } else {
                                            p.authenticatedAttributesAsn1 = u.create(u.Class.CONTEXT_SPECIFIC, 0, !0, []);
                                            for (var f = u.create(u.Class.UNIVERSAL, u.Type.SET, !0, []), h = 0; h < p.authenticatedAttributes.length; ++h) {
                                                var g = p.authenticatedAttributes[h];
                                                g.type === e.pki.oids.messageDigest ? g.value = t[p.digestAlgorithm].digest() : g.type === e.pki.oids.signingTime && (g.value || (g.value = l)),
                                                    f.value.push(c(g)),
                                                    p.authenticatedAttributesAsn1.value.push(c(g))
                                            }
                                            a = u.toDer(f).getBytes(),
                                                p.md.start().update(a)
                                        }
                                        p.signature = p.key.sign(p.md, "RSASSA-PKCS1-V1_5")
                                    }
                                    i.signerInfos = s(i.signers)
                                }
                                var i = null;
                                return i = {
                                    type: e.pki.oids.signedData,
                                    version: 1,
                                    certificates: [],
                                    crls: [],
                                    signers: [],
                                    digestAlgorithmIdentifiers: [],
                                    contentInfo: null,
                                    signerInfos: [],
                                    fromAsn1: function(t) {
                                        d(i, t, f.asn1.signedDataValidator),
                                            i.certificates = [],
                                            i.crls = [],
                                            i.digestAlgorithmIdentifiers = [],
                                            i.contentInfo = null,
                                            i.signerInfos = [];
                                        for (var n = i.rawCapture.certificates.value,
                                                 r = 0; r < n.length; ++r) i.certificates.push(e.pki.certificateFromAsn1(n[r]))
                                    },
                                    toAsn1: function() {
                                        i.contentInfo || i.sign();
                                        for (var t = [], n = 0; n < i.certificates.length; ++n) t.push(e.pki.certificateToAsn1(i.certificates[n]));
                                        var r = [],
                                            a = u.create(u.Class.CONTEXT_SPECIFIC, 0, !0, [u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.INTEGER, !1, u.integerToDer(i.version).getBytes()), u.create(u.Class.UNIVERSAL, u.Type.SET, !0, i.digestAlgorithmIdentifiers), i.contentInfo])]);
                                        return t.length > 0 && a.value[0].value.push(u.create(u.Class.CONTEXT_SPECIFIC, 0, !0, t)),
                                        r.length > 0 && a.value[0].value.push(u.create(u.Class.CONTEXT_SPECIFIC, 1, !0, r)),
                                            a.value[0].value.push(u.create(u.Class.UNIVERSAL, u.Type.SET, !0, i.signerInfos)),
                                            u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.OID, !1, u.oidToDer(i.type).getBytes()), a])
                                    },
                                    addSigner: function(t) {
                                        var n = t.issuer,
                                            r = t.serialNumber;
                                        if (t.certificate) {
                                            var a = t.certificate;
                                            "string" == typeof a && (a = e.pki.certificateFromPem(a)),
                                                n = a.issuer.attributes,
                                                r = a.serialNumber
                                        }
                                        var o = t.key;
                                        if (!o) throw new Error("Could not add PKCS#7 signer; no private key specified.");
                                        "string" == typeof o && (o = e.pki.privateKeyFromPem(o));
                                        var s = t.digestAlgorithm || e.pki.oids.sha1;
                                        switch (s) {
                                            case e.pki.oids.sha1:
                                            case e.pki.oids.sha256:
                                            case e.pki.oids.sha384:
                                            case e.pki.oids.sha512:
                                            case e.pki.oids.md5:
                                                break;
                                            default:
                                                throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: " + s)
                                        }
                                        var c = t.authenticatedAttributes || [];
                                        if (c.length > 0) {
                                            for (var l = !1,
                                                     d = !1,
                                                     p = 0; p < c.length; ++p) {
                                                var u = c[p];
                                                if (l || u.type !== e.pki.oids.contentType) {
                                                    if (d || u.type !== e.pki.oids.messageDigest);
                                                    else if (d = !0, l) break
                                                } else if (l = !0, d) break
                                            }
                                            if (!l || !d) throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")
                                        }
                                        i.signers.push({
                                            key: o,
                                            version: 1,
                                            issuer: n,
                                            serialNumber: r,
                                            digestAlgorithm: s,
                                            signatureAlgorithm: e.pki.oids.rsaEncryption,
                                            signature: null,
                                            authenticatedAttributes: c,
                                            unauthenticatedAttributes: []
                                        })
                                    },
                                    sign: function() {
                                        if (("object" != typeof i.content || null === i.contentInfo) && (i.contentInfo = u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.OID, !1, u.oidToDer(e.pki.oids.data).getBytes())]), "content" in i)) {
                                            var r;
                                            i.content instanceof e.util.ByteBuffer ? r = i.content.bytes() : "string" == typeof i.content && (r = e.util.encodeUtf8(i.content)),
                                                i.contentInfo.value.push(u.create(u.Class.CONTEXT_SPECIFIC, 0, !0, [u.create(u.Class.UNIVERSAL, u.Type.OCTETSTRING, !1, r)]))
                                        }
                                        if (0 !== i.signers.length) {
                                            var a = t();
                                            n(a)
                                        }
                                    },
                                    verify: function() {
                                        throw new Error("PKCS#7 signature verification not yet implemented.")
                                    },
                                    addCertificate: function(t) {
                                        "string" == typeof t && (t = e.pki.certificateFromPem(t)),
                                            i.certificates.push(t)
                                    },
                                    addCertificateRevokationList: function(e) {
                                        throw new Error("PKCS#7 CRL support not yet implemented.")
                                    }
                                }
                            },
                            f.createEncryptedData = function() {
                                var t = null;
                                return t = {
                                    type: e.pki.oids.encryptedData,
                                    version: 0,
                                    encryptedContent: {
                                        algorithm: e.pki.oids["aes256-CBC"]
                                    },
                                    fromAsn1: function(e) {
                                        d(t, e, f.asn1.encryptedDataValidator)
                                    },
                                    decrypt: function(e) {
                                        void 0 !== e && (t.encryptedContent.key = e),
                                            p(t)
                                    }
                                }
                            },
                            f.createEnvelopedData = function() {
                                var t = null;
                                return t = {
                                    type: e.pki.oids.envelopedData,
                                    version: 0,
                                    recipients: [],
                                    encryptedContent: {
                                        algorithm: e.pki.oids["aes256-CBC"]
                                    },
                                    fromAsn1: function(e) {
                                        var n = d(t, e, f.asn1.envelopedDataValidator);
                                        t.recipients = i(n.recipientInfos.value)
                                    },
                                    toAsn1: function() {
                                        return u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.OID, !1, u.oidToDer(t.type).getBytes()), u.create(u.Class.CONTEXT_SPECIFIC, 0, !0, [u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.INTEGER, !1, u.integerToDer(t.version).getBytes()), u.create(u.Class.UNIVERSAL, u.Type.SET, !0, r(t.recipients)), u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, l(t.encryptedContent))])])])
                                    },
                                    findRecipient: function(e) {
                                        for (var n = e.issuer.attributes,
                                                 i = 0; i < t.recipients.length; ++i) {
                                            var r = t.recipients[i],
                                                a = r.issuer;
                                            if (r.serialNumber === e.serialNumber && a.length === n.length) {
                                                for (var o = !0,
                                                         s = 0; s < n.length; ++s) if (a[s].type !== n[s].type || a[s].value !== n[s].value) {
                                                    o = !1;
                                                    break
                                                }
                                                if (o) return r
                                            }
                                        }
                                        return null
                                    },
                                    decrypt: function(n, i) {
                                        if (void 0 === t.encryptedContent.key && void 0 !== n && void 0 !== i) switch (n.encryptedContent.algorithm) {
                                            case e.pki.oids.rsaEncryption:
                                            case e.pki.oids.desCBC:
                                                var r = i.decrypt(n.encryptedContent.content);
                                                t.encryptedContent.key = e.util.createBuffer(r);
                                                break;
                                            default:
                                                throw new Error("Unsupported asymmetric cipher, OID " + n.encryptedContent.algorithm)
                                        }
                                        p(t)
                                    },
                                    addRecipient: function(n) {
                                        t.recipients.push({
                                            version: 0,
                                            issuer: n.issuer.attributes,
                                            serialNumber: n.serialNumber,
                                            encryptedContent: {
                                                algorithm: e.pki.oids.rsaEncryption,
                                                key: n.publicKey
                                            }
                                        })
                                    },
                                    encrypt: function(n, i) {
                                        if (void 0 === t.encryptedContent.content) {
                                            i = i || t.encryptedContent.algorithm,
                                                n = n || t.encryptedContent.key;
                                            var r, a, o;
                                            switch (i) {
                                                case e.pki.oids["aes128-CBC"]:
                                                    r = 16,
                                                        a = 16,
                                                        o = e.aes.createEncryptionCipher;
                                                    break;
                                                case e.pki.oids["aes192-CBC"]:
                                                    r = 24,
                                                        a = 16,
                                                        o = e.aes.createEncryptionCipher;
                                                    break;
                                                case e.pki.oids["aes256-CBC"]:
                                                    r = 32,
                                                        a = 16,
                                                        o = e.aes.createEncryptionCipher;
                                                    break;
                                                case e.pki.oids["des-EDE3-CBC"]:
                                                    r = 24,
                                                        a = 8,
                                                        o = e.des.createEncryptionCipher;
                                                    break;
                                                default:
                                                    throw new Error("Unsupported symmetric cipher, OID " + i)
                                            }
                                            if (void 0 === n) n = e.util.createBuffer(e.random.getBytes(r));
                                            else if (n.length() != r) throw new Error("Symmetric key has wrong length; got " + n.length() + " bytes, expected " + r + ".");
                                            t.encryptedContent.algorithm = i,
                                                t.encryptedContent.key = n,
                                                t.encryptedContent.parameter = e.util.createBuffer(e.random.getBytes(a));
                                            var s = o(n);
                                            if (s.start(t.encryptedContent.parameter.copy()), s.update(t.content), !s.finish()) throw new Error("Symmetric encryption failed.");
                                            t.encryptedContent.content = s.output
                                        }
                                        for (var c = 0; c < t.recipients.length; ++c) {
                                            var l = t.recipients[c];
                                            if (void 0 === l.encryptedContent.content) switch (l.encryptedContent.algorithm) {
                                                case e.pki.oids.rsaEncryption:
                                                    l.encryptedContent.content = l.encryptedContent.key.encrypt(t.encryptedContent.key.data);
                                                    break;
                                                default:
                                                    throw new Error("Unsupported asymmetric cipher, OID " + l.encryptedContent.algorithm)
                                            }
                                        }
                                    }
                                }
                            }
                    }
                    var i = "pkcs7";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/pkcs7", ["require", "module", "./aes", "./asn1", "./des", "./oids", "./pem", "./pkcs7asn1", "./random", "./util", "./x509"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(t, n) {
                            var i = n.toString(16);
                            i[0] >= "8" && (i = "00" + i);
                            var r = e.util.hexToBytes(i);
                            t.putInt32(r.length),
                                t.putBytes(r)
                        }
                        function n(e, t) {
                            e.putInt32(t.length),
                                e.putString(t)
                        }
                        function i() {
                            for (var t = e.md.sha1.create(), n = arguments.length, i = 0; n > i; ++i) t.update(arguments[i]);
                            return t.digest()
                        }
                        var r = e.ssh = e.ssh || {};
                        r.privateKeyToPutty = function(r, a, o) {
                            o = o || "",
                                a = a || "";
                            var s = "ssh-rsa",
                                c = "" === a ? "none": "aes256-cbc",
                                l = "PuTTY-User-Key-File-2: " + s + "\r\n";
                            l += "Encryption: " + c + "\r\n",
                                l += "Comment: " + o + "\r\n";
                            var d = e.util.createBuffer();
                            n(d, s),
                                t(d, r.e),
                                t(d, r.n);
                            var p = e.util.encode64(d.bytes(), 64),
                                u = Math.floor(p.length / 66) + 1;
                            l += "Public-Lines: " + u + "\r\n",
                                l += p;
                            var f = e.util.createBuffer();
                            t(f, r.d),
                                t(f, r.p),
                                t(f, r.q),
                                t(f, r.qInv);
                            var h;
                            if (a) {
                                var g = f.length() + 16 - 1;
                                g -= g % 16;
                                var m = i(f.bytes());
                                m.truncate(m.length() - g + f.length()),
                                    f.putBuffer(m);
                                var y = e.util.createBuffer();
                                y.putBuffer(i("\x00\x00\x00\x00", a)),
                                    y.putBuffer(i("\x00\x00\x00", a));
                                var v = e.aes.createEncryptionCipher(y.truncate(8), "CBC");
                                v.start(e.util.createBuffer().fillWithByte(0, 16)),
                                    v.update(f.copy()),
                                    v.finish();
                                var C = v.output;
                                C.truncate(16),
                                    h = e.util.encode64(C.bytes(), 64)
                            } else h = e.util.encode64(f.bytes(), 64);
                            u = Math.floor(h.length / 66) + 1,
                                l += "\r\nPrivate-Lines: " + u + "\r\n",
                                l += h;
                            var S = i("putty-private-key-file-mac-key", a),
                                _ = e.util.createBuffer();
                            n(_, s),
                                n(_, c),
                                n(_, o),
                                _.putInt32(d.length()),
                                _.putBuffer(d),
                                _.putInt32(f.length()),
                                _.putBuffer(f);
                            var b = e.hmac.create();
                            return b.start("sha1", S),
                                b.update(_.bytes()),
                                l += "\r\nPrivate-MAC: " + b.digest().toHex() + "\r\n"
                        },
                            r.publicKeyToOpenSSH = function(i, r) {
                                var a = "ssh-rsa";
                                r = r || "";
                                var o = e.util.createBuffer();
                                return n(o, a),
                                    t(o, i.e),
                                    t(o, i.n),
                                a + " " + e.util.encode64(o.bytes()) + " " + r
                            },
                            r.privateKeyToOpenSSH = function(t, n) {
                                return n ? e.pki.encryptRsaPrivateKey(t, n, {
                                    legacy: !0,
                                    algorithm: "aes128"
                                }) : e.pki.privateKeyToPem(t)
                            },
                            r.getPublicKeyFingerprint = function(i, r) {
                                r = r || {};
                                var a = r.md || e.md.md5.create(),
                                    o = "ssh-rsa",
                                    s = e.util.createBuffer();
                                n(s, o),
                                    t(s, i.e),
                                    t(s, i.n),
                                    a.start(),
                                    a.update(s.getBytes());
                                var c = a.digest();
                                if ("hex" === r.encoding) {
                                    var l = c.toHex();
                                    return r.delimiter ? l.match(/.{2}/g).join(r.delimiter) : l
                                }
                                if ("binary" === r.encoding) return c.getBytes();
                                if (r.encoding) throw new Error('Unknown encoding "' + r.encoding + '".');
                                return c
                            }
                    }
                    var i = "ssh";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/ssh", ["require", "module", "./aes", "./hmac", "./md5", "./sha1", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        var t = "forge.task",
                            n = 0,
                            i = {},
                            r = 0;
                        e.debug.set(t, "tasks", i);
                        var a = {};
                        e.debug.set(t, "queues", a);
                        var o = "?",
                            s = 30,
                            c = 20,
                            l = "ready",
                            d = "running",
                            p = "blocked",
                            u = "sleeping",
                            f = "done",
                            h = "error",
                            g = "stop",
                            m = "start",
                            y = "block",
                            v = "unblock",
                            C = "sleep",
                            S = "wakeup",
                            _ = "cancel",
                            b = "fail",
                            E = {};
                        E[l] = {},
                            E[l][g] = l,
                            E[l][m] = d,
                            E[l][_] = f,
                            E[l][b] = h,
                            E[d] = {},
                            E[d][g] = l,
                            E[d][m] = d,
                            E[d][y] = p,
                            E[d][v] = d,
                            E[d][C] = u,
                            E[d][S] = d,
                            E[d][_] = f,
                            E[d][b] = h,
                            E[p] = {},
                            E[p][g] = p,
                            E[p][m] = p,
                            E[p][y] = p,
                            E[p][v] = p,
                            E[p][C] = p,
                            E[p][S] = p,
                            E[p][_] = f,
                            E[p][b] = h,
                            E[u] = {},
                            E[u][g] = u,
                            E[u][m] = u,
                            E[u][y] = u,
                            E[u][v] = u,
                            E[u][C] = u,
                            E[u][S] = u,
                            E[u][_] = f,
                            E[u][b] = h,
                            E[f] = {},
                            E[f][g] = f,
                            E[f][m] = f,
                            E[f][y] = f,
                            E[f][v] = f,
                            E[f][C] = f,
                            E[f][S] = f,
                            E[f][_] = f,
                            E[f][b] = h,
                            E[h] = {},
                            E[h][g] = h,
                            E[h][m] = h,
                            E[h][y] = h,
                            E[h][v] = h,
                            E[h][C] = h,
                            E[h][S] = h,
                            E[h][_] = h,
                            E[h][b] = h;
                        var I = function(a) {
                            this.id = -1,
                                this.name = a.name || o,
                                this.parent = a.parent || null,
                                this.run = a.run,
                                this.subtasks = [],
                                this.error = !1,
                                this.state = l,
                                this.blocks = 0,
                                this.timeoutId = null,
                                this.swapTime = null,
                                this.userData = null,
                                this.id = r++,
                                i[this.id] = this,
                            n >= 1 && e.log.verbose(t, "[%s][%s] init", this.id, this.name, this)
                        };
                        I.prototype.debug = function(n) {
                            n = n || "",
                                e.log.debug(t, n, "[%s][%s] task:", this.id, this.name, this, "subtasks:", this.subtasks.length, "queue:", a)
                        },
                            I.prototype.next = function(e, t) {
                                "function" == typeof e && (t = e, e = this.name);
                                var n = new I({
                                    run: t,
                                    name: e,
                                    parent: this
                                });
                                return n.state = d,
                                    n.type = this.type,
                                    n.successCallback = this.successCallback || null,
                                    n.failureCallback = this.failureCallback || null,
                                    this.subtasks.push(n),
                                    this
                            },
                            I.prototype.parallel = function(t, n) {
                                return e.util.isArray(t) && (n = t, t = this.name),
                                    this.next(t,
                                        function(i) {
                                            var r = i;
                                            r.block(n.length);
                                            for (var a = function(t, i) {
                                                    e.task.start({
                                                        type: t,
                                                        run: function(e) {
                                                            n[i](e)
                                                        },
                                                        success: function(e) {
                                                            r.unblock()
                                                        },
                                                        failure: function(e) {
                                                            r.unblock()
                                                        }
                                                    })
                                                },
                                                     o = 0; o < n.length; o++) {
                                                var s = t + "__parallel-" + i.id + "-" + o,
                                                    c = o;
                                                a(s, c)
                                            }
                                        })
                            },
                            I.prototype.stop = function() {
                                this.state = E[this.state][g]
                            },
                            I.prototype.start = function() {
                                this.error = !1,
                                    this.state = E[this.state][m],
                                this.state === d && (this.start = new Date, this.run(this), T(this, 0))
                            },
                            I.prototype.block = function(e) {
                                e = "undefined" == typeof e ? 1 : e,
                                    this.blocks += e,
                                this.blocks > 0 && (this.state = E[this.state][y])
                            },
                            I.prototype.unblock = function(e) {
                                return e = "undefined" == typeof e ? 1 : e,
                                    this.blocks -= e,
                                0 === this.blocks && this.state !== f && (this.state = d, T(this, 0)),
                                    this.blocks
                            },
                            I.prototype.sleep = function(e) {
                                e = "undefined" == typeof e ? 0 : e,
                                    this.state = E[this.state][C];
                                var t = this;
                                this.timeoutId = setTimeout(function() {
                                        t.timeoutId = null,
                                            t.state = d,
                                            T(t, 0)
                                    },
                                    e)
                            },
                            I.prototype.wait = function(e) {
                                e.wait(this)
                            },
                            I.prototype.wakeup = function() {
                                this.state === u && (cancelTimeout(this.timeoutId), this.timeoutId = null, this.state = d, T(this, 0))
                            },
                            I.prototype.cancel = function() {
                                this.state = E[this.state][_],
                                    this.permitsNeeded = 0,
                                null !== this.timeoutId && (cancelTimeout(this.timeoutId), this.timeoutId = null),
                                    this.subtasks = []
                            },
                            I.prototype.fail = function(e) {
                                if (this.error = !0, k(this, !0), e) e.error = this.error,
                                    e.swapTime = this.swapTime,
                                    e.userData = this.userData,
                                    T(e, 0);
                                else {
                                    if (null !== this.parent) {
                                        for (var t = this.parent; null !== t.parent;) t.error = this.error,
                                            t.swapTime = this.swapTime,
                                            t.userData = this.userData,
                                            t = t.parent;
                                        k(t, !0)
                                    }
                                    this.failureCallback && this.failureCallback(this)
                                }
                            };
                        var A = function(e) {
                                e.error = !1,
                                    e.state = E[e.state][m],
                                    setTimeout(function() {
                                            e.state === d && (e.swapTime = +new Date, e.run(e), T(e, 0))
                                        },
                                        0)
                            },
                            T = function(e, t) {
                                var n = t > s || +new Date - e.swapTime > c,
                                    i = function(t) {
                                        if (t++, e.state === d) if (n && (e.swapTime = +new Date), e.subtasks.length > 0) {
                                            var i = e.subtasks.shift();
                                            i.error = e.error,
                                                i.swapTime = e.swapTime,
                                                i.userData = e.userData,
                                                i.run(i),
                                            i.error || T(i, t)
                                        } else k(e),
                                        e.error || null !== e.parent && (e.parent.error = e.error, e.parent.swapTime = e.swapTime, e.parent.userData = e.userData, T(e.parent, t))
                                    };
                                n ? setTimeout(i, 0) : i(t)
                            },
                            k = function(r, o) {
                                r.state = f,
                                    delete i[r.id],
                                n >= 1 && e.log.verbose(t, "[%s][%s] finish", r.id, r.name, r),
                                null === r.parent && (r.type in a ? 0 === a[r.type].length ? e.log.error(t, "[%s][%s] task queue empty [%s]", r.id, r.name, r.type) : a[r.type][0] !== r ? e.log.error(t, "[%s][%s] task not first in queue [%s]", r.id, r.name, r.type) : (a[r.type].shift(), 0 === a[r.type].length ? (n >= 1 && e.log.verbose(t, "[%s][%s] delete queue [%s]", r.id, r.name, r.type), delete a[r.type]) : (n >= 1 && e.log.verbose(t, "[%s][%s] queue start next [%s] remain:%s", r.id, r.name, r.type, a[r.type].length), a[r.type][0].start())) : e.log.error(t, "[%s][%s] task queue missing [%s]", r.id, r.name, r.type), o || (r.error && r.failureCallback ? r.failureCallback(r) : !r.error && r.successCallback && r.successCallback(r)))
                            };
                        e.task = e.task || {},
                            e.task.start = function(i) {
                                var r = new I({
                                    run: i.run,
                                    name: i.name || o
                                });
                                r.type = i.type,
                                    r.successCallback = i.success || null,
                                    r.failureCallback = i.failure || null,
                                    r.type in a ? a[i.type].push(r) : (n >= 1 && e.log.verbose(t, "[%s][%s] create queue [%s]", r.id, r.name, r.type), a[r.type] = [r], A(r))
                            },
                            e.task.cancel = function(e) {
                                e in a && (a[e] = [a[e][0]])
                            },
                            e.task.createCondition = function() {
                                var e = {
                                    tasks: {}
                                };
                                return e.wait = function(t) {
                                    t.id in e.tasks || (t.block(), e.tasks[t.id] = t)
                                },
                                    e.notify = function() {
                                        var t = e.tasks;
                                        e.tasks = {};
                                        for (var n in t) t[n].unblock()
                                    },
                                    e
                            }
                    }
                    var i = "task";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/task", ["require", "module", "./debug", "./log", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    var e = "forge";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return void("undefined" == typeof forge && (forge = {
                            disableNativeCode: !1
                        }));
                        var i = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var r, a = function(t, n) {
                            n.exports = function(n) {
                                var i = r.map(function(e) {
                                    return t(e)
                                });
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[e]) return n[e];
                                n.defined[e] = !0;
                                for (var a = 0; a < i.length; ++a) i[a](n);
                                return n
                            },
                                n.exports.disableNativeCode = !1,
                                n.exports(n.exports)
                        },
                        o = n; (n = function(e, t) {
                        return r = "string" == typeof e ? t.slice(2) : e.slice(2),
                            i ? (delete n, o.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = o, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/forge", ["require", "module", "./aes", "./aesCipherSuites", "./asn1", "./cipher", "./cipherModes", "./debug", "./des", "./hmac", "./kem", "./log", "./md", "./mgf1", "./pbkdf2", "./pem", "./pkcs7", "./pkcs1", "./pkcs12", "./pki", "./prime", "./prng", "./pss", "./random", "./rc2", "./ssh", "./task", "./tls", "./util"],
                        function() {
                            a.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                t("js/forge")
        }),
    function(e, t) {
        "use strict";
        var n = "0.7.12",
            i = "",
            r = "?",
            a = "function",
            o = "undefined",
            s = "object",
            c = "string",
            l = "major",
            d = "model",
            p = "name",
            u = "type",
            f = "vendor",
            h = "version",
            g = "architecture",
            m = "console",
            y = "mobile",
            v = "tablet",
            C = "smarttv",
            S = "wearable",
            _ = "embedded",
            b = {
                extend: function(e, t) {
                    var n = {};
                    for (var i in e) n[i] = t[i] && t[i].length % 2 === 0 ? t[i].concat(e[i]) : e[i];
                    return n
                },
                has: function(e, t) {
                    return "string" == typeof e ? -1 !== t.toLowerCase().indexOf(e.toLowerCase()) : !1
                },
                lowerize: function(e) {
                    return e.toLowerCase()
                },
                major: function(e) {
                    return typeof e === c ? e.replace(/[^\d\.]/g, "").split(".")[0] : t
                },
                trim: function(e) {
                    return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "")
                }
            },
            E = {
                rgx: function() {
                    var e, n, i, r, o, c, l = {},
                        d = 0,
                        p = arguments;
                    for (i = 0; i < p[1].length; i++) r = p[1][i],
                        l[typeof r === s ? r[0] : r] = t;
                    for (; d < p.length && !o;) {
                        var u = p[d],
                            f = p[d + 1];
                        for (e = n = 0; e < u.length && !o;) if (o = u[e++].exec(this.getUA())) for (i = 0; i < f.length; i++) c = o[++n],
                            r = f[i],
                            typeof r === s && r.length > 0 ? 2 == r.length ? l[r[0]] = typeof r[1] == a ? r[1].call(this, c) : r[1] : 3 == r.length ? l[r[0]] = typeof r[1] !== a || r[1].exec && r[1].test ? c ? c.replace(r[1], r[2]) : t: c ? r[1].call(this, c, r[2]) : t: 4 == r.length && (l[r[0]] = c ? r[3].call(this, c.replace(r[1], r[2])) : t) : l[r] = c ? c: t;
                        d += 2
                    }
                    return l
                },
                str: function(e, n) {
                    for (var i in n) if (typeof n[i] === s && n[i].length > 0) {
                        for (var a = 0; a < n[i].length; a++) if (b.has(n[i][a], e)) return i === r ? t: i
                    } else if (b.has(n[i], e)) return i === r ? t: i;
                    return e
                }
            },
            I = {
                browser: {
                    oldsafari: {
                        version: {
                            "1.0": "/8",
                            1.2 : "/1",
                            1.3 : "/3",
                            "2.0": "/412",
                            "2.0.2": "/416",
                            "2.0.3": "/417",
                            "2.0.4": "/419",
                            "?": "/"
                        }
                    }
                },
                device: {
                    amazon: {
                        model: {
                            "Fire Phone": ["SD", "KF"]
                        }
                    },
                    sprint: {
                        model: {
                            "Evo Shift 4G": "7373KT"
                        },
                        vendor: {
                            HTC: "APA",
                            Sprint: "Sprint"
                        }
                    }
                },
                os: {
                    windows: {
                        version: {
                            ME: "4.90",
                            "NT 3.11": "NT3.51",
                            "NT 4.0": "NT4.0",
                            2000 : "NT 5.0",
                            XP: ["NT 5.1", "NT 5.2"],
                            Vista: "NT 6.0",
                            7 : "NT 6.1",
                            8 : "NT 6.2",
                            8.1 : "NT 6.3",
                            10 : ["NT 6.4", "NT 10.0"],
                            RT: "ARM"
                        }
                    }
                }
            },
            A = {
                browser: [[/(opera\smini)\/([\w\.-]+)/i, /(opera\s[mobiletab]+).+version\/([\w\.-]+)/i, /(opera).+version\/([\w\.]+)/i, /(opera)[\/\s]+([\w\.]+)/i], [p, h], [/(opios)[\/\s]+([\w\.]+)/i], [[p, "Opera Mini"], h], [/\s(opr)\/([\w\.]+)/i], [[p, "Opera"], h], [/(kindle)\/([\w\.]+)/i, /(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i, /(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i, /(?:ms|\()(ie)\s([\w\.]+)/i, /(rekonq)\/([\w\.]+)*/i, /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i], [p, h], [/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i], [[p, "IE"], h], [/(edge)\/((\d+)?[\w\.]+)/i], [p, h], [/(yabrowser)\/([\w\.]+)/i], [[p, "Yandex"], h], [/(comodo_dragon)\/([\w\.]+)/i], [[p, /_/g, " "], h], [/(micromessenger)\/([\w\.]+)/i], [[p, "WeChat"], h], [/xiaomi\/miuibrowser\/([\w\.]+)/i], [h, [p, "MIUI Browser"]], [/\swv\).+(chrome)\/([\w\.]+)/i], [[p, /(.+)/, "$1 WebView"], h], [/android.+samsungbrowser\/([\w\.]+)/i, /android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i], [h, [p, "Android Browser"]], [/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i, /(qqbrowser)[\/\s]?([\w\.]+)/i], [p, h], [/(uc\s?browser)[\/\s]?([\w\.]+)/i, /ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i, /juc.+(ucweb)[\/\s]?([\w\.]+)/i], [[p, "UCBrowser"], h], [/(dolfin)\/([\w\.]+)/i], [[p, "Dolphin"], h], [/((?:android.+)crmo|crios)\/([\w\.]+)/i], [[p, "Chrome"], h], [/;fbav\/([\w\.]+);/i], [h, [p, "Facebook"]], [/fxios\/([\w\.-]+)/i], [h, [p, "Firefox"]], [/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i], [h, [p, "Mobile Safari"]], [/version\/([\w\.]+).+?(mobile\s?safari|safari)/i], [h, p], [/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i], [p, [h, E.str, I.browser.oldsafari.version]], [/(konqueror)\/([\w\.]+)/i, /(webkit|khtml)\/([\w\.]+)/i], [p, h], [/(navigator|netscape)\/([\w\.-]+)/i], [[p, "Netscape"], h], [/(swiftfox)/i, /(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i, /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i, /(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i, /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i, /(links)\s\(([\w\.]+)/i, /(gobrowser)\/?([\w\.]+)*/i, /(ice\s?browser)\/v?([\w\._]+)/i, /(mosaic)[\/\s]([\w\.]+)/i], [p, h]],
                cpu: [[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i], [[g, "amd64"]], [/(ia32(?=;))/i], [[g, b.lowerize]], [/((?:i[346]|x)86)[;\)]/i], [[g, "ia32"]], [/windows\s(ce|mobile);\sppc;/i], [[g, "arm"]], [/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i], [[g, /ower/, "", b.lowerize]], [/(sun4\w)[;\)]/i], [[g, "sparc"]], [/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i], [[g, b.lowerize]]],
                device: [[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i], [d, f, [u, v]], [/applecoremedia\/[\w\.]+ \((ipad)/], [d, [f, "Apple"], [u, v]], [/(apple\s{0,1}tv)/i], [[d, "Apple TV"], [f, "Apple"]], [/(archos)\s(gamepad2?)/i, /(hp).+(touchpad)/i, /(hp).+(tablet)/i, /(kindle)\/([\w\.]+)/i, /\s(nook)[\w\s]+build\/(\w+)/i, /(dell)\s(strea[kpr\s\d]*[\dko])/i], [f, d, [u, v]], [/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i], [d, [f, "Amazon"], [u, v]], [/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i], [[d, E.str, I.device.amazon.model], [f, "Amazon"], [u, y]], [/\((ip[honed|\s\w*]+);.+(apple)/i], [d, f, [u, y]], [/\((ip[honed|\s\w*]+);/i], [d, [f, "Apple"], [u, y]], [/(blackberry)[\s-]?(\w+)/i, /(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i, /(hp)\s([\w\s]+\w)/i, /(asus)-?(\w+)/i], [f, d, [u, y]], [/\(bb10;\s(\w+)/i], [d, [f, "BlackBerry"], [u, y]], [/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i], [d, [f, "Asus"], [u, v]], [/(sony)\s(tablet\s[ps])\sbuild\//i, /(sony)?(?:sgp.+)\sbuild\//i], [[f, "Sony"], [d, "Xperia Tablet"], [u, v]], [/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i], [[f, "Sony"], [d, "Xperia Phone"], [u, y]], [/\s(ouya)\s/i, /(nintendo)\s([wids3u]+)/i], [f, d, [u, m]], [/android.+;\s(shield)\sbuild/i], [d, [f, "Nvidia"], [u, m]], [/(playstation\s[34portablevi]+)/i], [d, [f, "Sony"], [u, m]], [/(sprint\s(\w+))/i], [[f, E.str, I.device.sprint.vendor], [d, E.str, I.device.sprint.model], [u, y]], [/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i], [f, d, [u, v]], [/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i, /(zte)-(\w+)*/i, /(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i], [f, [d, /_/g, " "], [u, y]], [/(nexus\s9)/i], [d, [f, "HTC"], [u, v]], [/(nexus\s6p)/i], [d, [f, "Huawei"], [u, y]], [/(microsoft);\s(lumia[\s\w]+)/i], [f, d, [u, y]], [/[\s\(;](xbox(?:\sone)?)[\s\);]/i], [d, [f, "Microsoft"], [u, m]], [/(kin\.[onetw]{3})/i], [[d, /\./g, " "], [f, "Microsoft"], [u, y]], [/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i, /mot[\s-]?(\w+)*/i, /(XT\d{3,4}) build\//i, /(nexus\s6)/i], [d, [f, "Motorola"], [u, y]], [/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i], [d, [f, "Motorola"], [u, v]], [/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i], [[f, b.trim], [d, b.trim], [u, C]], [/hbbtv.+maple;(\d+)/i], [[d, /^/, "SmartTV"], [f, "Samsung"], [u, C]], [/\(dtv[\);].+(aquos)/i], [d, [f, "Sharp"], [u, C]], [/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i, /((SM-T\w+))/i], [[f, "Samsung"], d, [u, v]], [/smart-tv.+(samsung)/i], [f, [u, C], d], [/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i, /(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i, /sec-((sgh\w+))/i], [[f, "Samsung"], d, [u, y]], [/sie-(\w+)*/i], [d, [f, "Siemens"], [u, y]], [/(maemo|nokia).*(n900|lumia\s\d+)/i, /(nokia)[\s_-]?([\w-]+)*/i], [[f, "Nokia"], d, [u, y]], [/android\s3\.[\s\w;-]{10}(a\d{3})/i], [d, [f, "Acer"], [u, v]], [/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i], [[f, "LG"], d, [u, v]], [/(lg) netcast\.tv/i], [f, d, [u, C]], [/(nexus\s[45])/i, /lg[e;\s\/-]+(\w+)*/i], [d, [f, "LG"], [u, y]], [/android.+(ideatab[a-z0-9\-\s]+)/i], [d, [f, "Lenovo"], [u, v]], [/linux;.+((jolla));/i], [f, d, [u, y]], [/((pebble))app\/[\d\.]+\s/i], [f, d, [u, S]], [/android.+;\s(glass)\s\d/i], [d, [f, "Google"], [u, S]], [/android.+;\s(pixel c)\s/i], [d, [f, "Google"], [u, v]], [/android.+;\s(pixel xl|pixel)\s/i], [d, [f, "Google"], [u, y]], [/android.+(\w+)\s+build\/hm\1/i, /android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i, /android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i], [[d, /_/g, " "], [f, "Xiaomi"], [u, y]], [/android.+a000(1)\s+build/i], [d, [f, "OnePlus"], [u, y]], [/\s(tablet)[;\/]/i, /\s(mobile)(?:[;\/]|\ssafari)/i], [[u, b.lowerize], f, d]],
                engine: [[/windows.+\sedge\/([\w\.]+)/i], [h, [p, "EdgeHTML"]], [/(presto)\/([\w\.]+)/i, /(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i, /(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i, /(icab)[\/\s]([23]\.[\d\.]+)/i], [p, h], [/rv\:([\w\.]+).*(gecko)/i], [h, p]],
                os: [[/microsoft\s(windows)\s(vista|xp)/i], [p, h], [/(windows)\snt\s6\.2;\s(arm)/i, /(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i, /(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i], [p, [h, E.str, I.os.windows.version]], [/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i], [[p, "Windows"], [h, E.str, I.os.windows.version]], [/\((bb)(10);/i], [[p, "BlackBerry"], h], [/(blackberry)\w*\/?([\w\.]+)*/i, /(tizen)[\/\s]([\w\.]+)/i, /(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i, /linux;.+(sailfish);/i], [p, h], [/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i], [[p, "Symbian"], h], [/\((series40);/i], [p], [/mozilla.+\(mobile;.+gecko.+firefox/i], [[p, "Firefox OS"], h], [/(nintendo|playstation)\s([wids34portablevu]+)/i, /(mint)[\/\s\(]?(\w+)*/i, /(mageia|vectorlinux)[;\s]/i, /(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i, /(hurd|linux)\s?([\w\.]+)*/i, /(gnu)\s?([\w\.]+)*/i], [p, h], [/(cros)\s[\w]+\s([\w\.]+\w)/i], [[p, "Chromium OS"], h], [/(sunos)\s?([\w\.]+\d)*/i], [[p, "Solaris"], h], [/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i], [p, h], [/(haiku)\s(\w+)/i], [p, h], [/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i], [[p, "iOS"], [h, /_/g, "."]], [/(mac\sos\sx)\s?([\w\s\.]+\w)*/i, /(macintosh|mac(?=_powerpc)\s)/i], [[p, "Mac OS"], [h, /_/g, "."]], [/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i, /(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i, /(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i, /(unix)\s?([\w\.]+)*/i], [p, h]]
            },
            T = function(t, n) {
                if (! (this instanceof T)) return new T(t, n).getResult();
                var r = t || (e && e.navigator && e.navigator.userAgent ? e.navigator.userAgent: i),
                    a = n ? b.extend(A, n) : A;
                return this.getBrowser = function() {
                    var e = E.rgx.apply(this, a.browser);
                    return e.major = b.major(e.version),
                        e
                },
                    this.getCPU = function() {
                        return E.rgx.apply(this, a.cpu)
                    },
                    this.getDevice = function() {
                        return E.rgx.apply(this, a.device)
                    },
                    this.getEngine = function() {
                        return E.rgx.apply(this, a.engine)
                    },
                    this.getOS = function() {
                        return E.rgx.apply(this, a.os)
                    },
                    this.getResult = function() {
                        return {
                            ua: this.getUA(),
                            browser: this.getBrowser(),
                            engine: this.getEngine(),
                            os: this.getOS(),
                            device: this.getDevice(),
                            cpu: this.getCPU()
                        }
                    },
                    this.getUA = function() {
                        return r
                    },
                    this.setUA = function(e) {
                        return r = e,
                            this
                    },
                    this
            };
        T.VERSION = n,
            T.BROWSER = {
                NAME: p,
                MAJOR: l,
                VERSION: h
            },
            T.CPU = {
                ARCHITECTURE: g
            },
            T.DEVICE = {
                MODEL: d,
                VENDOR: f,
                TYPE: u,
                CONSOLE: m,
                MOBILE: y,
                SMARTTV: C,
                TABLET: v,
                WEARABLE: S,
                EMBEDDED: _
            },
            T.ENGINE = {
                NAME: p,
                VERSION: h
            },
            T.OS = {
                NAME: p,
                VERSION: h
            },
            typeof exports !== o ? (typeof module !== o && module.exports && (exports = module.exports = T), exports.UAParser = T) : typeof define === a && define.amd ? define(function() {
                return T
            }) : e.UAParser = T;
        var k = e.jQuery || e.Zepto;
        if (typeof k !== o) {
            var w = new T;
            k.ua = w.getResult(),
                k.ua.get = function() {
                    return w.getUA()
                },
                k.ua.set = function(e) {
                    w.setUA(e);
                    var t = w.getResult();
                    for (var n in t) k.ua[n] = t[n]
                }
        }
    } ("object" == typeof window ? window: this);
var checkoutApp = angular.module("checkoutApp", ["ngRoute", "ngAnimate", "ui.bootstrap", "slickCarousel", "ngMessages", "paypal-button"]);
checkoutApp.config(["$routeProvider",
    function(e) {
        var t = !0;
        t && $("#checkoutAppBody").addClass("checkout-v3"),
            e.when("/test-login/", {
                name: "testLogin",
                template: "SSO TEST LOGIN",
                controller: "TestLoginCtrl"
            }),
            e.when("/cart-info/", {
                name: "cartInfo",
                template: function() {
                    return t ? $("#cartInfoV3Template").html() : /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/i.test(navigator.userAgent) ? $("#cartInfoMobileTemplate").html() : $("#cartInfoTemplate").html()
                },
                controller: "CartInfoCtrl"
            }),
            e.when("/cart-payment/:payment_source", {
                name: "cartPayment",
                template: function() {
                    return t ? $("#cartPaymentv3Template").html() : $("#cartPaymentTemplate").html()
                },
                controller: t ? "CartPaymentCtrlv3": "CartPaymentCtrl"
            }),
            e.when("/cart-payment/", {
                name: "cartPayment",
                template: function() {
                    return t ? $("#cartPaymentv3Template").html() : $("#cartPaymentTemplate").html()
                },
                controller: t ? "CartPaymentCtrlv3": "CartPaymentCtrl"
            }),
            e.when("/cart-finance/", {
                name: "cartFinance",
                template: function() {
                    return t ? $("#cartFinanceV3Template").html() : $("#cartFinanceTemplate").html()
                },
                controller: "CartFinanceCtrl"
            }),
            e.when("/order-confirm/:orderId", {
                name: "orderConfirm",
                template: function() {
                    return $("#orderConfirmTemplate").html()
                },
                controller: "OrderConfirmCtrl"
            }).otherwise({
                redirectTo: "/cart-info/"
            })
    }]).config(["slickCarouselConfig",
    function(e) {
        e.dots = !0,
            e.autoplay = !1
    }]),
    checkoutApp.filter("rawHtml", ["$sce",
        function(e) {
            return function(t) {
                return e.trustAsHtml(t)
            }
        }]),
    checkoutApp.controller("MainAppCtrl", ["CheckoutService", "AlertsService", "TealiumService", "constants", "errors", "updateUtilities", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "GnbService", "$timeout",
        function(e, t, n, i, r, a, o, s, c, l, d, p, u, f, h) {
            "use strict";
            function g() {
                A = setInterval(m, 1e3)
            }
            function m() {
                var e = $(".os-total-fixed-at-bottom-in-mobile");
                e.length > 0 && !e.hasClass("active") && (s.totalPricePos = e.offset().top)
            }
            function y() {
                if ($(window).width() < 768 || !s.isSingleClickCheckoutOn || window.location && window.location.hash && -1 == window.location.hash.indexOf("cart-payment")) if (0 == s.cartItems || s.isEppRedirect() || !s.isSessionIdValid()) {
                    var e = $(".os-total-fixed-at-bottom-in-mobile");
                    e.length > 0 && e.hasClass("active") && e.removeClass("active")
                } else {
                    var t = $(window).scrollTop() + $(window).height() - $(".os-total-fixed-at-bottom-in-mobile").outerHeight(),
                        n = $(".os-total-fixed-at-bottom-in-mobile").outerHeight(),
                        i = $(".checkout-shopping-cart"),
                        r = $(".checkout-payment-holder");
                    $(window).width() < 768 && ($(".os-total-fixed-at-bottom-in-mobile").addClass("active"), $("body").css("padding-bottom", n + "px"), r.length && (t <= s.totalPricePos ? ($(".os-total-fixed-at-bottom-in-mobile").removeClass("active"), $("body").css("padding-bottom", "0px")) : 0 != s.cartItems && !s.isEppRedirect() && s.isSessionIdValid() && ($(".os-total-fixed-at-bottom-in-mobile").addClass("active"), $("body").css("padding-bottom", n + "px"))));
                    var a;
                    i.length && (a = $(".checkout-shopping-cart").offset().top),
                    r.length && (a = $(".checkout-payment-holder").offset().top),
                    $(window).width() >= 768 && $(".order-summary-holder").height($(".sticky-content").outerHeight()),
                    $(window).width() > 767 && ($(".sticky-holder").width($(".sticky-content").outerWidth()).height($(".sticky-content").outerHeight()), $(window).scrollTop() > a ? $(".sticky-holder").addClass("sticky") : $(".sticky-holder").removeClass("sticky"), i.length && C(), r.length && S())
                }
            }
            function v(e, t, n) {
                var i;
                return function() {
                    var r = this,
                        a = arguments,
                        o = function() {
                            i = null,
                            n || e.apply(r, a)
                        },
                        s = n && !i;
                    clearTimeout(i),
                        i = setTimeout(o, t),
                    s && e.apply(r, a)
                }
            }
            function C() {
                var e = $(window).scrollTop(),
                    t = $(".checkout-shopping-cart").position().top + $(".checkout-shopping-cart").outerHeight(),
                    n = $(".order-summary-holder").height(),
                    i = e - t,
                    r = -n;
                i - 60 >= r ? $(".sticky-holder").addClass("bottom") : $(".sticky-holder").removeClass("bottom")
            }
            function S() {
                var e = $(window).scrollTop(),
                    t = $(".checkout-payment-holder").position().top + $(".checkout-payment-holder").outerHeight(),
                    n = $(".order-summary-holder").height(),
                    i = e - t,
                    r = -n;
                i - 60 >= r ? $(".sticky-holder").addClass("bottom") : $(".sticky-holder").removeClass("bottom")
            }
            s.redirectPostLogin = null,
                s.isLoggedIn = window.isLogin(),
                s.ischeckoutv3ui = !0,
                s.userName = "undefined" != typeof window.getUserName ? window.getUserName() : "",
                s.isPaymentSourceDR = !1,
                s.billing = {},
                s.hidePaypal = !1,
                s.isSignup = !1,
                s.checkoutLoginMessage = r.Login.title,
                s.isCarrierActivationEnabled = !0,
                s.subscribeChecked = [],
                s.subscribePPChecked = [],
                s.offers = [],
                s.crossSellSkus = [],
            $.cookie("finEnabled") && (s.isFinancingOn = !0),
                s.isFinancingOn = !0,
                s.simSkus = window.Checkout.simSkus,
                s.carrierActivationSkus = window.Checkout.carrierActivationSkus,
                s.sprintSims = ["SPRT-SIM4FF", "GH59-14351A", "1109-001538"],
                s.tmoSims = ["TMO-SIM4FF", "1109-001515"],
                s.dreamSkus = ["SM-G950UZKAATT", "SM-G950UZSAATT", "SM-G950UZVAATT", "SM-G950UZKATMB", "SM-G950UZSATMB", "SM-G950UZVATMB", "SM-G950UZKASPR", "SM-G950UZSASPR", "SM-G950UZVASPR", "SM-G950UZKAVZW", "SM-G950UZSAVZW", "SM-G950UZVAVZW", "SM-G955UZKAATT", "SM-G955UZSAATT", "SM-G955UZVAATT", "SM-G955UZKATMB", "SM-G955UZSATMB", "SM-G955UZVATMB", "SM-G955UZKASPR", "SM-G955UZSASPR", "SM-G955UZVASPR", "SM-G955UZKAVZW", "SM-G955UZSAVZW", "SM-G955UZVAVZW", "SM-G950UZKAUSC", "SM-G950UZVAUSC", "SM-G950UZSAUSC", "SM-G955UZKAUSC", "SM-G955UZVAUSC", "SM-G955UZSAUSC", "SM-G950UZKAXAA", "SM-G955UZKAXAA", "SM-G955UZBAXAA", "SM-G950UZBAXAA"],
                s.greatSkus = ["SM-N950UZVATMB", "SM-N950UZKAUSC", "SM-N950UZKASPR", "SM-N950UZVAATT", "SM-N950UZVASPR", "SM-N950UZVAUSC", "SM-N950UZVAVZW", "SM-N950UZKAVZW", "SM-N950UZKAATT", "SM-N950UZVAXAA", "SM-N950UZKAXAA", "SM-N950UZKATMB"],
                s.dreamSkusUnlocked = ["SM-G950UZKAXAA", "SM-G955UZKAXAA", "SM-G955UZBAXAA", "SM-G950UZBAXAA"],
                s.dreamPPSkus = ["TA-ADH1-PB3", "HHP-ADH1-PB3-FREE"],
                s.subscriptionSkus = ["HAF-CIN/EXP-6S", "HAFCU1/XAA-6S", "HAF-QIN/EXP-6S"],
                s.subscriptionBySS = ["HHP-ADH1-PB3", "HHP-ADH1-PB3-S2-2MF", "HHP-ADH1-PB4-A"],
                s.premiumCareSubscriptionSkus = ["HHP-ADH1-PB3", "HHP-ADH1-PB4", "HHP-ADH1-PB4-A", "HHP-ADH1-PB3-S2-2MF", "HHP-ADH1-PB4-A"],
                s.isTwoMonthsFreeSku = ["HHP-ADH1-PB3-S2-2MF"],
                s.TMOSkus = ["SM-G950UZKATMB", "SM-G950UZSATMB", "SM-G950UZVATMB", "SM-G955UZKATMB", "SM-G955UZSATMB", "SM-G955UZVATMB"],
                s.waterFilterSkus = ["HAF-CIN/EXP-6S", "HAFCU1/XAA-6S", "HAF-QIN/EXP-6S"],
                s.QLEDTVSkus = ["QN55Q7CAMFXZA", "QN55Q7FAMFXZA", "QN55Q8CAMFXZA", "QN65Q7CAMFXZA", "QN65Q7FAMFXZA", "QN65Q8CAMFXZA", "QN75Q7FAMFXZA", "QN75Q8CAMFXZA", "QN65Q9FAMFXZA", "QN75Q9FAMFXZA", "VG-SGSM11S/ZA", "VG-SOCM15/ZA", "VG-STSM11B/ZA", "WMN-M11EB/ZA", "WMN-M21EB/ZA"],
                s.TVTradeInSKU = ["SM-TITVSony200-TRD", "SM-TITVLG200-TRD", "SM-TITVAny100-TRD"],
                s.tradeinBogoSkus = ["SM-TRDBOGO1-ATT-S8S8P", "SM-TRDBOGO2-USCC-S8", "SM-TRDBOGO3-VZW-S8", "SM-TRDBOGO4-UNL-S8S8P", "SM-TRDBOGO5-USCC-S8P", "SM-TRDBOGO6-VZW-S8P", "SM-TRDBOGO8-SPR-S8S8P", "SM-TRDBOGO7-TMO-S8S8P", "SM-TIBOGO-TMO-S8S8P", "SM-TIBOGO-SPR-S8S8P", "SM-TIBOGO-ATT-S8S8P", "SM-TIBOGO-USCC-S8", "SM-TIBOGO-VZW-S8", "SM-TIBOGO-UNL-S8S8P", "SM-TIBOGO-USCC-S8P", "SM-TIBOGO-VZW-S8P"],
                s.HAInstallationSkus = ["HA-INST-DRY0E", "HA-INST-DRY0G", "HA-INST-WAS00", "HA-INST-DSH00", "HA-INST-REF00", "HA-INST-MWO00", "HA-INST-RNG0E", "HA-INST-RNG0G", "HA-INST-PED00", "HA-INST-ACC00"],
                s.HAhaulAwaySkus = ["HA-HAUL-AWY"],
                s.UIStateInfo = {},
                s.tradeInAkgPromo = ["TI150S8PGalaxyUNLKD", "TI150S8PiPhoneUNLKD", "TI150S8PLGUNLKD", "TI150S8PPixelUNLKD"],
                s.UIStateInfo = {},
                s.UIStateInfo.paymentInfo = {},
                s.UIStateInfo.shippingInfo = {},
                s.UIStateInfo.shippingMethod = {},
            "true" == $.cookie("checkoutv3") && window.isMobile() && (s.isSingleClickCheckoutOn = !0),
                s.subscriptionSkus = ["HAF-CIN/EXP-6S", "HAFCU1/XAA-6S", "HHP-ADH1-PB4", "HAF-QIN/EXP-6S"],
            "Friends & Family Members" == $.cookie("tmktname") && (s.isFandfEnabled = !0),
                s.carriers = {
                    ATT: "AT&T",
                    TMB: "T-Mobile",
                    USC: "US Cellular",
                    SPR: "Sprint",
                    VZW: "Verizon",
                    XAA: "Unlocked"
                },
            "function" != typeof String.prototype.endsWith && (String.prototype.endsWith = function(e) {
                return - 1 !== this.indexOf(e, this.length - e.length)
            }),
                s.cartpaypal = !1,
                window.SCart.sessionIdValid = !0,
                window.paypalLoaderText = !1,
                s.isUtagRegistered = !1,
                s.relativeImagePath = i.IMAGE_PATH,
                s.isPaymentOptionFinance = !1,
            $.cookie("drcc") && (s.isPaymentSourceDR = !0),
            $.cookie("cartpaypalv2") && "true" == $.cookie("cartpaypalv2") && (s.cartpaypal = !0),
            $.cookie("cact") && (s.isCarrierActivationEnabled = !0),
                s.isSessionIdValid = function() {
                    return window.SCart.sessionIdValid
                },
                s.isEmptyCartItem = function(e) {
                    return ! (e && e.line_items && e.line_items.length > 0)
                },
                s.disableOrderSummary = function(e) { (s.isEppRedirect() || !s.isSessionIdValid() || s.isEmptyCartItem(e)) && $(".order-summary-holder, .icon-plus, .btn-promo-accordion").addClass("disabled disabled-cursor")
                },
                s.promptReLogin = function(e) {
                    return e && 401 == e.status && !s.isLoggedIn ? void(s.isSingleClickCheckoutOn && s.$broadcast("paymentStepError", r.defaultError.title, r.defaultError.description)) : (s.checkoutLoginMessage = r.ReLogin.title, s.redirectPostLogin != i.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER && (s.redirectPostLogin = "/cart-payment/" == u.path() ? i.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT: null), window.SCart.sessionIdValid = !1, document.location.href = window.SCart.URL.CHECKOUT_URL(), s.disableOrderSummary(s.shoppingCart), void s.$digest())
                },
            "/cart-payment/paypal" == u.$$path && (window.paypalLoaderText = !0),
                s.isSubscriptionBySS = function(e) {
                    return _.contains(s.subscriptionBySS, e)
                },
                s.isPremiumCareSubscriptionSku = function(e) {
                    return _.contains(s.premiumCareSubscriptionSkus, e)
                },
                s.isSubscriptionWith2MF = function(e, t) {
                    return t = t || e[0].sku,
                        _.contains(s.isTwoMonthsFreeSku, t)
                },
                s.premiumCareSubscriptionOffer = function(e, t) {
                    return t = t || e[0].sku,
                        _.contains(s.premiumCareSubscriptionSkus, t)
                },
                s.premiumCareSubscriptionCart = function() {
                    var e = _.pluck(s.cartItems, "sku_id"),
                        t = _.intersection(e, s.subscriptionBySS);
                    return t && t.length > 0 ? !0 : !1
                },
                s.isQLEDTVinCart = function() {
                    var e = _.pluck(s.cartItems, "sku_id"),
                        t = _.intersection(e, s.QLEDTVSkus);
                    return t && t.length > 0 ? !0 : !1
                },
                s.isQLEDSku = function(e) {
                    return _.contains(s.QLEDTVSkus, e)
                },
                s.anyPremiumCareSubscriptionCart = function() {
                    var e = _.pluck(s.cartItems, "sku_id"),
                        t = _.intersection(e, s.premiumCareSubscriptionSkus);
                    return t && t.length > 0 ? !0 : !1
                },
                s.isTvTradeInSku = function(e) {
                    return s.isTradeInSku(e) ? _.contains(s.TVTradeInSKU, e.sku_id) : void 0
                },
                s.isTradeInSku = function(e) {
                    return e.attributes.product_type_custom && _.contains(i.TRADE_IN, e.attributes.product_type_custom.toUpperCase()) || e.attributes.product_type && _.contains(i.TRADE_IN, e.attributes.product_type.toUpperCase())
                },
                s.isHASku = function(e) {
                    return e.attributes.is_ha_delivery
                },
                s.isInstallationSku = function(e) {
                    if (e) {
                        var t = e.sku_id || e.sku;
                        return _.contains(s.HAInstallationSkus, t)
                    }
                    return ! 1
                },
                s.isHaulAwaySku = function(e) {
                    if (e) {
                        var t = e.sku_id || e.sku;
                        return _.contains(s.HAhaulAwaySkus, t)
                    }
                    return ! 1
                },
                s.isAkgPromoSku = function(e) {
                    return s.tradeInAkgPromo.indexOf(e) > -1
                },
                s.isTradeinBogoInCart = function() {
                    var e = _.pluck(s.cartItems, "sku_id"),
                        t = _.intersection(e, s.tradeinBogoSkus);
                    return t && t.length > 0 ? !0 : !1
                },
                s.isTradeinBogoSku = function(e) {
                    return _.contains(s.tradeinBogoSkus, e)
                },
                s.findIfMixedCartForUpgrade = function(e) {
                    return ! e.attributes || e.attributes.is_upgrade_eligible || e.attributes.product_type && "UPGRADE" == e.attributes.product_type.toUpperCase() ? void 0 : (s.isMixedCartForUpgrade = !0, !0)
                },
                s.findIfUpgradeSkuIsInCart = function(e) {
                    return e.attributes && e.attributes.product_type && "UPGRADE" == e.attributes.product_type.toUpperCase() ? ("UPGRADE-01" == e.sku_id ? (e.phoneUpgade = !0, s.phoneUpgradeInCart = !0, s.TVUpgradeInCart = !1) : "UPGRADE-02" == e.sku_id && (e.TVUpgrade = !0, s.TVUpgradeInCart = !0, s.phoneUpgradeInCart = !1), s.isUpgradeSkuInCart = !0, !0) : void 0
                },
                s.$on("$routeChangeStart",
                    function() {
                        $(".spinner_container").show(),
                            s.isLoggedIn = window.isLogin(),
                            s.userName = window.getUserName()
                    }),
                s.$on("$routeChangeSuccess",
                    function() {
                        $(".spinner_container").hide()
                    }),
                s.$on("$routeChangeError",
                    function() {
                        $(".spinner_container").hide()
                    }),
                s.$on("saveImpression",
                    function(e, t, n) {
                        if (t) {
                            var i = [],
                                r = [],
                                a = [],
                                o = [],
                                c = [],
                                l = [];
                            _.each(t.line_items,
                                function(e) {
                                    i.push(e.sku_id),
                                        a.push(e.attributes.display_name),
                                        o.push(e.attributes.product_type),
                                        r.push(e.line_item_cost.price.amount),
                                        c.push(e.attributes.product_family),
                                        l.push(e.attributes.product_division)
                                });
                            var d = _.pluck(t.line_items, "sku_id"),
                                p = _.pluck(t.line_items, "quantity"),
                                u = _.find(t.line_items,
                                    function(e) {
                                        return 1 == e.financing
                                    }),
                                f = _.find(t.line_items,
                                    function(e) {
                                        return 0 == e.financing
                                    }),
                                h = _.filter(t.line_items_ex,
                                    function(e) {
                                        return 1 == e.is_trade_in_eligible
                                    }),
                                g = {
                                    page_type: "shopping cart",
                                    dr_page_name: n,
                                    site_language: "en",
                                    loggedin_status: s.isLoggedIn,
                                    page_breadcrumb: null,
                                    page_channel: "ecommerce",
                                    stock_list: "in stock",
                                    ecom_flag: "Yes",
                                    billing_li_state: "billing: " + s.isLoggedIn,
                                    cart_theme: "29552800",
                                    cart_id: t.cart_id,
                                    product_sku: d,
                                    product_quantity: p,
                                    product_id: i,
                                    product_name: a,
                                    product_type: o,
                                    product_price: r,
                                    product_family: c,
                                    product_division: l,
                                    financing_available: s.isCartFinancible ? "y": "n",
                                    activation_available: s.fireUtagActivationEligible() ? "y": "n",
                                    order_discount: s.savings ? s.savings.amount: "",
                                    trade_in_eligible: h.length > 0 ? "y": "n",
                                    trade_in_selected: s.isTradeinCart ? "y": "n",
                                    carrier_name: s.carriersInCart()
                                };
                            if ( - 1 != n.search("step3") && (g.page_category = "thankyou", g.order_ID = s.orderId, g.order_total = t.cost.total.amount, g.order_subtotal = t.cost.subtotal.amount, g.order_currency = "USD"), s.anyItemInCartFinancible && s.isCartFinancibleAndMinimumNotMet && (g.page_state = "state1.4|Cart - Minimum Not Met"), ( - 1 != n.search("step2") || -1 != n.search("step3")) && s.isFinancingOn && s.isLoggedIn) {
                                var m = "ReturningUser";
                                s.newFinancingUser && (m = "NewUser"),
                                    "A" != s.financingStatus || s.isSufficientCredit ? "A" == s.financingStatus ? g.page_state = "state4.1|Checkout - Payment Information - New Finance Approved > " + m: "P" == s.financingStatus ? g.page_state = "state4.1|Checkout - Payment Information - New Finance Referred > " + m: "D" == s.financingStatus && (g.page_state = "state4.1|Checkout - Payment Information - New Finance Rejected > " + m) : g.page_state = "state4.4|Checkout - Payment Information - Not Enough Credit - New User > " + m
                            } - 1 != n.search("step1") && s.isLoggedIn && _.find(s.cartItems,
                                function(e) {
                                    return 1 == e.isActivationEnabledLockedSku
                                }) && s.fireUtagActivationConsent(),
                            u && f && (g.page_state = (g.page_state ? g.page_state: "") + " Cart - Mixed Product");
                            var y = s.cartFinancePlanType ? s.cartFinancePlanType: "NoFinance"; - 1 !== y.indexOf("Deferred") && (y = y + "_" + s.cartFinancingDetails.deferred_finance_plan.deferred_period_duration_in_months),
                                g.page_state = (g.page_state ? g.page_state + " - ": "") + y,
                            s.abandonedCartID && (g.page_state = g.page_state + " - ABANDON_CART_EMAIL_" + s.abandonedCartID),
                            s.isHAinCart && (g.page_state = s.haCountinCart == s.totalLineItems ? g.page_state + " - HA_Only": g.page_state + " - HA_Mixed", s.isInstallationSelected && (g.page_state = g.page_state + " - HA_INST"), s.isHaulAwaySelected && (g.page_state = g.page_state + " - HA_HAUL_AWY")),
                            window.utag && "undefined" != typeof window.utag.view && window.utag.view(g)
                        }
                    }),
                s.haUtagLinkFire = function(e) {
                    window.utag && utag.link(e)
                },
                $(document).on("minicart:update",
                    function(e, t) {
                        s.$broadcast("refreshCart", t, !0)
                    }),
                s.onErrorClose = function() {
                    s.haDeliveryErrorMessage = !1,
                        $(".generic-error").hide(),
                    $(".generic-error").find(".btn-remove").hasClass("ha-flag") && (s.haDeliveryErrorMessage = !0, $(".generic-error").find(".btn-remove").removeClass("ha-flag"))
                },
                o.onAlertClose = function(e) {
                    $("#alert-" + e).hide()
                },
                s.showErrorMessage = function(e, t, n) {
                    s.error = {},
                        s.error.title = t,
                        s.error.desc = n,
                        s.globalerrorExists = !0;
                    var i = $(".generic-error");
                    i.length && ($(i).find(".checkout-error-msg-title").text(t), $(i).find(".checkout-error-msg-desc").text(n), $(i).find(".btn-remove").addClass("ha-flag"), $(i).show(), $("html, body").animate({
                            scrollTop: $(i).offset().top
                        },
                        1e3))
                },
                s.$on("cartStepError",
                    function(e, t, n) {
                        s.showErrorMessage(!0, t, n)
                    }),
                s.$on("paymentStepError",
                    function(e, t, n) {
                        s.showErrorMessage(!1, t, n)
                    }),
                s.$on("thankYouPageError",
                    function(e, t, n) {
                        s.showErrorMessage(!1, t, n)
                    }),
                s.getcard = function(e) {
                    return angular.isDefined(e) && (e = e.toLowerCase()),
                        "visa" == e ? "visa": "americanexpress" == e ? "amex": "discover" == e ? "discover": "mastercard" == e ? "master": "jcb" == e ? "jcb": "dinersclub" == e ? "dc": void 0
                },
                s.decorateSublineItems = function(e, t, n) {
                    var i = [];
                    return _.each(e,
                        function(e) {
                            var r = _.find(n,
                                function(t) {
                                    return e.parentItem ? t.sku_id == e.parentItem.sku_id: !1
                                });
                            r || (e.discount = b(e), s.setSubscriptionTC(e), e.attributes.parent_display_name = t.attributes.display_name, e.parentItem = t, t.financing && 0 == e.line_item_cost.price.amount && (e.isFreeItem = !0), s.isTradeInSku(e) && (e.line_item_cost.price.amount = Math.abs(e.line_item_cost.price.amount), e.line_item_cost.regular_price.amount = Math.abs(e.line_item_cost.regular_price.amount)), i.push(e)),
                            s.isTradeInSku(e) && (s.isTradeinCart = !0, s.TvTradeIn = _.contains(s.TVTradeInSKU, e.sku_id)),
                                s.isInstallationSelected = s.isInstallationSelected || _.contains(s.HAInstallationSkus, e.sku_id),
                                s.isHaulAwaySelected = s.isHaulAwaySelected || _.contains(s.HAhaulAwaySkus, e.sku_id),
                                s.findIfMixedCartForUpgrade(e),
                                s.findIfUpgradeSkuIsInCart(e)
                        }),
                        i
                },
                s.setSubscriptionTC = function(e) { (s.isSubscriptionEnabled(e.sku_id) || s.premiumCareSubscriptionOffer([], e.sku_id)) && (e.subscribe = _.contains(s.subscribeChecked, e.sku_id)),
                s.premiumCareSubscriptionOffer([], e.sku_id) && (e.subscribePP = _.contains(s.subscribePPChecked, e.sku_id))
                },
                s.isTMOBogoOffer = function(e) {
                    var t = 0;
                    return _.forEach(e,
                        function(e) { - 1 != s.TMOSkus.indexOf(e.sku_id) && (t += e.quantity)
                        }),
                    t > 1
                },
                s.changeDisplayOrder = function(e) {
                    if (e && e.sublineItems && e.sublineItems.length > 0) {
                        var t = [],
                            n = [];
                        _.forEach(e.sublineItems,
                            function(e) {
                                e && e.attributes && e.attributes.product_type && "UPGRADE" == e.attributes.product_type.toUpperCase() ? n.push(e) : t.push(e)
                            }),
                        n && n.length > 0 && (t.push(n[0]), n.pop()),
                            e.sublineItems = t
                    }
                },
                s.computeUpgradeCost = function(e) {
                    if (s.is_sup_cart) return e && e.cost && e.cost.total && (s.upgradeCost = e.cost.total.amount),
                        void(e && e.applicable_finance_plans && e.applicable_finance_plans.length > 0 && e.applicable_finance_plans[0].eip_finance_plan && (s.upgradeMonthlyCost = e.applicable_finance_plans[0].eip_finance_plan.monthly_payment));
                    if (e && e.line_items && e.line_items.length > 0) {
                        var t;
                        s.upgradeCost = 0,
                            s.upgradeMonthlyCost = 0,
                            _.forEach(e.line_items,
                                function(e) {
                                    e && e.attributes && e.attributes.product_type && "UPGRADE" == e.attributes.product_type.toUpperCase() && (t = e.parentItem.line_item_id)
                                }),
                            _.forEach(e.line_items,
                                function(n) {
                                    n && (n.line_item_id == t || n.parentItem && n.parentItem.line_item_id == t || s.phoneUpgradeInCart && n.attributes.product_family && "MOBILE-ACCESSORIES" == n.attributes.product_family.toUpperCase() && n.attributes.is_upgrade_eligible && !n.parentItem || s.TVUpgradeInCart && n.attributes.product_family && ("TELEVISION-HOME-THEATER-ACCESSORIES" == n.attributes.product_family.toUpperCase() || "HOME-THEATER" == n.attributes.product_family.toUpperCase()) && n.attributes.is_upgrade_eligible && !n.parentItem) && (n.line_item_cost && n.line_item_cost.price && n.line_item_cost.price.amount && n.attributes.is_upgrade_eligible && (s.isTradeInSku(n) ? s.upgradeCost -= n.line_item_cost.price.amount: s.upgradeCost += n.line_item_cost.price.amount), _.forEach(e.line_item_finance_plans,
                                        function(e) {
                                            n.attributes.is_upgrade_eligible && e.line_item_id == n.line_item_id && e.finance_info && e.finance_info.financePlans && e.finance_info.financePlans.length > 0 && e.finance_info.financePlans[0] && e.finance_info.financePlans[0].eip_finance_plan && (s.upgradeMonthlyCost += e.finance_info.financePlans[0].eip_finance_plan.monthly_payment)
                                        }))
                                })
                    }
                },
                s.setUpgradeFlag = function(e) {
                    var t;
                    e && e.line_items && e.line_items.length > 0 && (_.forEach(e.line_items,
                        function(e) {
                            e && e.attributes && e.attributes.product_type && "UPGRADE" == e.attributes.product_type.toUpperCase() && (t = e.parentItem.line_item_id)
                        }), _.forEach(e.line_items,
                        function(e) {
                            s.phoneUpgradeInCart && e && !e.parentItem && e.line_item_id != t && (e.attributes.product_family && "MOBILE-ACCESSORIES" == e.attributes.product_family.toUpperCase() && !e.attributes.is_upgrade_eligible || e.attributes.product_family && "MOBILE-ACCESSORIES" != e.attributes.product_family.toUpperCase()) && (e.sUPIneligible = !0),
                            s.TVUpgradeInCart && e && !e.parentItem && e.line_item_id != t && (e.attributes.product_family && ("HOME-THEATER" == e.attributes.product_family.toUpperCase() || "TELEVISION-HOME-THEATER-ACCESSORIES" == e.attributes.product_family.toUpperCase()) && !e.attributes.is_upgrade_eligible || "HOME-THEATER" != e.attributes.product_family.toUpperCase() && "TELEVISION-HOME-THEATER-ACCESSORIES" != e.attributes.product_family.toUpperCase()) && (e.sUPIneligible = !0),
                            e && e.parentItem && e.parentItem.line_item_id == t && !e.attributes.is_upgrade_eligible && (e.sUPIneligible = !0)
                        }))
                },
                s.deleteNonUpgradeItemsFromCart = function() {
                    var t, n = [],
                        i = s.shoppingCart;
                    if (i && i.line_items && i.line_items.length > 0 && (_.forEach(i.line_items,
                            function(e) {
                                e && e.attributes && e.attributes.product_type && "UPGRADE" == e.attributes.product_type.toUpperCase() && (t = e.parentItem.line_item_id)
                            }), _.forEach(i.line_items,
                            function(e) {
                                e && !e.parentItem && e.line_item_id != t && e.sUPIneligible && n.push(e),
                                e && e.parentItem && e.parentItem.line_item_id == t && !e.attributes.is_upgrade_eligible && n.push(e)
                            }), n && n.length > 0)) {
                        var a = [];
                        _.forEach(n,
                            function(e) {
                                var t = {};
                                t.method = "DELETE",
                                    t.url = e.parentItem ? SCart.URL.CART_SUB_LINE_ITEM_V3_URL(SCart.shoppingCartTransformService.shoppingCartId, e.line_item_id, e.parentItem.line_item_id, !0) : SCart.URL.CART_ITEM_V3_URL(SCart.shoppingCartTransformService.shoppingCartId, e.line_item_id, !0),
                                    t.handler = "removeItemHandler",
                                    a.push(t)
                            }),
                            a && a.length > 0 ? e.shoppingCartCTA(a).then(function(e) {
                                e && e.length > 0 && (s.$broadcast("refreshCart", e[e.length - 1], !0), s.$broadcast("payOverTimeExtd"))
                            }).fail(function() {
                                s.$broadcast("cartStepError", r.RemoveItemError.title, r.RemoveItemError.description),
                                    s.$broadcast("payOverTimeExtd")
                            }) : s.$broadcast("payOverTimeExtd")
                    }
                },
                s.viewDiscountDetail = !0,
                s.enableDiscountDetail = function() {
                    if (s.viewDiscountDetail = !s.viewDiscountDetail, $(window).width() < 768) {
                        var e = $(".discounts-holder").offset().top - 100;
                        $("html, body").animate({
                                scrollTop: e + "px"
                            },
                            500)
                    }
                },
                s.cartHasShippingDiscount = function(e) {
                    return e && e.cost && e.cost.discount && e.cost.discount.details && e.cost.discount.details.shipping && e.cost.discount.details.shipping.amount && e.cost.discount.details.shipping.amount > 0
                },
            s.flattenLineItems = function(e) {
                if (s.isTradeinCart = !1, s.isHAinCart = !1, s.totalLineItems = e.line_items.length, s.haCountinCart = 0, s.isInstallationSelected = !1, s.isHaulAwaySelected = !1, s.displayCartItems = [], s.isMixedCartForUpgrade = !1, s.isUpgradeSkuInCart = !1, s.payNowSelected = !1, s.is_sup_cart = e.is_sup_cart, s.tvOrMobileItemInCart = !1, s.TvTradeIn = !1, s.parentItemCountInCart = 0, s.cartDiscount = {},
                        s.cartDiscount.promotional = 0, s.cartDiscount.bundle = 0, s.cartDiscount.tradeIn = 0, s.cartDiscount.coupon = [], s.cartDiscount.epp = 0, s.cartDiscount.promoCode = 0, s.cartDiscount.shipping = 0, s.cartDiscount.total = 0, s.cartHasShippingDiscount(e) && (s.cartDiscount.shipping += e.cost.discount.details.shipping.amount, s.cartDiscount.total += e.cost.discount.details.shipping.amount), e && e.line_items && e.line_items.length > 0) {
                    var t = [];
                    _.forEach(e.line_items,
                        function(n) {
                            if (n.attributes && n.attributes.image_url && (n.attributes.image_url = n.attributes.image_url.replace("http://", "//").replace("https://", "//")), n.isActivationEnabledLockedSku = ( - 1 == s.TMOSkus.indexOf(n.sku_id) && 1 == n.quantity || s.TMOSkus.indexOf(n.sku_id) > -1 && !s.isTMOBogoOffer(e.line_items)) && s.isCarrierActivationEnabled && s.isActivationEnabledLockedSku(n.sku_id), n.activateSim = (1 == n.quantity || s.TMOSkus.indexOf(n.sku_id) > -1 && s.isTMOBogoOffer(e.line_items)) && n.isActivationEnabledLockedSku ? s.activateSimConsent: !1, s.setSubscriptionTC(n), s.isHASku(n) && (s.haCountinCart++, s.isHAinCart = !0), s.isHaulAwaySku(n) && (n.isHaSubLineItem = !0), s.isInstallationSku(n) && (n.isHaSubLineItem = !0), s.findIfMixedCartForUpgrade(n), s.findIfUpgradeSkuIsInCart(n), n && n.attributes && n.attributes.product_family && ("PHONES" == n.attributes.product_family.toUpperCase() || "TVS" == n.attributes.product_family.toUpperCase()) && (s.tvOrMobileItemInCart = !0), n.discount = b(n), s.ischeckoutv3ui) {
                                var i = n;
                                if (t.push(n), n.line_items && n.line_items.length > 0) {
                                    var r = s.decorateSublineItems(n.line_items, n, e.line_items);
                                    i.sublineItems = r,
                                        t = t.concat(r)
                                }
                                s.changeDisplayOrder(i),
                                    s.displayCartItems.push(i)
                            }
                            n && !n.parentItem && s.parentItemCountInCart++
                        }),
                        e.line_items = t,
                    s.isUpgradeSkuInCart && (s.setUpgradeFlag(e), s.computeUpgradeCost(e))
                }
            };
            var b = function(e) {
                e.totalPromoDiscount = 0,
                    e.totalTradeInDiscount = 0,
                    e.totalNonTradeInOfferDiscount = 0,
                s.isTradeInSku(e) || (e.totalPromoDiscount += e.line_item_cost.regular_price.amount - e.line_item_cost.price.amount),
                e.line_items && e.line_items.length > 0 && _.forEach(e.line_items,
                    function(t) {
                        s.isTradeInSku(t) && t.line_item_cost && t.line_item_cost.price && (e.totalPromoDiscount += t.line_item_cost.price.amount < 0 ? 0 - t.line_item_cost.price.amount: t.line_item_cost.price.amount)
                    }),
                e.discount && e.discount.amount > 0 && (e.totalPromoDiscount -= e.discount.amount),
                    e.totalPromoDiscount = parseFloat(e.totalPromoDiscount.toFixed(2));
                var t = e.discount;
                return t && t.amount || (t = {
                    amount: 0
                }),
                t.details || (t.details = {}),
                t.details.epp && t.details.epp.amount || (t.details.epp = {
                    amount: 0
                }),
                t.details.order_level && t.details.order_level.amount || (t.details.order_level = {
                    amount: 0
                }),
                t.details.coupon && 0 != t.details.coupon.length || (t.details.coupon = []),
                t.details.shipping && t.details.shipping.amount || (t.details.shipping = {
                    amount: 0
                }),
                    t.details.skuOfferCount = 0,
                    t.details.sku_offer ? _.each(t.details.sku_offer,
                        function(n) {
                            n.amount > 0 && (t.details.skuOfferCount = t.details.skuOfferCount + 1, n.offer_type && "TRADEIN" == n.offer_type.toUpperCase() ? e.totalTradeInDiscount += n.amount: e.totalNonTradeInOfferDiscount += n.amount)
                        }) : t.details.sku_offer = [],
                t.details && t.details.epp && t.details.epp.amount && (s.cartDiscount.epp += t.details.epp.amount, s.cartDiscount.total += t.details.epp.amount),
                t.details && t.details.order_level && t.details.order_level.amount && (s.cartDiscount.promoCode += t.details.order_level.amount, s.cartDiscount.total += t.details.order_level.amount),
                t.details && t.details.shipping && t.details.shipping.amount && (s.cartDiscount.shipping += t.details.shipping.amount, s.cartDiscount.total += t.details.shipping.amount),
                t.details && t.details.coupon && t.details.coupon.length > 0 && _.each(t.details.coupon,
                    function(e) {
                        s.cartDiscount.coupon.push(e),
                        e.discount && e.discount.amount && (s.cartDiscount.total += e.discount.amount)
                    }),
                e.totalPromoDiscount && (s.cartDiscount.promotional += e.totalPromoDiscount, s.cartDiscount.total += e.totalPromoDiscount),
                e.totalNonTradeInOfferDiscount && (s.cartDiscount.bundle += e.totalNonTradeInOfferDiscount, s.cartDiscount.total += e.totalNonTradeInOfferDiscount),
                e.totalTradeInDiscount && (s.cartDiscount.tradeIn += e.totalTradeInDiscount, s.cartDiscount.total += e.totalTradeInDiscount),
                    t
            };
            s.formatTotalItemsInCart = function(e) {
                var t = 0;
                return _.each(e,
                    function(e) {
                        t += e.quantity
                    }),
                    t
            },
                s.calculateSavings = function(e) {
                    var t = 0,
                        n = 0,
                        i = 0,
                        r = 0,
                        a = 0,
                        o = 0;
                    _.forEach(e.line_items,
                        function(e) {
                            e.line_item_cost.savings = {},
                                e.line_item_cost.savings.amount = e.line_item_cost.regular_price.amount - e.line_item_cost.price.amount,
                                t += e.line_item_cost.savings.amount,
                            s.isTradeInSku(e) && (t += Math.abs(e.line_item_cost.price.amount), n += Math.abs(e.line_item_cost.price.amount)),
                            s.isInstallationSku(e) && (i += Math.abs(e.line_item_cost.price.amount), r += Math.abs(e.line_item_cost.regular_price.amount)),
                            s.isHaulAwaySku(e) && (a += Math.abs(e.line_item_cost.price.amount), o += Math.abs(e.line_item_cost.regular_price.amount))
                        });
                    var c = e.cost,
                        l = {};
                    EcomApi.isTransformRequired ? (l.promo = c.subtotal.amount + c.shipping.amount + c.tax.amount - c.total.amount, l.discounts = t) : (l.promo = c.subtotal.amount + c.shipping.amount + c.tax.amount - c.total.amount - n, l.discounts = t - n),
                    l.promo < 0 && (l.promo = 0),
                    e.cost && e.cost.subtotal && (e.cost.subtotal.amount += n),
                        l.promo = +l.promo.toFixed(2),
                        l.tradein = Math.abs(n),
                        l.amount = l.promo + l.discounts + l.tradein,
                    s.cartHasShippingDiscount(e) && (l.amount += c.discount.details.shipping.amount, l.discounts += c.discount.details.shipping.amount),
                        l.amount = +l.amount.toFixed(2),
                        e.cost.subtotal.amount = c.subtotal.amount,
                        s.savings = l,
                        s.installationFee = i,
                        s.originalInstallationFee = r,
                        s.haulAwayFee = a,
                        s.originalHaulAwayFee = o,
                        s.installationServiceFee = s.haulAwayFee + s.installationFee,
                        s.cartSubTotal = c.subtotal.amount,
                    s.installationServiceFee && s.isHAinCart && (s.cartSubTotal = c.subtotal.amount - s.installationServiceFee)
                };
            var E = function() {
                    u.path().indexOf("/cart-info/") < 0 && u.path("/cart-info/")
                },
                I = function(e) {
                    return e && 0 == e.line_items
                };
            s.refreshCartHelper = function(e) {
                if (s.setFinancingDetails(e), s.flattenLineItems(e), s.shoppingCart = e, s.cartItems = e.line_items, s.cost = e.cost, s.standardShippingMethodDetails = e.shipping_method, s.calculateSavings(e), s.fetchCartRecommendations = ("true" == $.cookie("useCartRecommendation") ? !0 : !1) && s.tvOrMobileItemInCart, s.isUpgradeSkuInCart && !s.is_sup_cart && !s.isMixedCartForUpgrade && 1 == s.parentItemCountInCart) {
                    var t = !1,
                        n = !0;
                    s.deleteUpgradeItemsFromCart(t, n)
                }
            },
                s.refreshCart = function(e, t, i) {
                    var r = $.extend({},
                        e);
                    if (s.refreshCartHelper(r), s.setUserAlerts(e.user_alerts), s.totalItemsInCart = s.formatTotalItemsInCart(r.line_items), h(function() {
                            $("select").selectric(),
                                $(".checkout-price-update-message").show(),
                                s.$digest(),
                                s.scrollAlert(),
                                n.trackInputTags()
                        }), g(), I(s.shoppingCart) && E(), ("addItems" == i || "getCart" == i) && ($(document).trigger("cartPageLoadEvent"), !s.isTagFired)) {
                        var a = new Date,
                            o = a.getTime(),
                            c = "addItems" == i ? "viewcart-load-done-addItems": "viewcart-load-done-getCart";
                        h(function() {
                            "undefined" != typeof newrelic.fireCustomPageAction && newrelic.fireCustomPageAction(c, o, s.shoppingCart)
                        }),
                            s.isTagFired = !0
                    }
                    y()
                },
                s.setUserAlerts = function(e) {
                    s.isTradeinCart || (s.alerts = t.getData(e))
                },
                s.scrollAlert = function() {
                    s.alerts && s.alerts.length > 0 && $("html, body").animate({
                            scrollTop: $(".checkout-price-update-message").offset().top
                        },
                        1e3)
                },
                s.restrictPromoCode = function() {
                    var e = EcomApi.isTransformRequired ? !0 : !1;
                    return s.isTradeinCart && !e
                },
                s.showPromo = function() {
                    return s.restrictPromoCode() || !(s.cartItems && s.cartItems.length > 0) || s.isEppRedirect() || !s.isSessionIdValid() ? !1 : (s.promoMsg = "", s.promoClass = "", $(".promo-inputs").find(".promo-code-text").attr("disabled", !1), $(".btn-promo-accordion").next().slideToggle(250), $(".btn-promo-accordion").toggleClass("active"), $(".promo-inputs").find(".promo-code-text").focus(), $(window).width() > 767 && setTimeout(function() {
                            $(".sticky-holder").height($(".sticky-content").outerHeight())
                        },
                        300), void s.androidDeactivateSticky())
                },
                s.scrollPromo = function() {
                    setTimeout(function() {
                            var e = $(window).scrollTop();
                            $("html.touch, body.touch").animate({
                                    scrollTop: e - 100 + "px"
                                },
                                "slow")
                        },
                        100)
                },
                s.applyPromo = function(t) {
                    t && t.length > 0 && e.applyPromo(t, i.PAGECONTEXT.ORDER_SUMMARY).then(function(e) {
                        s.promoMsg = "PROMO CODE APPLIED",
                            s.promoClass = "promo-success",
                        ("paypal" == s.paymentSource || s.shoppingCart.payment && s.shoppingCart.payment.paypal && "TxSuccess" == s.shoppingCart.payment.paypal.paypal_status) && s.authChange(),
                            s.$digest(),
                            s.$broadcast("refreshCart", e, !1),
                        s.anyPremiumCareSubscriptionCart() || s.cartHasSubscription() || s.zerodollarchange()
                    }).E401(function(e) {
                        $(".promo-inputs").hide(),
                            s.promptReLogin(e)
                    }).E409(function(e) {
                        s.promoClass = "promo-fail",
                        e.responseText && s.isJsonString(e.responseText) && (e = JSON.parse(e.responseText)),
                            s.promoMsg = r[e.error] ? r[e.error].title: "The promo code you entered is invalid.",
                            s.$digest()
                    }).fail(function(e) {
                        e.responseText && s.isJsonString(e.responseText) && (e = JSON.parse(e.responseText)),
                            r[e.error] ? s.promoMsg = r[e.error].title: s.showErrorMessage(!0, r.defaultError.title, r.defaultError.description)
                    })
                },
                s.formatAddress = function(e) {
                    var t = "";
                    return e && (t = e.line1 + ", ", e.line2 && (t = t + e.line2 + ", "), t = t + e.city + ", " + e.state_or_province + ", " + e.postal_code),
                        t
                };
            var A;
            s.stopStickyNav = function() {
                angular.isDefined(A) && (clearInterval(A), A = void 0)
            },
                $(window).scroll(function() {
                    y()
                });
            var T = v(function() {
                    if ($(window).width() > 767) $("body").width("auto"),
                        $("body").css("padding-bottom", "0"),
                        $(".sticky-holder").height($(".sticky-content").outerHeight()),
                        $(".sticky-holder").width($(".order-summary-holder").width()),
                        $(".order-summary-holder").find(".info-box").width($(".order-summary-holder").outerWidth() - 66);
                    else {
                        $("body").width($(window).width()),
                            $(".sticky-holder").css("height", "auto"),
                            $(".sticky-holder").css("width", "auto"),
                            $(".order-summary-holder").css("height", "auto"),
                            $(".sticky-holder").removeClass("sticky").removeClass("bottom");
                        var e = $(".minicart-v2").find(".item-container"),
                            t = $(".minicart-v2").find(".minicart-close"),
                            n = $(".minicart-v2").find(".purchase-options"),
                            i = $(".minicart-v2").find(".gnb-checkout"),
                            r = $(window).height(),
                            a = r - t.outerHeight() - n.outerHeight() - i.outerHeight() - 2;
                        e.height(a).css({
                            "overflow-x": "hidden",
                            "overflow-y": "auto"
                        })
                    }
                },
                250);
            $(window).on("resize", T),
                s.itemQuantites = function(e, t) {
                    var n = 4;
                    return t > n && (n = t),
                        _.times(n,
                            function() {
                                var e = 1;
                                return 3 == arguments[0] && (e = "", arguments[0] = "4+"),
                                arguments[0] + e
                            })
                },
                s.getPaymentMethod = function(e, t) {
                    return e && !t ? "Paypal": e && t ? "Paypal Credit": "Credit Card"
                },
                s.showAuthChangeEntity = function(e, t) {
                    return s.showAuthChange = {},
                        s.showAuthChange[e] = t,
                        h(function() {
                            s.$digest()
                        }),
                        !0
                },
                s.authChange = function() {
                    s.haAvailableInPaypalAddress = !1,
                        s.isSingleClickCheckoutOn ? (s.paymentMode = "edit", s.shippingMode = "edit", $(".add-new-shipping-address").hide(), $(".add_new_addr").show(), setTimeout(function() {
                                $("html, body").animate({
                                        scrollTop: $("#_card_info").offset().top
                                    },
                                    "slow")
                            },
                            200), "paypal" == s.UIStateInfo.paymentInfo.paymentMethod && (s.shippingSameAsBilling = !1, $("#_paymentTypeCC").prop("checked", !0), s.isLoggedIn && (s.billing.email = s.contact.email, s.billing.phone = s.contact.phone), s.UIStateInfo.paymentInfo.paymentMethod = "card", s.UIStateInfo.paymentInfo.isChanged = !0, s.UIStateInfo.paymentInfo.isValid = !1, s.UIStateInfo.shippingInfo.isChanged = !0, s.UIStateInfo.shippingInfo.isValid = !1, o.selectedPayment = void 0, o.isPaypal = !1, $(".checkout-payment-cc-details").show(), $("input[name=payMethod]:checked").removeAttr("checked"), s.UIStateInfo.paymentInfo.isComplete = !1)) : ($("#_paymentTypeCC").prop("checked", !0), s.paymentMode = "edit", s.$broadcast("disablePaypal"), setTimeout(function() {
                                $("html, body").animate({
                                        scrollTop: $("#_card_info").offset().top
                                    },
                                    "slow")
                            },
                            200))
                },
                s.isEppRedirect = function() {
                    return SCart.isEppRedirect()
                },
                s.setRedirectPostLogin = function(e) {
                    s.redirectPostLogin = s.redirectPostLogin || "cartPayment" != e ? s.redirectPostLogin: i.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT
                },
                o.$on("$routeChangeStart",
                    function(e, t, n) {
                        t && t.$$route && t.$$route.name && "cartInfo" == t.$$route.name && n && n.$$route && n.$$route.name && (s.isTagFired = !0)
                    }),
                o.$on("$routeChangeSuccess",
                    function(t, n) {
                        if (window.SCart.sessionIdValid && n && n.$$route && n.$$route.name && ("cartFinance" == n.$$route.name || s.isSingleClickCheckoutOn && "cartPayment" == n.$$route.name)) {
                            var i = $.cookie("remoteId");
                            i && "undefined" != i && e.validateAuthToken(i).then(function(e) {
                                "cartPayment" == n.$$route.name && (s.validateTknSingleClickDone = !0, s.fireSingleClickCheckoutTags());
                                var t = JSON.parse(e);
                                "valid" != t.status && (s.checkoutLoginMessage = r.ReLogin.title, window.SCart.sessionIdValid = !1, s.setRedirectPostLogin(n.$$route.name), window.location.href = window.SCart.URL.CHECKOUT_URL())
                            }).fail(function() {
                                s.checkoutLoginMessage = r.ReLogin.title,
                                    window.SCart.sessionIdValid = !1,
                                    s.setRedirectPostLogin(n.$$route.name),
                                    window.location.href = window.SCart.URL.CHECKOUT_URL()
                            })
                        }
                    }),
                s.showSavings = function() {
                    return s.isCartEmpty ? !1 : void($(window).width() > 768 && (window.utag && utag.link({
                        link_cat: "tool tip",
                        link_id: "order_summary_total_savings_tooltip",
                        link_meta: "link_name:total savings tooltip",
                        link_position: "order summary"
                    }), $(".order-summary-holder").find(".info-box").width($(".order-summary-holder").outerWidth() - 66), $(".savings-on-total").addClass("active"), $(".savings-on-total").find(".info-box").css({
                        top: "95px",
                        opacity: "0",
                        display: "block"
                    }), $(".savings-on-total").find(".info-box").animate({
                            top: "45px",
                            opacity: 1
                        },
                        350)))
                },
                s.hideSavings = function() {
                    return s.isCartEmpty ? !1 : void($(window).width() > 768 && ($(".order-summary-holder").find(".info-box").width($(".order-summary-holder").outerWidth() - 66), $(".savings-on-total").removeClass("active"), $(".savings-on-total").find(".info-box").animate({
                            top: "95px",
                            opacity: 0
                        },
                        350,
                        function() {
                            $(".savings-on-total").find(".info-box").css({
                                display: "none"
                            })
                        })))
                },
                s.toggleSavings = function() {
                    return s.isCartEmpty ? !1 : void($(window).width() < 768 ? ($(".savings-on-total").toggleClass("active"), $(".savings-on-total").find(".info-box").slideToggle(), $(".savings-on-total").find(".icon-info").toggleClass("active")) : ($(".order-summary-holder").find(".info-box").width($(".order-summary-holder").outerWidth() - 66), $(".savings-on-total").toggleClass("active"), $(".savings-on-total").hasClass("active") ? ($(".savings-on-total").find(".info-box").css({
                        top: "95px",
                        opacity: "0",
                        display: "block"
                    }), $(".savings-on-total").find(".info-box").animate({
                            top: "45px",
                            opacity: 1
                        },
                        350)) : $(".savings-on-total").find(".info-box").animate({
                            top: "95px",
                            opacity: 0
                        },
                        350,
                        function() {
                            $(".savings-on-total").find(".info-box").css({
                                display: "none"
                            })
                        })))
                },
                s.zerodollarchange = function() {
                    0 == s.cost.total.amount && (s.isSingleClickCheckoutOn && (s.shippingMethodMode = "edit", s.UIStateInfo.paymentInfo.isValid = !0, s.UIStateInfo.paymentInfo.isChanged = !1, s.UIStateInfo.paymentInfo.isComplete = !0, s.UIStateInfo.paymentInfo.paymentMethod = void 0), "view" != s.shippingMode ? (s.shippingMode = "edit", s.shippingMethodMode = s.isSingleClickCheckoutOn ? "edit": "disabled") : s.shippingMethodMode = "edit", -1 != $(".checkout-payment-shipping-methods .checkout-payment-form-subtitle").text().indexOf("No") && $(".checkout-payment-shipping-methods .checkout-payment-form-subtitle").addClass("no-shipping-zero-dollar"), s.addedPayment = {},
                        s.paymentMode = "disabled", s.shippingSameAsBilling && (s.bluraddress(), $("#_addressInfo_userEmail").parents(".input-control").addClass("focus"), $("#_addressInfo_userPhoneNo").parents(".input-control").addClass("focus")), s.isLoggedIn ? s.isSingleClickCheckoutOn || (s.shippingSameAsBilling ? ($(".add_new_addr").show(), $(".add-new-shipping-address").hide()) : $(".add_phone_email").hide()) : ($(".add_new_addr").show(), $(".add-new-shipping-address").hide()), s.shippingSameAsBilling = !1, $("#_sameAsShipAddress").removeAttr("checked"), s.$digest())
                },
                s.latestPurchaseflow = function(e) {
                    if (e && s.isJsonString(e.responseText)) {
                        var t = JSON.parse(e.responseText).purchase_flow_response_payload;
                        t && (s.$broadcast("refreshCart", t.cart, !1, "addItems"), s.resetQuery())
                    }
                },
                s.fixDomain = function(e) {
                    if (!e) return s.relativeImagePath + "/checkout/no-photo.jpg";
                    var t = e;
                    return - 1 != t.indexOf("secureus.samsung.com") && (t = t.replace("secureus.samsung.com", "www.samsung.com")),
                        t
                },
                s.isActivationEnabledLockedSku = function(e) {
                    return s.carrierActivationSkus.indexOf(e) > -1 && (e.endsWith("SPR") || e.endsWith("TMB"))
                },
                s.cartHasSimSkus = function() {
                    var e = _.filter(s.cartItems,
                        function(e) {
                            return e.parentItem && 1 == e.parentItem.quantity
                        }),
                        t = _.pluck(e, "sku_id"),
                        n = _.intersection(t, s.simSkus);
                    return n && n.length > 0
                },
                s.removeSimFromCart = function() {
                    var e = _.filter(s.cartItems,
                        function(e) {
                            return s.simSkus.indexOf(e.sku_id) > -1
                        });
                    o.$broadcast("removeItems", e, "noActivation")
                },
                s.getTradeInSkuFromCart = function() {
                    return _.filter(s.cartItems,
                        function(e) {
                            return s.isTradeInSku(e)
                        })
                },
                s.removeTradeInFromCart = function() {
                    var e = s.getTradeInSkuFromCart();
                    o.$broadcast("removeItems", e, "removeTradeInItem")
                },
                s.carrierActivationEnabled = function() {
                    if (!s.isCarrierActivationEnabled) return ! 1;
                    if (!s.isLoggedIn) return ! 1;
                    var e = _.filter(s.cartItems,
                        function(e) {
                            return 1 == e.quantity || s.TMOSkus.indexOf(e.sku_id) > -1
                        }),
                        t = _.find(e,
                            function(e) {
                                return e.sku_id.endsWith("SPR") || e.sku_id.endsWith("TMB")
                            }),
                        n = _.intersection(t, s.carrierActivationSkus);
                    return n && n.length > 0 ? !0 : s.cartHasSimSkus() ? !0 : !1
                },
                s.activationEnabledItemCount = function() {
                    var e = 0;
                    return _.each(s.cartItems,
                        function(t) { (1 == t.quantity || s.TMOSkus.indexOf(t.sku_id) > -1 && s.isTMOBogoOffer(s.cartItems)) && ((t.sku_id.endsWith("SPR") || t.sku_id.endsWith("TMB")) && s.carrierActivationSkus.indexOf(t.sku_id) > -1 ? e += t.quantity: s.simSkus.indexOf(t.sku_id) > -1 && t.parentItem && 1 == t.parentItem.quantity && (e += t.quantity))
                        }),
                        e
                },
                s.cartHasSim = function() {
                    var e = _.pluck(s.cartItems, "sku_id");
                    return _.intersection(e, s.simSkus).length > 0
                },
                s.mapOffersToCartItem = function(e, t, n) {
                    var i = _.find(s.cartItems,
                        function(t) {
                            return t.sku_id == e
                        });
                    if (i) {
                        var r = _.pluck(t, "offers"),
                            a = [].concat.apply([], r),
                            o = a.filter(function(e) {
                                return "Cross-sell" == e.type
                            }),
                            c = _.pluck(o, "productOffers"),
                            l = [].concat.apply([], c),
                            d = _.uniq(l,
                                function(e) {
                                    return e.sku
                                }),
                            p = _.pluck(s.cartItems, "sku_id"),
                            u = d.filter(function(e) {
                                var t = e.extRefId || e.sku;
                                return ! _.contains(p, t)
                            });
                        if (n) i.simOffers = s.cartHasSim() || 1 != i.quantity ? [] : l;
                        else {
                            i.offers = u;
                            var f = _.pluck(u, "sku");
                            s.crossSellSkus = f.concat(f, s.crossSellSkus)
                        }
                        s.$digest()
                    }
                },
                s.mapOffers = function() {
                    for (var e = 0; e < s.offers.length; e++) s.mapOffersToCartItem(s.offers[e].skuId, s.offers[e].offers, !1)
                },
                s.loginCallBack = function() {
                    window.SCart.sessionIdValid = !0,
                        s.isLoggedIn = window.isLogin(),
                        s.userName = window.getUserName(),
                        s.carrierActivationConsentRequired = !s.isLoggedIn,
                        a.suppressUpSellIt(),
                        s.payoverTimeSelected && s.isCartFinancible && s.isFinancingOn && !s.isCartFinancibleAndMinimumNotMet ? s.getCreditDetails("redirect") : s.checkoutSelected && (s.redirectPostLogin = i.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT, u.path("/cart-payment")),
                        s.payoverTimeSelected = !1,
                        s.checkoutSelected = !1,
                    $(window).width() < 767 && (s.ischeckoutv3ui ? $(".os-action-holder.os-total-fixed-at-bottom-in-mobile").show() : $(".os-total-fixed-at-bottom-in-mobile.os-cart-payment-options-holder.for-mobile").show()),
                        s.$broadcast("onUserLogin"),
                        s.$digest()
                },
                s.onUserLogInComplete = function() {
                    s.isV3Checkout = EcomApi.isTransformRequired,
                        e.refreshCart({
                            context: i.PAGECONTEXT.CONTACT_INFO
                        }).then(function(e) {
                            s.$broadcast("refreshCart", e, !0),
                                s.loginCallBack()
                        })
                },
                s.fireLoginTags = function(e) {
                    if (s.checkoutSelected || s.payoverTimeSelected) {
                        var t = "";
                        s.payoverTimeSelected ? t = "Finance -" + e: s.isTradeinCart ? t = "TradeIn -" + e: s.cartHasSimSkus() ? t = "Activation -" + e: s.premiumCareSubscriptionCart() && (t = "Premium Care - " + e);
                        var n = {
                            page_type: "shopping cart",
                            dr_page_name: t,
                            site_language: "en",
                            loggedin_status: s.isLoggedIn,
                            page_breadcrumb: null,
                            page_channel: "ecommerce",
                            stock_list: "in stock",
                            ecom_flag: "Yes",
                            cart_theme: "29552800",
                            financing_available: s.isCartFinancible ? "y": "n",
                            activation_available: s.carrierActivationEnabled() ? "y": "n"
                        };
                        window.utag && window.utag.view(n)
                    }
                },
                s.resetQuery = function(e) {
                    e ? u.search(e, null) : u.url(u.path()),
                    history && history.replaceState && history.replaceState(void 0, void 0, "#" + u.url())
                },
                s.loginFailCallBack = function() {
                    $(".no-activation").remove(),
                    $(window).width() < 767 && (s.ischeckoutv3ui ? $(".os-action-holder.os-total-fixed-at-bottom-in-mobile").show() : $(".os-total-fixed-at-bottom-in-mobile.os-cart-payment-options-holder.for-mobile").show()),
                        s.fireLoginTags("Login Close"),
                    s.forceLogIn() && (window.location.href = document.referrer && document.referrer.indexOf("www.samsung.com") > -1 ? document.referrer: "http://www.samsung.com/us/"),
                        s.payoverTimeSelected = !1,
                        s.checkoutSelected = !1,
                        s.loginCancelled = !0
                },
                $(document).on("onLogInComplete",
                    function() {
                        EcomApi.findIfTransformIsRequired();
                        var e = u.search();
                        e.checkout && "payOverTime" == e.checkout && (s.payoverTimeSelected = !0, s.resetQuery("checkout")),
                            s.fireLoginTags("Login Sign In"),
                            s.onUserLogInComplete()
                    }),
                $(document).on("onSignUpComplete",
                    function() {
                        EcomApi.findIfTransformIsRequired();
                        var e = u.search();
                        e.checkout && "payOverTime" == e.checkout && (s.payoverTimeSelected = !0, s.resetQuery("checkout")),
                            s.fireLoginTags("Sign Up"),
                            s.onUserLogInComplete()
                    }),
                $(document).on("onLogInCancel",
                    function() {
                        s.loginFailCallBack()
                    }),
                $(document).on("onPromptLogin",
                    function() {
                        $(window).width() < 767 && (s.ischeckoutv3ui ? $(".os-action-holder.os-total-fixed-at-bottom-in-mobile").hide() : $(".os-total-fixed-at-bottom-in-mobile.os-cart-payment-options-holder.for-mobile").hide())
                    }),
                $(document).on("noActivation",
                    function() {
                        $(document).trigger("onPromptClose"),
                            s.cartHasSimSkus() ? s.removeSimFromCart() : (u.path("/cart-payment"), s.$digest())
                    }),
                $(document).on("removeTradeIn",
                    function() {
                        $(document).trigger("onPromptClose"),
                            s.isTradeinCart ? s.removeTradeInFromCart() : (u.path("/cart-payment"), s.$digest())
                    }),
                $(document).on("noPremiumCare",
                    function() {
                        if ($(document).trigger("onPromptClose"), s.premiumCareSubscriptionCart()) {
                            var e = _.filter(s.cartItems,
                                function(e) {
                                    return s.subscriptionBySS.indexOf(e.sku_id) > -1
                                });
                            o.$broadcast("removeItems", e, "noPremiumCare")
                        } else u.$path("/cart-payment"),
                            s.$digest()
                    }),
                $(document).on("noPremiumCareAndActivation",
                    function() {
                        if ($(document).trigger("onPromptClose"), s.premiumCareSubscriptionCart()) {
                            var e = _.filter(s.cartItems,
                                function(e) {
                                    return s.subscriptionBySS.indexOf(e.sku_id) > -1
                                });
                            s.cartHasSimSkus() && (e = e.concat(_.filter(s.cartItems,
                                function(e) {
                                    return s.simSkus.indexOf(e.sku_id) > -1
                                }))),
                                o.$broadcast("removeItems", e, "noPremiumCareAndActivation")
                        } else u.$path("/cart-payment"),
                            s.$digest()
                    }),
                s.$watch(function() {
                        return window.SCart.sessionIdValid
                    },
                    function() {
                        s.forceLogIn() && (s.showGlobalLogin(), s.isEppRedirect() ? f.setEPPRedirectLayout() : f.setSessionExpiryLayout())
                    },
                    !0),
                s.isLoginRequired = function() {
                    if (s.logInForCarrierActivation = !1, s.isTMOBogoOffer(s.cartItems) && "true" == $.cookie("forceGNBLogin")) return ! 0;
                    if (s.isTradeinCart) return ! 0;
                    if (s.premiumCareSubscriptionCart()) return ! 0;
                    if (!s.isCarrierActivationEnabled) return ! 1;
                    var e = _.find(s.cartItems,
                        function(e) {
                            return 1 == e.activateSim
                        });
                    return e ? (s.logInForCarrierActivation = !0, !0) : s.cartHasSimSkus() ? (s.logInForCarrierActivation = !0, !0) : s.oneClickActivationSelected ? (s.logInForCarrierActivation = !0, !0) : s.isWaterFilterSkuInCart() ? !0 : !1
                },
                s.registerUtag = function(e) {
                    window.utagUrl && !s.isUtagRegistered && (window.utag_data = window.utag_data || {},
                        function(e) {
                            e = window.utagUrl;
                            var t = document.getElementsByTagName("body")[0],
                                n = document.createElement("script");
                            n.async = !0,
                                n.type = "text/javascript",
                                n.src = e,
                                t.appendChild(n)
                        } (), s.isUtagRegistered = !0, e && (setTimeout(e, 5e3), window.onbeforeunload = function() {
                        e()
                    }))
                },
                s.isSIMSku = function(e) {
                    return _.contains(s.simSkus, e)
                },
                s.isDreamSku = function(e) {
                    return _.contains(s.dreamSkus, e)
                },
                s.isGreatSku = function(e) {
                    return _.contains(s.greatSkus, e)
                },
                s.cartHasDreamSkuUnlocked = function() {
                    var e = _.pluck(s.cartItems, "sku_id"),
                        t = _.intersection(e, s.dreamSkusUnlocked);
                    return t && t.length > 0 ? !0 : !1
                },
                s.isDreamPPSku = function(e) {
                    return _.contains(s.dreamPPSkus, e)
                },
                s.isSubscriptionEnabled = function(e) {
                    return _.contains(s.subscriptionSkus, e)
                },
                s.cartHasDreamPP = function() {
                    var e = _.pluck(s.cartItems, "sku_id"),
                        t = _.intersection(e, s.dreamPPSkus);
                    return t && t.length > 0 ? !0 : !1
                },
                s.cartHasDreamSku = function() {
                    var e = _.pluck(s.cartItems, "sku_id"),
                        t = _.intersection(e, s.dreamSkus);
                    return t && t.length > 0 ? !0 : !1
                },
                s.cartHasGreatSku = function() {
                    var e = _.pluck(s.cartItems, "sku_id"),
                        t = _.intersection(e, s.greatSkus);
                    return t && t.length > 0 ? !0 : !1
                },
                s.showGlobalLogin = function() {
                    $(document).trigger("onPromptLogin")
                },
                s.carriersInCart = function() {
                    var e = _.pluck(s.cartItems, "sku_id"),
                        t = "";
                    return _.each(e,
                        function(e) {
                            var n = e.substr(e.length - 3);
                            s.carriers[n] && (t += t ? "|" + s.carriers[n] : s.carriers[n])
                        }),
                        t
                },
                s.isPremiumCare = function(e) {
                    return "HHP-ADH1-PB4" == e || "HHP-ADH1-PB4-A" == e
                },
                s.cartHasSubscription = function() {
                    var e = _.pluck(s.cartItems, "sku_id"),
                        t = _.intersection(e, s.subscriptionSkus);
                    return t && t.length > 0 ? t.length: 0
                },
                s.ifPPSubscribed = function() {
                    var e = !1,
                        t = !1;
                    return _.each(s.cartItems,
                        function(t) {
                            s.isSubscriptionEnabled(t.sku_id) && (t.subscribe || s.isSubscriptionAgreed || s.isSubscriptionWith2MF([], t.sku_id) || (e = !0))
                        }),
                        e || t ? (setTimeout(function() {
                                s.$broadcast("cartStepError", r.SubscribeError.title, r.SubscribeError.description)
                            },
                            0), !1) : (s.onErrorClose(), !0)
                },
                s.showGlobalLogin = function() {
                    $(document).trigger("onPromptLogin"),
                        $(document).ready(function() {
                            $(document).trigger("onPromptLogin")
                        })
                },
                s.isIE = function() {
                    var e = window.navigator.userAgent,
                        t = e.indexOf("MSIE ");
                    return t > 0 || navigator.userAgent.match(/Trident.*rv\:11\./) ? !0 : !1
                },
                s.setPaymentOptions = function() {
                    s.hidePaypal = s.anyPremiumCareSubscriptionCart() || s.cartHasSubscription() || s.isTradeinCart || s.isWaterFilterSkuInCart() ? !0 : !1
                },
                s.fireUtagActivationEligible = function() {
                    return _.find(s.cartItems,
                        function(e) {
                            return 1 == e.isActivationEnabledLockedSku || e.simOffers && e.simOffers.length > 0
                        })
                },
                s.fireUtagActivationConsent = function() {
                    window.utag && utag.link({
                        link_cat: "add to cart",
                        link_id: "activation_consent",
                        link_meta: "link_name:activation_consent",
                        link_position: "activation_consent"
                    })
                },
                s.disableSaveCard = function() {
                    return s.anyPremiumCareSubscriptionCart() || s.cartHasSubscription() || s.isTradeinCart || s.isWaterFilterSkuInCart()
                },
                s.shippingOptionsText = {
                    Standard: "1-5 business days",
                    Expedited: "2 business days",
                    Express: "1 business day",
                    "Samsung White Glove Delivery": "Delivery at your convenience",
                    "Standard Ground Shipping": "1-5 business days",
                    "Overnight Air - US - samsung": "1 business day",
                    "2 Day Air - US": "2 business days",
                    "White Glove - samsung": "Delivery at your convenience",
                    "Standard Freight Shipping-samsung": "Delivery at your convenience",
                    "Samsung Standard Delivery": "1-5 business days"
                },
                a.suppressUpSellIt(),
                s.forceLogIn = window.Checkout.forceLogIn,
                s.isWaterFilterSkuInCart = function() {
                    var e = _.pluck(s.cartItems, "sku_id"),
                        t = _.intersection(e, s.waterFilterSkus);
                    return t && t.length > 0 ? !0 : !1
                },
                s.isMobileAppView = function() {
                    return "true" == $.cookie("isMobileApp") && window.isMobile()
                },
                s.alterForMobileApp = function() {
                    $(".gnb-b2c-mnav, .gnb-b2c-logo, .gnb-b2c-icons, .gnb-footer").hide(),
                        $(".gnb-b2c-mcont").addClass("premium-care-app-header"),
                        $(".gnb-b2c-mcont").text("Samsung +")
                },
            s.isMobileAppView() && setTimeout(function() {
                    s.alterForMobileApp()
                },
                0),
                s.isJsonString = function(e) {
                    try {
                        JSON.parse(e)
                    } catch(t) {
                        return ! 1
                    }
                    return ! 0
                },
                s.isAndroidDevice = function() {
                    var e = navigator.userAgent.toLowerCase(),
                        t = e.indexOf("android") > -1;
                    return window.isMobile() && t === !0
                },
                s.androidDeactivateSticky = function() {
                    s.isAndroidDevice() && ($(".btn-promo-accordion").hasClass("active") || $(".estimated-tax-holder a").hasClass("active")) ? $(".os-cart-payment-options-holder").addClass("android-deactivate-sticky") : $(".os-cart-payment-options-holder").removeClass("android-deactivate-sticky")
                },
                s.setNRCustomAttributes = function() {
                    window.newrelic && (newrelic.setCustomAttribute("isEppUser", s.isEppRedirect()), newrelic.setCustomAttribute("isLoggedIn", s.isLoggedIn), newrelic.setCustomAttribute("ecomSessionId", $.cookie("s_ecom_session")))
                },
                s.setNRCustomAttributes(),
                o.isMobileDevice = window.isMobile(),
                s.isBackOrdered = function(e) {
                    return "BACKORDERED" == e.inventory_status.status.toUpperCase()
                },
                s.isPreOrdered = function(e) {
                    return "PREORDER" == e.inventory_status.status.toUpperCase()
                },
                s.isDetailsAvailable = function(e) {
                    return e.discount && e.discount.details && e.discount.details.skuOfferCount > 0 || e.totalPromoDiscount && e.totalPromoDiscount >= 1 || e.discount && e.discount.details && e.discount.details.epp && e.discount.details.epp.amount && e.discount.details.epp.amount > 0 || e.discount && e.discount.details && e.discount.details.order_level && e.discount.details.order_level.amount && e.discount.details.order_level.amount > 0 || e.discount && e.discount.details && e.discount.details.coupon && e.discount.details.coupon.length > 0 || e.discount && e.discount.details && e.discount.details.shipping && e.discount.details.shipping.amount && e.discount.details.shipping.amount > 0 || s.isPremiumCare(e.sku_id)
                },
                s.isUpgradeOffer = function(e) {
                    return e.sku && "UPGRADE-01" == e.sku || e.sku_id && "UPGRADE-01" == e.sku_id ? (e.phoneUpgradeCrossSell = !0, s.displayPhoneUpgradeTC = !0, !0) : e.sku && "UPGRADE-02" == e.sku || e.sku_id && "UPGRADE-02" == e.sku_id ? (e.TVUpgradeCrossSell = !0, s.displayTVUpgradeTC = !0, !0) : void 0
                },
                s.deleteUpgradeItemsFromCart = function(t, n) {
                    var i = [];
                    if (_.forEach(s.cartItems,
                            function(e) {
                                s.findIfUpgradeSkuIsInCart(e) && i.push(e)
                            }), i && i.length > 0) {
                        var a = [];
                        _.forEach(i,
                            function(e) {
                                var t = {};
                                t.method = "DELETE",
                                    t.url = SCart.URL.CART_SUB_LINE_ITEM_V3_URL(SCart.shoppingCartTransformService.shoppingCartId, e.line_item_id, e.parentItem.line_item_id, !0),
                                    t.handler = "removeItemHandler",
                                    a.push(t)
                            }),
                        a && a.length > 0 && e.shoppingCartCTA(a).then(function(e) {
                            e && e.length > 0 && s.$broadcast("refreshCart", e[e.length - 1], !0),
                            n && s.$broadcast("cartStepError", r.UpgradeRemoveError.title, r.UpgradeRemoveError.description)
                        }).fail(function() {
                            s.$broadcast("cartStepError", r.RemoveItemError.title, r.RemoveItemError.description)
                        })
                    }
                },
                s.isIntranetSite = function() {
                    if (window.document.documentMode) try {
                        var e = window.status;
                        return window.status = "testIntranetMode",
                            "testIntranetMode" === window.status ? (window.status = e, !0) : !1
                    } catch(t) {
                        return ! 1
                    }
                    return ! 1
                },
            s.isIE() && s.isIntranetSite() && (s.hidePaypalForIE = !0),
                h(function() {
                    n.trackInputTags()
                })
        }]),
    checkoutApp.factory("CheckoutService", ["$q", "constants", "$http", "cryptoUtil", "updateUtilities", "$rootScope",
        function(e, t, n, i, r, a) {
            "use strict";
            var o;
            o = window.Checkout.shoppingCartService ? window.Checkout.shoppingCartService: new SCart.ShoppingCartService({
                showLoading: !0
            });
            var s = {
                getCartItems: function(e, t) {
                    return o.getCart(e, t)
                },
                getPaymentUiUrl: function() {
                    return o.getPaymentUiUrl(t.PAGECONTEXT.PAYMENT_INFO)
                },
                removeItem: function(e, t, n) {
                    return o.removeItem(e, t, n)
                },
                addItem: function(e, t, n) {
                    return o.addItem(e, t, n)
                },
                addItems: function(e, t) {
                    return o.addItems(e, t)
                },
                replaceCart: function(e) {
                    return o.replaceCart(e)
                },
                changeQuantity: function(e, t, n, i) {
                    return o.changeQuantity(e, t, n, i)
                },
                getAccessories: function(e, t) {
                    return o.fetchAccessories(e, t)
                },
                applyPromo: function(e, t) {
                    return o.applyPromoCode(e, t)
                },
                addUpdateShippingInfo: function(e, t, n) {
                    return o.updateShippingInfo(e, t, n)
                },
                updateShippingMethod: function(e, t) {
                    return o.updateShippingMethod(e, t)
                },
                addAssurantInfo: function(e, t, n) {
                    return o.addAssurantInfo(e, t, n)
                },
                getShippingOptions: function(e) {
                    return o.fetchShippingOptions(e)
                },
                getEstimatedTaxInfo: function(e, t) {
                    return o.getEstimatedTaxInfo(e, t)
                },
                getAvailableHomeDeliveryDates: function(e, t, n) {
                    return o.getAvailableHomeDeliveryDates(e, t, n)
                },
                getSavedShippingAddress: function(e) {
                    return o.getSavedShippingAddress(e)
                },
                deleteShippingAddress: function(e, t) {
                    return o.deleteShippingAddress(e, t)
                },
                getSavedPayments: function(e) {
                    return o.getSavedPayments(e)
                },
                validateAddress: function(e, t) {
                    return o.validateAddress(e, t)
                },
                addPayment: function(e, n, r, a, s, c) {
                    if ("financing" == r) {
                        var l = {};
                        return l.billing_info = n.billing_info,
                            l.billing_record = {},
                            l.billing_record.billing_record_id = n.billing_record_id,
                            l.billing_record.account_provider = "ECom",
                            o.addExistingPayment(l, t.PAGECONTEXT.PAYMENT_INFO)
                    }
                    if (r) {
                        var l = {};
                        return l.credit_card_details_encrypted = i.encryptCardInfo(n),
                            l.billing_info = e,
                        a || (l.save_payment_method = s ? !0 : !1),
                            o.addPayment(l, a, t.PAGECONTEXT.PAYMENT_INFO)
                    }
                    var l = {};
                    return l.billing_info = n.billing_info,
                        l.billing_record = {},
                        l.billing_record.billing_record_id = n.id,
                        l.billing_record.account_provider = n.account_provider,
                        o.addExistingPayment(l, t.PAGECONTEXT.PAYMENT_INFO)
                },
                checkout: function(e, t) {
                    return o.checkout(e, t)
                },
                ziplookup: function(e, t) {
                    return o.ziplookup(e, t)
                },
                getPromotions: function(e) {
                    return o.getPromotions(e, t.PAGECONTEXT.PROMOTIONS)
                },
                getV3Promotions: function(e, n) {
                    return o.getV3Promotions(e, n, t.PAGECONTEXT.PROMOTIONS)
                },
                getV3PromotionsPrice: function(e) {
                    return o.getV3PromotionsPrice(e, t.PAGECONTEXT.PROMOTIONS)
                },
                getV3ProductCatalog: function(e) {
                    return o.getV3ProductCatalog(e, t.PAGECONTEXT.PROMOTIONS)
                },
                refreshCart: function(e, t) {
                    return o.refreshCart(e, t)
                },
                getPaypalUrl: function(e, n) {
                    var i = window.location.origin + window.location.pathname + "#/cart-payment/paypal",
                        r = window.location.origin + window.location.pathname + "#/cart-payment/paypal-error";
                    return o.getPaypalUrl(e, i, r, n, t.PAGECONTEXT.PAYMENT_INFO)
                },
                loginRedirectUrl: function(e) {
                    return o.loginRedirectUrl(e)
                },
                getUserProfile: function(e, t) {
                    return o.getUserProfileInfo(e)
                },
                getShoppingCartPubKey: function(e) {
                    return o.getShoppingCartPubKey(e)
                },
                validateAuthToken: function(e, t) {
                    return o.validateAuthToken(e)
                },
                getCurrentCart: function() {
                    return o.cart
                },
                saveCustomAttributes: function(e, t) {
                    return o.saveCustomAttributes(e, t)
                },
                getCustomAttributes: function() {
                    return o.attributes
                },
                submitFinanceApplication: function(e, t) {
                    var n = i.encryptFinancingInfo(e);
                    return o.submitFinanceApplication(t, n)
                },
                getFinancingStatus: function(e) {
                    return o.getFinancingStatus(e)
                },
                getFinancingPubKey: function(e) {
                    return o.getFinancingPubKey(e)
                },
                getFinanceBillingRecord: function(e, t) {
                    return o.getFinanceBillingRecord(e, t)
                },
                linkTDAccount: function(e, t) {
                    var n = i.encryptTDAccount(e);
                    return o.linkTDAccount(n, t)
                },
                addFinancePlan: function(e, t) {
                    return o.addFinancePlan(e, t)
                },
                getUserAddress: function(e) {
                    return o.getUserAddress(e)
                },
                addSubLineItem: function(e, t, n, i) {
                    return o.addSubLineItem(e, t, n, i)
                },
                shoppingCartCTA: function(e, t) {
                    return o.shoppingCartCTA(e, t)
                },
                submitFinanceCTA: function(e, t) {
                    return o.submitFinanceCTA(e, t)
                },
                undoRemove: function(e, t, n, i, r) {
                    if (n) return o.addSubLineItem(n, e, t, r);
                    if (i) {
                        var a = [],
                            s = {
                                skuId: e,
                                quantity: t
                            };
                        return s.lineitems = [],
                            _.forEach(i,
                                function(e) {
                                    var t = {
                                        skuId: e.sku_id,
                                        quantity: e.quantity
                                    };
                                    s.lineitems.push(t)
                                }),
                            a.push(s),
                            o.addItems(a, r)
                    }
                    return o.addItem(e, t, r)
                },
                getOrder: function(e, t) {
                    return o.getOrder(e, t)
                },
                submitFinanceApplicationCta: function(e, t) {
                    return o.purchaseFlowCTA(e, t)
                },
                getFinanceApplicationCta: function(e, t) {
                    return o.shoppingCartCTA(e, t)
                },
                getAvailableDatesForOrder: function(e, t) {
                    return o.getAvailableDatesForOrder(e, t)
                },
                scheduleInstallation: function(e, t, n) {
                    return o.scheduleInstallation(e, t, n)
                },
                removeMultipleItems: function(e, t) {
                    return o.removeMultipleItems(e, t)
                },
                subscribeSMS: function(e, t, n) {
                    return o.subscribeSMS(e, t, n)
                },
                fetchRecommendations: function(e) {
                    return o.fetchRecommendations(e)
                }
            };
            return s.wrapExclude = ["getPaypalUrl", "getShippingOptions", "updateShippingMethod", "refreshCart", "getSavedShippingAddress", "getSavedPayments", "getUserProfile", "getShoppingCartPubKey", "getPromotions", "getV3Promotions", "getV3PromotionsPrice", "getV3ProductCatalog", "getCustomAttributes", "getFinancingStatus", "fetchRecommendations"],
                r.wrapObj(s)
        }]),
    checkoutApp.factory("PaymentService", ["$q", "$http",
        function(e, t) {
            "use strict";
            return {}
        }]),
    checkoutApp.factory("ConfirmService", ["$q", "$http",
        function(e, t) {
            "use strict";
            return {}
        }]),
    checkoutApp.constant("constants",
        function() {
            "use strict";
            return {
                PAGECONTEXT: {
                    CART_INFO: "cart-summary",
                    PROMOTIONS: "relevance",
                    ORDER_SUMMARY: "order-summary",
                    CONTACT_INFO: "contact-info",
                    PAYMENT_INFO: "payment-info",
                    SHIPPING_INFO: "shipping-info",
                    SHIPPING_METHOD: "shipping-method",
                    ORDER: "order",
                    COMMON: "common",
                    SPP: "spp",
                    CHECKOUT_LOGIN: "checkout-login",
                    CART_CHANGED: "cart-changed",
                    CART_FINANCE: "cart-finance",
                    THANKYOU_PAGE: "thankyou-page",
                    CART_FINANCE_APPLICATION: "cart-finance-application"
                },
                CHECKOUT_LOGIN_REDIRECT: {
                    CART_PAYMENT: 1,
                    CART_PAYMENT_PLACEORDER: 2
                },
                TRADE_IN: ["TRADE IN", "TRADEIN"],
                IMAGE_PATH: "/us/smg/etc/designs/samsung/global/images/ecommerce",
                CHECKOUT_SECTION: {
                    SHIPPING: "SHIPPING",
                    PAYMENT: "PAYMENT"
                },
                DATE_FORMAT: "yyyy/MM/dd",
                DATE_FORMAT1: "EEEE, dd MMMM",
                HOME_APPLIANCES: ["HOME-APPLIANCES", "HOME APPLIANCES", "HOME APPLIANCE"],
                INSTALLATION: ["INSTALLATION"],
                HAUL_AWAY: ["HAUL-AWAY"],
                PROMOTIONS_LIST: ["CandyRackShoppingCart", "ActivationSamsung"],
                TD_FINANCING_PAYMENT_METHOD: "TDFINANCING"
            }
        } ()),
    checkoutApp.constant("errors",
        function() {
            "use strict";
            return {
                PurchaseFlowCannotBeModified: {
                    title: "Your order has already been placed.",
                    description: ""
                },
                MissingShippingInfo: {
                    title: "Please enter your shipping information.",
                    description: ""
                },
                PromoCodeAlreadyAppliedOnTheCart: {
                    title: "The promo code you entered has already been applied to your order.",
                    description: ""
                },
                CouponCodeAlreadyAppliedOnTheCart: {
                    title: "The promo code you entered has already been applied to your order.",
                    description: ""
                },
                InvalidPromoCode: {
                    title: "The promo code you entered is Invalid.",
                    description: ""
                },
                InvalidCouponCode: {
                    title: "We're Sorry! This promotion is already redeemed or is invalid",
                    description: "No change was made to the cart. Kindly try with a different coupon code."
                },
                BadRequestDefaultError: {
                    title: "We are unable to process your request at this time.",
                    description: "Please try again later; we apologize for the inconvenience."
                },
                PromoCodeExpired: {
                    title: "The promo code you entered has expired.",
                    description: ""
                },
                EComFlowSubmitCartUnsupported: {
                    title: "We’re unable to process your order at this time.",
                    description: "Please try again later; we apologize for the inconvenience."
                },
                CartNotComplete: {
                    title: "Please complete all of the required information before placing the order.",
                    description: ""
                },
                AddToCartError: {
                    title: "The item could not be added to the cart.",
                    description: "An error occurred. Please try after some time; we apologize for the inconvenience."
                },
                AddItemError: {
                    title: "The item could not be added to the cart.",
                    description: "An error occurred. Please try after some time. Sorry for the inconvenience."
                },
                AssurantWarrantyInfoIsRequired: {
                    title: "Something went wrong. We cannot process this request without the IMEI number & the phone number.",
                    description: "Please try adding the warranty product again. We apologize for the inconvenience."
                },
                RemoveItemError: {
                    title: "The item could not be removed from the cart.",
                    description: "An error occurred. Please try after some time. Sorry for the inconvenience."
                },
                PrivateStoreLimitRestriction: {
                    title: "The product cannot be added to the cart.",
                    description: "The product exceeds the maximum quantity that you are allowed to purchase."
                },
                PrivateStoreLimitAndMinQuantityRestriction: {
                    title: "The quantity of this product has been changed to meet the minimum quantity required for this purchase.",
                    description: ""
                },
                PrivateStoreMinQuantityRestriction: {
                    title: "The quantity of this product has been changed to meet the minimum quantity required for this purchase.",
                    description: ""
                },
                AuthError: {
                    title: '"Your session has expired.',
                    description: "Please login again and complete your request."
                },
                InvalidCreditCard: {
                    title: "The credit card information you have entered is invalid.",
                    description: "Please enter valid credit card information."
                },
                InvalidCharacters: {
                    title: "Address has invalid characters.",
                    description: ""
                },
                InventoryUnavailableError: {
                    title: "The item could not be added to the cart as it is out of stock.",
                    description: "Please try after some time; we apologize for the inconvenience."
                },
                OutOfStockOnSubmitCart: {
                    title: "The order could not be placed.",
                    description: ""
                },
                AddressAlreadyInAddressList: {
                    title: "The specified address is already saved.",
                    description: "Please select from the saved address and continue."
                },
                CartHasBeenChanged: {
                    title: "Cart has changed since payment authorization.",
                    description: "Please re-apply your payment."
                },
                CartPaymentFailure: {
                    title: "We are unable to process your payment at this time.",
                    description: "Please try again later with a different card; we apologize for the inconvenience."
                },
                DisallowedPostalCode: {
                    title: "Service to the entered zip code is unavailable.",
                    description: ""
                },
                DisallowedShippingAddress: {
                    title: "We do not service the address currently.",
                    description: "Please enter a different address to proceed."
                },
                SessionExpiredForGuest: {
                    title: "We are unable to process your request at this time.",
                    description: "Please check the items in your cart and checkout; we apologize for the inconvenience."
                },
                ShippingDisallowedPostalCode: {
                    title: "We do not service the zip code currently.",
                    description: "Please enter a different zip code to proceed."
                },
                DisallowedShippingStateProvince: {
                    title: "We do not service the provided zip code currently.",
                    description: "Please enter a different zip code to proceed."
                },
                DisallowedShippingCity: {
                    title: "We do not service the provided city currently.",
                    description: "Please enter a different city to proceed."
                },
                InvalidPostalCode: {
                    title: "The zip code you entered is invalid; please enter a valid zip code.",
                    description: ""
                },
                EmptyShippingInPaypal: {
                    title: "Your payment could not be processed with PayPal.",
                    description: "Please complete the payment with credit card. Apologise for the inconvenience caused."
                },
                ShippingAddressInvalid: {
                    title: "Entered Shipping address is not valid.",
                    description: "Please enter correct shipping address and proceed."
                },
                ShippingAddressInvalidCharacters: {
                    title: "The shipping address you entered is invalid.",
                    description: " Please enter a valid shipping address."
                },
                iFrameError: {
                    title: "We are unable to process your request at this time.",
                    description: ""
                },
                ShippingAddressInvalidOverride: {
                    title: "We could not find the shipping address.",
                    description: "Please click on continue if you want to proceed with the same address."
                },
                TooManyTradeInProductsInCart: {
                    title: "You can only have 1 Trade-In device per order.",
                    description: ""
                },
                ShoppingCartSchemaError: {
                    title: "We couldn’t add the item to the your cart.",
                    description: "Please try again later; we apologize for the inconvenience."
                },
                SubmitCartError: {
                    title: "Your order could not be processed at this time.",
                    description: "Please try again later; we apologize for the inconvenience."
                },
                defaultError: {
                    title: "We are unable to process your request at this time.",
                    description: "Please try after sometime. Sorry for the inconvenience"
                },
                Login: {
                    title: "Please login to see items in your cart.",
                    description: "Prompt user to login."
                },
                ReLogin: {
                    title: "We are sorry, your shopping session has expired. Please login again to see items in your cart.",
                    description: "Prompt user to re-login if their session has expired."
                },
                CartChangedDuringOrderSubmission: {
                    title: "We are unable to process your request at this time.",
                    description: " Please review your cart details and try again; we apologize for the inconvenience."
                },
                LoginError: {
                    title: "Your email or password is incorrect.",
                    description: " Please try again."
                },
                AlreadyExists: {
                    title: "User Account already exists.",
                    description: "Please try again."
                },
                InvalidShippingInPaypal: {
                    title: "We do not service this address currently.",
                    description: "Please enter your payment information again and enter a different shipping address to proceed."
                },
                NonZeroCart: {
                    title: "",
                    description: "Please update your payment information to continue."
                },
                FinancingDefaultError: {
                    title: "Something went wrong. Please try again.",
                    description: ""
                },
                FinanceAdapterRequestPayloadDecryptionFailed: {
                    title: "Please fill out the credit application to proceed.",
                    description: "We couldnt find a credit application associated with your account. Please fill out the credit application to proceed."
                },
                AddressInvalid: {
                    title: "Entered address is not valid.",
                    description: "Please enter correct address and proceed."
                },
                PromoCodeError: {
                    title: "The promo code that you entered is no longer valid.",
                    description: "Please check the items in your cart and try again."
                },
                SubscribeError: {
                    title: "Please agree to the Terms & Conditions.",
                    description: "Your cart consists of an auto renewal product, please agree to the terms and conditions to proceed."
                },
                CannotHaveMultipleTradeInProductsInCart: {
                    title: "We are unable to process your request at this time.",
                    description: "You can only have 1 Trade-In device per order."
                },
                TradeInParentProductQuantityGreaterThanOne: {
                    title: "We are unable to process your request at this time.",
                    description: "You can only have 1 Trade-In device per order."
                },
                TradeInProductCannotBeAParent: {
                    title: "We are unable to process your request at this time.",
                    description: "This product cannot be added to cart."
                },
                ParentProductIsNotEligibleForTradeIn: {
                    title: "We are unable to process your request at this time.",
                    description: "The product is not eligible for trade-in."
                },
                homeDeliveryError: {
                    title: "Something went wrong. Please try again.",
                    description: "We are unable to process your request at this time."
                },
                homeDeliveryPaymentError: {
                    title: "Major Appliance delivery not available for this ZipCode",
                    description: "Please try with someother Zipcode"
                },
                homeDeliveryNotAvailable: {
                    title: "Major Appliance delivery not available for this zipcode",
                    description: ""
                },
                PromoNotApplicableWithoutTradeIn: {
                    title: "The order could not be placed.",
                    description: "You must Trade-In an eligible device to qualify for free AKG headphones"
                },
                InActiveCoupon: {
                    title: "The promo code has expired.",
                    description: "No change was made to your cart."
                },
                InvalidRedemptionCount: {
                    title: "You have exhausted the coupon code limit.",
                    description: "No change was made to your cart."
                },
                UnauthorizedEmail: {
                    title: "The promo code is invalid.",
                    description: "No change was made to your cart."
                },
                UnauthorizedSiteId: {
                    title: "This promotion is applicable for specific logged in users.",
                    description: ""
                },
                NotBestOffer: {
                    title: "Only one coupon can be applied to the cart or you may have to login to use this coupon.",
                    description: ""
                },
                MaxRedemptionCountReached: {
                    title: "This promotion has already been redeemed.",
                    description: "No change was made to your cart."
                },
                MaxRedemptionCountReachedForUser: {
                    title: "This promotion has already been redeemed.",
                    description: "No change was made to your cart."
                },
                DeliveryViaEmail: {
                    title: "Delivery date will be confirmed later.",
                    description: "You will get an email with delivery date confirmation."
                },
                DeliveryRetry: {
                    title: "We are unable to process your request at this moment, please retry after sometime",
                    description: ""
                },
                ReschduleError: {
                    title: "We are unable to process your request at this moment.",
                    description: "Please try after sometime through My Orders page or contact us at 855-716-2387."
                },
                CartLineItemLimitReached: {
                    title: "You cannot add more than 50 items in your cart.",
                    description: "Please remove item(s) from your cart. We apologize for the inconvenience caused."
                },
                InvalidSamsungUpgradeCart: {
                    title: "Some items in cart are not eligible for Samsung Upgrade program. ",
                    description: "Please remove item(s) from your cart. We apologize for the inconvenience caused."
                },
                InvalidUpgradeLineItem: {
                    title: "Some items in cart are not eligible for Samsung Upgrade program. ",
                    description: "Please remove item(s) from your cart. We apologize for the inconvenience caused."
                },
                SkuLimitReached: {
                    title: "You cannot have more than 2 quantities of the same item in the cart. ",
                    description: "Please remove item(s) from your cart to proceed further. We apologize for the inconvenience caused."
                },
                ItemOutOfStock: {
                    title: "Item in the cart is out of stock.",
                    description: ""
                },
                MultipleSUPOrdersInDay: {
                    title: "We are unable to process your request at this time.",
                    description: "Limit of one Samsung Upgrade order allowed per 24 hours period reached"
                },
                PaymentNeedToBeReApplied: {
                    title: "Your payment information has expired.",
                    description: "Please update the payment information and try again; we apologize for the inconvenience."
                },
                InvalidWarrantyError: {
                    title: "Your request could not be completed.",
                    description: " Only one warranty product could be added for an item. Please delete the existing warranty product and try again."
                },
                UnableToApplySUPFinancing: {
                    title: "The item could not be added to the cart.",
                    description: "This item is not eligible for Samsung Upgrade Financing. We apologize for the inconvenience."
                },
                UpgradeRemoveError: {
                    title: "This item is not eligible for Samsung Upgrade Financing. We apologize for the inconvenience.",
                    description: ""
                }
            }
        } ()),
    checkoutApp.factory("AlertsService", ["$rootScope",
        function(e) {
            "use strict";
            function t() {
                var e = [];
                c.PriceChanged.items.reduce(function(t, n) {
                        return t[n.sku_id] || (t[n.sku_id] = {
                            name: n.name,
                            oldPrice: 0,
                            newPrice: 0,
                            property: n.property,
                            url: n.url,
                            sku_id: n.sku_id
                        },
                            e.push(t[n.sku_id])),
                            t[n.sku_id].oldPrice += n.oldPrice,
                            t[n.sku_id].newPrice += n.newPrice,
                            t
                    },
                    {}),
                    c.PriceChanged.items = e
            }
            function n(e) {
                var t = e.alert_data;
                if (t.old_price && t.old_price.price && t.new_price && t.new_price.price && t.old_price.price.amount != t.new_price.price.amount) {
                    var n = s(e);
                    c.PriceChanged ? c.PriceChanged.items.push(n) : c.PriceChanged = {
                        title: "The price of the item(s) in your cart has changed",
                        items: [n],
                        note: "Please review the updated price and confirm the total amount."
                    }
                }
            }
            function i(e) {
                if (e && e.length > 0) {
                    var t = _.uniq(e,
                        function(e) {
                            return e.sku_id
                        }),
                        n = o(t);
                    n && n.length > 0 && (c.ItemsRemoved = {
                        title: "The following item(s) were removed/modified from your cart as they are no longer available. Please check the cart and try again.",
                        removedItems: n
                    })
                }
            }
            function r(e) {
                return {
                    title: "One or more items were removed from your cart due to purchase restrictions."
                }
            }
            function a(t) {
                var n = _.findWhere(e.cartItems, {
                    sku_id: t
                });
                return n ? n.attributes: {}
            }
            function o(t) {
                var n = _.pluck(t, "sku_id"),
                    i = [];
                return _.each(n,
                    function(t) {
                        var n = _.findWhere(e.cartItems, {
                            sku_id: t
                        });
                        if (n) {
                            var r = {
                                name: n.attributes.display_name
                            };
                            i.push(r)
                        }
                    }),
                    i
            }
            function s(e) {
                var t = e.alert_data,
                    n = a(e.sku_id);
                return n && n.display_name ? {
                    sku_id: e.sku_id,
                    name: n.display_name,
                    url: n.product_details_page_url,
                    oldPrice: t.old_price.price.amount,
                    newPrice: t.new_price.price.amount,
                    property: "changed"
                }: {}
            }
            var c;
            return {
                getData: function(e) {
                    if (c = [], !e) return [];
                    if (_.isEmpty(e.cart_alerts) || _.each(e.cart_alerts,
                            function(e) {
                                "PurchasePlanRemovedItems" == e.alert_data.alert_type && (c.PurchasePlanRemoved = r(e))
                            }), !_.isEmpty(e.line_items_alerts)) {
                        var a = e.line_items_alerts.filter(function(e) {
                                return "PriceChanged" == e.alert_data.alert_type
                            }),
                            o = e.line_items_alerts.filter(function(e) {
                                return "ItemRemoved" == e.alert_data.alert_type || "QuantityChanged" == e.alert_data.alert_type
                            });
                        a && a.length > 0 && _.each(a,
                            function(e) {
                                n(e)
                            }),
                        c && c.PriceChanged && c.PriceChanged.items.length > 0 && t(),
                        o && o.length > 0 && i(o)
                    }
                    return _.values(c)
                }
            }
        }]),
    checkoutApp.factory("TealiumService", [function() {
        "use strict";
        return {
            trackInputTags: function() {
                var e = "*[ecom-data-link_cat]";
                $(document).off("click", e),
                    $(document).on("click", e,
                        function(e) {
                            if (window.utag) {
                                var t = this,
                                    n = {};
                                _.forEach(t.attributes,
                                    function(e, t) {
                                        0 == e.nodeName.indexOf("ecom-data-") && (n[e.nodeName.substr(10)] = e.nodeValue)
                                    }),
                                    utag.link(n)
                            }
                        })
            }
        }
    }]),
    checkoutApp.factory("financingService", ["$rootScope", "CheckoutService", "constants", "$location", "errors", "$timeout",
        function(e, t, n, i, r, a) {
            var o = function(t) {
                    var n = {},
                        i = {},
                        r = "PUT",
                        a = SCart.URL.EXISTING_PAYMENT_URL(e.shoppingCart.cart_id, !0);
                    return i.billing_info = t.billing_info,
                        i.billing_record = {},
                        i.billing_record.billing_record_id = t.billing_record_id,
                        i.billing_record.account_provider = "ECom",
                        n.method = r,
                        n.payload = i,
                        n.url = a,
                        n.handler = "billingRecord",
                        n
                },
                s = function() {
                    var t, n = {},
                        i = {};
                    t = EcomApi.isTransformRequired ? "PUT": "POST";
                    var r = SCart.URL.ADD_FINANCE_PLAN_URL(e.shoppingCart.cart_id, !0);
                    return i.finance_plan_id = e.cartFinancingDetails.finance_plan_id,
                        n.method = t,
                        n.payload = i,
                        n.url = r,
                        n.handler = "financePlan",
                        n
                };
            e.setFinancingDetails = function(t) {
                function n(t, n) {
                    n.finance_info && n.finance_info.financePlans && n.finance_info.financePlans.length > 0 && (t.financing = !0, t.financeDetails = n.finance_info, t.financeType = n.finance_info.financePlans[0].finance_plan_attributes && n.finance_info.financePlans[0].finance_plan_attributes.length > 0 ? n.finance_info.financePlans[0].finance_plan_attributes[0] : n.finance_info.financePlans[0].finance_plan_type, e.showEIPCart = e.showEIPCart || "EIP" == t.financeType, e.showDeferredCart = e.showDeferredCart || "Deferred" == t.financeType, e.showDeferredSpecialCart = e.showDeferredSpecialCart || "DeferredSpecial" == t.financeType)
                }
                if (e.isCartFinancible = !1, e.anyItemInCartFinancible = !1, e.isMinimumMet = !1, e.isEIPFinance = !1, e.isDeferredFinance = !1, e.isDeferred24Finance = !1, e.isCartFinancibleAndMinimumNotMet = !1, e.showEIPCart = !1, e.showDeferredCart = !1, e.showDeferredSpecialCart = !1, t.finance_plan) {
                    var i = [];
                    i.push(t.finance_plan),
                        t.applicable_finance_plans = i
                }
                e.isFinancingOn && (e.anyItemInCartFinancible = !0, t.applicable_finance_plans && (e.isCartFinancible = t.line_items.length > 0 && t.applicable_finance_plans.length > 0, _.forEach(t.applicable_finance_plans,
                    function(n) {
                        e.cartFinancePlanType = n.finance_plan_attributes && n.finance_plan_attributes.length > 0 ? n.finance_plan_attributes[0] : n.finance_plan_type,
                            e.isCartFinancibleAndMinimumNotMet = e.isCartFinancible && t.cost.total.amount < n.minimum_amount,
                            e.amountToFinancing = e.isCartFinancibleAndMinimumNotMet ? (n.minimum_amount - t.cost.total.amount).toFixed(2) : 0,
                            e.isEIPFinance = !e.isCartFinancibleAndMinimumNotMet && e.isCartFinancible && "EIP" == e.cartFinancePlanType,
                            e.isDeferredFinance = !e.isCartFinancibleAndMinimumNotMet && e.isCartFinancible && "Deferred" == e.cartFinancePlanType,
                            e.isDeferred24Finance = !e.isCartFinancibleAndMinimumNotMet && e.isCartFinancible && "DeferredSpecial" == e.cartFinancePlanType,
                            e.isDeferredFinance ? (e.showDeferredCart = !0, e.dueToday = 0) : e.isDeferred24Finance ? e.dueToday = 0 : e.isEIPFinance && (e.dueToday = 0),
                            e.cartFinancingDetails = n
                    })), _.forEach(t.line_items,
                    function(e) {
                        _.find(t.line_item_finance_plans,
                            function(t) {
                                e.line_items && _.forEach(e.line_items,
                                    function(e) {
                                        e.sku_id == t.sku_id && n(e, t)
                                    }),
                                t.sku_id == e.sku_id && n(e, t)
                            })
                    }), a(function() {
                    e.$digest()
                }))
            },
                e.getCreditDetails = function(i) {
                    e.isFinancingOn && e.shoppingCart && (e.financingDetails ? (e.financingStatus = e.financingDetails.application_status, e.isSufficientCredit = e.financingDetails.available_credit >= e.shoppingCart.cost.total.amount ? !0 : !1, ("A" != e.financingStatus || "payment" != i && "redirect" != i || !e.isSufficientCredit) && "payment" == i && e.isUpgradeSkuInCart && (e.deleteUpgradeItemsFromCart(), e.notOptedForSUP = !0), "A" == e.financingStatus && "payment" == i && e.applyFinancingToCart(), "redirect" == i && e.financingRedirect("cartInfo")) : t.getFinancingStatus(n.PAGECONTEXT.CART_FINANCE).then(function(t) {
                        _.forEach(t,
                            function(t) {
                                "EComProgram" == t.finance_program && (e.financingDetails = t, e.financingStatus = e.financingDetails.application_status, e.isSufficientCredit = e.financingDetails.available_credit >= e.shoppingCart.cost.total.amount ? !0 : !1)
                            }),
                        ("A" != e.financingStatus || "payment" != i && "redirect" == i || !e.isSufficientCredit) && "payment" == i && e.isUpgradeSkuInCart && (e.deleteUpgradeItemsFromCart(), e.notOptedForSUP = !0),
                        "A" == e.financingStatus && "payment" == i && e.applyFinancingToCart(),
                        "redirect" == i && e.financingRedirect("cartInfo")
                    }).E401(function(t) {
                        e.promptReLogin(t)
                    }).fail(function(t) {
                        e.$broadcast("cartStepError", r.FinancingDefaultError.title, r.FinancingDefaultError.description)
                    }), a(function() {
                        e.$digest()
                    }))
                },
                e.applyFinancingToCart = function() {
                    e.isSufficientCredit && e.financingDetails && e.financingDetails.billing_info && e.financingDetails.billing_record_id && (e.billing = _.clone(e.financingDetails.billing_info), e.addPaymentCTA(e.billing, e.financingDetails, "financing", !1)),
                        a(function() {
                            e.$digest()
                        })
                },
                e.setFinancingPlan = function(i) {
                    e.isFinancingOn && t.addFinancePlan(i, n.PAGECONTEXT.CART_FINANCE).then(function(t) {
                        e.refreshCart(t, !0),
                        e.isSingleClickCheckoutOn && e.setFinancingAsPayment()
                    }).E401(function(t) {
                        e.promptReLogin(t)
                    }).fail(function(t) {
                        e.$broadcast("cartStepError", r.FinancingDefaultError.title, r.FinancingDefaultError.description)
                    })
                },
                e.financingRedirect = function(t) {
                    window.isLogin() && ("A" == e.financingStatus || "P" == e.financingStatus ? (e.redirectPostLogin = n.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT, i.path("/cart-payment/finance")) : i.path("/cart-finance"), a(function() {
                        e.$digest()
                    }))
                },
                e.isFinancingApproved = function() {
                    return e.isFinancingOn && "A" == e.financingStatus && e.isSufficientCredit ? !0 : !1
                },
                e.isFinancingRejected = function() {
                    return e.isFinancingOn && "D" == e.financingStatus ? !0 : !1
                },
                e.isFinancingDeferred = function() {
                    return e.isFinancingOn && "P" == e.financingStatus ? !0 : !1
                },
                e.isFinancingApprovedWithoutLimit = function() {
                    return e.isFinancingOn && "A" == e.financingStatus && !e.isSufficientCredit ? !0 : !1
                },
                e.onPaymentComplete = function() {
                    e.paymentMode = "view",
                    e.isSingleClickCheckoutOn && (e.paymentMode = "edit"),
                        e.paymentSource = "",
                    e.selectedAddress && !e.ischeckoutv3ui && (e.selectedAddress = e.addedPayment.billing_info),
                        e.$broadcast("contactInfoUpdated"),
                    ("view" != e.shippingMode || e.shippingSameAsBilling) && (e.shippingMode = "edit"),
                        e.$digest(),
                    "view" == e.shippingMode && "view" == e.paymentMode && setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $("#_place_order").offset().top
                                },
                                "slow")
                        },
                        200)
                },
                e.addPaymentCTA = function(i, a, c, l) {
                    if ("financing" == c && e.isFinancingOn) {
                        var d = [o(a), s()];
                        t.shoppingCartCTA(d, n.PAGECONTEXT.CART_FINANCE).then(function(t) {
                            e.addedPayment = t[0].payment,
                                e.onPaymentComplete(),
                                e.refreshCart(t[1], !0),
                            e.ischeckoutv3ui && e.applyShippingAndPayment(n.CHECKOUT_SECTION.SHIPPING)
                        }).billingRecord(function(t) {
                            var n = JSON.parse(t.responseText);
                            401 == n.statusCode ? (n.status = 401, e.promptReLogin(n)) : e.$broadcast("cartStepError", r.FinancingDefaultError.title, r.FinancingDefaultError.description)
                        }).financePlan(function(t) {
                            var n = JSON.parse(t.responseText);
                            401 == n.statusCode ? (n.status = 401, e.promptReLogin(n)) : e.$broadcast("cartStepError", r.FinancingDefaultError.title, r.FinancingDefaultError.description)
                        }).fail(function(t) {
                            e.$broadcast("cartStepError", r.FinancingDefaultError.title, r.FinancingDefaultError.description)
                        })
                    }
                }
        }]),
    checkoutApp.factory("GnbService", ["$rootScope",
        function(e) {
            "use strict";
            return {
                setLayout: function(t) {
                    var n = this,
                        i = "?";
                    return e.ischeckoutv3ui ? $(window).width() < 767 && $(".os-action-holder.os-total-fixed-at-bottom-in-mobile").hide() : $(".os-total-fixed-at-bottom-in-mobile.os-cart-payment-options-holder.for-mobile").hide(),
                    e.payoverTimeSelected && (i += "checkout=payOverTime"),
                        $(document).trigger("onPromptLogin", [, i]),
                        $(".gnb-login-container__group-image").css("display", "none"),
                        $(".no-activation").remove(),
                        $(".gnb-login-container__group-image").removeClass("trade-in-login-banner"),
                        "financing" == t ? void n.setFinancingLayout() : e.isTradeinCart ? void n.setTradeInLayout() : e.isTMOBogoOffer(e.cartItems) ? void n.setTMOBogoLayout() : void(e.premiumCareSubscriptionCart() ? ($(".gnb-login-inner__left__title--signup").text("Please log into your Samsung account"), $(".gnb-login-inner__left__title").text("Please log into your Samsung account"), e.isWaterFilterSkuInCart() || setTimeout(function() {
                            var t = $(".gnb-login-inner__left__subtitle", $(".gnb-login-container .sign-in-phase")),
                                n = 1 == t.length ? t: t[0];
                            $(n).text(""),
                                $(".gnb-login-inner__left__link", $(".gnb-login-container .sign-in-phase")).append(e.cartHasSimSkus() ? "<p class=no-activation ><a href=javascript:$(document).trigger('noPremiumCareAndActivation');void(0);>Continue without premium care & activation</a></p>": "<p class=no-activation ><a href=javascript:$(document).trigger('noPremiumCare');void(0);>Continue without premium care</a></p>")
                        })) : e.logInForCarrierActivation ? ($(".gnb-login-inner__left__title--signup").text("Please log into your Samsung account"), $(".gnb-login-inner__left__title").text("Please log into your Samsung account"), e.isWaterFilterSkuInCart() || setTimeout(function() {
                                var t = $(".gnb-login-inner__left__subtitle", $(".gnb-login-container .sign-in-phase")),
                                    n = 1 == t.length ? t: t[0];
                                $(n).text("Activation with Samsung requires you to log into Samsung account."),
                                    $(".gnb-login-inner__left__link", $(".gnb-login-container .sign-in-phase")).append(e.cartHasSimSkus() ? "<p class=no-activation ><a href=javascript:$(document).trigger('noActivation');void(0);>Continue without carrier activation</a><p class=no-activation style=font-weight:400;font-size:14px;line-height:normal>(SIM Card may be removed from your cart)</p></p>": "<p class=no-activation ><a href=javascript:$(document).trigger('noActivation');void(0);>Continue without carrier activation</a></p>")
                            },
                            200)) : e.isWaterFilterSkuInCart() && n.setGenericLoginLayout())
                },
                setTradeInLayout: function() {
                    setTimeout(function() {
                            $(".gnb-login-container__group-image").css("display", "block"),
                                $(".gnb-login-container__group-image").addClass("trade-in-login-banner"),
                                $(".gnb-b2c-login-section .gnb-login-container__group-image__first").text("");
                            var e = $(".gnb-login-inner__left__subtitle", $(".gnb-login-container .sign-up-phase")),
                                t = 1 == e.length ? e: e[0];
                            $(t).text("Sign up for a Samsung account today and gain access to trade-in,Samsung financing,world class customer support,and a broad range of exclusive offers made just for you ."),
                                $(".gnb-login-inner__left__title--signup").text("Your account for everything samsung."),
                                $(".gnb-login-inner__left__title").text("Login to your Samsung account  .");
                            var n = $(".gnb-login-inner__left__subtitle", $(".gnb-login-container .sign-in-phase")),
                                i = 1 == n.length ? n: n[0];
                            $(i).text("Login here to take advantage of the [Samsung Trade-In program]."),
                                $(".gnb-login-container__group-image__second").text("")
                        },
                        200)
                },
                setFinancingLayout: function() {
                    e.isUpgradeSkuInCart ? setTimeout(function() {
                            var e = $(".gnb-login-inner__left__subtitle", $(".gnb-login-container .sign-in-phase")),
                                t = 1 == e.length ? e: e[0];
                            $(t).text("Login here to take advantage of the Samsung Upgrade Program."),
                                $(".gnb-login-inner__left__title--signup").text("Login into your Samsung account."),
                                $(".gnb-login-inner__left__title").text("Login into your Samsung account.")
                        },
                        200) : setTimeout(function() {
                            $(".gnb-login-container__group-image").css("display", "block"),
                                $(".gnb-b2c-login-section .gnb-login-container__group-image__first").text("Get the galaxy you love.");
                            var e = $(".gnb-login-inner__left__subtitle", $(".gnb-login-container .sign-in-phase")),
                                t = 1 == e.length ? e: e[0];
                            $(t).text("In order to apply for Samsung financing and pay over time, you will need to log in or create a Samsung account."),
                                $(".gnb-login-inner__left__title--signup").text("Get the products you love now and pay over time"),
                                $(".gnb-login-inner__left__title").text("Get the products you love now and pay over time"),
                                $(".gnb-login-container__group-image__second").text("Now yours with Samsung financing")
                        },
                        200)
                },
                setTMOBogoLayout: function() {
                    setTimeout(function() {
                            $(".gnb-login-inner__left__title--signup").text("Please log into your Samsung account"),
                                $(".gnb-login-inner__left__title").text("Please log into your Samsung account");
                            var e = $(".gnb-login-inner__left__subtitle", $(".gnb-login-container .sign-in-phase")),
                                t = 1 == e.length ? e: e[0];
                            $(t).text("Activation with Samsung requires you to log into Samsung account."),
                                $(".gnb-login-inner__left__link a").text("Create your Samsung account now")
                        },
                        200)
                },
                setEPPRedirectLayout: function() {
                    setTimeout(function() {
                            var e = $(".gnb-login-inner__left__subtitle", $(".gnb-login-container .sign-in-phase")),
                                t = 1 == e.length ? e: e[0];
                            $(t).text("Please login with your Samsung Account to view special pricing.")
                        },
                        200)
                },
                setSessionExpiryLayout: function() {
                    setTimeout(function() {
                            var e = $(".gnb-login-inner__left__subtitle", $(".gnb-login-container .sign-in-phase")),
                                t = 1 == e.length ? e: e[0];
                            $(t).text("Your session has expired. Please login to continue.")
                        },
                        200)
                },
                setGenericLoginLayout: function() {
                    setTimeout(function() {
                            $(".gnb-login-inner__left__title--signup").text("Please log into your Samsung account"),
                                $(".gnb-login-inner__left__title").text("Please log into your Samsung account"),
                                $(".gnb-login-inner__left__subtitle", $(".gnb-login-container .sign-in-phase")).text(""),
                                $(".gnb-login-inner__left__link a").text("Create your Samsung account now")
                        },
                        200)
                }
            }
        }]),
    checkoutApp.service("ModalService", ["$modal",
        function(e) {
            var t = function(e, t, n, i, r) {
                e.modalData = n,
                    e.modalFunc = i,
                    e.name = r,
                    e.ok = function(e) {
                        t.close(e),
                        window.utag && utag.link({
                            link_cat: "accept terms and conditions",
                            link_id: "finance_app_accept",
                            link_meta: "link_name:accept",
                            link_position: "finance application>accept terms and conditions"
                        }),
                            setTimeout(function() {
                                    $("html, body").animate({
                                            scrollTop: $("#userTermsSection").offset().top
                                        },
                                        "slow")
                                },
                                200),
                            $("ul.slick-dots li.slick-active").next().trigger("click")
                    },
                    e.dismiss = function(e) {
                        t.dismiss(e),
                        window.utag && utag.link({
                            link_cat: "accept terms and conditions",
                            link_id: "finance_app_close",
                            link_meta: "link_name:close",
                            link_position: "finance application>accept terms and conditions"
                        }),
                            setTimeout(function() {
                                    $("html, body").animate({
                                            scrollTop: $("#userTermsSection").offset().top
                                        },
                                        "slow")
                                },
                                200)
                    },
                    e.download = function() {
                        e.modalFunc && e.modalFunc.download && e.modalFunc.download()
                    },
                    e.selection = function(t) {
                        e.modalData.selection = t
                    },
                    e.$on("$routeChangeSuccess",
                        function() {
                            t.dismiss()
                        }),
                    e.$on("closeModal",
                        function() {
                            t.dismiss()
                        })
            };
            return t.$inject = ["$scope", "$modalInstance", "modalData", "modalFunc", "modalClass"],
                {
                    open: function(n, i, r, a, o, s) {
                        var c = e.open({
                            templateUrl: n,
                            template: s,
                            controller: t,
                            size: i,
                            resolve: {
                                modalData: function() {
                                    return r
                                },
                                modalFunc: function() {
                                    return a
                                },
                                modalClass: function() {
                                    return o
                                }
                            }
                        });
                        return c.result
                    }
                }
        }]),
    checkoutApp.directive("ScionModal", ["$window",
        function(e) {
            return {
                scope: {
                    show: "=",
                    name: "=",
                    nextStep: "=",
                    modalData: "=",
                    modalFunc: "=",
                    modalTemp: "="
                },
                controller: function() {},
                restrict: "A",
                templateUrl: modalTemp,
                link: function(e, t, n, i) {
                    e.dismiss = function(t) {
                        e.show = !1
                    },
                        e.ok = function(t) {
                            e.show = !1,
                                e.nextStep(t)
                        }
                }
            }
        }]),
    checkoutApp.controller("CartInfoCtrl", ["CheckoutService", "financingService", "GnbService", "constants", "errors", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "updateUtilities", "$timeout",
        function(e, t, n, i, r, a, o, s, c, l, d, p, u, f) {
            a.shoppingCart = {},
                a.line_items = [],
                o.cardInfo = {},
                o.contact = o.contact || {},
                o.signin = {},
                o.address = {},
                o.isGuest = !0,
                o.cardOption = !0,
                o.sameaddress = !0,
                o.newsletter = !0,
                o.removedItem = null,
                o.isSubscriptionAgreed = null,
                o.isPCTermsExist = !1,
                o.removedItemIndex = null,
                o.isTagFired,
                o.relevance = {},
                o.relevance.items = [],
                o.carrierActivationConsentRequired = !o.isLoggedIn,
            $.cookie("finEnabled") && (o.isFinancingOn = !0),
                o.isFinancingOn = !0,
                a.changeHeader = function() {
                    $("#checkout-header").siblings().show(),
                        $("#checkout-header").remove(),
                        $(".gnb-b2c-icons").show(),
                        window.isMobile() ? $(".gnb-b2c-promo-wrapper").hide() : $(".gnb-b2c-promo-wrapper").show()
                },
                a.changeHeader(),
                a.applyURLPromo = function() {
                    var t = p.search(),
                        n = t.promocode;
                    n && n.length > 0 ? e.applyPromo(n, i.PAGECONTEXT.CART_INFO).then(function(e) {
                        o.resetQuery("promocode"),
                            o.$digest(),
                            o.$broadcast("refreshCart", e, !1)
                    }).E401(function(e) {
                        o.promptReLogin(e)
                    }).E409(function(e) {
                        o.resetQuery("promocode"),
                        e.responseText && o.isJsonString(e.responseText) && (e = JSON.parse(e.responseText)),
                            r[e.error] ? o.$broadcast("cartStepError", r[e.error].title, r[e.error].description) : o.$broadcast("cartStepError", r.defaultError.title, r.defaultError.description)
                    }).fail(function(e) {
                        e.responseText && o.isJsonString(e.responseText) && (e = JSON.parse(e.responseText)),
                            r[e.error] ? o.$broadcast("cartStepError", r[e.error].title, r[e.error].description) : o.$broadcast("cartStepError", r.defaultError.title, r.defaultError.description)
                    }) : o.resetQuery("promocode")
                };
            var h = function(t) {
                e.getV3PromotionsPrice(t).then(function(e) {
                    e && e.length > 0 && (a.promotionsPrice = e),
                        g()
                })
            };
            o.computeUpgradePriceForCrossSell = function(e) {
                var t = [],
                    n = o.shoppingCart;
                return o.is_sup_cart ? (n && n.cost && n.cost.total && (o.upgradeCost = n.cost.total.amount), void(n && n.applicable_finance_plans && n.applicable_finance_plans.length > 0 && n.applicable_finance_plans[0].eip_finance_plan && (o.upgradeMonthlyCost = n.applicable_finance_plans[0].eip_finance_plan.monthly_payment))) : (e && e.offers && e.offers.length > 0 && _.forEach(e.offers,
                    function(n) {
                        o.isUpgradeOffer(n) && (t.push(e), e.line_items && e.line_items.length > 0 && _.forEach(e.line_items,
                            function(e) {
                                e.attributes.is_upgrade_eligible && t.push(e)
                            }))
                    }), t && t.length > 0 && o.cartItems && o.cartItems.length > 0 && _.forEach(o.cartItems,
                    function(n) { ! n.parentItem && (n.line_item_id != e.line_item_id || n.parentItem && n.parentItem.line_item_id == e.line_item_id) && n.attributes.product_family && "MOBILE-ACCESSORIES" == n.attributes.product_family.toUpperCase() && n.attributes.is_upgrade_eligible && t.push(e)
                    }), void(t && t.length > 0 && o.shoppingCart && o.shoppingCart.line_item_finance_plans && o.shoppingCart.line_item_finance_plans.length > 0 && (e.upgradeMonthlyCost = 0, e.upgradeCost = 0, _.forEach(t,
                    function(t) {
                        o.isTradeInSku(t) ? e.upgradeCost -= t.line_item_cost.price.amount: e.upgradeCost += t.line_item_cost.price.amount,
                            _.forEach(o.shoppingCart.line_item_finance_plans,
                                function(n) {
                                    n.line_item_id == t.line_item_id && t.attributes.is_upgrade_eligible && n.finance_info && n.finance_info.financePlans && n.finance_info.financePlans.length > 0 && n.finance_info.financePlans[0] && n.finance_info.financePlans[0].eip_finance_plan && (e.upgradeMonthlyCost += n.finance_info.financePlans[0].eip_finance_plan.monthly_payment)
                                })
                    }))))
            };
            var g = function() {
                    a.promotionsPrice && a.productCatalog && (_.forEach(a.promotionsPrice,
                        function(e) {
                            var t = {};
                            t.listPriceWithQuantity = e.list_price,
                                t.salePriceWithQuantity = e.sale_price,
                                t.sku = e.sku;
                            var n = _.find(a.catalogCollection,
                                function(t) {
                                    return t.sku == e.sku
                                });
                            n && (n.pricing = t)
                        }), _.forEach(o.cartItems,
                        function(e) {
                            if (a.lineItemOffer && a.lineItemOffer[e.sku_id]) {
                                var t = [],
                                    n = [];
                                _.forEach(a.lineItemOffer[e.sku_id],
                                    function(n) {
                                        var i = _.find(a.catalogCollection,
                                            function(e) {
                                                return e.sku == n
                                            }),
                                            r = _.pluck(e.line_items, "sku_id");
                                        _.contains(r, i.sku) || t.push(i)
                                    }),
                                    e.offers = _.uniq(t),
                                a.lineItemOffer[e.sku_id].simOffers && _.forEach(a.lineItemOffer[e.sku_id].simOffers,
                                    function(t) {
                                        var i = _.find(a.catalogCollection,
                                            function(e) {
                                                return e.sku == t
                                            }),
                                            r = _.pluck(e.line_items, "sku_id");
                                        0 == _.intersection(r, o.simSkus).length && n.push(i)
                                    }),
                                    e.simOffers = n
                            }
                        }), o.$digest())
                },
                m = function(t) {
                    e.getV3ProductCatalog(t).then(function(e) {
                        e && e.length > 0 && (a.productCatalog = e, a.catalogCollection = [], _.forEach(a.productCatalog,
                            function(e) {
                                var t = {};
                                e.images && e.images.large_image && e.images.large_image.url && (t.productImage = e.images.large_image.url),
                                e.images && e.images.small_image && e.images.small_image.url && (t.thumbnailImage = e.images.small_image.url),
                                    t.displayName = e.product_display_name,
                                e.urls && e.urls.consumer_url && (t.pdpUrl = e.urls.consumer_url),
                                    t.extRefId = e.sku,
                                    t.sku = e.sku,
                                    a.catalogCollection.push(t)
                            }), g())
                    })
                },
                y = function(t) {
                    a.offersSkus = [],
                        a.lineItemOffer = {},
                        e.getV3Promotions(t, i.PROMOTIONS_LIST).then(function(e) {
                            e && e.length > 0 && (_.forEach(e,
                                function(e) {
                                    for (var t in e) if (e.hasOwnProperty(t)) {
                                        var n = e[t].filter(function(e) {
                                            return "CandyRackShoppingCart" == e.type || "ActivationSamsung" == e.type
                                        });
                                        n && n.length > 0 && (a.lineItemOffer[t] = [], a.lineItemOffer[t].simOffers = [], _.forEach(n,
                                            function(e) {
                                                _.forEach(e.discounted_skus,
                                                    function(n) {
                                                        _.forEach(n.groups,
                                                            function(n) {
                                                                a.offersSkus.push.apply(a.offersSkus, n.skus),
                                                                    "ActivationSamsung" == e.type ? a.lineItemOffer[t].simOffers.push.apply(a.lineItemOffer[t].simOffers, n.skus) : a.lineItemOffer[t].push.apply(a.lineItemOffer[t], n.skus)
                                                            })
                                                    })
                                            }))
                                    }
                                }), a.offersSkus = _.uniq(a.offersSkus), a.offersSkus && a.offersSkus.length > 0 && (h(a.offersSkus), m(a.offersSkus)), window.utag && utag.link({
                                product_cross_sell_flag: a.offersSkus.length ? "yes": "no",
                                product_cross_sell_sku: a.offersSkus
                            }))
                        })
                },
                v = function(t) {
                    o.fetchCartRecommendations && o.$broadcast("fetchCartRecommendations"),
                        e.getPromotions(t).then(function(e) {
                            if (e && e.length > 0) {
                                var t = _.pluck(o.cartItems, "sku_id");
                                t.forEach(function(t) {
                                    var n = _.find(e,
                                        function(e) {
                                            return e.sku == t
                                        }),
                                        i = _.find(o.cartItems,
                                            function(e) {
                                                return e.sku_id == t
                                            });
                                    if (i.relatedProducts = n ? n.relatedProductsDetails: void 0, !EcomApi.isTransformRequired && n && n.pointOfPromotions) {
                                        var r = n.pointOfPromotions.filter(function(e) {
                                                return "CandyRack_ShoppingCart" == e.popId
                                            }),
                                            a = n.pointOfPromotions.filter(function(e) {
                                                return "Activation_Samsung" == e.popId
                                            });
                                        r && r.length > 0 && (o.offers.push({
                                            skuId: t,
                                            offers: r
                                        }), o.mapOffersToCartItem(t, r, !1)),
                                        a && a.length > 0 && o.mapOffersToCartItem(t, a, !0)
                                    }
                                }),
                                o.fetchCartRecommendations || o.$broadcast("accessoriesAvailable"),
                                    a.crossSellSkus = _.uniq(o.crossSellSkus,
                                        function(e) {
                                            return e.sku
                                        }),
                                window.utag && utag.link({
                                    product_cross_sell_flag: a.crossSellSkus.length ? "yes": "no",
                                    product_cross_sell_sku: a.crossSellSkus
                                })
                            }
                        })
                };
            a.addSubLineItem = function(t, n) {
                e.addSubLineItem(t.line_item_id, n, 1, i.PAGECONTEXT.CART_INFO).then(function(e) {
                    a.onAddToCartComplete(e)
                }).fail(function() {
                    o.$broadcast("cartStepError", r.AddToCartError.title, r.AddToCartError.description)
                })
            },
                a.onAddToCartComplete = function(e) {
                    var t = window.Checkout.groupItemsFromQueryString();
                    if (t && t.length > 0 && t[0] && t[0].lineitems && t[0].lineitems.length > 0) {
                        var n = _.pluck(t[0].lineitems, "skuId");
                        o.isSubscriptionAgreed = _.find(n,
                            function(e) {
                                return o.premiumCareSubscriptionOffer([], e)
                            })
                    }
                    return o.resetQuery("addItem[]"),
                        o.resetQuery("addChildItem[]"),
                        o.resetQuery("abandonedCartID"),
                        o.resetQuery("forceLogIn"),
                        o.isEppRedirect() ? (window.location.href = window.SCart.URL.CHECKOUT_URL(), void o.disableOrderSummary()) : (a.applyURLPromo(), void o.$broadcast("refreshCart", e, !0, "addItems"))
                },
                a.hasChildItem = function() {
                    return a.sim && a.sim.length > 0 && a.phone && a.phone.length > 0
                },
                a.findParentLineItem = function(e, t) {
                    return _.find(e.line_items,
                        function(e) {
                            return e.sku_id == t
                        })
                };
            var C = function() {
                    if (!window.Checkout.addToCartInHeader) {
                        var t = window.Checkout.groupItemsFromQueryString();
                        t.length > 0 && (window.Checkout.loadCart = e.addItems(t, i.PAGECONTEXT.CART_INFO))
                    }
                    window.Checkout.loadCart && window.Checkout.loadCart.then(function(e) {
                        if ($(".prefetch_spinner_container").hide(), a.hasChildItem()) {
                            if (e && e.line_items && e.line_items.length > 0) {
                                var t = a.findParentLineItem(e, a.phone);
                                t && a.addSubLineItem(t, a.sim)
                            }
                        } else a.onAddToCartComplete(e)
                    }).E400(function(e) {
                        if ($(".prefetch_spinner_container").hide(), A(), o.latestPurchaseflow(e), e && o.isJsonString(e.responseText)) {
                            var t = JSON.parse(e.responseText).error;
                            if (r[t]) return void o.$broadcast("cartStepError", r[t].title, r[t].description)
                        }
                        o.$broadcast("cartStepError", r.AddToCartError.title, r.AddToCartError.description)
                    }).E401(function(e) {
                        $(".prefetch_spinner_container").hide(),
                            A(),
                            o.latestPurchaseflow(e),
                            o.promptReLogin(e)
                    }).E404(function(e) {
                        $(".prefetch_spinner_container").hide(),
                            A(),
                            o.latestPurchaseflow(e),
                            o.$broadcast("cartStepError", r.AddToCartError.title, r.AddToCartError.description)
                    }).E409(function(e) {
                        $(".prefetch_spinner_container").hide(),
                            A(),
                            o.latestPurchaseflow(e),
                            e = JSON.parse(e.responseText),
                            o.resetQuery(),
                            a.renderCurrentCartOnError(),
                        e.error || (e = JSON.parse(e.message)),
                            r[e.error] ? o.$broadcast("cartStepError", r[e.error].title, r[e.error].description) : "InventoryUnavailable" == e.error ? o.$broadcast("cartStepError", r.InventoryUnavailableError.title, r.InventoryUnavailableError.description) : o.$broadcast("cartStepError", r.AddToCartError.title, r.AddToCartError.description)
                    }).E500(function(e) {
                        $(".prefetch_spinner_container").hide(),
                            A(),
                            o.latestPurchaseflow(e),
                            o.resetQuery("addItem[]"),
                            o.resetQuery("addChildItem[]"),
                            o.resetQuery("abandonedCartID"),
                            o.resetQuery("forceLogIn"),
                            a.renderCurrentCartOnError(),
                            u.displayAddToCartErrorMessage(e)
                    }).E502(function() {
                        $(".prefetch_spinner_container").hide(),
                            A(),
                            o.$broadcast("cartStepError", r.defaultError.title, r.defaultError.description)
                    }).fail(function(e) {
                        $(".prefetch_spinner_container").hide(),
                            A(),
                            o.latestPurchaseflow(e),
                            o.resetQuery("addItem[]"),
                            o.resetQuery("abandonedCartID"),
                            o.resetQuery("forceLogIn"),
                            a.renderCurrentCartOnError(),
                            o.$broadcast("cartStepError", r.AddToCartError.title, r.AddToCartError.description)
                    })
                },
                S = function(t) {
                    var n = t.externalRefID;
                    n && (window.Checkout.addToCartInHeader || (window.Checkout.loadCart = e.addItem(n, 1, i.PAGECONTEXT.CART_INFO)), window.Checkout.loadCart.then(function(r) {
                        var s = b(r.line_items, n),
                            c = I(s, t);
                        e.addAssurantInfo(c, s.line_item_id, i.PAGECONTEXT.CART_INFO).then(function(e) {
                            $(".prefetch_spinner_container").hide(),
                                a.applyURLPromo(),
                                o.resetQuery(),
                                o.$broadcast("refreshCart", e, !0)
                        }).E400(function() {
                            $(".prefetch_spinner_container").hide(),
                                o.resetQuery(),
                                o.$broadcast("refreshCart", r, !0)
                        }).E404(function() {
                            $(".prefetch_spinner_container").hide(),
                                o.resetQuery(),
                                o.$broadcast("refreshCart", r, !0)
                        }).E500(function(e) {
                            $(".prefetch_spinner_container").hide(),
                                o.resetQuery(),
                                u.displayAddToCartErrorMessage(e)
                        }).E502(function() {
                            $(".prefetch_spinner_container").hide(),
                                o.resetQuery(),
                                o.$broadcast("refreshCart", r, !0)
                        }).E503(function() {
                            $(".prefetch_spinner_container").hide(),
                                o.resetQuery(),
                                o.$broadcast("refreshCart", r, !0)
                        }).E504(function() {
                            $(".prefetch_spinner_container").hide(),
                                o.resetQuery(),
                                o.$broadcast("refreshCart", r, !0)
                        }).fail(function() {
                            $(".prefetch_spinner_container").hide(),
                                o.resetQuery(),
                                o.$broadcast("refreshCart", r, !0)
                        })
                    }).fail(function(e) {
                        $(".prefetch_spinner_container").hide(),
                            o.latestPurchaseflow(e),
                            o.$broadcast("cartStepError", "The item could not be added to the cart", "An error occurred. Please try after some time. Sorry for the inconvenience")
                    }))
                },
                b = function(e, t) {
                    return _.findWhere(e, {
                        sku_id: t
                    })
                };
            a.cartPageActions = function(t) {
                var n = p.search();
                n.abandonedCartID && n.abandonedCartID.length > 0 && (o.abandonedCartID = n.abandonedCartID),
                    n["addItem[]"] && n["addItem[]"].length > 0 ? C() : n.externalRefID ? S(n) : (window.Checkout.loadCart || (n.abandonedCartID && n.abandonedCartID.length > 0 && !o.forceLogIn() ? window.Checkout.loadCart = window.Checkout.shoppingCartService.replaceCart(n.abandonedCartID, i.PAGECONTEXT.CART_INFO) : n.abandonedCartID || t || (window.Checkout.loadCart = window.Checkout.shoppingCartService.getCart(i.PAGECONTEXT.CART_INFO))), window.Checkout.loadCart && window.Checkout.loadCart.then(function(e) {
                        $(".prefetch_spinner_container").hide(),
                            a.applyURLPromo(),
                            o.$broadcast("refreshCart", e, !0, "getCart"),
                        n.error && (o.$broadcast("cartStepError", r[n.error].title, r[n.error].description), o.resetQuery("error")),
                            o.resetQuery("abandonedCartID"),
                            o.resetQuery("forceLogIn")
                    }).E401(function(e) {
                        $(".prefetch_spinner_container").hide(),
                            A(),
                            o.promptReLogin(e)
                    }).fail(function() {
                        $(".prefetch_spinner_container").hide(),
                            A(),
                            o.$broadcast("cartStepError", "We are unable to process your request at this time.", "Please try after sometime. Sorry for the inconvenience.")
                    })),
                    window.Checkout.addToCartInHeader = !1,
                    window.Checkout.loadCart = null;
                var s = new Date;
                n.forceGNBLogin && n.forceGNBLogin.length > 0 && ("true" == n.forceGNBLogin ? $.cookie("forceGNBLogin", "true", {
                    domain: ".samsung.com",
                    path: "/"
                }) : "false" == n.forceGNBLogin && (s.setDate(s.getDate() - 1), $.cookie("forceGNBLogin", "true", {
                    domain: ".samsung.com",
                    path: "/",
                    expires: s
                })), o.resetQuery("forceGNBLogin")),
                "true" == $.cookie("forceGNBLogin") && (s.setDate(s.getDate() - 1), $.cookie("forceGNBLogin", "true", {
                    domain: ".samsung.com",
                    path: "/",
                    expires: s
                })),
                n.isMobileApp && "true" == n.isMobileApp && ($.cookie("isMobileApp", "true", {
                    domain: ".samsung.com",
                    path: "/"
                }), o.resetQuery("isMobileApp"), o.alterForMobileApp()),
                n.activate && n.activate.length > 0 && "true" == n.activate && (o.carrierActivationConsentRequired = !1, o.oneClickActivationSelected = !0),
                window.isLogin() && o.getCreditDetails(),
                o.isLoggedIn && e.getUserProfile(!0).then(function(e) {
                    e = JSON.parse(e),
                    e && e.emailaddress && (o.contact || (o.contact = {}), o.contact.email = e.emailaddress, o.contact.phone = e.cellPhone || e.telePhone || e.workPhone, o.userEmail = e.emailaddress, o.billing || (o.billing = {}), o.billing.email = o.contact.email, o.billing.phone = o.contact.phone, o.$digest())
                })
            },
                a.initfunc = function() {
                    var t = $.cookie("remoteId");
                    t && "undefined" != t ? (window.Checkout.authenticateToken || (window.Checkout.authenticateToken = e.validateAuthToken(t)), window.Checkout.authenticateToken.then(function(e) {
                        $(".prefetch_spinner_container").hide();
                        var t = JSON.parse(e);
                        "valid" != t.status ? (o.checkoutLoginMessage = r.ReLogin.title, window.SCart.sessionIdValid = !1, f(function() {
                            o.$digest()
                        })) : a.cartPageActions()
                    }).fail(function() {
                        $(".prefetch_spinner_container").hide(),
                            o.checkoutLoginMessage = r.ReLogin.title,
                            window.SCart.sessionIdValid = !1,
                            f(function() {
                                o.$digest()
                            })
                    }), window.Checkout.authenticateToken = null) : o.forceLogIn() || a.cartPageActions(),
                    o.submitAlert && (o.setUserAlerts(o.submitAlert), o.$digest(), o.scrollAlert(), o.submitAlert = null),
                    o.forceLogIn() && o.showGlobalLogin()
                };
            var E = function(e) {
                    return 10 == e.length ? "(" + e.substr(0, 3) + ")" + e.substr(3, 3) + "-" + e.substr(6, 4) : e
                },
                I = function(e, t) {
                    return {
                        model: t.espCovModel,
                        product_price: "" + e.line_item_cost.price.amount,
                        product_sku: t.externalRefID,
                        product_purchase_date: (new Date).toUTCString(),
                        serial_number: t.espSerialNumber,
                        mobile_number: -1 == t.espMobileNumber.indexOf("(") ? E(t.espMobileNumber) : t.espMobileNumber,
                        carrier: t.espCarrier,
                        color: t.espColor,
                        memory_size: t.espMemorySize
                    }
                };
            a.renderCurrentCartOnError = function() {
                var t = e.getCurrentCart();
                t && o.$broadcast("refreshCart", t, !0)
            },
                a.setMiniCartCount = function() {
                    if (o.cartItems) {
                        var e = 0;
                        _.forEach(o.cartItems,
                            function(t) {
                                e += t.quantity
                            }),
                            $(".cart-basket").text(e > 0 ? e: ""),
                            o.isIE() ? ($(".gnb-b2c-icons-cart a svg").remove(), $(".gnb-b2c-icons-cart a").prepend('<svg viewBox="0 0 100 100" id="cart-open"><circle cx="28" cy="90" r="10"/><circle cx="86" cy="90" r="10"/><path d="M86 14v42H28V13.86C28 6.205 21.794 0 14.14 0H0v14h14v42c0 7.732 6.268 14 14 14h58c7.732 0 14-6.268 14-14V14H86z"/></svg>')) : $(".gnb-b2c-icons-cart a svg use").attr("xlink:href", "/us/resources/navigation/assets/images/sprite.symbol.svg#cart-open")
                    }
                },
                a.$on("refreshCart",
                    function(e, t, n, i) {
                        if (o.refreshCart(t, n, i), a.setMiniCartCount(), n && !o.isEmptyCartItem(t)) {
                            o.offers = [];
                            var r = _.pluck(t.line_items, "sku_id");
                            r && r.length > 0 && v(r),
                            EcomApi.isTransformRequired && y(_.uniq(r))
                        } else o.mapOffers();
                        A()
                    }),
            window.isLogin() && o.getCreditDetails(),
                a.$on("onUserLogin",
                    function() {
                        a.cartPageActions(!0),
                            o.getCreditDetails()
                    });
            var A = function() {
                    o.registerUtag(T)
                },
                T = function() {
                    o.$broadcast("saveImpression", o.shoppingCart, "new ecom step1|view cart")
                }
        }]),
    checkoutApp.controller("CartItemsCtrl", ["CheckoutService", "constants", "errors", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "updateUtilities",
        function(e, t, n, i, r, a, o, s, c, l, d) {
            i.init = function() {},
                i.quantities = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
                i.undo = function() {
                    $(".uc-product-removed").hide("slow")
                };
            var p = $(".uc-samsung-protection-holder").outerHeight();
            i.showDetails = function(e, t) {
                $("#spp" + e + t).addClass("active"),
                    $("#spp" + e + t).parents(".uc-spp-terms").find(".info-box").css({
                        top: "55px",
                        opacity: "0",
                        display: "block"
                    }),
                    $("#spp" + e + t).parents(".uc-spp-terms").find(".info-box").animate({
                            top: "15px",
                            opacity: 1
                        },
                        350)
            },
                i.hideDetails = function(e, t) {
                    $("#spp" + e + t).removeClass("active"),
                        $("#spp" + e + t).parents(".uc-spp-terms").find(".info-box").animate({
                                top: "55px",
                                opacity: 0
                            },
                            350,
                            function() {
                                $("#spp" + e + t).parents(".uc-spp-terms").find(".info-box").css({
                                    display: "none"
                                })
                            })
                },
                i.toggleSubscription = function(e) {
                    "none" == $("#text" + e).css("display") ? ($("#more" + e).css({
                        display: "none"
                    }), $("#text" + e).css({
                        display: "inline"
                    })) : ($("#text" + e).css({
                        display: "none"
                    }), $("#more" + e).css({
                        display: "inline"
                    }))
                },
                i.toggleDetails = function(e, t) {
                    "none" == $("#spp" + e + t).parents(".uc-spp-terms").find(".info-box").css("display") ? (i.showDetails(e, t), i.hideSiblings(e, t)) : i.hideDetails(e, t)
                },
                i.hideSiblings = function(e, t) {
                    $("#spp" + e + t).parent().siblings(".uc-spp-terms").find(".info-box").css({
                        display: "none"
                    })
                },
                i.getDetails = function(e, t) {
                    if (null == p && (p = $(".uc-samsung-protection-holder").outerHeight()), $(window).width() < 768) {
                        var n = 0;
                        if ( - 1 == $("#spp" + e + t).attr("class").indexOf("active")) {
                            $(".uc-samsung-protection-holder").find(".info-box").each(function() {
                                $("#spp" + e + t).is(":visible") && $("#spp" + e + t).slideToggle()
                            }),
                                $(".uc-spp-terms").find(".icon-info").removeClass("active");
                            var i = $("#spp" + e + t).parents(".uc-spp-terms").find(".info-box").outerHeight();
                            n = p + i,
                                $("#spp" + e + t).addClass("active"),
                                $("#spp" + e + t).parents(".uc-spp-terms").find(".info-box").slideDown(),
                            1 == $("#spp" + e + t).parents(".uc-spp-terms").index() && (n -= 16),
                                $(".uc-samsung-protection-holder").css("height", n + "px")
                        } else $("#spp" + e + t).removeClass("active"),
                            $("#spp" + e + t).parents(".uc-spp-terms").find(".info-box").slideUp(),
                            n = p,
                            $(".uc-samsung-protection-holder").css("height", n + "px")
                    }
                },
                i.activationConsent = function(e) {
                    r.activateSimConsent = e.activateSim,
                        _.each(r.cartItems,
                            function(e) {
                                e.isActivationEnabledLockedSku && (e.activateSim = r.activateSimConsent)
                            }),
                        r.fireUtagActivationConsent()
                },
                i.Subscribe = function(e) {
                    if (e.subscribe) r.subscribeChecked.push(e.sku_id);
                    else {
                        var t = r.subscribeChecked.indexOf(e.sku_id);
                        t > -1 && r.subscribeChecked.splice(t, 1)
                    }
                },
                i.isUnidays = function() {
                    return "4771508300" == $.cookie("tppid")
                },
                i.subscribePP = function(e) {
                    if (e.subscribePP) r.subscribePPChecked.push(e.sku_id);
                    else {
                        var t = r.subscribePPChecked.indexOf(e.sku_id);
                        t > -1 && r.subscribePPChecked.splice(t, 1)
                    }
                },
                i.addSPP = function(a, o) {
                    var s = a.extRefId || a.sku;
                    if (window.utag && (utag.link({
                            link_cat: "add to cart",
                            link_id: "cross_sell_" + a.sku + "_cartadd",
                            link_meta: "link_name:cross sell add to cart",
                            link_position: a.sku,
                            product_info: "id:" + a.productId + "|cat:|name:" + a.displayName + "|price:" + a.pricing.salePriceWithQuantity.value + "|cat_id:"
                        }), r.isHAinCart)) {
                        var c = _.contains(r.HAInstallationSkus, s),
                            l = _.contains(r.HAhaulAwaySkus, s);
                        if (c || l) {
                            var p = c ? "HA_INST_SELECTED": "HA_HAUL_AWY_SELECTED",
                                u = {
                                    link_cat: "additional services",
                                    link_id: "ha_checkout_delivery_additional_services_" + s,
                                    link_meta: "link_name" + s,
                                    link_position: o.sku_id + ">checkout>additional services>" + p
                                };
                            r.haUtagLinkFire(u)
                        }
                    }
                    e.addSubLineItem(o.line_item_id, s, 1, t.PAGECONTEXT.SPP).then(function(e) {
                        r.removedItem = null,
                            r.removedItemIndex = null,
                            r.removedItemChildIndex = null,
                            r.isSubscriptionAgreed = null,
                            o.offers = [],
                            r.$digest(),
                            r.$broadcast("refreshCart", e, !0),
                            i.showAndHideCrossSell(o, !1),
                            r.isPCTermsExist = $(".subscription-plans-holder input[id^=subscribe_pp]").length > 0,
                        r.cartHasSimSkus() && r.fireUtagActivationConsent()
                    }).E400(function(e) {
                        r.latestPurchaseflow(e),
                            r.$broadcast("cartStepError", n.AddToCartError.title, n.AddToCartError.description)
                    }).E401(function(e) {
                        r.latestPurchaseflow(e),
                            r.promptReLogin(e)
                    }).E404(function(e) {
                        r.latestPurchaseflow(e),
                            r.$broadcast("cartStepError", n.AddToCartError.title, n.AddToCartError.description)
                    }).E409(function(e) {
                        r.latestPurchaseflow(e),
                            e = JSON.parse(e.responseText),
                        e.error || (e = JSON.parse(e.message)),
                            "InventoryUnavailable" == e.error ? r.$broadcast("cartStepError", n.InventoryUnavailableError.title, n.InventoryUnavailableError.description) : "InvalidWarrantyChildLineItem" == e.error ? r.$broadcast("cartStepError", n.InvalidWarrantyError.title, n.InvalidWarrantyError.description) : "UnableToApplySUPFinancing" == e.error ? r.$broadcast("cartStepError", n.UnableToApplySUPFinancing.title, n.UnableToApplySUPFinancing.description) : r.$broadcast("cartStepError", n.AddToCartError.title, n.AddToCartError.description)
                    }).E500(function(e) {
                        r.latestPurchaseflow(e),
                            d.displayAddToCartErrorMessage(e)
                    }).E502(function() {
                        r.$broadcast("cartStepError", n.defaultError.title, n.defaultError.description)
                    }).fail(function(e) {
                        console.log("add SPP item failed" + e),
                            a.selected = !1,
                            r.$digest()
                    })
                },
                i.$on("removeItems",
                    function(e, t, n) {
                        _.each(t,
                            function(e, t) {
                                setTimeout(function() {
                                        i.removeItem(e, 0, n)
                                    },
                                    1e3 * t)
                            })
                    }),
                i.removeItem = function(a, o, s, c) {
                    var l;
                    if (a.parentItem && a.parentItem.line_item_id && (l = a.parentItem.line_item_id, r.isHAinCart)) {
                        var d = _.contains(r.HAInstallationSkus, a.sku_id),
                            p = _.contains(r.HAhaulAwaySkus, a.sku_id);
                        if (d || p) {
                            var u = d ? "HA_INST_REMOVED": "HA_HAUL_AWY_REMOVED",
                                f = {
                                    link_cat: "additional services",
                                    link_id: "ha_checkout_delivery_additional_services_" + a.sku_id,
                                    link_meta: "link_name" + a.sku_id,
                                    link_position: a.parentItem.sku_id + ">checkout>additional services>" + u
                                };
                            r.haUtagLinkFire(f)
                        }
                    }
                    e.removeItem(a.line_item_id, l, t.PAGECONTEXT.CART_INFO).then(function(e) {
                        i.showBillingDetailsToggle(a, "hide"),
                            r.removedItem = a,
                            c >= 0 ? (r.removedItemChildIndex = o + "" + c, r.removedItemIndex = null) : (r.removedItemIndex = o, r.removedItemChildIndex = null),
                            o = r.subscribeChecked.indexOf(a.sku_id),
                        o > -1 && r.subscribeChecked.splice(o, 1),
                            o = r.subscribePPChecked.indexOf(a.sku_id),
                        o > -1 && r.subscribePPChecked.splice(o, 1),
                            r.$broadcast("refreshCart", e, !0),
                            i.showAndHideCrossSell(a, "remove"),
                            $(".uc-product-removed").fadeIn(400),
                            r.$digest(),
                            $(".uc-product-removed").delay(5e3).fadeOut(400),
                        s && i.checkRedirectEvent(s)
                    }).E401(function(e) {
                        r.promptReLogin(e)
                    }).fail(function(e) {
                        r.$broadcast("cartStepError", n.RemoveItemError.title, n.RemoveItemError.description),
                            console.log("remove item failed" + e)
                    })
                },
                i.undoRemove = function() {
                    var a = r.removedItem.parentItem && r.removedItem.parentItem.line_item_id,
                        o = r.removedItem.line_items;
                    e.undoRemove(r.removedItem.sku_id, r.removedItem.quantity, a, o, t.PAGECONTEXT.CART_INFO).then(function(a) {
                        if (r.removedItem.assurant_warranty_infos && r.removedItem.assurant_warranty_infos.length > 0) {
                            var o = _.find(a.line_items,
                                function(e) {
                                    return e.sku_id == r.removedItem.sku_id
                                });
                            e.addAssurantInfo(r.removedItem.assurant_warranty_infos, o.line_item_id, t.PAGECONTEXT.CART_INFO).then(function() {
                                setTimeout(function() {
                                        u(a)
                                    },
                                    500),
                                    i.showAndHideCrossSell(r.removedItem.parentItem, "remove")
                            }).fail(function() {
                                r.$broadcast("cartStepError", n.AddToCartError.title, n.AddToCartError.description)
                            })
                        } else setTimeout(function() {
                                u(a)
                            },
                            500)
                    }).E409(function(e) {
                        e = JSON.parse(e.responseText),
                            "InventoryUnavailable" == e.error ? r.$broadcast("cartStepError", n.InventoryUnavailableError.title, n.InventoryUnavailableError.description) : r.$broadcast("cartStepError", n.AddToCartError.title, n.AddToCartError.description)
                    }).E500(function(e) {
                        d.displayAddToCartErrorMessage(e)
                    }).fail(function(e) {
                        r.$broadcast("cartStepError", n.AddToCartError.title, n.AddToCartError.description),
                            console.log("undo remove item failed" + e)
                    })
                };
            var u = function(e) {
                if (r.removedItemIndex) {
                    var t = e.line_items.splice(e.line_items.length - 1, 1)[0];
                    e.line_items.splice(r.removedItemIndex, 0, t)
                }
                r.$broadcast("refreshCart", e, !0),
                    r.removedItem = null,
                    r.removedItemIndex = null,
                    r.removedItemChildIndex = null
            };
            i.showAccessories = function(e) {
                r.$broadcast("getAccessories", e)
            },
                i.onQuantityChange = function(n, a) {
                    return "4+" == n.quantity ? void(window.location.href = "/us/shop/small-business-orders/?skuid=" + n.sku_id) : (window.utag && utag.link({
                        link_cat: "update quantity",
                        link_id: "update_qty_" + n.sku_id,
                        link_meta: "link_name:update quantity>" + n.quantity,
                        link_position: n.sku_id
                    }), void e.changeQuantity(n.line_item_id, n.quantity, n.sku_id, t.PAGECONTEXT.CART_INFO).then(function(e) {
                        r.$broadcast("refreshCart", e, !0),
                            $(".uc-product-removed").hide(),
                            i.showAndHideCrossSell(n, !1)
                    }).E400(function(e) {
                        i._resetQuantity(n, a, e)
                    }).E401(function(e) {
                        r.promptReLogin(e)
                    }).E404(function(e) {
                        i._resetQuantity(n, a, e)
                    }).E409(function(e) {
                        var t = JSON.parse(e.responseText);
                        return "SkuLimitReached" == t.error ? void(window.location.href = "/us/shop/small-business-orders/?skuid=" + n.sku_id) : void i._resetQuantity(n, a, e)
                    }).E500(function(e) {
                        i._resetQuantity(n, a, e)
                    }).E502(function(e) {
                        i._resetQuantity(n, a, e)
                    }).E503(function(e) {
                        i._resetQuantity(n, a, e)
                    }).E504(function(e) {
                        i._resetQuantity(n, a, e)
                    }).fail(function(e) {
                        i._resetQuantity(n, a, e)
                    }))
                },
                i.buyOneMore = function(e) {
                    e.quantity = 2,
                        i.onQuantityChange(e, 1)
                },
                i.showDiscountDetails = function(e) {
                    var t = "." + i.lineItemClass(e);
                    $(t).find(".sc-prd-discount-details-holder").is(":visible") ? ($(t).find(".sc-prd-discount-details-holder").slideUp(), $(t).find(".sc-prd-discount-details").find(".btn-see-less").text("See more")) : ($(t).find(".sc-prd-discount-details-holder").slideDown(), $(t).find(".sc-prd-discount-details").find(".btn-see-less").text("See less"))
                },
                i.showBillingDetailsToggle = function(e, t) {
                    var n = "." + i.lineItemClass(e);
                    $(n).find(".sc-product-additional-info").first().is(":visible") && !t || "hide" == t ? ($(n).find(".sc-product-additional-info").first().slideUp(), $(n).find(".for-mobile .sc-prd-btn-details").is(":visible") ? $(n).find(".for-mobile .sc-prd-btn-details").first().removeClass("active") : $(n).find(".sc-prd-btn-details").first().removeClass("active")) : ($(n).find(".sc-product-additional-info").first().slideDown(), $(n).find(".for-mobile .sc-prd-btn-details").is(":visible") ? $(n).find(".for-mobile .sc-prd-btn-details").first().addClass("active") : $(n).find(".sc-prd-btn-details").first().addClass("active"))
                },
                i.lineItemClass = function(e) {
                    return e.line_item_id
                },
                r.isTMOSku = function(e) {
                    return _.contains(r.tmoSims, e)
                },
                r.isSprintSku = function(e) {
                    return _.contains(r.sprintSims, e)
                },
                i.simImage = function(e, t) {
                    e || (e = ""),
                        e = e.toUpperCase();
                    var n = "";
                    return e.indexOf("T-MOBILE") > -1 || r.isTMOSku(t) ? n = "logo-t-mobile.png": e.indexOf("SPRINT") > -1 || r.isSprintSku(t) ? n = "logo-sprint.png": e.indexOf("AT&T") > -1 && (n = "logo-at-and-t.png.png"),
                    r.relativeImagePath + "/checkout/" + n
                },
                i._resetQuantity = function(e, t, i) {
                    e = _.findWhere(r.shoppingCart.line_items, {
                        sku_id: e.sku_id
                    }),
                        e.quantity = t,
                        i = JSON.parse(i.responseText),
                        n[i.error] ? r.$broadcast("cartStepError", n[i.error].title, n[i.error].description) : r.$broadcast("cartStepError", n.defaultError.title, n.defaultError.description),
                        r.$broadcast("refreshCart", r.shoppingCart, !1)
                },
                i.isFreeItem = function(e) {
                    return 0 == e.line_item_cost.price.amount && !r.premiumCareSubscriptionOffer([], e.sku_id)
                },
                i.isCustomItem = function(e) {
                    return null != e.assurant_warranty_infos
                },
                i.onContinueShopping = function() {
                    window.location.href = SCart.URL.CONTINUE_SHOPPING_URL()
                },
                i.isEIPFinancingAvailable = function(e) {
                    return ! r.isTradeInSku(e) && r.anyItemInCartFinancible && !e.isFreeItem && r.isFinancingOn && "EIP" == e.financeType && e.attributes && e.attributes.product_division && ("MOBILE" == e.attributes.product_division.toUpperCase() || "TELEVISIONS-HOME-THEATER" == e.attributes.product_division.toUpperCase()) ? !0 : !1
                },
                i.isQledFinancingAvailable = function(e) {
                    return ! r.isTradeInSku(e) && r.isFinancingOn && "DeferredSpecial" == e.financeType && e.attributes && e.attributes.product_division && ("HOME ENTERTAINMENT" == e.attributes.product_division.toUpperCase() || "TELEVISIONS-HOME-THEATER" == e.attributes.product_division.toUpperCase()) ? !0 : !1
                },
                i.displayCrossSell = function(e) {
                    return e.simOffers && e.simOffers.length > 1 || e.isActivationEnabledLockedSku && r.carrierActivationConsentRequired || e.isActivationEnabledLockedSku && r.isLoggedIn || e.offers && e.offers.length > 0 ? !0 : !1
                },
                i.showAndHideCrossSell = function(e, t) {
                    var n = "#" + e.line_item_id + "_cross-sell-btn";
                    0 == t ? setTimeout(function() {
                            $(n).find("span").text("Tap to Collapse")
                        },
                        500) : "remove" == t ? setTimeout(function() {
                            $(".expanded button span").text("Tap to Collapse")
                        },
                        1e3) : $(n).parent().find(".cross-sell-holder").is(":visible") ? ($(n).parent().find(".cross-sell-holder").slideUp(750), $(n).find("span").text("Tap for more options"), $(n).parent().removeClass("expanded"), $(window).width() < 768 && setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $(n).closest(".uc-product-row").offset().top
                                },
                                "slow")
                        },
                        200)) : ($(n).find("span").text("Tap to collapse"), $(n).parent().addClass("expanded"), $(n).parent().find(".cross-sell-holder").slideDown(750), $(window).width() < 768 && setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $(".cross-sell-content-holder").offset().top
                                },
                                "slow")
                        },
                        200))
                },
                i.init(),
                i.checkRedirectEvent = function(e) { ("noPremiumCareAndActivation" != e || r.cartHasSimSkus() || r.premiumCareSubscriptionCart()) && ("noActivation" != e || r.cartHasSimSkus()) && ("noPremiumCare" != e || r.premiumCareSubscriptionCart()) ? "removeTradeInItem" == e && l.path("/cart-payment") : l.path("/cart-payment")
                }
        }]),
    checkoutApp.controller("OrderSummaryCtrl", ["CheckoutService", "errors", "GnbService", "constants", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "$timeout",
        function(e, t, n, i, r, a, o, s, c, l, d, p) {
            s.defaults.headers.common["x-ecom-app-id"] = "tempID",
                r.isMobileDevice = window.isMobile(),
                r.handleEmptyCart = function(e) {
                    a.isEmptyCartItem(e) ? a.isCartEmpty = !0 : ($(".order-summary-holder, .icon-plus, .btn-promo-accordion").removeClass("disabled cursor-default"), a.isCartEmpty = !1),
                        a.$digest(),
                        a.disableOrderSummary(e)
                },
                r.$on("cartStepError",
                    function() {
                        r.handleEmptyCart(a.shoppingCart)
                    }),
                r.$on("onUserLogin",
                    function() {
                        r.handleEmptyCart(a.shoppingCart)
                    }),
                r.$on("refreshCart",
                    function(e, t, n) {
                        r.handleEmptyCart(t)
                    });
            var u = $(".os-total-fixed-at-bottom-in-mobile");
            u.length > 0 && (a.totalPricePos = u.offset().top),
                r.haNotAvailable = !1,
                r.isHomeDeliveryAvailable = function() {
                    var n = _.filter(a.cartItems,
                        function(e) {
                            return e.attributes.is_ha_delivery
                        }),
                        o = _.pluck(n, "sku_id");
                    e.getAvailableHomeDeliveryDates(o, r.postalcode, i.PAGECONTEXT.ORDER_SUMMARY).then(function(e) {
                        a.availableDeliveryDates = e,
                            e.length > 0 ? (a.earliestDate = e[0], r.getEstimatedTaxOfOrder()) : (r.haNotAvailable = !0, r.noHomeDelivery()),
                            r.$digest()
                    }).E400(function(e) {
                        e = JSON.parse(e.responseText),
                            a.$broadcast("cartStepError", t.homeDeliveryError.title, t.homeDeliveryError.description)
                    }).E401(function(e) {
                        a.$broadcast("cartStepError", t.homeDeliveryError.title, t.homeDeliveryError.description)
                    }).E404(function(e) {
                        e = JSON.parse(e.responseText),
                            a.$broadcast("cartStepError", t.homeDeliveryError.title, t.homeDeliveryError.description)
                    }).fail(function(e) {
                        r.haNotAvailable = !0,
                            r.$digest(),
                            a.$broadcast("cartStepError", t.homeDeliveryError.title, t.homeDeliveryError.description)
                    })
                },
                r.getEstimatedTax = function() {
                    r.haNotAvailable = !1,
                        $(".estimated-tax-msg").hide(),
                        a.isHAinCart ? r.isHomeDeliveryAvailable() : r.getEstimatedTaxOfOrder()
                },
                r.getEstimatedTaxOfOrder = function() {
                    e.getEstimatedTaxInfo(r.postalcode, i.PAGECONTEXT.ORDER_SUMMARY).then(function(e) {
                        a.$broadcast("refreshCart", e, !1),
                            r.zipcode = r.postalcode,
                            a.$digest(),
                            r.toggleTax()
                    }).E400(function(e) {
                        e = JSON.parse(e.responseText),
                            "DisallowedPostalCode" == e.error ? r._zipCodeError(t.InvalidPostalCode) : a.$broadcast("cartStepError", t.defaultError.title, t.defaultError.description)
                    }).E401(function(e) {
                        r.toggleTax(),
                            a.promptReLogin(e)
                    }).E404(function(e) {
                        e = JSON.parse(e.responseText),
                            "InvalidPostalCode" == e.error ? r._zipCodeError(t.InvalidPostalCode) : a.$broadcast("cartStepError", t.defaultError.title, t.defaultError.description)
                    }).fail(function(e) {})
                },
                r._zipCodeError = function(e) {
                    $(".estimated-tax-msg").text(e.title).show()
                },
                r.noHomeDelivery = function() {
                    $(".estimated-tax-msg").text("Home Delivery is not avialble for this zipcode").show()
                },
                r.showPayOptions = function() {
                    $(".btn-more-checkout-options").next().slideToggle(250),
                        setTimeout(function() {
                                if ($(window).width() < 768 && !$(".order-summary-holder").hasClass("disabled")) {
                                    var e = $(".os-total-fixed-at-bottom-in-mobile").outerHeight();
                                    $("body").css("padding-bottom", e + "px")
                                }
                            },
                            300),
                        $(".btn-more-checkout-options").toggleClass("active")
                };
            var f = function() {
                    a.$broadcast("saveImpression", a.shoppingCart, "new ecom step1|view cart")
                },
                h = function(e) {
                    var t = "";
                    a.cartItems && a.cartItems.length > 0 && (t = _.pluck(a.cartItems, "sku_id"));
                    var n = e ? "pay in full": "pay over time";
                    n = n + " - " + (a.cartFinancePlanType ? a.cartFinancePlanType: "NoFinance");
                    var i = e ? "Pay In Full": "Pay Over Time",
                        r = {
                            page_type: "shopping cart",
                            page_type: i,
                            dr_page_name: i,
                            site_language: "en",
                            loggedin_status: a.isLoggedIn,
                            page_breadcrumb: null,
                            page_channel: "ecommerce",
                            stock_list: "in stock",
                            ecom_flag: "Yes",
                            billing_li_state: "billing: " + a.isLoggedIn,
                            cart_theme: "29552800",
                            phone_lock_flag: t,
                            financing_available: a.isCartFinancible ? "y": "n",
                            activation_available: a.carrierActivationEnabled() ? "y": "n"
                        },
                        o = a.cartFinancePlanType ? a.cartFinancePlanType: "NoFinance"; - 1 !== o.indexOf("Deferred") && (o = o + "_" + a.cartFinancingDetails.deferred_finance_plan.deferred_period_duration_in_months),
                        r.page_state = (r.page_state ? r.page_state + " - ": "") + o,
                    window.utag && (utag.link({
                        link_cat: "checkout",
                        link_id: n,
                        link_meta: "link_name:" + n,
                        link_position: "order summary",
                        financing_available: a.isCartFinancible ? "y": "n",
                        activation_available: a.carrierActivationEnabled() ? "y": "n"
                    }), window.utag.view(r))
                },
                g = function() {
                    var e = "";
                    a.payoverTimeSelected ? e = "Finance - Login": a.isTradeinCart ? e = "TradeIn - Login": a.cartHasSimSkus() ? e = "Activation - Login": a.premiumCareSubscriptionCart() && (e = "Premium Care - Login");
                    var t = {
                        page_type: "shopping cart",
                        page_type: e,
                        dr_page_name: e,
                        site_language: "en",
                        loggedin_status: a.isLoggedIn,
                        page_breadcrumb: null,
                        page_channel: "ecommerce",
                        stock_list: "in stock",
                        ecom_flag: "Yes",
                        cart_theme: "29552800",
                        financing_available: a.isCartFinancible ? "y": "n",
                        activation_available: a.carrierActivationEnabled() ? "y": "n"
                    };
                    window.utag && window.utag.view(t)
                };
            r.checkoutExtd = function() {
                if (!a.isPCTermsExist && a.ifPPSubscribed()) if (f(), h(!0), !window.isLogin() && a.isLoginRequired()) n.setLayout(),
                    a.checkoutSelected = !0,
                    g();
                else {
                    a.isFinancingOn = !1,
                        a.redirectPostLogin = i.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT,
                        d.path("/cart-payment");
                    var e = new Date;
                    a.checkoutCallTriggerTime = e.getTime()
                }
            },
                r.$on("checkoutExtd",
                    function() {
                        r.checkoutExtd()
                    }),
                r.checkout = function() {
                    return a.notOptedForSUP = !1,
                        a.payoverTimeSelected = !1,
                    a.payNowSelected && a.deleteUpgradeItemsFromCart(),
                        a.isUpgradeSkuInCart ? void(a.payNowSelected = !0) : void r.checkoutExtd()
                },
                r.$on("payOverTimeExtd",
                    function() {
                        r.payOverTimeExtd()
                    }),
                r.payOverTimeExtd = function() { ! a.isPCTermsExist && a.ifPPSubscribed() && (h(!1), window.isLogin() ? a.getCreditDetails("redirect") : (a.payoverTimeSelected = !0, n.setLayout("financing"), g(), p(function() {
                        a.$digest()
                    },
                    0)))
                },
                r.payOverTime = function() {
                    return a.payNowSelected = !1,
                        a.isUpgradeSkuInCart && !a.is_sup_cart ? (a.payoverTimeSelected = !0, void a.deleteNonUpgradeItemsFromCart()) : void r.payOverTimeExtd()
                },
                r.checkoutPaypal = function() {
                    e.getPaypalUrl(!a.isLoggedIn, !1).then(function(e) {
                        e && e.payment && e.payment.paypal && ($(".spinner_container").show(), $(".spinner_container").addClass("preloader-paypal"), $(".spinner_container").append('<div class="preloader-paypal-msg">We are redirecting you to PayPal. Please be patient.</div>'), window.location.href = e.payment.paypal.redirect_url)
                    }).fail(function(e) {
                        a.$broadcast("cartStepError", "Sorry, we could not redirect you to Paypal.", "Please try again after some time. We regret the inconvenience."),
                        window.utag && utag.link({
                            link_cat: "paypal error response",
                            link_id: "checkout_payment_information_paypal_error_response",
                            link_meta: "link_name:paypal error response",
                            link_position: "payment information"
                        })
                    })
                },
                r.toggleTax = function() {
                    return a.isCartEmpty || a.isEppRedirect() || !a.isSessionIdValid() ? !1 : ($(window).width() > 768 && $(".order-summary-holder").find(".info-box").width($(".order-summary-holder").outerWidth() - 66), $(".icon-plus").toggleClass("active"), $(window).width() < 768 ? $(".estimated-tax-holder").find(".info-box").slideToggle() : $(".estimated-tax-holder").find(".info-box").is(":visible") ? $(".estimated-tax-holder").find(".info-box").animate({
                            top: "75px",
                            opacity: 0
                        },
                        350,
                        function() {
                            $(".estimated-tax-holder").find(".info-box").css({
                                display: "none"
                            })
                        }) : ($(".estimated-tax-holder").find(".info-box").css({
                        top: "75px",
                        opacity: "0",
                        display: "block"
                    }), $(".estimated-tax-holder").find(".info-box").animate({
                            top: "33px",
                            opacity: 1
                        },
                        350)), $(".estimated-tax-info-holder").find(".zip-code-text").focus(), void a.androidDeactivateSticky())
                },
                r.contShopping = function() {
                    window.location.href = SCart.URL.CONTINUE_SHOPPING_URL()
                },
                a.promoMsg = "",
                a.promoClass = "",
                r.isCheckoutPage = !1,
                r.paymentChoice = function(e) {
                    "payFinance" == e ? r.payOverTime() : r.checkout()
                },
                r.hideEstimatedTax = EcomApi.isTransformRequired
        }]),
    checkoutApp.controller("ShippingMethodsCtrl", ["CheckoutService", "constants", "errors", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location",
        function(e, t, n, i, r, a, o, s, c, l) {
            r.focusOnShippingMethods = !1,
                i.setOptionsDisplayText = function(e) {
                    e.forEach(function(e) {
                        e.displayText = r.shippingOptionsText[e.name]
                    })
                },
                i.showShippingInfo = function() {
                    $(window).width() > 768 && ($(".white-glove-info-icon").addClass("active"), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").css({
                        top: "115px",
                        opacity: "0",
                        display: "block"
                    }), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                            top: "65px",
                            opacity: 1
                        },
                        350))
                },
                i.hideShippingInfo = function() {
                    $(window).width() > 768 && ($(".white-glove-info-icon").removeClass("active"), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                            top: "115px",
                            opacity: 0
                        },
                        350,
                        function() {
                            $(".white-glove-info-msg").css({
                                display: "none"
                            })
                        }))
                },
                i.toggleShippingInfo = function(e) {
                    if (e.stopPropagation(), $(".white-glove-info-icon").hasClass("active") ? $(document).off("click.whiteGlove") : $(document).on("click.whiteGlove",
                            function(e) {
                                i.toggleShippingInfo(e)
                            }), $(".white-glove-info-icon").toggleClass("active"), $(window).width() < 768) {
                        var t = $(".white-glove-info-icon").parents(".sm-label").find("label").outerHeight() + 20 + "px";
                        $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").css("top", t),
                            $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").slideToggle()
                    } else $(".white-glove-info-icon").hasClass("active") ? ($(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").css({
                        top: "115px",
                        opacity: "0",
                        display: "block"
                    }), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                            top: "65px",
                            opacity: 1
                        },
                        350)) : $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                            top: "115px",
                            opacity: 0
                        },
                        350,
                        function() {
                            $(".white-glove-info-msg").css({
                                display: "none"
                            })
                        })
                },
                i.shippingOptionsCallBack = function(n, a) {
                    if (!n || 0 == n.length) return $(".checkout-payment-shipping-methods .checkout-payment-form-subtitle").text("No applicable shipping methods"),
                        void(0 == r.cost.total.amount && $(".checkout-payment-shipping-methods .checkout-payment-form-subtitle").addClass("no-shipping-zero-dollar"));
                    if ($(".checkout-payment-shipping-methods .checkout-payment-form-subtitle").text("Select Shipping Method"), window.utag && utag.link({
                            shipping_options_avail: "" + n.length
                        }), n.sort(function(e, t) {
                            return parseFloat(e.cost.amount) - parseFloat(t.cost.amount)
                        }), i.setOptionsDisplayText(n), i.setDefaultShippingOption(n), !a) {
                        var o = {};
                        o.id = r.selectedShippingMethod.id,
                            o.description = r.selectedShippingMethod.description,
                            o.name = r.selectedShippingMethod.name,
                            e.updateShippingMethod(o, t.PAGECONTEXT.SHIPPING_METHOD).then(function(e) {
                                r.shippingMethodMode = "edit",
                                    r.$digest(),
                                    r.$broadcast("refreshCart", e, !1)
                            }).E401(function(e) {
                                r.promptReLogin(e)
                            })
                    }
                },
                i.$on("addressUpdated",
                    function(n, a, o) {
                        r.shoppingCart.shipping_method && i.setDefaultShippingOption([r.shoppingCart.shipping_method]),
                            EcomApi.isTransformRequired || r.shoppingCart.shipping_options ? r.shoppingCart && r.shoppingCart.shipping_options && i.shippingOptionsCallBack(r.shoppingCart.shipping_options, o) : e.getShippingOptions(t.PAGECONTEXT.SHIPPING_INFO).then(function(e) {
                                i.shippingOptionsCallBack(e, o)
                            })
                    }),
                i.onShippintMethodEdit = function() {
                    r.shippingMethodMode = "edit"
                },
                i.shippingMethodSelect = function(i) {
                    var a = {},
                        o = r.cost.total.amount;
                    a.id = i.id,
                        a.description = i.description,
                        a.name = i.name,
                        $(".generic-error").hide(),
                        e.updateShippingMethod(a, t.PAGECONTEXT.SHIPPING_METHOD).then(function(e) {
                            if (r.selectedShippingMethod = i, r.shippingMethodMode = "edit", r.focusOnShippingMethods = !0, r.$digest(), r.$broadcast("refreshCart", e, !1), 0 == o && r.cost.total.amount > 0) {
                                var t = "You have selected " + i.description + " shipping option";
                                r.$broadcast("paymentStepError", t, n.NonZeroCart.description),
                                    r.addedPayment = null,
                                    r.paymentMode = "edit",
                                    r.shippingMode = "disabled",
                                    r.$digest()
                            } else o > 0 && 0 == r.cost.total.amount && (r.zerodollarchange(), r.selectedAddress && 0 == $("input[name=addr]:checked").length && r.isLoggedIn && $(".add_phone_email").show(), $(".generic-error").hide());
                            "view" == r.shippingMode && "view" == r.paymentMode ? setTimeout(function() {
                                    $("html, body").animate({
                                            scrollTop: $("#_place_order").offset().top
                                        },
                                        "slow")
                                },
                                200) : "edit" == r.shippingMode && 0 == r.cost.total.amount && setTimeout(function() {
                                    $("html, body").animate({
                                            scrollTop: $("#_user_address").offset().top
                                        },
                                        "slow")
                                },
                                200)
                        }).E401(function(e) {
                            r.promptReLogin(e)
                        }).fail(function(e) {
                            $("#" + r.selectedShippingMethod.id).prop("checked", !0),
                                r.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description)
                        })
                },
                r.isStandardShipping = function(e) {
                    return "standard" === e.description.toLowerCase() || "standard ground shipping" === e.description.toLowerCase()
                },
                i.setDefaultShippingOption = function(e) {
                    if (i.shippingOptions = e, r.isFreeShippingForDream = !1, _.forEach(e,
                            function(e) {
                                "5766800" == e.id && r.cartHasDreamSku() && (r.isFreeShippingForDream = !0)
                            }), r.TvTradeIn) {
                        r.selectedShippingMethod = i.shippingOptions[0],
                            r.selectedShippingMethod.displayText = r.shippingOptionsText[i.shippingOptions[0].description],
                            r.$digest();
                        var t = i.shippingOptions[0].id;
                        $("#" + t).attr("checked", "checked"),
                            $("#" + t).next().click()
                    } else {
                        r.selectedShippingMethod = r.shoppingCart.shipping_method,
                            r.selectedShippingMethod.displayText = r.shippingOptionsText[r.shoppingCart.shipping_method.name],
                            r.$digest();
                        var t = r.shoppingCart.shipping_method.id;
                        $("#" + t).attr("checked", "checked"),
                            $("#" + t).next().click()
                    }
                }
        }]),
    checkoutApp.controller("ShippingMethodsCtrlv3", ["CheckoutService", "constants", "errors", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location",
        function(e, t, n, i, r, a, o, s, c, l) {
            r.focusOnShippingMethods = !1,
                i.setOptionsDisplayText = function(e) {
                    e.forEach(function(e) {
                        e.displayText = r.shippingOptionsText[e.name]
                    })
                },
                i.showShippingInfo = function() {
                    $(window).width() > 768 && ($(".white-glove-info-icon").addClass("active"), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").css({
                        top: "115px",
                        opacity: "0",
                        display: "block"
                    }), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                            top: "65px",
                            opacity: 1
                        },
                        350))
                },
                i.hideShippingInfo = function() {
                    $(window).width() > 768 && ($(".white-glove-info-icon").removeClass("active"), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                            top: "115px",
                            opacity: 0
                        },
                        350,
                        function() {
                            $(".white-glove-info-msg").css({
                                display: "none"
                            })
                        }))
                },
                i.toggleShippingInfo = function(e) {
                    if (e.stopPropagation(), $(".white-glove-info-icon").hasClass("active") ? $(document).off("click.whiteGlove") : $(document).on("click.whiteGlove",
                            function(e) {
                                i.toggleShippingInfo(e)
                            }), $(".white-glove-info-icon").toggleClass("active"), $(window).width() < 768) {
                        var t = $(".white-glove-info-icon").parents(".sm-label").find("label").outerHeight() + 20 + "px";
                        $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").css("top", t),
                            $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").slideToggle()
                    } else $(".white-glove-info-icon").hasClass("active") ? ($(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").css({
                        top: "115px",
                        opacity: "0",
                        display: "block"
                    }), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                            top: "65px",
                            opacity: 1
                        },
                        350)) : $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                            top: "115px",
                            opacity: 0
                        },
                        350,
                        function() {
                            $(".white-glove-info-msg").css({
                                display: "none"
                            })
                        })
                },
                i.shippingOptionsCallBack = function(n, a) {
                    if (!n || 0 == n.length) return $(".selected-shipping-method-holder .selected-shipping-title").text("No applicable shipping methods"),
                        void(0 == r.cost.total.amount && $(".checkout-payment-shipping-methods .checkout-payment-form-subtitle").addClass("no-shipping-zero-dollar"));
                    if ($(".checkout-payment-shipping-methods .checkout-payment-form-subtitle").text("Select Shipping Method"), window.utag && utag.link({
                            shipping_options_avail: "" + n.length
                        }), n.sort(function(e, t) {
                            return parseFloat(e.cost.amount) - parseFloat(t.cost.amount)
                        }), i.setOptionsDisplayText(n), i.setDefaultShippingOption(n), !a) {
                        var o = {};
                        o.id = r.selectedShippingMethod.id,
                            o.description = r.selectedShippingMethod.description,
                            o.name = r.selectedShippingMethod.name,
                            e.updateShippingMethod(o, t.PAGECONTEXT.SHIPPING_METHOD).then(function(e) {
                                r.shippingMethodMode = "view",
                                    r.$digest(),
                                    r.$broadcast("refreshCart", e, !1)
                            }).E401(function(e) {
                                r.promptReLogin(e)
                            })
                    }
                },
                i.$on("addressUpdated",
                    function(n, a, o) {
                        r.shoppingCart.shipping_method && i.setDefaultShippingOption([r.shoppingCart.shipping_method]),
                            EcomApi.isTransformRequired || r.shoppingCart.shipping_options ? r.shoppingCart && r.shoppingCart.shipping_options ? i.shippingOptionsCallBack(r.shoppingCart.shipping_options, o) : r.shoppingCart && !r.shoppingCart.shipping_options && ($(".selected-shipping-method-holder .selected-shipping-title").text("No applicable shipping methods"), r.shippingMethodMode = "view", r.$digest()) : e.getShippingOptions(t.PAGECONTEXT.SHIPPING_INFO).then(function(e) {
                                i.shippingOptionsCallBack(e, o)
                            })
                    }),
                i.$on("shippingOptionsFetched",
                    function(e, t, n) {
                        t && t.shipping_options && (i.setOptionsDisplayText(t.shipping_options), i.shippingOptions = t.shipping_options),
                        t && t.shipping_info && r.$broadcast("addressUpdated", t, n),
                        r.shoppingCart && !r.shoppingCart.shipping_options && ($(".selected-shipping-method-holder .selected-shipping-title").text("No applicable shipping methods"), r.shippingMethodMode = "view", r.$digest())
                    }),
                i.onShippintMethodEdit = function() {
                    r.shippingMethodMode = "edit"
                },
                i.shippingMethodSelect = function(i) {
                    var a = {},
                        o = r.cost.total.amount;
                    a.id = i.id,
                        a.description = i.description,
                        a.name = i.name,
                        $(".generic-error").hide(),
                        e.updateShippingMethod(a, t.PAGECONTEXT.SHIPPING_METHOD).then(function(e) {
                            if (r.selectedShippingMethod = i, r.shippingMethodMode = "view", r.focusOnShippingMethods = !0, r.$digest(), r.$broadcast("refreshCart", e, !1), 0 == o && r.cost.total.amount > 0) {
                                var t = "You have selected " + i.description + " shipping option";
                                r.$broadcast("paymentStepError", t, n.NonZeroCart.description),
                                    r.addedPayment = null,
                                    r.paymentMode = "edit",
                                    r.shippingMode = "disabled",
                                    r.$digest()
                            } else o > 0 && 0 == r.cost.total.amount && (r.zerodollarchange(), r.selectedAddress && 0 == $("input[name=addr]:checked").length && r.isLoggedIn && $(".add_phone_email").show(), $(".generic-error").hide())
                        }).E401(function(e) {
                            r.promptReLogin(e)
                        }).fail(function(e) {
                            $("#" + r.selectedShippingMethod.id).prop("checked", !0),
                                r.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description);

                        })
                },
                r.isStandardShipping = function(e) {
                    return "standard" === e.description.toLowerCase() || "standard ground shipping" === e.description.toLowerCase()
                },
                i.setDefaultShippingOption = function(e) {
                    if (i.shippingOptions = e, r.isFreeShippingForDream = !1, r.TvTradeIn) {
                        r.selectedShippingMethod = i.shippingOptions[0],
                            r.selectedShippingMethod.displayText = r.shippingOptionsText[i.shippingOptions[0].description],
                            r.$digest();
                        var t = i.shippingOptions[0].id;
                        $("#" + t).attr("checked", "checked"),
                            $("#" + t).next().click()
                    } else {
                        r.selectedShippingMethod = r.shoppingCart.shipping_method,
                            r.selectedShippingMethod.displayText = r.shippingOptionsText[r.shoppingCart.shipping_method.name],
                            r.$digest();
                        var t = r.shoppingCart.shipping_method.id;
                        $("#" + t).attr("checked", "checked"),
                            $("#" + t).next().click()
                    }
                }
        }]),
    checkoutApp.controller("CardInfoCtrl", ["CheckoutService", "constants", "errors", "updateUtilities", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "$timeout",
        function(e, t, n, i, r, a, o, s, c, l, d, p) {
            a.linkSectionMode,
                a.states = ["Select", "AL", "AK", "AS", "AZ", "AR", "CA", "CO", "CT", "DE", "DC", "FM", "FL", "GA", "GU", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MH", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "MP", "OH", "OK", "OR", "PW", "PA", "PR", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VI", "VA", "WA", "WV", "WI", "WY"],
                a.paymentSource = o.payment_source,
                a.isFinancingOn = "finance" == o.payment_source ? !0 : !1,
                r.validate = function(e) {
                    e["class"] = e.$invalid ? "error focus": "focus valid",
                        e.$dirty = !0
                },
                r.validateState = function(e, t) {
                    e.$setValidity("unselect", "Select" != t),
                        e["class"] = e.$invalid ? "error focus": "focus valid",
                        e.$dirty = !0
                },
                r.zipcodelookup = function(n) {
                    e.ziplookup(n, t.PAGECONTEXT.PAYMENT_INFO).then(function(e) {
                        e && e.city_state_list && e.city_state_list.length > 0 && (a.billing.city = e.city_state_list[0].city, a.billing.state_or_province = e.city_state_list[0].state_or_province, a.$digest(), $("select").selectric(), $("#_billingaddressInfo_userState").blur(), $("#_billingaddressInfo_userCity").blur())
                    }).E401(function(e) {
                        a.promptReLogin(e)
                    })
                },
                r.onFocus = i.formOnFocus,
                r.$watch("cardForm.$valid",
                    function() {
                        r.cardForm && (r.cardFormvalid = r.cardForm.$valid)
                    }),
                r.onDRCCSuccess = function() {
                    e.refreshCart({
                        context: t.PAGECONTEXT.PAYMENT_INFO
                    }).then(function(e) {
                        a.refreshCart(e, !1),
                            a.addedPayment = e.payment,
                            r.onPaymentComplete()
                    }).fail(function() {
                        a.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description)
                    })
                },
                r.manageIframeMessage = function() {
                    function e(e) {
                        "success" == e.data.message ? ($(".spinner_container").hide(), r.onDRCCSuccess()) : "failure" == e.data.message ? ($(".spinner_container").hide(), a.$broadcast("paymentStepError", n.iFrameError.title, n.iFrameError.description)) : "showSpinner" == e.data.message ? $(".spinner_container").show() : "hideSpinner" == e.data.message && $(".spinner_container").hide()
                    }
                    var t;
                    t = new Porthole.WindowProxy("", "cardFormFrame"),
                        t.addEventListener(e)
                },
                r.newCreditCard = function() {
                    if (window.utag && utag.link({
                            link_cat: "add payment method",
                            link_id: "payment_information_payment_method_add_CreditCard",
                            link_meta: "link_name:CreditCard",
                            link_position: "payment information>add payment method"
                        }), a.isLoggedIn && (a.billing.email = a.contact.email, a.billing.phone = a.contact.phone), r.selectedPayment = void 0, r.isPaypal = !1, a.isPaymentOptionFinance = !1, $(".checkout-payment-cc-details").show(), $("input[name=payMethod]:checked").removeAttr("checked"), r.scrollToCCSection(), a.isPaymentSourceDR) {
                        $("#btnPaymentCnt").hide();
                        var n = $("#cardFormFrame"),
                            i = n.attr("src");
                        i && i.length > 0 ? (r.scrollToCCSection(), r.manageIframeMessage()) : e.getPaymentUiUrl(t.PAGECONTEXT.PAYMENT_INFO).then(function(e) {
                            e && e.url && ($(".spinner_container").show(), $("#cardFormFrame").attr("src", e.url), r.scrollToCCSection(), r.manageIframeMessage())
                        })
                    }
                },
                r.paypal = function(e) {
                    window.utag && utag.link({
                        link_cat: "add payment method",
                        link_id: e ? "payment_information_payment_method_add_PaypalCredit": "payment_information_payment_method_add_Paypal",
                        link_meta: e ? "link_name:PaypalCredit": "link_name:Paypal",
                        link_position: "payment information>add payment method"
                    }),
                        a.isPaymentOptionFinance = !1,
                        $(".checkout-payment-cc-details").hide(),
                        $("input[name=payMethod]:checked").removeAttr("checked"),
                    a.isPaymentSourceDR && $("#btnPaymentCnt").show(),
                        r.isPaypal = !0,
                        r.isPaypalCredit = e
                },
                r.zipCodeKeyUp = function(e) {
                    e.$invalid || r.zipcodelookup(e.$modelValue)
                },
                r.onPaymentSelect = function(e) {
                    window.utag && utag.link({
                        link_cat: "select payment method",
                        link_id: "payment_information_payment_method_select_CreditCard",
                        link_meta: "link_name:CreditCard",
                        link_position: "payment information>select payment method"
                    }),
                        r.selectedPayment = e,
                        r.newCard = !1,
                        r.isPaypal = !1,
                        a.isPaymentOptionFinance = !1,
                        $("input[name=_paymentTypes]:checked").removeAttr("checked"),
                        $(".checkout-payment-cc-details").hide(),
                    a.isPaymentSourceDR && $("#btnPaymentCnt").show()
                },
                r.contPayment = function() {
                    var e = a.getPaymentMethod(r.isPaypal, r.isPaypalCredit);
                    if (window.utag && utag.link({
                            link_cat: "payment method",
                            link_id: "checkout_payment_information_payment_method_" + e,
                            link_meta: "link_name:" + e,
                            link_position: "payment information>" + e
                        }), null != r.selectedPayment || r.cardFormvalid || r.isPaypal) {
                        if (r.isPaypal) return r.handlePaypal();
                        r.selectedPayment || (r.newCard = !0, r.selectedPayment = r.cardInfo),
                        a.billing.line2 && "" != a.billing.line2 || (a.billing = _.omit(a.billing, "line2")),
                        a.disableSaveCard() && (r.cardInfo.saveCard = !0),
                            r.addPayment(a.billing, r.selectedPayment, r.newCard, r.cardInfo.saveCard)
                    }
                },
                r.onPaymentComplete = function() {
                    a.paymentMode = "view",
                        a.paymentSource = "",
                    a.selectedAddress && a.shippingSameAsBilling && (a.selectedAddress = a.addedPayment.billing_info),
                        a.$broadcast("contactInfoUpdated"),
                    ("view" != a.shippingMode || a.shippingSameAsBilling) && (a.shippingMode = "edit"),
                        a.$digest(),
                        "view" == a.shippingMode && "view" == a.paymentMode ? (a.shippingSameAsBilling && a.isHAinCart && a.$broadcast("isHomeDeliveryAvailableShippingMethod", a.addedPayment.billing_info.postal_code), setTimeout(function() {
                                $("html, body").animate({
                                        scrollTop: $("#_place_order").offset().top
                                    },
                                    "slow")
                            },
                            200)) : setTimeout(function() {
                                $("html, body").animate({
                                        scrollTop: $("#_user_address").offset().top
                                    },
                                    "slow"),
                                a.shippingSameAsBilling && ($("#_sameAsShipAddress").prop("checked", !0), a.isHAinCart && a.$broadcast("isHomeDeliveryAvailableShippingMethod", a.addedPayment.billing_info.postal_code))
                            },
                            200)
                },
                r.handlePaypal = function() {
                    e.getPaypalUrl(!a.isLoggedIn, r.isPaypalCredit).then(function(e) {
                        e && e.payment && e.payment.paypal && ($(".spinner_container").show(), $(".spinner_container").addClass("preloader-paypal"), $(".spinner_container").append('<div class="preloader-paypal-msg">We are redirecting you to PayPal. Please be patient. The estimated taxes will change based on your shipping address.</div>'), window.location.href = e.payment.paypal.redirect_url),
                            $(".checkout-payment-cc-details").hide()
                    }).fail(function() {
                        a.$broadcast("paymentStepError", "We could not process your request at this time.", "Please try again with a different payment option."),
                        window.utag && utag.link({
                            link_cat: "paypal error response",
                            link_id: "checkout_payment_information_paypal_error_response",
                            link_meta: "link_name:paypal error response",
                            link_position: "payment information"
                        })
                    })
                },
                r.$on("cartAvailable",
                    function() {
                        a.isPaymentSourceDR && e.getPaymentUiUrl().then(function(e) {
                            if (e && e.url) {
                                var t = $("#cardFormFrame");
                                t && t.length > 0 && t.attr("src", e.url)
                            }
                        })
                    }),
                r.$on("profileInfoAvailable",
                    function() {
                        r.selectedPayment || (a.billing.email || (a.billing.email = a.contact.email), a.billing.phone || (a.billing.phone = a.contact.phone), r.blurFields())
                    }),
                r.$on("onUserLogin",
                    function() {
                        if (a.isPaymentSourceDR) {
                            var t = $("#cardFormFrame");
                            t && t.length > 0 && t.removeAttr("src")
                        }
                        a.onErrorClose(),
                            e.getUserProfile().then(function(e) {
                                e = JSON.parse(e),
                                e && e.emailaddress && (a.contact || (a.contact = {}), a.contact.email = e.emailaddress, a.contact.phone = e.cellPhone || e.telePhone || e.workPhone, a.userEmail = e.emailaddress, a.billing || (a.billing = {}), a.billing.email = a.contact.email, a.billing.phone = a.contact.phone, a.$broadcast("addressInfo"), a.$digest())
                            }),
                            a.setPaymentOptions()
                    }),
                r.addPayment = function(t, i, o, s) {
                    e.addPayment(t, i, o, !a.isLoggedIn, s).then(function(e) {
                        a.addedPayment = e.payment,
                            r.onPaymentComplete()
                    }).E400(function() {
                        a.$broadcast("paymentStepError", n.InvalidCreditCard.title, n.InvalidCreditCard.description)
                    }).E401(function(e) {
                        a.promptReLogin(e)
                    }).E409(function(e) {
                        e = JSON.parse(e.responseText),
                            "line-item-creation-failure" == e.error || "InventoryUnavailable" == e.error ? a.$broadcast("paymentStepError", n.InventoryUnavailableError.title, n.InventoryUnavailableError.description) : a.$broadcast("paymentStepError", n.InvalidCreditCard.title, n.InvalidCreditCard.description),
                            r.selectedPayment = null
                    }).fail(function() {
                        window.utag && utag.link({
                            link_cat: "CC error response",
                            link_id: "checkout_payment_information_CC_error_response",
                            link_meta: "link_name:CC error response",
                            link_position: "payment position"
                        }),
                            a.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description),
                            r.selectedPayment = null
                    })
                },
                r.onPaymentEdit = function() {
                    a.haAvailableInPaypalAddress = !1,
                        r.selectedPayment = a.addedPayment,
                    a.addedPayment && a.addedPayment.billing_record_id && p(function() {
                            $("#" + a.addedPayment.billing_record_id).trigger("click"),
                                $("#cardFormHolder div.input-control").addClass("focus"),
                                a.billing.state_or_province = a.addedPayment.billing_info.state_or_province
                        },
                        0),
                        $("input[name=payMethod]:checked").length > 0 ? $("input[id=_paymentTypeCC]:checked").removeAttr("checked") : r.selectedPayment = void 0,
                    0 == $("input[id=_paymentTypeCC]:checked").length && $(".checkout-payment-cc-details").hide(),
                        r.isPaypal = !1,
                        a.paymentMode = "edit",
                        $(".checkout-payment-forms .input-control").addClass("focus")
                },
                r.scrollToCCSection = function() {
                    setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $(".checkout-payment-cc-details").offset().top
                                },
                                "slow"),
                                r.blurFields()
                        },
                        200)
                },
                r.blurFields = function() {
                    a.billing.email && ($("#_billingaddressInfo_userEmail").focus().blur(), $("#_billingaddressInfo_userEmail").parents(".input-control").addClass("focus")),
                    a.billing.phone && ($("#_billingaddressInfo_userPhoneNo").focus().blur(), $("#_billingaddressInfo_userPhoneNo").parents(".input-control").addClass("focus"))
                },
                r.openLinkSection = function() {
                    a.linkSectionMode = "edit"
                },
                r.blurFields(),
            !a.financingPubKey && a.isFinancingOn && "P" == a.financingStatus && e.getFinancingPubKey(t.PAGECONTEXT.COMMON).then(function(e) {
                a.financingPubKey = e
            }),
                r.linkTDAccount = function() {
                    e.linkTDAccount(r.TDlinkForm, t.PAGECONTEXT.CART_INFO).then(function(e) {
                        var t = e.td_bank_finance.td_bank_existing_account.response.credit_application_response; ! t.application_status || "A" != t.application_status && "P" != t.application_status && "D" != t.application_status ? e.td_bank_finance.td_bank_existing_account.response.error && -1 != e.td_bank_finance.td_bank_existing_account.response.error.message.indexOf("FinanceAdapterRequestPayloadDecryptionFailed") ? a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description) : a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description) : (a.financingDetails = t, a.financingStatus = t.application_status, a.isSufficientCredit = t.available_credit > a.shoppingCart.cost.total.amount ? !0 : !1, a.applyFinancingToCart()),
                            a.$digest()
                    }).fail(function(e) {
                        e = JSON.parse(e.responseText),
                            "FinanceAdapterRequestPayloadDecryptionFailed" == e.error ? a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description) : a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description)
                    })
                },
                r.changePayment = function() {
                    a.linkSectionMode = "view"
                },
                r.payFinancing = function() {
                    $("input[name=payMethod]:checked").removeAttr("checked"),
                        a.applyFinancingToCart(),
                        a.isPaymentOptionFinance = !0
                },
            !a.isLoggedIn || a.contact && (a.contact.email || a.contact.phone) || e.getUserProfile().then(function(e) {
                e = JSON.parse(e),
                e && e.emailaddress && (a.contact || (a.contact = {}), a.contact.email = e.emailaddress, a.contact.phone = e.cellPhone || e.telePhone || e.workPhone, a.userEmail = e.emailaddress, a.billing || (a.billing = {}), a.billing.email = a.contact.email, a.billing.phone = a.contact.phone, a.$digest()),
                    a.getUserProfileDone = !0,
                    a.fireCheckoutTags()
            })
        }]),
    checkoutApp.controller("CardInfoCtrlv3", ["CheckoutService", "constants", "errors", "updateUtilities", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "$timeout",
        function(e, t, n, i, r, a, o, s, c, l, d, p) {
            function u() {
                var e = {},
                    t = "PUT";
                e.method = t,
                    e.url = SCart.URL.EXISTING_PAYMENT_V3_URL(SCart.shoppingCartTransformService.shoppingCartId, !0),
                    e.handler = "addPaymentHandler";
                var n = {};
                n.billing_info = r.selectedPayment.billing_info,
                    n.billing_record = {},
                    n.billing_record.billing_record_id = r.selectedPayment.id,
                    n.billing_record.account_provider = r.selectedPayment.account_provider,
                    e.payload = n,
                    a.paymentCTA = e
            }
            a.linkSectionMode,
                a.states = ["State", "AL", "AK", "AS", "AZ", "AR", "CA", "CO", "CT", "DE", "DC", "FM", "FL", "GA", "GU", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MH", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "MP", "OH", "OK", "OR", "PW", "PA", "PR", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VI", "VA", "WA", "WV", "WI", "WY"],
                a.shippingStates = ["State", "AL", "AK", "AS", "AZ", "AR", "CA", "CO", "CT", "DE", "DC", "FM", "FL", "GA", "GU", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MH", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "MP", "OH", "OK", "OR", "PW", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY"],
                a.paymentSource = o.payment_source,
                a.isFinancingOn = "finance" == o.payment_source ? !0 : !1,
                r.validate = function(e) {
                    e["class"] = e.$invalid ? "error focus": "focus valid",
                        e.$dirty = !0
                },
                r.validateState = function(e, t) {
                    e.$setValidity("unselect", t != a.states[0]),
                        e["class"] = e.$invalid ? "error focus": "focus valid",
                        e.$dirty = !0
                },
                r.zipcodelookup = function(n) {
                    e.ziplookup(n, t.PAGECONTEXT.PAYMENT_INFO).then(function(e) {
                        e && e.city_state_list && e.city_state_list.length > 0 && (a.billing.city = e.city_state_list[0].city, a.billing.state_or_province = e.city_state_list[0].state_or_province, a.$digest(), $("select").selectric(), $("#_billingaddressInfo_userState").blur(), $("#_billingaddressInfo_userCity").blur())
                    }).E401(function(e) {
                        a.promptReLogin(e)
                    })
                },
                r.onFocus = i.formOnFocus,
                r.$watch("cardForm.$valid",
                    function() {
                        r.cardForm && (r.cardFormvalid = r.cardForm.$valid)
                    }),
                r.onDRCCSuccess = function() {
                    e.refreshCart({
                        context: t.PAGECONTEXT.PAYMENT_INFO
                    }).then(function(e) {
                        a.refreshCart(e, !1),
                            a.addedPayment = e.payment,
                            r.onPaymentComplete()
                    }).fail(function(e) {
                        a.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description),
                            console.error(e)
                    })
                },
                r.manageIframeMessage = function() {
                    function e(e) {
                        "success" == e.data.message ? ($(".spinner_container").hide(), r.onDRCCSuccess()) : "failure" == e.data.message ? ($(".spinner_container").hide(), a.$broadcast("paymentStepError", n.iFrameError.title, n.iFrameError.description)) : "showSpinner" == e.data.message ? $(".spinner_container").show() : "hideSpinner" == e.data.message && $(".spinner_container").hide()
                    }
                    var t;
                    t = new Porthole.WindowProxy("", "cardFormFrame"),
                        t.addEventListener(e)
                },
                r.newCreditCard = function() {
                    if (window.utag && utag.link({
                            link_cat: "add payment method",
                            link_id: "payment_information_payment_method_add_CreditCard",
                            link_meta: "link_name:CreditCard",
                            link_position: "payment information>add payment method"
                        }), a.isLoggedIn && (a.billing.email = a.contact.email, a.billing.phone = a.contact.phone), r.selectedPayment = void 0, r.isPaypal = !1, a.isPaymentOptionFinance = !1, $(".credit-card-details").show(), $(".billing-address-details").show(), $("input[name=payMethod]:checked").removeAttr("checked"), r.scrollToCCSection(), a.isPaymentSourceDR) {
                        $("#btnPaymentCnt").hide();
                        var n = $("#cardFormFrame"),
                            i = n.attr("src");
                        i && i.length > 0 ? (r.scrollToCCSection(), r.manageIframeMessage()) : e.getPaymentUiUrl(t.PAGECONTEXT.PAYMENT_INFO).then(function(e) {
                            e && e.url && ($(".spinner_container").show(), $("#cardFormFrame").attr("src", e.url), r.scrollToCCSection(), r.manageIframeMessage())
                        })
                    }
                },
                r.paypal = function(t) {
                    window.utag && utag.link({
                        link_cat: "add payment method",
                        link_id: t ? "payment_information_payment_method_add_PaypalCredit": "payment_information_payment_method_add_Paypal",
                        link_meta: t ? "link_name:PaypalCredit": "link_name:Paypal",
                        link_position: "payment information>add payment method"
                    }),
                        a.isPaymentOptionFinance = !1,
                        $(".credit-card-details").hide(),
                        $(".billing-address-details").hide(),
                        $("input[name=payMethod]:checked").removeAttr("checked"),
                    a.isPaymentSourceDR && $("#btnPaymentCnt").show(),
                        r.isPaypal = !0,
                        r.isPaypalCredit = t,
                    $(window).width() >= 768 && $(".order-summary-holder").find(".sticky-holder").addClass("bottom"),
                        e.getPaypalUrl(!a.isLoggedIn, r.isPaypalCredit).then(function(e) {
                            if (e && e.payment && e.payment.paypal) {
                                var t = e.payment.paypal.redirect_url.split("/");
                                _.forEach(t,
                                    function(e) {
                                        if ( - 1 != e.indexOf("token")) {
                                            var t = e.split("token=");
                                            a.paypalToken = t[1]
                                        }
                                    })
                            }
                        }).fail(function(e) {
                            a.isPaypalError = !0,
                                console.error(e)
                        })
                },
                r.zipCodeKeyUp = function(e) {
                    e.$invalid || r.zipcodelookup(e.$modelValue)
                },
                r.onPaymentSelect = function(e) {
                    window.utag && utag.link({
                        link_cat: "select payment method",
                        link_id: "payment_information_payment_method_select_CreditCard",
                        link_meta: "link_name:CreditCard",
                        link_position: "payment information>select payment method"
                    }),
                        r.selectedPayment = e,
                        r.newCard = !1,
                        r.isPaypal = !1,
                        a.isPaymentOptionFinance = !1,
                        $("input[name=_paymentTypes]:checked").removeAttr("checked"),
                        $(".credit-card-details").hide(),
                        $(".billing-address-details").hide(),
                    a.isPaymentSourceDR && $("#btnPaymentCnt").show()
                },
                a.contPayment = function() {
                    var e;
                    if (e = a.getPaymentMethod(r.isPaypal, r.isPaypalCredit), window.utag && utag.link({
                            link_cat: "payment method",
                            link_id: "checkout_payment_information_payment_method_" + e,
                            link_meta: "link_name:" + e,
                            link_position: "payment information>" + e
                        }), null != r.selectedPayment || r.cardFormvalid || r.isPaypal) {
                        if (r.isPaypal) return r.handlePaypal();
                        r.selectedPayment || (r.newCard = !0, r.selectedPayment = r.cardInfo),
                        a.billing.line2 && "" != a.billing.line2 || (a.billing = _.omit(a.billing, "line2")),
                        a.disableSaveCard() && (r.cardInfo.saveCard = !0),
                        r.newCard && (!a.billing.email && a.shoppingCart.shipping_info.email && (a.billing.email = a.shoppingCart.shipping_info.email), !a.billing.phone && a.shoppingCart.shipping_info.phone && (a.billing.phone = a.shoppingCart.shipping_info.phone)),
                            r.addPayment(a.billing, r.selectedPayment, r.newCard, r.cardInfo.saveCard)
                    }
                },
                r.onPaymentComplete = function() {
                    a.paymentMode = "view",
                        a.paymentSource = "",
                    a.selectedAddress && a.shippingSameAsBilling && (a.selectedAddress = a.addedPayment.billing_info),
                        a.$broadcast("contactInfoUpdated"),
                        a.$digest(),
                        "view" == a.shippingMode && "view" == a.paymentMode ? setTimeout(function() {
                                $("html, body").animate({
                                        scrollTop: $(".checkout-payment-forms-holder").offset().top
                                    },
                                    "slow")
                            },
                            200) : setTimeout(function() {
                                $("html, body").animate({
                                        scrollTop: $(".checkout-payment-forms-holder").offset().top
                                    },
                                    "slow")
                            },
                            200)
                },
                r.handlePaypal = function() {
                    e.getPaypalUrl(!a.isLoggedIn, r.isPaypalCredit).then(function(e) {
                        e && e.payment && e.payment.paypal && ($(".spinner_container").show(), $(".spinner_container").addClass("preloader-paypal"), $(".spinner_container").append('<div class="preloader-paypal-msg">We are redirecting you to PayPal. Please be patient. The estimated taxes will change based on your shipping address.</div>'), window.location.href = e.payment.paypal.redirect_url),
                            $(".credit-card-details").hide(),
                            $(".billing-address-details").hide()
                    }).fail(function(e) {
                        a.$broadcast("paymentStepError", "We could not process your request at this time.", "Please try again with a different payment option."),
                            console.error(e),
                        window.utag && utag.link({
                            link_cat: "paypal error response",
                            link_id: "checkout_payment_information_paypal_error_response",
                            link_meta: "link_name:paypal error response",
                            link_position: "payment information"
                        })
                    })
                },
                r.$on("cartAvailable",
                    function() {
                        a.isPaymentSourceDR && e.getPaymentUiUrl().then(function(e) {
                            if (e && e.url) {
                                var t = $("#cardFormFrame");
                                t && t.length > 0 && t.attr("src", e.url)
                            }
                        })
                    }),
                r.$on("profileInfoAvailable",
                    function() {
                        r.selectedPayment || (a.billing.email || (a.billing.email = a.contact.email), a.billing.phone || (a.billing.phone = a.contact.phone), r.blurFields())
                    }),
                r.$on("onUserLogin",
                    function() {
                        if (a.isPaymentSourceDR) {
                            var t = $("#cardFormFrame");
                            t && t.length > 0 && t.removeAttr("src")
                        }
                        a.onErrorClose(),
                            e.getUserProfile().then(function(e) {
                                e = JSON.parse(e),
                                e && e.emailaddress && (a.contact || (a.contact = {}), a.contact.email = e.emailaddress, a.contact.phone = e.cellPhone || e.telePhone || e.workPhone, a.userEmail = e.emailaddress, a.billing || (a.billing = {}), a.billing.email = a.contact.email, a.billing.phone = a.contact.phone, a.$broadcast("addressInfo"), a.$digest())
                            })
                    }),
                r.addPayment = function(t, i, o, s) {
                    e.addPayment(t, i, o, !a.isLoggedIn, s).then(function(e) {
                        a.addedPayment = e.payment,
                            r.onPaymentComplete()
                    }).E400(function(e) {
                        a.$broadcast("paymentStepError", n.InvalidCreditCard.title, n.InvalidCreditCard.description),
                            console.error(e)
                    }).E401(function(e) {
                        a.promptReLogin(e),
                            console.error(e)
                    }).E409(function(e) {
                        e = JSON.parse(e.responseText),
                            "line-item-creation-failure" == e.error ? a.$broadcast("paymentStepError", n.InventoryUnavailableError.title, n.InventoryUnavailableError.description) : "ItemOutOfStock" == e.error ? a.$broadcast("paymentStepError", n.ItemOutOfStock.title, n.ItemOutOfStock.description) : a.$broadcast("paymentStepError", n.InvalidCreditCard.title, n.InvalidCreditCard.description),
                            r.selectedPayment = null
                    }).fail(function(e) {
                        console.error(e),
                        window.utag && utag.link({
                            link_cat: "CC error response",
                            link_id: "checkout_payment_information_CC_error_response",
                            link_meta: "link_name:CC error response",
                            link_position: "payment position"
                        }),
                            a.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description),
                            r.selectedPayment = null
                    })
                },
                r.onPaymentEdit = function() {
                    r.selectedPayment = a.addedPayment,
                        a.billing = _.clone(a.addedPayment.billing_info),
                    a.addedPayment && a.addedPayment.billing_record_id && p(function() {
                            $("#" + a.addedPayment.billing_record_id).trigger("click")
                        },
                        0),
                        $("input[name=payMethod]:checked").length > 0 ? $("input[id=_paymentTypeCC]:checked").removeAttr("checked") : r.selectedPayment = void 0,
                    0 == $("input[id=_paymentTypeCC]:checked").length && ($(".credit-card-details").hide(), $(".billing-address-details").hide()),
                        a.paymentMode = "edit",
                        $(".checkout-payment-forms .input-control").addClass("focus"),
                        p(function() {
                            a.$digest(),
                                $("#_billingaddressInfo_userState").selectric()
                        })
                },
                r.scrollToCCSection = function() {
                    setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $(".credit-card-details").offset().top
                                },
                                "slow"),
                                r.blurFields()
                        },
                        200)
                },
                r.blurFields = function() {
                    a.billing.email && ($("#_billingaddressInfo_userEmail").focus().blur(), $("#_billingaddressInfo_userEmail").parents(".input-control").addClass("focus")),
                    a.billing.phone && ($("#_billingaddressInfo_userPhoneNo").focus().blur(), $("#_billingaddressInfo_userPhoneNo").parents(".input-control").addClass("focus"))
                },
                r.openLinkSection = function() {
                    a.linkSectionMode = "edit"
                },
                r.blurFields(),
            !a.financingPubKey && a.isFinancingOn && "P" == a.financingStatus && e.getFinancingPubKey(t.PAGECONTEXT.COMMON).then(function(e) {
                a.financingPubKey = e
            }),
                r.linkTDAccount = function() {
                    e.linkTDAccount(r.TDlinkForm, t.PAGECONTEXT.CART_INFO).then(function(e) {
                        var t = e.td_bank_finance.td_bank_existing_account.response.credit_application_response; ! t.application_status || "A" != t.application_status && "P" != t.application_status && "D" != t.application_status ? e.td_bank_finance.td_bank_existing_account.response.error && -1 != e.td_bank_finance.td_bank_existing_account.response.error.message.indexOf("FinanceAdapterRequestPayloadDecryptionFailed") ? a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description) : a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description) : (a.financingDetails = t, a.financingStatus = t.application_status, a.isSufficientCredit = t.available_credit > a.shoppingCart.cost.total.amount ? !0 : !1, a.applyFinancingToCart()),
                            a.$digest()
                    }).fail(function(e) {
                        var t = JSON.parse(e.responseText);
                        "FinanceAdapterRequestPayloadDecryptionFailed" == t.error ? a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description) : a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description)
                    })
                },
                r.changePayment = function() {
                    a.linkSectionMode = "view"
                },
                r.payFinancing = function() {
                    $("input[name=payMethod]:checked").removeAttr("checked"),
                        a.applyFinancingToCart(),
                        a.isPaymentOptionFinance = !0
                },
                r.sameAsShipping = function() {
                    $("#_sameAsShipAddress").prop("checked") ? a.shoppingCart && a.shoppingCart.shipping_info && (a.billing = a.shoppingCart.shipping_info) : (a.billing = void 0, a.billing = {}),
                        p(function() {
                            $(".billing-address-details").trigger("click"),
                                a.$digest(),
                                $("#_sameAsShipAddress").prop("checked") ? a.shoppingCart && a.shoppingCart.shipping_info && ($(".checkout-form-fields input").focus().blur(), $("#_billingaddressInfo_userState").blur(), $("#_billingaddressInfo_userState").selectric()) : (a.billing.state_or_province = a.states[0], $("#_billingaddressInfo_userState").selectric(), r.cardForm.state.$setPristine(!1))
                        })
                },
                r.addNewPayment = function() {
                    a.paymentMode = "edit",
                        a.billing = void 0,
                        a.cardInfo = {},
                        a.billing = {},
                        r.selectedPayment = void 0,
                        $("#_sameAsShipAddress").removeAttr("checked"),
                        a.billing.state_or_province = a.states[0],
                        p(function() {
                            a.$digest(),
                                $("#_billingaddressInfo_userState").selectric()
                        })
                },
            !a.isLoggedIn || a.contact && (a.contact.email || a.contact.phone) || e.getUserProfile().then(function(e) {
                e = JSON.parse(e),
                e && e.emailaddress && (a.contact || (a.contact = {}), a.contact.email = e.emailaddress, a.contact.phone = e.cellPhone || e.telePhone || e.workPhone, a.userEmail = e.emailaddress, a.billing || (a.billing = {}), a.billing.email = a.contact.email, a.billing.phone = a.contact.phone, a.$broadcast("userProfileAvailable"), a.$digest()),
                    a.getUserProfileDone = !0,
                    a.fireCheckoutTags()
            }),
                r.$on("disablePaypal",
                    function() {
                        r.newCreditCard()
                    }),
                a.selectDefaultPayment = function() {
                    a.isLoggedIn && a.savedPayments.length > 0 && !a.shoppingCart.payment && "finance" != o.payment_source && ($("#saved-cc").eq(0).find("input").prop("checked", !0), r.onPaymentSelect(a.savedPayments[0]), u()),
                        a.applyShippingAndPayment(t.CHECKOUT_SECTION.PAYMENT),
                        p(function() {
                            a.$digest()
                        })
                },
                $("#_billingaddressInfo_userState").on("selectric-before-close",
                    function() {
                        $("#_billingaddressInfo_userState").blur()
                    })
        }]),
    checkoutApp.controller("CartPaymentCtrl", ["CheckoutService", "financingService", "constants", "errors", "updateUtilities", "$timeout", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location",
        function(e, t, n, i, r, a, o, s, c, l, d, p, u) {
            var f = new MobileDetect(window.navigator.userAgent),
                h = function(e, t) {
                    return Number(Math.round(e + "e" + t) + "e-" + t)
                };
            if ($(".prefetch_spinner_container").hide(), o.changeHeader = function() {
                    $(".gnb-b2c-promo-wrapper").hide(),
                    (!f.mobile() || $(window).width() > 767) && ($(".gnb-b2c-mnav").append('<div class=".gnb-b2c-mnav checkout-payment-title for-desktop" id="checkout-header"></div>'), $("#checkout-header").siblings().hide(), $(".gnb-b2c-icons").hide())
                },
                    o.changeHeader(), o.payment = {},
                    s.billingFormvalid = !1, s.shippingFormvalid = !1, s.cardFormvalid = !1, s.contactFormvalid = !1, s.shippingMode = "disabled", s.shippingMethodMode = "disabled", s.paymentMode = "edit", s.paymentSource = c.payment_source, s.$watch("shippingMode + paymentMode + addedPayment",
                    function() {
                        s.placeOrderEnabled = !s.cost || 0 != s.cost.total.amount || s.anyPremiumCareSubscriptionCart() || s.cartHasSubscription() ? "view" == s.shippingMode && "view" == s.paymentMode && s.addedPayment && !(s.addedPayment.paypal && "TxFailed" == s.addedPayment.paypal.paypal_status && (!s.isHAinCart || s.haAvailableInPaypalAddress)) : "view" == s.shippingMode && "disabled" == s.paymentMode,
                        s.placeOrderEnabled && $(".checkout-payment-placeorder").find(".btn-checkout").css({
                            transform: "translate3d(0,0,0)"
                        })
                    }), s.isEppRedirect()) return void(window.location.href = window.SCart.URL.CHECKOUT_URL());
            s.registerUtag(),
                o.isPaypalRoute = function() {
                    return "paypal" == s.paymentSource || "paypal-error" == s.paymentSource
                },
                o.init = function() {
                    s.signin || (s.signin = {}),
                    s.contact || (s.contact = {}),
                    s.cardInfo || (s.cardInfo = {}),
                    s.address || (s.address = {}),
                    s.billing || (s.billing = {})
                },
                o.getSavedAddress = function() {
                    e.getSavedShippingAddress(n.PAGECONTEXT.COMMON).then(function(e) {
                        s.savedAddress = e,
                            s.$digest(),
                            o.getSavedAddressDone = !0,
                            s.fireCheckoutTags()
                    })
                },
                o.getSavedPayments = function() {
                    e.getSavedPayments(n.PAGECONTEXT.COMMON).then(function(e) {
                        s.savedPayments = e,
                            s.$digest(),
                            o.getSavedPaymentsDone = !0,
                            s.fireCheckoutTags()
                    })
                };
            var g = function(e) {
                    return e && 0 == e.line_items
                },
                m = function() {
                    u.path().indexOf("/cart-info/") < 0 && u.path("/cart-info/")
                },
                y = function(e) {
                    s.$broadcast("refreshCart", e, !0),
                    s.anyPremiumCareSubscriptionCart() || s.cartHasSubscription() || s.zerodollarchange(),
                        s.setPaymentOptions(),
                        o.initMode(e),
                        s.setFinancingDetails(e),
                    s.isLoggedIn && (o.getSavedAddress(), o.getSavedPayments(), "finance" == c.payment_source && s.getCreditDetails("payment")),
                        s.$broadcast("saveImpression", s.shoppingCart, "new ecom step2|checkout"),
                        s.$broadcast("cartAvailable")
                };
            o.$on("refreshCart",
                function(e, t, n) {
                    s.refreshCart(t, n),
                    g(t) && m()
                }),
                o.$on("onUserLogin",
                    function() {
                        o.paymentPageActions()
                    }),
                o.initMode = function(t) {
                    s.haAvailableInPaypalAddress = !1;
                    var r = !1,
                        c = !1,
                        l = function() {
                            t.shipping_info ? (s.contact.email = t.shipping_info.email, s.contact.phone = t.shipping_info.phone) : t.billing_info && (s.contact.email = t.billing_info.email, s.contact.phone = t.billing_info.phone)
                        },
                        d = function() {
                            if (0 != t.cost.total.amount || s.anyPremiumCareSubscriptionCart() || s.cartHasSubscription()) {
                                if (t.payment && t.payment.billing_info && "TDFinancing" != t.payment.payment_method && (!t.payment.paypal || "TxSuccess" == t.payment.paypal.paypal_status)) {
                                    var e = !0;
                                    t.payment.paypal && !t.is_paypal_auth_valid && (e = !1, s.addedPayment = null),
                                    e && (s.addedPayment = t.payment, s.paymentMode = "view", s.shippingMode = "edit")
                                }
                            } else s.paymentMode = "disabled",
                                s.addedPayment = {};
                            o.isPaypalRoute() && t.payment && t.payment.paypal ? "TxSuccess" == t.payment.paypal.paypal_status && "paypal-error" != s.paymentSource || "TxInitiated" == t.payment.paypal.paypal_status ? (s.paymentSource = "paypal", s.isHAinCart && f(!0)) : (s.paymentSource = "paypal-error", t.payment.paypal.paypal_status = "TxFailed", $(".checkout-payment-cc-details").hide(), s.$broadcast("paymentStepError", "Error during Paypal payment option.", "Please try some other payment option.")) : s.paymentSource = ""
                        },
                        p = function() {
                            t.shipping_info && (s.addedPayment || t.cost && t.cost.total.amount == h(t.cost.shipping.amount + t.cost.tax.amount, 2) && null == s.addedPayment) ? (r = !0, s.contact.email || (s.contact.email = t.shipping_info.email), s.contact.phone || (s.contact.phone = t.shipping_info.phone), s.selectedAddress = t.shipping_info, s.shippingMode = "view", s.shippingMethodMode = "edit") : s.addedPayment && !t.shipping_info && t.payment && t.payment.paypal && "TxSuccess" == t.payment.paypal.paypal_status && ("paypal" == s.paymentSource && s.$broadcast("paymentStepError", i.EmptyShippingInPaypal.title, i.EmptyShippingInPaypal.description), s.addedPayment = void 0, s.hidePaypal = !0, s.paymentSource = "", s.paymentMode = "edit", s.shippingMode = "disabled")
                        },
                        u = function() {
                            t.shipping_method && s.selectedAddress && (c = !0, s.selectedShippingMethod = t.shipping_method, s.shippingMethodMode = "edit")
                        },
                        f = function(r) {
                            var a = _.filter(s.cartItems,
                                function(e) {
                                    return e.attributes.is_ha_delivery
                                }),
                                c = _.pluck(a, "sku_id");
                            e.getAvailableHomeDeliveryDates(c, t.shipping_info.postal_code, n.PAGECONTEXT.COMMON).then(function(e) {
                                e.length > 0 ? r ? (o.haAvailableInPaypalAddress = !0, s.placeOrderEnabled = !0) : g() : (r ? (o.haAvailableInPaypalAddress = !1, s.placeOrderEnabled = !1, s.addedPayment = void 0, s.hidePaypal = !1, s.paymentSource = "", s.paymentMode = "edit", s.shippingMode = "disabled", s.selectedAddress = void 0, s.shippingMethodMode = "disabled") : (s.selectedAddress = void 0, s.shippingMode = "edit"), s.$broadcast("paymentStepError", i.homeDeliveryPaymentError.title, i.homeDeliveryPaymentError.description)),
                                    s.$digest()
                            }).E400(function() {
                                s.$broadcast("paymentStepError", i.homeDeliveryError.title, i.homeDeliveryError.description)
                            }).E401(function() {
                                s.$broadcast("paymentStepError", i.homeDeliveryError.title, i.homeDeliveryError.description)
                            }).E404(function() {
                                s.$broadcast("paymentStepError", i.homeDeliveryError.title, i.homeDeliveryError.description)
                            }).fail(function() {
                                o.$digest(),
                                    s.$broadcast("paymentStepError", i.homeDeliveryError.title, i.homeDeliveryError.description)
                            })
                        },
                        g = function() {
                            p(),
                                u(),
                                a(function() {
                                    r && s.$broadcast("addressUpdated", t, c),
                                        s.$digest()
                                })
                        };
                    l(),
                        d(),
                        s.isHAinCart && t.shipping_info ? f(!1) : g()
                };
            var v = function() {
                var t = !1;
                e.getCartItems(n.PAGECONTEXT.COMMON, t).then(function(e) {
                    o.getCartDone = !0,
                        s.fireCheckoutTags(),
                        y(e)
                }).fail(function() {
                    s.$broadcast("paymentStepError", "We are unable to process your request at this time.", "Please try after sometime. Sorry for the inconvenience.");

                })
            };
            o.paymentPageActions = function() {
                if (s.financeSelected = !1, u.path().indexOf("/finance") > 0 && (s.financeSelected = !0), "paypal" != s.paymentSource && "paypal-error" != s.paymentSource && v(), o.isPaypalRoute()) {
                    var t = "paypal" == c.payment_source ? "success": "cancelled";
                    e.refreshCart({
                        status: t,
                        context: n.PAGECONTEXT.PAYMENT_INFO
                    }).then(function(e) {
                        window.paypalLoaderText = !1,
                            y(e),
                        !e.payment || !e.payment.paypal || "TxSuccess" != e.payment.paypal.paypal_status || e.payment.billing_info && e.shipping_info || s.$broadcast("paymentStepError", i.InvalidShippingInPaypal.title, i.InvalidShippingInPaypal.description)
                    }).E409(function(e) {
                        e = JSON.parse(e.responseText),
                            v(),
                            "InvalidShippingAddress" == e.error ? s.$broadcast("paymentStepError", i.InvalidShippingInPaypal.title, i.InvalidShippingInPaypal.description) : s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description)
                    }).E404(function(e) {
                        e = JSON.parse(e.responseText),
                            v(),
                            "AddressNotFound" == e.error || "InvalidCity" == e.error ? s.$broadcast("paymentStepError", i.InvalidShippingInPaypal.title, i.InvalidShippingInPaypal.description) : s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description)
                    }).E401(function(e) {
                        v(),
                            s.promptReLogin(e)
                    }).fail(function(e) {
                        console.log("checkout error:" + e),
                            v(),
                            s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description)
                    })
                }
                "paypal-error" == s.paymentSource && ($(".checkout-payment-cc-details").hide(), s.$broadcast("paymentStepError", "Error during Paypal payment option.", "Please try some other payment option.")),
                s.shoppingCart && s.cartItems && (o.initMode(s.shoppingCart), s.$broadcast("cartAvailable")),
                    e.getShoppingCartPubKey(n.PAGECONTEXT.COMMON).then(function(e) {
                        o.getPubKeyDone = !0,
                            s.fireCheckoutTags(),
                            s.shoppingCartPubKey = e
                    }),
                    o.init(),
                    a(function() {
                            $("select").selectric()
                        },
                        0)
            },
                s.fireCheckoutTags = function() {
                    var e = new Date; ! s.isLoggedIn && o.getCartDone && o.getPubKeyDone && (newrelic.fireCustomPageLoadTag("checkout-pageload-guest", ((e.getTime() - s.checkoutCallTriggerTime) / 1e3).toFixed(2)), o.getCartDone = !1, o.getPubKeyDone = !1),
                    s.isLoggedIn && o.getCartDone && o.getPubKeyDone && o.getSavedAddressDone && o.getSavedPaymentsDone && s.getUserProfileDone && (newrelic.fireCustomPageLoadTag("checkout-pageload-loggedInUser", ((e.getTime() - s.checkoutCallTriggerTime) / 1e3).toFixed(2)), o.getCartDone = !1, o.getPubKeyDone = !1, o.getSavedAddressDone = !1, o.getSavedPaymentsDone = !1, s.getUserProfileDone = !1)
                };
            var C = $.cookie("remoteId");
            C && "undefined" != C ? e.validateAuthToken(C).then(function(e) {
                var t = JSON.parse(e);
                "valid" != t.status ? (s.checkoutLoginMessage = i.ReLogin.title, window.SCart.sessionIdValid = !1, s.$digest()) : o.paymentPageActions()
            }).fail(function() {
                s.checkoutLoginMessage = i.ReLogin.title,
                    window.SCart.sessionIdValid = !1,
                    s.setRedirectPostLogin(p.current.$$route.name),
                    window.location.href = window.SCart.URL.CHECKOUT_URL(),
                    s.$digest()
            }) : o.paymentPageActions(),
                a(function() {
                        o.$digest()
                    },
                    0)
        }]),
    checkoutApp.controller("ContactInfoCtrl", ["CheckoutService", "constants", "errors", "$timeout", "updateUtilities", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location",
        function(e, t, n, i, r, a, o, s, c, l, d, p) {
            a.getuserInfo = function(t) {
                o.isLoggedIn = window.isLogin(),
                    o.userName = window.getUserName(),
                    o.isGuest = !1,
                    o.contact.email = t,
                    o.contact.phone = "",
                    e.getUserProfile().then(function(e) {
                        e = JSON.parse(e),
                            o.contact.phone = e.cellPhone || e.telePhone || e.workPhone,
                        o.contact.phone && a.changeMode(),
                            o.$broadcast("profileInfoAvailable")
                    }),
                    o.$digest(),
                    $(".checkout-user-login-box").animate({
                            opacity: 0
                        },
                        500),
                    $(".checkout-user-login-box").hide(),
                    window.GNB ? window.GNB.init() : window.gnbNavigation && window.gnbNavigation.init(),
                    o.$broadcast("onUserLogin"),
                    $(".checkout-user-login-box-holder").slideToggle()
            },
                a.login = function() {
                    userName = o.signin.email,
                        password = o.signin.pswd,
                        userName = userName.toLowerCase(),
                        $(".generic-error").hide(),
                        SAuth.signIn(userName, password).then(function(e) {
                            e = JSON.parse(e),
                                e && e.token ? SAuth.authenticate(e.token, "hardcodedName").then(function(e) {
                                    a.getuserInfo(userName),
                                        r.suppressUpSellIt()
                                }).fail(function(e) {
                                    console.log("Invalid Login")
                                }) : (console.log("Invalid Login"), o.$broadcast("paymentStepError", n.LoginError.title, n.LoginError.description))
                        }).fail(function(e) {
                            console.log("Invalid Login")
                        })
                },
                a.onForgotPassowrd = function() {
                    $(".generic-error").hide();
                    window.open("https://sso-us.samsung.com/sso/profile/requestPassword.action?reqtype=resettkn", "ForgotPassword", "width=375,height=465")
                },
                a.validate = function(e) {
                    e["class"] = e.$invalid ? "error focus": "focus valid",
                    "Email" != e.$name || e.$invalid || (o.signin.email = e.$modelValue, o.contact.email = e.$modelValue),
                        e.$dirty = !0
                },
                a.onFocus = r.formOnFocus,
                a.validateCreds = function(e) {
                    a.anotherEventFired = !1,
                        a.input = e,
                        i(function() {
                                a.anotherEventFired || a.validate(e)
                            },
                            200)
                },
                a.saveContactInfo = function(n, i) {
                    var r = {
                        email: n,
                        phone: i
                    };
                    e.saveCustomAttributes(r, t.PAGECONTEXT.CONTACT_INFO)
                },
                a.changeMode = function() {
                    $(".generic-error").hide(),
                        a.saveContactInfo(o.contact.email, o.contact.phone),
                        o.$broadcast("contactInfoUpdated"),
                        a.scrollToNext()
                },
                a.scrollToNext = function() {
                    "view" == o.shippingMode && "view" == o.paymentMode && o.focusOnShippingMethods ? setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $("#_place_order").offset().top
                                },
                                "slow")
                        },
                        200) : "view" != o.shippingMode || "view" != o.paymentMode || o.focusOnShippingMethods ? setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $("#_card_info").offset().top
                                },
                                "slow")
                        },
                        200) : setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $("#_shipping_method").offset().top
                                },
                                "slow")
                        },
                        200)
                },
                a.toggleLogin = function() {
                    $(".generic-error").hide(),
                        a.anotherEventFired = !0,
                        $(".checkout-user-login-box-holder").slideToggle(),
                    window.utag && utag.link({
                        link_cat: "login",
                        link_id: "checkout_contact_information_login",
                        link_meta: "link_name:login",
                        link_position: "guest checkout>contact information"
                    })
                },
                a.cancel = function() {
                    $(".generic-error").hide(),
                        a.anotherEventFired = !0,
                        $(".checkout-user-login-box-holder").slideToggle(),
                    window.utag && utag.link({
                        link_cat: "back",
                        link_id: "checkout_contact_information_back_to_guest_checkout",
                        link_meta: "link_name:back to guest checkout",
                        link_position: "checkout>contact information>login to your samsung account"
                    })
                }
        }]),
    checkoutApp.controller("CartPaymentCtrlv3", ["CheckoutService", "financingService", "constants", "errors", "updateUtilities", "$timeout", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location",
        function(e, t, n, i, r, a, o, s, c, l, d, p, u) {
            var f = new MobileDetect(window.navigator.userAgent);
            if ($(".prefetch_spinner_container").hide(), o.changeHeader = function() {
                    $(".gnb-b2c-promo-wrapper").hide(),
                    (!f.mobile() || $(window).width() > 767) && ($(".gnb-b2c-mnav").append('<div class=".gnb-b2c-mnav checkout-payment-title for-desktop" id="checkout-header"></div>'), $("#checkout-header").siblings().hide(), $(".gnb-b2c-icons").hide())
                },
                    o.changeHeader(), o.payment = {},
                    s.billingFormvalid = !1, s.shippingFormvalid = !1, s.cardFormvalid = !1, s.contactFormvalid = !1, s.paymentSource = c.payment_source, s.$watch("shippingMode + paymentMode + addedPayment",
                    function() {
                        s.placeOrderEnabled = !s.cost || 0 != s.cost.total.amount || s.anyPremiumCareSubscriptionCart() || s.cartHasSubscription() ? "view" == s.shippingMode && "view" == s.paymentMode && s.addedPayment && !(s.addedPayment.paypal && "TxFailed" == s.addedPayment.paypal.paypal_status && (!s.isHAinCart || s.haAvailableInPaypalAddress)) : "view" == s.shippingMode && "disabled" == s.paymentMode
                    }), s.isEppRedirect()) return void(window.location.href = window.SCart.URL.CHECKOUT_URL());
            s.registerUtag(),
                o.isPaypalRoute = function() {
                    return "paypal" == s.paymentSource || "paypal-error" == s.paymentSource
                },
                o.init = function() {
                    s.signin || (s.signin = {}),
                    s.contact || (s.contact = {}),
                    s.cardInfo || (s.cardInfo = {}),
                    s.address || (s.address = {}),
                    s.billing || (s.billing = {})
                },
                o.getSavedAddress = function() {
                    e.getSavedShippingAddress(n.PAGECONTEXT.COMMON).then(function(e) {
                        s.savedAddress = e,
                            o.shippingDone = !1,
                            s.selectDefaultAddress(),
                            s.$digest(),
                            o.getSavedAddressDone = !0,
                            s.fireCheckoutTags()
                    })
                },
                o.getSavedPayments = function() {
                    e.getSavedPayments(n.PAGECONTEXT.COMMON).then(function(e) {
                        s.savedPayments = e,
                            o.paymentDone = !1,
                            s.selectDefaultPayment(),
                            s.$digest(),
                            o.getSavedPaymentsDone = !0,
                            s.fireCheckoutTags()
                    })
                };
            var h = function(e) {
                    return e && 0 == e.line_items
                },
                g = function() {
                    u.path().indexOf("/cart-info/") < 0 && u.path("/cart-info/")
                },
                m = function(e, t) {
                    s.$broadcast("refreshCart", e, !0),
                    s.anyPremiumCareSubscriptionCart() || s.cartHasSubscription() || s.zerodollarchange(),
                        s.setPaymentOptions(),
                        o.initMode(e),
                        s.setFinancingDetails(e),
                    s.isLoggedIn && !t && (o.getSavedAddress(), o.getSavedPayments(), "finance" == c.payment_source && s.getCreditDetails("payment")),
                        s.$broadcast("saveImpression", s.shoppingCart, "new ecom step2|checkout"),
                        s.$broadcast("cartAvailable")
                };
            o.$on("refreshCart",
                function(e, t, n) {
                    s.refreshCart(t, n),
                    h(t) && g()
                }),
                o.$on("onUserLogin",
                    function() {
                        o.paymentPageActions()
                    }),
                o.initMode = function(t) {
                    s.haAvailableInPaypalAddress = !1;
                    var r = !1,
                        c = !1,
                        l = function() {
                            s.contact = s.contact || {},
                                t.shipping_info ? (s.contact.email = t.shipping_info.email, s.contact.phone = t.shipping_info.phone) : t.billing_info && (s.contact.email = t.billing_info.email, s.contact.phone = t.billing_info.phone)
                        },
                        d = function() {
                            if (0 != t.cost.total.amount || s.anyPremiumCareSubscriptionCart() || s.cartHasSubscription()) if (!t.payment || !t.payment.billing_info || "TDFinancing" == t.payment.payment_method || t.payment.paypal && "TxSuccess" != t.payment.paypal.paypal_status) s.paymentMode = "edit",
                                s.shippingMode = "edit",
                                s.shippingMethodMode = "edit";
                            else {
                                var e = !0;
                                t.payment.paypal && !t.is_paypal_auth_valid && (e = !1, s.addedPayment = null),
                                e && (s.addedPayment = t.payment, s.paymentMode = "view")
                            } else s.paymentMode = "disabled",
                                s.addedPayment = {};
                            o.isPaypalRoute() && t.payment && t.payment.paypal ? "TxSuccess" != t.payment.paypal.paypal_status || "paypal-error" == s.paymentSource ? (s.paymentSource = "paypal-error", t.payment.paypal.paypal_status = "TxFailed", $(".checkout-payment-cc-details").hide(), s.$broadcast("paymentStepError", "Error during Paypal payment option.", "Please try some other payment option.")) : (s.paymentSource = "paypal", s.isHAinCart && f(!0)) : s.paymentSource = ""
                        },
                        p = function() {
                            t.shipping_info ? (r = !0, s.contact.email || (s.contact.email = t.shipping_info.email), s.contact.phone || (s.contact.phone = t.shipping_info.phone), s.selectedAddress = t.shipping_info, s.shippingMode = "view") : s.addedPayment && !t.shipping_info && t.payment && t.payment.paypal && "TxSuccess" == t.payment.paypal.paypal_status && ("paypal" == s.paymentSource && s.$broadcast("paymentStepError", i.EmptyShippingInPaypal.title, i.EmptyShippingInPaypal.description), s.addedPayment = void 0, s.hidePaypal = !0, s.paymentSource = "", s.paymentMode = "edit", s.shippingMode = "disabled")
                        },
                        u = function() {
                            t.shipping_method && s.selectedAddress && (c = !0, s.selectedShippingMethod = t.shipping_method, s.shippingMethodMode = "view")
                        },
                        f = function(r) {
                            var a = _.filter(s.cartItems,
                                function(e) {
                                    return e.attributes.is_ha_delivery
                                }),
                                c = _.pluck(a, "sku_id");
                            e.getAvailableHomeDeliveryDates(c, t.shipping_info.postal_code, n.PAGECONTEXT.COMMON).then(function(e) {
                                e.length > 0 ? r ? (o.haAvailableInPaypalAddress = !0, s.placeOrderEnabled = !0) : h() : (r ? (o.haAvailableInPaypalAddress = !1, s.placeOrderEnabled = !1, s.addedPayment = void 0, s.hidePaypal = !1, s.paymentSource = "", s.paymentMode = "edit", s.shippingMode = "edit", s.selectedAddress = void 0, s.shippingMethodMode = "edit") : (s.selectedAddress = void 0, s.shippingMode = "edit", s.paymentMode = "edit"), s.estimatedDeliveryDateMsg = "Major Appliance delivery not available for zipcode " + t.shipping_info.postal_code, s.$broadcast("paymentStepError", i.homeDeliveryPaymentError.title, i.homeDeliveryPaymentError.description, !0)),
                                    s.$digest()
                            }).E400(function(e) {
                                e = JSON.parse(e.responseText),
                                    s.$broadcast("paymentStepError", i.homeDeliveryError.title, i.homeDeliveryError.description)
                            }).E401(function() {
                                s.$broadcast("paymentStepError", i.homeDeliveryError.title, i.homeDeliveryError.description)
                            }).E404(function(e) {
                                e = JSON.parse(e.responseText),
                                    s.$broadcast("paymentStepError", i.homeDeliveryError.title, i.homeDeliveryError.description)
                            }).fail(function() {
                                o.$digest(),
                                    s.$broadcast("paymentStepError", i.homeDeliveryError.title, i.homeDeliveryError.description)
                            })
                        },
                        h = function() {
                            p(),
                                u(),
                                a(function() {
                                    r && s.$broadcast("addressUpdated", t, c),
                                        s.$broadcast("shippingOptionsFetched", t, c),
                                        s.$digest()
                                })
                        };
                    l(),
                        d(),
                        s.isHAinCart && t.shipping_info ? f(!1) : h()
                };
            var y = function(t) {
                var i = !1;
                e.getCartItems(n.PAGECONTEXT.COMMON, i).then(function(e) {
                    o.getCartDone = !0,
                        s.fireCheckoutTags(),
                        m(e, t)
                }).fail(function() {
                    s.$broadcast("paymentStepError", "We are unable to process your request at this time.", "Please try after sometime. Sorry for the inconvenience.")
                })
            };
            o.paymentPageActions = function() {
                if (s.financeSelected = !1, u.path().indexOf("/finance") > 0 && (s.financeSelected = !0), "paypal" != s.paymentSource && "paypal-error" != s.paymentSource && y(), o.isPaypalRoute()) {
                    var t = "paypal" == c.payment_source ? "success": "cancelled";
                    e.refreshCart({
                        status: t,
                        context: n.PAGECONTEXT.PAYMENT_INFO
                    }).then(function(e) {
                        window.paypalLoaderText = !1,
                            m(e),
                        !e.payment || !e.payment.paypal || "TxSuccess" != e.payment.paypal.paypal_status || e.payment.billing_info && e.shipping_info || s.$broadcast("paymentStepError", i.InvalidShippingInPaypal.title, i.InvalidShippingInPaypal.description)
                    }).E409(function(e) {
                        e = JSON.parse(e.responseText),
                            y(),
                            "InvalidShippingAddress" == e.error ? s.$broadcast("paymentStepError", i.InvalidShippingInPaypal.title, i.InvalidShippingInPaypal.description) : s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description)
                    }).E401(function(e) {
                        y(),
                            s.promptReLogin(e)
                    }).fail(function(e) {
                        console.log("checkout error:" + e),
                            y(),
                            s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description)
                    })
                }
                "paypal-error" == s.paymentSource && ($(".checkout-payment-cc-details").hide(), s.$broadcast("paymentStepError", "Error during Paypal payment option.", "Please try some other payment option.")),
                s.shoppingCart && s.cartItems && (o.initMode(s.shoppingCart), s.$broadcast("cartAvailable")),
                    e.getShoppingCartPubKey(n.PAGECONTEXT.COMMON).then(function(e) {
                        o.getPubKeyDone = !0,
                            s.fireCheckoutTags(),
                            s.shoppingCartPubKey = e
                    }),
                    o.init(),
                    a(function() {
                            $("select").selectric()
                        },
                        0)
            },
                s.fireCheckoutTags = function() {
                    var e = new Date; ! s.isLoggedIn && o.getCartDone && o.getPubKeyDone && (newrelic.fireCustomPageLoadTag("checkout-pageload-guest", ((e.getTime() - s.checkoutCallTriggerTime) / 1e3).toFixed(2)), o.getCartDone = !1, o.getPubKeyDone = !1),
                    s.isLoggedIn && o.getCartDone && o.getPubKeyDone && o.getSavedAddressDone && o.getSavedPaymentsDone && s.getUserProfileDone && (newrelic.fireCustomPageLoadTag("checkout-pageload-loggedInUser", ((e.getTime() - s.checkoutCallTriggerTime) / 1e3).toFixed(2)), o.getCartDone = !1, o.getPubKeyDone = !1, o.getSavedAddressDone = !1, o.getSavedPaymentsDone = !1, s.getUserProfileDone = !1)
                };
            var v = $.cookie("remoteId");
            v && "undefined" != v ? e.validateAuthToken(v).then(function(e) {
                var t = JSON.parse(e);
                "valid" != t.status ? (s.checkoutLoginMessage = i.ReLogin.title, window.SCart.sessionIdValid = !1, s.$digest()) : o.paymentPageActions()
            }).fail(function() {
                s.checkoutLoginMessage = i.ReLogin.title,
                    window.SCart.sessionIdValid = !1,
                    s.setRedirectPostLogin(p.current.$$route.name),
                    window.location.href = window.SCart.URL.CHECKOUT_URL(),
                    s.$digest()
            }) : o.paymentPageActions(),
                a(function() {
                        o.$digest()
                    },
                    0),
                o.isCartPaymentFinancing = function() {
                    return s.shoppingCart && s.shoppingCart.payment && s.shoppingCart.payment.payment_method ? s.shoppingCart.payment.payment_method.toUpperCase() == n.TD_FINANCING_PAYMENT_METHOD: void 0
                },
                s.placeOrder = function() {
                    var t = $.cookie("remoteId");
                    t && "undefined" != t ? e.validateAuthToken(t).then(function(t) {
                        var r = JSON.parse(t);
                        "valid" == r.status ? o.isCartPaymentFinancing() ? e.getFinancingStatus(n.PAGECONTEXT.CART_FINANCE).then(function(e) {
                            _.forEach(e,
                                function(e) {
                                    "EComProgram" == e.finance_program && (s.financingDetails = e, s.financingDetails.available_credit < s.shoppingCart.cost.total.amount ? (s.$broadcast("paymentStepError", i.PaymentNeedToBeReApplied.title, i.PaymentNeedToBeReApplied.description), s.paymentMode = "edit", a(function() {
                                            s.$digest()
                                        },
                                        0)) : s.handleCheckout())
                                })
                        }) : s.handleCheckout() : (s.checkoutLoginMessage = i.ReLogin.title, s.redirectPostLogin = n.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER, window.SCart.sessionIdValid = !1, window.location.href = window.SCart.URL.CHECKOUT_URL(), s.$digest())
                    }).fail(function() {
                        s.checkoutLoginMessage = i.ReLogin.title,
                            s.redirectPostLogin = n.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER,
                            window.SCart.sessionIdValid = !1,
                            window.location.href = window.SCart.URL.CHECKOUT_URL(),
                            s.$digest()
                    }) : s.handleCheckout()
                };
            var C = window.location.hostname;
            o.paypalEnv = "production",
            ( - 1 != C.indexOf("devus") || -1 != C.indexOf("stgwww") || -1 != C.indexOf("stgweb") || -1 != C.indexOf("local")) && (o.paypalEnv = "sandbox"),
                o.client = o.paypalEnv,
                o.payment = function() {
                    return s.paypalToken
                },
                o.onAuthorize = function(t) {
                    var r = t && t.paymentToken ? "success": "cancelled";
                    e.refreshCart({
                        status: r,
                        context: n.PAGECONTEXT.PAYMENT_INFO
                    }).then(function(e) {
                        window.paypalLoaderText = !1,
                            m(e, !0),
                        !e.payment || !e.payment.paypal || "TxSuccess" != e.payment.paypal.paypal_status || e.payment.billing_info && e.shipping_info || s.$broadcast("paymentStepError", i.InvalidShippingInPaypal.title, i.InvalidShippingInPaypal.description)
                    }).E409(function(e) {
                        e = JSON.parse(e.responseText),
                            y(!0),
                            "InvalidShippingAddress" == e.error ? s.$broadcast("paymentStepError", i.InvalidShippingInPaypal.title, i.InvalidShippingInPaypal.description) : s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description)
                    }).E404(function(e) {
                        e = JSON.parse(e.responseText),
                            y(!0),
                            "AddressNotFound" == e.error || "InvalidCity" == e.error ? s.$broadcast("paymentStepError", i.InvalidShippingInPaypal.title, i.InvalidShippingInPaypal.description) : s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description)
                    }).E401(function(e) {
                        y(!0),
                            s.promptReLogin(e)
                    }).fail(function(e) {
                        console.log("checkout error:" + e),
                            y(!0),
                            s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description)
                    })
                },
                o.getAvailableDatesForOrder = function(t) {
                    e.getAvailableDatesForOrder(t, n.PAGECONTEXT.THANKYOU_PAGE).then(function(e) {
                        e && e.length > 0 ? (s.earliestDate = e[0], o.scheduleInstallationForOrder(t)) : o.orderConfirmationPage()
                    }).fail(function() {
                        o.orderConfirmationPage()
                    })
                },
                o.orderConfirmationPage = function() {
                    a(function() {
                        u.path("/order-confirm/" + s.cartId)
                    })
                },
                o.scheduleInstallationForOrder = function(t) {
                    var i = {};
                    "object" == typeof s.earliestDate ? (i.request_delivery_date = s.earliestDate.start_date, s.earliestDate.end_date && s.earliestDate.start_date != s.earliestDate.end_date && (i.end_date = s.earliestDate.end_date)) : i.request_delivery_date = s.earliestDate,
                        e.scheduleInstallation(t, i, n.PAGECONTEXT.ORDER).then(function(e) {
                            e.data.options && (s.earliestDate = e.data.options.request_delivery_date),
                                s.shoppingCart.options = e.data.options,
                                o.orderConfirmationPage()
                        }).fail(function() {
                            s.earliestDate = "",
                                o.orderConfirmationPage()
                        })
                },
                s.handleCheckout = function() {
                    var t = new Date;
                    s.submitCartCallTriggerTime = t.getTime(),
                        e.checkout(!s.isLoggedIn, n.PAGECONTEXT.ORDER).then(function(e) {
                            if (s.orderId = e.displayOrderId, s.selectedShippingMethod = e.shipping_method, e.shipping_method && (s.selectedShippingMethod.displayText = s.shippingOptionsText[e.shipping_method.description]), s.shippingAddress = e.shipping_info, s.addedPayment = e.payment, s.refreshCart(e, !1), s.cartId = e.cart_id, s.isHAinCart ? s.earliestDate ? o.scheduleInstallationForOrder(e.cart_id) : o.getAvailableDatesForOrder(e.cart_id) : o.orderConfirmationPage(), $(".cart-basket").text(""), s.isIE() ? ($(".gnb-b2c-icons-cart a svg").remove(), $(".gnb-b2c-icons-cart a").prepend('<svg viewBox="0 0 100 100" id="cart-open"><circle cx="28" cy="90" r="10"/><circle cx="86" cy="90" r="10"/><path d="M86 14v42H28V13.86C28 6.205 21.794 0 14.14 0H0v14h14v42c0 7.732 6.268 14 14 14h58c7.732 0 14-6.268 14-14V14H86z"/></svg>')) : $(".gnb-b2c-icons-cart a svg use").attr("xlink:href", "/us/resources/navigation/assets/images/sprite.symbol.svg#cart-open"), $.cookie("s_ecom_sc_cnt", 0, {
                                    path: "/",
                                    domain: ".samsung.com"
                                }), s.$digest(), "object" == typeof newrelic) {
                                var t = new Date;
                                newrelic.fireCustomPageLoadTag("order-confirm-checkout", ((t.getTime() - s.submitCartCallTriggerTime) / 1e3).toFixed(2))
                            }
                            o.$apply()
                        }).E405(function(e) {
                            s.utagLink(),
                                e = JSON.parse(e.responseText),
                            e && s.isJsonString(e.message) && (e = JSON.parse(e.message)),
                                i[e.error] ? s.$broadcast("paymentStepError", i[e.error].title, i[e.error].description) : s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description)
                        }).E409(function(t) {
                            s.utagLink(),
                                t = JSON.parse(t.responseText),
                            t && s.isJsonString(t.message) && (t = JSON.parse(t.message)),
                                "PurchaseFlowCannotBeModified" == t.error ? s.$broadcast("paymentStepError", i.PurchaseFlowCannotBeModified.title, i.PurchaseFlowCannotBeModified.description) : "CartHasChanged" == t.error ? s.$broadcast("paymentStepError", i.CartHasBeenChanged.title, i.CartHasBeenChanged.description) : "CartPaymentFailure" == t.error ? s.$broadcast("paymentStepError", i.CartPaymentFailure.title, i.CartPaymentFailure.description) : "InventoryUnavailable" == t.error || "HasOutOfStockItems" == t.error || "SoftAllocationFailed" == t.error ? t.message ? s.$broadcast("paymentStepError", i.OutOfStockOnSubmitCart.title, t.message) : t.shopping_cart && o.handleOutOfStock(t.shopping_cart) : "PromoCodeError" == t.error ? s.$broadcast("paymentStepError", i.PromoCodeError.title, i.PromoCodeError.description) : "AssurantWarrantyInfoIsRequired" == t.error || "InvalidAssurantOrder" == t.error ? s.$broadcast("paymentStepError", i.AssurantWarrantyInfoIsRequired.title, i.AssurantWarrantyInfoIsRequired.description) : "CartChangedDuringOrderSubmission" == t.error ? e.getCartItems(n.PAGECONTEXT.CART_CHANGED).then(function(e) {
                                    s.$broadcast("paymentStepError", i.CartChangedDuringOrderSubmission.title, i.CartChangedDuringOrderSubmission.description),
                                        s.refreshCart(e)
                                }).fail(function() {
                                    s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description)
                                }) : "PaymentOptionNotSavedForTradeIn" == t.error ? s.$broadcast("paymentStepError", "Error during place order.", "Please try again after some time.") : "CartNotComplete" == t.error ? s.$broadcast("paymentStepError", i.CartNotComplete.title, i.CartNotComplete.description) : "PromoNotApplicableWithoutTradeIn" == t.error ? s.$broadcast("paymentStepError", i.PromoNotApplicableWithoutTradeIn.title, i.PromoNotApplicableWithoutTradeIn.description) : "CartLineItemLimitReached" == t.error ? s.$broadcast("paymentStepError", i.CartLineItemLimitReached.title, i.CartLineItemLimitReached.description) : "InvalidSamsungUpgradeCart" == t.error ? s.$broadcast("paymentStepError", i.InvalidSamsungUpgradeCart.title, i.InvalidSamsungUpgradeCart.description) : "InvalidUpgradeLineItem" == t.error ? s.$broadcast("paymentStepError", i.InvalidUpgradeLineItem.title, i.InvalidUpgradeLineItem.description) : "CartSkuLimitReached" == t.error ? s.$broadcast("paymentStepError", i.CartSkuLimitReached.title, i.CartSkuLimitReached.description) : "MultipleSUPOrdersInDay" == t.error ? s.$broadcast("paymentStepError", i.MultipleSUPOrdersInDay.title, i.MultipleSUPOrdersInDay.description) : "PaymentNeedToBeReApplied" == t.error || "CartReplayed" == t.error ? (s.$broadcast("paymentStepError", i.PaymentNeedToBeReApplied.title, i.PaymentNeedToBeReApplied.description), s.paymentMode = "edit", $("#_paymentTypeCC").prop("checked", !0), a(function() {
                                        s.$digest()
                                    },
                                    0)) : s.$broadcast("paymentStepError", "Error during place order.", "Please try again after some time.")
                        }).E401(function(e) {
                            s.redirectPostLogin = n.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER,
                                s.promptReLogin(e)
                        }).E400(function(e) {
                            s.utagLink(),
                                s.$broadcast("paymentStepError", i.SubmitCartError.title, i.SubmitCartError.description)
                        }).fail(function(e) {
                            s.utagLink(),
                                s.paymentSource = "",
                                s.$digest(),
                                s.$broadcast("paymentStepError", "Error during place order.", "Please try again after some time.")
                        })
                },
                o.computeCTA = function() {
                    o.shippingDone = !1,
                        o.paymentDone = !1;
                    var t = [];
                    s.paymentCTA && s.cost && 0 != s.cost.total.amount && (t = t.concat(s.paymentCTA)),
                    s.shippingCTA && (t = t.concat(s.shippingCTA)),
                    t && t.length > 0 && e.shoppingCartCTA(t, "apply-payment-call").then(function(e) {
                        delete s.paymentCTA,
                            delete s.shippingCTA;
                        var t = e.length;
                        if (t > 0) {
                            var n = e[t - 1];
                            s.$broadcast("refreshCart", n, !1),
                            n.payment && ("TDFinancing" != n.payment.payment_method || "TDFinancing" == n.payment.payment_method && "finance" == c.payment_source) && (s.addedPayment = n.payment, s.paymentMode = "view", s.paymentSource = ""),
                            n.shipping_info && (s.$broadcast("contactInfoUpdated"), s.$broadcast("addressApplied"), s.selectedAddress || (s.selectedAddress = o.address), s.selectedAddress.phone = n.shipping_info.phone, s.selectedAddress.email = n.shipping_info.email, s.$broadcast("addressUpdated", n), s.shippingMode = "view", s.focusOnShippingMethods = !1),
                            s.isHAinCart && s.$broadcast("isHomeDeliveryAvailableShippingMethod", s.addedPayment.billing_info.postal_code, !0),
                                s.$digest()
                        }
                    }).addPaymentHandler(function(e) {
                        delete s.paymentCTA,
                            delete s.shippingCTA;
                        var t = e.status;
                        400 == t ? s.$broadcast("paymentStepError", i.InvalidCreditCard.title, i.InvalidCreditCard.description) : 401 == t ? s.promptReLogin(e) : 409 == t ? s.$broadcast("paymentStepError", i.InvalidCreditCard.title, i.InvalidCreditCard.description) : (window.utag && utag.link({
                            link_cat: "CC error response",
                            link_id: "checkout_payment_information_CC_error_response",
                            link_meta: "link_name:CC error response",
                            link_position: "payment position"
                        }), s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description))
                    }).addShippingAddressHandler(function(e) {
                        delete s.paymentCTA,
                            delete s.shippingCTA;
                        var t = {},
                            n = e.status;
                        400 == n ? (t = JSON.parse(e.responseText), t = t.error || JSON.parse(t.message).error, "DisallowedShippingAddress" == t ? s.$broadcast("paymentStepError", i.DisallowedShippingAddress.title, i.DisallowedShippingAddress.description) : "DisallowedPostalCode" == t ? s.$broadcast("paymentStepError", i.ShippingDisallowedPostalCode.title, i.ShippingDisallowedPostalCode.description) : "DisallowedShippingCity" == t ? s.$broadcast("paymentStepError", i.DisallowedShippingCity.title, i.DisallowedShippingCity.description) : "DisallowedShippingState/Province" == t ? s.$broadcast("paymentStepError", i.DisallowedShippingStateProvince.title, i.DisallowedShippingStateProvince.description) : s.$broadcast("paymentStepError", i.BadRequestDefaultError.title, i.BadRequestDefaultError.description)) : 401 == n ? s.promptReLogin(e) : 404 == n || (409 == n ? (t = JSON.parse(e.responseText), t = t.error || JSON.parse(t.message).error, "PurchaseFlowCannotBeModified" == t ? s.$broadcast("paymentStepError", i.PurchaseFlowCannotBeModified.title, i.PurchaseFlowCannotBeModified.description) : "ItemOutOfStock" == t ? s.$broadcast("paymentStepError", i.ItemOutOfStock.title, i.ItemOutOfStock.description) : s.$broadcast("paymentStepError", i.AddressAlreadyInAddressList.title, i.AddressAlreadyInAddressList.description)) : s.$broadcast("paymentStepError", "Error in validating shipping address", "The provided shipping address is not allowed"))
                    }).fail(function() {
                        delete s.paymentCTA,
                            delete s.shippingCTA,
                            s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description)
                    })
                },
                s.applyShippingAndPayment = function(e) {
                    e == n.CHECKOUT_SECTION.SHIPPING ? o.shippingDone = !0 : e == n.CHECKOUT_SECTION.PAYMENT && (o.paymentDone = !0),
                    o.shippingDone && o.paymentDone && o.computeCTA()
                }
        }]),
    checkoutApp.controller("PaymentInfoCtrl", ["PaymentService", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location",
        function(e, t, n, i, r, a, o, s) {
            t.updatePayOption = function(e) {
                n.cardOption = "Credit or Debit Card" != e ? !1 : !0
            }
        }]),
    checkoutApp.controller("PlaceorderCtrl", ["PaymentService", "constants", "CheckoutService", "updateUtilities", "errors", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "$timeout", "calendarUtil",
        function(e, t, n, i, r, a, o, s, c, l, d, p, u, f) {
            o.redirectPostLogin = o.redirectPostLogin || null,
                o.utagLink = function() {
                    window.utag && utag.link({
                        link_cat: "validation error",
                        link_id: "checkout_validation_error",
                        link_meta: "link_name:validation_error",
                        link_position: "checkout"
                    })
                },
                o.placeOrder = function() {
                    if (o.placeOrderEnabled) {
                        var e = $.cookie("remoteId");
                        e && "undefined" != e ? n.validateAuthToken(e).then(function(e) {
                            var n = JSON.parse(e);
                            "valid" == n.status ? o.handleCheckout() : (o.checkoutLoginMessage = r.ReLogin.title, o.redirectPostLogin = t.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER, window.SCart.sessionIdValid = !1, window.location.href = window.SCart.URL.CHECKOUT_URL(), o.$digest())
                        }).fail(function(e) {
                            o.checkoutLoginMessage = r.ReLogin.title,
                                o.redirectPostLogin = t.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER,
                                window.SCart.sessionIdValid = !1,
                                window.location.href = window.SCart.URL.CHECKOUT_URL(),
                                o.$digest()
                        }) : o.handleCheckout()
                    }
                },
                a.getAvailableDatesForOrder = function(e) {
                    n.getAvailableDatesForOrder(e, t.PAGECONTEXT.THANKYOU_PAGE).then(function(t) {
                        t && t.length > 0 ? (o.earliestDate = t[0], a.scheduleInstallationForOrder(e)) : a.orderConfirmationPage()
                    }).fail(function(e) {
                        a.orderConfirmationPage()
                    })
                },
                a.orderConfirmationPage = function() {
                    u(function() {
                        p.path("/order-confirm/" + o.cartId)
                    })
                },
                a.scheduleInstallationForOrder = function(e) {
                    var i = {};
                    "object" == typeof o.earliestDate ? (i.request_delivery_date = o.earliestDate.start_date, o.earliestDate.end_date && o.earliestDate.start_date != o.earliestDate.end_date && (i.end_date = o.earliestDate.end_date)) : i.request_delivery_date = o.earliestDate,
                        n.scheduleInstallation(e, i, t.PAGECONTEXT.ORDER).then(function(e) {
                            e.data.options && (o.earliestDate = e.data.options.request_delivery_date),
                                o.shoppingCart.options = e.data.options,
                                a.orderConfirmationPage()
                        }).fail(function(e) {
                            o.earliestDate = "",
                                a.orderConfirmationPage()
                        })
                },
                o.handleCheckout = function() {
                    var e = new Date;
                    o.submitCartCallTriggerTime = e.getTime(),
                        n.checkout(!o.isLoggedIn, t.PAGECONTEXT.ORDER).then(function(e) {
                            if (o.orderId = e.displayOrderId, o.selectedShippingMethod = e.shipping_method, e.shipping_method && (o.selectedShippingMethod.displayText = o.shippingOptionsText[e.shipping_method.description]), o.shippingAddress = e.shipping_info, o.addedPayment = e.payment, o.refreshCart(e, !1), o.cartId = e.cart_id, o.isHAinCart ? o.earliestDate ? a.scheduleInstallationForOrder(e.cart_id) : a.getAvailableDatesForOrder(e.cart_id) : a.orderConfirmationPage(), $(".cart-basket").text(""), o.isIE() ? ($(".gnb-b2c-icons-cart a svg").remove(), $(".gnb-b2c-icons-cart a").prepend('<svg viewBox="0 0 100 100" id="cart-open"><circle cx="28" cy="90" r="10"/><circle cx="86" cy="90" r="10"/><path d="M86 14v42H28V13.86C28 6.205 21.794 0 14.14 0H0v14h14v42c0 7.732 6.268 14 14 14h58c7.732 0 14-6.268 14-14V14H86z"/></svg>')) : $(".gnb-b2c-icons-cart a svg use").attr("xlink:href", "/us/resources/navigation/assets/images/sprite.symbol.svg#cart-open"), $.cookie("s_ecom_sc_cnt", 0, {
                                    path: "/",
                                    domain: ".samsung.com"
                                }), o.$digest(), "object" == typeof newrelic) {
                                var t = new Date;
                                newrelic.fireCustomPageLoadTag("order-confirm-checkout", ((t.getTime() - o.submitCartCallTriggerTime) / 1e3).toFixed(2))
                            }
                            a.$apply()
                        }).E405(function(e) {
                            o.utagLink(),
                                e = JSON.parse(e.responseText),
                            e && o.isJsonString(e.message) && (e = JSON.parse(e.message)),
                                r[e.error] ? o.$broadcast("paymentStepError", r[e.error].title, r[e.error].description) : o.$broadcast("paymentStepError", r.defaultError.title, r.defaultError.description)
                        }).E409(function(e) {
                            o.utagLink(),
                                e = JSON.parse(e.responseText),
                            e && o.isJsonString(e.message) && (e = JSON.parse(e.message)),
                                "PurchaseFlowCannotBeModified" == e.error ? o.$broadcast("paymentStepError", r.PurchaseFlowCannotBeModified.title, r.PurchaseFlowCannotBeModified.description) : "CartHasChanged" == e.error ? o.$broadcast("paymentStepError", r.CartHasBeenChanged.title, r.CartHasBeenChanged.description) : "CartPaymentFailure" == e.error ? o.$broadcast("paymentStepError", r.CartPaymentFailure.title, r.CartPaymentFailure.description) : "InventoryUnavailable" == e.error || "HasOutOfStockItems" == e.error || "SoftAllocationFailed" == e.error ? e.message ? o.$broadcast("paymentStepError", r.OutOfStockOnSubmitCart.title, e.message) : e.shopping_cart && a.handleOutOfStock(e.shopping_cart) : "PromoCodeError" == e.error ? o.$broadcast("paymentStepError", r.PromoCodeError.title, r.PromoCodeError.description) : "AssurantWarrantyInfoIsRequired" == e.error || "InvalidAssurantOrder" == e.error ? o.$broadcast("paymentStepError", r.AssurantWarrantyInfoIsRequired.title, r.AssurantWarrantyInfoIsRequired.description) : "CartChangedDuringOrderSubmission" == e.error ? n.getCartItems(t.PAGECONTEXT.CART_CHANGED).then(function(e) {
                                    o.$broadcast("paymentStepError", r.CartChangedDuringOrderSubmission.title, r.CartChangedDuringOrderSubmission.description),
                                        o.refreshCart(e)
                                }).fail(function() {
                                    o.$broadcast("paymentStepError", r.defaultError.title, r.defaultError.description)
                                }) : "PaymentOptionNotSavedForTradeIn" == e.error ? o.$broadcast("paymentStepError", "Error during place order.", "Please try again after some time.") : "CartNotComplete" == e.error ? o.$broadcast("paymentStepError", r.CartNotComplete.title, r.CartNotComplete.description) : "PromoNotApplicableWithoutTradeIn" == e.error ? o.$broadcast("paymentStepError", r.PromoNotApplicableWithoutTradeIn.title, r.PromoNotApplicableWithoutTradeIn.description) : o.$broadcast("paymentStepError", "Error during place order.", "Please try again after some time.");

                        }).E401(function(e) {
                            o.redirectPostLogin = t.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER,
                                o.promptReLogin(e)
                        }).E400(function(e) {
                            o.utagLink(),
                                o.$broadcast("paymentStepError", r.SubmitCartError.title, r.SubmitCartError.description)
                        }).fail(function(e) {
                            o.utagLink(),
                                o.paymentSource = "",
                                o.$digest(),
                                o.$broadcast("paymentStepError", "Error during place order.", "Please try again after some time.")
                        })
                },
                a.handleOutOfStock = function(e) {
                    o.submitAlert = e.user_alerts,
                        o.refreshCart(e)
                },
            o.redirectPostLogin == t.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER && (o.redirectPostLogin = null, o.placeOrder())
        }]),
    checkoutApp.controller("SamsungSignInCtrl", ["PaymentService", "updateUtilities", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location",
        function(e, t, n, i, r, a, o, s, c) {
            n.login = function() {
                userName = i.signin.email,
                    password = i.signin.pswd,
                    SAuth.signIn(userName, password).then(function(e) {
                        e = JSON.parse(e),
                            e && e.token ? SAuth.authenticate(e.token, "hardcodedName").then(function(e) {
                                i.isLoggedIn = window.isLogin(),
                                    i.userName = window.getUserName(),
                                    i.isGuest = !1,
                                    n.toggleLogin(),
                                    i.$digest(),
                                    t.suppressUpSellIt(),
                                    window.GNB ? window.GNB.init() : window.gnbNavigation && window.gnbNavigation.init(),
                                    i.$broadcast("onUserLogin")
                            }).fail(function(e) {
                                console.log("Invalid Login")
                            }) : (console.log("Invalid Login"), $(".btn-login").notify("Invalid Email Address/Password", {
                                position: "t c",
                                className: "error"
                            }))
                    }).fail(function(e) {
                        console.log("Invalid Login")
                    })
            },
                n.validate = function(e) {
                    e["class"] = e.$invalid ? "error focus": "focus valid",
                        e.$dirty = !0
                },
                n.toggleLogin = function() {
                    $(".checkout-user-login-box").toggle()
                },
                n.onForgotPassowrd = function() {
                    window.open("https://sso-us.samsung.com/sso/profile/requestPassword.action?reqtype=resettkn", "ForgotPassword", "width=375,height=465")
                },
                n.onFocus = t.formOnFocus
        }]),
    checkoutApp.controller("UserAddressInfoCtrl", ["CheckoutService", "constants", "errors", "updateUtilities", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location",
        function(e, t, n, i, r, a, o, s, c, l, d) {
            function p(e) {
                var t = e.siblings(".existing-shipping-address").find(".delete-section");
                _.each(t,
                    function(e) {
                        u(!1, $(e))
                    })
            }
            function u(e, t) {
                e ? (t.find(".btn-remove").hide(), t.find(".delete-dialogue-box").show()) : (t.find(".btn-remove").show(), t.find(".delete-dialogue-box").hide())
            }
            function f(n) {
                e.deleteShippingAddress(n, t.PAGECONTEXT.SHIPPING_INFO).then(function(e) {
                    $("." + n).parent().hide()
                }).fail(function(e) {
                    a.$broadcast("paymentStepError", "Error in deleting shipping address", "Please try again")
                })
            }
            r.haNotAvailable = !1;
            var h = function() {
                a.isLoggedIn && (r.address.email || (r.address.email = a.contact.email), r.address.phone || (r.address.phone = a.contact.phone)),
                    r.blurshipping()
            };
            r.$watch("shippingForm.$valid",
                function() {
                    r.shippingFormvalid = r.shippingForm.$valid
                }),
                r.address = void 0,
                r.contactUpdate = !1,
                r.zipcodelookup = function(n) {
                    e.ziplookup(n, t.PAGECONTEXT.SHIPPING_INFO).then(function(e) {
                        e && e.city_state_list && e.city_state_list.length > 0 && (r.address.city = e.city_state_list[0].city, r.address.state_or_province = e.city_state_list[0].state_or_province, r.$digest(), $("select").selectric(), $("#_addressInfo_userState").blur(), $("#_addressInfo_userCity").blur())
                    })
                },
                r.zipCodeKeyUp = function(e) {
                    e.$invalid || (r.zipcodelookup(e.$modelValue), "edit" == a.shippingMode && a.isHAinCart && r.isHomeDeliveryAvailableShipping(e.$modelValue, !0))
                },
                r.$on("isHomeDeliveryAvailableShippingMethod",
                    function(e, t) {
                        r.isHomeDeliveryAvailableShipping(t, !1)
                    }),
                r.isHomeDeliveryAvailableShipping = function(o, s) {
                    r.haNotAvailable = !1,
                        a.estimatedDeliveryDateToShow = "",
                        a.estimatedDeliveryDateMsg = "";
                    var c = _.filter(a.cartItems,
                        function(e) {
                            return e.attributes.is_ha_delivery
                        });
                    c && c.length > 0 && (r.whereToBuyUrl = c[0].attributes.product_details_page_url + "-buy/");
                    var l = _.pluck(c, "sku_id");
                    e.getAvailableHomeDeliveryDates(l, o, t.PAGECONTEXT.ORDER_SUMMARY).then(function(e) {
                        a.availableDeliveryDates = e,
                            e.length > 0 ? (a.earliestDate = e[0], r.haNotAvailable = !1) : (a.earliestDate = void 0, r.haNotAvailable = !0, s ? $("#_addressInfo_userZipCode").blur() : a.$broadcast("paymentStepError", n.homeDeliveryNotAvailable.title, n.homeDeliveryNotAvailable.description)),
                            a.$digest(),
                            a.earliestDate ? a.estimatedDeliveryDateToShow = "object" == typeof a.earliestDate ? i.formatDateString(a.earliestDate.start_date, t.DATE_FORMAT1) : i.formatDateString(a.earliestDate, t.DATE_FORMAT1) : a.estimatedDeliveryDateMsg = "Major Appliance delivery not available for zipcode " + o
                    }).E400(function(e) {
                        r.haNotAvailable = !0,
                            a.$broadcast("paymentStepError", n.homeDeliveryError.title, n.homeDeliveryError.description)
                    }).E401(function(e) {
                        r.haNotAvailable = !0,
                            a.$broadcast("paymentStepError", n.homeDeliveryError.title, n.homeDeliveryError.description)
                    }).E404(function(e) {
                        r.haNotAvailable = !0,
                            a.$broadcast("paymentStepError", n.homeDeliveryError.title, n.homeDeliveryError.description)
                    }).fail(function(e) {
                        r.haNotAvailable = !0,
                            a.$digest(),
                            a.$broadcast("paymentStepError", n.homeDeliveryError.title, n.homeDeliveryError.description)
                    })
                },
                r.onFormChange = function(e) {
                    r.addressInvalid && r.alternateAddress && (r.formChanged = !0),
                        r.overrideValidation = !1,
                        a.selectedAddress = null,
                        $("input[name=alterAddr]:checked").removeAttr("checked")
                },
                r.onSameAddress = function(e) {
                    a.isHAinCart && r.isHomeDeliveryAvailableShipping(e.postal_code, !1),
                        u(!1, $(".billing-address-as-shipping")),
                        p($(".billing-address-as-shipping")),
                        r.address = e,
                        r.addressInvalid = !1,
                        r.shippingForm.state.$setValidity("unselect", !0),
                        r.overrideValidation = !1,
                        r.formChanged = !1,
                        a.selectedAddress = void 0,
                        r.shippingFormvalid = !0,
                        r.alternateAddress = null,
                        a.shippingSameAsBilling = !0,
                        $(".add_new_addr").hide(),
                        $(".add-new-shipping-address").show(),
                        $("#shipping_addr").find(".input-control").removeClass("error")
                },
                r.onAddrSelect = function(e) {
                    a.isHAinCart && r.isHomeDeliveryAvailableShipping(e.postal_code, !1),
                        u(!1, $("." + e.id)),
                        p($("." + e.id).parent()),
                        r.overrideValidation = !0,
                        r.addressInvalid = !1,
                        r.formChanged = !1,
                        a.selectedAddress = e,
                        r.address = {},
                        r.alternateAddress = null,
                        a.shippingSameAsBilling = !1,
                    0 != a.cost.total.amount || a.anyPremiumCareSubscriptionCart() || a.cartHasSubscription() || $(".add_phone_email").hide(),
                        $(".add_new_addr").hide(),
                        $(".add-new-shipping-address").show()
                },
                r.addNewAddr = function() {
                    p($(".add-new-shipping-address")),
                        r.overrideValidation = !1,
                        r.haNotAvailable = !1,
                        r.formChanged = !1,
                        r.address = {},
                    null != a.addedPayment && a.addedPayment.billing_info && (r.address.phone = a.addedPayment.billing_info.phone, r.address.email = a.addedPayment.billing_info.email),
                    0 != a.cost.total.amount || a.anyPremiumCareSubscriptionCart() || a.cartHasSubscription() || $(".add_phone_email").show(),
                        h(),
                        r.address.state_or_province = a.states[0],
                        a.selectedAddress = void 0,
                        r.alternateAddress = null,
                        a.shippingSameAsBilling = !1,
                        $("input[name=addr]:checked").removeAttr("checked"),
                        $(".add_new_addr").toggle(),
                        $(".add-new-shipping-address").hide()
                },
                r.validate = function(e) {
                    e["class"] = e.$invalid ? "error focus": "focus valid",
                        e.$dirty = !0
                },
                r.validateZipCode = function(e) {
                    r.haNotAvailable = e.$invalid ? !1 : r.haNotAvailable,
                        e["class"] = e.$invalid || r.haNotAvailable ? "error focus": "focus valid",
                        e.$dirty = !0
                },
                r.validateState = function(e, t) {
                    e.$setValidity("unselect", "Select" != t),
                        e["class"] = e.$invalid ? "error focus": "focus valid",
                        e.$dirty = !0
                },
                r.onAddrEdit = function() {
                    r.haNotAvailable = !1,
                        a.shippingMode = "edit",
                        r.addressInvalid = !1,
                    0 == a.cost.total.amount && (a.shippingSameAsBilling = !1, $("#_sameAsShipAddress").removeAttr("checked"), r.shippingForm.$valid && (a.bluraddress(), a.selectedAddress && ($(".add_new_addr").show(), $(".add-new-shipping-address").hide(), $(".add_phone_email").show()))),
                        r.shippingFormvalid = r.shippingForm.$valid,
                    0 == $("input[name=addr]:checked").length && (a.selectedAddress = void 0)
                },
                r.onAlterAddrSelect = function(e) {
                    a.isHAinCart && r.isHomeDeliveryAvailableShipping(e.postal_code, !1),
                        r.formChanged = !0,
                        r.addressInvalid = !1,
                        $("input[name=addr]:checked").removeAttr("checked"),
                    e.line2 || (r.prevAddr.line2 = ""),
                        r.address = jQuery.extend({},
                            r.prevAddr, e),
                        a.selectedAddress = angular.copy(r.address)
                },
                r.usePrevAddress = function() {
                    r.overrideValidation = !0,
                        r.addressInvalid = !1,
                        a.selectedAddress = r.address,
                        r.addUpdateShippingInfo()
                },
                r.addUpdateShippingInfo = function() {
                    var i = jQuery.extend({},
                        a.selectedAddress || r.address);
                    delete i.id,
                        delete i.created_date,
                        delete i.modified_date,
                        delete i.override_suggestion,
                        delete i.address_overridden,
                        delete i.dr_address_id,
                        delete i.dr_nick_name,
                    ("" == i.line2 || void 0 == i.line2) && delete i.line2,
                        a.shippingAddress = i;
                    var o = a.cost.total.amount;
                    o > 0 && (i.phone = a.addedPayment.billing_info.phone, i.email = a.addedPayment.billing_info.email),
                        e.addUpdateShippingInfo(i, t.PAGECONTEXT.SHIPPING_INFO, r.overrideValidation).then(function(e) {
                            return a.selectedAddress || (a.selectedAddress = r.address),
                                a.selectedAddress.phone = e.shipping_info.phone,
                                a.selectedAddress.email = e.shipping_info.email,
                                r.formChanged = !1,
                                r.alternateAddress = null,
                                r.overrideValidation = !1,
                                a.$broadcast("refreshCart", e, !1),
                                a.$broadcast("addressUpdated", e),
                                a.shippingMode = "view",
                                a.shippingMethodMode = "edit",
                                a.focusOnShippingMethods = !1,
                                a.$digest(),
                                r.contactUpdate ? (r.contactUpdate = !1, void(a.focusOnShippingMethods = !0)) : void setTimeout(function() {
                                        $("html, body").animate({
                                                scrollTop: $("#_shipping_method").offset().top
                                            },
                                            "slow")
                                    },
                                    200)
                        }).E400(function(e) {
                            var t = JSON.parse(e.responseText);
                            t = t.error || JSON.parse(t.message).error,
                                "DisallowedShippingAddress" == t ? a.$broadcast("paymentStepError", n.DisallowedShippingAddress.title, n.DisallowedShippingAddress.description) : "DisallowedPostalCode" == t ? a.$broadcast("paymentStepError", n.ShippingDisallowedPostalCode.title, n.ShippingDisallowedPostalCode.description) : "DisallowedShippingCity" == t ? a.$broadcast("paymentStepError", n.DisallowedShippingCity.title, n.DisallowedShippingCity.description) : "DisallowedShippingState/Province" == t ? a.$broadcast("paymentStepError", n.DisallowedShippingStateProvince.title, n.DisallowedShippingStateProvince.description) : a.$broadcast("paymentStepError", n.BadRequestDefaultError.title, n.BadRequestDefaultError.description)
                        }).E401(function(e) {
                            a.promptReLogin(e)
                        }).E409(function(e) {
                            var t = JSON.parse(e.responseText);
                            t = t.error || JSON.parse(t.message).error,
                                "PurchaseFlowCannotBeModified" == t ? a.$broadcast("paymentStepError", n.PurchaseFlowCannotBeModified.title, n.PurchaseFlowCannotBeModified.description) : a.$broadcast("paymentStepError", n.AddressAlreadyInAddressList.title, n.AddressAlreadyInAddressList.description)
                        }).fail(function(e) {
                            a.$broadcast("paymentStepError", "Error in validating shipping address", "The provided shipping address is not allowed")
                        })
                },
                r.contShippingAddress = function() {
                    if (null != a.selectedAddress || r.shippingFormvalid) {
                        var i = jQuery.extend({},
                            a.selectedAddress);
                        if (a.selectedAddress || (i = jQuery.extend({},
                                r.address)), r.prevAddr = angular.copy(i), delete i.phone, delete i.last_name, delete i.first_name, delete i.middle_name, delete i.middle_initial, delete i.created_date, delete i.modified_date, delete i.override_suggestion, delete i.email, delete i.id, delete i.dr_address_id, delete i.dr_nick_name, delete i.address_overridden, ("" == i.line2 || void 0 == i.line2) && delete i.line2, r.overrideValidation) return void r.addUpdateShippingInfo();
                        e.validateAddress(i, t.PAGECONTEXT.SHIPPING_INFO).then(function(e) {
                            return r.formChanged = !1,
                                r.addressInvalid = !e.success,
                                e.success ? void r.addUpdateShippingInfo() : ($("input[name=addr]:checked").prop("checked") && ($("input[name=addr]:checked").removeAttr("checked"), $(".add_new_addr").show(), $(".add-new-shipping-address").hide(), $("#shipping_addr").find(".input-control").addClass("focus"), $("select").selectric(), a.selectedAddress = void 0), r.alternateAddress = e.alternatives, void r.$digest())
                        }).E404(function(e) {
                            r.overrideValidation = !0,
                                r.$digest(),
                                a.$broadcast("paymentStepError", n.ShippingAddressInvalidOverride.title, n.ShippingAddressInvalidOverride.description)
                        }).E409(function(e) {
                            r.overrideValidation = !0,
                                r.$digest(),
                                a.$broadcast("paymentStepError", n.ShippingAddressInvalidOverride.title, n.ShippingAddressInvalidOverride.description)
                        }).E400(function(e) {
                            a.$broadcast("paymentStepError", n.ShippingAddressInvalidCharacters.title, n.ShippingAddressInvalidCharacters.description)
                        }).E401(function(e) {
                            a.promptReLogin(e)
                        }).fail(function(e) {
                            console.log("checkout error:" + e),
                                a.$broadcast("paymentStepError", n.ShippingAddressInvalid.title, n.ShippingAddressInvalid.description)
                        })
                    }
                },
                r.deleteDialog = function(e) {
                    var t = $("." + e);
                    u(!0, t),
                        p(t.parent()),
                        t.find(".btn-yes").off().on("click",
                            function() {
                                f(e)
                            }),
                        t.find(".btn-no").off().on("click",
                            function() {
                                u(!1, t)
                            })
                },
                r.onFocus = i.formOnFocus,
                r.blurshipping = function() {
                    r.address && (r.address.email && $("#_addressInfo_userEmail").parents(".input-control").addClass("focus"), r.address.phone && $("#_addressInfo_userPhoneNo").parents(".input-control").addClass("focus"))
                },
                a.bluraddress = function() {
                    $(".add_new_addr").find("input[type='text'],input[type='number'],input[type='tel']").parents(".input-control").addClass("focus"),
                        $(".add_new_addr").find(".input-control.select-box").addClass("focus")
                },
                r.blurshipping(),
                r.$on("profileInfoAvailable",
                    function() {
                        r.address && (r.address.email || (r.address.email = a.contact.email), r.address.phone || (r.address.phone = a.contact.phone), r.blurshipping())
                    }),
                r.$on("addressInfo",
                    function() {
                        0 != a.cost.total.amount || a.anyPremiumCareSubscriptionCart() || a.cartHasSubscription() || (r.address || (r.address = {}), h())
                    }),
                r.$on("contactInfoUpdated",
                    function() {
                        a.selectedAddress && (r.contactUpdate = !0, r.contShippingAddress()),
                            r.shippingFormvalid = !1
                    })
        }]),
    checkoutApp.controller("UserAddressInfoCtrlv3", ["CheckoutService", "constants", "errors", "updateUtilities", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "$timeout",
        function(e, t, n, i, r, a, o, s, c, l, d, p) {
            function u(e) {
                var t = e.siblings(".existing-shipping-address").find(".delete-section");
                _.each(t,
                    function(e) {
                        f(!1, $(e))
                    })
            }
            function f(e, t) {
                e ? (t.find(".btn-remove").hide(), t.find(".delete-dialogue-box").show()) : (t.find(".btn-remove").show(), t.find(".delete-dialogue-box").hide())
            }
            function h(n) {
                e.deleteShippingAddress(n, t.PAGECONTEXT.SHIPPING_INFO).then(function(e) {
                    $("." + n).parent().hide()
                }).fail(function(e) {
                    a.$broadcast("paymentStepError", "Error in deleting shipping address", "Please try again")
                })
            }
            function g() {
                var e, t = {},
                    n = "PUT",
                    i = jQuery.extend({},
                        a.selectedAddress || r.address);
                delete i.id,
                    delete i.created_date,
                    delete i.modified_date,
                    delete i.override_suggestion,
                    delete i.address_overridden,
                    delete i.dr_address_id,
                    delete i.dr_nick_name,
                ("" == i.line2 || void 0 == i.line2) && delete i.line2,
                    t.payload = i,
                    e = SCart.URL.SHIPPING_INFO_V3_URL(SCart.shoppingCartTransformService.shoppingCartId, !0, r.overrideValidation),
                    t.method = n,
                    t.payload = {
                        shipping_info: i,
                        save_for_identity: !0
                    },
                    t.url = e,
                    t.handler = "addShippingAddressHandler",
                    a.shippingCTA = t
            }
            var m = function() {
                a.isLoggedIn && a.contact && (r.address || (r.address = {}), r.address.email || (r.address.email = a.contact.email), r.address.phone || (r.address.phone = a.contact.phone))
            };
            r.$on("userProfileAvailable",
                function() {
                    m()
                }),
                r.$watch("shippingForm.$valid",
                    function() {
                        r.shippingFormvalid = r.shippingForm.$valid && r.address.state_or_province != a.states[0]
                    }),
                r.address = void 0,
                r.contactUpdate = !1,
                m(),
                r.zipcodelookup = function(n) {
                    e.ziplookup(n, t.PAGECONTEXT.SHIPPING_INFO).then(function(e) {
                        e && e.city_state_list && e.city_state_list.length > 0 && (r.address.city = e.city_state_list[0].city, r.address.state_or_province = e.city_state_list[0].state_or_province, r.$digest(), $("select").selectric(), $("#_addressInfo_userState").blur(), $("#_addressInfo_userCity").blur())
                    })
                },
                r.zipCodeKeyUp = function(e) {
                    e.$invalid || "edit" == a.shippingMode && a.isHAinCart && r.isHomeDeliveryAvailableShipping(e.$modelValue, !0)
                },
                r.$on("isHomeDeliveryAvailableShippingMethod",
                    function(e, t, n) {
                        r.isHomeDeliveryAvailableShipping(t, !1, n)
                    }),
                r.isHomeDeliveryAvailableShipping = function(o, s, c) {
                    r.haNotAvailable = !1,
                        a.haDeliveryErrorMessage = !1,
                        a.estimatedDeliveryDateToShow = "",
                        a.estimatedDeliveryDateMsg = "";
                    var l = _.filter(a.cartItems,
                        function(e) {
                            return e.attributes.is_ha_delivery
                        });
                    l && l.length > 0 && (r.whereToBuyUrl = l[0].attributes.product_details_page_url + "-buy/");
                    var d = _.pluck(l, "sku_id");
                    e.getAvailableHomeDeliveryDates(d, o, t.PAGECONTEXT.ORDER_SUMMARY).then(function(e) {
                        a.availableDeliveryDates = e,
                            e.length > 0 ? (a.earliestDate = e[0], r.haNotAvailable = !1) : (a.earliestDate = void 0, r.haNotAvailable = !0, s ? $("#_addressInfo_userZipCode").blur() : a.$broadcast("paymentStepError", n.homeDeliveryNotAvailable.title, n.homeDeliveryNotAvailable.description, !0), c && (a.selectedAddress = void 0, a.shippingMode = "edit", a.paymentMode = "edit")),
                            a.earliestDate ? a.estimatedDeliveryDateToShow = "object" == typeof a.earliestDate ? i.formatDateString(a.earliestDate.start_date, t.DATE_FORMAT1) : i.formatDateString(a.earliestDate, t.DATE_FORMAT1) : a.estimatedDeliveryDateMsg = "Major Appliance delivery not available for zipcode " + o,
                            a.$digest()
                    }).E400(function(e) {
                        r.haNotAvailable = !0,
                            a.$broadcast("paymentStepError", n.homeDeliveryError.title, n.homeDeliveryError.description)
                    }).E401(function(e) {
                        r.haNotAvailable = !0,
                            a.$broadcast("paymentStepError", n.homeDeliveryError.title, n.homeDeliveryError.description)
                    }).E404(function(e) {
                        r.haNotAvailable = !0,
                            a.$broadcast("paymentStepError", n.homeDeliveryError.title, n.homeDeliveryError.description)
                    }).fail(function(e) {
                        r.haNotAvailable = !0,
                            a.$digest(),
                            a.$broadcast("paymentStepError", n.homeDeliveryError.title, n.homeDeliveryError.description)
                    })
                },
                r.onFormChange = function(e) {
                    r.addressInvalid && r.alternateAddress && (r.formChanged = !0),
                        r.overrideValidation = !1,
                        a.selectedAddress = null,
                        $("input[name=alterAddr]:checked").removeAttr("checked")
                },
                r.onSameAddress = function(e) {
                    f(!1, $(".billing-address-as-shipping")),
                        u($(".billing-address-as-shipping")),
                        r.address = e,
                        r.addressInvalid = !1,
                        r.shippingForm.state.$setValidity("unselect", !0),
                        r.overrideValidation = !1,
                        r.formChanged = !1,
                        a.selectedAddress = void 0,
                        r.shippingFormvalid = !0,
                        r.alternateAddress = null,
                        a.shippingSameAsBilling = !0,
                        $(".add_new_addr").hide(),
                        $(".add-new-shipping-address").show(),
                        $("#shipping_addr").find(".input-control").removeClass("error")
                },
                a.onAddrSelect = function(e, t) {
                    a.isHAinCart && !t && r.isHomeDeliveryAvailableShipping(e.postal_code, !1),
                        f(!1, $("." + e.id)),
                        u($("." + e.id).parent()),
                        r.overrideValidation = !0,
                        r.addressInvalid = !1,
                        r.formChanged = !1,
                        a.selectedAddress = e,
                        r.address = {},
                        r.alternateAddress = null,
                        a.shippingSameAsBilling = !1,
                    0 != a.cost.total.amount || a.anyPremiumCareSubscriptionCart() || a.cartHasSubscription() || $(".add_phone_email").hide(),
                        $("#add_new_addr").hide(),
                        $(".add-new-shipping-address").show()
                },
                r.editAddr = function() {
                    u($(".add-new-shipping-address")),
                        r.overrideValidation = !1,
                        r.formChanged = !1,
                    null != a.addedPayment && a.addedPayment.billing_info && (r.address.phone = a.addedPayment.billing_info.phone, r.address.email = a.addedPayment.billing_info.email),
                    0 != a.cost.total.amount || a.anyPremiumCareSubscriptionCart() || a.cartHasSubscription() || $(".add_phone_email").show(),
                        m(),
                        a.selectedAddress = void 0,
                        r.alternateAddress = null,
                        a.shippingSameAsBilling = !1,
                        a.shippingMode = "edit",
                        $("input[name=addr]:checked").removeAttr("checked"),
                        $("#add_new_addr").show(),
                        $(".add-new-shipping-address").hide()
                },
                r.addNewAddr = function() {
                    r.address = {},
                        r.address.state_or_province = a.states[0],
                        a.selectedAddress = void 0,
                        a.shippingMode = "edit",
                        $("input[name=addr]:checked").removeAttr("checked"),
                    a.shoppingCart.payment && a.shoppingCart.payment.paypal && "TxSuccess" == a.shoppingCart.payment.paypal.paypal_status && (a.paymentMode = "edit"),
                        p(function() {
                            a.$digest(),
                                $("#_addressInfo_userState").selectric()
                        })
                },
                r.addNewAddrinEditMode = function() {
                    r.address = {},
                        r.address.state_or_province = a.states[0],
                        a.selectedAddress = void 0,
                        a.shippingMode = "edit",
                        $("#add_new_addr").show(),
                        $("input[name=addr]:checked").removeAttr("checked"),
                        p(function() {
                            a.$digest(),
                                $("#_addressInfo_userState").selectric()
                        })
                },
                r.validate = function(e) {
                    e["class"] = e.$invalid ? "error focus": "focus valid",
                        e.$dirty = !0
                },
                r.validateZipCode = function(e) {
                    r.haNotAvailable = e.$invalid ? !1 : r.haNotAvailable,
                        e["class"] = e.$invalid || r.haNotAvailable ? "error focus": "focus valid",
                        e.$dirty = !0
                },
                r.validateState = function(e, t) {
                    e.$setValidity("unselect", t != a.states[0]),
                        e["class"] = e.$invalid ? "error focus": "focus valid",
                        e.$dirty = !0
                },
                r.onAddrEdit = function() {
                    a.shippingMode = "edit",
                        r.addressInvalid = !1,
                        r.address = _.clone(a.selectedAddress),
                    0 == a.cost.total.amount && (a.shippingSameAsBilling = !1, $("#_sameAsShipAddress").removeAttr("checked"), r.shippingForm.$valid && (a.bluraddress(), a.selectedAddress && ($("#add_new_addr").show(), $(".add-new-shipping-address").hide(), $(".add_phone_email").show()))),
                        a.selectedAddress = void 0,
                        r.shippingFormvalid = r.shippingForm.$valid,
                    a.shoppingCart.payment && a.shoppingCart.payment.paypal && "TxSuccess" == a.shoppingCart.payment.paypal.paypal_status && (a.paymentMode = "edit"),
                        p(function() {
                            a.$digest(),
                                $("#_addressInfo_userState").selectric(),
                                $("#_billingaddressInfo_userState").selectric()
                        })
                },
                r.onAlterAddrSelect = function(e) {
                    a.isHAinCart && r.isHomeDeliveryAvailableShipping(e.postal_code, !1),
                        r.formChanged = !0,
                        r.addressInvalid = !1,
                        $("input[name=addr]:checked").removeAttr("checked"),
                        r.address = jQuery.extend({},
                            r.prevAddr, e),
                        a.selectedAddress = angular.copy(r.address),
                        p(function() {
                            a.$digest(),
                                $("#_addressInfo_userState").selectric()
                        })
                },
                r.usePrevAddress = function() {
                    r.overrideValidation = !0,
                        r.addressInvalid = !1,
                        a.selectedAddress = r.address,
                        r.addUpdateShippingInfo()
                },
                r.addUpdateShippingInfo = function() {
                    var i = jQuery.extend({},
                        a.selectedAddress || r.address);
                    delete i.id,
                        delete i.created_date,
                        delete i.modified_date,
                        delete i.override_suggestion,
                        delete i.address_overridden,
                        delete i.dr_address_id,
                        delete i.dr_nick_name,
                    ("" == i.line2 || void 0 == i.line2) && delete i.line2,
                        a.shippingAddress = i;
                    a.cost.total.amount;
                    e.addUpdateShippingInfo(i, t.PAGECONTEXT.SHIPPING_INFO, r.overrideValidation).then(function(e) {
                        return a.selectedAddress || (a.selectedAddress = r.address),
                            a.selectedAddress.phone = e.shipping_info.phone,
                            a.selectedAddress.email = e.shipping_info.email,
                            r.formChanged = !1,
                            r.alternateAddress = null,
                            r.overrideValidation = !1,
                            a.$broadcast("refreshCart", e, !1),
                            a.$broadcast("addressUpdated", e),
                            a.shippingMode = "view",
                            a.focusOnShippingMethods = !1,
                            a.$digest(),
                            r.contactUpdate ? (r.contactUpdate = !1, void(a.focusOnShippingMethods = !0)) : void 0
                    }).E400(function(e) {
                        var t = JSON.parse(e.responseText);
                        t = t.error || JSON.parse(t.message).error,
                            "DisallowedShippingAddress" == t ? a.$broadcast("paymentStepError", n.DisallowedShippingAddress.title, n.DisallowedShippingAddress.description) : "DisallowedPostalCode" == t ? a.$broadcast("paymentStepError", n.ShippingDisallowedPostalCode.title, n.ShippingDisallowedPostalCode.description) : "DisallowedShippingCity" == t ? a.$broadcast("paymentStepError", n.DisallowedShippingCity.title, n.DisallowedShippingCity.description) : "DisallowedShippingState/Province" == t ? a.$broadcast("paymentStepError", n.DisallowedShippingStateProvince.title, n.DisallowedShippingStateProvince.description) : a.$broadcast("paymentStepError", n.BadRequestDefaultError.title, n.BadRequestDefaultError.description)
                    }).E401(function(e) {
                        a.promptReLogin(e)
                    }).E409(function(e) {
                        var t = JSON.parse(e.responseText);
                        t = t.error || JSON.parse(t.message).error,
                            "PurchaseFlowCannotBeModified" == t ? a.$broadcast("paymentStepError", n.PurchaseFlowCannotBeModified.title, n.PurchaseFlowCannotBeModified.description) : "ItemOutOfStock" == t ? a.$broadcast("paymentStepError", n.ItemOutOfStock.title, n.ItemOutOfStock.description) : a.$broadcast("paymentStepError", n.AddressAlreadyInAddressList.title, n.AddressAlreadyInAddressList.description)
                    }).fail(function(e) {
                        a.$broadcast("paymentStepError", "Error in validating shipping address", "The provided shipping address is not allowed")
                    })
                },
                a.contShippingAddress = function() {
                    if (null != a.selectedAddress || r.shippingFormvalid) {
                        var i = jQuery.extend({},
                            a.selectedAddress);
                        if (a.selectedAddress || (i = jQuery.extend({},
                                r.address)), r.prevAddr = angular.copy(i), delete i.phone, delete i.last_name, delete i.first_name, delete i.middle_name, delete i.middle_initial, delete i.created_date, delete i.modified_date, delete i.override_suggestion, delete i.email, delete i.id, delete i.dr_address_id, delete i.dr_nick_name, delete i.address_overridden, ("" == i.line2 || void 0 == i.line2) && delete i.line2, r.overrideValidation) return void r.addUpdateShippingInfo();
                        e.validateAddress(i, t.PAGECONTEXT.SHIPPING_INFO).then(function(e) {
                            return r.formChanged = !1,
                                r.addressInvalid = !e.success,
                                e.success ? void r.addUpdateShippingInfo() : ($("input[name=addr]:checked").prop("checked") && ($("input[name=addr]:checked").removeAttr("checked"), $("#add_new_addr").show(), $(".add-new-shipping-address").hide(), $("#shipping_addr").find(".input-control").addClass("focus"), $("select").selectric(), a.selectedAddress = void 0), r.alternateAddress = e.alternatives, void r.$digest())
                        }).E404(function(e) {
                            r.overrideValidation = !0,
                                r.$digest(),
                                a.$broadcast("paymentStepError", n.ShippingAddressInvalidOverride.title, n.ShippingAddressInvalidOverride.description)
                        }).E409(function(e) {
                            r.overrideValidation = !0,
                                r.$digest(),
                                a.$broadcast("paymentStepError", n.ShippingAddressInvalidOverride.title, n.ShippingAddressInvalidOverride.description)
                        }).E400(function(e) {
                            a.$broadcast("paymentStepError", n.ShippingAddressInvalidCharacters.title, n.ShippingAddressInvalidCharacters.description)
                        }).E401(function(e) {
                            a.promptReLogin(e)
                        }).fail(function(e) {
                            console.log("checkout error:" + e),
                                a.$broadcast("paymentStepError", n.ShippingAddressInvalid.title, n.ShippingAddressInvalid.description)
                        })
                    }
                },
                r.deleteDialog = function(e) {
                    var t = $("." + e);
                    f(!0, t),
                        u(t.parent()),
                        t.find(".btn-yes").off().on("click",
                            function() {
                                h(e)
                            }),
                        t.find(".btn-no").off().on("click",
                            function() {
                                f(!1, t)
                            })
                },
                r.onFocus = i.formOnFocus,
                r.blurshipping = function() {
                    r.address && (r.address.email && $("#_addressInfo_userEmail").parents(".input-control").addClass("focus"), r.address.phone && $("#_addressInfo_userPhoneNo").parents(".input-control").addClass("focus"))
                },
                a.bluraddress = function() {
                    $(".add_new_addr").find("input[type='text'],input[type='number'],input[type='tel']").parents(".input-control").addClass("focus"),
                        $(".add_new_addr").find(".input-control.select-box").addClass("focus")
                },
                a.selectDefaultAddress = function() {
                    a.shoppingCart && !a.shoppingCart.shipping_info && a.isLoggedIn && a.savedAddress.length > 0 && !a.shoppingCart.payment ? ($(".existing-ship-address-holder").eq(0).find("input").prop("checked", !0), r.onAddrSelect(a.savedAddress[0], !0), g()) : a.shoppingCart && !a.shoppingCart.shipping_info && a.shoppingCart.payment && a.savedAddress.length > 0 && (!a.shoppingCart.payment.paypal || "TxSuccess" != a.shoppingCart.payment.paypal.payal_status) ? ($(".existing-ship-address-holder").eq(0).find("input").prop("checked", !0), r.onAddrSelect(a.savedAddress[0], !0), g()) : 0 != a.savedAddress.length || a.shoppingCart.payment && (!a.shoppingCart.payment || a.shoppingCart.payment.paypal) || (a.shippingMode = "edit", "finance" == o.payment_source && a.billing && (r.address = _.clone(a.billing))),
                    "finance" != o.payment_source && a.applyShippingAndPayment(t.CHECKOUT_SECTION.SHIPPING),
                        p(function() {
                            a.$digest()
                        })
                },
                r.blurshipping(),
                r.$on("profileInfoAvailable",
                    function() {
                        r.address && (r.address.email || (r.address.email = a.contact.email), r.address.phone || (r.address.phone = a.contact.phone), r.blurshipping())
                    }),
                r.$on("addressInfo",
                    function() {
                        0 != a.cost.total.amount || a.anyPremiumCareSubscriptionCart() || a.cartHasSubscription() || (r.address || (r.address = {}), m())
                    }),
                r.$on("addressApplied",
                    function() {
                        r.formChanged = !1,
                            r.alternateAddress = null,
                            r.overrideValidation = !1
                    }),
                r.$on("contactInfoUpdated",
                    function() {}),
                $("#_addressInfo_userState").on("selectric-before-close",
                    function() {
                        $("#_addressInfo_userState").blur()
                    }),
                r.displayDelayedShippingMessage = 1 == $.cookie("displayDelayedShipping") || "true" == $.cookie("displayDelayedShipping")
        }]),
    checkoutApp.controller("UserOrderCtrl", ["PaymentService", "CheckoutService", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location",
        function(e, t, n, i, r, a, o, s, c) {
            n.showSavings = function() {
                $(window).width() > 768 && (window.utag && utag.link({
                    link_cat: "total savings",
                    link_id: "checkout_order_summary_total_savings",
                    link_meta: "link_name:total savings",
                    link_position: "order summary"
                }), $(".order-summary-holder").find(".info-box").width($(".order-summary-holder").outerWidth() - 66), $(".savings-on-total").addClass("active"), $(".savings-on-total").find(".info-box").css({
                    top: "95px",
                    opacity: "0",
                    display: "block"
                }), $(".savings-on-total").find(".info-box").animate({
                        top: "45px",
                        opacity: 1
                    },
                    350))
            },
                n.hideSavings = function() {
                    $(window).width() > 768 && ($(".order-summary-holder").find(".info-box").width($(".order-summary-holder").outerWidth() - 66), $(".savings-on-total").removeClass("active"), $(".savings-on-total").find(".info-box").animate({
                            top: "95px",
                            opacity: 0
                        },
                        350,
                        function() {
                            $(".savings-on-total").find(".info-box").css({
                                display: "none"
                            })
                        }))
                },
                n.toggleSavings = function() {
                    $(window).width() < 768 ? ($(".savings-on-total").toggleClass("active"), $(".savings-on-total").find(".info-box").slideToggle(), $(".savings-on-total").find(".icon-info").toggleClass("active")) : ($(".order-summary-holder").find(".info-box").width($(".order-summary-holder").outerWidth() - 66), $(".savings-on-total").toggleClass("active"), $(".savings-on-total").hasClass("active") ? ($(".savings-on-total").find(".info-box").css({
                        top: "95px",
                        opacity: "0",
                        display: "block"
                    }), $(".savings-on-total").find(".info-box").animate({
                            top: "45px",
                            opacity: 1
                        },
                        350)) : $(".savings-on-total").find(".info-box").animate({
                            top: "95px",
                            opacity: 0
                        },
                        350,
                        function() {
                            $(".savings-on-total").find(".info-box").css({
                                display: "none"
                            })
                        }))
                },
                i.totalPricePos = $(".os-total-fixed-at-bottom-in-mobile").offset().top,
                i.promoMsg = "",
                i.promoClass = "",
                n.handlePaypal = function() {
                    t.getPaypalUrl(!i.isLoggedIn, n.isPaypalCredit).then(function(e) {
                        e && e.payment && e.payment.paypal && ($(".spinner_container").show(), $(".spinner_container").addClass("preloader-paypal"), $(".spinner_container").append('<div class="preloader-paypal-msg">We are redirecting you to PayPal. Please be patient. The estimated taxes will change based on your shipping address.</div>'), window.location.href = e.payment.paypal.redirect_url),
                            $(".checkout-payment-cc-details").hide()
                    }).fail(function(e) {
                        i.$broadcast("paymentStepError", "We could not process your request at this time.", "Please try again with a different payment option."),
                        window.utag && utag.link({
                            link_cat: "paypal error response",
                            link_id: "checkout_payment_information_paypal_error_response",
                            link_meta: "link_name:paypal error response",
                            link_position: "payment information"
                        })
                    })
                }
        }]),
    checkoutApp.controller("UserOrderCtrlv3", ["PaymentService", "CheckoutService", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location",
        function(e, t, n, i, r, a, o, s, c) {
            i.utagLink = function() {
                window.utag && utag.link({
                    link_cat: "validation error",
                    link_id: "checkout_validation_error",
                    link_meta: "link_name:validation_error",
                    link_position: "checkout"
                })
            },
                n.showSavings = function() {
                    $(window).width() > 768 && (window.utag && utag.link({
                        link_cat: "total savings",
                        link_id: "checkout_order_summary_total_savings",
                        link_meta: "link_name:total savings",
                        link_position: "order summary"
                    }), $(".order-summary-holder").find(".info-box").width($(".order-summary-holder").outerWidth() - 66), $(".savings-on-total").addClass("active"), $(".savings-on-total").find(".info-box").css({
                        top: "95px",
                        opacity: "0",
                        display: "block"
                    }), $(".savings-on-total").find(".info-box").animate({
                            top: "45px",
                            opacity: 1
                        },
                        350))
                },
                n.hideSavings = function() {
                    $(window).width() > 768 && ($(".order-summary-holder").find(".info-box").width($(".order-summary-holder").outerWidth() - 66), $(".savings-on-total").removeClass("active"), $(".savings-on-total").find(".info-box").animate({
                            top: "95px",
                            opacity: 0
                        },
                        350,
                        function() {
                            $(".savings-on-total").find(".info-box").css({
                                display: "none"
                            })
                        }))
                },
                n.toggleSavings = function() {
                    $(window).width() < 768 ? ($(".savings-on-total").toggleClass("active"), $(".savings-on-total").find(".info-box").slideToggle(), $(".savings-on-total").find(".icon-info").toggleClass("active")) : ($(".order-summary-holder").find(".info-box").width($(".order-summary-holder").outerWidth() - 66), $(".savings-on-total").toggleClass("active"), $(".savings-on-total").hasClass("active") ? ($(".savings-on-total").find(".info-box").css({
                        top: "95px",
                        opacity: "0",
                        display: "block"
                    }), $(".savings-on-total").find(".info-box").animate({
                            top: "45px",
                            opacity: 1
                        },
                        350)) : $(".savings-on-total").find(".info-box").animate({
                            top: "95px",
                            opacity: 0
                        },
                        350,
                        function() {
                            $(".savings-on-total").find(".info-box").css({
                                display: "none"
                            })
                        }))
                },
                i.promoMsg = "",
                i.promoClass = "",
                n.isCheckoutPage = !0,
                n.handlePaypal = function() {
                    t.getPaypalUrl(!i.isLoggedIn, n.isPaypalCredit).then(function(e) {
                        e && e.payment && e.payment.paypal && ($(".spinner_container").show(), $(".spinner_container").addClass("preloader-paypal"), $(".spinner_container").append('<div class="preloader-paypal-msg">We are redirecting you to PayPal. Please be patient. The estimated taxes will change based on your shipping address.</div>'), window.location.href = e.payment.paypal.redirect_url),
                            $(".checkout-payment-cc-details").hide()
                    }).fail(function(e) {
                        i.$broadcast("paymentStepError", "We could not process your request at this time.", "Please try again with a different payment option."),
                        window.utag && utag.link({
                            link_cat: "paypal error response",
                            link_id: "checkout_payment_information_paypal_error_response",
                            link_meta: "link_name:paypal error response",
                            link_position: "payment information"
                        })
                    })
                },
                i.enablePlaceOrder = function() {
                    return ! i.cost || 0 != i.cost.total.amount || i.anyPremiumCareSubscriptionCart() || i.cartHasSubscription() ? "view" == i.shippingMode && "view" == i.paymentMode && ("view" == i.shippingMethodMode || i.shoppingCart && i.shoppingCart.shipping_method) : "view" == i.shippingMode && ("view" == i.shippingMethodMode || i.shoppingCart && i.shoppingCart.shipping_method)
                }
        }]),
    checkoutApp.controller("OrderConfirmCtrl", ["ConfirmService", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location",
        function(e, t, n, i, r, a, o, s) {
            n.stopStickyNav(),
                t.changeHeader = function() {
                    $("#checkout-header").siblings().show(),
                        $("#checkout-header").remove(),
                        $(".gnb-b2c-icons").show(),
                        $(".gnb-b2c-promo-wrapper").show()
                },
                t.changeHeader(),
                t.computeUnidays = function() {
                    var e = n.shoppingCart.cost,
                        t = "lETkNoFEmUW/ylETCs5/uzR/8HZ4fEdLrLAnpbEKnwg=",
                        i = "SNr4BMj1ISIvvAZIppl9PHiqh8lr1G2iEc8wc6jqmyRqeGmwwl0AxintWRtvJRvDM3/6luy53EXmWWkZSTK3ITpceZHr6lEUPIdtazGYn3j15dxD90MSLBxeHv3o+vGGJZqlT1a+GGYsIPY9fI8MnMqDPjYsNMhjzpHx9R8G1Ek=",
                        r = new UNiDAYS(t, i),
                        a = 0;
                    n.savings && e.subtotal && e.subtotal.amount > 0 && (a = (n.savings.discounts / (e.subtotal.amount + n.savings.discounts) * 100).toFixed(2));
                    var o = e.total ? e.total.amount: 0;
                    n.savings && (o += n.savings.amount);
                    var s = $.cookie("DR_SESSION_TOKEN"),
                        c = r.trackingUrl(n.orderId, "USD", s, e.total.amount, n.savings ? n.savings.discounts: "", "", e.tax.amount, e.shipping ? e.shipping.amount: 0, 0, o, n.savings ? n.savings.promo: "", a, 0); !
                        function(e, t) {
                            var n = e.getElementsByTagName("script")[0],
                                i = e.createElement("script");
                            i.async = !0,
                                i.src = t,
                                n.parentNode.insertBefore(i, n)
                        } (document, c)
                };
            try {
                "4771508300" == $.cookie("tppid") && t.computeUnidays()
            } catch(c) {
                console.log("unidays exception" + c)
            }
        }]),
    checkoutApp.controller("FinalOrderSummaryCtrl", ["CheckoutService", "constants", "financingService", "ConfirmService", "updateUtilities", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "$window", "$filter",
        function(e, t, n, i, r, a, o, s, c, l, d, p, u, f) {
            a.orderRef = o.orderId,
                a.orderDate = "" + f("date")(new Date, "MM-dd-yyyy"),
                $(".prefetch_spinner_container").hide();
            var h = function() {
                if (o.cost && o.cost.total) {
                    window.USI_orderID = o.orderId,
                        window.USI_orderAmt = o.cost.total.amount;
                    var e = document.getElementsByTagName("head")[0],
                        t = document.createElement("script");
                    t.setAttribute("type", "text/javascript"),
                        t.src = "//www.upsellit.com/launch/samsung_pixel.jsp",
                        e.appendChild(t)
                }
            };
            h(),
                a.validate = function(e) {
                    e["class"] = e.$invalid ? "error focus": "focus valid",
                        e.$dirty = !0
                },
                a.thankyou = function() {
                    o.$broadcast("saveImpression", o.shoppingCart, "new ecom step3|thankyou"),
                        a.orderRef = "#" + o.orderId,
                        a.onFocus = r.formOnFocus,
                        a.title = "fraud" == o.orderType ? "Thank you for ordering from samsung": "Thank you. Your order has been placed.",
                        a.showfandfDescription = o.isFandfEnabled,
                        a.showPaymentMessageForV3 = EcomApi.isTransformRequired,
                    o.shoppingCart.finance_plan && (o.financePlan = o.shoppingCart.finance_plan, o.financingDetails = o.shoppingCart.payment.td_financing),
                        $(".thank-you-page-holder").removeClass("ng-hide"),
                        o.subscribedPhoneNumber = angular.copy(o.shoppingCart.payment.billing_info.phone)
                },
                o.shoppingCart ? a.thankyou() : e.getOrder(s.orderId, t.PAGECONTEXT.THANKYOU_PAGE).then(function(e) {
                    var t = e.data;
                    o.orderId = e.displayOrderID,
                        o.selectedShippingMethod = t.shipping_method,
                        o.shippingAddress = t.shipping_info,
                        o.addedPayment = t.payment,
                        o.refreshCartHelper(t),
                        o.totalItemsInCart = o.formatTotalItemsInCart(t.line_items),
                    t.finance_plan && (o.financePlan = t.finance_plan, o.financingDetails = t.payment.td_financing),
                    t.shipping_method && (o.selectedShippingMethod.displayText = o.shippingOptionsText[t.shipping_method.description]),
                        $(".cart-basket").text(""),
                        o.isIE() ? ($(".gnb-b2c-icons-cart a svg").remove(), $(".gnb-b2c-icons-cart a").prepend('<svg viewBox="0 0 100 100" id="cart-open"><circle cx="28" cy="90" r="10"/><circle cx="86" cy="90" r="10"/><path d="M86 14v42H28V13.86C28 6.205 21.794 0 14.14 0H0v14h14v42c0 7.732 6.268 14 14 14h58c7.732 0 14-6.268 14-14V14H86z"/></svg>')) : $(".gnb-b2c-icons-cart a svg use").attr("xlink:href", "/us/resources/navigation/assets/images/sprite.symbol.svg#cart-open"),
                        $.cookie("s_ecom_sc_cnt", 0, {
                            path: "/",
                            domain: ".samsung.com"
                        }),
                        o.$broadcast("orderSummaryPageActions"),
                        a.thankyou(),
                        o.$digest(),
                        a.$apply()
                }).fail(function(e) {
                    console.error("thankyou-page error: " + e.responseText),
                        p.path("/cart-info/"),
                        o.$digest()
                }),
                a.subTitle = function() {
                    return "fraud" == o.orderType ? "subTitle-fraud-order": "subtitle-confirmed-order"
                },
                a.initRRFeed = function() {
                    if (window.r3_common) {
                        var e = this;
                        a.setCookie();
                        var t = new window.r3_common;
                        window.R3_COMMON = t,
                            t.setChannel("web"),
                            t.setApiKey("f20dc17e1482cd47"),
                            t.setBaseUrl("//recs.richrelevance.com/rrserver/"),
                            t.setSessionId(a.rrSessionID),
                            t.setClickthruServer(window.location.protocol + "//" + window.location.host);
                        var n = Cookies.get("prof_bpno_s");
                        n || (n = e.rrSessionID),
                            t.setUserId(n),
                            t.addPlacementType("purchase_complete_page.rr1");
                        var i = new r3_purchased;
                        i.setOrderNumber(o.orderId),
                        o.cartItems && o.cartItems.length > 0 && (o.cartItems.forEach(function(e) {
                            i.addItemIdPriceQuantity(e.sku_id, e.line_item_cost.price.amount + "", e.quantity + "")
                        }), window.r3())
                    }
                },
                a.setCookie = function() {
                    a.rrSessionID = Cookies.get("rr_session_id"),
                    a.rrSessionID || (a.rrSessionID = 1e18 * Math.random(), Cookies.set("rr_session_id", this.rrSessionID, {
                        expires: 30
                    }))
                },
                a.btnCarrierPlan = function() {
                    window.location.href = SCart.URL.CARRIER_ACTIVATION_URL(o.shoppingCart.cart_id)
                },
            window.isMobile() || a.initRRFeed(),
            o.isMobileAppView() && "undefined" != typeof Splus && "undefined" != typeof Splus.notify && Splus.notify("SUCCESS", o.orderId),
                a.print = function() {
                    u.print()
                }
        }]),
    checkoutApp.controller("FinalOrderSummarySupportCtrl", ["CheckoutService", "constants", "financingService", "ConfirmService", "updateUtilities", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "$window", "$filter", "$timeout", "calendarUtil", "errors",
        function(e, t, n, i, r, a, o, s, c, l, d, p, u, f, h, g, m) {
            o.availableDates = [],
                o.availableDateRanges = [],
                o.scheduleForm = {},
                o.enableScheduleForm = !1,
                o.disableSubmit = !1,
                a.subscriptionSuccess = !1,
                a.isSubscriptionSubmitted = !0,
                a.onFocus = r.formOnFocus,
                a.validate = function(e) {
                    e["class"] = e.$invalid ? "error focus": "focus valid",
                        e.$dirty = !0,
                        e.$invalid ? o.disableSubmit = !0 : (r.formOnBlur(e), o.disableSubmit = !1)
                },
                a.alignScheduleTag = function() {
                    $("html, body").animate({
                            scrollTop: $("#datepicker").offset().top - 120
                        },
                        2e3)
                },
                o.orderId = s.orderId,
                a.findYourOrderUrl = o.isLoggedIn ? "/us/support/account/order": "/us/support/account/order/#/order-lookup/",
                o.orderNavigationLabel = o.isLoggedIn ? "My Order": "Order Lookup",
                a.formatSchedulingDate = function(e) {
                    var n = "";
                    if (o.availableDateRanges.length > 0) {
                        var i = {};
                        i = g.getDateRangeForSelectedDate("object" == typeof e ? r.formatDateString(e.start_date, t.DATE_FORMAT) : r.formatDateString(e, t.DATE_FORMAT)),
                            n = r.formatDateString(i.start_date, t.DATE_FORMAT) + " - " + r.formatDateString(i.end_date, t.DATE_FORMAT)
                    } else n = "object" == typeof e ? r.formatDateString(e.start_date, t.DATE_FORMAT) : g.getDateRangeForSelectedDate(r.formatDateString(e, t.DATE_FORMAT));
                    return n
                },
                a.getAvailableDatesForOrder = function() {
                    e.getAvailableDatesForOrder(s.orderId, t.PAGECONTEXT.THANKYOU_PAGE).then(function(e) {
                        e && e.length > 0 ? (o.availableDateResponse = e, _.forEach(e,
                            function(e) {
                                var n = new Date(r.formatDateString(e.start_date, t.DATE_FORMAT)),
                                    i = new Date(r.formatDateString(e.end_date, t.DATE_FORMAT));
                                i > n ? o.availableDateRanges.push({
                                    start_date: n,
                                    end_date: i
                                }) : o.availableDates.push(r.formatDateString(n, t.DATE_FORMAT))
                            }), a.prepopulateHAData(), h(function() {
                            g.updateCalendarDates()
                        })) : a.handleSchedulingError(m.DeliveryViaEmail.title, m.DeliveryViaEmail.description)
                    }).E400(function(e) {
                        var t = JSON.parse(e.responseText);
                        return "InvalidPoId" == t.error ? void a.handleSchedulingError(m.DeliveryRetry.title, m.DeliveryRetry.description) : void a.handleSchedulingError(m.DeliveryViaEmail.title, m.DeliveryViaEmail.description)
                    }).E409(function(e) {
                        var t = JSON.parse(e.responseText);
                        return "RetryableFailure" == t.error ? void a.handleSchedulingError(m.DeliveryRetry.title, m.DeliveryRetry.description) : void a.handleSchedulingError(m.DeliveryViaEmail.title, m.DeliveryViaEmail.description)
                    }).E403(function(e) {
                        a.handleSchedulingError(m.DeliveryViaEmail.title, m.DeliveryViaEmail.description)
                    }).fail(function(e) {
                        a.handleSchedulingError(m.DeliveryViaEmail.title, m.DeliveryViaEmail.description)
                    })
                },
                a.hideScheduleForm = function() {
                    var e = {
                        link_cat: "schedule home delivery",
                        link_id: "ha_order_complete_schedule_home_delivery_cancel",
                        link_meta: "link_name:cancel",
                        link_position: "thankyou>schedule home delivery"
                    };
                    o.haUtagLinkFire(e),
                        o.enableScheduleForm = !1,
                        o.disableSubmit = !1,
                        $(".ha-delivery-schedule-form .input-control.instructions").removeClass("error"),
                        a.prepopulateHAData()
                },
                a.scheduleInstallation = function() {
                    var n = {
                        link_cat: "schedule home delivery",
                        link_id: "ha_order_complete_schedule_home_delivery_schedule",
                        link_meta: "link_name:schedule",
                        link_position: "thankyou>schedule home delivery"
                    };
                    o.haUtagLinkFire(n),
                        o.enableScheduleForm = !1;
                    var i = null,
                        c = o.scheduleForm.selectedDate.split("-");
                    if (1 == c.length) i = new Date(c);
                    else {
                        var l = new Date(c[0].trim());
                        i = new Date(l)
                    }
                    var d = null;
                    _.forEach(o.availableDateResponse,
                        function(e) {
                            var n = new Date(r.formatDateString(e.start_date, t.DATE_FORMAT));
                            n.getDate() == i.getDate() && n.getMonth() == i.getMonth() && n.getFullYear() == i.getFullYear() && (d = e)
                        });
                    var p = {};
                    p.request_delivery_date = d.start_date,
                    d.end_date && d.end_date != d.start_date && (p.end_date = d.end_date),
                    o.scheduleForm.instructions && (p.delivery_remarks = o.scheduleForm.instructions),
                        e.scheduleInstallation(s.orderId, p, t.PAGECONTEXT.THANKYOU_PAGE).then(function(e) {
                            e.data.options && (o.earliestDate = e.data.options.request_delivery_date),
                                o.shoppingCart.options = e.data.options
                        }).E400(function(e) {
                            a.handleSchedulingError(m.ReschduleError.title, m.ReschduleError.description)
                        }).E401(function(e) {
                            a.handleSchedulingError(m.ReschduleError.title, m.ReschduleError.description)
                        }).E404(function(e) {
                            a.handleSchedulingError(m.ReschduleError.title, m.ReschduleError.description)
                        }).fail(function(e) {
                            a.handleSchedulingError(m.ReschduleError.title, m.ReschduleError.description)
                        })
                },
                a.handleSchedulingError = function(e, t) {
                    a.err_title = e,
                        a.err_desc = t,
                        a.showSchedulingError = !0,
                        o.$broadcast("thankYouPageError", e, t),
                        h(function() {
                            a.$digest()
                        })
                },
                a.prepopulateHAData = function() {
                    o.scheduleForm.instructions = "",
                    o.shoppingCart && o.shoppingCart.options && (o.scheduleForm.instructions = o.shoppingCart.options.delivery_remarks, o.earliestDate || (o.earliestDate = o.shoppingCart.options.request_delivery_date)),
                        o.earliestDate ? (o.scheduleForm.selectedDate = a.formatSchedulingDate(o.earliestDate), h(function() {
                            a.$digest()
                        })) : a.showSchedulingError = !0
                },
            o.isHAinCart && a.getAvailableDatesForOrder(),
                a.$on("orderSummaryPageActions",
                    function() {
                        a.showSchedulingError = !1,
                        o.isHAinCart && a.getAvailableDatesForOrder()
                    }),
                a.subscribeSMS = function() {
                    if (a.subscribedPhoneNumber && a.subscribeSMSFORM.$valid) {
                        var n = angular.copy(a.subscribedPhoneNumber);
                        n = n.replace(/\s/g, ""),
                            n = n.replace(/-/g, "");
                        var i = {
                            phone_number: n
                        };
                        e.subscribeSMS(s.orderId, i, t.PAGECONTEXT.THANKYOU_PAGE).then(function(e) {
                            a.subscriptionSuccess = !0,
                                a.isSubscriptionSubmitted = !1,
                                h(function() {
                                    a.$digest()
                                })
                        }).E400(function(e) {
                            a.handleSchedulingError(m.defaultError.title, m.defaultError.description)
                        }).E401(function(e) {
                            a.handleSchedulingError(m.defaultError.title, m.defaultError.description)
                        }).E404(function(e) {
                            a.handleSchedulingError(m.defaultError.title, m.defaultError.description)
                        }).fail(function(e) {
                            a.handleSchedulingError(m.defaultError.title, m.defaultError.description)
                        }),
                            h(function() {
                                window.utag && utag.link({
                                    link_cat: "Thank You Page",
                                    link_id: "ORDER_STATUS_SMS",
                                    link_meta: "link_name:Order Status SMS",
                                    link_position: "thankyou>Order Status SMS"
                                })
                            })
                    }
                }
        }]),
    checkoutApp.controller("OrderPlacedCtrl", ["CheckoutService", "constants", "financingService", "ConfirmService", "updateUtilities", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "$window",
        function(e, t, n, i, r, a, o, s, c, l, d, p, u) {
            a.validate = function(e) {
                e["class"] = e.$invalid ? "error focus": "focus valid",
                    e.$dirty = !0
            },
                a.thankyou = function() {
                    o.$broadcast("saveImpression", o.shoppingCart, "new ecom step3|thankyou"),
                        a.orderRef = "#" + o.orderId,
                        a.onFocus = r.formOnFocus,
                        a.title = "fraud" == o.orderType ? "Thank you for ordering from samsung": "Thank you. Your order has been placed.",
                        a.showfandfDescription = o.isFandfEnabled,
                        a.showPaymentMessageForV3 = EcomApi.isTransformRequired,
                    o.shoppingCart.finance_plan && (o.financePlan = o.shoppingCart.finance_plan, o.financingDetails = o.shoppingCart.payment.td_financing)
                },
                o.shoppingCart ? a.thankyou() : e.getOrder(s.orderId, t.PAGECONTEXT.THANKYOU_PAGE).then(function(e) {
                    var t = e.data;
                    o.orderId = e.displayOrderID,
                        o.selectedShippingMethod = t.shipping_method,
                        o.shippingAddress = t.shipping_info,
                        o.addedPayment = t.payment,
                        o.refreshCartHelper(t),
                    t.finance_plan && (o.financePlan = t.finance_plan, o.financingDetails = t.payment.td_financing),
                    t.shipping_method && (o.selectedShippingMethod.displayText = o.shippingOptionsText[t.shipping_method.description]),
                        $(".cart-basket").text(""),
                        o.isIE() ? ($(".gnb-b2c-icons-cart a svg").remove(), $(".gnb-b2c-icons-cart a").prepend('<svg viewBox="0 0 100 100" id="cart-open"><circle cx="28" cy="90" r="10"/><circle cx="86" cy="90" r="10"/><path d="M86 14v42H28V13.86C28 6.205 21.794 0 14.14 0H0v14h14v42c0 7.732 6.268 14 14 14h58c7.732 0 14-6.268 14-14V14H86z"/></svg>')) : $(".gnb-b2c-icons-cart a svg use").attr("xlink:href", "/us/resources/navigation/assets/images/sprite.symbol.svg#cart-open"),
                        $.cookie("s_ecom_sc_cnt", 0, {
                            path: "/",
                            domain: ".samsung.com"
                        }),
                        a.thankyou(),
                        o.$digest(),
                        a.$apply()
                }).fail(function(e) {
                    console.error("thankyou-page error: " + e.responseText),
                        p.path("/cart-info/"),
                        o.$digest()
                }),
                a.subTitle = function() {
                    return "fraud" == o.orderType ? "subTitle-fraud-order": "subtitle-confirmed-order"
                },
                a.initRRFeed = function() {
                    if (window.r3_common) {
                        var e = this;
                        a.setCookie();
                        var t = new window.r3_common;
                        window.R3_COMMON = t,
                            t.setChannel("web"),
                            t.setApiKey("f20dc17e1482cd47"),
                            t.setBaseUrl("//recs.richrelevance.com/rrserver/"),
                            t.setSessionId(a.rrSessionID),
                            t.setClickthruServer(window.location.protocol + "//" + window.location.host);
                        var n = Cookies.get("prof_bpno_s");
                        n || (n = e.rrSessionID),
                            t.setUserId(n),
                            t.addPlacementType("purchase_complete_page.rr1");
                        var i = new r3_purchased;
                        i.setOrderNumber(o.orderId),
                        o.cartItems && o.cartItems.length > 0 && (o.cartItems.forEach(function(e) {
                            i.addItemIdPriceQuantity(e.sku_id, e.line_item_cost.price.amount + "", e.quantity + "")
                        }), window.r3())
                    }
                },
                a.setCookie = function() {
                    a.rrSessionID = Cookies.get("rr_session_id"),
                    a.rrSessionID || (a.rrSessionID = 1e18 * Math.random(), Cookies.set("rr_session_id", this.rrSessionID, {
                        expires: 30
                    }))
                },
                a.btnCarrierPlan = function() {
                    window.location.href = SCart.URL.CARRIER_ACTIVATION_URL(o.shoppingCart.cart_id)
                },
            window.isMobile() || a.initRRFeed(),
            o.isMobileAppView() && "undefined" != typeof Splus && "undefined" != typeof Splus.notify && Splus.notify("SUCCESS", o.orderId),
                a.print = function() {
                    u.print()
                }
        }]),
    checkoutApp.controller("RelevanceController", ["CheckoutService", "constants", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "errors", "updateUtilities", "$timeout",
        function(e, t, n, i, r, a, o, s, c, l, d, p) {
            var u, f = function(e) {
                if (e.line_items.length > 0 && window.r3_common) {
                    var t = _.pluck(e.line_items, "sku_id"),
                        i = this;
                    n.setCookie();
                    var r = new window.r3_common;
                    window.R3_COMMON = r,
                        r.setChannel("web"),
                        r.setApiKey("f20dc17e1482cd47"),
                        r.setBaseUrl("//recs.richrelevance.com/rrserver/"),
                        r.setSessionId(n.rrSessionID);
                    var a = Cookies.get("prof_bpno_s");
                    a || (a = i.rrSessionID),
                        r.setUserId(a),
                        r.addPlacementType("cart_page.rr1");
                    var o = new r3_cart;
                    window.R3_CART = o,
                        t.forEach(function(e) {
                            o.addItemId(e)
                        }),
                        window.r3(),
                        RR.jsonCallback = function() {
                            n.RRCallBack()
                        },
                        r3_flush_onload()
                }
            };
            n.$on("fetchCartRecommendations",
                function() {
                    window.isMobile() || e.fetchRecommendations().then(function(e) {
                        var t = [];
                        if (e && e.length > 0 && _.forEach(e,
                                function(e) {
                                    relatedProductItem = {},
                                        relatedProductItem.name = e.display_name,
                                        relatedProductItem.imageURL = e.thumbnail_image,
                                        relatedProductItem.id = e.extRefId || e.sku,
                                    e.cost.msrp_price && (relatedProductItem.retail_price = e.cost.msrp_price.value),
                                        relatedProductItem.price = e.cost.sale_price.value,
                                    e.product_image && (relatedProductItem.mf_logo = e.product_image.replace("http://", "//").replace("https://", "//")),
                                        relatedProductItem.linkURL = e.pdp_url,
                                        t.push(relatedProductItem)
                                }), t && t.length > 0) {
                            i.relevance.items = t;
                            var r = $(".fb-items-carousel");
                            r && r.hasClass("slick-initialized") && r.slick("unslick"),
                                i.$digest(),
                                n.setCarousel(),
                            $(".sticky-holder").hasClass("bottom") && $(".sticky-holder").removeClass("bottom")
                        }
                    }).always(function() { (!i.relevance.items || i.relevance.items && 0 == i.relevance.items.length) && (i.fetchCartRecommendations = !1, i.$broadcast("accessoriesAvailable"), p(function() {
                        i.$digest()
                    }))
                    })
                }),
                n.$on("accessoriesAvailable",
                    function() {
                        if (!window.isMobile()) {
                            var e = [],
                                t = [],
                                r = [];
                            cartItems = _.clone(i.cartItems),
                            cartItems.length > 1 && cartItems.sort(function(e, t) {
                                return t.line_item_cost.price.amount / t.quantity - e.line_item_cost.price.amount / e.quantity
                            });
                            var a = cartItems[0];
                            if (n.doNotIncludeSkus = [], _.forEach(i.cartItems,
                                    function(e) {
                                        n.doNotIncludeSkus.push(e.sku_id)
                                    }), a && a.relatedProducts) {
                                var o = 1e4;
                                for (var s in a.relatedProducts) {
                                    var c = a.relatedProducts[s],
                                        l = {}; - 1 == n.doNotIncludeSkus.indexOf(s) && (l.skuId = s, c.familyId && (l.familyId = c.familyId), c.hasOwnProperty("sort_order") ? l.sortOrder = c.sort_order: (l.sortOrder = o, o++), e.push(l))
                                }
                                e && e.length > 0 && (e.sort(function(e, t) {
                                    return e.sortOrder - t.sortOrder
                                }), _.forEach(e,
                                    function(e) {
                                        e.familyId ? -1 == r.indexOf(e.familyId) && (r.push(e.familyId), t.push(e)) : t.push(e)
                                    })),
                                    t = _.unique(t),
                                    t.length >= 9 ? (n.toBeFilledCount = 0, t = t.splice(0, 9)) : n.toBeFilledCount = n.toBeFilledCount - (t.length ? t.length: 0),
                                    n.doNotIncludeSkus = n.doNotIncludeSkus.concat(_.pluck(t, "skuId")),
                                    n.constructRR(t, "RelatedProducts")
                            }
                            n.toBeFilledCount > 0 && n.itemsInRRArray && !i.isRRDone && (i.isRRDone = !0, n.RRCallBackExtd()),
                                i.isRelatedProductsDone = !0
                        }
                    }),
                n.RRCallBack = function() {
                    n.itemsInRRArray = RR.data.JSON,
                    !i.isRelatedProductsDone || i.isRRDone || i.fetchCartRecommendations || (i.isRRDone = !0, n.RRCallBackExtd())
                },
                n.RRCallBackExtd = function() {
                    if (n.itemsInRRArray.placements.length > 0) {
                        var e = [];
                        _.forEach(n.itemsInRRArray.placements[0].items,
                            function(t) {
                                e.push(t.id)
                            }),
                            e = _.difference(e, n.doNotIncludeSkus),
                            e = e.splice(0, 9),
                            n.constructRR(e, "RR")
                    }
                },
                n.setPriceForRRItems = function(e) {
                    n.relevance && n.relevance.items && n.relevance.items.length > 0 && e && e.length > 0 && (_.forEach(e,
                        function(e) {
                            item = _.find(n.relevance.items,
                                function(t) {
                                    return t.id == e.sku
                                }),
                            item && e && (e.msrp_price && (item.retail_price = e.msrp_price.value), e.sale_price && (item.price = e.sale_price.value))
                        }), p(function() {
                        i.$digest()
                    }))
                },
                n.constructRR = function(t, r) {
                    var a = t;
                    "RelatedProducts" == r && (t = _.pluck(t, "skuId"));
                    if (t && t.length > 0) {
                        var o = [];
                        window.utag && utag.link({
                            product_also_bought_sku: t,
                            product_also_bought_count: t.length + ""
                        }),
                            e.getPromotions(t).then(function(s) {
                                t && t.length > 0 && e.getV3PromotionsPrice(t).then(function(e) {
                                    e && e.length > 0 && n.setPriceForRRItems(e)
                                }),
                                    _.forEach(s,
                                        function(e) {
                                            relatedProductItem = {},
                                                relatedProductItem.name = e.displayName,
                                                relatedProductItem.imageURL = e.thumbnailImage,
                                                relatedProductItem.id = e.extRefId || e.sku,
                                            e.pricing.msrpPrice && (relatedProductItem.retail_price = e.pricing.msrpPrice.value),
                                                relatedProductItem.price = e.pricing.salePriceWithQuantity.value,
                                            e.productImage && (relatedProductItem.mf_logo = e.productImage.replace("http://", "//").replace("https://", "//")),
                                                relatedProductItem.linkURL = e.pdpUrl,
                                            e.sku && "RelatedProducts" == r && (sortId = _.find(a,
                                                function(t) {
                                                    return t.skuId == e.sku
                                                }), relatedProductItem.sortOrder = sortId.sortOrder),
                                                o.push(relatedProductItem)
                                        }),
                                o && o.length > 0 && o.sort(function(e, t) {
                                    return e.sortOrder - t.sortOrder
                                }),
                                    "RR" == r && 0 != i.relevance.items.length && n.ItemsAdded ? (o = o.splice(0, n.toBeFilledCount), i.relevance.items = i.relevance.items.concat(o), n.ItemsAdded = !0) : "RelatedProducts" == r && 0 != i.relevance.items.length && n.ItemsAdded ? (i.relevance.items = o.concat(i.relevance.items), i.relevance.items = i.relevance.items.splice(0, 9), n.ItemsAdded = !0) : n.ItemsAdded || (i.relevance.items = o, n.ItemsAdded = !0),
                                    rr = $(i.ischeckoutv3ui ? ".fb-items-carousel": ".you-may-need-products-carousel"),
                                rr && rr.hasClass("slick-initialized") && rr.slick("unslick"),
                                    i.$digest(),
                                    n.setCarousel(),
                                $(".sticky-holder").hasClass("bottom") && $(".sticky-holder").removeClass("bottom")
                            })
                    }
                },
                n.init = function(e) {
                    i.isRelatedProductsDone = !1,
                        i.isRRDone = !1,
                        clearTimeout(u),
                        window.r3_common ? f(e) : u = setTimeout(n.init, 3e3, e)
                },
                n.setCookie = function() {
                    n.rrSessionID = Cookies.get("rr_session_id"),
                    n.rrSessionID || (n.rrSessionID = 1e18 * Math.random(), Cookies.set("rr_session_id", this.rrSessionID, {
                        expires: 30
                    }))
                },
                n.addRRItem = function(n) {
                    e.addItem(n, 1, t.PAGECONTEXT.PROMOTIONS).then(function(e) {
                        i.removedItem = null,
                            i.removedItemIndex = null,
                            i.$broadcast("refreshCart", e, !0),
                            setTimeout(function() {
                                    $("html, body").animate({
                                            scrollTop: $("#_view_cart").offset().top
                                        },
                                        "slow")
                                },
                                200)
                    }).E400(function(e) {
                        i.latestPurchaseflow(e),
                            i.$broadcast("cartStepError", l.AddToCartError.title, l.AddToCartError.description)
                    }).E401(function(e) {
                        i.latestPurchaseflow(e),
                            i.promptReLogin(e)
                    }).E404(function(e) {
                        i.latestPurchaseflow(e),
                            i.$broadcast("cartStepError", l.AddToCartError.title, l.AddToCartError.description)
                    }).E409(function(e) {
                        i.latestPurchaseflow(e),
                            e = JSON.parse(e.responseText),
                            "InventoryUnavailable" == e.error ? i.$broadcast("cartStepError", l.InventoryUnavailableError.title, l.InventoryUnavailableError.description) : "PrivateStoreLimitRestriction" == e.error ? i.$broadcast("cartStepError", l.PrivateStoreLimitRestriction.title, l.PrivateStoreLimitRestriction.description) : "PrivateStoreLimitAndMinQuantityRestriction" == e.error ? i.$broadcast("cartStepError", l.PrivateStoreLimitAndMinQuantityRestriction.title, l.PrivateStoreLimitAndMinQuantityRestriction.description) : "PrivateStoreMinQuantityRestriction" == e.error ? i.$broadcast("cartStepError", l.PrivateStoreMinQuantityRestriction.title, l.PrivateStoreMinQuantityRestriction.description) : i.$broadcast("cartStepError", l.AddItemError.title, l.AddItemError.description)
                    }).E500(function(e) {
                        d.displayAddToCartErrorMessage(e)
                    }).fail(function(e) {
                        i.$broadcast("cartStepError", l.AddItemError.title, l.AddItemError.description),
                            console.log("unable to add item to cart" + e)
                    })
                },
                n.setCarousel = function() {
                    var e;
                    i.ischeckoutv3ui ? (e = $(".fb-items-carousel"), window.utag && utag.link({
                        link_cat: "customers also bought widget loaded" + i.fetchCartRecommendations,
                        link_id: "customers_also_bought_carousel loaded" + i.fetchCartRecommendations,
                        link_meta: "link_name:" + i.fetchCartRecommendations,
                        link_position: "customers also bought>page loaded " + i.fetchCartRecommendations
                    })) : (e = $(".you-may-need-products-carousel"), e.on("beforeChange",
                        function(e, t, n, r) {
                            var a = r > n ? "next": "previous",
                                o = r / 3;
                            window.utag && utag.link({
                                link_cat: "customers also bought" + i.fetchCartRecommendations,
                                link_id: "customers_also_bought_carousel" + o + "_" + a + i.fetchCartRecommendations,
                                link_meta: "link_name:" + a + i.fetchCartRecommendations,
                                link_position: "customers also bought>page " + o + i.fetchCartRecommendations
                            })
                        })),
                    e.hasClass("slick-initialized") && e.slick("unslick"),
                        e.not(".slick-initialized").slick({
                            dots: !0,
                            infinite: !1,
                            speed: 300,
                            slidesToShow: 3,
                            slidesToScroll: 3,
                            dots: !0,
                            responsive: [{
                                breakpoint: 1024,
                                settings: {
                                    slidesToShow: 2,
                                    slidesToScroll: 2,
                                    infinite: !0,
                                    dots: !0
                                }
                            },
                                {
                                    breakpoint: 768,
                                    settings: {
                                        slidesToShow: 1,
                                        slidesToScroll: 1,
                                        infinite: !0,
                                        dots: !0
                                    }
                                }]
                        })
                },
                n.$on("refreshCart",
                    function(e, t, i) {
                        i && !window.isMobile() && (n.ItemsAdded = !1, n.toBeFilledCount = 9, n.init(t))
                    })
        }]),
    checkoutApp.controller("SocialSharingCtrl", ["$scope", "$rootScope", "$http", "$routeParams", "$route", "$log", "$location",
        function(e, t, n, i, r, a, o) {
            var s, c;
            e.computeURL = function() {
                var e = t.shoppingCart.line_items,
                    n = [];
                angular.forEach(e,
                    function(e) {
                        n.push(e)
                    }),
                n.length > 1 && n.sort(function(e, t) {
                    return t.line_item_cost.price.amount / t.quantity - e.line_item_cost.price.amount / e.quantity
                }),
                    s = n[0].attributes.product_details_page_url,
                    c = n[0].attributes.display_name
            },
                e.sendEmail = function() {
                    e.computeURL();
                    var t = "Hi,%0D%0A%0D%0AI got this " + c + " from Samsung.com . Check it out.%0D%0A%0D%0A" + s;
                    window.open("mailto:?subject=Got this amazing product from Samsung.com&body=" + t, "_self")
                },
                e.socialSharing = function(t) {
                    e.computeURL(),
                        "facebook" == t ? window.open("http://www.facebook.com/sharer.php?u=" + s) : "twitter" == t && window.open("//twitter.com/intent/tweet?text=I got this from samsung.com, check it out. %0a" + s)
                }
        }]),
    checkoutApp.controller("CartFinanceCtrl", ["CheckoutService", "constants", "$scope", "$rootScope", "updateUtilities", "ModalService", "$timeout", "$location", "errors",
        function(e, t, n, i, r, a, o, s, c) {
            var l = $("input[name='isPublish']").val(),
                d = "1" === l ? "/us/smg": "";
            n.cartFinanceMain = !0,
                n.cartFinanceTerm1 = !1,
                n.cartFinanceTerm2 = !1,
                n.cartFinanceTerm3 = !1,
                n.cartFinanceTermDownload = "#",
                n.returnToCart = function() {
                    i.redirectPostLogin = t.CHECKOUT_LOGIN_REDIRECT.CART_INFO,
                        s.path("/cart-info"),
                        o(function() {
                            i.$digest()
                        })
                },
            window.isLogin() && "A" != i.financingStatus && "P" != i.financingStatus || n.returnToCart(),
            i.shoppingCart && i.shoppingCart.purchase_flow_id.id || e.getCartItems(t.PAGECONTEXT.CART_FINANCE).then(function(e) {
                i.shoppingCart = e,
                    i.$digest(),
                    i.$broadcast("saveImpression", i.shoppingCart, "Finance Application")
            }).E401(function(e) {
                i.promptReLogin(e)
            }).fail(function() {
                i.$broadcast("cartStepError", "We are unable to process your request at this time.", "Please try after sometime. Sorry for the inconvenience.")
            }),
                n.states = ["AA", "AP", "AE", "AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "DC", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY"],
                n.onFocus = r.formOnFocus,
                n.financingForm = {},
            i.shoppingCart && i.$broadcast("saveImpression", i.shoppingCart, "Finance Application"),
                n.validate = function(e, t) {
                    if ("date" == t) {
                        var n = new Date(e.$modelValue),
                            i = new Date,
                            r = new Date(i.getFullYear() - 21, i.getMonth(), i.getDate());
                        e.$error.notTwentyOneYears = !1,
                            e.$error.futureDate = !1,
                        n > i && (e.$invalid = !0, e.$error.futureDate = !0),
                        n > r && (e.$invalid = !0, e.$error.notTwentyOneYears = e.$error.futureDate ? !1 : !0)
                    }
                    e["class"] = e.$invalid ? "error focus": "focus valid",
                        e.$dirty = !0
                },
                n.validateState = function(e) {
                    e["class"] = e.$invalid ? "error focus": "focus valid",
                        e.$dirty = !0
                },
                n.cartFinanceTermAccept = function() {
                    n.popupWinindow && n.popupWinindow.close(),
                    n.cartFinanceTerm1 && (n.financingForm.userTerms1 = !0),
                    n.cartFinanceTerm2 && (n.financingForm.userTerms2 = !0),
                    n.cartFinanceTerm3 && (n.financingForm.userTerms3 = !0),
                        n.switchPage("main"),
                        n.scrollOnAddressClose(),
                        $("ul.slick-dots li.slick-active").next().trigger("click")
                },
                n.cartFinanceTermCancel = function() {
                    n.switchPage("main"),
                        n.scrollOnAddressClose()
                },
                n.cartFinanceTermPrint = function() {
                    var e;
                    n.cartFinanceTerm1 && (e = "cartFinanceTerm1"),
                    n.cartFinanceTerm2 && (e = "cartFinanceTerm2"),
                    n.cartFinanceTerm3 && (e = "cartFinanceTerm3");
                    var t = document.getElementById(e).innerHTML;
                    o(function() {
                            n.popupWinindow = window.open("", "_blank", "width=600,height=700,scrollbars=1,menubar=no,toolbar=no,location=no,status=no,titlebar=no"),
                                n.popupWinindow.document.open(),
                                n.popupWinindow.document.write('<html><body onload="window.print()">' + t + "</html>"),
                                n.popupWinindow.document.close(),
                                n.popupWinindow.close()
                        },
                        0),
                    window.utag && utag.link({
                        link_cat: "accept terms and conditions",
                        link_id: "finance_app_print",
                        link_meta: "link_name:print",
                        link_position: "finance application>accept terms and conditions"
                    })
                },
                n.switchPage = function(e) {
                    n.cartFinanceMain = "main" == e ? !0 : !1,
                        n.cartFinanceTerm1 = "term1" == e ? !0 : !1,
                        n.cartFinanceTerm2 = "term2" == e ? !0 : !1,
                        n.cartFinanceTerm3 = "term3" == e ? !0 : !1
                },
                n.openConditionsModal = function(e, t) {
                    var r = {
                        _userTerms1: {
                            name: "e-sign-disclosure",
                            url: "http://s7d2.scene7.com/is/content/SamsungUS/sup/1%20-%20E-Sign%20Samsung%20Credit%20Account_final.pdf"
                        },
                        _userTerms2: {
                            name: "samsung-finacing-program",
                            url: i.relativeImagePath + "/checkout/SamsungFinancingProgramAccountTerms.pdf"
                        },
                        _userTerms3: {
                            name: "td-bank-privacy-notice",
                            url: i.relativeImagePath + "/checkout/RCSPrivacyPolicy.pdf"
                        }
                    };
                    if (t.preventDefault(), "LABEL" !== t.target.tagName) if (i.ischeckoutv3ui) e.$modelValue && "A" !== t.target.tagName ? (e.$setViewValue(!1), e.$render()) : ("_userTerms1" == e.$name && (n.cartFinanceTermDownload = "http://s7d2.scene7.com/is/content/SamsungUS/sup/1%20-%20E-Sign%20Samsung%20Credit%20Account_final.pdf", n.switchPage("term1")), "_userTerms2" == e.$name && (n.cartFinanceTermDownload = i.relativeImagePath + "/checkout/SamsungFinancingProgramAccountTerms.pdf", n.switchPage("term2")), "_userTerms3" == e.$name && (n.cartFinanceTermDownload = i.relativeImagePath + "/checkout/RCSPrivacyPolicy.pdf", n.switchPage("term3"))),
                        setTimeout(function() {
                                $("html, body").animate({
                                        scrollTop: $(".financing-content-header").offset().top
                                    },
                                    "slow")
                            },
                            100);
                    else if (e.$modelValue && "A" !== t.target.tagName) e.$setViewValue(!1),
                        e.$render();
                    else {
                        var o = {
                                download: r[e.$name].url,
                                url: d + "/content/samsung/partials/checkout/tc/" + r[e.$name].name + ".content.html"
                            },
                            s = {
                                fetchCurDoc: function() {
                                    var e;
                                    $(".js-print-class").each(function() {
                                        $(this).is(":visible") && (e = $(this).attr("id"))
                                    }),
                                    e && this.printTerm(e)
                                },
                                printTerm: function(e) {
                                    var t = document.getElementById(e).innerHTML,
                                        n = window.open("", "_blank", "width=600,height=700,scrollbars=1,menubar=no,toolbar=no,location=no,status=no,titlebar=no");
                                    n.document.open(),
                                        n.document.write('<html><body onload="window.print()">' + t + "</html>"),
                                        n.document.close(),
                                    window.utag && utag.link({
                                        link_cat: "accept terms and conditions",
                                        link_id: "finance_app_print",
                                        link_meta: "link_name:print",
                                        link_position: "finance application>accept terms and conditions"
                                    })
                                }
                            };
                        a.open(void 0, "md", o, s, "conditions-modal", $("#conditionsModal").html()).then(function() {
                                e.$setViewValue(!0),
                                    e.$render()
                            },
                            function() {})
                    }
                },
                n.scrollOnAddressClose = function() {
                    setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $("#userTermsSection").offset().top
                                },
                                "slow")
                        },
                        100)
                },
                n.openAddressSuggesion = function(e, t) {
                    $("body").append("<div class='checkout-modal-overlay'></div>");
                    var r = {
                            useOriginal: function(e) {
                                n.setAddress(e, "original"),
                                    i.$broadcast("closeModal"),
                                    $(".checkout-modal-overlay").remove(),
                                    n.scrollOnAddressClose(),
                                window.utag && utag.link({
                                    link_cat: "choose address",
                                    link_id: "finance_app_choose_address",
                                    link_meta: "link_name:original",
                                    link_position: "finance application>choose address>original"
                                })
                            },
                            addressSelected: function(e) {
                                n.setAddress(e, "suggested"),
                                    i.$broadcast("closeModal"),
                                    $(".checkout-modal-overlay").remove(),
                                    n.scrollOnAddressClose(),
                                window.utag && utag.link({
                                    link_cat: "choose address",
                                    link_id: "finance_app_choose_address",
                                    link_meta: "link_name:suggested",
                                    link_position: "finance application>choose address>suggested"
                                })
                            },
                            modalClose: function() {
                                i.$broadcast("closeModal"),
                                    $(".modal-overlay").remove(),
                                    n.scrollOnAddressClose(),
                                    i.$digest()
                            }
                        },
                        o = {
                            originalAddress: e,
                            suggestedAddresses: t
                        };
                    n.modal = a.open(void 0, "addmd", o, r, "address-modal", $("#suggestedAddress").html()).then(function() {},
                        function() {})
                },
                n.setAddress = function(e, t) {
                    n.financingForm.address1 = e.line1,
                        n.financingForm.address2 = e.line2,
                        n.financingForm.city = e.city,
                        n.financingForm.state = e.state_or_province,
                        n.financingForm.postal_code = e.postal_code,
                    "original" == t && n.postFinancingApplication()
                },
                n.getSuggestedAddressStub = function() {
                    var e = {
                            line1: "test line1",
                            line2: "test line2",
                            city: "city1",
                            state_or_province: "WA",
                            postal_code: "10019",
                            country: "US"
                        },
                        t = {
                            line1: "test line2",
                            line2: "test line22",
                            city: "city2",
                            state_or_province: "AL",
                            postal_code: "10020",
                            country: "US"
                        },
                        n = {
                            line1: "test line3",
                            line2: "test line222",
                            city: "city3",
                            state_or_province: "NY",
                            postal_code: "10021",
                            country: "US"
                        };
                    return [e, t, n]
                },
                o(function() {
                        $("select").selectric(),
                            n.setCarousel()
                    },
                    0),
                e.getFinancingPubKey(t.PAGECONTEXT.COMMON).then(function(e) {
                    i.financingPubKey = e
                }),
                e.getUserProfile().then(function(e) {
                    e = JSON.parse(e),
                    e && (n.financingForm.email = e.emailaddress, n.financingForm.home_phone_number = e.cellPhone || e.telePhone || e.workPhone, n.$digest(), n.financingForm.email && ($("#_userEmail").focus().blur(), $("#_userEmail").parents(".input-control").addClass("focus")), n.financingForm.home_phone_number && ($("#_userPhoneNo").focus().blur(), $("#_userPhoneNo").parents(".input-control").addClass("focus")), setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: 0
                                },
                                "slow")
                        },
                        200))
                }),
                n.tdResponse = function(e) {
                    var n = e.td_bank_finance.td_bank_credit_application.response;
                    n.credit_application_response.application_status && "A" == n.credit_application_response.application_status || "P" == n.credit_application_response.application_status || "D" == n.credit_application_response.application_status ? (i.financingDetails = n.credit_application_response, i.financingStatus = n.credit_application_response.application_status, i.isSufficientCredit = n.credit_application_response.available_credit > i.shoppingCart.cost.total.amount ? !0 : !1, i.newFinancingUser = !0, i.redirectPostLogin = t.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT, s.path("/cart-payment/finance"), i.$digest()) : i.$broadcast("cartStepError", c.FinancingDefaultError.title, c.FinancingDefaultError.description)
                },
                n.postFinancingApplication = function() {
                    e.submitFinanceApplication(n.financingForm, t.PAGECONTEXT.CART_FINANCE).then(function(e) {
                        $.cookie("displayDelayedShipping", "true", {
                            domain: ".samsung.com",
                            path: "/"
                        }),
                            n.tdResponse(e)
                    }).E401(function(e) {
                        i.promptReLogin(e)
                    }).fail(function(e) {
                        e = JSON.parse(e.responseText),
                            i.$broadcast("cartStepError", c.FinancingDefaultError.title, c.FinancingDefaultError.description)
                    })
                },
                n.submitApplicationCta = function() {
                    n.financingAddress = {},
                        n.financingAddress.city = n.financingForm.city,
                        n.financingAddress.country = "US",
                        n.financingAddress.line1 = n.financingForm.address1,
                    n.financingForm.address2 && (n.financingAddress.line2 = n.financingForm.address2),
                        n.financingAddress.postal_code = n.financingForm.postal_code,
                        n.financingAddress.state_or_province = n.financingForm.state,
                        e.validateAddress(n.financingAddress).then(function(e) {
                            n.validateAddressResponse(e) && n.postFinancingApplication()
                        }).E400(function() {
                            i.$broadcast("paymentStepError", c.AddressInvalid.title, c.AddressInvalid.description)
                        }).E404(function() {
                            i.$broadcast("paymentStepError", c.AddressInvalid.title, c.AddressInvalid.description)
                        }).fail(function(e) {
                            var t = JSON.parse(e.responseText);
                            401 == t.statusCode ? (t.status = 401, i.promptReLogin(t)) : i.$broadcast("paymentStepError", c.AddressInvalid.title, c.AddressInvalid.description)
                        })
                },
                n.validateAddressResponse = function(e) {
                    return e && e.success ? !0 : e && !e.success && e.alternatives && e.alternatives.length > 0 ? (n.openAddressSuggesion(n.financingAddress, e.alternatives), !1) : (i.$broadcast("paymentStepError", c.AddressInvalid.title, c.AddressInvalid.description), !1)
                },
                n.toggleShowPersonalDetails = function() {
                    $("#personalDetails").next().is(":visible") ? ($("#personalDetails").next().slideUp(), $("#personalDetails").parent().removeClass("form-active")) : ($("#personalDetails").next().slideDown(), $("#personalDetails").parent().addClass("form-active"))
                },
                n.toggleShowHousingAndIncomeDetails = function() {
                    $("#housingAndIncomeDetails").next().is(":visible") ? ($("#housingAndIncomeDetails").next().slideUp(), $("#housingAndIncomeDetails").parent().removeClass("form-active")) : ($("#housingAndIncomeDetails").next().slideDown(), $("#housingAndIncomeDetails").parent().addClass("form-active"))
                },
                n.toggleShowUserTermsSection = function() {
                    $("#userTermsSection").next().is(":visible") ? ($("#userTermsSection").next().slideUp(), $("#userTermsSection").parent().removeClass("form-active")) : ($("#userTermsSection").next().slideDown(), $("#userTermsSection").parent().addClass("form-active"))
                },
                n.setCarousel = function() {
                    var e = $(".terms-carousel-holder");
                    e.hasClass("slick-initialized") && e.slick("unslick"),
                        e.slick({
                            infinite: !1,
                            speed: 300,
                            slidesToShow: 1,
                            slidesToScroll: 1,
                            dots: !0,
                            responsive: [{
                                breakpoint: 1024,
                                settings: {
                                    slidesToShow: 1,
                                    slidesToScroll: 1,
                                    infinite: !0,
                                    dots: !0
                                }
                            },
                                {
                                    breakpoint: 768,
                                    settings: {
                                        slidesToShow: 1,
                                        slidesToScroll: 1,
                                        infinite: !0,
                                        dots: !0
                                    }
                                }]
                        })
                };
            var p = function() {
                n.cartFinanceMain || ($(window).width() < 768 ? $("body").css("padding-bottom", $(".financing-terms-actions").outerHeight() + "px") : $("body").css("padding-bottom", "0px"))
            };
            $(window).on("resize", p),
                p()
        }]),
    checkoutApp.controller("CheckoutSingleClickCtrl", ["CheckoutService", "constants", "errors", "updateUtilities", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "$timeout", "cryptoUtil",
        function(e, t, n, i, r, a, o, s, c, l, d, p, u) {
            function f(e) {
                var t = e.siblings(".existing-shipping-address").find(".delete-section");
                _.each(t,
                    function(e) {
                        h(!1, $(e))
                    })
            }
            function h(e, t) {
                e ? (t.find(".btn-remove").hide(), t.find(".delete-dialogue-box").show()) : (t.find(".btn-remove").show(), t.find(".delete-dialogue-box").hide())
            }
            function g(n) {
                e.deleteShippingAddress(n, t.PAGECONTEXT.SHIPPING_INFO).then(function(e) {
                    $("." + n).parent().hide()
                }).fail(function(e) {
                    a.$broadcast("paymentStepError", "Error in deleting shipping address", "Please try again")
                })
            }
            function m() {
                r.selectedPayment || "financing" == r.newCard || (r.newCard = !0, r.selectedPayment = a.cardInfo),
                a.billing.line2 && "" != a.billing.line2 || (a.billing = _.omit(a.billing, "line2"));
                var e, t, n = {},
                    i = {},
                    o = "PUT",
                    s = a.billing,
                    c = r.newCard;
                t = "financing" == c ? a.financingDetails: r.selectedPayment;
                var l = !a.isLoggedIn;
                a.disableSaveCard() && (r.cardInfo.saveCard = !0);
                var d = a.cardInfo.saveCard;
                if (this.shoppingCartId = a.shoppingCart.cart_id, "financing" == c) {
                    var i = {};
                    i.billing_info = t.billing_info,
                        i.billing_record = {},
                        i.billing_record.billing_record_id = t.billing_record_id,
                        i.billing_record.account_provider = "ECom",
                        e = SCart.URL.EXISTING_PAYMENT_URL(this.shoppingCartId, !0)
                } else if (c) {
                    var i = {};
                    i.credit_card_details_encrypted = u.encryptCardInfo(t),
                        i.billing_info = s,
                    l || (i.save_payment_method = d ? !0 : !1);
                    var e = SCart.URL.PAYMENT_URL(this.shoppingCartId, !0);
                    l && (e = SCart.URL.GUEST_PAYMENT_URL(this.shoppingCartId, !0))
                } else {
                    var i = {};
                    i.billing_info = t.billing_info,
                        i.billing_record = {},
                        i.billing_record.billing_record_id = t.id,
                        i.billing_record.account_provider = t.account_provider,
                        e = SCart.URL.EXISTING_PAYMENT_URL(this.shoppingCartId, !0)
                }
                return n.method = o,
                    n.payload = i,
                    n.url = e,
                    n.handler = "addPaymentHandler",
                    n
            }
            function y() {
                var e, t = {},
                    n = "POST";
                return r.contShippingAddress(),
                    e = SCart.URL.VALIDATE_ADDRESS_URL(!0),
                    t.method = n,
                    t.payload = r.validateAddress,
                    t.url = e,
                    t.handler = "validateAddressHandler",
                    t
            }
            function v() {
                var e, t = {},
                    n = "PUT";
                return r.contShippingAddress(),
                    r.addUpdateShippingInfo(),
                a.shoppingCart && a.shoppingCart.purchase_flow_id && (this.purchaseFlowId = a.shoppingCart.purchase_flow_id.id),
                    e = SCart.URL.SHIPPING_INFO_URL(this.purchaseFlowId, !0),
                    t.method = n,
                    t.payload = {
                        shipping_info: a.shippingAddress,
                        save_for_identity: !0
                    },
                    t.url = e,
                    t.handler = "addShippingAddressHandler",
                    t
            }
            function C() {
                var e, t = {},
                    n = "GET";
                return this.shoppingCartId = a.shoppingCart.cart_id,
                    e = SCart.URL.SHIPPING_OPTIONS_URL(this.shoppingCartId, !0),
                    t.method = n,
                    t.url = e,
                    t.handler = "fetchShippingOptionsHandler",
                    t
            }
            function S() {
                var e, t = {},
                    n = "PUT";
                this.shoppingCartId = a.shoppingCart.cart_id;
                var i = {};
                return a.userPreferredShippingMethod ? (i.id = a.userPreferredShippingMethod.id, i.description = a.userPreferredShippingMethod.description) : (i.id = a.selectedShippingMethod.id, i.description = a.selectedShippingMethod.description),
                    e = SCart.URL.SHIPPING_METHOD_URL(this.shoppingCartId, !0),
                    t.method = n,
                    t.payload = i,
                    t.url = e,
                    t.handler = "applyShippingMethodHandler",
                    t
            }
            function b() {
                var e, t = {},
                    n = "POST";
                return this.shoppingCartId = a.shoppingCart.cart_id,
                    e = SCart.URL.ADD_FINANCE_PLAN_URL(this.shoppingCartId, !0),
                    t.method = n,
                    t.payload = {
                        finance_plan_id: a.cartFinancingDetails.finance_plan_id
                    },
                    t.url = e,
                    t.handler = "setFinancePlanHandler",
                    t
            }
            a.linkSectionMode,
                a.states = ["Select", "AL", "AK", "AS", "AZ", "AR", "CA", "CO", "CT", "DE", "DC", "FM", "FL", "GA", "GU", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MH", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "MP", "OH", "OK", "OR", "PW", "PA", "PR", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VI", "VA", "WA", "WV", "WI", "WY"],
            a.UIStateInfo.paymentInfo.paymentMethod && "card" != a.UIStateInfo.paymentInfo.paymentMethod || a.UIStateInfo.paymentInfo.isSavedCardSelected || (a.UIStateInfo.paymentInfo.paymentMethod = "card", $("#_paymentTypeCC").prop("checked", !0), $(".checkout-payment-cc-details").show()),
                a.selectDefaultAddress = function() {
                    a.isLoggedIn && a.savedAddress.length > 0 && !a.shoppingCart.payment ? (a.shippingMode = "edit", $(".existing-shipping-address").eq(0).find("input").prop("checked", !0), a.shippingSameAsBilling = !1, r.onAddrSelect(a.savedAddress[0], !0), a.$broadcast("setDefaultDetailsToCart", "savedAddress")) : a.shoppingCart.payment && a.savedAddress.length > 0 && !a.shoppingCart.payment.paypal ? (a.shippingMode = "edit", $(".existing-shipping-address").eq(0).find("input").prop("checked", !0), a.shippingSameAsBilling = !1, r.onAddrSelect(a.savedAddress[0], !0), a.$broadcast("setDefaultDetailsToCart", "savedAddress")) : 0 != a.savedAddress.length || a.shoppingCart.payment && (!a.shoppingCart.payment || a.shoppingCart.payment.paypal) || (a.shippingSameAsBilling = !1, a.shippingMode = "edit", r.singleClickAddressAdded = !0, a.fireSingleClickCheckoutTags()),
                        p(function() {
                            a.$digest()
                        })
                },
                a.selectDefaultPayment = function() {
                    a.isLoggedIn && a.savedPayments.length > 0 && !a.shoppingCart.payment && !a.isFinancingApproved() && "paypal" != o.payment_source ? ($(".saved-cc-card").eq(0).find("input").prop("checked", !0), r.onPaymentSelect(a.savedPayments[0]), a.$broadcast("setDefaultDetailsToCart", "savedPayment")) : a.shoppingCart.payment && !a.shoppingCart.payment.paypal ? a.savedPayments && a.savedPayments.length > 0 ? ($(".saved-cc-card").eq(0).find("input").prop("checked", !0), r.onPaymentSelect(a.savedPayments[0]), a.$broadcast("setDefaultDetailsToCart", "savedPayment")) : (a.UIStateInfo.paymentInfo.isComplete = !1, $("#_paymentTypeCC").prop("checked", !0), $(".checkout-payment-cc-details").show(), r.singleClickPaymentAdded = !0, a.fireSingleClickCheckoutTags()) : (r.singleClickPaymentAdded = !0, a.fireSingleClickCheckoutTags()),
                        p(function() {
                            a.$digest()
                        })
                },
                r.$on("setDefaultDetailsToCart",
                    function(e, t) {
                        "savedPayment" == t && (r.savedPaymentsDone = !0),
                        "savedAddress" == t && (r.savedAddressDone = !0),
                        r.savedAddressDone && r.savedPaymentsDone && r.computeCTA(!1)
                    }),
                a.setFinancingAsPayment = function() {
                    a.paymentMode = "view",
                        a.redirectFromPayPal = !1,
                        a.UIStateInfo.paymentInfo.paymentMethod = "financing",
                        a.UIStateInfo.paymentInfo.paypalStatus = void 0,
                        a.UIStateInfo.paymentInfo.isComplete = !0,
                        a.UIStateInfo.paymentInfo.isChanged = !1,
                        a.UIStateInfo.paymentInfo.isValid = !0,
                        a.UIStateInfo.paymentInfo.isSavedCardSelected = !1,
                        0 == a.savedAddress.length ? a.UIStateInfo.shippingInfo.isComplete = !1 : r.onAddrSelect(a.savedAddress[0], !0),
                        a.shippingSameAsBilling = !1,
                        $("input[name=payMethod]:checked").removeAttr("checked"),
                        $(".financing-bank-details").find("input").prop("checked", !0),
                        $(".checkout-payment-cc-details").hide(),
                        p(function() {
                            a.$digest()
                        })
                },
                r.getShippingOptionsWrapper = function(n) {
                    e.getShippingOptions(t.PAGECONTEXT.SHIPPING_INFO).then(function(i) {
                        if (r.getShippingOptionsDone = !0, a.fireSingleClickCheckoutTags(), r.fetchShippingOptionsCallBack(i), a.UIStateInfo.shippingMethod.isComplete = !0, n && a.UIStateInfo.shippingInfo.isValid) {
                            var o = {};
                            o.id = a.selectedShippingMethod.id,
                                o.description = a.selectedShippingMethod.description,
                                a.UIStateInfo.shippingMethod.isValid = !0,
                                e.updateShippingMethod(o, t.PAGECONTEXT.SHIPPING_METHOD).then(function(e) {
                                    a.shippingMethodMode = "edit",
                                        a.$digest(),
                                        a.$broadcast("refreshCart", e, !1)
                                }).E401(function(e) {
                                    a.promptReLogin(e)
                                })
                        }
                        p(function() {
                            a.$digest()
                        })
                    }).E401(function(e) {
                        var t = JSON.parse(e.responseText);
                        t = t.error,
                        "DRTokenRefreshed" == t && (a.UIStateInfo.shippingMethod.isComplete = !1),
                            a.promptReLogin(e)
                    })
                },
                r.setOptionsDisplayText = function(e) {
                    e.forEach(function(e) {
                        e.displayText = a.shippingOptionsText[e.description]
                    })
                },
                r.fetchShippingOptionsCallBack = function(e) {
                    return e && 0 != e.length ? ($(".checkout-payment-shipping-methods .checkout-payment-form-subtitle").text(""), $(".checkout-payment-shipping-methods .checkout-payment-form-subtitle").text("Select Shipping Method"), window.utag && utag.link({
                        shipping_options_avail: "" + e.length
                    }), e.sort(function(e, t) {
                        return parseFloat(e.cost.amount) - parseFloat(t.cost.amount)
                    }), r.setOptionsDisplayText(e), void r.setDefaultShippingOption(e)) : ($(".checkout-payment-shipping-methods .checkout-payment-form-subtitle").text("No applicable shipping methods"), void(a.cost && a.cost.total && 0 == a.cost.total.amount && $(".checkout-payment-shipping-methods .checkout-payment-form-subtitle").addClass("no-shipping-zero-dollar")))
                },
                r.blurFields = function() {
                    a.billing && (a.billing.email && ($("#_billingaddressInfo_userEmail").focus().blur(), $("#_billingaddressInfo_userEmail").parents(".input-control").addClass("focus")), a.billing.phone && ($("#_billingaddressInfo_userPhoneNo").focus().blur(), $("#_billingaddressInfo_userPhoneNo").parents(".input-control").addClass("focus")), a.billing.first_name && ($("#_billingaddressInfo_firstName").focus().blur(), $("#_billingaddressInfo_firstName").parents(".input-control").addClass("focus")), a.billing.last_name && ($("#_billingaddressInfo_lastName").focus().blur(), $("#_billingaddressInfo_lastName").parents(".input-control").addClass("focus")), a.billing.line1 && ($("#_billingaddressInfo_useraddress").focus().blur(), $("#_billingaddressInfo_useraddress").parents(".input-control").addClass("focus")), a.billing.line2 && ($("#_billingaddressInfo_useraddress1").focus().blur(), $("#_billingaddressInfo_useraddress1").parents(".input-control").addClass("focus")), a.billing.city && ($("#_billingaddressInfo_userCity").focus().blur(), $("#_billingaddressInfo_userCity").parents(".input-control").addClass("focus")), a.billing.postal_code && ($("#_billingaddressInfo_userZipCode").focus().blur(), $("#_billingaddressInfo_userZipCode").parents(".input-control").addClass("focus")), a.billing.state_or_province && "Select" != a.billing.state_or_province && ($("#_billingaddressInfo_userState").focus().blur(), $("#_billingaddressInfo_userState").parents(".input-control").addClass("focus"))),
                    r.address && (r.address.first_name && ($("#_addressInfo_firstname").parents(".input-control").addClass("focus"), $("#_addressInfo_firstname").parents(".input-control").removeClass("error")), r.address.last_name && ($("#_addressInfo_lastname").parents(".input-control").addClass("focus"), $("#_addressInfo_lastname").parents(".input-control").removeClass("error")), r.address.line1 && ($("#_addressInfo_useraddress").parents(".input-control").addClass("focus"), $("#_addressInfo_useraddress").parents(".input-control").removeClass("error")), r.address.line2 && ($("#_addressInfo_useraddress1").parents(".input-control").addClass("focus"), $("#_addressInfo_useraddress1").parents(".input-control").removeClass("error")), r.address.city && ($("#_addressInfo_userCity").parents(".input-control").addClass("focus"), $("#_addressInfo_userCity").parents(".input-control").removeClass("error")), r.address.postal_code && ($("#_addressInfo_userZipCode").parents(".input-control").addClass("focus"), $("#_addressInfo_userZipCode").parents(".input-control").removeClass("error")), r.address.state_or_province && "Select" != r.address.state_or_province && ($("#_addressInfo_userState").parents(".input-control").addClass("focus"), $("#_addressInfo_userState").parents(".input-control").removeClass("error")))
                },
                a.onSameAddress = function(e, t) {
                    h(!1, $(".billing-address-as-shipping")),
                        f($(".billing-address-as-shipping")),
                    e && (r.address = e),
                        r.addressInvalid = !1,
                        r.overrideValidation = !1,
                        r.formChanged = !1,
                        a.selectedAddress = void 0,
                        r.shippingFormvalid = !0,
                        r.alternateAddress = null,
                        a.UIStateInfo.shippingInfo.isValid = !1,
                        a.UIStateInfo.shippingInfo.isChanged = !0,
                        a.shippingMode = "edit",
                    r.address && r.blurFields(),
                        !t && a.shippingSameAsBilling ? ($(".add-new-shipping-address").hide(), a.isLoggedIn && a.savedAddress && a.savedAddress.length > 0 ? ($(".add_new_addr").hide(), $(".add-new-shipping-address").show()) : ($(".add_new_addr").show(), $(".add-new-shipping-address").hide()), a.shippingSameAsBilling = !1, $("#_sameAsShipAddress").removeAttr("checked"), r.shippingForm && r.shippingForm.$valid ? a.UIStateInfo.shippingInfo.isComplete = !0 : "paypal" != a.UIStateInfo.paymentInfo.paymentMethod && "completed" != a.UIStateInfo.paymentInfo.paypalStatus && (a.UIStateInfo.shippingInfo.isComplete = !1)) : t || (a.UIStateInfo.shippingInfo.isComplete = !0, a.shippingSameAsBilling = !0, $(".add_new_addr").hide()),
                        p(function() {
                            a.$digest()
                        }),
                        $("#shipping_addr").find(".input-control").removeClass("error")
                },
                r.initShippingAndPayment = function() {
                    a.shoppingCart && a.shoppingCart.shipping_info && (a.onSameAddress(_.clone(a.shoppingCart.shipping_info), !0), $(".add-new-shipping-address").hide(), $(".add_new_addr").show(), p(function() {
                        r.$digest()
                    })),
                    a.shoppingCart && a.shoppingCart.payment && (a.billing = a.shoppingCart.payment.billing_info, p(function() {
                        a.$digest()
                    })),
                        r.blurFields(),
                    a.shoppingCart && a.shoppingCart.payment && a.shoppingCart.payment.paypal && "TxSuccess" == a.shoppingCart.payment.paypal.paypal_status && a.shoppingCart.is_paypal_auth_valid && ($(".checkout-payment-cc-details").hide(), a.UIStateInfo.paymentInfo.isComplete = !0, a.UIStateInfo.paymentInfo.isValid = !0, a.UIStateInfo.shippingInfo.isComplete = !0, a.UIStateInfo.shippingInfo.isValid = !0, a.UIStateInfo.shippingInfo.isChanged = !0, a.UIStateInfo.paymentInfo.paymentMethod = "paypal", a.UIStateInfo.paymentInfo.paypalStatus = "completed", a.redirectFromPayPal = !0, a.shippingMode = "view", a.selectedAddress = a.shoppingCart && a.shoppingCart.shipping_info ? a.shoppingCart.shipping_info: void 0, "PayPalCredit" == a.shoppingCart.payment.paypal.type ? $("#_paymentTypePaypalCredit").attr("checked", !0) : $("#_paymentTypePaypal").attr("checked", !0))
                },
                a.shippingMethodMode = "edit",
                a.shoppingCart ? (r.getShippingOptionsWrapper(!1), r.initShippingAndPayment()) : e.getCartItems(t.PAGECONTEXT.CART_FINANCE).then(function(e) {
                    a.shoppingCart = e,
                        r.initShippingAndPayment(),
                        a.$digest(),
                        r.getShippingOptionsWrapper(!1)
                }).E401(function(e) {
                    a.promptReLogin(e)
                }).fail(function() {
                    a.$broadcast("cartStepError", "We are unable to process your request at this time.", "Please try after sometime. Sorry for the inconvenience.")
                }),
                a.paymentSource = o.payment_source,
                a.isFinancingOn = "finance" == o.payment_source ? !0 : !1,
                r.validate = function(e) {
                    e["class"] = e.$invalid ? "error focus": "focus valid",
                        e.$dirty = !0
                },
                r.validateState = function(e, t) {
                    e.$setValidity("unselect", "Select" != t),
                        e["class"] = e.$invalid ? "error focus": "focus valid",
                        e.$dirty = !0
                },
                r.onFocus = i.formOnFocus,
                r.$watch("cardForm.$valid",
                    function() {
                        r.cardForm && (r.cardFormvalid = r.cardForm.$valid, a.cost && a.cost.total && 0 != a.cost.total.amount && "paypal" != a.UIStateInfo.paymentInfo.paymentMethod && "completed" != a.UIStateInfo.paymentInfo.paypalStatus && (a.UIStateInfo.paymentInfo.isComplete = r.cardForm.$valid, a.shippingSameAsBilling && (a.UIStateInfo.shippingInfo.isComplete = r.cardForm.$valid)))
                    }),
                r.newCreditCard = function() {
                    if (window.utag && utag.link({
                            link_cat: "add payment method",
                            link_id: "payment_information_payment_method_add_CreditCard",
                            link_meta: "link_name:CreditCard",
                            link_position: "payment information>add payment method"
                        }), a.redirectFromPayPal = !1, a.isLoggedIn && (a.billing.email = a.contact.email, a.billing.phone = a.contact.phone), a.UIStateInfo.paymentInfo.isComplete = r.cardForm.$valid ? !0 : !1, a.UIStateInfo.paymentInfo.paymentMethod = "card", a.UIStateInfo.paymentInfo.paypalStatus = void 0, a.UIStateInfo.paymentInfo.isChanged = !0, a.UIStateInfo.paymentInfo.isValid = !1, a.UIStateInfo.paymentInfo.isSavedCardSelected = !1, r.selectedPayment = void 0, r.isPaypal = !1, $(".checkout-payment-cc-details").show(), $("input[name=payMethod]:checked").removeAttr("checked"), r.scrollToCCSection(), a.isPaymentSourceDR) {
                        $("#btnPaymentCnt").hide();
                        var n = $("#cardFormFrame"),
                            i = n.attr("src");
                        i && i.length > 0 ? (r.scrollToCCSection(), r.manageIframeMessage()) : e.getPaymentUiUrl(t.PAGECONTEXT.PAYMENT_INFO).then(function(e) {
                            e && e.url && ($(".spinner_container").show(), $("#cardFormFrame").attr("src", e.url), r.scrollToCCSection(), r.manageIframeMessage())
                        })
                    } (void 0 == a.shippingSameAsBilling || a.shippingSameAsBilling) && (a.shippingSameAsBilling = !0, $("#_sameAsShipAddress").prop("checked", !0))
                },
                r.paypal = function(e) {
                    window.utag && utag.link({
                        link_cat: "add payment method",
                        link_id: e ? "payment_information_payment_method_add_PaypalCredit": "payment_information_payment_method_add_Paypal",
                        link_meta: e ? "link_name:PaypalCredit": "link_name:Paypal",
                        link_position: "payment information>add payment method"
                    }),
                        $(".checkout-payment-cc-details").hide(),
                        $("input[name=payMethod]:checked").removeAttr("checked"),
                    a.isPaymentSourceDR && $("#btnPaymentCnt").show(),
                        r.isPaypal = !0,
                        r.isPaypalCredit = e,
                        a.UIStateInfo.paymentInfo.paymentMethod = "paypal",
                        a.UIStateInfo.paymentInfo.paypalStatus = "inprocess",
                        a.UIStateInfo.paymentInfo.isChanged = !0,
                        a.UIStateInfo.paymentInfo.isValid = !1,
                        a.UIStateInfo.paymentInfo.isSavedCardSelected = !1,
                        a.UIStateInfo.paymentInfo.isComplete = !1
                },
                r.zipCodeKeyUp = function(e, t) {
                    "cardForm" == t ? r.cardForm.$valid && !e.$invalid && "Select" != a.billing.state_or_province && (r.cardForm.$valid && (a.UIStateInfo.paymentInfo.isComplete = !0), r.computeCTA()) : "shippingForm" == t && r.shippingForm.$valid && !e.$invalid && "Select" != r.address.state_or_province && (r.shippingForm.$valid && (a.UIStateInfo.shippingInfo.isComplete = !0), r.computeCTA())
                },
                r.onPaymentSelect = function(e) {
                    window.utag && utag.link({
                        link_cat: "select payment method",
                        link_id: "payment_information_payment_method_select_CreditCard",
                        link_meta: "link_name:CreditCard",
                        link_position: "payment information>select payment method"
                    }),
                        a.redirectFromPayPal = !1,
                        a.UIStateInfo.paymentInfo.paymentMethod = "card",
                        a.UIStateInfo.paymentInfo.paypalStatus = void 0,
                        a.UIStateInfo.paymentInfo.isComplete = !0,
                        a.UIStateInfo.paymentInfo.isChanged = !0,
                        a.UIStateInfo.paymentInfo.isValid = !1,
                        a.UIStateInfo.paymentInfo.isSavedCardSelected = !0,
                        r.selectedPayment = e,
                        r.newCard = !1,
                        r.isPaypal = !1,
                        a.shippingSameAsBilling = !1,
                        $("input[name=_paymentTypes]:checked").removeAttr("checked"),
                        $(".checkout-payment-cc-details").hide(),
                    a.isPaymentSourceDR && $("#btnPaymentCnt").show()
                },
                r.contPayment = function() {
                    if (null != r.selectedPayment || r.cardFormvalid || r.isPaypal) {
                        if (r.isPaypal) return r.handlePaypal();
                        r.selectedPayment || (r.newCard = !0, r.selectedPayment = a.cardInfo),
                        a.billing.line2 && "" != a.billing.line2 || (a.billing = _.omit(a.billing, "line2")),
                        window.utag && utag.link({
                            link_cat: "payment method",
                            link_id: "checkout_payment_information_payment_method_" + r.selectedPayment,
                            link_meta: "link_name:" + r.selectedPayment,
                            link_position: "payment information>" + r.selectedPayment
                        })
                    }
                },
                r.onPaymentComplete = function() {
                    a.paymentSource = "",
                    a.selectedAddress && a.shippingSameAsBilling && (a.selectedAddress = a.addedPayment.billing_info),
                        a.$broadcast("contactInfoUpdated"),
                    ("view" != a.shippingMode || a.shippingSameAsBilling) && (a.shippingMode = "edit"),
                        a.$digest(),
                        "view" == a.shippingMode && "view" == a.paymentMode ? setTimeout(function() {
                                $("html, body").animate({
                                        scrollTop: $("#_place_order").offset().top
                                    },
                                    "slow")
                            },
                            200) : setTimeout(function() {
                                $("html, body").animate({
                                        scrollTop: $("#_user_address").offset().top
                                    },
                                    "slow")
                            },
                            200)
                },
                r.handlePaypal = function() {
                    e.getPaypalUrl(!a.isLoggedIn, r.isPaypalCredit).then(function(e) {
                        e && e.payment && e.payment.paypal && ($(".spinner_container").show(), $(".spinner_container").addClass("preloader-paypal"), $(".spinner_container").append('<div class="preloader-paypal-msg">We are redirecting you to PayPal. Please be patient. The estimated taxes will change based on your shipping address.</div>'), window.location.href = e.payment.paypal.redirect_url),
                            $(".checkout-payment-cc-details").hide()
                    }).E401(function(e) {
                        a.promptReLogin(e)
                    }).fail(function(e) {
                        a.$broadcast("paymentStepError", "We could not process your request at this time.", "Please try again with a different payment option."),
                        window.utag && utag.link({
                            link_cat: "paypal error response",
                            link_id: "checkout_payment_information_paypal_error_response",
                            link_meta: "link_name:paypal error response",
                            link_position: "payment information"
                        })
                    })
                },
                r.$on("cartAvailable",
                    function() {
                        a.isPaymentSourceDR && e.getPaymentUiUrl().then(function(e) {
                            if (e && e.url) {
                                var t = $("#cardFormFrame");
                                t && t.length > 0 && t.attr("src", e.url)
                            }
                        })
                    }),
                r.$on("profileInfoAvailable",
                    function() {
                        r.selectedPayment || (a.billing.email || (a.billing.email = a.contact.email), a.billing.phone || (a.billing.phone = a.contact.phone), r.blurFields())
                    });
            var E = function() {
                a.isLoggedIn && (r.address.email || (r.address.email = a.contact.email), r.address.phone || (r.address.phone = a.contact.phone)),
                    r.blurshipping()
            };
            r.$on("onUserLogin",
                function() {
                    if (a.isPaymentSourceDR) {
                        var t = $("#cardFormFrame");
                        t && t.length > 0 && t.removeAttr("src")
                    }
                    a.onErrorClose(),
                        e.getUserProfile().then(function(e) {
                            e = JSON.parse(e),
                            e && e.emailaddress && (a.contact || (a.contact = {}), a.contact.email = e.emailaddress, a.contact.phone = e.cellPhone || e.telePhone || e.workPhone, a.userEmail = e.emailaddress, a.billing || (a.billing = {}), a.billing.email = a.contact.email, a.billing.phone = a.contact.phone, 0 != a.cost.total.amount || a.anyPremiumCareSubscriptionCart() || a.cartHasSubscription() || (r.address || (r.address = {}), E()), a.$digest())
                        })
                }),
                r.onPaymentEdit = function() {
                    r.selectedPayment = a.addedPayment,
                    a.addedPayment && a.addedPayment.billing_record_id && p(function() {
                            $("#" + a.addedPayment.billing_record_id).trigger("click")
                        },
                        0),
                        $("input[name=payMethod]:checked").length > 0 ? $("input[id=_paymentTypeCC]:checked").removeAttr("checked") : r.selectedPayment = void 0,
                    0 == $("input[id=_paymentTypeCC]:checked").length && $(".checkout-payment-cc-details").hide(),
                        r.isPaypal = !1,
                        a.paymentMode = "edit",
                        $(".checkout-payment-forms .input-control").addClass("focus")
                },
                r.scrollToCCSection = function() {
                    setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $(".checkout-payment-cc-details").offset().top
                                },
                                "slow"),
                                r.blurFields()
                        },
                        200)
                },
                r.openLinkSection = function() {
                    a.linkSectionMode = "edit"
                },
                r.blurFields(),
            !a.financingPubKey && a.isFinancingOn && "P" == a.financingStatus && e.getFinancingPubKey(t.PAGECONTEXT.COMMON).then(function(e) {
                a.financingPubKey = e
            }),
                r.linkTDAccount = function() {
                    e.linkTDAccount(r.TDlinkForm, t.PAGECONTEXT.CART_INFO).then(function(e) {
                        var t = e.td_bank_finance.td_bank_existing_account.response.credit_application_response; ! t.application_status || "A" != t.application_status && "P" != t.application_status && "D" != t.application_status ? e.td_bank_finance.td_bank_existing_account.response.error && -1 != e.td_bank_finance.td_bank_existing_account.response.error.message.indexOf("FinanceAdapterRequestPayloadDecryptionFailed") ? a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description) : a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description) : (a.financingDetails = t, a.financingStatus = t.application_status, a.isSufficientCredit = t.available_credit > a.shoppingCart.cost.total.amount ? !0 : !1, a.applyFinancingToCart()),
                            a.$digest()
                    }).fail(function(e) {
                        msg = JSON.parse(msg.responseText),
                            "FinanceAdapterRequestPayloadDecryptionFailed" == msg.error ? a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description) : a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description)
                    })
                },
                r.changePayment = function() {
                    a.linkSectionMode = "view"
                },
                r.payFinancing = function() {
                    a.redirectFromPayPal = !1,
                        $("input[name=payMethod]:checked").removeAttr("checked"),
                        $(".checkout-payment-cc-details").hide(),
                        a.billing = _.clone(a.financingDetails.billing_info),
                        r.newCard = "financing",
                        a.UIStateInfo.paymentInfo.paymentMethod = "financing",
                        a.UIStateInfo.paymentInfo.paypalStatus = void 0,
                        a.UIStateInfo.paymentInfo.isValid = !1,
                        a.UIStateInfo.paymentInfo.isChanged = !0,
                        a.UIStateInfo.paymentInfo.isComplete = !0,
                        a.shippingSameAsBilling = !1
                },
                r.$watch("shippingForm.$valid",
                    function() {
                        r.shippingFormvalid = r.shippingForm.$valid,
                        a.shippingSameAsBilling || "paypal" == a.UIStateInfo.paymentInfo.paymentMethod || "completed" == a.UIStateInfo.paymentInfo.paypalStatus || (a.UIStateInfo.shippingInfo.isComplete = r.shippingForm.$valid ? !0 : !1)
                    }),
                r.contactUpdate = !1,
                r.onFormChange = function(e) {
                    a.UIStateInfo.shippingInfo.isValid = !1,
                        a.UIStateInfo.shippingInfo.isChanged = !0,
                        a.UIStateInfo.shippingInfo.isComplete = r.shippingForm.$valid ? !0 : !1,
                    r.addressInvalid && r.alternateAddress && (r.formChanged = !0),
                        r.overrideValidation = !1,
                        a.selectedAddress = null,
                        $("input[name=alterAddr]:checked").removeAttr("checked"),
                        a.isNewShippingInlineMsg = !1,
                        r.errorInShippingExists = !1,
                        $("#newshippingErrorMsgDesc").text("")
                },
                r.onCardFormChange = function(e) {
                    a.UIStateInfo.paymentInfo.isValid = !1,
                        a.UIStateInfo.paymentInfo.isChanged = !0,
                        a.isCCInlineMsg = !1,
                        a.isShippingInlineMsg = !1,
                        r.errorInShippingExists = !1,
                        $("#shippingErrorMsgDesc").text(""),
                        $("#CCerrorMsgTitle").text(""),
                        a.UIStateInfo.paymentInfo.isComplete = r.cardForm.$valid ? !0 : !1,
                    a.shippingSameAsBilling && (a.UIStateInfo.shippingInfo.isChanged = !0, a.UIStateInfo.shippingInfo.isValid = !1, a.UIStateInfo.shippingInfo.isComplete = r.cardForm.$valid ? !0 : !1),
                        r.overrideValidation = !1
                },
                r.onAddrSelect = function(e, t) {
                    h(!1, $("." + e.id)),
                        f($("." + e.id).parent()),
                        r.overrideValidation = !0,
                        r.addressInvalid = !1,
                        r.formChanged = !1,
                        a.selectedAddress = e,
                        r.address = {},
                        r.alternateAddress = null,
                        r.errorInShippingExists = !1,
                        a.shippingSameAsBilling = !1,
                        a.UIStateInfo.shippingInfo.isComplete = !0,
                    a.cost && a.cost.total && 0 == a.cost.total.amount && !a.anyPremiumCareSubscriptionCart() && !a.cartHasSubscription() && $(".add_phone_email").hide(),
                        $(".add_new_addr").hide(),
                        $(".add-new-shipping-address").show(),
                        a.UIStateInfo.shippingInfo.isComplete = !0,
                        a.UIStateInfo.shippingInfo.isChanged = !0,
                        a.UIStateInfo.shippingInfo.isValid = !0,
                    t || r.computeCTA()
                },
                r.addNewAddr = function() {
                    a.UIStateInfo.shippingInfo.isComplete = !1,
                        a.UIStateInfo.shippingInfo.isChanged = !0,
                        a.UIStateInfo.shippingInfo.isValid = !1,
                        f($(".add-new-shipping-address")),
                        r.overrideValidation = !1,
                        r.formChanged = !1,
                        r.address = {},
                    null != a.addedPayment && a.addedPayment.billing_info && (r.address.phone = a.addedPayment.billing_info.phone, r.address.email = a.addedPayment.billing_info.email),
                    a.cost && a.cost.total && 0 == a.cost.total.amount && !a.anyPremiumCareSubscriptionCart() && !a.cartHasSubscription() && ($(".add_phone_email").show(), r.blurshipping()),
                        E(),
                        r.address.state_or_province = a.states[0],
                        a.selectedAddress = void 0,
                        r.alternateAddress = null,
                        r.errorInShippingExists = !1,
                        a.shippingSameAsBilling = !1,
                        $("input[name=addr]:checked").removeAttr("checked"),
                        $(".add_new_addr").toggle(),
                        $(".add-new-shipping-address").hide(),
                        p(function() {
                            $("#_addressInfo_userState").selectric()
                        })
                },
                r.onAddrEdit = function() {
                    a.shippingMode = "edit",
                        r.addressInvalid = !1,
                    a.cost && a.cost.total && 0 == a.cost.total.amount && (a.shippingSameAsBilling = !1, $("#_sameAsShipAddress").removeAttr("checked"), r.shippingForm.$valid && (a.bluraddress(), a.selectedAddress && ($(".add_new_addr").show(), $(".add-new-shipping-address").hide(), $(".add_phone_email").show(), r.blurshipping())), r.shippingFormvalid = r.shippingForm.$valid),
                    0 == $("input[name=addr]:checked").length && (a.selectedAddress = void 0)
                },
                r.onAlterAddrSelect = function(e) {
                    a.UIStateInfo.shippingInfo.isValid = !1,
                        a.UIStateInfo.shippingInfo.isChanged = !0,
                        a.UIStateInfo.shippingInfo.isComplete = !0,
                        r.addressInvalid = !1,
                        $("input[name=addr]:checked").removeAttr("checked"),
                        r.address = jQuery.extend({},
                            r.prevAddr, e),
                        a.selectedAddress = angular.copy(r.address),
                        $("#sameAddressAsBilling").removeAttr("checked"),
                        $("#sameAddressInShipping").removeAttr("checked"),
                        r.errorInShippingExists = !1,
                        r.overrideValidation = !0,
                        p(function() {
                            $("#_addressInfo_userState").selectric()
                        })
                },
                r.usePrevAddress = function() {
                    a.UIStateInfo.shippingInfo.isValid = !0,
                        a.UIStateInfo.shippingInfo.isChanged = !1,
                        a.UIStateInfo.shippingInfo.isComplete = !0,
                        r.addressInvalid = !1,
                        a.selectedAddress = r.address,
                        r.overrideValidation = !0,
                        r.addUpdateShippingInfo(),
                        $("input[name=alterAddr]:checked").removeAttr("checked"),
                        r.errorInShippingExists = !1,
                        setTimeout(function() {
                                $("html, body").animate({
                                        scrollTop: $("#_shipping_method").offset().top
                                    },
                                    "slow")
                            },
                            200)
                },
                r.addUpdateShippingInfo = function() {
                    var e = jQuery.extend({},
                        a.selectedAddress || r.address);
                    delete e.id,
                        delete e.created_date,
                        delete e.modified_date,
                        delete e.override_suggestion,
                        delete e.address_overridden,
                        delete e.dr_address_id,
                        delete e.dr_nick_name,
                    ("" == e.line2 || void 0 == e.line2) && delete e.line2;
                    var t = a.cost.total.amount; ! a.selectedAddress && (t > 0 || a.anyPremiumCareSubscriptionCart() || a.cartHasSubscription()) && (a.addedPayment && a.addedPayment.billing_info && a.addedPayment.billing_info.phone ? e.phone = a.addedPayment.billing_info.phone: a.billing.phone && (e.phone = a.billing.phone), e.email = a.billing.email),
                        a.shippingAddress = e
                },
                r.contShippingAddress = function() { (null != a.selectedAddress || r.shippingFormvalid || a.shippingSameAsBilling) && (r.validateAddress = jQuery.extend({},
                    a.selectedAddress), a.shippingSameAsBilling && (r.address = _.clone(a.billing)), a.selectedAddress || (r.validateAddress = jQuery.extend({},
                    r.address)), r.prevAddr = angular.copy(r.validateAddress), delete r.validateAddress.phone, delete r.validateAddress.last_name, delete r.validateAddress.first_name, delete r.validateAddress.middle_name, delete r.validateAddress.middle_initial, delete r.validateAddress.created_date, delete r.validateAddress.modified_date, delete r.validateAddress.override_suggestion, delete r.validateAddress.email, delete r.validateAddress.id, delete r.validateAddress.dr_address_id, delete r.validateAddress.dr_nick_name, delete r.validateAddress.address_overridden, ("" == r.validateAddress.line2 || void 0 == r.validateAddress.line2) && delete r.validateAddress.line2)
                },
                r.deleteDialog = function(e) {
                    var t = $("." + e);
                    h(!0, t),
                        f(t.parent()),
                        t.find(".btn-yes").off().on("click",
                            function() {
                                g(e)
                            }),
                        t.find(".btn-no").off().on("click",
                            function() {
                                h(!1, t)
                            })
                },
                r.onFocus = i.formOnFocus,
                r.blurshipping = function() {
                    r.address && (r.address.email && $("#_addressInfo_userEmail").parents(".input-control").addClass("focus"), r.address.phone && $("#_addressInfo_userPhoneNo").parents(".input-control").addClass("focus"))
                },
                a.bluraddress = function() {
                    $(".add_new_addr").find("input[type='text'],input[type='number'],input[type='tel']").parents(".input-control").addClass("focus"),
                        $(".add_new_addr").find(".input-control.select-box").addClass("focus")
                },
                r.blurshipping(),
                r.$on("profileInfoAvailable",
                    function() {
                        r.address && (r.address.email || (r.address.email = a.contact.email), r.address.phone || (r.address.phone = a.contact.phone), r.blurshipping())
                    }),
                r.$on("contactInfoUpdated",
                    function() { (a.selectedAddress || a.shippingSameAsBilling) && (r.contactUpdate = !0, r.contShippingAddress()),
                        r.shippingFormvalid = !1
                    }),
                a.focusOnShippingMethods = !1,
                r.showShippingInfo = function() {
                    $(window).width() > 768 && ($(".white-glove-info-icon").addClass("active"), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").css({
                        top: "115px",
                        opacity: "0",
                        display: "block"
                    }), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                            top: "65px",
                            opacity: 1
                        },
                        350))
                },
                r.hideShippingInfo = function() {
                    $(window).width() > 768 && ($(".white-glove-info-icon").removeClass("active"), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                            top: "115px",
                            opacity: 0
                        },
                        350,
                        function() {
                            $(".white-glove-info-msg").css({
                                display: "none"
                            })
                        }))
                },
                r.toggleShippingInfo = function(e) {
                    if (e.stopPropagation(), $(".white-glove-info-icon").hasClass("active") ? $(document).off("click.whiteGlove") : $(document).on("click.whiteGlove",
                            function(e) {
                                r.toggleShippingInfo(e)
                            }), $(".white-glove-info-icon").toggleClass("active"), $(window).width() < 768) {
                        var t = $(".white-glove-info-icon").parents(".sm-label").find("label").outerHeight() + 20 + "px";
                        $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").css("top", t),
                            $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").slideToggle()
                    } else $(".white-glove-info-icon").hasClass("active") ? ($(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").css({
                        top: "115px",
                        opacity: "0",
                        display: "block"
                    }), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                            top: "65px",
                            opacity: 1
                        },
                        350)) : $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                            top: "115px",
                            opacity: 0
                        },
                        350,
                        function() {
                            $(".white-glove-info-msg").css({
                                display: "none"
                            })
                        })
                },
                r.$on("addressUpdated",
                    function(e, t, n) {
                        a.shoppingCart.shipping_method && r.setDefaultShippingOption([a.shoppingCart.shipping_method]),
                            r.getShippingOptionsWrapper(n)
                    }),
                r.onShippintMethodEdit = function() {
                    a.shippingMethodMode = "edit"
                },
                r.shippingMethodSelect = function(i) {
                    var o = a.cost.total.amount;
                    a.userPreferredShippingMethod = {},
                        a.userPreferredShippingMethod.id = i.id,
                        a.userPreferredShippingMethod.description = i.description,
                        $(".generic-error").hide(),
                    a.shoppingCart.shipping_info && e.updateShippingMethod(a.userPreferredShippingMethod, t.PAGECONTEXT.SHIPPING_METHOD).then(function(e) {
                        if (a.selectedShippingMethod = i, a.shippingMethodMode = "edit", a.focusOnShippingMethods = !0, a.$digest(), a.$broadcast("refreshCart", e, !1), 0 == o && a.cost.total.amount > 0) {
                            var t = "You have selected " + i.description + " shipping option";
                            a.$broadcast("paymentStepError", t, n.NonZeroCart.description),
                                a.addedPayment = null,
                                a.UIStateInfo.paymentInfo.isValid = !1,
                                a.paymentMode = "edit",
                                a.shippingMode = "edit",
                                a.selectDefaultAddress(),
                                a.selectDefaultPayment(),
                            a.isLoggedIn || r.newCreditCard(),
                                a.$digest()
                        } else o > 0 && 0 == a.cost.total.amount && (a.zerodollarchange(), a.UIStateInfo.paymentInfo.isValid = !0, a.UIStateInfo.paymentInfo.isChanged = !1, a.UIStateInfo.paymentInfo.isComplete = !0, a.UIStateInfo.paymentInfo.paymentMethod = void 0, a.selectedAddress && 0 == $("input[name=addr]:checked").length && a.isLoggedIn && ($(".add_phone_email").show(), r.blurshipping()), $(".generic-error").hide());
                        "view" == a.shippingMode && "view" == a.paymentMode ? setTimeout(function() {
                                $("html, body").animate({
                                        scrollTop: $("#_place_order").offset().top
                                    },
                                    "slow")
                            },
                            200) : "edit" == a.shippingMode && 0 == a.cost.total.amount && setTimeout(function() {
                                $("html, body").animate({
                                        scrollTop: $("#_user_address").offset().top
                                    },
                                    "slow")
                            },
                            200)
                    }).E401(function(e) {
                        a.promptReLogin(e)
                    }).fail(function(e) {
                        $("#" + a.selectedShippingMethod.id).prop("checked", !0),
                            a.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description)
                    })
                },
                a.shippingOptionsText = {
                    Standard: "1-5 business days",
                    Expedited: "2 business days",
                    Express: "1 business day",
                    "Samsung White Glove Delivery": "Delivery at your convenience",
                    "Standard Ground Shipping": "1-5 business days",
                    "Overnight Air - US - samsung": "1 business day",
                    "2 Day Air - US": "2 business days",
                    "White Glove - samsung": "Delivery at your convenience",
                    "Standard Freight Shipping-samsung": "Delivery at your convenience"
                },
                a.isStandardShipping = function(e) {
                    return "standard" === e.description.toLowerCase() || "standard ground shipping" === e.description.toLowerCase()
                },
                r.setDefaultShippingOption = function(e) {
                    r.shippingOptions = e,
                        a.isFreeShippingForDream = !1,
                        _.forEach(e,
                            function(e) {
                                "5766800" == e.id && a.cartHasDreamSku() && (a.isFreeShippingForDream = !0)
                            }),
                        a.selectedShippingMethod = a.shoppingCart.shipping_method,
                        a.selectedShippingMethod.displayText = a.shippingOptionsText[a.shoppingCart.shipping_method.description],
                        a.$digest();
                    var t = a.shoppingCart.shipping_method.id;
                    $("#" + t).attr("checked", "checked"),
                        $("#" + t).next().click()
                },
                r.computeCTA = function(t) {
                    var i = [],
                        o = [],
                        s = [];
                    a.globalerrorExists = !1,
                        a.applyShippingToCart = function(t) {
                            if (!r.errorInShippingExists && 0 == s.length && 0 == i.length && t && a.UIStateInfo.paymentInfo.isValid && a.UIStateInfo.shippingInfo.isValid && a.UIStateInfo.shippingMethod.isValid && r.placeOrder(), s.length > 0 && e.purchaseFlowCTA(s, "validate-address-call").then(function(e) {
                                    e[0].success && (a.UIStateInfo.shippingInfo.isValid = !0, a.UIStateInfo.shippingInfo.isChanged = !1, r.alternateAddress = void 0),
                                    e[0].success || ($("input[name=addr]:checked").prop("checked") && ($("input[name=addr]:checked").removeAttr("checked"), $(".add_new_addr").show(), $(".add-new-shipping-address").hide(), $("#shipping_addr").find(".input-control").addClass("focus"), $("select").selectric(), a.selectedAddress = void 0), r.alternateAddress = e[0].alternatives, r.errorInShippingExists = r.alternateAddress ? !0 : !1, r.$digest(), a.isCCInlineMsg || a.globalerrorExists || (a.shippingSameAsBilling ? setTimeout(function() {
                                            $("html, body").animate({
                                                    scrollTop: $("#_suggestion1").offset().top
                                                },
                                                "slow")
                                        },
                                        200) : setTimeout(function() {
                                            $("html, body").animate({
                                                    scrollTop: $("#_suggestion2").offset().top
                                                },
                                                "slow")
                                        },
                                        200))),
                                        a.isShippingInlineMsg = !1,
                                        $("#shippingErrorMsgDesc").text(""),
                                        a.isNewShippingInlineMsg = !1,
                                        $("#newshippingErrorMsgDesc").text(""),
                                        a.UIStateInfo.shippingInfo.isComplete = !0,
                                    !r.errorInShippingExists && 0 == i.length && t && a.UIStateInfo.paymentInfo.isValid && a.UIStateInfo.shippingInfo.isValid && a.UIStateInfo.shippingMethod.isValid && r.placeOrder()
                                }).validateAddressHandler(function(e) {
                                    r.alternateAddress = void 0;
                                    var t = e.status;
                                    400 == t ? a.$broadcast("CTAShippingAddrError", "We could not find the shipping address!") : 401 == t ? a.promptReLogin(e) : 404 == t ? (r.overrideValidation = !0, r.$digest(), a.$broadcast("CTAShippingAddrError", "We could not find the shipping address!")) : 409 == t ? (r.overrideValidation = !0, r.$digest(), a.$broadcast("CTAShippingAddrError", "We could not find the shipping address!")) : (console.log("checkout error:" + e), a.$broadcast("paymentStepError", n.ShippingAddressInvalid.title, n.ShippingAddressInvalid.description))
                                }).fail(function(e) {
                                    a.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description)
                                }), i.length > 0) {
                                var o = a.cost.total.amount;
                                e.purchaseFlowCTA(i, "apply-shipping-call").then(function(e) {
                                    if (r.singleClickAddressAdded = !0, a.fireSingleClickCheckoutTags(), a.UIStateInfo.shippingInfo.isValid = !0, a.UIStateInfo.shippingInfo.isComplete = !0, a.UIStateInfo.shippingInfo.isChanged = !1, a.selectedShippingMethod) {
                                        if (0 == o && e[e.length - 1].cost.total.amount > 0) {
                                            var i = "You have selected " + a.userPreferredShippingMethod.description + " shipping option";
                                            a.$broadcast("paymentStepError", i, n.NonZeroCart.description),
                                                a.addedPayment = null,
                                                a.UIStateInfo.paymentInfo.isValid = !1,
                                                a.UIStateInfo.paymentInfo.isComplete = !1,
                                                a.paymentMode = "edit",
                                                a.shippingMode = "edit",
                                                a.selectDefaultAddress(),
                                                a.selectDefaultPayment(),
                                            a.isLoggedIn || r.newCreditCard(),
                                                a.$digest()
                                        }
                                        a.userPreferredShippingMethod = void 0,
                                            a.refreshCart(e[e.length - 1], !1),
                                        e[e.length - 2] && r.fetchShippingOptionsCallBack(e[e.length - 2])
                                    } else a.anyPremiumCareSubscriptionCart() ? a.anyPremiumCareSubscriptionCart() && (2 == e.length ? (a.refreshCart(e[e.length - 2], !1), r.fetchShippingOptionsCallBack(e[e.length - 1])) : 1 == e.length && a.refreshCart(e[e.length - 1], !1)) : (e[e.length - 2] && a.refreshCart(e[e.length - 2], !1), r.fetchShippingOptionsCallBack(e[e.length - 1]));
                                    a.UIStateInfo.shippingMethod.isValid = !0,
                                        a.UIStateInfo.shippingMethod.isComplete = !0,
                                        a.UIStateInfo.shippingMethod.isChanged = !1,
                                    a.shippingSameAsBilling && $("#_sameAsShipAddress").prop("checked", !0),
                                    !r.errorInShippingExists && t && a.UIStateInfo.paymentInfo.isValid && a.UIStateInfo.shippingInfo.isValid && a.UIStateInfo.shippingMethod.isValid && r.placeOrder(),
                                        a.$digest()
                                }).addShippingAddressHandler(function(e) {
                                    var t = e.status;
                                    if (400 == t) {
                                        var i = JSON.parse(e.responseText);
                                        i = i.error || JSON.parse(i.message).error,
                                            "DisallowedShippingAddress" == i ? a.$broadcast("paymentStepError", n.DisallowedShippingAddress.title, n.DisallowedShippingAddress.description) : "DisallowedPostalCode" == i ? a.$broadcast("paymentStepError", n.ShippingDisallowedPostalCode.title, n.ShippingDisallowedPostalCode.description) : "DisallowedShippingCity" == i ? a.$broadcast("paymentStepError", n.DisallowedShippingCity.title, n.DisallowedShippingCity.description) : "DisallowedShippingState/Province" == i ? a.$broadcast("paymentStepError", n.DisallowedShippingStateProvince.title, n.DisallowedShippingStateProvince.description) : a.$broadcast("paymentStepError", n.BadRequestDefaultError.title, n.BadRequestDefaultError.description)
                                    } else if (401 == t) a.promptReLogin(e);
                                    else if (404 == t);
                                    else if (409 == t) {
                                        var i = JSON.parse(e.responseText);
                                        i = i.error || JSON.parse(i.message).error,
                                            "PurchaseFlowCannotBeModified" == i ? a.$broadcast("paymentStepError", n.PurchaseFlowCannotBeModified.title, n.PurchaseFlowCannotBeModified.description) : a.$broadcast("paymentStepError", n.AddressAlreadyInAddressList.title, n.AddressAlreadyInAddressList.description)
                                    } else a.$broadcast("paymentStepError", "Error in validating shipping address", "The provided shipping address is not allowed")
                                }).applyShippingMethodHandler(function(e) {
                                    var t = e.status;
                                    401 == t && a.promptReLogin(e)
                                }).fail(function(e) {
                                    a.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description)
                                })
                            }
                        },
                        !a.cost || a.cost && a.cost.total && (a.cost.total.amount > 0 || a.anyPremiumCareSubscriptionCart() || a.cartHasSubscription()) ? !a.UIStateInfo.paymentInfo.isComplete || a.UIStateInfo.paymentInfo.isValid && !a.UIStateInfo.paymentInfo.isChanged || (o = [m()], "financing" == r.newCard && (o = o.concat(b()))) : (a.UIStateInfo.paymentInfo.isValid = !0, a.UIStateInfo.paymentInfo.isComplete = !0, a.UIStateInfo.paymentInfo.isChanged = !1),
                    !a.shippingSameAsBilling && (a.shippingSameAsBilling || !r.shippingForm.$valid && void 0 == r.selectedAddress) || a.UIStateInfo.shippingInfo.isValid && !a.UIStateInfo.shippingInfo.isChanged || (r.overrideValidation || (s = [y()]), i = i.concat(v())),
                    !a.shippingSameAsBilling && (a.shippingSameAsBilling || !r.shippingForm.$valid && void 0 == r.selectedAddress) || a.UIStateInfo.shippingMethod.isValid && !a.UIStateInfo.shippingMethod.isChanged || (i = i.concat(C()), a.selectedShippingMethod && (i = i.concat(S()))),
                        o.length > 0 ? e.purchaseFlowCTA(o, "apply-payment-call").then(function(e) {
                            r.singleClickPaymentAdded = !0,
                                a.fireSingleClickCheckoutTags(),
                                a.addedPayment = e[e.length - 1].payment,
                                a.$broadcast("refreshCart", e[e.length - 1], !1),
                                r.onPaymentComplete(),
                                a.UIStateInfo.paymentInfo.isValid = !0,
                                a.UIStateInfo.paymentInfo.isComplete = !0,
                                a.UIStateInfo.paymentInfo.isChanged = !1,
                                a.applyShippingToCart(t)
                        }).addPaymentHandler(function(e) {
                            var i = e.status;
                            400 == i ? (a.applyShippingToCart(t), a.UIStateInfo.paymentInfo.isSavedCardSelected ? a.$broadcast("paymentStepError", n.InvalidCreditCard.title, n.InvalidCreditCard.description) : a.$broadcast("CTACCError", "THE CREDIT CARD INFORMATION YOU HAVE ENTERED IS NOT VALID")) : 401 == i ? a.promptReLogin(e) : 409 == i ? (a.applyShippingToCart(t), a.UIStateInfo.paymentInfo.isSavedCardSelected ? a.$broadcast("paymentStepError", n.InvalidCreditCard.title, n.InvalidCreditCard.description) : a.$broadcast("CTACCError", "THE CREDIT CARD INFORMATION YOU HAVE ENTERED IS NOT VALID")) : (window.utag && utag.link({
                                link_cat: "CC error response",
                                link_id: "checkout_payment_information_CC_error_response",
                                link_meta: "link_name:CC error response",
                                link_position: "payment position"
                            }), a.applyShippingToCart(t), a.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description), r.selectedPayment = null)
                        }).setFinancePlanHandler(function(e) {
                            var t = e.status;
                            401 == t ? a.promptReLogin(e) : a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description)
                        }).fail(function(e) {
                            a.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description)
                        }) : a.applyShippingToCart(t)
                },
                a.redirectPostLogin = a.redirectPostLogin || null,
                a.utagLink = function() {
                    window.utag && utag.link({
                        link_cat: "validation error",
                        link_id: "checkout_validation_error",
                        link_meta: "link_name:validation_error",
                        link_position: "checkout"
                    })
                },
                a.placeOrderWrapper = function() {
                    r.errorInShippingExists ? a.shippingSameAsBilling ? setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $("#focusDiv1").offset().top
                                },
                                "slow")
                        },
                        200) : setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $("#focusDiv2").offset().top
                                },
                                "slow")
                        },
                        200) : a.isCTANotRequired() ? a.placeOrder() : r.computeCTA(!0)
                },
                a.placeOrder = function() {
                    a.globalerrorExists = !1;
                    var i = $.cookie("remoteId");
                    i && "undefined" != i ? e.validateAuthToken(i).then(function(e) {
                        var i = JSON.parse(e);
                        "valid" == i.status ? a.handleCheckout() : (a.checkoutLoginMessage = n.ReLogin.title, a.redirectPostLogin = t.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER, window.SCart.sessionIdValid = !1, window.location.href = window.SCart.URL.CHECKOUT_URL(), a.$digest())
                    }).fail(function(e) {
                        a.checkoutLoginMessage = n.ReLogin.title,
                            a.redirectPostLogin = t.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER,
                            window.SCart.sessionIdValid = !1,
                            window.location.href = window.SCart.URL.CHECKOUT_URL(),
                            a.$digest()
                    }) : a.handleCheckout()
                },
                a.handleCheckout = function() {
                    var i = new Date;
                    a.submitCartCallTriggerTime = i.getTime(),
                        e.checkout(!a.isLoggedIn, t.PAGECONTEXT.ORDER).then(function(e) {
                            if (a.orderId = e.external_order_id, a.selectedShippingMethod = e.shipping_method, e.shipping_method && (a.selectedShippingMethod.displayText = a.shippingOptionsText[e.shipping_method.description]), a.shippingAddress = e.shipping_info, a.addedPayment = e.payment, a.refreshCart(e, !1), d.path("/order-confirm/" + e.cart_id), $(".cart-basket").text(""), a.isIE() ? ($(".gnb-b2c-icons-cart a svg").remove(), $(".gnb-b2c-icons-cart a").prepend('<svg viewBox="0 0 100 100" id="cart-open"><circle cx="28" cy="90" r="10"/><circle cx="86" cy="90" r="10"/><path d="M86 14v42H28V13.86C28 6.205 21.794 0 14.14 0H0v14h14v42c0 7.732 6.268 14 14 14h58c7.732 0 14-6.268 14-14V14H86z"/></svg>')) : $(".gnb-b2c-icons-cart a svg use").attr("xlink:href", "/us/resources/navigation/assets/images/sprite.symbol.svg#cart-open"), $.cookie("s_ecom_sc_cnt", 0, {
                                    path: "/",
                                    domain: ".samsung.com"
                                }), a.$digest(), r.$apply(), "object" == typeof newrelic) {
                                newrelic.addPageAction("singleclick-order-placed-tag", {
                                    checkoutv3: $.cookie("checkoutv3"),
                                    orderId: e.cart_id
                                });
                                var t = new Date;
                                newrelic.fireCustomPageLoadTag("order-confirm-singleclick", ((t.getTime() - a.submitCartCallTriggerTime) / 1e3).toFixed(2))
                            }
                        }).E405(function(e) {
                            a.utagLink(),
                                e = JSON.parse(e.responseText),
                                n[e.error] ? a.$broadcast("paymentStepError", n[e.error].title, n[e.error].description) : a.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description)
                        }).E409(function(i) {
                            a.utagLink(),
                                i = JSON.parse(i.responseText),
                                i = JSON.parse(i.message),
                                "PurchaseFlowCannotBeModified" == i.error ? a.$broadcast("paymentStepError", n.PurchaseFlowCannotBeModified.title, n.PurchaseFlowCannotBeModified.description) : "CartHasChanged" == i.error ? a.$broadcast("paymentStepError", n.CartHasBeenChanged.title, n.CartHasBeenChanged.description) : "CartPaymentFailure" == i.error ? a.$broadcast("paymentStepError", n.CartPaymentFailure.title, n.CartPaymentFailure.description) : "InventoryUnavailable" == i.error ? i.message ? a.$broadcast("paymentStepError", n.OutOfStockOnSubmitCart.title, i.message) : i.shopping_cart && r.handleOutOfStock(i.shopping_cart) : "PromoCodeError" == i.error ? a.$broadcast("paymentStepError", n.PromoCodeError.title, n.PromoCodeError.description) : "AssurantWarrantyInfoIsRequired" == i.error ? a.$broadcast("paymentStepError", n.AssurantWarrantyInfoIsRequired.title, n.AssurantWarrantyInfoIsRequired.description) : "CartChangedDuringOrderSubmission" == i.error ? e.getCartItems(t.PAGECONTEXT.CART_CHANGED).then(function(e) {
                                    a.$broadcast("paymentStepError", n.CartChangedDuringOrderSubmission.title, n.CartChangedDuringOrderSubmission.description),
                                        a.refreshCart(e)
                                }).fail(function() {
                                    a.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description)
                                }) : a.$broadcast("paymentStepError", "Error during place order.", "Please try again after some time.")
                        }).E401(function(e) {
                            a.redirectPostLogin = t.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER,
                                a.promptReLogin(e)
                        }).E400(function(e) {
                            a.utagLink(),
                                a.$broadcast("paymentStepError", n.SubmitCartError.title, n.SubmitCartError.description)
                        }).fail(function(e) {
                            a.utagLink(),
                                a.paymentSource = "",
                                a.$digest(),
                                a.$broadcast("paymentStepError", "Error during place order.", "Please try again after some time.")
                        })
                },
                r.handleOutOfStock = function(e) {
                    a.submitAlert = e.user_alerts,
                        a.refreshCart(e)
                },
            a.redirectPostLogin == t.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER && (a.redirectPostLogin = null, a.placeOrder()),
                a.placeOrderEnabledCTA = function() {
                    return a.UIStateInfo && a.UIStateInfo.paymentInfo && "card" == a.UIStateInfo.paymentInfo.paymentMethod && !a.UIStateInfo.paymentInfo.isSavedCardSelected ? a.shippingSameAsBilling ? a.UIStateInfo.paymentInfo.isComplete && a.UIStateInfo.shippingInfo.isComplete && a.UIStateInfo.shippingMethod.isComplete && a.billing && "Select" != a.billing.state_or_province: a.UIStateInfo.paymentInfo.isComplete && a.UIStateInfo.shippingInfo.isComplete && a.UIStateInfo.shippingMethod.isComplete && a.billing && "Select" != a.billing.state_or_province && r.address && "Select" != r.address.state_or_province: a.UIStateInfo.paymentInfo.isComplete && a.UIStateInfo.shippingInfo.isComplete && a.UIStateInfo.shippingMethod.isComplete
                },
                a.isCTANotRequired = function() {
                    return a.UIStateInfo.paymentInfo.isValid && a.UIStateInfo.shippingInfo.isValid && a.UIStateInfo.shippingMethod.isValid
                },
                r.$on("CTACCError",
                    function(e, t) {
                        $("#CCerrorMsgTitle").text(t),
                            a.isCCInlineMsg = !0,
                            p(function() {
                                a.$digest()
                            }),
                            setTimeout(function() {
                                    $("html, body").animate({
                                            scrollTop: $("[name='cardForm']").offset().top
                                        },
                                        "slow")
                                },
                                200)
                    }),
                r.$on("CTAShippingAddrError",
                    function(e, t) {
                        a.shippingSameAsBilling ? ($("#shippingErrorMsgDesc").text(t), a.isShippingInlineMsg = !0) : ($("#newshippingErrorMsgDesc").text(t), a.isNewShippingInlineMsg = !0),
                            r.errorInShippingExists = !0,
                            p(function() {
                                a.$digest()
                            }),
                        a.isCCInlineMsg || a.globalerrorExists || (a.isShippingInlineMsg ? setTimeout(function() {
                                $("html, body").animate({
                                        scrollTop: $("#shippingErrorMsg").offset().top
                                    },
                                    "slow")
                            },
                            200) : setTimeout(function() {
                                $("html, body").animate({
                                        scrollTop: $("#newshippingErrorMsgDesc").offset().top
                                    },
                                    "slow")
                            },
                            200))
                    }),
                r.evaluateBillingSameAsShipping = function() {
                    if (a.shoppingCart && a.shoppingCart.payment && a.shoppingCart.payment.billing_info && a.shoppingCart.shipping_info) {
                        var e = _.clone(a.shoppingCart.payment.billing_info),
                            t = _.clone(a.shoppingCart.shipping_info);
                        null == a.shoppingCart.payment.billing_info.line2 && delete e.line2,
                        null == a.shoppingCart.shipping_info.line2 && delete t.line2,
                            a.shippingSameAsBilling = JSON.stringify(e) === JSON.stringify(t) ? !0 : !1
                    } else a.shippingSameAsBilling = !0
                },
                void 0 == a.shippingSameAsBilling ? (r.evaluateBillingSameAsShipping(), p(function() {
                    a.$digest()
                })) : a.shippingSameAsBilling ? (a.shippingSameAsBilling = !0, $("#_sameAsShipAddress").prop("checked", !0), p(function() {
                    a.$digest()
                })) : r.address && ($(".add-new-shipping-address").hide(), $(".add_new_addr").show()),
            a.cost && a.cost.total && 0 == a.cost.total.amount && (a.shippingMethodMode = "edit", a.anyPremiumCareSubscriptionCart() || a.cartHasSubscription() || (a.UIStateInfo.paymentInfo.paymentMethod = void 0, a.UIStateInfo.paymentInfo.isValid = !0, a.UIStateInfo.paymentInfo.isChanged = !1, a.UIStateInfo.paymentInfo.isComplete = !0), p(function() {
                a.$digest()
            })),
            "paypal" == a.UIStateInfo.paymentInfo.paymentMethod && "inprocess" == a.UIStateInfo.paymentInfo.paypalStatus && (a.UIStateInfo.paymentInfo.paymentMethod = void 0, a.UIStateInfo.paymentInfo.paypalStatus = !1),
                a.fireSingleClickCheckoutTags = function() {
                    if (window.newrelic) {
                        if (!a.isLoggedIn && a.getCartSingleClickDone && a.getPubKeySingleClickDone && r.getShippingOptionsDone) {
                            var e = new Date;
                            newrelic.fireCustomPageLoadTag("singleclickcheckout-pageload-guest", ((e.getTime() - a.checkoutCallTriggerTime) / 1e3).toFixed(2)),
                                a.getCartSingleClickDone = !1,
                                r.getPubKeySingleClickDone = !1,
                                r.getShippingOptionsDone = !1
                        }
                        if (a.isLoggedIn && a.validateTknSingleClickDone && r.singleClickPaymentAdded && r.singleClickAddressAdded) {
                            var e = new Date;
                            newrelic.fireCustomPageLoadTag("singleclickcheckout-pageload-loggedIn", ((e.getTime() - a.checkoutCallTriggerTime) / 1e3).toFixed(2)),
                                a.getCartSingleClickDone = !1,
                                r.getPubKeySingleClickDone = !1,
                                r.getShippingOptionsDone = !1,
                                a.validateTknSingleClickDone = !1,
                                r.singleClickPaymentAdded = !1,
                                r.singleClickAddressAdded = !1
                        }
                    }
                }
        }]),
    checkoutApp.directive("hide", ["$document",
        function(e) {
            return {
                restrict: "A",
                link: function(t, n, i) {
                    n.bind("click",
                        function(e) {
                            e.stopPropagation()
                        }),
                        e.bind("click",
                            function(e) { (void 0 == $(e.target).attr("class") || -1 == $(e.target).attr("class").indexOf("zip-code-text")) && t.$apply(i.hide)
                            })
                }
            }
        }]),
    function() {
        checkoutApp.directive("myInputMask",
            function() {
                return {
                    restrict: "AC",
                    link: function(e, t, n) {
                        t.mask(e.$eval(n.mask).mask, {
                            placeholder: e.$eval(n.mask).placeholder,
                            reverse: e.$eval(n.mask).reverse
                        }),
                            t.on("change",
                                function() {
                                    e[n.ngModel] = t.val()
                                })
                    }
                }
            })
    } (),
    checkoutApp.directive("onFormChange", ["$parse",
        function(e) {
            return {
                require: "form",
                link: function(t, n, i) {
                    var r = e(i.onFormChange);
                    n.on("keydown",
                        function() {
                            r(t)
                        })
                }
            }
        }]),
    checkoutApp.factory("updateUtilities", ["$filter", "$rootScope", "$log", "errors",
        function(e, t, n, i) {
            return {
                formatDateOfBirth: function(t) {
                    var n = new Date(t);
                    return e("date")(n, "yyyy-MM-dd")
                },
                formatDateString: function(t, n) {
                    var i = new Date(t);
                    return e("date")(i, n)
                },
                displayAddToCartErrorMessage: function(e) {
                    e = JSON.parse(e.responseText),
                        "ShoppingCartSchemaError" === e.error ? t.$broadcast("cartStepError", i.ShoppingCartSchemaError.title, i.ShoppingCartSchemaError.description) : t.$broadcast("cartStepError", i.AddToCartError.title, i.AddToCartError.description)
                },
                formatPhoneNumber: function(e) {
                    return 10 === e.length ? e.substring(0, 3) + "-" + e.substring(3, 6) + "-" + e.substring(6) : e.substring(0, 3) + "-" + e.substring(4, 7) + "-" + e.substring(8)
                },
                formOnFocus: function(e, t) {
                    t && t.target.focus(),
                        e["class"] = "focus",
                        e.focus = !0
                },
                formOnBlur: function(e) {
                    e.$viewValue || (e["class"] = "blur")
                },
                resetInputField: function(e, t) {
                    e.$setPristine(!0)
                },
                wrapFn: function(e, n, i) {
                    return function() {
                        t.promoMsg = "",
                        n || ($(".generic-error").hide(), window.SCart.isEcomCheckout() || $.cookie("checkoutv2", !0, {
                            path: "/us"
                        }));
                        var r = Array.prototype.slice.call(arguments),
                            a = e.apply(i || this, r);
                        return a
                    }
                },
                wrapObj: function(e) {
                    var t = this,
                        n = e.wrapExclude || [];
                    return _.forEach(e,
                        function(i, r) {
                            if ("function" == typeof i) for (var a = 0; a < n.length; a++) {
                                if (n[a] == r) {
                                    e[r] = t.wrapFn(i, !0);
                                    break
                                }
                                e[r] = t.wrapFn(i, !1)
                            }
                        }),
                        e
                },
                suppressUpSellIt: function() {
                    t.isLoggedIn === !0 && (window.suppressUpsellit = !0)
                }
            }
        }]),
    checkoutApp.factory("cryptoUtil", ["$filter", "$rootScope", "$log",
        function(e, t, n) {
            "use strict";
            return {
                encryptCardInfo: function(e) {
                    var n = {};
                    n.expiration_year = "20" + e.expiration.split("/")[1],
                        n.expiration_month = e.expiration.split("/")[0],
                        n.card_number = e.card_number + "",
                        n.security_code = e.security_code,
                        n.card_type = "Visa";
                    var i = t.shoppingCartPubKey,
                        r = forge.pki.publicKeyFromPem(i),
                        a = forge.util.createBuffer(JSON.stringify(n), "utf8"),
                        o = a.getBytes(),
                        s = r.encrypt(o, "RSAES-PKCS1-V1_5");
                    return forge.util.encode64(s)
                },
                encryptFinancingInfo: function(e) {
                    var n, i = {},
                        r = {};
                    i.first_name = e.first_name,
                    e.middle_initial && (i.middle_initial = e.middle_initial),
                        i.last_name = e.last_name,
                        i.address1 = e.address1,
                    e.address2 && (i.address2 = e.address2),
                        i.city = e.city,
                        i.state = e.state,
                        i.postal_code = e.postal_code,
                        i.date_of_birth = e.date_of_birth.split("/")[2] + "-" + e.date_of_birth.split("/")[0] + "-" + e.date_of_birth.split("/")[1],
                        e.home_phone_number = e.home_phone_number.replace(/ /g, ""),
                        i.home_phone_area_code = e.home_phone_number.slice(0, 3),
                        i.home_phone_number = e.home_phone_number.slice(3, 10),
                        i.monthly_income = Number(e.monthly_income.replace("$", "")),
                        i.monthly_income = Math.ceil(i.monthly_income / 12),
                        i.monthly_rent_or_mortgage = Number(e.monthly_rent_or_mortgage.replace("$", "")),
                        i.is_rent = "rent" == e.is_rent ? !0 : !1,
                        i.occupation = e.occupation,
                        i.email = e.email,
                        r = {
                            td_electronic_comms_tc: e.userTerms1,
                            td_privacy_notice_tc: e.userTerms2,
                            samsung_financing_program_tc: e.userTerms3
                        },
                    "string" == typeof e.ssn && (n = e.ssn.replace(/-/g, "")),
                        n = {
                            ssn: n
                        };
                    var a = t.financingPubKey,
                        o = forge.pki.publicKeyFromPem(a),
                        s = forge.util.createBuffer(JSON.stringify(n), "utf8"),
                        c = s.getBytes(),
                        l = o.encrypt(c, "RSAES-PKCS1-V1_5"),
                        d = forge.util.encode64(l);
                    return i = {
                        td_bank_credit_application: i,
                        td_bank_credit_application_pii_encrypted: d,
                        td_bank_tc: r
                    }
                },
                encryptTDAccount: function(e) {
                    var n = {};
                    n.postal_code = e.postal_code,
                        n.last_4_of_ssn = e.last_4_of_ssn;
                    var i = t.financingPubKey,
                        r = forge.pki.publicKeyFromPem(i),
                        a = forge.util.createBuffer(JSON.stringify(n), "utf8"),
                        o = a.getBytes(),
                        s = r.encrypt(o, "RSAES-PKCS1-V1_5");
                    return forge.util.encode64(s)
                }
            }
        }]),
    checkoutApp.factory("calendarUtil", ["$rootScope", "$timeout", "updateUtilities", "constants",
        function(e, t, n, i) {
            function r(t) {
                for (var n = e.availableDateRanges[0], i = 0, r = 0; r < e.availableDateRanges.length; r++) {
                    var a = e.availableDateRanges[r],
                        o = new Date(a.start_date),
                        s = new Date(a.end_date),
                        c = new Date(t);
                    if (c.getTime() == o.getTime()) return a;
                    c > o && (s.getTime() - c.getTime() > i || s.getTime() - c.getTime() == 0) && (i = s.getTime() - c.getTime(), n = a)
                }
                return n
            }
            return {
                updateCalendarDates: function() {
                    $("#datepicker").datepicker({
                            buttontrigger: $(".ui-datepicker-trigger"),
                            dateFormat: "yy/mm/dd",
                            beforeShow: function(n, i) {
                                $(".ha-delivery-schedule-calendar").append($("#ui-datepicker-div")),
                                    $("#ui-datepicker-div").hide();
                                var r = $(this).val();
                                r || $(this).val(e.scheduleForm.selectedDate),
                                    e.enableScheduleForm = !0,
                                    t(function() {
                                        e.$digest()
                                    })
                            },
                            beforeShowDay: function(t) {
                                var r = n.formatDateString(t, i.DATE_FORMAT),
                                    a = new Date(r),
                                    o = $(this).val();
                                if (o) {
                                    var s = o.split("-");
                                    if (s.length > 0) {
                                        if (r == s[0].trim()) return [!0, "ui-selected-date", ""];
                                        if (s[1]) {
                                            var c = new Date(s[0].trim()),
                                                l = new Date(s[1].trim());
                                            if (a >= c && l >= a) return [!0, "ui-selected-date", ""]
                                        }
                                    }
                                }
                                if (e.availableDates.length > 0) {
                                    if ( - 1 != $.inArray(r, e.availableDates)) return [!0, "ui-selectable-date", ""]
                                } else if (e.availableDateRanges.length > 0) for (var d = 0; d < e.availa
                                /*
 * ADOBE CONFIDENTIAL
 *
 * Copyright 2015 Adobe Systems Incorporated
 * All Rights Reserved.
 *
 * NOTICE:  All information contained herein is, and remains
 * the property of Adobe Systems Incorporated and its suppliers,
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to Adobe Systems Incorporated and its
 * suppliers and may be covered by U.S. and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from Adobe Systems Incorporated.
 *
 */
                                (function(window, undefined) {

                                    window.Granite = window.Granite || {};
                                    window.Granite.HTTP = window.Granite.HTTP || {};

                                    var contextPath = null;

                                    function detectContextPath() {
                                        var SCRIPT_URL_REGEXP = /^(?:http|https):\/\/[^\/]+(\/.*)\/(?:etc(\/.*)*\/clientlibs|libs(\/.*)*\/clientlibs|apps(\/.*)*\/clientlibs).*\.js(\?.*)?$/;
                                        try {
                                            if (window.CQURLInfo) {
                                                contextPath = CQURLInfo.contextPath || "";
                                            } else {
                                                var scripts = document.getElementsByTagName("script");
                                                for (var i = 0; i < scripts.length; i++) {
                                                    // in IE the first script is not the expected widgets js: loop
                                                    // until it is found
                                                    var result = SCRIPT_URL_REGEXP.exec(scripts[i].src);
                                                    if (result) {
                                                        contextPath = result[1];
                                                        return;
                                                    }
                                                }
                                                contextPath = "";
                                            }
                                        } catch(e) {}
                                    }

                                    window.Granite.HTTP.externalize = window.Granite.HTTP.externalize ||
                                        function(url) {
                                            if (contextPath === null) {
                                                detectContextPath();
                                            }

                                            try {
                                                if (url.indexOf("/") == 0 && contextPath && url.indexOf(contextPath + "/") != 0) {
                                                    url = contextPath + url;
                                                }
                                            } catch(e) {}

                                            return url;
                                        };

                                })(this);

                                    /*
 * ADOBE CONFIDENTIAL
 *
 * Copyright 2015 Adobe Systems Incorporated
 * All Rights Reserved.
 *
 * NOTICE:  All information contained herein is, and remains
 * the property of Adobe Systems Incorporated and its suppliers,
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to Adobe Systems Incorporated and its
 * suppliers and may be covered by U.S. and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from Adobe Systems Incorporated.
 *
 */
                                                                                  (function(window, undefined) {

                                                                                      window.Granite = window.Granite || {};

                                                                                      // avoid double initialization
                                                                                      if (window.Granite.csrf) {
                                                                                          return;
                                                                                      }

                                                                                      window.Granite.csrf = {
                                                                                          initialised: false
                                                                                      };

                                                                                      /**
                                                                                       * small promise impl
                                                                                       * @constructor
                                                                                       */
                                                                                      function Promise() {
                                                                                          this._handler = [];
                                                                                      }

                                                                                      Promise.prototype = {
                                                                                          then: function(resolveFn, rejectFn) {
                                                                                              this._handler.push({
                                                                                                  resolve: resolveFn,
                                                                                                  reject: rejectFn
                                                                                              });
                                                                                          },
                                                                                          resolve: function() {
                                                                                              this._execute('resolve', arguments);
                                                                                          },
                                                                                          reject: function() {
                                                                                              this._execute('reject', arguments);
                                                                                          },
                                                                                          _execute: function(result, args) {
                                                                                              if (this._handler === null) {
                                                                                                  throw new Error('Promise already completed.');
                                                                                              }

                                                                                              for (var i = 0,
                                                                                                       ln = this._handler.length; i < ln; i++) {
                                                                                                  this._handler[i][result].apply(window, args);
                                                                                              }

                                                                                              this.then = function(resolveFn, rejectFn) { (result === 'resolve' ? resolveFn: rejectFn).apply(window, args);
                                                                                              };

                                                                                              this._handler = null;
                                                                                          }

                                                                                      };

                                                                                      function verifySameOrigin(url) {
                                                                                          // url could be relative or scheme relative or absolute
                                                                                          var host = document.location.host,
                                                                                              // host + port
                                                                                              protocol = document.location.protocol,
                                                                                              relativeOrigin = '//' + host,
                                                                                              origin = protocol + relativeOrigin;

                                                                                          // Allow absolute or scheme relative URLs to same origin
                                                                                          return (url == origin || url.slice(0, origin.length + 1) == origin + '/') || (url == relativeOrigin || url.slice(0, relativeOrigin.length + 1) == relativeOrigin + '/') ||
                                                                                              // or any other URL that isn't scheme relative or absolute i.e relative.
                                                                                              ! (/^(\/\/|http:|https:).*/.test(url));
                                                                                      }

                                                                                      var FIELD_NAME = ':cq_csrf_token',
                                                                                          HEADER_NAME = 'CSRF-Token',
                                                                                          TOKEN_SERVLET = '/libs/granite/csrf/token.json';

                                                                                      var promise, globalToken;

                                                                                      function getToken() {
                                                                                          promise = new Promise();

                                                                                          var xhr = new XMLHttpRequest();
                                                                                          xhr.onreadystatechange = function() {
                                                                                              if (xhr.readyState === 4) {
                                                                                                  try {
                                                                                                      var data = JSON.parse(xhr.responseText);
                                                                                                      globalToken = data.token;
                                                                                                      promise.resolve(globalToken);
                                                                                                  } catch(ex) {
                                                                                                      promise.reject(xhr.responseText);
                                                                                                  }
                                                                                              }
                                                                                          };
                                                                                          xhr.open('GET', Granite.HTTP.externalize(TOKEN_SERVLET), true);
                                                                                          xhr.send();
                                                                                      }

                                                                                      function addField(form) {
                                                                                          if (form.action && !verifySameOrigin(form.getAttribute("action"))) {
                                                                                              return;
                                                                                          }

                                                                                          var input = form.querySelector('input[name="' + FIELD_NAME + '"]');

                                                                                          if (!input) {
                                                                                              input = document.createElement('input');
                                                                                              input.setAttribute('type', 'hidden');
                                                                                              input.setAttribute('name', FIELD_NAME);
                                                                                              form.appendChild(input);
                                                                                          }

                                                                                          input.setAttribute('value', globalToken);
                                                                                      }

                                                                                      function handleForm(document) {
                                                                                          var handler = function(ev) {
                                                                                              var t = ev.target;

                                                                                              if (t.nodeName.toLowerCase() === 'form' && globalToken) {
                                                                                                  addField(t);
                                                                                              }
                                                                                          };

                                                                                          if (document.addEventListener) {
                                                                                              document.addEventListener('submit', handler, true);
                                                                                          } else if (document.attachEvent) {
                                                                                              document.attachEvent('submit', handler);
                                                                                          }
                                                                                      }

                                                                                      getToken();
                                                                                      handleForm(document);

                                                                                      var open = XMLHttpRequest.prototype.open;

                                                                                      XMLHttpRequest.prototype.open = function(method, url) {
                                                                                          if (verifySameOrigin(url) && method.toLowerCase() !== 'get') {
                                                                                              this._csrf = true;
                                                                                          }

                                                                                          return open.apply(this, arguments);
                                                                                      };

                                                                                      var send = XMLHttpRequest.prototype.send;

                                                                                      XMLHttpRequest.prototype.send = function(method) {
                                                                                          if (!this._csrf) {
                                                                                              send.apply(this, arguments);
                                                                                              return;
                                                                                          }

                                                                                          if (globalToken) {
                                                                                              this.setRequestHeader(HEADER_NAME, globalToken);
                                                                                              send.apply(this, arguments);
                                                                                              return;
                                                                                          }

                                                                                          var self = this;
                                                                                          var args = Array.prototype.slice.call(arguments);

                                                                                          promise.then(function(token) {
                                                                                                  self.setRequestHeader(HEADER_NAME, token);
                                                                                                  send.apply(self, args);
                                                                                              },
                                                                                              function() {
                                                                                                  if (window.console) {
                                                                                                      console.error("Unable to read CSRF meta information");
                                                                                                  }
                                                                                                  send.apply(self, args);
                                                                                              });
                                                                                      };

                                                                                      var submit = HTMLFormElement.prototype.submit;

                                                                                      HTMLFormElement.prototype.submit = function() {
                                                                                          addField(this);
                                                                                          return submit.apply(this, arguments);
                                                                                      };

                                                                                      if (window.Node) {
                                                                                          var ac = Node.prototype.appendChild;

                                                                                          Node.prototype.appendChild = function() {
                                                                                              var result = ac.apply(this, arguments);

                                                                                              if (result.nodeName === 'IFRAME') {
                                                                                                  if (result.contentWindow && !result._csrf) {
                                                                                                      result._csrf = true;
                                                                                                      handleForm(result.contentWindow.document);
                                                                                                  }
                                                                                              }

                                                                                              return result;
                                                                                          };
                                                                                      }

                                                                                      // refreshing csrf token periodically
                                                                                      setInterval(function() {
                                                                                              getToken();
                                                                                          },
                                                                                          300000);
                                                                                  })(this);

                                var ConsoleLogger = (function() {
                                    ConsoleLogger.SIZETHRESHOLD = 5;
                                    ConsoleLogger.TIMETHRESHOLD = 2000; //2 seconds
                                    ConsoleLogger.STORAGE = null;
                                    ConsoleLogger.LS = false;
                                    ConsoleLogger.PREVIOUS_REQUEST_COMPLETED = true; // boolean variable to know whether previous ajax call was  completed or not
                                    function ConsoleLogger() {
                                        var self = this;
                                        try {
                                            self.startLogger();
                                        } catch(e) {
                                            setTimeout(function() {
                                                    self.startLogger();
                                                },
                                                1000);
                                        }
                                    }
                                    ConsoleLogger.prototype.startLogger = function() {
                                        var self = this;
                                        self.overwrite();
                                        self.sendInterval();
                                        ConsoleLogger.LS = self.isLSavailable();
                                    }

                                    //overwrite console
                                    ConsoleLogger.prototype.overwrite = function() {
                                        var self = this;
                                        // store original functions
                                        var original = {
                                            console: {
                                                log: console.log,
                                                trace: console.trace,
                                                debug: console.debug,
                                                info: console.info,
                                                warn: console.warn,
                                                error: console.error
                                            }
                                        }
                                        // overwrite original functions
                                        if (original.console.log) {
                                            console.log = function() {
                                                self.pushLogs(Array.prototype.slice.call(arguments).join(","), "log");
                                                original.console.log.apply(this, arguments);
                                            }
                                        }
                                        if (original.console.trace) {
                                            console.trace = function() {
                                                self.pushLogs(Array.prototype.slice.call(arguments).join(","), "trace");
                                                original.console.trace.apply(this, arguments);
                                            }
                                        }
                                        if (original.console.debug) {
                                            console.debug = function() {
                                                self.pushLogs(Array.prototype.slice.call(arguments).join(","), "debug");
                                                original.console.debug.apply(this, arguments);
                                            }
                                        }
                                        if (original.console.info) {
                                            console.info = function() {
                                                self.pushLogs(Array.prototype.slice.call(arguments).join(","), "info");
                                                original.console.info.apply(this, arguments);
                                            }
                                        }
                                        if (original.console.warn) {
                                            console.warn = function() {
                                                self.pushLogs(Array.prototype.slice.call(arguments).join(","), "warn");
                                                original.console.warn.apply(this, arguments);
                                            }
                                        }
                                        if (original.console.error) {
                                            console.error = function() {
                                                self.pushLogs(Array.prototype.slice.call(arguments).join(","), "error");
                                                original.console.error.apply(this, arguments);
                                            }
                                        }
                                    }

                                    //Ajax call to send logs
                                    ConsoleLogger.prototype.flush = function(data, callback) {
                                        var result = false;
                                        var count = (JSON.parse(data)).count;
                                        var hostName = window.location.hostname;
                                        var protocol = (hostName.indexOf('devus') != -1 || hostName.indexOf('stgwww') != -1 || hostName.indexOf('local') != -1) ? 'http': 'https';
                                        var getUrl = function(protocol) {
                                            var host = window.location.host;
                                            return protocol + "://" + host + "/us/api/checkout/logger";
                                        }
                                        var apiUrl = getUrl(protocol);
                                        try {
                                            $.ajax({
                                                type: "POST",
                                                url: apiUrl,
                                                data: data,
                                                headers: {
                                                    'Content-Type': 'application/json'
                                                }
                                            }).fail(function(error) {
                                                result = false;
                                                ConsoleLogger.PREVIOUS_REQUEST_COMPLETED = true;
                                                if (callback != null) {
                                                    callback(result, count);
                                                }
                                            }).then(function(data) {
                                                result = true;
                                                ConsoleLogger.PREVIOUS_REQUEST_COMPLETED = true;
                                                if (callback != null) {
                                                    callback(result, count);
                                                }
                                            });
                                        } catch(error) {
                                            //console.log("Error -server side logging failed ");
                                            return false;
                                        }
                                    };

                                    //format time
                                    ConsoleLogger.prototype.getFormattedTime = function() {
                                        var date = new Date();
                                        return date.toUTCString();
                                    }
                                    //get ecom-cookies
                                    ConsoleLogger.prototype.getEcomCookie = function() {
                                        var ecomCookies = {};
                                        ecomCookies.remoteId = $.cookie("remoteId");
                                        ecomCookies.s_vi = $.cookie("s_vi");
                                        ecomCookies.prof_id = $.cookie("prof_id");
                                        ecomCookies.s_ecom_session = $.cookie("s_ecom_session");
                                        ecomCookies.ecom_vi = $.cookie("ecom_vi");
                                        ecomCookies.tmktid = $.cookie("tmktid");
                                        ecomCookies.tmktname = $.cookie("tmktname");
                                        ecomCookies.taccessrtype = $.cookie("taccessrtype");
                                        ecomCookies.tppid = $.cookie("tppid");
                                        ecomCookies.tlgimg = $.cookie("tlgimg");
                                        return JSON.stringify(ecomCookies);
                                    };

                                    //clears the localStorage
                                    ConsoleLogger.prototype.clearLogs = function(count) {
                                        var temp;
                                        if (ConsoleLogger.LS) {
                                            var local = localStorage.getItem('client_side_errors');
                                            temp = JSON.parse(local);
                                            localStorage.removeItem('client_side_errors');
                                        } else {
                                            var local = ConsoleLogger.STORAGE;
                                            temp = JSON.parse(local) ConsoleLogger.STORAGE = null;
                                        }
                                        if (temp != null) {
                                            var device = temp.device;
                                            var logmsg = temp.msg.splice(0, count) var countNow = temp.msg.length;
                                            if (countNow == 0) {
                                                return;
                                            } else {
                                                var result = {
                                                    "count": countNow,
                                                    "device": device,
                                                    "msg": temp.msg
                                                };
                                                if (ConsoleLogger.LS) {
                                                    localStorage.setItem('client_side_errors', JSON.stringify(result));
                                                } else {
                                                    ConsoleLogger.STORAGE = JSON.stringify(result);
                                                }
                                            }
                                        }
                                    }

                                    //send logs on exceeding SIZETHRESHOLD
                                    ConsoleLogger.prototype.checkSizeAndFlush = function() {
                                        if (ConsoleLogger.LS) {
                                            var localObj = JSON.parse(localStorage.getItem('client_side_errors'));
                                        } else {
                                            var localObj = JSON.parse(ConsoleLogger.STORAGE);
                                        }
                                        if (localObj != null && localObj.count >= ConsoleLogger.SIZETHRESHOLD) {
                                            this.sendLogs();
                                        }
                                    }

                                    //send logs on exceeding TIMETHRESHOLD
                                    ConsoleLogger.prototype.secCallback = function() {
                                        if (ConsoleLogger.LS) {
                                            var localObj = JSON.parse(localStorage.getItem('client_side_errors'));
                                        } else {
                                            var localObj = JSON.parse(ConsoleLogger.STORAGE);
                                        }

                                        if (localObj != null && (((new Date().getTime()) - localObj.msg[0].time) >= ConsoleLogger.TIMETHRESHOLD)) {
                                            this.ConsoleLogger.prototype.sendLogs();
                                        }
                                    };

                                    //push logs to localStorage
                                    /*{"count": 1,"device":"n","msg":[ {"message":"message","type":"type","time":"new","formatTime": "s"}]}
    */
                                    ConsoleLogger.prototype.sendLogs = function() {
                                        if (ConsoleLogger.LS) {
                                            var local = localStorage.getItem('client_side_errors');
                                        } else {
                                            var local = ConsoleLogger.STORAGE;
                                        }
                                        var processData = function(result, count) {
                                            if (result) {
                                                this.ConsoleLogger.prototype.clearLogs(count);
                                            }
                                        }
                                        if (local != null) {
                                            if (ConsoleLogger.PREVIOUS_REQUEST_COMPLETED) {
                                                ConsoleLogger.PREVIOUS_REQUEST_COMPLETED = false;
                                                this.flush(local, processData);
                                            }
                                        }
                                    }

                                    //Check localStorage is available or not
                                    ConsoleLogger.prototype.isLSavailable = function() {
                                        var test = 'test';
                                        try {
                                            localStorage.setItem(test, test);
                                            localStorage.removeItem(test);
                                            return true;
                                        } catch(e) {
                                            return false;
                                        }
                                    }

                                    ConsoleLogger.prototype.pushLogs = function(message, type) {
                                        if (type == 'log' || type == 'info') {
                                            return;
                                        }
                                        if (ConsoleLogger.LS) {
                                            var local = localStorage.getItem('client_side_errors');
                                        } else {
                                            var local = ConsoleLogger.STORAGE;
                                        }
                                        var hashfunction = function(txt) {
                                            var hash = 0,
                                                i, chr;
                                            if (txt.length === 0) return hash;
                                            for (i = 0; i < txt.length; i++) {
                                                chr = txt.charCodeAt(i);
                                                hash = ((hash << 5) - hash) + chr;
                                                hash |= 0; // Convert to 32bit integer
                                            }
                                            return hash;
                                        };
                                        var hashValue, logMessage;
                                        if (typeof(message) == 'object') {
                                            logMessage = message.message.split(/\n|\r|↵/).join("\n").match(/^.*$/m)[0];
                                            hashValue = hashfunction((message.message.split(/\n|\r|↵/).join("\n")).match(/^.*$/m)[0]);
                                            message = JSON.stringify(message);
                                        } else {
                                            logMessage = message.split(/\n|\r|↵/).join("\n").match(/^.*$/m)[0];
                                            hashValue = hashfunction((message.split(/\n|\r|↵/).join("\n")).match(/^.*$/m)[0]);
                                            message = JSON.stringify({
                                                "message": message
                                            });
                                        }
                                        var msg = {
                                            "message": message,
                                            "type": type,
                                            "time": new Date().getTime(),
                                            "url": window.location.href,
                                            "formatTime": this.getFormattedTime(),
                                            "x-ecom-cookie-credentials": this.getEcomCookie(),
                                            "hashValue": hashValue,
                                            "logMessage": logMessage
                                        };
                                        if (local != null) {
                                            var temp = JSON.parse(local);
                                            temp.count = temp.count + 1;
                                            temp.msg.push(msg);
                                            if (ConsoleLogger.LS) {
                                                localStorage.setItem("client_side_errors", JSON.stringify(temp));
                                            } else {
                                                ConsoleLogger.STORAGE = JSON.stringify(temp);
                                            }
                                        } else {
                                            var logmsg = [];
                                            logmsg.push(msg);
                                            var temp = {
                                                "count": 1,
                                                "device": navigator.userAgent ? navigator.userAgent: "Not Found",
                                                "msg": logmsg
                                            };
                                            if (ConsoleLogger.LS) {
                                                localStorage.setItem('client_side_errors', JSON.stringify(temp));
                                            } else {
                                                ConsoleLogger.STORAGE = JSON.stringify(temp);
                                            }
                                        }
                                        this.checkSizeAndFlush();
                                    }

                                    //call TIMETHRESHOLD every 2 sec
                                    ConsoleLogger.prototype.sendInterval = function() {
                                        intervalId = setInterval(this.secCallback, 1 * 2 * 1000);
                                    }

                                    window.onunload = function() {
                                        this.ConsoleLogger.prototype.sendLogs();
                                    };

                                    window.onload = function() {
                                        this.ConsoleLogger.prototype.sendLogs();
                                    };

                                    window.onerror = function(errorMsg, url, lineNumber, column, errorObj) {
                                        var msg = {
                                            "message": errorMsg,
                                            "url": url,
                                            "lineNumber": lineNumber,
                                            "column": column,
                                            "errorObj": errorObj
                                        };
                                        this.ConsoleLogger.prototype.pushLogs(msg, "fatal");
                                        return false;
                                    }

                                    var hidden, state, visibilityChange;
                                    if (typeof document.hidden !== "undefined") {
                                        hidden = "hidden";
                                        visibilityChange = "visibilitychange";
                                        state = "visibilityState";
                                    } else if (typeof document.mozHidden !== "undefined") {
                                        hidden = "mozHidden";
                                        visibilityChange = "mozvisibilitychange";
                                        state = "mozVisibilityState";
                                    } else if (typeof document.msHidden !== "undefined") {
                                        hidden = "msHidden";
                                        visibilityChange = "msvisibilitychange";
                                        state = "msVisibilityState";
                                    } else if (typeof document.webkitHidden !== "undefined") {
                                        hidden = "webkitHidden";
                                        visibilityChange = "webkitvisibilitychange";
                                        state = "webkitVisibilityState";
                                    }

                                    // Add a listener that constantly checks the visibility of page
                                    document.addEventListener(visibilityChange,
                                        function() {
                                            if (document[hidden]) {
                                                window.ConsoleLogger.prototype.sendLogs();
                                            }
                                        });

                                    return ConsoleLogger;
                                })(); new ConsoleLogger();

                                /*
 AngularJS v1.2.28
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
                                (function(W, X, u) {
                                    'use strict';
                                    function z(b) {
                                        return function() {
                                            var a = arguments[0],
                                                c,
                                                a = "[" + (b ? b + ":": "") + a + "] http://errors.angularjs.org/1.2.28/" + (b ? b + "/": "") + a;
                                            for (c = 1; c < arguments.length; c++) a = a + (1 == c ? "?": "&") + "p" + (c - 1) + "=" + encodeURIComponent("function" == typeof arguments[c] ? arguments[c].toString().replace(/ \{[\s\S]*$/, "") : "undefined" == typeof arguments[c] ? "undefined": "string" != typeof arguments[c] ? JSON.stringify(arguments[c]) : arguments[c]);
                                            return Error(a)
                                        }
                                    }
                                    function Sa(b) {
                                        if (null == b || Ja(b)) return ! 1;
                                        var a = b.length;
                                        return 1 === b.nodeType && a ? !0 : G(b) || L(b) || 0 === a || "number" === typeof a && 0 < a && a - 1 in b
                                    }
                                    function r(b, a, c) {
                                        var d;
                                        if (b) if (N(b)) for (d in b)"prototype" == d || ("length" == d || "name" == d || b.hasOwnProperty && !b.hasOwnProperty(d)) || a.call(c, b[d], d);
                                        else if (L(b) || Sa(b)) for (d = 0; d < b.length; d++) a.call(c, b[d], d);
                                        else if (b.forEach && b.forEach !== r) b.forEach(a, c);
                                        else for (d in b) b.hasOwnProperty(d) && a.call(c, b[d], d);
                                        return b
                                    }
                                    function Xb(b) {
                                        var a = [],
                                            c;
                                        for (c in b) b.hasOwnProperty(c) && a.push(c);
                                        return a.sort()
                                    }
                                    function Sc(b, a, c) {
                                        for (var d = Xb(b), e = 0; e < d.length; e++) a.call(c, b[d[e]], d[e]);
                                        return d
                                    }
                                    function Yb(b) {
                                        return function(a, c) {
                                            b(c, a)
                                        }
                                    }
                                    function ib() {
                                        for (var b = na.length,
                                                 a; b;) {
                                            b--;
                                            a = na[b].charCodeAt(0);
                                            if (57 == a) return na[b] = "A",
                                                na.join("");
                                            if (90 == a) na[b] = "0";
                                            else return na[b] = String.fromCharCode(a + 1),
                                                na.join("")
                                        }
                                        na.unshift("0");
                                        return na.join("")
                                    }
                                    function Zb(b, a) {
                                        a ? b.$$hashKey = a: delete b.$$hashKey
                                    }
                                    function E(b) {
                                        var a = b.$$hashKey;
                                        r(arguments,
                                            function(a) {
                                                a !== b && r(a,
                                                    function(a, c) {
                                                        b[c] = a
                                                    })
                                            });
                                        Zb(b, a);
                                        return b
                                    }
                                    function U(b) {
                                        return parseInt(b, 10)
                                    }
                                    function $b(b, a) {
                                        return E(new(E(function() {},
                                            {
                                                prototype: b
                                            })), a)
                                    }
                                    function v() {}
                                    function ga(b) {
                                        return b
                                    }
                                    function aa(b) {
                                        return function() {
                                            return b
                                        }
                                    }
                                    function F(b) {
                                        return "undefined" === typeof b
                                    }
                                    function D(b) {
                                        return "undefined" !== typeof b
                                    }
                                    function T(b) {
                                        return null != b && "object" === typeof b
                                    }
                                    function G(b) {
                                        return "string" === typeof b
                                    }
                                    function jb(b) {
                                        return "number" === typeof b
                                    }
                                    function va(b) {
                                        return "[object Date]" === Ba.call(b)
                                    }
                                    function N(b) {
                                        return "function" === typeof b
                                    }
                                    function kb(b) {
                                        return "[object RegExp]" === Ba.call(b)
                                    }
                                    function Ja(b) {
                                        return b && b.document && b.location && b.alert && b.setInterval
                                    }
                                    function Tc(b) {
                                        return ! (!b || !(b.nodeName || b.prop && b.attr && b.find))
                                    }
                                    function Uc(b, a, c) {
                                        var d = [];
                                        r(b,
                                            function(b, f, g) {
                                                d.push(a.call(c, b, f, g))
                                            });
                                        return d
                                    }
                                    function Ta(b, a) {
                                        if (b.indexOf) return b.indexOf(a);
                                        for (var c = 0; c < b.length; c++) if (a === b[c]) return c;
                                        return - 1
                                    }
                                    function Ua(b, a) {
                                        var c = Ta(b, a);
                                        0 <= c && b.splice(c, 1);
                                        return a
                                    }
                                    function Ka(b, a, c, d) {
                                        if (Ja(b) || b && b.$evalAsync && b.$watch) throw Va("cpws");
                                        if (a) {
                                            if (b === a) throw Va("cpi");
                                            c = c || [];
                                            d = d || [];
                                            if (T(b)) {
                                                var e = Ta(c, b);
                                                if ( - 1 !== e) return d[e];
                                                c.push(b);
                                                d.push(a)
                                            }
                                            if (L(b)) for (var f = a.length = 0; f < b.length; f++) e = Ka(b[f], null, c, d),
                                            T(b[f]) && (c.push(b[f]), d.push(e)),
                                                a.push(e);
                                            else {
                                                var g = a.$$hashKey;
                                                L(a) ? a.length = 0 : r(a,
                                                    function(b, c) {
                                                        delete a[c]
                                                    });
                                                for (f in b) e = Ka(b[f], null, c, d),
                                                T(b[f]) && (c.push(b[f]), d.push(e)),
                                                    a[f] = e;
                                                Zb(a, g)
                                            }
                                        } else if (a = b) L(b) ? a = Ka(b, [], c, d) : va(b) ? a = new Date(b.getTime()) : kb(b) ? (a = RegExp(b.source, b.toString().match(/[^\/]*$/)[0]), a.lastIndex = b.lastIndex) : T(b) && (a = Ka(b, {},
                                            c, d));
                                        return a
                                    }
                                    function ha(b, a) {
                                        if (L(b)) {
                                            a = a || [];
                                            for (var c = 0; c < b.length; c++) a[c] = b[c]
                                        } else if (T(b)) for (c in a = a || {},
                                            b) ! lb.call(b, c) || "$" === c.charAt(0) && "$" === c.charAt(1) || (a[c] = b[c]);
                                        return a || b
                                    }
                                    function Ca(b, a) {
                                        if (b === a) return ! 0;
                                        if (null === b || null === a) return ! 1;
                                        if (b !== b && a !== a) return ! 0;
                                        var c = typeof b,
                                            d;
                                        if (c == typeof a && "object" == c) if (L(b)) {
                                            if (!L(a)) return ! 1;
                                            if ((c = b.length) == a.length) {
                                                for (d = 0; d < c; d++) if (!Ca(b[d], a[d])) return ! 1;
                                                return ! 0
                                            }
                                        } else {
                                            if (va(b)) return va(a) ? isNaN(b.getTime()) && isNaN(a.getTime()) || b.getTime() === a.getTime() : !1;
                                            if (kb(b) && kb(a)) return b.toString() == a.toString();
                                            if (b && b.$evalAsync && b.$watch || a && a.$evalAsync && a.$watch || Ja(b) || Ja(a) || L(a)) return ! 1;
                                            c = {};
                                            for (d in b) if ("$" !== d.charAt(0) && !N(b[d])) {
                                                if (!Ca(b[d], a[d])) return ! 1;
                                                c[d] = !0
                                            }
                                            for (d in a) if (!c.hasOwnProperty(d) && "$" !== d.charAt(0) && a[d] !== u && !N(a[d])) return ! 1;
                                            return ! 0
                                        }
                                        return ! 1
                                    }
                                    function Bb(b, a) {
                                        var c = 2 < arguments.length ? wa.call(arguments, 2) : [];
                                        return ! N(a) || a instanceof RegExp ? a: c.length ?
                                            function() {
                                                return arguments.length ? a.apply(b, c.concat(wa.call(arguments, 0))) : a.apply(b, c)
                                            }: function() {
                                                return arguments.length ? a.apply(b, arguments) : a.call(b)
                                            }
                                    }
                                    function Vc(b, a) {
                                        var c = a;
                                        "string" === typeof b && "$" === b.charAt(0) ? c = u: Ja(a) ? c = "$WINDOW": a && X === a ? c = "$DOCUMENT": a && (a.$evalAsync && a.$watch) && (c = "$SCOPE");
                                        return c
                                    }
                                    function oa(b, a) {
                                        return "undefined" === typeof b ? u: JSON.stringify(b, Vc, a ? "  ": null)
                                    }
                                    function ac(b) {
                                        return G(b) ? JSON.parse(b) : b
                                    }
                                    function Wa(b) {
                                        "function" === typeof b ? b = !0 : b && 0 !== b.length ? (b = x("" + b), b = !("f" == b || "0" == b || "false" == b || "no" == b || "n" == b || "[]" == b)) : b = !1;
                                        return b
                                    }
                                    function ia(b) {
                                        b = A(b).clone();
                                        try {
                                            b.empty()
                                        } catch(a) {}
                                        var c = A("<div>").append(b).html();
                                        try {
                                            return 3 === b[0].nodeType ? x(c) : c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,
                                                function(a, b) {
                                                    return "<" + x(b)
                                                })
                                        } catch(d) {
                                            return x(c)
                                        }
                                    }
                                    function bc(b) {
                                        try {
                                            return decodeURIComponent(b)
                                        } catch(a) {}
                                    }
                                    function cc(b) {
                                        var a = {},
                                            c, d;
                                        r((b || "").split("&"),
                                            function(b) {
                                                b && (c = b.replace(/\+/g, "%20").split("="), d = bc(c[0]), D(d) && (b = D(c[1]) ? bc(c[1]) : !0, lb.call(a, d) ? L(a[d]) ? a[d].push(b) : a[d] = [a[d], b] : a[d] = b))
                                            });
                                        return a
                                    }
                                    function Cb(b) {
                                        var a = [];
                                        r(b,
                                            function(b, d) {
                                                L(b) ? r(b,
                                                    function(b) {
                                                        a.push(Da(d, !0) + (!0 === b ? "": "=" + Da(b, !0)))
                                                    }) : a.push(Da(d, !0) + (!0 === b ? "": "=" + Da(b, !0)))
                                            });
                                        return a.length ? a.join("&") : ""
                                    }
                                    function mb(b) {
                                        return Da(b, !0).replace(/%26/gi, "&").replace(/%3D/gi, "=").replace(/%2B/gi, "+")
                                    }
                                    function Da(b, a) {
                                        return encodeURIComponent(b).replace(/%40/gi, "@").replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, a ? "%20": "+")
                                    }
                                    function Wc(b, a) {
                                        function c(a) {
                                            a && d.push(a)
                                        }
                                        var d = [b],
                                            e,
                                            f,
                                            g = ["ng:app", "ng-app", "x-ng-app", "data-ng-app"],
                                            h = /\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;
                                        r(g,
                                            function(a) {
                                                g[a] = !0;
                                                c(X.getElementById(a));
                                                a = a.replace(":", "\\:");
                                                b.querySelectorAll && (r(b.querySelectorAll("." + a), c), r(b.querySelectorAll("." + a + "\\:"), c), r(b.querySelectorAll("[" + a + "]"), c))
                                            });
                                        r(d,
                                            function(a) {
                                                if (!e) {
                                                    var b = h.exec(" " + a.className + " ");
                                                    b ? (e = a, f = (b[2] || "").replace(/\s+/g, ",")) : r(a.attributes,
                                                        function(b) { ! e && g[b.name] && (e = a, f = b.value)
                                                        })
                                                }
                                            });
                                        e && a(e, f ? [f] : [])
                                    }
                                    function dc(b, a) {
                                        var c = function() {
                                                b = A(b);
                                                if (b.injector()) {
                                                    var c = b[0] === X ? "document": ia(b);
                                                    throw Va("btstrpd", c.replace(/</, "&lt;").replace(/>/, "&gt;"));
                                                }
                                                a = a || [];
                                                a.unshift(["$provide",
                                                    function(a) {
                                                        a.value("$rootElement", b)
                                                    }]);
                                                a.unshift("ng");
                                                c = ec(a);
                                                c.invoke(["$rootScope", "$rootElement", "$compile", "$injector", "$animate",
                                                    function(a, b, c, d, e) {
                                                        a.$apply(function() {
                                                            b.data("$injector", d);
                                                            c(b)(a)
                                                        })
                                                    }]);
                                                return c
                                            },
                                            d = /^NG_DEFER_BOOTSTRAP!/;
                                        if (W && !d.test(W.name)) return c();
                                        W.name = W.name.replace(d, "");
                                        Xa.resumeBootstrap = function(b) {
                                            r(b,
                                                function(b) {
                                                    a.push(b)
                                                });
                                            c()
                                        }
                                    }
                                    function nb(b, a) {
                                        a = a || "_";
                                        return b.replace(Xc,
                                            function(b, d) {
                                                return (d ? a: "") + b.toLowerCase()
                                            })
                                    }
                                    function Db(b, a, c) {
                                        if (!b) throw Va("areq", a || "?", c || "required");
                                        return b
                                    }
                                    function Ya(b, a, c) {
                                        c && L(b) && (b = b[b.length - 1]);
                                        Db(N(b), a, "not a function, got " + (b && "object" === typeof b ? b.constructor.name || "Object": typeof b));
                                        return b
                                    }
                                    function Ea(b, a) {
                                        if ("hasOwnProperty" === b) throw Va("badname", a);
                                    }
                                    function fc(b, a, c) {
                                        if (!a) return b;
                                        a = a.split(".");
                                        for (var d, e = b,
                                                 f = a.length,
                                                 g = 0; g < f; g++) d = a[g],
                                        b && (b = (e = b)[d]);
                                        return ! c && N(b) ? Bb(e, b) : b
                                    }
                                    function Eb(b) {
                                        var a = b[0];
                                        b = b[b.length - 1];
                                        if (a === b) return A(a);
                                        var c = [a];
                                        do {
                                            a = a.nextSibling;
                                            if (!a) break;
                                            c.push(a)
                                        } while ( a !== b );
                                        return A(c)
                                    }
                                    function Yc(b) {
                                        var a = z("$injector"),
                                            c = z("ng");
                                        b = b.angular || (b.angular = {});
                                        b.$$minErr = b.$$minErr || z;
                                        return b.module || (b.module = function() {
                                            var b = {};
                                            return function(e, f, g) {
                                                if ("hasOwnProperty" === e) throw c("badname", "module");
                                                f && b.hasOwnProperty(e) && (b[e] = null);
                                                return b[e] || (b[e] = function() {
                                                    function b(a, d, e) {
                                                        return function() {
                                                            c[e || "push"]([a, d, arguments]);
                                                            return n
                                                        }
                                                    }
                                                    if (!f) throw a("nomod", e);
                                                    var c = [],
                                                        d = [],
                                                        l = b("$injector", "invoke"),
                                                        n = {
                                                            _invokeQueue: c,
                                                            _runBlocks: d,
                                                            requires: f,
                                                            name: e,
                                                            provider: b("$provide", "provider"),
                                                            factory: b("$provide", "factory"),
                                                            service: b("$provide", "service"),
                                                            value: b("$provide", "value"),
                                                            constant: b("$provide", "constant", "unshift"),
                                                            animation: b("$animateProvider", "register"),
                                                            filter: b("$filterProvider", "register"),
                                                            controller: b("$controllerProvider", "register"),
                                                            directive: b("$compileProvider", "directive"),
                                                            config: l,
                                                            run: function(a) {
                                                                d.push(a);
                                                                return this
                                                            }
                                                        };
                                                    g && l(g);
                                                    return n
                                                } ())
                                            }
                                        } ())
                                    }
                                    function Zc(b) {
                                        E(b, {
                                            bootstrap: dc,
                                            copy: Ka,
                                            extend: E,
                                            equals: Ca,
                                            element: A,
                                            forEach: r,
                                            injector: ec,
                                            noop: v,
                                            bind: Bb,
                                            toJson: oa,
                                            fromJson: ac,
                                            identity: ga,
                                            isUndefined: F,
                                            isDefined: D,
                                            isString: G,
                                            isFunction: N,
                                            isObject: T,
                                            isNumber: jb,
                                            isElement: Tc,
                                            isArray: L,
                                            version: $c,
                                            isDate: va,
                                            lowercase: x,
                                            uppercase: La,
                                            callbacks: {
                                                counter: 0
                                            },
                                            $$minErr: z,
                                            $$csp: Za
                                        });
                                        $a = Yc(W);
                                        try {
                                            $a("ngLocale")
                                        } catch(a) {
                                            $a("ngLocale", []).provider("$locale", ad)
                                        }
                                        $a("ng", ["ngLocale"], ["$provide",
                                            function(a) {
                                                a.provider({
                                                    $$sanitizeUri: bd
                                                });
                                                a.provider("$compile", gc).directive({
                                                    a: cd,
                                                    input: hc,
                                                    textarea: hc,
                                                    form: dd,
                                                    script: ed,
                                                    select: fd,
                                                    style: gd,
                                                    option: hd,
                                                    ngBind: id,
                                                    ngBindHtml: jd,
                                                    ngBindTemplate: kd,
                                                    ngClass: ld,
                                                    ngClassEven: md,
                                                    ngClassOdd: nd,
                                                    ngCloak: od,
                                                    ngController: pd,
                                                    ngForm: qd,
                                                    ngHide: rd,
                                                    ngIf: sd,
                                                    ngInclude: td,
                                                    ngInit: ud,
                                                    ngNonBindable: vd,
                                                    ngPluralize: wd,
                                                    ngRepeat: xd,
                                                    ngShow: yd,
                                                    ngStyle: zd,
                                                    ngSwitch: Ad,
                                                    ngSwitchWhen: Bd,
                                                    ngSwitchDefault: Cd,
                                                    ngOptions: Dd,
                                                    ngTransclude: Ed,
                                                    ngModel: Fd,
                                                    ngList: Gd,
                                                    ngChange: Hd,
                                                    required: ic,
                                                    ngRequired: ic,
                                                    ngValue: Id
                                                }).directive({
                                                    ngInclude: Jd
                                                }).directive(Fb).directive(jc);
                                                a.provider({
                                                    $anchorScroll: Kd,
                                                    $animate: Ld,
                                                    $browser: Md,
                                                    $cacheFactory: Nd,
                                                    $controller: Od,
                                                    $document: Pd,
                                                    $exceptionHandler: Qd,
                                                    $filter: kc,
                                                    $interpolate: Rd,
                                                    $interval: Sd,
                                                    $http: Td,
                                                    $httpBackend: Ud,
                                                    $location: Vd,
                                                    $log: Wd,
                                                    $parse: Xd,
                                                    $rootScope: Yd,
                                                    $q: Zd,
                                                    $sce: $d,
                                                    $sceDelegate: ae,
                                                    $sniffer: be,
                                                    $templateCache: ce,
                                                    $timeout: de,
                                                    $window: ee,
                                                    $$rAF: fe,
                                                    $$asyncCallback: ge
                                                })
                                            }])
                                    }
                                    function ab(b) {
                                        return b.replace(he,
                                            function(a, b, d, e) {
                                                return e ? d.toUpperCase() : d
                                            }).replace(ie, "Moz$1")
                                    }
                                    function Gb(b, a, c, d) {
                                        function e(b) {
                                            var e = c && b ? [this.filter(b)] : [this],
                                                k = a,
                                                m,
                                                l,
                                                n,
                                                q,
                                                p,
                                                s;
                                            if (!d || null != b) for (; e.length;) for (m = e.shift(), l = 0, n = m.length; l < n; l++) for (q = A(m[l]), k ? q.triggerHandler("$destroy") : k = !k, p = 0, q = (s = q.children()).length; p < q; p++) e.push(Fa(s[p]));
                                            return f.apply(this, arguments)
                                        }
                                        var f = Fa.fn[b],
                                            f = f.$original || f;
                                        e.$original = f;
                                        Fa.fn[b] = e
                                    }
                                    function S(b) {
                                        if (b instanceof S) return b;
                                        G(b) && (b = $(b));
                                        if (! (this instanceof S)) {
                                            if (G(b) && "<" != b.charAt(0)) throw Hb("nosel");
                                            return new S(b)
                                        }
                                        if (G(b)) {
                                            var a = b;
                                            b = X;
                                            var c;
                                            if (c = je.exec(a)) b = [b.createElement(c[1])];
                                            else {
                                                var d = b,
                                                    e;
                                                b = d.createDocumentFragment();
                                                c = [];
                                                if (Ib.test(a)) {
                                                    d = b.appendChild(d.createElement("div"));
                                                    e = (ke.exec(a) || ["", ""])[1].toLowerCase();
                                                    e = da[e] || da._default;
                                                    d.innerHTML = "<div>&#160;</div>" + e[1] + a.replace(le, "<$1></$2>") + e[2];
                                                    d.removeChild(d.firstChild);
                                                    for (a = e[0]; a--;) d = d.lastChild;
                                                    a = 0;
                                                    for (e = d.childNodes.length; a < e; ++a) c.push(d.childNodes[a]);
                                                    d = b.firstChild;
                                                    d.textContent = ""
                                                } else c.push(d.createTextNode(a));
                                                b.textContent = "";
                                                b.innerHTML = "";
                                                b = c
                                            }
                                            Jb(this, b);
                                            A(X.createDocumentFragment()).append(this)
                                        } else Jb(this, b)
                                    }
                                    function Kb(b) {
                                        return b.cloneNode(!0)
                                    }
                                    function Ma(b) {
                                        Lb(b);
                                        var a = 0;
                                        for (b = b.childNodes || []; a < b.length; a++) Ma(b[a])
                                    }
                                    function lc(b, a, c, d) {
                                        if (D(d)) throw Hb("offargs");
                                        var e = pa(b, "events");
                                        pa(b, "handle") && (F(a) ? r(e,
                                            function(a, c) {
                                                bb(b, c, a);
                                                delete e[c]
                                            }) : r(a.split(" "),
                                            function(a) {
                                                F(c) ? (bb(b, a, e[a]), delete e[a]) : Ua(e[a] || [], c)
                                            }))
                                    }
                                    function Lb(b, a) {
                                        var c = b.ng339,
                                            d = cb[c];
                                        d && (a ? delete cb[c].data[a] : (d.handle && (d.events.$destroy && d.handle({},
                                            "$destroy"), lc(b)), delete cb[c], b.ng339 = u))
                                    }
                                    function pa(b, a, c) {
                                        var d = b.ng339,
                                            d = cb[d || -1];
                                        if (D(c)) d || (b.ng339 = d = ++me, d = cb[d] = {}),
                                            d[a] = c;
                                        else return d && d[a]
                                    }
                                    function Mb(b, a, c) {
                                        var d = pa(b, "data"),
                                            e = D(c),
                                            f = !e && D(a),
                                            g = f && !T(a);
                                        d || g || pa(b, "data", d = {});
                                        if (e) d[a] = c;
                                        else if (f) {
                                            if (g) return d && d[a];
                                            E(d, a)
                                        } else return d
                                    }
                                    function Nb(b, a) {
                                        return b.getAttribute ? -1 < (" " + (b.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").indexOf(" " + a + " ") : !1
                                    }
                                    function ob(b, a) {
                                        a && b.setAttribute && r(a.split(" "),
                                            function(a) {
                                                b.setAttribute("class", $((" " + (b.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").replace(" " + $(a) + " ", " ")))
                                            })
                                    }
                                    function pb(b, a) {
                                        if (a && b.setAttribute) {
                                            var c = (" " + (b.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ");
                                            r(a.split(" "),
                                                function(a) {
                                                    a = $(a); - 1 === c.indexOf(" " + a + " ") && (c += a + " ")
                                                });
                                            b.setAttribute("class", $(c))
                                        }
                                    }
                                    function Jb(b, a) {
                                        if (a) {
                                            a = a.nodeName || !D(a.length) || Ja(a) ? [a] : a;
                                            for (var c = 0; c < a.length; c++) b.push(a[c])
                                        }
                                    }
                                    function mc(b, a) {
                                        return qb(b, "$" + (a || "ngController") + "Controller")
                                    }
                                    function qb(b, a, c) {
                                        9 == b.nodeType && (b = b.documentElement);
                                        for (a = L(a) ? a: [a]; b;) {
                                            for (var d = 0,
                                                     e = a.length; d < e; d++) if ((c = A.data(b, a[d])) !== u) return c;
                                            b = b.parentNode || 11 === b.nodeType && b.host
                                        }
                                    }
                                    function nc(b) {
                                        for (var a = 0,
                                                 c = b.childNodes; a < c.length; a++) Ma(c[a]);
                                        for (; b.firstChild;) b.removeChild(b.firstChild)
                                    }
                                    function oc(b, a) {
                                        var c = rb[a.toLowerCase()];
                                        return c && pc[b.nodeName] && c
                                    }
                                    function ne(b, a) {
                                        var c = function(c, e) {
                                            c.preventDefault || (c.preventDefault = function() {
                                                c.returnValue = !1
                                            });
                                            c.stopPropagation || (c.stopPropagation = function() {
                                                c.cancelBubble = !0
                                            });
                                            c.target || (c.target = c.srcElement || X);
                                            if (F(c.defaultPrevented)) {
                                                var f = c.preventDefault;
                                                c.preventDefault = function() {
                                                    c.defaultPrevented = !0;
                                                    f.call(c)
                                                };
                                                c.defaultPrevented = !1
                                            }
                                            c.isDefaultPrevented = function() {
                                                return c.defaultPrevented || !1 === c.returnValue
                                            };
                                            var g = ha(a[e || c.type] || []);
                                            r(g,
                                                function(a) {
                                                    a.call(b, c)
                                                });
                                            8 >= R ? (c.preventDefault = null, c.stopPropagation = null, c.isDefaultPrevented = null) : (delete c.preventDefault, delete c.stopPropagation, delete c.isDefaultPrevented)
                                        };
                                        c.elem = b;
                                        return c
                                    }
                                    function Na(b, a) {
                                        var c = typeof b,
                                            d;
                                        "function" == c || "object" == c && null !== b ? "function" == typeof(d = b.$$hashKey) ? d = b.$$hashKey() : d === u && (d = b.$$hashKey = (a || ib)()) : d = b;
                                        return c + ":" + d
                                    }
                                    function db(b, a) {
                                        if (a) {
                                            var c = 0;
                                            this.nextUid = function() {
                                                return++c
                                            }
                                        }
                                        r(b, this.put, this)
                                    }
                                    function qc(b) {
                                        var a, c;
                                        "function" === typeof b ? (a = b.$inject) || (a = [], b.length && (c = b.toString().replace(oe, ""), c = c.match(pe), r(c[1].split(qe),
                                            function(b) {
                                                b.replace(re,
                                                    function(b, c, d) {
                                                        a.push(d)
                                                    })
                                            })), b.$inject = a) : L(b) ? (c = b.length - 1, Ya(b[c], "fn"), a = b.slice(0, c)) : Ya(b, "fn", !0);
                                        return a
                                    }
                                    function ec(b) {
                                        function a(a) {
                                            return function(b, c) {
                                                if (T(b)) r(b, Yb(a));
                                                else return a(b, c)
                                            }
                                        }
                                        function c(a, b) {
                                            Ea(a, "service");
                                            if (N(b) || L(b)) b = n.instantiate(b);
                                            if (!b.$get) throw eb("pget", a);
                                            return l[a + h] = b
                                        }
                                        function d(a, b) {
                                            return c(a, {
                                                $get: b
                                            })
                                        }
                                        function e(a) {
                                            var b = [],
                                                c,
                                                d,
                                                f,
                                                h;
                                            r(a,
                                                function(a) {
                                                    if (!m.get(a)) {
                                                        m.put(a, !0);
                                                        try {
                                                            if (G(a)) for (c = $a(a), b = b.concat(e(c.requires)).concat(c._runBlocks), d = c._invokeQueue, f = 0, h = d.length; f < h; f++) {
                                                                var g = d[f],
                                                                    k = n.get(g[0]);
                                                                k[g[1]].apply(k, g[2])
                                                            } else N(a) ? b.push(n.invoke(a)) : L(a) ? b.push(n.invoke(a)) : Ya(a, "module")
                                                        } catch(p) {
                                                            throw L(a) && (a = a[a.length - 1]),
                                                            p.message && (p.stack && -1 == p.stack.indexOf(p.message)) && (p = p.message + "\n" + p.stack),
                                                                eb("modulerr", a, p.stack || p.message || p);
                                                        }
                                                    }
                                                });
                                            return b
                                        }
                                        function f(a, b) {
                                            function c(d) {
                                                if (a.hasOwnProperty(d)) {
                                                    if (a[d] === g) throw eb("cdep", d + " <- " + k.join(" <- "));
                                                    return a[d]
                                                }
                                                try {
                                                    return k.unshift(d),
                                                        a[d] = g,
                                                        a[d] = b(d)
                                                } catch(e) {
                                                    throw a[d] === g && delete a[d],
                                                        e;
                                                } finally {
                                                    k.shift()
                                                }
                                            }
                                            function d(a, b, e) {
                                                var f = [],
                                                    h = qc(a),
                                                    g,
                                                    k,
                                                    p;
                                                k = 0;
                                                for (g = h.length; k < g; k++) {
                                                    p = h[k];
                                                    if ("string" !== typeof p) throw eb("itkn", p);
                                                    f.push(e && e.hasOwnProperty(p) ? e[p] : c(p))
                                                }
                                                L(a) && (a = a[g]);
                                                return a.apply(b, f)
                                            }
                                            return {
                                                invoke: d,
                                                instantiate: function(a, b) {
                                                    var c = function() {},
                                                        e;
                                                    c.prototype = (L(a) ? a[a.length - 1] : a).prototype;
                                                    c = new c;
                                                    e = d(a, c, b);
                                                    return T(e) || N(e) ? e: c
                                                },
                                                get: c,
                                                annotate: qc,
                                                has: function(b) {
                                                    return l.hasOwnProperty(b + h) || a.hasOwnProperty(b)
                                                }
                                            }
                                        }
                                        var g = {},
                                            h = "Provider",
                                            k = [],
                                            m = new db([], !0),
                                            l = {
                                                $provide: {
                                                    provider: a(c),
                                                    factory: a(d),
                                                    service: a(function(a, b) {
                                                        return d(a, ["$injector",
                                                            function(a) {
                                                                return a.instantiate(b)
                                                            }])
                                                    }),
                                                    value: a(function(a, b) {
                                                        return d(a, aa(b))
                                                    }),
                                                    constant: a(function(a, b) {
                                                        Ea(a, "constant");
                                                        l[a] = b;
                                                        q[a] = b
                                                    }),
                                                    decorator: function(a, b) {
                                                        var c = n.get(a + h),
                                                            d = c.$get;
                                                        c.$get = function() {
                                                            var a = p.invoke(d, c);
                                                            return p.invoke(b, null, {
                                                                $delegate: a
                                                            })
                                                        }
                                                    }
                                                }
                                            },
                                            n = l.$injector = f(l,
                                                function() {
                                                    throw eb("unpr", k.join(" <- "));
                                                }),
                                            q = {},
                                            p = q.$injector = f(q,
                                                function(a) {
                                                    a = n.get(a + h);
                                                    return p.invoke(a.$get, a)
                                                });
                                        r(e(b),
                                            function(a) {
                                                p.invoke(a || v)
                                            });
                                        return p
                                    }
                                    function Kd() {
                                        var b = !0;
                                        this.disableAutoScrolling = function() {
                                            b = !1
                                        };
                                        this.$get = ["$window", "$location", "$rootScope",
                                            function(a, c, d) {
                                                function e(a) {
                                                    var b = null;
                                                    r(a,
                                                        function(a) {
                                                            b || "a" !== x(a.nodeName) || (b = a)
                                                        });
                                                    return b
                                                }
                                                function f() {
                                                    var b = c.hash(),
                                                        d;
                                                    b ? (d = g.getElementById(b)) ? d.scrollIntoView() : (d = e(g.getElementsByName(b))) ? d.scrollIntoView() : "top" === b && a.scrollTo(0, 0) : a.scrollTo(0, 0)
                                                }
                                                var g = a.document;
                                                b && d.$watch(function() {
                                                        return c.hash()
                                                    },
                                                    function() {
                                                        d.$evalAsync(f)
                                                    });
                                                return f
                                            }]
                                    }
                                    function ge() {
                                        this.$get = ["$$rAF", "$timeout",
                                            function(b, a) {
                                                return b.supported ?
                                                    function(a) {
                                                        return b(a)
                                                    }: function(b) {
                                                        return a(b, 0, !1)
                                                    }
                                            }]
                                    }
                                    function se(b, a, c, d) {
                                        function e(a) {
                                            try {
                                                a.apply(null, wa.call(arguments, 1))
                                            } finally {
                                                if (s--, 0 === s) for (; J.length;) try {
                                                    J.pop()()
                                                } catch(b) {
                                                    c.error(b)
                                                }
                                            }
                                        }
                                        function f(a, b) { (function ea() {
                                            r(w,
                                                function(a) {
                                                    a()
                                                });
                                            t = b(ea, a)
                                        })()
                                        }
                                        function g() {
                                            y != h.url() && (y = h.url(), r(ba,
                                                function(a) {
                                                    a(h.url())
                                                }))
                                        }
                                        var h = this,
                                            k = a[0],
                                            m = b.location,
                                            l = b.history,
                                            n = b.setTimeout,
                                            q = b.clearTimeout,
                                            p = {};
                                        h.isMock = !1;
                                        var s = 0,
                                            J = [];
                                        h.$$completeOutstandingRequest = e;
                                        h.$$incOutstandingRequestCount = function() {
                                            s++
                                        };
                                        h.notifyWhenNoOutstandingRequests = function(a) {
                                            r(w,
                                                function(a) {
                                                    a()
                                                });
                                            0 === s ? a() : J.push(a)
                                        };
                                        var w = [],
                                            t;
                                        h.addPollFn = function(a) {
                                            F(t) && f(100, n);
                                            w.push(a);
                                            return a
                                        };
                                        var y = m.href,
                                            K = a.find("base"),
                                            B = null;
                                        h.url = function(a, c) {
                                            m !== b.location && (m = b.location);
                                            l !== b.history && (l = b.history);
                                            if (a) {
                                                if (y != a) {
                                                    var e = y && Ga(y) === Ga(a);
                                                    y = a; ! e && d.history ? c ? l.replaceState(null, "", a) : (l.pushState(null, "", a), K.attr("href", K.attr("href"))) : (e || (B = a), c ? m.replace(a) : m.href = a);
                                                    return h
                                                }
                                            } else return B || m.href.replace(/%27/g, "'")
                                        };
                                        var ba = [],
                                            O = !1;
                                        h.onUrlChange = function(a) {
                                            if (!O) {
                                                if (d.history) A(b).on("popstate", g);
                                                if (d.hashchange) A(b).on("hashchange", g);
                                                else h.addPollFn(g);
                                                O = !0
                                            }
                                            ba.push(a);
                                            return a
                                        };
                                        h.$$checkUrlChange = g;
                                        h.baseHref = function() {
                                            var a = K.attr("href");
                                            return a ? a.replace(/^(https?\:)?\/\/[^\/]*/, "") : ""
                                        };
                                        var M = {},
                                            ca = "",
                                            P = h.baseHref();
                                        h.cookies = function(a, b) {
                                            var d, e, f, h;
                                            if (a) b === u ? k.cookie = escape(a) + "=;path=" + P + ";expires=Thu, 01 Jan 1970 00:00:00 GMT": G(b) && (d = (k.cookie = escape(a) + "=" + escape(b) + ";path=" + P).length + 1, 4096 < d && c.warn("Cookie '" + a + "' possibly not set or overflowed because it was too large (" + d + " > 4096 bytes)!"));
                                            else {
                                                if (k.cookie !== ca) for (ca = k.cookie, d = ca.split("; "), M = {},
                                                                              f = 0; f < d.length; f++) e = d[f],
                                                    h = e.indexOf("="),
                                                0 < h && (a = unescape(e.substring(0, h)), M[a] === u && (M[a] = unescape(e.substring(h + 1))));
                                                return M
                                            }
                                        };
                                        h.defer = function(a, b) {
                                            var c;
                                            s++;
                                            c = n(function() {
                                                    delete p[c];
                                                    e(a)
                                                },
                                                b || 0);
                                            p[c] = !0;
                                            return c
                                        };
                                        h.defer.cancel = function(a) {
                                            return p[a] ? (delete p[a], q(a), e(v), !0) : !1
                                        }
                                    }
                                    function Md() {
                                        this.$get = ["$window", "$log", "$sniffer", "$document",
                                            function(b, a, c, d) {
                                                return new se(b, d, a, c)
                                            }]
                                    }
                                    function Nd() {
                                        this.$get = function() {
                                            function b(b, d) {
                                                function e(a) {
                                                    a != n && (q ? q == a && (q = a.n) : q = a, f(a.n, a.p), f(a, n), n = a, n.n = null)
                                                }
                                                function f(a, b) {
                                                    a != b && (a && (a.p = b), b && (b.n = a))
                                                }
                                                if (b in a) throw z("$cacheFactory")("iid", b);
                                                var g = 0,
                                                    h = E({},
                                                        d, {
                                                            id: b
                                                        }),
                                                    k = {},
                                                    m = d && d.capacity || Number.MAX_VALUE,
                                                    l = {},
                                                    n = null,
                                                    q = null;
                                                return a[b] = {
                                                    put: function(a, b) {
                                                        if (m < Number.MAX_VALUE) {
                                                            var c = l[a] || (l[a] = {
                                                                key: a
                                                            });
                                                            e(c)
                                                        }
                                                        if (!F(b)) return a in k || g++,
                                                            k[a] = b,
                                                        g > m && this.remove(q.key),
                                                            b
                                                    },
                                                    get: function(a) {
                                                        if (m < Number.MAX_VALUE) {
                                                            var b = l[a];
                                                            if (!b) return;
                                                            e(b)
                                                        }
                                                        return k[a]
                                                    },
                                                    remove: function(a) {
                                                        if (m < Number.MAX_VALUE) {
                                                            var b = l[a];
                                                            if (!b) return;
                                                            b == n && (n = b.p);
                                                            b == q && (q = b.n);
                                                            f(b.n, b.p);
                                                            delete l[a]
                                                        }
                                                        delete k[a];
                                                        g--
                                                    },
                                                    removeAll: function() {
                                                        k = {};
                                                        g = 0;
                                                        l = {};
                                                        n = q = null
                                                    },
                                                    destroy: function() {
                                                        l = h = k = null;
                                                        delete a[b]
                                                    },
                                                    info: function() {
                                                        return E({},
                                                            h, {
                                                                size: g
                                                            })
                                                    }
                                                }
                                            }
                                            var a = {};
                                            b.info = function() {
                                                var b = {};
                                                r(a,
                                                    function(a, e) {
                                                        b[e] = a.info()
                                                    });
                                                return b
                                            };
                                            b.get = function(b) {
                                                return a[b]
                                            };
                                            return b
                                        }
                                    }
                                    function ce() {
                                        this.$get = ["$cacheFactory",
                                            function(b) {
                                                return b("templates")
                                            }]
                                    }
                                    function gc(b, a) {
                                        var c = {},
                                            d = "Directive",
                                            e = /^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,
                                            f = /(([\d\w_\-]+)(?:\:([^;]+))?;?)/,
                                            g = /^(on[a-z]+|formaction)$/;
                                        this.directive = function k(a, e) {
                                            Ea(a, "directive");
                                            G(a) ? (Db(e, "directiveFactory"), c.hasOwnProperty(a) || (c[a] = [], b.factory(a + d, ["$injector", "$exceptionHandler",
                                                function(b, d) {
                                                    var e = [];
                                                    r(c[a],
                                                        function(c, f) {
                                                            try {
                                                                var g = b.invoke(c);
                                                                N(g) ? g = {
                                                                    compile: aa(g)
                                                                }: !g.compile && g.link && (g.compile = aa(g.link));
                                                                g.priority = g.priority || 0;
                                                                g.index = f;
                                                                g.name = g.name || a;
                                                                g.require = g.require || g.controller && g.name;
                                                                g.restrict = g.restrict || "A";
                                                                e.push(g)
                                                            } catch(k) {
                                                                d(k)
                                                            }
                                                        });
                                                    return e
                                                }])), c[a].push(e)) : r(a, Yb(k));
                                            return this
                                        };
                                        this.aHrefSanitizationWhitelist = function(b) {
                                            return D(b) ? (a.aHrefSanitizationWhitelist(b), this) : a.aHrefSanitizationWhitelist()
                                        };
                                        this.imgSrcSanitizationWhitelist = function(b) {
                                            return D(b) ? (a.imgSrcSanitizationWhitelist(b), this) : a.imgSrcSanitizationWhitelist()
                                        };
                                        this.$get = ["$injector", "$interpolate", "$exceptionHandler", "$http", "$templateCache", "$parse", "$controller", "$rootScope", "$document", "$sce", "$animate", "$$sanitizeUri",
                                            function(a, b, l, n, q, p, s, J, w, t, y, K) {
                                                function B(a, b, c, d, e) {
                                                    a instanceof A || (a = A(a));
                                                    r(a,
                                                        function(b, c) {
                                                            3 == b.nodeType && b.nodeValue.match(/\S+/) && (a[c] = A(b).wrap("<span></span>").parent()[0])
                                                        });
                                                    var f = O(a, b, a, c, d, e);
                                                    ba(a, "ng-scope");
                                                    return function(b, c, d, e) {
                                                        Db(b, "scope");
                                                        var g = c ? Oa.clone.call(a) : a;
                                                        r(d,
                                                            function(a, b) {
                                                                g.data("$" + b + "Controller", a)
                                                            });
                                                        d = 0;
                                                        for (var k = g.length; d < k; d++) {
                                                            var p = g[d].nodeType;
                                                            1 !== p && 9 !== p || g.eq(d).data("$scope", b)
                                                        }
                                                        c && c(g, b);
                                                        f && f(b, g, g, e);
                                                        return g
                                                    }
                                                }
                                                function ba(a, b) {
                                                    try {
                                                        a.addClass(b)
                                                    } catch(c) {}
                                                }
                                                function O(a, b, c, d, e, f) {
                                                    function g(a, c, d, e) {
                                                        var f, p, l, m, q, n, w;
                                                        f = c.length;
                                                        var s = Array(f);
                                                        for (m = 0; m < f; m++) s[m] = c[m];
                                                        n = m = 0;
                                                        for (q = k.length; m < q; n++) p = s[n],
                                                            c = k[m++],
                                                            f = k[m++],
                                                            c ? (c.scope ? (l = a.$new(), A.data(p, "$scope", l)) : l = a, w = c.transcludeOnThisElement ? M(a, c.transclude, e) : !c.templateOnThisElement && e ? e: !e && b ? M(a, b) : null, c(f, l, p, d, w)) : f && f(a, p.childNodes, u, e)
                                                    }
                                                    for (var k = [], p, l, m, q, n = 0; n < a.length; n++) p = new Ob,
                                                        l = ca(a[n], [], p, 0 === n ? d: u, e),
                                                    (f = l.length ? I(l, a[n], p, b, c, null, [], [], f) : null) && f.scope && ba(p.$$element, "ng-scope"),
                                                        p = f && f.terminal || !(m = a[n].childNodes) || !m.length ? null: O(m, f ? (f.transcludeOnThisElement || !f.templateOnThisElement) && f.transclude: b),
                                                        k.push(f, p),
                                                        q = q || f || p,
                                                        f = null;
                                                    return q ? g: null
                                                }
                                                function M(a, b, c) {
                                                    return function(d, e, f) {
                                                        var g = !1;
                                                        d || (d = a.$new(), g = d.$$transcluded = !0);
                                                        e = b(d, e, f, c);
                                                        if (g) e.on("$destroy",
                                                            function() {
                                                                d.$destroy()
                                                            });
                                                        return e
                                                    }
                                                }
                                                function ca(a, b, c, d, g) {
                                                    var k = c.$attr,
                                                        p;
                                                    switch (a.nodeType) {
                                                        case 1:
                                                            ea(b, qa(Pa(a).toLowerCase()), "E", d, g);
                                                            for (var l, m, q, n = a.attributes,
                                                                     w = 0,
                                                                     s = n && n.length; w < s; w++) {
                                                                var t = !1,
                                                                    J = !1;
                                                                l = n[w];
                                                                if (!R || 8 <= R || l.specified) {
                                                                    p = l.name;
                                                                    m = $(l.value);
                                                                    l = qa(p);
                                                                    if (q = U.test(l)) p = nb(l.substr(6), "-");
                                                                    var y = l.replace(/(Start|End)$/, "");
                                                                    l === y + "Start" && (t = p, J = p.substr(0, p.length - 5) + "end", p = p.substr(0, p.length - 6));
                                                                    l = qa(p.toLowerCase());
                                                                    k[l] = p;
                                                                    if (q || !c.hasOwnProperty(l)) c[l] = m,
                                                                    oc(a, l) && (c[l] = !0);
                                                                    S(a, b, m, l);
                                                                    ea(b, l, "A", d, g, t, J)
                                                                }
                                                            }
                                                            a = a.className;
                                                            if (G(a) && "" !== a) for (; p = f.exec(a);) l = qa(p[2]),
                                                            ea(b, l, "C", d, g) && (c[l] = $(p[3])),
                                                                a = a.substr(p.index + p[0].length);
                                                            break;
                                                        case 3:
                                                            x(b, a.nodeValue);
                                                            break;
                                                        case 8:
                                                            try {
                                                                if (p = e.exec(a.nodeValue)) l = qa(p[1]),
                                                                ea(b, l, "M", d, g) && (c[l] = $(p[2]))
                                                            } catch(B) {}
                                                    }
                                                    b.sort(F);
                                                    return b
                                                }
                                                function P(a, b, c) {
                                                    var d = [],
                                                        e = 0;
                                                    if (b && a.hasAttribute && a.hasAttribute(b)) {
                                                        do {
                                                            if (!a) throw ja("uterdir", b, c);
                                                            1 == a.nodeType && (a.hasAttribute(b) && e++, a.hasAttribute(c) && e--);
                                                            d.push(a);
                                                            a = a.nextSibling
                                                        } while ( 0 < e )
                                                    } else d.push(a);
                                                    return A(d)
                                                }
                                                function C(a, b, c) {
                                                    return function(d, e, f, g, k) {
                                                        e = P(e[0], b, c);
                                                        return a(d, e, f, g, k)
                                                    }
                                                }
                                                function I(a, c, d, e, f, g, k, q, n) {
                                                    function w(a, b, c, d) {
                                                        if (a) {
                                                            c && (a = C(a, c, d));
                                                            a.require = H.require;
                                                            a.directiveName = z;
                                                            if (K === H || H.$$isolateScope) a = rc(a, {
                                                                isolateScope: !0
                                                            });
                                                            k.push(a)
                                                        }
                                                        if (b) {
                                                            c && (b = C(b, c, d));
                                                            b.require = H.require;
                                                            b.directiveName = z;
                                                            if (K === H || H.$$isolateScope) b = rc(b, {
                                                                isolateScope: !0
                                                            });
                                                            q.push(b)
                                                        }
                                                    }
                                                    function t(a, b, c, d) {
                                                        var e, f = "data",
                                                            g = !1;
                                                        if (G(b)) {
                                                            for (;
                                                                "^" == (e = b.charAt(0)) || "?" == e;) b = b.substr(1),
                                                            "^" == e && (f = "inheritedData"),
                                                                g = g || "?" == e;
                                                            e = null;
                                                            d && "data" === f && (e = d[b]);
                                                            e = e || c[f]("$" + b + "Controller");
                                                            if (!e && !g) throw ja("ctreq", b, a);
                                                        } else L(b) && (e = [], r(b,
                                                            function(b) {
                                                                e.push(t(a, b, c, d))
                                                            }));
                                                        return e
                                                    }
                                                    function J(a, e, f, g, n) {
                                                        function w(a, b) {
                                                            var c;
                                                            2 > arguments.length && (b = a, a = u);
                                                            Ia && (c = ca);
                                                            return n(a, b, c)
                                                        }
                                                        var y, Q, B, M, C, P, ca = {},
                                                            ra;
                                                        y = c === f ? d: ha(d, new Ob(A(f), d.$attr));
                                                        Q = y.$$element;
                                                        if (K) {
                                                            var ue = /^\s*([@=&])(\??)\s*(\w*)\s*$/;
                                                            P = e.$new(!0); ! I || I !== K && I !== K.$$originalDirective ? Q.data("$isolateScopeNoTemplate", P) : Q.data("$isolateScope", P);
                                                            ba(Q, "ng-isolate-scope");
                                                            r(K.scope,
                                                                function(a, c) {
                                                                    var d = a.match(ue) || [],
                                                                        f = d[3] || c,
                                                                        g = "?" == d[2],
                                                                        d = d[1],
                                                                        k,
                                                                        l,
                                                                        n,
                                                                        q;
                                                                    P.$$isolateBindings[c] = d + f;
                                                                    switch (d) {
                                                                        case "@":
                                                                            y.$observe(f,
                                                                                function(a) {
                                                                                    P[c] = a
                                                                                });
                                                                            y.$$observers[f].$$scope = e;
                                                                            y[f] && (P[c] = b(y[f])(e));
                                                                            break;
                                                                        case "=":
                                                                            if (g && !y[f]) break;
                                                                            l = p(y[f]);
                                                                            q = l.literal ? Ca: function(a, b) {
                                                                                return a === b || a !== a && b !== b
                                                                            };
                                                                            n = l.assign ||
                                                                                function() {
                                                                                    k = P[c] = l(e);
                                                                                    throw ja("nonassign", y[f], K.name);
                                                                                };
                                                                            k = P[c] = l(e);
                                                                            P.$watch(function() {
                                                                                    var a = l(e);
                                                                                    q(a, P[c]) || (q(a, k) ? n(e, a = P[c]) : P[c] = a);
                                                                                    return k = a
                                                                                },
                                                                                null, l.literal);
                                                                            break;
                                                                        case "&":
                                                                            l = p(y[f]);
                                                                            P[c] = function(a) {
                                                                                return l(e, a)
                                                                            };
                                                                            break;
                                                                        default:
                                                                            throw ja("iscp", K.name, c, a);
                                                                    }
                                                                })
                                                        }
                                                        ra = n && w;
                                                        O && r(O,
                                                            function(a) {
                                                                var b = {
                                                                        $scope: a === K || a.$$isolateScope ? P: e,
                                                                        $element: Q,
                                                                        $attrs: y,
                                                                        $transclude: ra
                                                                    },
                                                                    c;
                                                                C = a.controller;
                                                                "@" == C && (C = y[a.name]);
                                                                c = s(C, b);
                                                                ca[a.name] = c;
                                                                Ia || Q.data("$" + a.name + "Controller", c);
                                                                a.controllerAs && (b.$scope[a.controllerAs] = c)
                                                            });
                                                        g = 0;
                                                        for (B = k.length; g < B; g++) try {
                                                            M = k[g],
                                                                M(M.isolateScope ? P: e, Q, y, M.require && t(M.directiveName, M.require, Q, ca), ra)
                                                        } catch(H) {
                                                            l(H, ia(Q))
                                                        }
                                                        g = e;
                                                        K && (K.template || null === K.templateUrl) && (g = P);
                                                        a && a(g, f.childNodes, u, n);
                                                        for (g = q.length - 1; 0 <= g; g--) try {
                                                            M = q[g],
                                                                M(M.isolateScope ? P: e, Q, y, M.require && t(M.directiveName, M.require, Q, ca), ra)
                                                        } catch(D) {
                                                            l(D, ia(Q))
                                                        }
                                                    }
                                                    n = n || {};
                                                    for (var y = -Number.MAX_VALUE,
                                                             M, O = n.controllerDirectives,
                                                             K = n.newIsolateScopeDirective,
                                                             I = n.templateDirective,
                                                             ea = n.nonTlbTranscludeDirective,
                                                             F = !1,
                                                             E = !1,
                                                             Ia = n.hasElementTranscludeDirective,
                                                             x = d.$$element = A(c), H, z, V, S = e, R, Ha = 0, sa = a.length; Ha < sa; Ha++) {
                                                        H = a[Ha];
                                                        var U = H.$$start,
                                                            Y = H.$$end;
                                                        U && (x = P(c, U, Y));
                                                        V = u;
                                                        if (y > H.priority) break;
                                                        if (V = H.scope) M = M || H,
                                                        H.templateUrl || (fb("new/isolated scope", K, H, x), T(V) && (K = H));
                                                        z = H.name; ! H.templateUrl && H.controller && (V = H.controller, O = O || {},
                                                            fb("'" + z + "' controller", O[z], H, x), O[z] = H);
                                                        if (V = H.transclude) F = !0,
                                                        H.$$tlb || (fb("transclusion", ea, H, x), ea = H),
                                                            "element" == V ? (Ia = !0, y = H.priority, V = x, x = d.$$element = A(X.createComment(" " + z + ": " + d[z] + " ")), c = x[0], ra(f, wa.call(V, 0), c), S = B(V, e, y, g && g.name, {
                                                                nonTlbTranscludeDirective: ea
                                                            })) : (V = A(Kb(c)).contents(), x.empty(), S = B(V, e));
                                                        if (H.template) if (E = !0, fb("template", I, H, x), I = H, V = N(H.template) ? H.template(x, d) : H.template, V = W(V), H.replace) {
                                                            g = H;
                                                            V = Ib.test(V) ? A($(V)) : [];
                                                            c = V[0];
                                                            if (1 != V.length || 1 !== c.nodeType) throw ja("tplrt", z, "");
                                                            ra(f, x, c);
                                                            sa = {
                                                                $attr: {}
                                                            };
                                                            V = ca(c, [], sa);
                                                            var Z = a.splice(Ha + 1, a.length - (Ha + 1));
                                                            K && D(V);
                                                            a = a.concat(V).concat(Z);
                                                            v(d, sa);
                                                            sa = a.length
                                                        } else x.html(V);
                                                        if (H.templateUrl) E = !0,
                                                            fb("template", I, H, x),
                                                            I = H,
                                                        H.replace && (g = H),
                                                            J = te(a.splice(Ha, a.length - Ha), x, d, f, F && S, k, q, {
                                                                controllerDirectives: O,
                                                                newIsolateScopeDirective: K,
                                                                templateDirective: I,
                                                                nonTlbTranscludeDirective: ea
                                                            }),
                                                            sa = a.length;
                                                        else if (H.compile) try {
                                                            R = H.compile(x, d, S),
                                                                N(R) ? w(null, R, U, Y) : R && w(R.pre, R.post, U, Y)
                                                        } catch(ve) {
                                                            l(ve, ia(x))
                                                        }
                                                        H.terminal && (J.terminal = !0, y = Math.max(y, H.priority))
                                                    }
                                                    J.scope = M && !0 === M.scope;
                                                    J.transcludeOnThisElement = F;
                                                    J.templateOnThisElement = E;
                                                    J.transclude = S;
                                                    n.hasElementTranscludeDirective = Ia;
                                                    return J
                                                }
                                                function D(a) {
                                                    for (var b = 0,
                                                             c = a.length; b < c; b++) a[b] = $b(a[b], {
                                                        $$isolateScope: !0
                                                    })
                                                }
                                                function ea(b, e, f, g, p, m, n) {
                                                    if (e === p) return null;
                                                    p = null;
                                                    if (c.hasOwnProperty(e)) {
                                                        var q;
                                                        e = a.get(e + d);
                                                        for (var w = 0,
                                                                 s = e.length; w < s; w++) try {
                                                            q = e[w],
                                                            (g === u || g > q.priority) && -1 != q.restrict.indexOf(f) && (m && (q = $b(q, {
                                                                $$start: m,
                                                                $$end: n
                                                            })), b.push(q), p = q)
                                                        } catch(y) {
                                                            l(y)
                                                        }
                                                    }
                                                    return p
                                                }
                                                function v(a, b) {
                                                    var c = b.$attr,
                                                        d = a.$attr,
                                                        e = a.$$element;
                                                    r(a,
                                                        function(d, e) {
                                                            "$" != e.charAt(0) && (b[e] && b[e] !== d && (d += ("style" === e ? ";": " ") + b[e]), a.$set(e, d, !0, c[e]))
                                                        });
                                                    r(b,
                                                        function(b, f) {
                                                            "class" == f ? (ba(e, b), a["class"] = (a["class"] ? a["class"] + " ": "") + b) : "style" == f ? (e.attr("style", e.attr("style") + ";" + b), a.style = (a.style ? a.style + ";": "") + b) : "$" == f.charAt(0) || a.hasOwnProperty(f) || (a[f] = b, d[f] = c[f])
                                                        })
                                                }
                                                function te(a, b, c, d, e, f, g, k) {
                                                    var p = [],
                                                        l,
                                                        m,
                                                        w = b[0],
                                                        s = a.shift(),
                                                        y = E({},
                                                            s, {
                                                                templateUrl: null,
                                                                transclude: null,
                                                                replace: null,
                                                                $$originalDirective: s
                                                            }),
                                                        J = N(s.templateUrl) ? s.templateUrl(b, c) : s.templateUrl;
                                                    b.empty();
                                                    n.get(t.getTrustedResourceUrl(J), {
                                                        cache: q
                                                    }).success(function(q) {
                                                        var n, t;
                                                        q = W(q);
                                                        if (s.replace) {
                                                            q = Ib.test(q) ? A($(q)) : [];
                                                            n = q[0];
                                                            if (1 != q.length || 1 !== n.nodeType) throw ja("tplrt", s.name, J);
                                                            q = {
                                                                $attr: {}
                                                            };
                                                            ra(d, b, n);
                                                            var B = ca(n, [], q);
                                                            T(s.scope) && D(B);
                                                            a = B.concat(a);
                                                            v(c, q)
                                                        } else n = w,
                                                            b.html(q);
                                                        a.unshift(y);
                                                        l = I(a, n, c, e, b, s, f, g, k);
                                                        r(d,
                                                            function(a, c) {
                                                                a == n && (d[c] = b[0])
                                                            });
                                                        for (m = O(b[0].childNodes, e); p.length;) {
                                                            q = p.shift();
                                                            t = p.shift();
                                                            var K = p.shift(),
                                                                C = p.shift(),
                                                                B = b[0];
                                                            if (t !== w) {
                                                                var P = t.className;
                                                                k.hasElementTranscludeDirective && s.replace || (B = Kb(n));
                                                                ra(K, A(t), B);
                                                                ba(A(B), P)
                                                            }
                                                            t = l.transcludeOnThisElement ? M(q, l.transclude, C) : C;
                                                            l(m, q, B, d, t)
                                                        }
                                                        p = null
                                                    }).error(function(a, b, c, d) {
                                                        throw ja("tpload", d.url);
                                                    });
                                                    return function(a, b, c, d, e) {
                                                        a = e;
                                                        p ? (p.push(b), p.push(c), p.push(d), p.push(a)) : (l.transcludeOnThisElement && (a = M(b, l.transclude, e)), l(m, b, c, d, a))
                                                    }
                                                }
                                                function F(a, b) {
                                                    var c = b.priority - a.priority;
                                                    return 0 !== c ? c: a.name !== b.name ? a.name < b.name ? -1 : 1 : a.index - b.index
                                                }
                                                function fb(a, b, c, d) {
                                                    if (b) throw ja("multidir", b.name, c.name, a, ia(d));
                                                }
                                                function x(a, c) {
                                                    var d = b(c, !0);
                                                    d && a.push({
                                                        priority: 0,
                                                        compile: function(a) {
                                                            var b = a.parent().length;
                                                            b && ba(a.parent(), "ng-binding");
                                                            return function(a, c) {
                                                                var e = c.parent(),
                                                                    f = e.data("$binding") || [];
                                                                f.push(d);
                                                                e.data("$binding", f);
                                                                b || ba(e, "ng-binding");
                                                                a.$watch(d,
                                                                    function(a) {
                                                                        c[0].nodeValue = a
                                                                    })
                                                            }
                                                        }
                                                    })
                                                }
                                                function z(a, b) {
                                                    if ("srcdoc" == b) return t.HTML;
                                                    var c = Pa(a);
                                                    if ("xlinkHref" == b || "FORM" == c && "action" == b || "IMG" != c && ("src" == b || "ngSrc" == b)) return t.RESOURCE_URL
                                                }
                                                function S(a, c, d, e) {
                                                    var f = b(d, !0);
                                                    if (f) {
                                                        if ("multiple" === e && "SELECT" === Pa(a)) throw ja("selmulti", ia(a));
                                                        c.push({
                                                            priority: 100,
                                                            compile: function() {
                                                                return {
                                                                    pre: function(c, d, k) {
                                                                        d = k.$$observers || (k.$$observers = {});
                                                                        if (g.test(e)) throw ja("nodomevents");
                                                                        if (f = b(k[e], !0, z(a, e))) k[e] = f(c),
                                                                            (d[e] || (d[e] = [])).$$inter = !0,
                                                                            (k.$$observers && k.$$observers[e].$$scope || c).$watch(f,
                                                                                function(a, b) {
                                                                                    "class" === e && a != b ? k.$updateClass(a, b) : k.$set(e, a)
                                                                                })
                                                                    }
                                                                }
                                                            }
                                                        })
                                                    }
                                                }
                                                function ra(a, b, c) {
                                                    var d = b[0],
                                                        e = b.length,
                                                        f = d.parentNode,
                                                        g,
                                                        k;
                                                    if (a) for (g = 0, k = a.length; g < k; g++) if (a[g] == d) {
                                                        a[g++] = c;
                                                        k = g + e - 1;
                                                        for (var p = a.length; g < p; g++, k++) k < p ? a[g] = a[k] : delete a[g];
                                                        a.length -= e - 1;
                                                        break
                                                    }
                                                    f && f.replaceChild(c, d);
                                                    a = X.createDocumentFragment();
                                                    a.appendChild(d);
                                                    c[A.expando] = d[A.expando];
                                                    d = 1;
                                                    for (e = b.length; d < e; d++) f = b[d],
                                                        A(f).remove(),
                                                        a.appendChild(f),
                                                        delete b[d];
                                                    b[0] = c;
                                                    b.length = 1
                                                }
                                                function rc(a, b) {
                                                    return E(function() {
                                                            return a.apply(null, arguments)
                                                        },
                                                        a, b)
                                                }
                                                var Ob = function(a, b) {
                                                    this.$$element = a;
                                                    this.$attr = b || {}
                                                };
                                                Ob.prototype = {
                                                    $normalize: qa,
                                                    $addClass: function(a) {
                                                        a && 0 < a.length && y.addClass(this.$$element, a)
                                                    },
                                                    $removeClass: function(a) {
                                                        a && 0 < a.length && y.removeClass(this.$$element, a)
                                                    },
                                                    $updateClass: function(a, b) {
                                                        var c = sc(a, b),
                                                            d = sc(b, a);
                                                        0 === c.length ? y.removeClass(this.$$element, d) : 0 === d.length ? y.addClass(this.$$element, c) : y.setClass(this.$$element, c, d)
                                                    },
                                                    $set: function(a, b, c, d) {
                                                        var e = oc(this.$$element[0], a);
                                                        e && (this.$$element.prop(a, b), d = e);
                                                        this[a] = b;
                                                        d ? this.$attr[a] = d: (d = this.$attr[a]) || (this.$attr[a] = d = nb(a, "-"));
                                                        e = Pa(this.$$element);
                                                        if ("A" === e && "href" === a || "IMG" === e && "src" === a) this[a] = b = K(b, "src" === a); ! 1 !== c && (null === b || b === u ? this.$$element.removeAttr(d) : this.$$element.attr(d, b)); (c = this.$$observers) && r(c[a],
                                                            function(a) {
                                                                try {
                                                                    a(b)
                                                                } catch(c) {
                                                                    l(c)
                                                                }
                                                            })
                                                    },
                                                    $observe: function(a, b) {
                                                        var c = this,
                                                            d = c.$$observers || (c.$$observers = {}),
                                                            e = d[a] || (d[a] = []);
                                                        e.push(b);
                                                        J.$evalAsync(function() {
                                                            e.$$inter || b(c[a])
                                                        });
                                                        return b
                                                    }
                                                };
                                                var sa = b.startSymbol(),
                                                    Ia = b.endSymbol(),
                                                    W = "{{" == sa || "}}" == Ia ? ga: function(a) {
                                                        return a.replace(/\{\{/g, sa).replace(/}}/g, Ia)
                                                    },
                                                    U = /^ngAttr[A-Z]/;
                                                return B
                                            }]
                                    }
                                    function qa(b) {
                                        return ab(b.replace(we, ""))
                                    }
                                    function sc(b, a) {
                                        var c = "",
                                            d = b.split(/\s+/),
                                            e = a.split(/\s+/),
                                            f = 0;
                                        a: for (; f < d.length; f++) {
                                            for (var g = d[f], h = 0; h < e.length; h++) if (g == e[h]) continue a;
                                            c += (0 < c.length ? " ": "") + g
                                        }
                                        return c
                                    }
                                    function Od() {
                                        var b = {},
                                            a = /^(\S+)(\s+as\s+(\w+))?$/;
                                        this.register = function(a, d) {
                                            Ea(a, "controller");
                                            T(a) ? E(b, a) : b[a] = d
                                        };
                                        this.$get = ["$injector", "$window",
                                            function(c, d) {
                                                return function(e, f) {
                                                    var g, h, k;
                                                    G(e) && (g = e.match(a), h = g[1], k = g[3], e = b.hasOwnProperty(h) ? b[h] : fc(f.$scope, h, !0) || fc(d, h, !0), Ya(e, h, !0));
                                                    g = c.instantiate(e, f);
                                                    if (k) {
                                                        if (!f || "object" !== typeof f.$scope) throw z("$controller")("noscp", h || e.name, k);
                                                        f.$scope[k] = g
                                                    }
                                                    return g
                                                }
                                            }]
                                    }
                                    function Pd() {
                                        this.$get = ["$window",
                                            function(b) {
                                                return A(b.document)
                                            }]
                                    }
                                    function Qd() {
                                        this.$get = ["$log",
                                            function(b) {
                                                return function(a, c) {
                                                    b.error.apply(b, arguments)
                                                }
                                            }]
                                    }
                                    function tc(b) {
                                        var a = {},
                                            c, d, e;
                                        if (!b) return a;
                                        r(b.split("\n"),
                                            function(b) {
                                                e = b.indexOf(":");
                                                c = x($(b.substr(0, e)));
                                                d = $(b.substr(e + 1));
                                                c && (a[c] = a[c] ? a[c] + ", " + d: d)
                                            });
                                        return a
                                    }
                                    function uc(b) {
                                        var a = T(b) ? b: u;
                                        return function(c) {
                                            a || (a = tc(b));
                                            return c ? a[x(c)] || null: a
                                        }
                                    }
                                    function vc(b, a, c) {
                                        if (N(c)) return c(b, a);
                                        r(c,
                                            function(c) {
                                                b = c(b, a)
                                            });
                                        return b
                                    }
                                    function Td() {
                                        var b = /^\s*(\[|\{[^\{])/,
                                            a = /[\}\]]\s*$/,
                                            c = /^\)\]\}',?\n/,
                                            d = {
                                                "Content-Type": "application/json;charset=utf-8"
                                            },
                                            e = this.defaults = {
                                                transformResponse: [function(d) {
                                                    G(d) && (d = d.replace(c, ""), b.test(d) && a.test(d) && (d = ac(d)));
                                                    return d
                                                }],
                                                transformRequest: [function(a) {
                                                    return T(a) && "[object File]" !== Ba.call(a) && "[object Blob]" !== Ba.call(a) ? oa(a) : a
                                                }],
                                                headers: {
                                                    common: {
                                                        Accept: "application/json, text/plain, */*"
                                                    },
                                                    post: ha(d),
                                                    put: ha(d),
                                                    patch: ha(d)
                                                },
                                                xsrfCookieName: "XSRF-TOKEN",
                                                xsrfHeaderName: "X-XSRF-TOKEN"
                                            },
                                            f = this.interceptors = [],
                                            g = this.responseInterceptors = [];
                                        this.$get = ["$httpBackend", "$browser", "$cacheFactory", "$rootScope", "$q", "$injector",
                                            function(a, b, c, d, n, q) {
                                                function p(a) {
                                                    function b(a) {
                                                        var d = E({},
                                                            a, {
                                                                data: vc(a.data, a.headers, c.transformResponse)
                                                            });
                                                        return 200 <= a.status && 300 > a.status ? d: n.reject(d)
                                                    }
                                                    var c = {
                                                            method: "get",
                                                            transformRequest: e.transformRequest,
                                                            transformResponse: e.transformResponse
                                                        },
                                                        d = function(a) {
                                                            var b = e.headers,
                                                                c = E({},
                                                                    a.headers),
                                                                d,
                                                                f,
                                                                b = E({},
                                                                    b.common, b[x(a.method)]);
                                                            a: for (d in b) {
                                                                a = x(d);
                                                                for (f in c) if (x(f) === a) continue a;
                                                                c[d] = b[d]
                                                            } (function(a) {
                                                                var b;
                                                                r(a,
                                                                    function(c, d) {
                                                                        N(c) && (b = c(), null != b ? a[d] = b: delete a[d])
                                                                    })
                                                            })(c);
                                                            return c
                                                        } (a);
                                                    E(c, a);
                                                    c.headers = d;
                                                    c.method = La(c.method);
                                                    var f = [function(a) {
                                                            d = a.headers;
                                                            var c = vc(a.data, uc(d), a.transformRequest);
                                                            F(c) && r(d,
                                                                function(a, b) {
                                                                    "content-type" === x(b) && delete d[b]
                                                                });
                                                            F(a.withCredentials) && !F(e.withCredentials) && (a.withCredentials = e.withCredentials);
                                                            return s(a, c, d).then(b, b)
                                                        },
                                                            u],
                                                        g = n.when(c);
                                                    for (r(t,
                                                        function(a) { (a.request || a.requestError) && f.unshift(a.request, a.requestError); (a.response || a.responseError) && f.push(a.response, a.responseError)
                                                        }); f.length;) {
                                                        a = f.shift();
                                                        var h = f.shift(),
                                                            g = g.then(a, h)
                                                    }
                                                    g.success = function(a) {
                                                        g.then(function(b) {
                                                            a(b.data, b.status, b.headers, c)
                                                        });
                                                        return g
                                                    };
                                                    g.error = function(a) {
                                                        g.then(null,
                                                            function(b) {
                                                                a(b.data, b.status, b.headers, c)
                                                            });
                                                        return g
                                                    };
                                                    return g
                                                }
                                                function s(c, f, g) {
                                                    function m(a, b, c, e) {
                                                        C && (200 <= a && 300 > a ? C.put(A, [a, b, tc(c), e]) : C.remove(A));
                                                        q(b, a, c, e);
                                                        d.$$phase || d.$apply()
                                                    }
                                                    function q(a, b, d, e) {
                                                        b = Math.max(b, 0); (200 <= b && 300 > b ? t.resolve: t.reject)({
                                                            data: a,
                                                            status: b,
                                                            headers: uc(d),
                                                            config: c,
                                                            statusText: e
                                                        })
                                                    }
                                                    function s() {
                                                        var a = Ta(p.pendingRequests, c); - 1 !== a && p.pendingRequests.splice(a, 1)
                                                    }
                                                    var t = n.defer(),
                                                        r = t.promise,
                                                        C,
                                                        I,
                                                        A = J(c.url, c.params);
                                                    p.pendingRequests.push(c);
                                                    r.then(s, s); ! c.cache && !e.cache || (!1 === c.cache || "GET" !== c.method && "JSONP" !== c.method) || (C = T(c.cache) ? c.cache: T(e.cache) ? e.cache: w);
                                                    if (C) if (I = C.get(A), D(I)) {
                                                        if (I && N(I.then)) return I.then(s, s),
                                                            I;
                                                        L(I) ? q(I[1], I[0], ha(I[2]), I[3]) : q(I, 200, {},
                                                            "OK")
                                                    } else C.put(A, r);
                                                    F(I) && ((I = Pb(c.url) ? b.cookies()[c.xsrfCookieName || e.xsrfCookieName] : u) && (g[c.xsrfHeaderName || e.xsrfHeaderName] = I), a(c.method, A, f, m, g, c.timeout, c.withCredentials, c.responseType));
                                                    return r
                                                }
                                                function J(a, b) {
                                                    if (!b) return a;
                                                    var c = [];
                                                    Sc(b,
                                                        function(a, b) {
                                                            null === a || F(a) || (L(a) || (a = [a]), r(a,
                                                                function(a) {
                                                                    T(a) && (a = va(a) ? a.toISOString() : oa(a));
                                                                    c.push(Da(b) + "=" + Da(a))
                                                                }))
                                                        });
                                                    0 < c.length && (a += ( - 1 == a.indexOf("?") ? "?": "&") + c.join("&"));
                                                    return a
                                                }
                                                var w = c("$http"),
                                                    t = [];
                                                r(f,
                                                    function(a) {
                                                        t.unshift(G(a) ? q.get(a) : q.invoke(a))
                                                    });
                                                r(g,
                                                    function(a, b) {
                                                        var c = G(a) ? q.get(a) : q.invoke(a);
                                                        t.splice(b, 0, {
                                                            response: function(a) {
                                                                return c(n.when(a))
                                                            },
                                                            responseError: function(a) {
                                                                return c(n.reject(a))
                                                            }
                                                        })
                                                    });
                                                p.pendingRequests = []; (function(a) {
                                                    r(arguments,
                                                        function(a) {
                                                            p[a] = function(b, c) {
                                                                return p(E(c || {},
                                                                    {
                                                                        method: a,
                                                                        url: b
                                                                    }))
                                                            }
                                                        })
                                                })("get", "delete", "head", "jsonp"); (function(a) {
                                                    r(arguments,
                                                        function(a) {
                                                            p[a] = function(b, c, d) {
                                                                return p(E(d || {},
                                                                    {
                                                                        method: a,
                                                                        url: b,
                                                                        data: c
                                                                    }))
                                                            }
                                                        })
                                                })("post", "put", "patch");
                                                p.defaults = e;
                                                return p
                                            }]
                                    }
                                    function xe(b) {
                                        if (8 >= R && (!b.match(/^(get|post|head|put|delete|options)$/i) || !W.XMLHttpRequest)) return new W.ActiveXObject("Microsoft.XMLHTTP");
                                        if (W.XMLHttpRequest) return new W.XMLHttpRequest;
                                        throw z("$httpBackend")("noxhr");
                                    }
                                    function Ud() {
                                        this.$get = ["$browser", "$window", "$document",
                                            function(b, a, c) {
                                                return ye(b, xe, b.defer, a.angular.callbacks, c[0])
                                            }]
                                    }
                                    function ye(b, a, c, d, e) {
                                        function f(a, b, c) {
                                            var f = e.createElement("script"),
                                                g = null;
                                            f.type = "text/javascript";
                                            f.src = a;
                                            f.async = !0;
                                            g = function(a) {
                                                bb(f, "load", g);
                                                bb(f, "error", g);
                                                e.body.removeChild(f);
                                                f = null;
                                                var h = -1,
                                                    s = "unknown";
                                                a && ("load" !== a.type || d[b].called || (a = {
                                                    type: "error"
                                                }), s = a.type, h = "error" === a.type ? 404 : 200);
                                                c && c(h, s)
                                            };
                                            sb(f, "load", g);
                                            sb(f, "error", g);
                                            8 >= R && (f.onreadystatechange = function() {
                                                G(f.readyState) && /loaded|complete/.test(f.readyState) && (f.onreadystatechange = null, g({
                                                    type: "load"
                                                }))
                                            });
                                            e.body.appendChild(f);
                                            return g
                                        }
                                        var g = -1;
                                        return function(e, k, m, l, n, q, p, s) {
                                            function J() {
                                                t = g;
                                                K && K();
                                                B && B.abort()
                                            }
                                            function w(a, d, e, f, g) {
                                                O && c.cancel(O);
                                                K = B = null;
                                                0 === d && (d = e ? 200 : "file" == xa(k).protocol ? 404 : 0);
                                                a(1223 === d ? 204 : d, e, f, g || "");
                                                b.$$completeOutstandingRequest(v)
                                            }
                                            var t;
                                            b.$$incOutstandingRequestCount();
                                            k = k || b.url();
                                            if ("jsonp" == x(e)) {
                                                var y = "_" + (d.counter++).toString(36);
                                                d[y] = function(a) {
                                                    d[y].data = a;
                                                    d[y].called = !0
                                                };
                                                var K = f(k.replace("JSON_CALLBACK", "angular.callbacks." + y), y,
                                                    function(a, b) {
                                                        w(l, a, d[y].data, "", b);
                                                        d[y] = v
                                                    })
                                            } else {
                                                var B = a(e);
                                                B.open(e, k, !0);
                                                r(n,
                                                    function(a, b) {
                                                        D(a) && B.setRequestHeader(b, a)
                                                    });
                                                B.onreadystatechange = function() {
                                                    if (B && 4 == B.readyState) {
                                                        var a = null,
                                                            b = null,
                                                            c = "";
                                                        t !== g && (a = B.getAllResponseHeaders(), b = "response" in B ? B.response: B.responseText);
                                                        t === g && 10 > R || (c = B.statusText);
                                                        w(l, t || B.status, b, a, c)
                                                    }
                                                };
                                                p && (B.withCredentials = !0);
                                                if (s) try {
                                                    B.responseType = s
                                                } catch(ba) {
                                                    if ("json" !== s) throw ba;
                                                }
                                                B.send(m || null)
                                            }
                                            if (0 < q) var O = c(J, q);
                                            else q && N(q.then) && q.then(J)
                                        }
                                    }
                                    function Rd() {
                                        var b = "{{",
                                            a = "}}";
                                        this.startSymbol = function(a) {
                                            return a ? (b = a, this) : b
                                        };
                                        this.endSymbol = function(b) {
                                            return b ? (a = b, this) : a
                                        };
                                        this.$get = ["$parse", "$exceptionHandler", "$sce",
                                            function(c, d, e) {
                                                function f(f, m, l) {
                                                    for (var n, q, p = 0,
                                                             s = [], J = f.length, w = !1, t = []; p < J;) - 1 != (n = f.indexOf(b, p)) && -1 != (q = f.indexOf(a, n + g)) ? (p != n && s.push(f.substring(p, n)), s.push(p = c(w = f.substring(n + g, q))), p.exp = w, p = q + h, w = !0) : (p != J && s.push(f.substring(p)), p = J); (J = s.length) || (s.push(""), J = 1);
                                                    if (l && 1 < s.length) throw wc("noconcat", f);
                                                    if (!m || w) return t.length = J,
                                                        p = function(a) {
                                                            try {
                                                                for (var b = 0,
                                                                         c = J,
                                                                         g; b < c; b++) {
                                                                    if ("function" == typeof(g = s[b])) if (g = g(a), g = l ? e.getTrusted(l, g) : e.valueOf(g), null == g) g = "";
                                                                    else switch (typeof g) {
                                                                            case "string":
                                                                                break;
                                                                            case "number":
                                                                                g = "" + g;
                                                                                break;
                                                                            default:
                                                                                g = oa(g)
                                                                        }
                                                                    t[b] = g
                                                                }
                                                                return t.join("")
                                                            } catch(h) {
                                                                a = wc("interr", f, h.toString()),
                                                                    d(a)
                                                            }
                                                        },
                                                        p.exp = f,
                                                        p.parts = s,
                                                        p
                                                }
                                                var g = b.length,
                                                    h = a.length;
                                                f.startSymbol = function() {
                                                    return b
                                                };
                                                f.endSymbol = function() {
                                                    return a
                                                };
                                                return f
                                            }]
                                    }
                                    function Sd() {
                                        this.$get = ["$rootScope", "$window", "$q",
                                            function(b, a, c) {
                                                function d(d, g, h, k) {
                                                    var m = a.setInterval,
                                                        l = a.clearInterval,
                                                        n = c.defer(),
                                                        q = n.promise,
                                                        p = 0,
                                                        s = D(k) && !k;
                                                    h = D(h) ? h: 0;
                                                    q.then(null, null, d);
                                                    q.$$intervalId = m(function() {
                                                            n.notify(p++);
                                                            0 < h && p >= h && (n.resolve(p), l(q.$$intervalId), delete e[q.$$intervalId]);
                                                            s || b.$apply()
                                                        },
                                                        g);
                                                    e[q.$$intervalId] = n;
                                                    return q
                                                }
                                                var e = {};
                                                d.cancel = function(b) {
                                                    return b && b.$$intervalId in e ? (e[b.$$intervalId].reject("canceled"), a.clearInterval(b.$$intervalId), delete e[b.$$intervalId], !0) : !1
                                                };
                                                return d
                                            }]
                                    }
                                    function ad() {
                                        this.$get = function() {
                                            return {
                                                id: "en-us",
                                                NUMBER_FORMATS: {
                                                    DECIMAL_SEP: ".",
                                                    GROUP_SEP: ",",
                                                    PATTERNS: [{
                                                        minInt: 1,
                                                        minFrac: 0,
                                                        maxFrac: 3,
                                                        posPre: "",
                                                        posSuf: "",
                                                        negPre: "-",
                                                        negSuf: "",
                                                        gSize: 3,
                                                        lgSize: 3
                                                    },
                                                        {
                                                            minInt: 1,
                                                            minFrac: 2,
                                                            maxFrac: 2,
                                                            posPre: "\u00a4",
                                                            posSuf: "",
                                                            negPre: "(\u00a4",
                                                            negSuf: ")",
                                                            gSize: 3,
                                                            lgSize: 3
                                                        }],
                                                    CURRENCY_SYM: "$"
                                                },
                                                DATETIME_FORMATS: {
                                                    MONTH: "January February March April May June July August September October November December".split(" "),
                                                    SHORTMONTH: "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
                                                    DAY: "Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
                                                    SHORTDAY: "Sun Mon Tue Wed Thu Fri Sat".split(" "),
                                                    AMPMS: ["AM", "PM"],
                                                    medium: "MMM d, y h:mm:ss a",
                                                    "short": "M/d/yy h:mm a",
                                                    fullDate: "EEEE, MMMM d, y",
                                                    longDate: "MMMM d, y",
                                                    mediumDate: "MMM d, y",
                                                    shortDate: "M/d/yy",
                                                    mediumTime: "h:mm:ss a",
                                                    shortTime: "h:mm a"
                                                },
                                                pluralCat: function(b) {
                                                    return 1 === b ? "one": "other"
                                                }
                                            }
                                        }
                                    }
                                    function Qb(b) {
                                        b = b.split("/");
                                        for (var a = b.length; a--;) b[a] = mb(b[a]);
                                        return b.join("/")
                                    }
                                    function xc(b, a, c) {
                                        b = xa(b, c);
                                        a.$$protocol = b.protocol;
                                        a.$$host = b.hostname;
                                        a.$$port = U(b.port) || ze[b.protocol] || null
                                    }
                                    function yc(b, a, c) {
                                        var d = "/" !== b.charAt(0);
                                        d && (b = "/" + b);
                                        b = xa(b, c);
                                        a.$$path = decodeURIComponent(d && "/" === b.pathname.charAt(0) ? b.pathname.substring(1) : b.pathname);
                                        a.$$search = cc(b.search);
                                        a.$$hash = decodeURIComponent(b.hash);
                                        a.$$path && "/" != a.$$path.charAt(0) && (a.$$path = "/" + a.$$path)
                                    }
                                    function ta(b, a) {
                                        if (0 === a.indexOf(b)) return a.substr(b.length)
                                    }
                                    function Ga(b) {
                                        var a = b.indexOf("#");
                                        return - 1 == a ? b: b.substr(0, a)
                                    }
                                    function Rb(b) {
                                        return b.substr(0, Ga(b).lastIndexOf("/") + 1)
                                    }
                                    function zc(b, a) {
                                        this.$$html5 = !0;
                                        a = a || "";
                                        var c = Rb(b);
                                        xc(b, this, b);
                                        this.$$parse = function(a) {
                                            var e = ta(c, a);
                                            if (!G(e)) throw Sb("ipthprfx", a, c);
                                            yc(e, this, b);
                                            this.$$path || (this.$$path = "/");
                                            this.$$compose()
                                        };
                                        this.$$compose = function() {
                                            var a = Cb(this.$$search),
                                                b = this.$$hash ? "#" + mb(this.$$hash) : "";
                                            this.$$url = Qb(this.$$path) + (a ? "?" + a: "") + b;
                                            this.$$absUrl = c + this.$$url.substr(1)
                                        };
                                        this.$$parseLinkUrl = function(d, e) {
                                            var f, g; (f = ta(b, d)) !== u ? (g = f, g = (f = ta(a, f)) !== u ? c + (ta("/", f) || f) : b + g) : (f = ta(c, d)) !== u ? g = c + f: c == d + "/" && (g = c);
                                            g && this.$$parse(g);
                                            return !! g
                                        }
                                    }
                                    function Tb(b, a) {
                                        var c = Rb(b);
                                        xc(b, this, b);
                                        this.$$parse = function(d) {
                                            var e = ta(b, d) || ta(c, d),
                                                e = "#" == e.charAt(0) ? ta(a, e) : this.$$html5 ? e: "";
                                            if (!G(e)) throw Sb("ihshprfx", d, a);
                                            yc(e, this, b);
                                            d = this.$$path;
                                            var f = /^\/[A-Z]:(\/.*)/;
                                            0 === e.indexOf(b) && (e = e.replace(b, ""));
                                            f.exec(e) || (d = (e = f.exec(d)) ? e[1] : d);
                                            this.$$path = d;
                                            this.$$compose()
                                        };
                                        this.$$compose = function() {
                                            var c = Cb(this.$$search),
                                                e = this.$$hash ? "#" + mb(this.$$hash) : "";
                                            this.$$url = Qb(this.$$path) + (c ? "?" + c: "") + e;
                                            this.$$absUrl = b + (this.$$url ? a + this.$$url: "")
                                        };
                                        this.$$parseLinkUrl = function(a, c) {
                                            return Ga(b) == Ga(a) ? (this.$$parse(a), !0) : !1
                                        }
                                    }
                                    function Ac(b, a) {
                                        this.$$html5 = !0;
                                        Tb.apply(this, arguments);
                                        var c = Rb(b);
                                        this.$$parseLinkUrl = function(d, e) {
                                            var f, g;
                                            b == Ga(d) ? f = d: (g = ta(c, d)) ? f = b + a + g: c === d + "/" && (f = c);
                                            f && this.$$parse(f);
                                            return !! f
                                        };
                                        this.$$compose = function() {
                                            var c = Cb(this.$$search),
                                                e = this.$$hash ? "#" + mb(this.$$hash) : "";
                                            this.$$url = Qb(this.$$path) + (c ? "?" + c: "") + e;
                                            this.$$absUrl = b + a + this.$$url
                                        }
                                    }
                                    function tb(b) {
                                        return function() {
                                            return this[b]
                                        }
                                    }
                                    function Bc(b, a) {
                                        return function(c) {
                                            if (F(c)) return this[b];
                                            this[b] = a(c);
                                            this.$$compose();
                                            return this
                                        }
                                    }
                                    function Vd() {
                                        var b = "",
                                            a = !1;
                                        this.hashPrefix = function(a) {
                                            return D(a) ? (b = a, this) : b
                                        };
                                        this.html5Mode = function(b) {
                                            return D(b) ? (a = b, this) : a
                                        };
                                        this.$get = ["$rootScope", "$browser", "$sniffer", "$rootElement",
                                            function(c, d, e, f) {
                                                function g(a) {
                                                    c.$broadcast("$locationChangeSuccess", h.absUrl(), a)
                                                }
                                                var h, k = d.baseHref(),
                                                    m = d.url();
                                                a ? (k = m.substring(0, m.indexOf("/", m.indexOf("//") + 2)) + (k || "/"), e = e.history ? zc: Ac) : (k = Ga(m), e = Tb);
                                                h = new e(k, "#" + b);
                                                h.$$parseLinkUrl(m, m);
                                                var l = /^\s*(javascript|mailto):/i;
                                                f.on("click",
                                                    function(a) {
                                                        if (!a.ctrlKey && !a.metaKey && 2 != a.which) {
                                                            for (var b = A(a.target);
                                                                 "a" !== x(b[0].nodeName);) if (b[0] === f[0] || !(b = b.parent())[0]) return;
                                                            var e = b.prop("href"),
                                                                g = b.attr("href") || b.attr("xlink:href");
                                                            T(e) && "[object SVGAnimatedString]" === e.toString() && (e = xa(e.animVal).href);
                                                            l.test(e) || (!e || (b.attr("target") || a.isDefaultPrevented()) || !h.$$parseLinkUrl(e, g)) || (a.preventDefault(), h.absUrl() != d.url() && (c.$apply(), W.angular["ff-684208-preventDefault"] = !0))
                                                        }
                                                    });
                                                h.absUrl() != m && d.url(h.absUrl(), !0);
                                                d.onUrlChange(function(a) {
                                                    h.absUrl() != a && (c.$evalAsync(function() {
                                                        var b = h.absUrl();
                                                        h.$$parse(a);
                                                        c.$broadcast("$locationChangeStart", a, b).defaultPrevented ? (h.$$parse(b), d.url(b)) : g(b)
                                                    }), c.$$phase || c.$digest())
                                                });
                                                var n = 0;
                                                c.$watch(function() {
                                                    var a = d.url(),
                                                        b = h.$$replace;
                                                    n && a == h.absUrl() || (n++, c.$evalAsync(function() {
                                                        c.$broadcast("$locationChangeStart", h.absUrl(), a).defaultPrevented ? h.$$parse(a) : (d.url(h.absUrl(), b), g(a))
                                                    }));
                                                    h.$$replace = !1;
                                                    return n
                                                });
                                                return h
                                            }]
                                    }
                                    function Wd() {
                                        var b = !0,
                                            a = this;
                                        this.debugEnabled = function(a) {
                                            return D(a) ? (b = a, this) : b
                                        };
                                        this.$get = ["$window",
                                            function(c) {
                                                function d(a) {
                                                    a instanceof Error && (a.stack ? a = a.message && -1 === a.stack.indexOf(a.message) ? "Error: " + a.message + "\n" + a.stack: a.stack: a.sourceURL && (a = a.message + "\n" + a.sourceURL + ":" + a.line));
                                                    return a
                                                }
                                                function e(a) {
                                                    var b = c.console || {},
                                                        e = b[a] || b.log || v;
                                                    a = !1;
                                                    try {
                                                        a = !!e.apply
                                                    } catch(k) {}
                                                    return a ?
                                                        function() {
                                                            var a = [];
                                                            r(arguments,
                                                                function(b) {
                                                                    a.push(d(b))
                                                                });
                                                            return e.apply(b, a)
                                                        }: function(a, b) {
                                                            e(a, null == b ? "": b)
                                                        }
                                                }
                                                return {
                                                    log: e("log"),
                                                    info: e("info"),
                                                    warn: e("warn"),
                                                    error: e("error"),
                                                    debug: function() {
                                                        var c = e("debug");
                                                        return function() {
                                                            b && c.apply(a, arguments)
                                                        }
                                                    } ()
                                                }
                                            }]
                                    }
                                    function ka(b, a) {
                                        if ("__defineGetter__" === b || "__defineSetter__" === b || "__lookupGetter__" === b || "__lookupSetter__" === b || "__proto__" === b) throw la("isecfld", a);
                                        return b
                                    }
                                    function ma(b, a) {
                                        if (b) {
                                            if (b.constructor === b) throw la("isecfn", a);
                                            if (b.document && b.location && b.alert && b.setInterval) throw la("isecwindow", a);
                                            if (b.children && (b.nodeName || b.prop && b.attr && b.find)) throw la("isecdom", a);
                                            if (b === Object) throw la("isecobj", a);
                                        }
                                        return b
                                    }
                                    function ub(b, a, c, d, e) {
                                        ma(b, d);
                                        e = e || {};
                                        a = a.split(".");
                                        for (var f, g = 0; 1 < a.length; g++) {
                                            f = ka(a.shift(), d);
                                            var h = ma(b[f], d);
                                            h || (h = {},
                                                b[f] = h);
                                            b = h;
                                            b.then && e.unwrapPromises && (ya(d), "$$v" in b ||
                                            function(a) {
                                                a.then(function(b) {
                                                    a.$$v = b
                                                })
                                            } (b), b.$$v === u && (b.$$v = {}), b = b.$$v)
                                        }
                                        f = ka(a.shift(), d);
                                        ma(b[f], d);
                                        return b[f] = c
                                    }
                                    function Qa(b) {
                                        return "constructor" == b
                                    }
                                    function Cc(b, a, c, d, e, f, g) {
                                        ka(b, f);
                                        ka(a, f);
                                        ka(c, f);
                                        ka(d, f);
                                        ka(e, f);
                                        var h = function(a) {
                                                return ma(a, f)
                                            },
                                            k = g.expensiveChecks,
                                            m = k || Qa(b) ? h: ga,
                                            l = k || Qa(a) ? h: ga,
                                            n = k || Qa(c) ? h: ga,
                                            q = k || Qa(d) ? h: ga,
                                            p = k || Qa(e) ? h: ga;
                                        return g.unwrapPromises ?
                                            function(g, h) {
                                                var k = h && h.hasOwnProperty(b) ? h: g,
                                                    t;
                                                if (null == k) return k; (k = m(k[b])) && k.then && (ya(f), "$$v" in k || (t = k, t.$$v = u, t.then(function(a) {
                                                    t.$$v = m(a)
                                                })), k = m(k.$$v));
                                                if (!a) return k;
                                                if (null == k) return u; (k = l(k[a])) && k.then && (ya(f), "$$v" in k || (t = k, t.$$v = u, t.then(function(a) {
                                                    t.$$v = l(a)
                                                })), k = l(k.$$v));
                                                if (!c) return k;
                                                if (null == k) return u; (k = n(k[c])) && k.then && (ya(f), "$$v" in k || (t = k, t.$$v = u, t.then(function(a) {
                                                    t.$$v = n(a)
                                                })), k = n(k.$$v));
                                                if (!d) return k;
                                                if (null == k) return u; (k = q(k[d])) && k.then && (ya(f), "$$v" in k || (t = k, t.$$v = u, t.then(function(a) {
                                                    t.$$v = q(a)
                                                })), k = q(k.$$v));
                                                if (!e) return k;
                                                if (null == k) return u; (k = p(k[e])) && k.then && (ya(f), "$$v" in k || (t = k, t.$$v = u, t.then(function(a) {
                                                    t.$$v = p(a)
                                                })), k = p(k.$$v));
                                                return k
                                            }: function(f, g) {
                                                var h = g && g.hasOwnProperty(b) ? g: f;
                                                if (null == h) return h;
                                                h = m(h[b]);
                                                if (!a) return h;
                                                if (null == h) return u;
                                                h = l(h[a]);
                                                if (!c) return h;
                                                if (null == h) return u;
                                                h = n(h[c]);
                                                if (!d) return h;
                                                if (null == h) return u;
                                                h = q(h[d]);
                                                return e ? null == h ? u: h = p(h[e]) : h
                                            }
                                    }
                                    function Ae(b, a) {
                                        return function(c, d) {
                                            return b(c, d, ya, ma, a)
                                        }
                                    }
                                    function Dc(b, a, c) {
                                        var d = a.expensiveChecks,
                                            e = d ? Be: Ce;
                                        if (e.hasOwnProperty(b)) return e[b];
                                        var f = b.split("."),
                                            g = f.length,
                                            h;
                                        if (a.csp) h = 6 > g ? Cc(f[0], f[1], f[2], f[3], f[4], c, a) : function(b, d) {
                                            var e = 0,
                                                h;
                                            do h = Cc(f[e++], f[e++], f[e++], f[e++], f[e++], c, a)(b, d),
                                                d = u,
                                                b = h;
                                            while (e < g);
                                            return h
                                        };
                                        else {
                                            var k = "var p;\n";
                                            d && (k += "s = eso(s, fe);\nl = eso(l, fe);\n");
                                            var m = d;
                                            r(f,
                                                function(b, e) {
                                                    ka(b, c);
                                                    var f = (e ? "s": '((l&&l.hasOwnProperty("' + b + '"))?l:s)') + '["' + b + '"]',
                                                        g = d || Qa(b);
                                                    g && (f = "eso(" + f + ", fe)", m = !0);
                                                    k += "if(s == null) return undefined;\ns=" + f + ";\n";
                                                    a.unwrapPromises && (k += 'if (s && s.then) {\n pw("' + c.replace(/(["\r\n])/g, "\\$1") + '");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=' + (g ? "eso(v)": "v") + ";});\n}\n s=" + (g ? "eso(s.$$v)": "s.$$v") + "\n}\n")
                                                });
                                            k += "return s;";
                                            h = new Function("s", "l", "pw", "eso", "fe", k);
                                            h.toString = aa(k);
                                            if (m || a.unwrapPromises) h = Ae(h, c)
                                        }
                                        "hasOwnProperty" !== b && (e[b] = h);
                                        return h
                                    }
                                    function Xd() {
                                        var b = {},
                                            a = {},
                                            c = {
                                                csp: !1,
                                                unwrapPromises: !1,
                                                logPromiseWarnings: !0,
                                                expensiveChecks: !1
                                            };
                                        this.unwrapPromises = function(a) {
                                            return D(a) ? (c.unwrapPromises = !!a, this) : c.unwrapPromises
                                        };
                                        this.logPromiseWarnings = function(a) {
                                            return D(a) ? (c.logPromiseWarnings = a, this) : c.logPromiseWarnings
                                        };
                                        this.$get = ["$filter", "$sniffer", "$log",
                                            function(d, e, f) {
                                                c.csp = e.csp;
                                                var g = {
                                                    csp: c.csp,
                                                    unwrapPromises: c.unwrapPromises,
                                                    logPromiseWarnings: c.logPromiseWarnings,
                                                    expensiveChecks: !0
                                                };
                                                ya = function(a) {
                                                    c.logPromiseWarnings && !Ec.hasOwnProperty(a) && (Ec[a] = !0, f.warn("[$parse] Promise found in the expression `" + a + "`. Automatic unwrapping of promises in Angular expressions is deprecated."))
                                                };
                                                return function(e, f) {
                                                    var m;
                                                    switch (typeof e) {
                                                        case "string":
                                                            var l = f ? a: b;
                                                            if (l.hasOwnProperty(e)) return l[e];
                                                            m = f ? g: c;
                                                            var n = new Ub(m);
                                                            m = (new gb(n, d, m)).parse(e);
                                                            "hasOwnProperty" !== e && (l[e] = m);
                                                            return m;
                                                        case "function":
                                                            return e;
                                                        default:
                                                            return v
                                                    }
                                                }
                                            }]
                                    }
                                    function Zd() {
                                        this.$get = ["$rootScope", "$exceptionHandler",
                                            function(b, a) {
                                                return De(function(a) {
                                                        b.$evalAsync(a)
                                                    },
                                                    a)
                                            }]
                                    }
                                    function De(b, a) {
                                        function c(a) {
                                            return a
                                        }
                                        function d(a) {
                                            return g(a)
                                        }
                                        var e = function() {
                                                var g = [],
                                                    m,
                                                    l;
                                                return l = {
                                                    resolve: function(a) {
                                                        if (g) {
                                                            var c = g;
                                                            g = u;
                                                            m = f(a);
                                                            c.length && b(function() {
                                                                for (var a, b = 0,
                                                                         d = c.length; b < d; b++) a = c[b],
                                                                    m.then(a[0], a[1], a[2])
                                                            })
                                                        }
                                                    },
                                                    reject: function(a) {
                                                        l.resolve(h(a))
                                                    },
                                                    notify: function(a) {
                                                        if (g) {
                                                            var c = g;
                                                            g.length && b(function() {
                                                                for (var b, d = 0,
                                                                         e = c.length; d < e; d++) b = c[d],
                                                                    b[2](a)
                                                            })
                                                        }
                                                    },
                                                    promise: {
                                                        then: function(b, f, h) {
                                                            var l = e(),
                                                                J = function(d) {
                                                                    try {
                                                                        l.resolve((N(b) ? b: c)(d))
                                                                    } catch(e) {
                                                                        l.reject(e),
                                                                            a(e)
                                                                    }
                                                                },
                                                                w = function(b) {
                                                                    try {
                                                                        l.resolve((N(f) ? f: d)(b))
                                                                    } catch(c) {
                                                                        l.reject(c),
                                                                            a(c)
                                                                    }
                                                                },
                                                                t = function(b) {
                                                                    try {
                                                                        l.notify((N(h) ? h: c)(b))
                                                                    } catch(d) {
                                                                        a(d)
                                                                    }
                                                                };
                                                            g ? g.push([J, w, t]) : m.then(J, w, t);
                                                            return l.promise
                                                        },
                                                        "catch": function(a) {
                                                            return this.then(null, a)
                                                        },
                                                        "finally": function(a) {
                                                            function b(a, c) {
                                                                var d = e();
                                                                c ? d.resolve(a) : d.reject(a);
                                                                return d.promise
                                                            }
                                                            function d(e, f) {
                                                                var g = null;
                                                                try {
                                                                    g = (a || c)()
                                                                } catch(h) {
                                                                    return b(h, !1)
                                                                }
                                                                return g && N(g.then) ? g.then(function() {
                                                                        return b(e, f)
                                                                    },
                                                                    function(a) {
                                                                        return b(a, !1)
                                                                    }) : b(e, f)
                                                            }
                                                            return this.then(function(a) {
                                                                    return d(a, !0)
                                                                },
                                                                function(a) {
                                                                    return d(a, !1)
                                                                })
                                                        }
                                                    }
                                                }
                                            },
                                            f = function(a) {
                                                return a && N(a.then) ? a: {
                                                    then: function(c) {
                                                        var d = e();
                                                        b(function() {
                                                            d.resolve(c(a))
                                                        });
                                                        return d.promise
                                                    }
                                                }
                                            },
                                            g = function(a) {
                                                var b = e();
                                                b.reject(a);
                                                return b.promise
                                            },
                                            h = function(c) {
                                                return {
                                                    then: function(f, g) {
                                                        var h = e();
                                                        b(function() {
                                                            try {
                                                                h.resolve((N(g) ? g: d)(c))
                                                            } catch(b) {
                                                                h.reject(b),
                                                                    a(b)
                                                            }
                                                        });
                                                        return h.promise
                                                    }
                                                }
                                            };
                                        return {
                                            defer: e,
                                            reject: g,
                                            when: function(h, m, l, n) {
                                                var q = e(),
                                                    p,
                                                    s = function(b) {
                                                        try {
                                                            return (N(m) ? m: c)(b)
                                                        } catch(d) {
                                                            return a(d),
                                                                g(d)
                                                        }
                                                    },
                                                    J = function(b) {
                                                        try {
                                                            return (N(l) ? l: d)(b)
                                                        } catch(c) {
                                                            return a(c),
                                                                g(c)
                                                        }
                                                    },
                                                    w = function(b) {
                                                        try {
                                                            return (N(n) ? n: c)(b)
                                                        } catch(d) {
                                                            a(d)
                                                        }
                                                    };
                                                b(function() {
                                                    f(h).then(function(a) {
                                                            p || (p = !0, q.resolve(f(a).then(s, J, w)))
                                                        },
                                                        function(a) {
                                                            p || (p = !0, q.resolve(J(a)))
                                                        },
                                                        function(a) {
                                                            p || q.notify(w(a))
                                                        })
                                                });
                                                return q.promise
                                            },
                                            all: function(a) {
                                                var b = e(),
                                                    c = 0,
                                                    d = L(a) ? [] : {};
                                                r(a,
                                                    function(a, e) {
                                                        c++;
                                                        f(a).then(function(a) {
                                                                d.hasOwnProperty(e) || (d[e] = a, --c || b.resolve(d))
                                                            },
                                                            function(a) {
                                                                d.hasOwnProperty(e) || b.reject(a)
                                                            })
                                                    });
                                                0 === c && b.resolve(d);
                                                return b.promise
                                            }
                                        }
                                    }
                                    function fe() {
                                        this.$get = ["$window", "$timeout",
                                            function(b, a) {
                                                var c = b.requestAnimationFrame || b.webkitRequestAnimationFrame || b.mozRequestAnimationFrame,
                                                    d = b.cancelAnimationFrame || b.webkitCancelAnimationFrame || b.mozCancelAnimationFrame || b.webkitCancelRequestAnimationFrame,
                                                    e = !!c,
                                                    f = e ?
                                                        function(a) {
                                                            var b = c(a);
                                                            return function() {
                                                                d(b)
                                                            }
                                                        }: function(b) {
                                                            var c = a(b, 16.66, !1);
                                                            return function() {
                                                                a.cancel(c)
                                                            }
                                                        };
                                                f.supported = e;
                                                return f
                                            }]
                                    }
                                    function Yd() {
                                        var b = 10,
                                            a = z("$rootScope"),
                                            c = null;
                                        this.digestTtl = function(a) {
                                            arguments.length && (b = a);
                                            return b
                                        };
                                        this.$get = ["$injector", "$exceptionHandler", "$parse", "$browser",
                                            function(d, e, f, g) {
                                                function h() {
                                                    this.$id = ib();
                                                    this.$$phase = this.$parent = this.$$watchers = this.$$nextSibling = this.$$prevSibling = this.$$childHead = this.$$childTail = null;
                                                    this["this"] = this.$root = this;
                                                    this.$$destroyed = !1;
                                                    this.$$asyncQueue = [];
                                                    this.$$postDigestQueue = [];
                                                    this.$$listeners = {};
                                                    this.$$listenerCount = {};
                                                    this.$$isolateBindings = {}
                                                }
                                                function k(b) {
                                                    if (q.$$phase) throw a("inprog", q.$$phase);
                                                    q.$$phase = b
                                                }
                                                function m(a, b) {
                                                    var c = f(a);
                                                    Ya(c, b);
                                                    return c
                                                }
                                                function l(a, b, c) {
                                                    do a.$$listenerCount[c] -= b,
                                                    0 === a.$$listenerCount[c] && delete a.$$listenerCount[c];
                                                    while (a = a.$parent)
                                                }
                                                function n() {}
                                                h.prototype = {
                                                    constructor: h,
                                                    $new: function(a) {
                                                        a ? (a = new h, a.$root = this.$root, a.$$asyncQueue = this.$$asyncQueue, a.$$postDigestQueue = this.$$postDigestQueue) : (this.$$childScopeClass || (this.$$childScopeClass = function() {
                                                            this.$$watchers = this.$$nextSibling = this.$$childHead = this.$$childTail = null;
                                                            this.$$listeners = {};
                                                            this.$$listenerCount = {};
                                                            this.$id = ib();
                                                            this.$$childScopeClass = null
                                                        },
                                                            this.$$childScopeClass.prototype = this), a = new this.$$childScopeClass);
                                                        a["this"] = a;
                                                        a.$parent = this;
                                                        a.$$prevSibling = this.$$childTail;
                                                        this.$$childHead ? this.$$childTail = this.$$childTail.$$nextSibling = a: this.$$childHead = this.$$childTail = a;
                                                        return a
                                                    },
                                                    $watch: function(a, b, d) {
                                                        var e = m(a, "watch"),
                                                            f = this.$$watchers,
                                                            g = {
                                                                fn: b,
                                                                last: n,
                                                                get: e,
                                                                exp: a,
                                                                eq: !!d
                                                            };
                                                        c = null;
                                                        if (!N(b)) {
                                                            var h = m(b || v, "listener");
                                                            g.fn = function(a, b, c) {
                                                                h(c)
                                                            }
                                                        }
                                                        if ("string" == typeof a && e.constant) {
                                                            var k = g.fn;
                                                            g.fn = function(a, b, c) {
                                                                k.call(this, a, b, c);
                                                                Ua(f, g)
                                                            }
                                                        }
                                                        f || (f = this.$$watchers = []);
                                                        f.unshift(g);
                                                        return function() {
                                                            Ua(f, g);
                                                            c = null
                                                        }
                                                    },
                                                    $watchCollection: function(a, b) {
                                                        var c = this,
                                                            d, e, g, h = 1 < b.length,
                                                            k = 0,
                                                            l = f(a),
                                                            m = [],
                                                            n = {},
                                                            q = !0,
                                                            r = 0;
                                                        return this.$watch(function() {
                                                                d = l(c);
                                                                var a, b, f;
                                                                if (T(d)) if (Sa(d)) for (e !== m && (e = m, r = e.length = 0, k++), a = d.length, r !== a && (k++, e.length = r = a), b = 0; b < a; b++) f = e[b] !== e[b] && d[b] !== d[b],
                                                                f || e[b] === d[b] || (k++, e[b] = d[b]);
                                                                else {
                                                                    e !== n && (e = n = {},
                                                                        r = 0, k++);
                                                                    a = 0;
                                                                    for (b in d) d.hasOwnProperty(b) && (a++, e.hasOwnProperty(b) ? (f = e[b] !== e[b] && d[b] !== d[b], f || e[b] === d[b] || (k++, e[b] = d[b])) : (r++, e[b] = d[b], k++));
                                                                    if (r > a) for (b in k++, e) e.hasOwnProperty(b) && !d.hasOwnProperty(b) && (r--, delete e[b])
                                                                } else e !== d && (e = d, k++);
                                                                return k
                                                            },
                                                            function() {
                                                                q ? (q = !1, b(d, d, c)) : b(d, g, c);
                                                                if (h) if (T(d)) if (Sa(d)) {
                                                                    g = Array(d.length);
                                                                    for (var a = 0; a < d.length; a++) g[a] = d[a]
                                                                } else for (a in g = {},
                                                                    d) lb.call(d, a) && (g[a] = d[a]);
                                                                else g = d
                                                            })
                                                    },
                                                    $digest: function() {
                                                        var d, f, h, l, m = this.$$asyncQueue,
                                                            r = this.$$postDigestQueue,
                                                            K, B, u = b,
                                                            O, M = [],
                                                            A,
                                                            P,
                                                            C;
                                                        k("$digest");
                                                        g.$$checkUrlChange();
                                                        c = null;
                                                        do {
                                                            B = !1;
                                                            for (O = this; m.length;) {
                                                                try {
                                                                    C = m.shift(),
                                                                        C.scope.$eval(C.expression)
                                                                } catch(I) {
                                                                    q.$$phase = null,
                                                                        e(I)
                                                                }
                                                                c = null
                                                            }
                                                            a: do {
                                                                if (l = O.$$watchers) for (K = l.length; K--;) try {
                                                                    if (d = l[K]) if ((f = d.get(O)) !== (h = d.last) && !(d.eq ? Ca(f, h) : "number" === typeof f && "number" === typeof h && isNaN(f) && isNaN(h))) B = !0,
                                                                        c = d,
                                                                        d.last = d.eq ? Ka(f, null) : f,
                                                                        d.fn(f, h === n ? f: h, O),
                                                                    5 > u && (A = 4 - u, M[A] || (M[A] = []), P = N(d.exp) ? "fn: " + (d.exp.name || d.exp.toString()) : d.exp, P += "; newVal: " + oa(f) + "; oldVal: " + oa(h), M[A].push(P));
                                                                    else if (d === c) {
                                                                        B = !1;
                                                                        break a
                                                                    }
                                                                } catch(D) {
                                                                    q.$$phase = null,
                                                                        e(D)
                                                                }
                                                                if (! (l = O.$$childHead || O !== this && O.$$nextSibling)) for (; O !== this && !(l = O.$$nextSibling);) O = O.$parent
                                                            } while ( O = l );
                                                            if ((B || m.length) && !u--) throw q.$$phase = null, a("infdig", b, oa(M));
                                                        } while ( B || m . length );
                                                        for (q.$$phase = null; r.length;) try {
                                                            r.shift()()
                                                        } catch(x) {
                                                            e(x)
                                                        }
                                                    },
                                                    $destroy: function() {
                                                        if (!this.$$destroyed) {
                                                            var a = this.$parent;
                                                            this.$broadcast("$destroy");
                                                            this.$$destroyed = !0;
                                                            this !== q && (r(this.$$listenerCount, Bb(null, l, this)), a.$$childHead == this && (a.$$childHead = this.$$nextSibling), a.$$childTail == this && (a.$$childTail = this.$$prevSibling), this.$$prevSibling && (this.$$prevSibling.$$nextSibling = this.$$nextSibling), this.$$nextSibling && (this.$$nextSibling.$$prevSibling = this.$$prevSibling), this.$parent = this.$$nextSibling = this.$$prevSibling = this.$$childHead = this.$$childTail = this.$root = null, this.$$listeners = {},
                                                                this.$$watchers = this.$$asyncQueue = this.$$postDigestQueue = [], this.$destroy = this.$digest = this.$apply = v, this.$on = this.$watch = function() {
                                                                return v
                                                            })
                                                        }
                                                    },
                                                    $eval: function(a, b) {
                                                        return f(a)(this, b)
                                                    },
                                                    $evalAsync: function(a) {
                                                        q.$$phase || q.$$asyncQueue.length || g.defer(function() {
                                                            q.$$asyncQueue.length && q.$digest()
                                                        });
                                                        this.$$asyncQueue.push({
                                                            scope: this,
                                                            expression: a
                                                        })
                                                    },
                                                    $$postDigest: function(a) {
                                                        this.$$postDigestQueue.push(a)
                                                    },
                                                    $apply: function(a) {
                                                        try {
                                                            return k("$apply"),
                                                                this.$eval(a)
                                                        } catch(b) {
                                                            e(b)
                                                        } finally {
                                                            q.$$phase = null;
                                                            try {
                                                                q.$digest()
                                                            } catch(c) {
                                                                throw e(c),
                                                                    c;
                                                            }
                                                        }
                                                    },
                                                    $on: function(a, b) {
                                                        var c = this.$$listeners[a];
                                                        c || (this.$$listeners[a] = c = []);
                                                        c.push(b);
                                                        var d = this;
                                                        do d.$$listenerCount[a] || (d.$$listenerCount[a] = 0),
                                                            d.$$listenerCount[a]++;
                                                        while (d = d.$parent);
                                                        var e = this;
                                                        return function() {
                                                            var d = Ta(c, b); - 1 !== d && (c[d] = null, l(e, 1, a))
                                                        }
                                                    },
                                                    $emit: function(a, b) {
                                                        var c = [],
                                                            d,
                                                            f = this,
                                                            g = !1,
                                                            h = {
                                                                name: a,
                                                                targetScope: f,
                                                                stopPropagation: function() {
                                                                    g = !0
                                                                },
                                                                preventDefault: function() {
                                                                    h.defaultPrevented = !0
                                                                },
                                                                defaultPrevented: !1
                                                            },
                                                            k = [h].concat(wa.call(arguments, 1)),
                                                            l,
                                                            m;
                                                        do {
                                                            d = f.$$listeners[a] || c;
                                                            h.currentScope = f;
                                                            l = 0;
                                                            for (m = d.length; l < m; l++) if (d[l]) try {
                                                                d[l].apply(null, k)
                                                            } catch(n) {
                                                                e(n)
                                                            } else d.splice(l, 1), l--, m--;
                                                            if (g) break;
                                                            f = f.$parent
                                                        } while ( f );
                                                        return h
                                                    },
                                                    $broadcast: function(a, b) {
                                                        for (var c = this,
                                                                 d = this,
                                                                 f = {
                                                                     name: a,
                                                                     targetScope: this,
                                                                     preventDefault: function() {
                                                                         f.defaultPrevented = !0
                                                                     },
                                                                     defaultPrevented: !1
                                                                 },
                                                                 g = [f].concat(wa.call(arguments, 1)), h, k; c = d;) {
                                                            f.currentScope = c;
                                                            d = c.$$listeners[a] || [];
                                                            h = 0;
                                                            for (k = d.length; h < k; h++) if (d[h]) try {
                                                                d[h].apply(null, g)
                                                            } catch(l) {
                                                                e(l)
                                                            } else d.splice(h, 1),
                                                                h--,
                                                                k--;
                                                            if (! (d = c.$$listenerCount[a] && c.$$childHead || c !== this && c.$$nextSibling)) for (; c !== this && !(d = c.$$nextSibling);) c = c.$parent
                                                        }
                                                        return f
                                                    }
                                                };
                                                var q = new h;
                                                return q
                                            }]
                                    }
                                    function bd() {
                                        var b = /^\s*(https?|ftp|mailto|tel|file):/,
                                            a = /^\s*((https?|ftp|file):|data:image\/)/;
                                        this.aHrefSanitizationWhitelist = function(a) {
                                            return D(a) ? (b = a, this) : b
                                        };
                                        this.imgSrcSanitizationWhitelist = function(b) {
                                            return D(b) ? (a = b, this) : a
                                        };
                                        this.$get = function() {
                                            return function(c, d) {
                                                var e = d ? a: b,
                                                    f;
                                                if (!R || 8 <= R) if (f = xa(c).href, "" !== f && !f.match(e)) return "unsafe:" + f;
                                                return c
                                            }
                                        }
                                    }
                                    function Ee(b) {
                                        if ("self" === b) return b;
                                        if (G(b)) {
                                            if ( - 1 < b.indexOf("***")) throw za("iwcard", b);
                                            b = b.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g, "\\$1").replace(/\x08/g, "\\x08").replace("\\*\\*", ".*").replace("\\*", "[^:/.?&;]*");
                                            return RegExp("^" + b + "$")
                                        }
                                        if (kb(b)) return RegExp("^" + b.source + "$");
                                        throw za("imatcher");
                                    }
                                    function Fc(b) {
                                        var a = [];
                                        D(b) && r(b,
                                            function(b) {
                                                a.push(Ee(b))
                                            });
                                        return a
                                    }
                                    function ae() {
                                        this.SCE_CONTEXTS = fa;
                                        var b = ["self"],
                                            a = [];
                                        this.resourceUrlWhitelist = function(a) {
                                            arguments.length && (b = Fc(a));
                                            return b
                                        };
                                        this.resourceUrlBlacklist = function(b) {
                                            arguments.length && (a = Fc(b));
                                            return a
                                        };
                                        this.$get = ["$injector",
                                            function(c) {
                                                function d(a) {
                                                    var b = function(a) {
                                                        this.$$unwrapTrustedValue = function() {
                                                            return a
                                                        }
                                                    };
                                                    a && (b.prototype = new a);
                                                    b.prototype.valueOf = function() {
                                                        return this.$$unwrapTrustedValue()
                                                    };
                                                    b.prototype.toString = function() {
                                                        return this.$$unwrapTrustedValue().toString()
                                                    };
                                                    return b
                                                }
                                                var e = function(a) {
                                                    throw za("unsafe");
                                                };
                                                c.has("$sanitize") && (e = c.get("$sanitize"));
                                                var f = d(),
                                                    g = {};
                                                g[fa.HTML] = d(f);
                                                g[fa.CSS] = d(f);
                                                g[fa.URL] = d(f);
                                                g[fa.JS] = d(f);
                                                g[fa.RESOURCE_URL] = d(g[fa.URL]);
                                                return {
                                                    trustAs: function(a, b) {
                                                        var c = g.hasOwnProperty(a) ? g[a] : null;
                                                        if (!c) throw za("icontext", a, b);
                                                        if (null === b || b === u || "" === b) return b;
                                                        if ("string" !== typeof b) throw za("itype", a);
                                                        return new c(b)
                                                    },
                                                    getTrusted: function(c, d) {
                                                        if (null === d || d === u || "" === d) return d;
                                                        var f = g.hasOwnProperty(c) ? g[c] : null;
                                                        if (f && d instanceof f) return d.$$unwrapTrustedValue();
                                                        if (c === fa.RESOURCE_URL) {
                                                            var f = xa(d.toString()),
                                                                l,
                                                                n,
                                                                q = !1;
                                                            l = 0;
                                                            for (n = b.length; l < n; l++) if ("self" === b[l] ? Pb(f) : b[l].exec(f.href)) {
                                                                q = !0;
                                                                break
                                                            }
                                                            if (q) for (l = 0, n = a.length; l < n; l++) if ("self" === a[l] ? Pb(f) : a[l].exec(f.href)) {
                                                                q = !1;
                                                                break
                                                            }
                                                            if (q) return d;
                                                            throw za("insecurl", d.toString());
                                                        }
                                                        if (c === fa.HTML) return e(d);
                                                        throw za("unsafe");
                                                    },
                                                    valueOf: function(a) {
                                                        return a instanceof f ? a.$$unwrapTrustedValue() : a
                                                    }
                                                }
                                            }]
                                    }
                                    function $d() {
                                        var b = !0;
                                        this.enabled = function(a) {
                                            arguments.length && (b = !!a);
                                            return b
                                        };
                                        this.$get = ["$parse", "$sniffer", "$sceDelegate",
                                            function(a, c, d) {
                                                if (b && c.msie && 8 > c.msieDocumentMode) throw za("iequirks");
                                                var e = ha(fa);
                                                e.isEnabled = function() {
                                                    return b
                                                };
                                                e.trustAs = d.trustAs;
                                                e.getTrusted = d.getTrusted;
                                                e.valueOf = d.valueOf;
                                                b || (e.trustAs = e.getTrusted = function(a, b) {
                                                    return b
                                                },
                                                    e.valueOf = ga);
                                                e.parseAs = function(b, c) {
                                                    var d = a(c);
                                                    return d.literal && d.constant ? d: function(a, c) {
                                                        return e.getTrusted(b, d(a, c))
                                                    }
                                                };
                                                var f = e.parseAs,
                                                    g = e.getTrusted,
                                                    h = e.trustAs;
                                                r(fa,
                                                    function(a, b) {
                                                        var c = x(b);
                                                        e[ab("parse_as_" + c)] = function(b) {
                                                            return f(a, b)
                                                        };
                                                        e[ab("get_trusted_" + c)] = function(b) {
                                                            return g(a, b)
                                                        };
                                                        e[ab("trust_as_" + c)] = function(b) {
                                                            return h(a, b)
                                                        }
                                                    });
                                                return e
                                            }]
                                    }
                                    function be() {
                                        this.$get = ["$window", "$document",
                                            function(b, a) {
                                                var c = {},
                                                    d = U((/android (\d+)/.exec(x((b.navigator || {}).userAgent)) || [])[1]),
                                                    e = /Boxee/i.test((b.navigator || {}).userAgent),
                                                    f = a[0] || {},
                                                    g = f.documentMode,
                                                    h,
                                                    k = /^(Moz|webkit|O|ms)(?=[A-Z])/,
                                                    m = f.body && f.body.style,
                                                    l = !1,
                                                    n = !1;
                                                if (m) {
                                                    for (var q in m) if (l = k.exec(q)) {
                                                        h = l[0];
                                                        h = h.substr(0, 1).toUpperCase() + h.substr(1);
                                                        break
                                                    }
                                                    h || (h = "WebkitOpacity" in m && "webkit");
                                                    l = !!("transition" in m || h + "Transition" in m);
                                                    n = !!("animation" in m || h + "Animation" in m); ! d || l && n || (l = G(f.body.style.webkitTransition), n = G(f.body.style.webkitAnimation))
                                                }
                                                return {
                                                    history: !(!b.history || !b.history.pushState || 4 > d || e),
                                                    hashchange: "onhashchange" in b && (!g || 7 < g),
                                                    hasEvent: function(a) {
                                                        if ("input" == a && 9 == R) return ! 1;
                                                        if (F(c[a])) {
                                                            var b = f.createElement("div");
                                                            c[a] = "on" + a in b
                                                        }
                                                        return c[a]
                                                    },
                                                    csp: Za(),
                                                    vendorPrefix: h,
                                                    transitions: l,
                                                    animations: n,
                                                    android: d,
                                                    msie: R,
                                                    msieDocumentMode: g
                                                }
                                            }]
                                    }
                                    function de() {
                                        this.$get = ["$rootScope", "$browser", "$q", "$exceptionHandler",
                                            function(b, a, c, d) {
                                                function e(e, h, k) {
                                                    var m = c.defer(),
                                                        l = m.promise,
                                                        n = D(k) && !k;
                                                    h = a.defer(function() {
                                                            try {
                                                                m.resolve(e())
                                                            } catch(a) {
                                                                m.reject(a),
                                                                    d(a)
                                                            } finally {
                                                                delete f[l.$$timeoutId]
                                                            }
                                                            n || b.$apply()
                                                        },
                                                        h);
                                                    l.$$timeoutId = h;
                                                    f[h] = m;
                                                    return l
                                                }
                                                var f = {};
                                                e.cancel = function(b) {
                                                    return b && b.$$timeoutId in f ? (f[b.$$timeoutId].reject("canceled"), delete f[b.$$timeoutId], a.defer.cancel(b.$$timeoutId)) : !1
                                                };
                                                return e
                                            }]
                                    }
                                    function xa(b, a) {
                                        var c = b;
                                        R && (Y.setAttribute("href", c), c = Y.href);
                                        Y.setAttribute("href", c);
                                        return {
                                            href: Y.href,
                                            protocol: Y.protocol ? Y.protocol.replace(/:$/, "") : "",
                                            host: Y.host,
                                            search: Y.search ? Y.search.replace(/^\?/, "") : "",
                                            hash: Y.hash ? Y.hash.replace(/^#/, "") : "",
                                            hostname: Y.hostname,
                                            port: Y.port,
                                            pathname: "/" === Y.pathname.charAt(0) ? Y.pathname: "/" + Y.pathname
                                        }
                                    }
                                    function Pb(b) {
                                        b = G(b) ? xa(b) : b;
                                        return b.protocol === Gc.protocol && b.host === Gc.host
                                    }
                                    function ee() {
                                        this.$get = aa(W)
                                    }
                                    function kc(b) {
                                        function a(d, e) {
                                            if (T(d)) {
                                                var f = {};
                                                r(d,
                                                    function(b, c) {
                                                        f[c] = a(c, b)
                                                    });
                                                return f
                                            }
                                            return b.factory(d + c, e)
                                        }
                                        var c = "Filter";
                                        this.register = a;
                                        this.$get = ["$injector",
                                            function(a) {
                                                return function(b) {
                                                    return a.get(b + c)
                                                }
                                            }];
                                        a("currency", Hc);
                                        a("date", Ic);
                                        a("filter", Fe);
                                        a("json", Ge);
                                        a("limitTo", He);
                                        a("lowercase", Ie);
                                        a("number", Jc);
                                        a("orderBy", Kc);
                                        a("uppercase", Je)
                                    }
                                    function Fe() {
                                        return function(b, a, c) {
                                            if (!L(b)) return b;
                                            var d = typeof c,
                                                e = [];
                                            e.check = function(a) {
                                                for (var b = 0; b < e.length; b++) if (!e[b](a)) return ! 1;
                                                return ! 0
                                            };
                                            "function" !== d && (c = "boolean" === d && c ?
                                                function(a, b) {
                                                    return Xa.equals(a, b)
                                                }: function(a, b) {
                                                    if (a && b && "object" === typeof a && "object" === typeof b) {
                                                        for (var d in a) if ("$" !== d.charAt(0) && lb.call(a, d) && c(a[d], b[d])) return ! 0;
                                                        return ! 1
                                                    }
                                                    b = ("" + b).toLowerCase();
                                                    return - 1 < ("" + a).toLowerCase().indexOf(b)
                                                });
                                            var f = function(a, b) {
                                                if ("string" === typeof b && "!" === b.charAt(0)) return ! f(a, b.substr(1));
                                                switch (typeof a) {
                                                    case "boolean":
                                                    case "number":
                                                    case "string":
                                                        return c(a, b);
                                                    case "object":
                                                        switch (typeof b) {
                                                            case "object":
                                                                return c(a, b);
                                                            default:
                                                                for (var d in a) if ("$" !== d.charAt(0) && f(a[d], b)) return ! 0
                                                        }
                                                        return ! 1;
                                                    case "array":
                                                        for (d = 0; d < a.length; d++) if (f(a[d], b)) return ! 0;
                                                        return ! 1;
                                                    default:
                                                        return ! 1
                                                }
                                            };
                                            switch (typeof a) {
                                                case "boolean":
                                                case "number":
                                                case "string":
                                                    a = {
                                                        $: a
                                                    };
                                                case "object":
                                                    for (var g in a)(function(b) {
                                                        "undefined" !== typeof a[b] && e.push(function(c) {
                                                            return f("$" == b ? c: c && c[b], a[b])
                                                        })
                                                    })(g);
                                                    break;
                                                case "function":
                                                    e.push(a);
                                                    break;
                                                default:
                                                    return b
                                            }
                                            d = [];
                                            for (g = 0; g < b.length; g++) {
                                                var h = b[g];
                                                e.check(h) && d.push(h)
                                            }
                                            return d
                                        }
                                    }
                                    function Hc(b) {
                                        var a = b.NUMBER_FORMATS;
                                        return function(b, d) {
                                            F(d) && (d = a.CURRENCY_SYM);
                                            return Lc(b, a.PATTERNS[1], a.GROUP_SEP, a.DECIMAL_SEP, 2).replace(/\u00A4/g, d)
                                        }
                                    }
                                    function Jc(b) {
                                        var a = b.NUMBER_FORMATS;
                                        return function(b, d) {
                                            return Lc(b, a.PATTERNS[0], a.GROUP_SEP, a.DECIMAL_SEP, d)
                                        }
                                    }
                                    function Lc(b, a, c, d, e) {
                                        if (null == b || !isFinite(b) || T(b)) return "";
                                        var f = 0 > b;
                                        b = Math.abs(b);
                                        var g = b + "",
                                            h = "",
                                            k = [],
                                            m = !1;
                                        if ( - 1 !== g.indexOf("e")) {
                                            var l = g.match(/([\d\.]+)e(-?)(\d+)/);
                                            l && "-" == l[2] && l[3] > e + 1 ? (g = "0", b = 0) : (h = g, m = !0)
                                        }
                                        if (m) 0 < e && ( - 1 < b && 1 > b) && (h = b.toFixed(e));
                                        else {
                                            g = (g.split(Mc)[1] || "").length;
                                            F(e) && (e = Math.min(Math.max(a.minFrac, g), a.maxFrac));
                                            b = +(Math.round( + (b.toString() + "e" + e)).toString() + "e" + -e);
                                            0 === b && (f = !1);
                                            b = ("" + b).split(Mc);
                                            g = b[0];
                                            b = b[1] || "";
                                            var l = 0,
                                                n = a.lgSize,
                                                q = a.gSize;
                                            if (g.length >= n + q) for (l = g.length - n, m = 0; m < l; m++) 0 === (l - m) % q && 0 !== m && (h += c),
                                                h += g.charAt(m);
                                            for (m = l; m < g.length; m++) 0 === (g.length - m) % n && 0 !== m && (h += c),
                                                h += g.charAt(m);
                                            for (; b.length < e;) b += "0";
                                            e && "0" !== e && (h += d + b.substr(0, e))
                                        }
                                        k.push(f ? a.negPre: a.posPre);
                                        k.push(h);
                                        k.push(f ? a.negSuf: a.posSuf);
                                        return k.join("")
                                    }
                                    function Vb(b, a, c) {
                                        var d = "";
                                        0 > b && (d = "-", b = -b);
                                        for (b = "" + b; b.length < a;) b = "0" + b;
                                        c && (b = b.substr(b.length - a));
                                        return d + b
                                    }
                                    function Z(b, a, c, d) {
                                        c = c || 0;
                                        return function(e) {
                                            e = e["get" + b]();
                                            if (0 < c || e > -c) e += c;
                                            0 === e && -12 == c && (e = 12);
                                            return Vb(e, a, d)
                                        }
                                    }
                                    function vb(b, a) {
                                        return function(c, d) {
                                            var e = c["get" + b](),
                                                f = La(a ? "SHORT" + b: b);
                                            return d[f][e]
                                        }
                                    }
                                    function Ic(b) {
                                        function a(a) {
                                            var b;
                                            if (b = a.match(c)) {
                                                a = new Date(0);
                                                var f = 0,
                                                    g = 0,
                                                    h = b[8] ? a.setUTCFullYear: a.setFullYear,
                                                    k = b[8] ? a.setUTCHours: a.setHours;
                                                b[9] && (f = U(b[9] + b[10]), g = U(b[9] + b[11]));
                                                h.call(a, U(b[1]), U(b[2]) - 1, U(b[3]));
                                                f = U(b[4] || 0) - f;
                                                g = U(b[5] || 0) - g;
                                                h = U(b[6] || 0);
                                                b = Math.round(1E3 * parseFloat("0." + (b[7] || 0)));
                                                k.call(a, f, g, h, b)
                                            }
                                            return a
                                        }
                                        var c = /^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;
                                        return function(c, e) {
                                            var f = "",
                                                g = [],
                                                h,
                                                k;
                                            e = e || "mediumDate";
                                            e = b.DATETIME_FORMATS[e] || e;
                                            G(c) && (c = Ke.test(c) ? U(c) : a(c));
                                            jb(c) && (c = new Date(c));
                                            if (!va(c)) return c;
                                            for (; e;)(k = Le.exec(e)) ? (g = g.concat(wa.call(k, 1)), e = g.pop()) : (g.push(e), e = null);
                                            r(g,
                                                function(a) {
                                                    h = Me[a];
                                                    f += h ? h(c, b.DATETIME_FORMATS) : a.replace(/(^'|'$)/g, "").replace(/''/g, "'")
                                                });
                                            return f
                                        }
                                    }
                                    function Ge() {
                                        return function(b) {
                                            return oa(b, !0)
                                        }
                                    }
                                    function He() {
                                        return function(b, a) {
                                            if (!L(b) && !G(b)) return b;
                                            a = Infinity === Math.abs(Number(a)) ? Number(a) : U(a);
                                            if (G(b)) return a ? 0 <= a ? b.slice(0, a) : b.slice(a, b.length) : "";
                                            var c = [],
                                                d,
                                                e;
                                            a > b.length ? a = b.length: a < -b.length && (a = -b.length);
                                            0 < a ? (d = 0, e = a) : (d = b.length + a, e = b.length);
                                            for (; d < e; d++) c.push(b[d]);
                                            return c
                                        }
                                    }
                                    function Kc(b) {
                                        return function(a, c, d) {
                                            function e(a, b) {
                                                return Wa(b) ?
                                                    function(b, c) {
                                                        return a(c, b)
                                                    }: a
                                            }
                                            function f(a, b) {
                                                var c = typeof a,
                                                    d = typeof b;
                                                return c == d ? (va(a) && va(b) && (a = a.valueOf(), b = b.valueOf()), "string" == c && (a = a.toLowerCase(), b = b.toLowerCase()), a === b ? 0 : a < b ? -1 : 1) : c < d ? -1 : 1
                                            }
                                            if (!Sa(a)) return a;
                                            c = L(c) ? c: [c];
                                            0 === c.length && (c = ["+"]);
                                            c = Uc(c,
                                                function(a) {
                                                    var c = !1,
                                                        d = a || ga;
                                                    if (G(a)) {
                                                        if ("+" == a.charAt(0) || "-" == a.charAt(0)) c = "-" == a.charAt(0),
                                                            a = a.substring(1);
                                                        if ("" === a) return e(function(a, b) {
                                                                return f(a, b)
                                                            },
                                                            c);
                                                        d = b(a);
                                                        if (d.constant) {
                                                            var m = d();
                                                            return e(function(a, b) {
                                                                    return f(a[m], b[m])
                                                                },
                                                                c)
                                                        }
                                                    }
                                                    return e(function(a, b) {
                                                            return f(d(a), d(b))
                                                        },
                                                        c)
                                                });
                                            return wa.call(a).sort(e(function(a, b) {
                                                    for (var d = 0; d < c.length; d++) {
                                                        var e = c[d](a, b);
                                                        if (0 !== e) return e
                                                    }
                                                    return 0
                                                },
                                                d))
                                        }
                                    }
                                    function Aa(b) {
                                        N(b) && (b = {
                                            link: b
                                        });
                                        b.restrict = b.restrict || "AC";
                                        return aa(b)
                                    }
                                    function Nc(b, a, c, d) {
                                        function e(a, c) {
                                            c = c ? "-" + nb(c, "-") : "";
                                            d.setClass(b, (a ? wb: xb) + c, (a ? xb: wb) + c)
                                        }
                                        var f = this,
                                            g = b.parent().controller("form") || yb,
                                            h = 0,
                                            k = f.$error = {},
                                            m = [];
                                        f.$name = a.name || a.ngForm;
                                        f.$dirty = !1;
                                        f.$pristine = !0;
                                        f.$valid = !0;
                                        f.$invalid = !1;
                                        g.$addControl(f);
                                        b.addClass(Ra);
                                        e(!0);
                                        f.$addControl = function(a) {
                                            Ea(a.$name, "input");
                                            m.push(a);
                                            a.$name && (f[a.$name] = a)
                                        };
                                        f.$removeControl = function(a) {
                                            a.$name && f[a.$name] === a && delete f[a.$name];
                                            r(k,
                                                function(b, c) {
                                                    f.$setValidity(c, !0, a)
                                                });
                                            Ua(m, a)
                                        };
                                        f.$setValidity = function(a, b, c) {
                                            var d = k[a];
                                            if (b) d && (Ua(d, c), d.length || (h--, h || (e(b), f.$valid = !0, f.$invalid = !1), k[a] = !1, e(!0, a), g.$setValidity(a, !0, f)));
                                            else {
                                                h || e(b);
                                                if (d) {
                                                    if ( - 1 != Ta(d, c)) return
                                                } else k[a] = d = [],
                                                    h++,
                                                    e(!1, a),
                                                    g.$setValidity(a, !1, f);
                                                d.push(c);
                                                f.$valid = !1;
                                                f.$invalid = !0
                                            }
                                        };
                                        f.$setDirty = function() {
                                            d.removeClass(b, Ra);
                                            d.addClass(b, zb);
                                            f.$dirty = !0;
                                            f.$pristine = !1;
                                            g.$setDirty()
                                        };
                                        f.$setPristine = function() {
                                            d.removeClass(b, zb);
                                            d.addClass(b, Ra);
                                            f.$dirty = !1;
                                            f.$pristine = !0;
                                            r(m,
                                                function(a) {
                                                    a.$setPristine()
                                                })
                                        }
                                    }
                                    function ua(b, a, c, d) {
                                        b.$setValidity(a, c);
                                        return c ? d: u
                                    }
                                    function Oc(b, a) {
                                        var c, d;
                                        if (a) for (c = 0; c < a.length; ++c) if (d = a[c], b[d]) return ! 0;
                                        return ! 1
                                    }
                                    function Ne(b, a, c, d, e) {
                                        T(e) && (b.$$hasNativeValidators = !0, b.$parsers.push(function(f) {
                                            if (b.$error[a] || Oc(e, d) || !Oc(e, c)) return f;
                                            b.$setValidity(a, !1)
                                        }))
                                    }
                                    function Ab(b, a, c, d, e, f) {
                                        var g = a.prop(Oe),
                                            h = a[0].placeholder,
                                            k = {},
                                            m = x(a[0].type);
                                        d.$$validityState = g;
                                        if (!e.android) {
                                            var l = !1;
                                            a.on("compositionstart",
                                                function(a) {
                                                    l = !0
                                                });
                                            a.on("compositionend",
                                                function() {
                                                    l = !1;
                                                    n()
                                                })
                                        }
                                        var n = function(e) {
                                            if (!l) {
                                                var f = a.val();
                                                if (R && "input" === (e || k).type && a[0].placeholder !== h) h = a[0].placeholder;
                                                else if ("password" !== m && Wa(c.ngTrim || "T") && (f = $(f)), e = g && d.$$hasNativeValidators, d.$viewValue !== f || "" === f && e) b.$root.$$phase ? d.$setViewValue(f) : b.$apply(function() {
                                                    d.$setViewValue(f)
                                                })
                                            }
                                        };
                                        if (e.hasEvent("input")) a.on("input", n);
                                        else {
                                            var q, p = function() {
                                                q || (q = f.defer(function() {
                                                    n();
                                                    q = null
                                                }))
                                            };
                                            a.on("keydown",
                                                function(a) {
                                                    a = a.keyCode;
                                                    91 === a || (15 < a && 19 > a || 37 <= a && 40 >= a) || p()
                                                });
                                            if (e.hasEvent("paste")) a.on("paste cut", p)
                                        }
                                        a.on("change", n);
                                        d.$render = function() {
                                            a.val(d.$isEmpty(d.$viewValue) ? "": d.$viewValue)
                                        };
                                        var s = c.ngPattern;
                                        s && ((e = s.match(/^\/(.*)\/([gim]*)$/)) ? (s = RegExp(e[1], e[2]), e = function(a) {
                                            return ua(d, "pattern", d.$isEmpty(a) || s.test(a), a)
                                        }) : e = function(c) {
                                            var e = b.$eval(s);
                                            if (!e || !e.test) throw z("ngPattern")("noregexp", s, e, ia(a));
                                            return ua(d, "pattern", d.$isEmpty(c) || e.test(c), c)
                                        },
                                            d.$formatters.push(e), d.$parsers.push(e));
                                        if (c.ngMinlength) {
                                            var r = U(c.ngMinlength);
                                            e = function(a) {
                                                return ua(d, "minlength", d.$isEmpty(a) || a.length >= r, a)
                                            };
                                            d.$parsers.push(e);
                                            d.$formatters.push(e)
                                        }
                                        if (c.ngMaxlength) {
                                            var w = U(c.ngMaxlength);
                                            e = function(a) {
                                                return ua(d, "maxlength", d.$isEmpty(a) || a.length <= w, a)
                                            };
                                            d.$parsers.push(e);
                                            d.$formatters.push(e)
                                        }
                                    }
                                    function Wb(b, a) {
                                        b = "ngClass" + b;
                                        return ["$animate",
                                            function(c) {
                                                function d(a, b) {
                                                    var c = [],
                                                        d = 0;
                                                    a: for (; d < a.length; d++) {
                                                        for (var e = a[d], l = 0; l < b.length; l++) if (e == b[l]) continue a;
                                                        c.push(e)
                                                    }
                                                    return c
                                                }
                                                function e(a) {
                                                    if (!L(a)) {
                                                        if (G(a)) return a.split(" ");
                                                        if (T(a)) {
                                                            var b = [];
                                                            r(a,
                                                                function(a, c) {
                                                                    a && (b = b.concat(c.split(" ")))
                                                                });
                                                            return b
                                                        }
                                                    }
                                                    return a
                                                }
                                                return {
                                                    restrict: "AC",
                                                    link: function(f, g, h) {
                                                        function k(a, b) {
                                                            var c = g.data("$classCounts") || {},
                                                                d = [];
                                                            r(a,
                                                                function(a) {
                                                                    if (0 < b || c[a]) c[a] = (c[a] || 0) + b,
                                                                    c[a] === +(0 < b) && d.push(a)
                                                                });
                                                            g.data("$classCounts", c);
                                                            return d.join(" ")
                                                        }
                                                        function m(b) {
                                                            if (!0 === a || f.$index % 2 === a) {
                                                                var m = e(b || []);
                                                                if (!l) {
                                                                    var p = k(m, 1);
                                                                    h.$addClass(p)
                                                                } else if (!Ca(b, l)) {
                                                                    var s = e(l),
                                                                        p = d(m, s),
                                                                        m = d(s, m),
                                                                        m = k(m, -1),
                                                                        p = k(p, 1);
                                                                    0 === p.length ? c.removeClass(g, m) : 0 === m.length ? c.addClass(g, p) : c.setClass(g, p, m)
                                                                }
                                                            }
                                                            l = ha(b)
                                                        }
                                                        var l;
                                                        f.$watch(h[b], m, !0);
                                                        h.$observe("class",
                                                            function(a) {
                                                                m(f.$eval(h[b]))
                                                            });
                                                        "ngClass" !== b && f.$watch("$index",
                                                            function(c, d) {
                                                                var g = c & 1;
                                                                if (g !== (d & 1)) {
                                                                    var l = e(f.$eval(h[b]));
                                                                    g === a ? (g = k(l, 1), h.$addClass(g)) : (g = k(l, -1), h.$removeClass(g))
                                                                }
                                                            })
                                                    }
                                                }
                                            }]
                                    }
                                    var Oe = "validity",
                                        x = function(b) {
                                            return G(b) ? b.toLowerCase() : b
                                        },
                                        lb = Object.prototype.hasOwnProperty,
                                        La = function(b) {
                                            return G(b) ? b.toUpperCase() : b
                                        },
                                        R,
                                        A,
                                        Fa,
                                        wa = [].slice,
                                        Pe = [].push,
                                        Ba = Object.prototype.toString,
                                        Va = z("ng"),
                                        Xa = W.angular || (W.angular = {}),
                                        $a,
                                        Pa,
                                        na = ["0", "0", "0"];
                                    R = U((/msie (\d+)/.exec(x(navigator.userAgent)) || [])[1]);
                                    isNaN(R) && (R = U((/trident\/.*; rv:(\d+)/.exec(x(navigator.userAgent)) || [])[1]));
                                    v.$inject = [];
                                    ga.$inject = [];
                                    var L = function() {
                                            return N(Array.isArray) ? Array.isArray: function(b) {
                                                return "[object Array]" === Ba.call(b)
                                            }
                                        } (),
                                        $ = function() {
                                            return String.prototype.trim ?
                                                function(b) {
                                                    return G(b) ? b.trim() : b
                                                }: function(b) {
                                                    return G(b) ? b.replace(/^\s\s*/, "").replace(/\s\s*$/, "") : b
                                                }
                                        } ();
                                    Pa = 9 > R ?
                                        function(b) {
                                            b = b.nodeName ? b: b[0];
                                            return b.scopeName && "HTML" != b.scopeName ? La(b.scopeName + ":" + b.nodeName) : b.nodeName
                                        }: function(b) {
                                            return b.nodeName ? b.nodeName: b[0].nodeName
                                        };
                                    var Za = function() {
                                            if (D(Za.isActive_)) return Za.isActive_;
                                            var b = !(!X.querySelector("[ng-csp]") && !X.querySelector("[data-ng-csp]"));
                                            if (!b) try {
                                                new Function("")
                                            } catch(a) {
                                                b = !0
                                            }
                                            return Za.isActive_ = b
                                        },
                                        Xc = /[A-Z]/g,
                                        $c = {
                                            full: "1.2.28",
                                            major: 1,
                                            minor: 2,
                                            dot: 28,
                                            codeName: "finnish-disembarkation"
                                        };
                                    S.expando = "ng339";
                                    var cb = S.cache = {},
                                        me = 1,
                                        sb = W.document.addEventListener ?
                                            function(b, a, c) {
                                                b.addEventListener(a, c, !1)
                                            }: function(b, a, c) {
                                                b.attachEvent("on" + a, c)
                                            },
                                        bb = W.document.removeEventListener ?
                                            function(b, a, c) {
                                                b.removeEventListener(a, c, !1)
                                            }: function(b, a, c) {
                                                b.detachEvent("on" + a, c)
                                            };
                                    S._data = function(b) {
                                        return this.cache[b[this.expando]] || {}
                                    };
                                    var he = /([\:\-\_]+(.))/g,
                                        ie = /^moz([A-Z])/,
                                        Hb = z("jqLite"),
                                        je = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
                                        Ib = /<|&#?\w+;/,
                                        ke = /<([\w:]+)/,
                                        le = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
                                        da = {
                                            option: [1, '<select multiple="multiple">', "</select>"],
                                            thead: [1, "<table>", "</table>"],
                                            col: [2, "<table><colgroup>", "</colgroup></table>"],
                                            tr: [2, "<table><tbody>", "</tbody></table>"],
                                            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
                                            _default: [0, "", ""]
                                        };
                                    da.optgroup = da.option;
                                    da.tbody = da.tfoot = da.colgroup = da.caption = da.thead;
                                    da.th = da.td;
                                    var Oa = S.prototype = {
                                            ready: function(b) {
                                                function a() {
                                                    c || (c = !0, b())
                                                }
                                                var c = !1;
                                                "complete" === X.readyState ? setTimeout(a) : (this.on("DOMContentLoaded", a), S(W).on("load", a))
                                            },
                                            toString: function() {
                                                var b = [];
                                                r(this,
                                                    function(a) {
                                                        b.push("" + a)
                                                    });
                                                return "[" + b.join(", ") + "]"
                                            },
                                            eq: function(b) {
                                                return 0 <= b ? A(this[b]) : A(this[this.length + b])
                                            },
                                            length: 0,
                                            push: Pe,
                                            sort: [].sort,
                                            splice: [].splice
                                        },
                                        rb = {};
                                    r("multiple selected checked disabled readOnly required open".split(" "),
                                        function(b) {
                                            rb[x(b)] = b
                                        });
                                    var pc = {};
                                    r("input select option textarea button form details".split(" "),
                                        function(b) {
                                            pc[La(b)] = !0
                                        });
                                    r({
                                            data: Mb,
                                            removeData: Lb
                                        },
                                        function(b, a) {
                                            S[a] = b
                                        });
                                    r({
                                            data: Mb,
                                            inheritedData: qb,
                                            scope: function(b) {
                                                return A.data(b, "$scope") || qb(b.parentNode || b, ["$isolateScope", "$scope"])
                                            },
                                            isolateScope: function(b) {
                                                return A.data(b, "$isolateScope") || A.data(b, "$isolateScopeNoTemplate")
                                            },
                                            controller: mc,
                                            injector: function(b) {
                                                return qb(b, "$injector")
                                            },
                                            removeAttr: function(b, a) {
                                                b.removeAttribute(a)
                                            },
                                            hasClass: Nb,
                                            css: function(b, a, c) {
                                                a = ab(a);
                                                if (D(c)) b.style[a] = c;
                                                else {
                                                    var d;
                                                    8 >= R && (d = b.currentStyle && b.currentStyle[a], "" === d && (d = "auto"));
                                                    d = d || b.style[a];
                                                    8 >= R && (d = "" === d ? u: d);
                                                    return d
                                                }
                                            },
                                            attr: function(b, a, c) {
                                                var d = x(a);
                                                if (rb[d]) if (D(c)) c ? (b[a] = !0, b.setAttribute(a, d)) : (b[a] = !1, b.removeAttribute(d));
                                                else return b[a] || (b.attributes.getNamedItem(a) || v).specified ? d: u;
                                                else if (D(c)) b.setAttribute(a, c);
                                                else if (b.getAttribute) return b = b.getAttribute(a, 2),
                                                    null === b ? u: b
                                            },
                                            prop: function(b, a, c) {
                                                if (D(c)) b[a] = c;
                                                else return b[a]
                                            },
                                            text: function() {
                                                function b(b, d) {
                                                    var e = a[b.nodeType];
                                                    if (F(d)) return e ? b[e] : "";
                                                    b[e] = d
                                                }
                                                var a = [];
                                                9 > R ? (a[1] = "innerText", a[3] = "nodeValue") : a[1] = a[3] = "textContent";
                                                b.$dv = "";
                                                return b
                                            } (),
                                            val: function(b, a) {
                                                if (F(a)) {
                                                    if ("SELECT" === Pa(b) && b.multiple) {
                                                        var c = [];
                                                        r(b.options,
                                                            function(a) {
                                                                a.selected && c.push(a.value || a.text)
                                                            });
                                                        return 0 === c.length ? null: c
                                                    }
                                                    return b.value
                                                }
                                                b.value = a
                                            },
                                            html: function(b, a) {
                                                if (F(a)) return b.innerHTML;
                                                for (var c = 0,
                                                         d = b.childNodes; c < d.length; c++) Ma(d[c]);
                                                b.innerHTML = a
                                            },
                                            empty: nc
                                        },
                                        function(b, a) {
                                            S.prototype[a] = function(a, d) {
                                                var e, f, g = this.length;
                                                if (b !== nc && (2 == b.length && b !== Nb && b !== mc ? a: d) === u) {
                                                    if (T(a)) {
                                                        for (e = 0; e < g; e++) if (b === Mb) b(this[e], a);
                                                        else for (f in a) b(this[e], f, a[f]);
                                                        return this
                                                    }
                                                    e = b.$dv;
                                                    g = e === u ? Math.min(g, 1) : g;
                                                    for (f = 0; f < g; f++) {
                                                        var h = b(this[f], a, d);
                                                        e = e ? e + h: h
                                                    }
                                                    return e
                                                }
                                                for (e = 0; e < g; e++) b(this[e], a, d);
                                                return this
                                            }
                                        });
                                    r({
                                            removeData: Lb,
                                            dealoc: Ma,
                                            on: function a(c, d, e, f) {
                                                if (D(f)) throw Hb("onargs");
                                                var g = pa(c, "events"),
                                                    h = pa(c, "handle");
                                                g || pa(c, "events", g = {});
                                                h || pa(c, "handle", h = ne(c, g));
                                                r(d.split(" "),
                                                    function(d) {
                                                        var f = g[d];
                                                        if (!f) {
                                                            if ("mouseenter" == d || "mouseleave" == d) {
                                                                var l = X.body.contains || X.body.compareDocumentPosition ?
                                                                    function(a, c) {
                                                                        var d = 9 === a.nodeType ? a.documentElement: a,
                                                                            e = c && c.parentNode;
                                                                        return a === e || !!(e && 1 === e.nodeType && (d.contains ? d.contains(e) : a.compareDocumentPosition && a.compareDocumentPosition(e) & 16))
                                                                    }: function(a, c) {
                                                                        if (c) for (; c = c.parentNode;) if (c === a) return ! 0;
                                                                        return ! 1
                                                                    };
                                                                g[d] = [];
                                                                a(c, {
                                                                        mouseleave: "mouseout",
                                                                        mouseenter: "mouseover"
                                                                    } [d],
                                                                    function(a) {
                                                                        var c = a.relatedTarget;
                                                                        c && (c === this || l(this, c)) || h(a, d)
                                                                    })
                                                            } else sb(c, d, h),
                                                                g[d] = [];
                                                            f = g[d]
                                                        }
                                                        f.push(e)
                                                    })
                                            },
                                            off: lc,
                                            one: function(a, c, d) {
                                                a = A(a);
                                                a.on(c,
                                                    function f() {
                                                        a.off(c, d);
                                                        a.off(c, f)
                                                    });
                                                a.on(c, d)
                                            },
                                            replaceWith: function(a, c) {
                                                var d, e = a.parentNode;
                                                Ma(a);
                                                r(new S(c),
                                                    function(c) {
                                                        d ? e.insertBefore(c, d.nextSibling) : e.replaceChild(c, a);
                                                        d = c
                                                    })
                                            },
                                            children: function(a) {
                                                var c = [];
                                                r(a.childNodes,
                                                    function(a) {
                                                        1 === a.nodeType && c.push(a)
                                                    });
                                                return c
                                            },
                                            contents: function(a) {
                                                return a.contentDocument || a.childNodes || []
                                            },
                                            append: function(a, c) {
                                                r(new S(c),
                                                    function(c) {
                                                        1 !== a.nodeType && 11 !== a.nodeType || a.appendChild(c)
                                                    })
                                            },
                                            prepend: function(a, c) {
                                                if (1 === a.nodeType) {
                                                    var d = a.firstChild;
                                                    r(new S(c),
                                                        function(c) {
                                                            a.insertBefore(c, d)
                                                        })
                                                }
                                            },
                                            wrap: function(a, c) {
                                                c = A(c)[0];
                                                var d = a.parentNode;
                                                d && d.replaceChild(c, a);
                                                c.appendChild(a)
                                            },
                                            remove: function(a) {
                                                Ma(a);
                                                var c = a.parentNode;
                                                c && c.removeChild(a)
                                            },
                                            after: function(a, c) {
                                                var d = a,
                                                    e = a.parentNode;
                                                r(new S(c),
                                                    function(a) {
                                                        e.insertBefore(a, d.nextSibling);
                                                        d = a
                                                    })
                                            },
                                            addClass: pb,
                                            removeClass: ob,
                                            toggleClass: function(a, c, d) {
                                                c && r(c.split(" "),
                                                    function(c) {
                                                        var f = d;
                                                        F(f) && (f = !Nb(a, c)); (f ? pb: ob)(a, c)
                                                    })
                                            },
                                            parent: function(a) {
                                                return (a = a.parentNode) && 11 !== a.nodeType ? a: null
                                            },
                                            next: function(a) {
                                                if (a.nextElementSibling) return a.nextElementSibling;
                                                for (a = a.nextSibling; null != a && 1 !== a.nodeType;) a = a.nextSibling;
                                                return a
                                            },
                                            find: function(a, c) {
                                                return a.getElementsByTagName ? a.getElementsByTagName(c) : []
                                            },
                                            clone: Kb,
                                            triggerHandler: function(a, c, d) {
                                                var e, f;
                                                e = c.type || c;
                                                var g = (pa(a, "events") || {})[e];
                                                g && (e = {
                                                    preventDefault: function() {
                                                        this.defaultPrevented = !0
                                                    },
                                                    isDefaultPrevented: function() {
                                                        return ! 0 === this.defaultPrevented
                                                    },
                                                    stopPropagation: v,
                                                    type: e,
                                                    target: a
                                                },
                                                c.type && (e = E(e, c)), c = ha(g), f = d ? [e].concat(d) : [e], r(c,
                                                    function(c) {
                                                        c.apply(a, f)
                                                    }))
                                            }
                                        },
                                        function(a, c) {
                                            S.prototype[c] = function(c, e, f) {
                                                for (var g, h = 0; h < this.length; h++) F(g) ? (g = a(this[h], c, e, f), D(g) && (g = A(g))) : Jb(g, a(this[h], c, e, f));
                                                return D(g) ? g: this
                                            };
                                            S.prototype.bind = S.prototype.on;
                                            S.prototype.unbind = S.prototype.off
                                        });
                                    db.prototype = {
                                        put: function(a, c) {
                                            this[Na(a, this.nextUid)] = c
                                        },
                                        get: function(a) {
                                            return this[Na(a, this.nextUid)]
                                        },
                                        remove: function(a) {
                                            var c = this[a = Na(a, this.nextUid)];
                                            delete this[a];
                                            return c
                                        }
                                    };
                                    var pe = /^function\s*[^\(]*\(\s*([^\)]*)\)/m,
                                        qe = /,/,
                                        re = /^\s*(_?)(\S+?)\1\s*$/,
                                        oe = /((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,
                                        eb = z("$injector"),
                                        Qe = z("$animate"),
                                        Ld = ["$provide",
                                            function(a) {
                                                this.$$selectors = {};
                                                this.register = function(c, d) {
                                                    var e = c + "-animation";
                                                    if (c && "." != c.charAt(0)) throw Qe("notcsel", c);
                                                    this.$$selectors[c.substr(1)] = e;
                                                    a.factory(e, d)
                                                };
                                                this.classNameFilter = function(a) {
                                                    1 === arguments.length && (this.$$classNameFilter = a instanceof RegExp ? a: null);
                                                    return this.$$classNameFilter
                                                };
                                                this.$get = ["$timeout", "$$asyncCallback",
                                                    function(a, d) {
                                                        return {
                                                            enter: function(a, c, g, h) {
                                                                g ? g.after(a) : (c && c[0] || (c = g.parent()), c.append(a));
                                                                h && d(h)
                                                            },
                                                            leave: function(a, c) {
                                                                a.remove();
                                                                c && d(c)
                                                            },
                                                            move: function(a, c, d, h) {
                                                                this.enter(a, c, d, h)
                                                            },
                                                            addClass: function(a, c, g) {
                                                                c = G(c) ? c: L(c) ? c.join(" ") : "";
                                                                r(a,
                                                                    function(a) {
                                                                        pb(a, c)
                                                                    });
                                                                g && d(g)
                                                            },
                                                            removeClass: function(a, c, g) {
                                                                c = G(c) ? c: L(c) ? c.join(" ") : "";
                                                                r(a,
                                                                    function(a) {
                                                                        ob(a, c)
                                                                    });
                                                                g && d(g)
                                                            },
                                                            setClass: function(a, c, g, h) {
                                                                r(a,
                                                                    function(a) {
                                                                        pb(a, c);
                                                                        ob(a, g)
                                                                    });
                                                                h && d(h)
                                                            },
                                                            enabled: v
                                                        }
                                                    }]
                                            }],
                                        ja = z("$compile");
                                    gc.$inject = ["$provide", "$$sanitizeUriProvider"];
                                    var we = /^(x[\:\-_]|data[\:\-_])/i,
                                        wc = z("$interpolate"),
                                        Re = /^([^\?#]*)(\?([^#]*))?(#(.*))?$/,
                                        ze = {
                                            http: 80,
                                            https: 443,
                                            ftp: 21
                                        },
                                        Sb = z("$location");
                                    Ac.prototype = Tb.prototype = zc.prototype = {
                                        $$html5: !1,
                                        $$replace: !1,
                                        absUrl: tb("$$absUrl"),
                                        url: function(a) {
                                            if (F(a)) return this.$$url;
                                            a = Re.exec(a);
                                            a[1] && this.path(decodeURIComponent(a[1])); (a[2] || a[1]) && this.search(a[3] || "");
                                            this.hash(a[5] || "");
                                            return this
                                        },
                                        protocol: tb("$$protocol"),
                                        host: tb("$$host"),
                                        port: tb("$$port"),
                                        path: Bc("$$path",
                                            function(a) {
                                                a = null !== a ? a.toString() : "";
                                                return "/" == a.charAt(0) ? a: "/" + a
                                            }),
                                        search: function(a, c) {
                                            switch (arguments.length) {
                                                case 0:
                                                    return this.$$search;
                                                case 1:
                                                    if (G(a) || jb(a)) a = a.toString(),
                                                        this.$$search = cc(a);
                                                    else if (T(a)) r(a,
                                                        function(c, e) {
                                                            null == c && delete a[e]
                                                        }),
                                                        this.$$search = a;
                                                    else throw Sb("isrcharg");
                                                    break;
                                                default:
                                                    F(c) || null === c ? delete this.$$search[a] : this.$$search[a] = c
                                            }
                                            this.$$compose();
                                            return this
                                        },
                                        hash: Bc("$$hash",
                                            function(a) {
                                                return null !== a ? a.toString() : ""
                                            }),
                                        replace: function() {
                                            this.$$replace = !0;
                                            return this
                                        }
                                    };
                                    var la = z("$parse"),
                                        Ec = {},
                                        ya,
                                        Se = Function.prototype.call,
                                        Te = Function.prototype.apply,
                                        Pc = Function.prototype.bind,
                                        hb = {
                                            "null": function() {
                                                return null
                                            },
                                            "true": function() {
                                                return ! 0
                                            },
                                            "false": function() {
                                                return ! 1
                                            },
                                            undefined: v,
                                            "+": function(a, c, d, e) {
                                                d = d(a, c);
                                                e = e(a, c);
                                                return D(d) ? D(e) ? d + e: d: D(e) ? e: u
                                            },
                                            "-": function(a, c, d, e) {
                                                d = d(a, c);
                                                e = e(a, c);
                                                return (D(d) ? d: 0) - (D(e) ? e: 0)
                                            },
                                            "*": function(a, c, d, e) {
                                                return d(a, c) * e(a, c)
                                            },
                                            "/": function(a, c, d, e) {
                                                return d(a, c) / e(a, c)
                                            },
                                            "%": function(a, c, d, e) {
                                                return d(a, c) % e(a, c)
                                            },
                                            "^": function(a, c, d, e) {
                                                return d(a, c) ^ e(a, c)
                                            },
                                            "=": v,
                                            "===": function(a, c, d, e) {
                                                return d(a, c) === e(a, c)
                                            },
                                            "!==": function(a, c, d, e) {
                                                return d(a, c) !== e(a, c)
                                            },
                                            "==": function(a, c, d, e) {
                                                return d(a, c) == e(a, c)
                                            },
                                            "!=": function(a, c, d, e) {
                                                return d(a, c) != e(a, c)
                                            },
                                            "<": function(a, c, d, e) {
                                                return d(a, c) < e(a, c)
                                            },
                                            ">": function(a, c, d, e) {
                                                return d(a, c) > e(a, c)
                                            },
                                            "<=": function(a, c, d, e) {
                                                return d(a, c) <= e(a, c)
                                            },
                                            ">=": function(a, c, d, e) {
                                                return d(a, c) >= e(a, c)
                                            },
                                            "&&": function(a, c, d, e) {
                                                return d(a, c) && e(a, c)
                                            },
                                            "||": function(a, c, d, e) {
                                                return d(a, c) || e(a, c)
                                            },
                                            "&": function(a, c, d, e) {
                                                return d(a, c) & e(a, c)
                                            },
                                            "|": function(a, c, d, e) {
                                                return e(a, c)(a, c, d(a, c))
                                            },
                                            "!": function(a, c, d) {
                                                return ! d(a, c)
                                            }
                                        },
                                        Ue = {
                                            n: "\n",
                                            f: "\f",
                                            r: "\r",
                                            t: "\t",
                                            v: "\v",
                                            "'": "'",
                                            '"': '"'
                                        },
                                        Ub = function(a) {
                                            this.options = a
                                        };
                                    Ub.prototype = {
                                        constructor: Ub,
                                        lex: function(a) {
                                            this.text = a;
                                            this.index = 0;
                                            this.ch = u;
                                            this.lastCh = ":";
                                            for (this.tokens = []; this.index < this.text.length;) {
                                                this.ch = this.text.charAt(this.index);
                                                if (this.is("\"'")) this.readString(this.ch);
                                                else if (this.isNumber(this.ch) || this.is(".") && this.isNumber(this.peek())) this.readNumber();
                                                else if (this.isIdent(this.ch)) this.readIdent();
                                                else if (this.is("(){}[].,;:?")) this.tokens.push({
                                                    index: this.index,
                                                    text: this.ch
                                                }),
                                                    this.index++;
                                                else if (this.isWhitespace(this.ch)) {
                                                    this.index++;
                                                    continue
                                                } else {
                                                    a = this.ch + this.peek();
                                                    var c = a + this.peek(2),
                                                        d = hb[this.ch],
                                                        e = hb[a],
                                                        f = hb[c];
                                                    f ? (this.tokens.push({
                                                        index: this.index,
                                                        text: c,
                                                        fn: f
                                                    }), this.index += 3) : e ? (this.tokens.push({
                                                        index: this.index,
                                                        text: a,
                                                        fn: e
                                                    }), this.index += 2) : d ? (this.tokens.push({
                                                        index: this.index,
                                                        text: this.ch,
                                                        fn: d
                                                    }), this.index += 1) : this.throwError("Unexpected next character ", this.index, this.index + 1)
                                                }
                                                this.lastCh = this.ch
                                            }
                                            return this.tokens
                                        },
                                        is: function(a) {
                                            return - 1 !== a.indexOf(this.ch)
                                        },
                                        was: function(a) {
                                            return - 1 !== a.indexOf(this.lastCh)
                                        },
                                        peek: function(a) {
                                            a = a || 1;
                                            return this.index + a < this.text.length ? this.text.charAt(this.index + a) : !1
                                        },
                                        isNumber: function(a) {
                                            return "0" <= a && "9" >= a
                                        },
                                        isWhitespace: function(a) {
                                            return " " === a || "\r" === a || "\t" === a || "\n" === a || "\v" === a || "\u00a0" === a
                                        },
                                        isIdent: function(a) {
                                            return "a" <= a && "z" >= a || "A" <= a && "Z" >= a || "_" === a || "$" === a
                                        },
                                        isExpOperator: function(a) {
                                            return "-" === a || "+" === a || this.isNumber(a)
                                        },
                                        throwError: function(a, c, d) {
                                            d = d || this.index;
                                            c = D(c) ? "s " + c + "-" + this.index + " [" + this.text.substring(c, d) + "]": " " + d;
                                            throw la("lexerr", a, c, this.text);
                                        },
                                        readNumber: function() {
                                            for (var a = "",
                                                     c = this.index; this.index < this.text.length;) {
                                                var d = x(this.text.charAt(this.index));
                                                if ("." == d || this.isNumber(d)) a += d;
                                                else {
                                                    var e = this.peek();
                                                    if ("e" == d && this.isExpOperator(e)) a += d;
                                                    else if (this.isExpOperator(d) && e && this.isNumber(e) && "e" == a.charAt(a.length - 1)) a += d;
                                                    else if (!this.isExpOperator(d) || e && this.isNumber(e) || "e" != a.charAt(a.length - 1)) break;
                                                    else this.throwError("Invalid exponent")
                                                }
                                                this.index++
                                            }
                                            a *= 1;
                                            this.tokens.push({
                                                index: c,
                                                text: a,
                                                literal: !0,
                                                constant: !0,
                                                fn: function() {
                                                    return a
                                                }
                                            })
                                        },
                                        readIdent: function() {
                                            for (var a = this,
                                                     c = "",
                                                     d = this.index,
                                                     e, f, g, h; this.index < this.text.length;) {
                                                h = this.text.charAt(this.index);
                                                if ("." === h || this.isIdent(h) || this.isNumber(h))"." === h && (e = this.index),
                                                    c += h;
                                                else break;
                                                this.index++
                                            }
                                            if (e) for (f = this.index; f < this.text.length;) {
                                                h = this.text.charAt(f);
                                                if ("(" === h) {
                                                    g = c.substr(e - d + 1);
                                                    c = c.substr(0, e - d);
                                                    this.index = f;
                                                    break
                                                }
                                                if (this.isWhitespace(h)) f++;
                                                else break
                                            }
                                            d = {
                                                index: d,
                                                text: c
                                            };
                                            if (hb.hasOwnProperty(c)) d.fn = hb[c],
                                                d.literal = !0,
                                                d.constant = !0;
                                            else {
                                                var k = Dc(c, this.options, this.text);
                                                d.fn = E(function(a, c) {
                                                        return k(a, c)
                                                    },
                                                    {
                                                        assign: function(d, e) {
                                                            return ub(d, c, e, a.text, a.options)
                                                        }
                                                    })
                                            }
                                            this.tokens.push(d);
                                            g && (this.tokens.push({
                                                index: e,
                                                text: "."
                                            }), this.tokens.push({
                                                index: e + 1,
                                                text: g
                                            }))
                                        },
                                        readString: function(a) {
                                            var c = this.index;
                                            this.index++;
                                            for (var d = "",
                                                     e = a,
                                                     f = !1; this.index < this.text.length;) {
                                                var g = this.text.charAt(this.index),
                                                    e = e + g;
                                                if (f)"u" === g ? (f = this.text.substring(this.index + 1, this.index + 5), f.match(/[\da-f]{4}/i) || this.throwError("Invalid unicode escape [\\u" + f + "]"), this.index += 4, d += String.fromCharCode(parseInt(f, 16))) : d += Ue[g] || g,
                                                    f = !1;
                                                else if ("\\" === g) f = !0;
                                                else {
                                                    if (g === a) {
                                                        this.index++;
                                                        this.tokens.push({
                                                            index: c,
                                                            text: e,
                                                            string: d,
                                                            literal: !0,
                                                            constant: !0,
                                                            fn: function() {
                                                                return d
                                                            }
                                                        });
                                                        return
                                                    }
                                                    d += g
                                                }
                                                this.index++
                                            }
                                            this.throwError("Unterminated quote", c)
                                        }
                                    };
                                    var gb = function(a, c, d) {
                                        this.lexer = a;
                                        this.$filter = c;
                                        this.options = d
                                    };
                                    gb.ZERO = E(function() {
                                            return 0
                                        },
                                        {
                                            constant: !0
                                        });
                                    gb.prototype = {
                                        constructor: gb,
                                        parse: function(a) {
                                            this.text = a;
                                            this.tokens = this.lexer.lex(a);
                                            a = this.statements();
                                            0 !== this.tokens.length && this.throwError("is an unexpected token", this.tokens[0]);
                                            a.literal = !!a.literal;
                                            a.constant = !!a.constant;
                                            return a
                                        },
                                        primary: function() {
                                            var a;
                                            if (this.expect("(")) a = this.filterChain(),
                                                this.consume(")");
                                            else if (this.expect("[")) a = this.arrayDeclaration();
                                            else if (this.expect("{")) a = this.object();
                                            else {
                                                var c = this.expect(); (a = c.fn) || this.throwError("not a primary expression", c);
                                                a.literal = !!c.literal;
                                                a.constant = !!c.constant
                                            }
                                            for (var d; c = this.expect("(", "[", ".");)"(" === c.text ? (a = this.functionCall(a, d), d = null) : "[" === c.text ? (d = a, a = this.objectIndex(a)) : "." === c.text ? (d = a, a = this.fieldAccess(a)) : this.throwError("IMPOSSIBLE");
                                            return a
                                        },
                                        throwError: function(a, c) {
                                            throw la("syntax", c.text, a, c.index + 1, this.text, this.text.substring(c.index));
                                        },
                                        peekToken: function() {
                                            if (0 === this.tokens.length) throw la("ueoe", this.text);
                                            return this.tokens[0]
                                        },
                                        peek: function(a, c, d, e) {
                                            if (0 < this.tokens.length) {
                                                var f = this.tokens[0],
                                                    g = f.text;
                                                if (g === a || g === c || g === d || g === e || !(a || c || d || e)) return f
                                            }
                                            return ! 1
                                        },
                                        expect: function(a, c, d, e) {
                                            return (a = this.peek(a, c, d, e)) ? (this.tokens.shift(), a) : !1
                                        },
                                        consume: function(a) {
                                            this.expect(a) || this.throwError("is unexpected, expecting [" + a + "]", this.peek())
                                        },
                                        unaryFn: function(a, c) {
                                            return E(function(d, e) {
                                                    return a(d, e, c)
                                                },
                                                {
                                                    constant: c.constant
                                                })
                                        },
                                        ternaryFn: function(a, c, d) {
                                            return E(function(e, f) {
                                                    return a(e, f) ? c(e, f) : d(e, f)
                                                },
                                                {
                                                    constant: a.constant && c.constant && d.constant
                                                })
                                        },
                                        binaryFn: function(a, c, d) {
                                            return E(function(e, f) {
                                                    return c(e, f, a, d)
                                                },
                                                {
                                                    constant: a.constant && d.constant
                                                })
                                        },
                                        statements: function() {
                                            for (var a = [];;) if (0 < this.tokens.length && !this.peek("}", ")", ";", "]") && a.push(this.filterChain()), !this.expect(";")) return 1 === a.length ? a[0] : function(c, d) {
                                                for (var e, f = 0; f < a.length; f++) {
                                                    var g = a[f];
                                                    g && (e = g(c, d))
                                                }
                                                return e
                                            }
                                        },
                                        filterChain: function() {
                                            for (var a = this.expression(), c;;) if (c = this.expect("|")) a = this.binaryFn(a, c.fn, this.filter());
                                            else return a
                                        },
                                        filter: function() {
                                            for (var a = this.expect(), c = this.$filter(a.text), d = [];;) if (a = this.expect(":")) d.push(this.expression());
                                            else {
                                                var e = function(a, e, h) {
                                                    h = [h];
                                                    for (var k = 0; k < d.length; k++) h.push(d[k](a, e));
                                                    return c.apply(a, h)
                                                };
                                                return function() {
                                                    return e
                                                }
                                            }
                                        },
                                        expression: function() {
                                            return this.assignment()
                                        },
                                        assignment: function() {
                                            var a = this.ternary(),
                                                c,
                                                d;
                                            return (d = this.expect("=")) ? (a.assign || this.throwError("implies assignment but [" + this.text.substring(0, d.index) + "] can not be assigned to", d), c = this.ternary(),
                                                function(d, f) {
                                                    return a.assign(d, c(d, f), f)
                                                }) : a
                                        },
                                        ternary: function() {
                                            var a = this.logicalOR(),
                                                c,
                                                d;
                                            if (this.expect("?")) {
                                                c = this.assignment();
                                                if (d = this.expect(":")) return this.ternaryFn(a, c, this.assignment());
                                                this.throwError("expected :", d)
                                            } else return a
                                        },
                                        logicalOR: function() {
                                            for (var a = this.logicalAND(), c;;) if (c = this.expect("||")) a = this.binaryFn(a, c.fn, this.logicalAND());
                                            else return a
                                        },
                                        logicalAND: function() {
                                            var a = this.equality(),
                                                c;
                                            if (c = this.expect("&&")) a = this.binaryFn(a, c.fn, this.logicalAND());
                                            return a
                                        },
                                        equality: function() {
                                            var a = this.relational(),
                                                c;
                                            if (c = this.expect("==", "!=", "===", "!==")) a = this.binaryFn(a, c.fn, this.equality());
                                            return a
                                        },
                                        relational: function() {
                                            var a = this.additive(),
                                                c;
                                            if (c = this.expect("<", ">", "<=", ">=")) a = this.binaryFn(a, c.fn, this.relational());
                                            return a
                                        },
                                        additive: function() {
                                            for (var a = this.multiplicative(), c; c = this.expect("+", "-");) a = this.binaryFn(a, c.fn, this.multiplicative());
                                            return a
                                        },
                                        multiplicative: function() {
                                            for (var a = this.unary(), c; c = this.expect("*", "/", "%");) a = this.binaryFn(a, c.fn, this.unary());
                                            return a
                                        },
                                        unary: function() {
                                            var a;
                                            return this.expect("+") ? this.primary() : (a = this.expect("-")) ? this.binaryFn(gb.ZERO, a.fn, this.unary()) : (a = this.expect("!")) ? this.unaryFn(a.fn, this.unary()) : this.primary()
                                        },
                                        fieldAccess: function(a) {
                                            var c = this,
                                                d = this.expect().text,
                                                e = Dc(d, this.options, this.text);
                                            return E(function(c, d, h) {
                                                    return e(h || a(c, d))
                                                },
                                                {
                                                    assign: function(e, g, h) { (h = a(e, h)) || a.assign(e, h = {});
                                                        return ub(h, d, g, c.text, c.options)
                                                    }
                                                })
                                        },
                                        objectIndex: function(a) {
                                            var c = this,
                                                d = this.expression();
                                            this.consume("]");
                                            return E(function(e, f) {
                                                    var g = a(e, f),
                                                        h = d(e, f),
                                                        k;
                                                    ka(h, c.text);
                                                    if (!g) return u; (g = ma(g[h], c.text)) && (g.then && c.options.unwrapPromises) && (k = g, "$$v" in g || (k.$$v = u, k.then(function(a) {
                                                        k.$$v = a
                                                    })), g = g.$$v);
                                                    return g
                                                },
                                                {
                                                    assign: function(e, f, g) {
                                                        var h = ka(d(e, g), c.text); (g = ma(a(e, g), c.text)) || a.assign(e, g = {});
                                                        return g[h] = f
                                                    }
                                                })
                                        },
                                        functionCall: function(a, c) {
                                            var d = [];
                                            if (")" !== this.peekToken().text) {
                                                do d.push(this.expression());
                                                while (this.expect(","))
                                            }
                                            this.consume(")");
                                            var e = this;
                                            return function(f, g) {
                                                for (var h = [], k = c ? c(f, g) : f, m = 0; m < d.length; m++) h.push(ma(d[m](f, g), e.text));
                                                m = a(f, g, k) || v;
                                                ma(k, e.text);
                                                var l = e.text;
                                                if (m) {
                                                    if (m.constructor === m) throw la("isecfn", l);
                                                    if (m === Se || m === Te || Pc && m === Pc) throw la("isecff", l);
                                                }
                                                h = m.apply ? m.apply(k, h) : m(h[0], h[1], h[2], h[3], h[4]);
                                                return ma(h, e.text)
                                            }
                                        },
                                        arrayDeclaration: function() {
                                            var a = [],
                                                c = !0;
                                            if ("]" !== this.peekToken().text) {
                                                do {
                                                    if (this.peek("]")) break;
                                                    var d = this.expression();
                                                    a.push(d);
                                                    d.constant || (c = !1)
                                                } while ( this . expect (","))
                                            }
                                            this.consume("]");
                                            return E(function(c, d) {
                                                    for (var g = [], h = 0; h < a.length; h++) g.push(a[h](c, d));
                                                    return g
                                                },
                                                {
                                                    literal: !0,
                                                    constant: c
                                                })
                                        },
                                        object: function() {
                                            var a = [],
                                                c = !0;
                                            if ("}" !== this.peekToken().text) {
                                                do {
                                                    if (this.peek("}")) break;
                                                    var d = this.expect(), d = d.string || d.text;
                                                    this.consume(":");
                                                    var e = this.expression();
                                                    a.push({
                                                        key: d,
                                                        value: e
                                                    });
                                                    e.constant || (c = !1)
                                                } while ( this . expect (","))
                                            }
                                            this.consume("}");
                                            return E(function(c, d) {
                                                    for (var e = {},
                                                             k = 0; k < a.length; k++) {
                                                        var m = a[k];
                                                        e[m.key] = m.value(c, d)
                                                    }
                                                    return e
                                                },
                                                {
                                                    literal: !0,
                                                    constant: c
                                                })
                                        }
                                    };
                                    var Ce = {},
                                        Be = {},
                                        za = z("$sce"),
                                        fa = {
                                            HTML: "html",
                                            CSS: "css",
                                            URL: "url",
                                            RESOURCE_URL: "resourceUrl",
                                            JS: "js"
                                        },
                                        Y = X.createElement("a"),
                                        Gc = xa(W.location.href, !0);
                                    kc.$inject = ["$provide"];
                                    Hc.$inject = ["$locale"];
                                    Jc.$inject = ["$locale"];
                                    var Mc = ".",
                                        Me = {
                                            yyyy: Z("FullYear", 4),
                                            yy: Z("FullYear", 2, 0, !0),
                                            y: Z("FullYear", 1),
                                            MMMM: vb("Month"),
                                            MMM: vb("Month", !0),
                                            MM: Z("Month", 2, 1),
                                            M: Z("Month", 1, 1),
                                            dd: Z("Date", 2),
                                            d: Z("Date", 1),
                                            HH: Z("Hours", 2),
                                            H: Z("Hours", 1),
                                            hh: Z("Hours", 2, -12),
                                            h: Z("Hours", 1, -12),
                                            mm: Z("Minutes", 2),
                                            m: Z("Minutes", 1),
                                            ss: Z("Seconds", 2),
                                            s: Z("Seconds", 1),
                                            sss: Z("Milliseconds", 3),
                                            EEEE: vb("Day"),
                                            EEE: vb("Day", !0),
                                            a: function(a, c) {
                                                return 12 > a.getHours() ? c.AMPMS[0] : c.AMPMS[1]
                                            },
                                            Z: function(a) {
                                                a = -1 * a.getTimezoneOffset();
                                                return a = (0 <= a ? "+": "") + (Vb(Math[0 < a ? "floor": "ceil"](a / 60), 2) + Vb(Math.abs(a % 60), 2))
                                            }
                                        },
                                        Le = /((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,
                                        Ke = /^\-?\d+$/;
                                    Ic.$inject = ["$locale"];
                                    var Ie = aa(x),
                                        Je = aa(La);
                                    Kc.$inject = ["$parse"];
                                    var cd = aa({
                                            restrict: "E",
                                            compile: function(a, c) {
                                                8 >= R && (c.href || c.name || c.$set("href", ""), a.append(X.createComment("IE fix")));
                                                if (!c.href && !c.xlinkHref && !c.name) return function(a, c) {
                                                    var f = "[object SVGAnimatedString]" === Ba.call(c.prop("href")) ? "xlink:href": "href";
                                                    c.on("click",
                                                        function(a) {
                                                            c.attr(f) || a.preventDefault()
                                                        })
                                                }
                                            }
                                        }),
                                        Fb = {};
                                    r(rb,
                                        function(a, c) {
                                            if ("multiple" != a) {
                                                var d = qa("ng-" + c);
                                                Fb[d] = function() {
                                                    return {
                                                        priority: 100,
                                                        link: function(a, f, g) {
                                                            a.$watch(g[d],
                                                                function(a) {
                                                                    g.$set(c, !!a)
                                                                })
                                                        }
                                                    }
                                                }
                                            }
                                        });
                                    r(["src", "srcset", "href"],
                                        function(a) {
                                            var c = qa("ng-" + a);
                                            Fb[c] = function() {
                                                return {
                                                    priority: 99,
                                                    link: function(d, e, f) {
                                                        var g = a,
                                                            h = a;
                                                        "href" === a && "[object SVGAnimatedString]" === Ba.call(e.prop("href")) && (h = "xlinkHref", f.$attr[h] = "xlink:href", g = null);
                                                        f.$observe(c,
                                                            function(c) {
                                                                c ? (f.$set(h, c), R && g && e.prop(g, f[h])) : "href" === a && f.$set(h, null)
                                                            })
                                                    }
                                                }
                                            }
                                        });
                                    var yb = {
                                        $addControl: v,
                                        $removeControl: v,
                                        $setValidity: v,
                                        $setDirty: v,
                                        $setPristine: v
                                    };
                                    Nc.$inject = ["$element", "$attrs", "$scope", "$animate"];
                                    var Qc = function(a) {
                                            return ["$timeout",
                                                function(c) {
                                                    return {
                                                        name: "form",
                                                        restrict: a ? "EAC": "E",
                                                        controller: Nc,
                                                        compile: function() {
                                                            return {
                                                                pre: function(a, e, f, g) {
                                                                    if (!f.action) {
                                                                        var h = function(a) {
                                                                            a.preventDefault ? a.preventDefault() : a.returnValue = !1
                                                                        };
                                                                        sb(e[0], "submit", h);
                                                                        e.on("$destroy",
                                                                            function() {
                                                                                c(function() {
                                                                                        bb(e[0], "submit", h)
                                                                                    },
                                                                                    0, !1)
                                                                            })
                                                                    }
                                                                    var k = e.parent().controller("form"),
                                                                        m = f.name || f.ngForm;
                                                                    m && ub(a, m, g, m);
                                                                    if (k) e.on("$destroy",
                                                                        function() {
                                                                            k.$removeControl(g);
                                                                            m && ub(a, m, u, m);
                                                                            E(g, yb)
                                                                        })
                                                                }
                                                            }
                                                        }
                                                    }
                                                }]
                                        },
                                        dd = Qc(),
                                        qd = Qc(!0),
                                        Ve = /^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,
                                        We = /^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,
                                        Xe = /^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,
                                        Rc = {
                                            text: Ab,
                                            number: function(a, c, d, e, f, g) {
                                                Ab(a, c, d, e, f, g);
                                                e.$parsers.push(function(a) {
                                                    var c = e.$isEmpty(a);
                                                    if (c || Xe.test(a)) return e.$setValidity("number", !0),
                                                        "" === a ? null: c ? a: parseFloat(a);
                                                    e.$setValidity("number", !1);
                                                    return u
                                                });
                                                Ne(e, "number", Ye, null, e.$$validityState);
                                                e.$formatters.push(function(a) {
                                                    return e.$isEmpty(a) ? "": "" + a
                                                });
                                                d.min && (a = function(a) {
                                                    var c = parseFloat(d.min);
                                                    return ua(e, "min", e.$isEmpty(a) || a >= c, a)
                                                },
                                                    e.$parsers.push(a), e.$formatters.push(a));
                                                d.max && (a = function(a) {
                                                    var c = parseFloat(d.max);
                                                    return ua(e, "max", e.$isEmpty(a) || a <= c, a)
                                                },
                                                    e.$parsers.push(a), e.$formatters.push(a));
                                                e.$formatters.push(function(a) {
                                                    return ua(e, "number", e.$isEmpty(a) || jb(a), a)
                                                })
                                            },
                                            url: function(a, c, d, e, f, g) {
                                                Ab(a, c, d, e, f, g);
                                                a = function(a) {
                                                    return ua(e, "url", e.$isEmpty(a) || Ve.test(a), a)
                                                };
                                                e.$formatters.push(a);
                                                e.$parsers.push(a)
                                            },
                                            email: function(a, c, d, e, f, g) {
                                                Ab(a, c, d, e, f, g);
                                                a = function(a) {
                                                    return ua(e, "email", e.$isEmpty(a) || We.test(a), a)
                                                };
                                                e.$formatters.push(a);
                                                e.$parsers.push(a)
                                            },
                                            radio: function(a, c, d, e) {
                                                F(d.name) && c.attr("name", ib());
                                                c.on("click",
                                                    function() {
                                                        c[0].checked && a.$apply(function() {
                                                            e.$setViewValue(d.value)
                                                        })
                                                    });
                                                e.$render = function() {
                                                    c[0].checked = d.value == e.$viewValue
                                                };
                                                d.$observe("value", e.$render)
                                            },
                                            checkbox: function(a, c, d, e) {
                                                var f = d.ngTrueValue,
                                                    g = d.ngFalseValue;
                                                G(f) || (f = !0);
                                                G(g) || (g = !1);
                                                c.on("click",
                                                    function() {
                                                        a.$apply(function() {
                                                            e.$setViewValue(c[0].checked)
                                                        })
                                                    });
                                                e.$render = function() {
                                                    c[0].checked = e.$viewValue
                                                };
                                                e.$isEmpty = function(a) {
                                                    return a !== f
                                                };
                                                e.$formatters.push(function(a) {
                                                    return a === f
                                                });
                                                e.$parsers.push(function(a) {
                                                    return a ? f: g
                                                })
                                            },
                                            hidden: v,
                                            button: v,
                                            submit: v,
                                            reset: v,
                                            file: v
                                        },
                                        Ye = ["badInput"],
                                        hc = ["$browser", "$sniffer",
                                            function(a, c) {
                                                return {
                                                    restrict: "E",
                                                    require: "?ngModel",
                                                    link: function(d, e, f, g) {
                                                        g && (Rc[x(f.type)] || Rc.text)(d, e, f, g, c, a)
                                                    }
                                                }
                                            }],
                                        wb = "ng-valid",
                                        xb = "ng-invalid",
                                        Ra = "ng-pristine",
                                        zb = "ng-dirty",
                                        Ze = ["$scope", "$exceptionHandler", "$attrs", "$element", "$parse", "$animate",
                                            function(a, c, d, e, f, g) {
                                                function h(a, c) {
                                                    c = c ? "-" + nb(c, "-") : "";
                                                    g.removeClass(e, (a ? xb: wb) + c);
                                                    g.addClass(e, (a ? wb: xb) + c)
                                                }
                                                this.$modelValue = this.$viewValue = Number.NaN;
                                                this.$parsers = [];
                                                this.$formatters = [];
                                                this.$viewChangeListeners = [];
                                                this.$pristine = !0;
                                                this.$dirty = !1;
                                                this.$valid = !0;
                                                this.$invalid = !1;
                                                this.$name = d.name;
                                                var k = f(d.ngModel),
                                                    m = k.assign;
                                                if (!m) throw z("ngModel")("nonassign", d.ngModel, ia(e));
                                                this.$render = v;
                                                this.$isEmpty = function(a) {
                                                    return F(a) || "" === a || null === a || a !== a
                                                };
                                                var l = e.inheritedData("$formController") || yb,
                                                    n = 0,
                                                    q = this.$error = {};
                                                e.addClass(Ra);
                                                h(!0);
                                                this.$setValidity = function(a, c) {
                                                    q[a] !== !c && (c ? (q[a] && n--, n || (h(!0), this.$valid = !0, this.$invalid = !1)) : (h(!1), this.$invalid = !0, this.$valid = !1, n++), q[a] = !c, h(c, a), l.$setValidity(a, c, this))
                                                };
                                                this.$setPristine = function() {
                                                    this.$dirty = !1;
                                                    this.$pristine = !0;
                                                    g.removeClass(e, zb);
                                                    g.addClass(e, Ra)
                                                };
                                                this.$setViewValue = function(d) {
                                                    this.$viewValue = d;
                                                    this.$pristine && (this.$dirty = !0, this.$pristine = !1, g.removeClass(e, Ra), g.addClass(e, zb), l.$setDirty());
                                                    r(this.$parsers,
                                                        function(a) {
                                                            d = a(d)
                                                        });
                                                    this.$modelValue !== d && (this.$modelValue = d, m(a, d), r(this.$viewChangeListeners,
                                                        function(a) {
                                                            try {
                                                                a()
                                                            } catch(d) {
                                                                c(d)
                                                            }
                                                        }))
                                                };
                                                var p = this;
                                                a.$watch(function() {
                                                    var c = k(a);
                                                    if (p.$modelValue !== c) {
                                                        var d = p.$formatters,
                                                            e = d.length;
                                                        for (p.$modelValue = c; e--;) c = d[e](c);
                                                        p.$viewValue !== c && (p.$viewValue = c, p.$render())
                                                    }
                                                    return c
                                                })
                                            }],
                                        Fd = function() {
                                            return {
                                                require: ["ngModel", "^?form"],
                                                controller: Ze,
                                                link: function(a, c, d, e) {
                                                    var f = e[0],
                                                        g = e[1] || yb;
                                                    g.$addControl(f);
                                                    a.$on("$destroy",
                                                        function() {
                                                            g.$removeControl(f)
                                                        })
                                                }
                                            }
                                        },
                                        Hd = aa({
                                            require: "ngModel",
                                            link: function(a, c, d, e) {
                                                e.$viewChangeListeners.push(function() {
                                                    a.$eval(d.ngChange)
                                                })
                                            }
                                        }),
                                        ic = function() {
                                            return {
                                                require: "?ngModel",
                                                link: function(a, c, d, e) {
                                                    if (e) {
                                                        d.required = !0;
                                                        var f = function(a) {
                                                            if (d.required && e.$isEmpty(a)) e.$setValidity("required", !1);
                                                            else return e.$setValidity("required", !0),
                                                                a
                                                        };
                                                        e.$formatters.push(f);
                                                        e.$parsers.unshift(f);
                                                        d.$observe("required",
                                                            function() {
                                                                f(e.$viewValue)
                                                            })
                                                    }
                                                }
                                            }
                                        },
                                        Gd = function() {
                                            return {
                                                require: "ngModel",
                                                link: function(a, c, d, e) {
                                                    var f = (a = /\/(.*)\//.exec(d.ngList)) && RegExp(a[1]) || d.ngList || ",";
                                                    e.$parsers.push(function(a) {
                                                        if (!F(a)) {
                                                            var c = [];
                                                            a && r(a.split(f),
                                                                function(a) {
                                                                    a && c.push($(a))
                                                                });
                                                            return c
                                                        }
                                                    });
                                                    e.$formatters.push(function(a) {
                                                        return L(a) ? a.join(", ") : u
                                                    });
                                                    e.$isEmpty = function(a) {
                                                        return ! a || !a.length
                                                    }
                                                }
                                            }
                                        },
                                        $e = /^(true|false|\d+)$/,
                                        Id = function() {
                                            return {
                                                priority: 100,
                                                compile: function(a, c) {
                                                    return $e.test(c.ngValue) ?
                                                        function(a, c, f) {
                                                            f.$set("value", a.$eval(f.ngValue))
                                                        }: function(a, c, f) {
                                                            a.$watch(f.ngValue,
                                                                function(a) {
                                                                    f.$set("value", a)
                                                                })
                                                        }
                                                }
                                            }
                                        },
                                        id = Aa({
                                            compile: function(a) {
                                                a.addClass("ng-binding");
                                                return function(a, d, e) {
                                                    d.data("$binding", e.ngBind);
                                                    a.$watch(e.ngBind,
                                                        function(a) {
                                                            d.text(a == u ? "": a)
                                                        })
                                                }
                                            }
                                        }),
                                        kd = ["$interpolate",
                                            function(a) {
                                                return function(c, d, e) {
                                                    c = a(d.attr(e.$attr.ngBindTemplate));
                                                    d.addClass("ng-binding").data("$binding", c);
                                                    e.$observe("ngBindTemplate",
                                                        function(a) {
                                                            d.text(a)
                                                        })
                                                }
                                            }],
                                        jd = ["$sce", "$parse",
                                            function(a, c) {
                                                return {
                                                    compile: function(d) {
                                                        d.addClass("ng-binding");
                                                        return function(d, f, g) {
                                                            f.data("$binding", g.ngBindHtml);
                                                            var h = c(g.ngBindHtml);
                                                            d.$watch(function() {
                                                                    return (h(d) || "").toString()
                                                                },
                                                                function(c) {
                                                                    f.html(a.getTrustedHtml(h(d)) || "")
                                                                })
                                                        }
                                                    }
                                                }
                                            }],
                                        ld = Wb("", !0),
                                        nd = Wb("Odd", 0),
                                        md = Wb("Even", 1),
                                        od = Aa({
                                            compile: function(a, c) {
                                                c.$set("ngCloak", u);
                                                a.removeClass("ng-cloak")
                                            }
                                        }),
                                        pd = [function() {
                                            return {
                                                scope: !0,
                                                controller: "@",
                                                priority: 500
                                            }
                                        }],
                                        jc = {},
                                        af = {
                                            blur: !0,
                                            focus: !0
                                        };
                                    r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),
                                        function(a) {
                                            var c = qa("ng-" + a);
                                            jc[c] = ["$parse", "$rootScope",
                                                function(d, e) {
                                                    return {
                                                        compile: function(f, g) {
                                                            var h = d(g[c], !0);
                                                            return function(c, d) {
                                                                d.on(a,
                                                                    function(d) {
                                                                        var f = function() {
                                                                            h(c, {
                                                                                $event: d
                                                                            })
                                                                        };
                                                                        af[a] && e.$$phase ? c.$evalAsync(f) : c.$apply(f)
                                                                    })
                                                            }
                                                        }
                                                    }
                                                }]
                                        });
                                    var sd = ["$animate",
                                            function(a) {
                                                return {
                                                    transclude: "element",
                                                    priority: 600,
                                                    terminal: !0,
                                                    restrict: "A",
                                                    $$tlb: !0,
                                                    link: function(c, d, e, f, g) {
                                                        var h, k, m;
                                                        c.$watch(e.ngIf,
                                                            function(f) {
                                                                Wa(f) ? k || (k = c.$new(), g(k,
                                                                    function(c) {
                                                                        c[c.length++] = X.createComment(" end ngIf: " + e.ngIf + " ");
                                                                        h = {
                                                                            clone: c
                                                                        };
                                                                        a.enter(c, d.parent(), d)
                                                                    })) : (m && (m.remove(), m = null), k && (k.$destroy(), k = null), h && (m = Eb(h.clone), a.leave(m,
                                                                    function() {
                                                                        m = null
                                                                    }), h = null))
                                                            })
                                                    }
                                                }
                                            }],
                                        td = ["$http", "$templateCache", "$anchorScroll", "$animate", "$sce",
                                            function(a, c, d, e, f) {
                                                return {
                                                    restrict: "ECA",
                                                    priority: 400,
                                                    terminal: !0,
                                                    transclude: "element",
                                                    controller: Xa.noop,
                                                    compile: function(g, h) {
                                                        var k = h.ngInclude || h.src,
                                                            m = h.onload || "",
                                                            l = h.autoscroll;
                                                        return function(g, h, p, r, J) {
                                                            var w = 0,
                                                                t, y, u, B = function() {
                                                                    y && (y.remove(), y = null);
                                                                    t && (t.$destroy(), t = null);
                                                                    u && (e.leave(u,
                                                                        function() {
                                                                            y = null
                                                                        }), y = u, u = null)
                                                                };
                                                            g.$watch(f.parseAsResourceUrl(k),
                                                                function(f) {
                                                                    var k = function() { ! D(l) || l && !g.$eval(l) || d()
                                                                        },
                                                                        p = ++w;
                                                                    f ? (a.get(f, {
                                                                        cache: c
                                                                    }).success(function(a) {
                                                                        if (p === w) {
                                                                            var c = g.$new();
                                                                            r.template = a;
                                                                            a = J(c,
                                                                                function(a) {
                                                                                    B();
                                                                                    e.enter(a, null, h, k)
                                                                                });
                                                                            t = c;
                                                                            u = a;
                                                                            t.$emit("$includeContentLoaded");
                                                                            g.$eval(m)
                                                                        }
                                                                    }).error(function() {
                                                                        p === w && B()
                                                                    }), g.$emit("$includeContentRequested")) : (B(), r.template = null)
                                                                })
                                                        }
                                                    }
                                                }
                                            }],
                                        Jd = ["$compile",
                                            function(a) {
                                                return {
                                                    restrict: "ECA",
                                                    priority: -400,
                                                    require: "ngInclude",
                                                    link: function(c, d, e, f) {
                                                        d.html(f.template);
                                                        a(d.contents())(c)
                                                    }
                                                }
                                            }],
                                        ud = Aa({
                                            priority: 450,
                                            compile: function() {
                                                return {
                                                    pre: function(a, c, d) {
                                                        a.$eval(d.ngInit)
                                                    }
                                                }
                                            }
                                        }),
                                        vd = Aa({
                                            terminal: !0,
                                            priority: 1E3
                                        }),
                                        wd = ["$locale", "$interpolate",
                                            function(a, c) {
                                                var d = /{}/g;
                                                return {
                                                    restrict: "EA",
                                                    link: function(e, f, g) {
                                                        var h = g.count,
                                                            k = g.$attr.when && f.attr(g.$attr.when),
                                                            m = g.offset || 0,
                                                            l = e.$eval(k) || {},
                                                            n = {},
                                                            q = c.startSymbol(),
                                                            p = c.endSymbol(),
                                                            s = /^when(Minus)?(.+)$/;
                                                        r(g,
                                                            function(a, c) {
                                                                s.test(c) && (l[x(c.replace("when", "").replace("Minus", "-"))] = f.attr(g.$attr[c]))
                                                            });
                                                        r(l,
                                                            function(a, e) {
                                                                n[e] = c(a.replace(d, q + h + "-" + m + p))
                                                            });
                                                        e.$watch(function() {
                                                                var c = parseFloat(e.$eval(h));
                                                                if (isNaN(c)) return "";
                                                                c in l || (c = a.pluralCat(c - m));
                                                                return n[c](e, f, !0)
                                                            },
                                                            function(a) {
                                                                f.text(a)
                                                            })
                                                    }
                                                }
                                            }],
                                        xd = ["$parse", "$animate",
                                            function(a, c) {
                                                var d = z("ngRepeat");
                                                return {
                                                    transclude: "element",
                                                    priority: 1E3,
                                                    terminal: !0,
                                                    $$tlb: !0,
                                                    link: function(e, f, g, h, k) {
                                                        var m = g.ngRepeat,
                                                            l = m.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),
                                                            n,
                                                            q,
                                                            p,
                                                            s,
                                                            u,
                                                            w,
                                                            t = {
                                                                $id: Na
                                                            };
                                                        if (!l) throw d("iexp", m);
                                                        g = l[1];
                                                        h = l[2]; (l = l[3]) ? (n = a(l), q = function(a, c, d) {
                                                            w && (t[w] = a);
                                                            t[u] = c;
                                                            t.$index = d;
                                                            return n(e, t)
                                                        }) : (p = function(a, c) {
                                                            return Na(c)
                                                        },
                                                            s = function(a) {
                                                                return a
                                                            });
                                                        l = g.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/);
                                                        if (!l) throw d("iidexp", g);
                                                        u = l[3] || l[1];
                                                        w = l[2];
                                                        var y = {};
                                                        e.$watchCollection(h,
                                                            function(a) {
                                                                var g, h, l = f[0],
                                                                    n,
                                                                    t = {},
                                                                    D,
                                                                    C,
                                                                    I,
                                                                    x,
                                                                    G,
                                                                    v,
                                                                    z,
                                                                    F = [];
                                                                if (Sa(a)) v = a,
                                                                    G = q || p;
                                                                else {
                                                                    G = q || s;
                                                                    v = [];
                                                                    for (I in a) a.hasOwnProperty(I) && "$" != I.charAt(0) && v.push(I);
                                                                    v.sort()
                                                                }
                                                                D = v.length;
                                                                h = F.length = v.length;
                                                                for (g = 0; g < h; g++) if (I = a === v ? g: v[g], x = a[I], n = G(I, x, g), Ea(n, "`track by` id"), y.hasOwnProperty(n)) z = y[n],
                                                                    delete y[n],
                                                                    t[n] = z,
                                                                    F[g] = z;
                                                                else {
                                                                    if (t.hasOwnProperty(n)) throw r(F,
                                                                        function(a) {
                                                                            a && a.scope && (y[a.id] = a)
                                                                        }),
                                                                        d("dupes", m, n, oa(x));
                                                                    F[g] = {
                                                                        id: n
                                                                    };
                                                                    t[n] = !1
                                                                }
                                                                for (I in y) y.hasOwnProperty(I) && (z = y[I], g = Eb(z.clone), c.leave(g), r(g,
                                                                    function(a) {
                                                                        a.$$NG_REMOVED = !0
                                                                    }), z.scope.$destroy());
                                                                g = 0;
                                                                for (h = v.length; g < h; g++) {
                                                                    I = a === v ? g: v[g];
                                                                    x = a[I];
                                                                    z = F[g];
                                                                    F[g - 1] && (l = F[g - 1].clone[F[g - 1].clone.length - 1]);
                                                                    if (z.scope) {
                                                                        C = z.scope;
                                                                        n = l;
                                                                        do n = n.nextSibling;
                                                                        while (n && n.$$NG_REMOVED);
                                                                        z.clone[0] != n && c.move(Eb(z.clone), null, A(l));
                                                                        l = z.clone[z.clone.length - 1]
                                                                    } else C = e.$new();
                                                                    C[u] = x;
                                                                    w && (C[w] = I);
                                                                    C.$index = g;
                                                                    C.$first = 0 === g;
                                                                    C.$last = g === D - 1;
                                                                    C.$middle = !(C.$first || C.$last);
                                                                    C.$odd = !(C.$even = 0 === (g & 1));
                                                                    z.scope || k(C,
                                                                        function(a) {
                                                                            a[a.length++] = X.createComment(" end ngRepeat: " + m + " ");
                                                                            c.enter(a, null, A(l));
                                                                            l = a;
                                                                            z.scope = C;
                                                                            z.clone = a;
                                                                            t[z.id] = z
                                                                        })
                                                                }
                                                                y = t
                                                            })
                                                    }
                                                }
                                            }],
                                        yd = ["$animate",
                                            function(a) {
                                                return function(c, d, e) {
                                                    c.$watch(e.ngShow,
                                                        function(c) {
                                                            a[Wa(c) ? "removeClass": "addClass"](d, "ng-hide")
                                                        })
                                                }
                                            }],
                                        rd = ["$animate",
                                            function(a) {
                                                return function(c, d, e) {
                                                    c.$watch(e.ngHide,
                                                        function(c) {
                                                            a[Wa(c) ? "addClass": "removeClass"](d, "ng-hide")
                                                        })
                                                }
                                            }],
                                        zd = Aa(function(a, c, d) {
                                            a.$watch(d.ngStyle,
                                                function(a, d) {
                                                    d && a !== d && r(d,
                                                        function(a, d) {
                                                            c.css(d, "")
                                                        });
                                                    a && c.css(a)
                                                },
                                                !0)
                                        }),
                                        Ad = ["$animate",
                                            function(a) {
                                                return {
                                                    restrict: "EA",
                                                    require: "ngSwitch",
                                                    controller: ["$scope",
                                                        function() {
                                                            this.cases = {}
                                                        }],
                                                    link: function(c, d, e, f) {
                                                        var g = [],
                                                            h = [],
                                                            k = [],
                                                            m = [];
                                                        c.$watch(e.ngSwitch || e.on,
                                                            function(d) {
                                                                var n, q;
                                                                n = 0;
                                                                for (q = k.length; n < q; ++n) k[n].remove();
                                                                n = k.length = 0;
                                                                for (q = m.length; n < q; ++n) {
                                                                    var p = h[n];
                                                                    m[n].$destroy();
                                                                    k[n] = p;
                                                                    a.leave(p,
                                                                        function() {
                                                                            k.splice(n, 1)
                                                                        })
                                                                }
                                                                h.length = 0;
                                                                m.length = 0;
                                                                if (g = f.cases["!" + d] || f.cases["?"]) c.$eval(e.change),
                                                                    r(g,
                                                                        function(d) {
                                                                            var e = c.$new();
                                                                            m.push(e);
                                                                            d.transclude(e,
                                                                                function(c) {
                                                                                    var e = d.element;
                                                                                    h.push(c);
                                                                                    a.enter(c, e.parent(), e)
                                                                                })
                                                                        })
                                                            })
                                                    }
                                                }
                                            }],
                                        Bd = Aa({
                                            transclude: "element",
                                            priority: 800,
                                            require: "^ngSwitch",
                                            link: function(a, c, d, e, f) {
                                                e.cases["!" + d.ngSwitchWhen] = e.cases["!" + d.ngSwitchWhen] || [];
                                                e.cases["!" + d.ngSwitchWhen].push({
                                                    transclude: f,
                                                    element: c
                                                })
                                            }
                                        }),
                                        Cd = Aa({
                                            transclude: "element",
                                            priority: 800,
                                            require: "^ngSwitch",
                                            link: function(a, c, d, e, f) {
                                                e.cases["?"] = e.cases["?"] || [];
                                                e.cases["?"].push({
                                                    transclude: f,
                                                    element: c
                                                })
                                            }
                                        }),
                                        Ed = Aa({
                                            link: function(a, c, d, e, f) {
                                                if (!f) throw z("ngTransclude")("orphan", ia(c));
                                                f(function(a) {
                                                    c.empty();
                                                    c.append(a)
                                                })
                                            }
                                        }),
                                        ed = ["$templateCache",
                                            function(a) {
                                                return {
                                                    restrict: "E",
                                                    terminal: !0,
                                                    compile: function(c, d) {
                                                        "text/ng-template" == d.type && a.put(d.id, c[0].text)
                                                    }
                                                }
                                            }],
                                        bf = z("ngOptions"),
                                        Dd = aa({
                                            terminal: !0
                                        }),
                                        fd = ["$compile", "$parse",
                                            function(a, c) {
                                                var d = /^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,
                                                    e = {
                                                        $setViewValue: v
                                                    };
                                                return {
                                                    restrict: "E",
                                                    require: ["select", "?ngModel"],
                                                    controller: ["$element", "$scope", "$attrs",
                                                        function(a, c, d) {
                                                            var k = this,
                                                                m = {},
                                                                l = e,
                                                                n;
                                                            k.databound = d.ngModel;
                                                            k.init = function(a, c, d) {
                                                                l = a;
                                                                n = d
                                                            };
                                                            k.addOption = function(c) {
                                                                Ea(c, '"option value"');
                                                                m[c] = !0;
                                                                l.$viewValue == c && (a.val(c), n.parent() && n.remove())
                                                            };
                                                            k.removeOption = function(a) {
                                                                this.hasOption(a) && (delete m[a], l.$viewValue == a && this.renderUnknownOption(a))
                                                            };
                                                            k.renderUnknownOption = function(c) {
                                                                c = "? " + Na(c) + " ?";
                                                                n.val(c);
                                                                a.prepend(n);
                                                                a.val(c);
                                                                n.prop("selected", !0)
                                                            };
                                                            k.hasOption = function(a) {
                                                                return m.hasOwnProperty(a)
                                                            };
                                                            c.$on("$destroy",
                                                                function() {
                                                                    k.renderUnknownOption = v
                                                                })
                                                        }],
                                                    link: function(e, g, h, k) {
                                                        function m(a, c, d, e) {
                                                            d.$render = function() {
                                                                var a = d.$viewValue;
                                                                e.hasOption(a) ? (x.parent() && x.remove(), c.val(a), "" === a && w.prop("selected", !0)) : F(a) && w ? c.val("") : e.renderUnknownOption(a)
                                                            };
                                                            c.on("change",
                                                                function() {
                                                                    a.$apply(function() {
                                                                        x.parent() && x.remove();
                                                                        d.$setViewValue(c.val())
                                                                    })
                                                                })
                                                        }
                                                        function l(a, c, d) {
                                                            var e;
                                                            d.$render = function() {
                                                                var a = new db(d.$viewValue);
                                                                r(c.find("option"),
                                                                    function(c) {
                                                                        c.selected = D(a.get(c.value))
                                                                    })
                                                            };
                                                            a.$watch(function() {
                                                                Ca(e, d.$viewValue) || (e = ha(d.$viewValue), d.$render())
                                                            });
                                                            c.on("change",
                                                                function() {
                                                                    a.$apply(function() {
                                                                        var a = [];
                                                                        r(c.find("option"),
                                                                            function(c) {
                                                                                c.selected && a.push(c.value)
                                                                            });
                                                                        d.$setViewValue(a)
                                                                    })
                                                                })
                                                        }
                                                        function n(e, f, g) {
                                                            function h() {
                                                                var a = {
                                                                        "": []
                                                                    },
                                                                    c = [""],
                                                                    d,
                                                                    k,
                                                                    s,
                                                                    u,
                                                                    v;
                                                                s = g.$modelValue;
                                                                u = A(e) || [];
                                                                var F = n ? Xb(u) : u,
                                                                    G,
                                                                    Q,
                                                                    C;
                                                                Q = {};
                                                                C = !1;
                                                                if (p) if (k = g.$modelValue, w && L(k)) for (C = new db([]), d = {},
                                                                                                                  v = 0; v < k.length; v++) d[m] = k[v],
                                                                    C.put(w(e, d), k[v]);
                                                                else C = new db(k);
                                                                v = C;
                                                                var E, K;
                                                                for (C = 0; G = F.length, C < G; C++) {
                                                                    k = C;
                                                                    if (n) {
                                                                        k = F[C];
                                                                        if ("$" === k.charAt(0)) continue;
                                                                        Q[n] = k
                                                                    }
                                                                    Q[m] = u[k];
                                                                    d = r(e, Q) || ""; (k = a[d]) || (k = a[d] = [], c.push(d));
                                                                    p ? d = D(v.remove(w ? w(e, Q) : x(e, Q))) : (w ? (d = {},
                                                                        d[m] = s, d = w(e, d) === w(e, Q)) : d = s === x(e, Q), v = v || d);
                                                                    E = l(e, Q);
                                                                    E = D(E) ? E: "";
                                                                    k.push({
                                                                        id: w ? w(e, Q) : n ? F[C] : C,
                                                                        label: E,
                                                                        selected: d
                                                                    })
                                                                }
                                                                p || (z || null === s ? a[""].unshift({
                                                                    id: "",
                                                                    label: "",
                                                                    selected: !v
                                                                }) : v || a[""].unshift({
                                                                    id: "?",
                                                                    label: "",
                                                                    selected: !0
                                                                }));
                                                                Q = 0;
                                                                for (F = c.length; Q < F; Q++) {
                                                                    d = c[Q];
                                                                    k = a[d];
                                                                    B.length <= Q ? (s = {
                                                                        element: y.clone().attr("label", d),
                                                                        label: k.label
                                                                    },
                                                                        u = [s], B.push(u), f.append(s.element)) : (u = B[Q], s = u[0], s.label != d && s.element.attr("label", s.label = d));
                                                                    E = null;
                                                                    C = 0;
                                                                    for (G = k.length; C < G; C++) d = k[C],
                                                                        (v = u[C + 1]) ? (E = v.element, v.label !== d.label && (E.text(v.label = d.label), E.prop("label", v.label)), v.id !== d.id && E.val(v.id = d.id), E[0].selected !== d.selected && (E.prop("selected", v.selected = d.selected), R && E.prop("selected", v.selected))) : ("" === d.id && z ? K = z: (K = t.clone()).val(d.id).prop("selected", d.selected).attr("selected", d.selected).prop("label", d.label).text(d.label), u.push({
                                                                            element: K,
                                                                            label: d.label,
                                                                            id: d.id,
                                                                            selected: d.selected
                                                                        }), q.addOption(d.label, K), E ? E.after(K) : s.element.append(K), E = K);
                                                                    for (C++; u.length > C;) d = u.pop(),
                                                                        q.removeOption(d.label),
                                                                        d.element.remove()
                                                                }
                                                                for (; B.length > Q;) B.pop()[0].element.remove()
                                                            }
                                                            var k;
                                                            if (! (k = s.match(d))) throw bf("iexp", s, ia(f));
                                                            var l = c(k[2] || k[1]),
                                                                m = k[4] || k[6],
                                                                n = k[5],
                                                                r = c(k[3] || ""),
                                                                x = c(k[2] ? k[1] : m),
                                                                A = c(k[7]),
                                                                w = k[8] ? c(k[8]) : null,
                                                                B = [[{
                                                                    element: f,
                                                                    label: ""
                                                                }]];
                                                            z && (a(z)(e), z.removeClass("ng-scope"), z.remove());
                                                            f.empty();
                                                            f.on("change",
                                                                function() {
                                                                    e.$apply(function() {
                                                                        var a, c = A(e) || [],
                                                                            d = {},
                                                                            k,
                                                                            l,
                                                                            q,
                                                                            r,
                                                                            s,
                                                                            t,
                                                                            v;
                                                                        if (p) for (l = [], r = 0, t = B.length; r < t; r++) for (a = B[r], q = 1, s = a.length; q < s; q++) {
                                                                            if ((k = a[q].element)[0].selected) {
                                                                                k = k.val();
                                                                                n && (d[n] = k);
                                                                                if (w) for (v = 0; v < c.length && (d[m] = c[v], w(e, d) != k); v++);
                                                                                else d[m] = c[k];
                                                                                l.push(x(e, d))
                                                                            }
                                                                        } else if (k = f.val(), "?" == k) l = u;
                                                                        else if ("" === k) l = null;
                                                                        else if (w) for (v = 0; v < c.length; v++) {
                                                                            if (d[m] = c[v], w(e, d) == k) {
                                                                                l = x(e, d);
                                                                                break
                                                                            }
                                                                        } else d[m] = c[k],
                                                                        n && (d[n] = k),
                                                                            l = x(e, d);
                                                                        g.$setViewValue(l);
                                                                        h()
                                                                    })
                                                                });
                                                            g.$render = h;
                                                            e.$watchCollection(A, h);
                                                            e.$watchCollection(function() {
                                                                    var a = {},
                                                                        c = A(e);
                                                                    if (c) {
                                                                        for (var d = Array(c.length), f = 0, g = c.length; f < g; f++) a[m] = c[f],
                                                                            d[f] = l(e, a);
                                                                        return d
                                                                    }
                                                                },
                                                                h);
                                                            p && e.$watchCollection(function() {
                                                                    return g.$modelValue
                                                                },
                                                                h)
                                                        }
                                                        if (k[1]) {
                                                            var q = k[0];
                                                            k = k[1];
                                                            var p = h.multiple,
                                                                s = h.ngOptions,
                                                                z = !1,
                                                                w, t = A(X.createElement("option")),
                                                                y = A(X.createElement("optgroup")),
                                                                x = t.clone();
                                                            h = 0;
                                                            for (var B = g.children(), v = B.length; h < v; h++) if ("" === B[h].value) {
                                                                w = z = B.eq(h);
                                                                break
                                                            }
                                                            q.init(k, z, x);
                                                            p && (k.$isEmpty = function(a) {
                                                                return ! a || 0 === a.length
                                                            });
                                                            s ? n(e, g, k) : p ? l(e, g, k) : m(e, g, k, q)
                                                        }
                                                    }
                                                }
                                            }],
                                        hd = ["$interpolate",
                                            function(a) {
                                                var c = {
                                                    addOption: v,
                                                    removeOption: v
                                                };
                                                return {
                                                    restrict: "E",
                                                    priority: 100,
                                                    compile: function(d, e) {
                                                        if (F(e.value)) {
                                                            var f = a(d.text(), !0);
                                                            f || e.$set("value", d.text())
                                                        }
                                                        return function(a, d, e) {
                                                            var m = d.parent(),
                                                                l = m.data("$selectController") || m.parent().data("$selectController");
                                                            l && l.databound ? d.prop("selected", !1) : l = c;
                                                            f ? a.$watch(f,
                                                                function(a, c) {
                                                                    e.$set("value", a);
                                                                    a !== c && l.removeOption(c);
                                                                    l.addOption(a)
                                                                }) : l.addOption(e.value);
                                                            d.on("$destroy",
                                                                function() {
                                                                    l.removeOption(e.value)
                                                                })
                                                        }
                                                    }
                                                }
                                            }],
                                        gd = aa({
                                            restrict: "E",
                                            terminal: !0
                                        });
                                    W.angular.bootstrap ? console.log("WARNING: Tried to load angular more than once.") : ((Fa = W.jQuery) && Fa.fn.on ? (A = Fa, E(Fa.fn, {
                                        scope: Oa.scope,
                                        isolateScope: Oa.isolateScope,
                                        controller: Oa.controller,
                                        injector: Oa.injector,
                                        inheritedData: Oa.inheritedData
                                    }), Gb("remove", !0, !0, !1), Gb("empty", !1, !1, !1), Gb("html", !1, !1, !0)) : A = S, Xa.element = A, Zc(Xa), A(X).ready(function() {
                                        Wc(X, dc)
                                    }))
                                })(window, document); ! window.angular.$$csp() && window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>');
                                //# sourceMappingURL=angular.min.js.map
                                /*
 AngularJS v1.2.28
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
                                (function(n, e, A) {
                                    'use strict';
                                    function x(s, g, h) {
                                        return {
                                            restrict: "ECA",
                                            terminal: !0,
                                            priority: 400,
                                            transclude: "element",
                                            link: function(a, c, b, f, w) {
                                                function y() {
                                                    p && (p.remove(), p = null);
                                                    k && (k.$destroy(), k = null);
                                                    l && (h.leave(l,
                                                        function() {
                                                            p = null
                                                        }), p = l, l = null)
                                                }
                                                function v() {
                                                    var b = s.current && s.current.locals;
                                                    if (e.isDefined(b && b.$template)) {
                                                        var b = a.$new(),
                                                            d = s.current;
                                                        l = w(b,
                                                            function(d) {
                                                                h.enter(d, null, l || c,
                                                                    function() { ! e.isDefined(t) || t && !a.$eval(t) || g()
                                                                    });
                                                                y()
                                                            });
                                                        k = d.scope = b;
                                                        k.$emit("$viewContentLoaded");
                                                        k.$eval(u)
                                                    } else y()
                                                }
                                                var k, l, p, t = b.autoscroll,
                                                    u = b.onload || "";
                                                a.$on("$routeChangeSuccess", v);
                                                v()
                                            }
                                        }
                                    }
                                    function z(e, g, h) {
                                        return {
                                            restrict: "ECA",
                                            priority: -400,
                                            link: function(a, c) {
                                                var b = h.current,
                                                    f = b.locals;
                                                c.html(f.$template);
                                                var w = e(c.contents());
                                                b.controller && (f.$scope = a, f = g(b.controller, f), b.controllerAs && (a[b.controllerAs] = f), c.data("$ngControllerController", f), c.children().data("$ngControllerController", f));
                                                w(a)
                                            }
                                        }
                                    }
                                    n = e.module("ngRoute", ["ng"]).provider("$route",
                                        function() {
                                            function s(a, c) {
                                                return e.extend(new(e.extend(function() {},
                                                    {
                                                        prototype: a
                                                    })), c)
                                            }
                                            function g(a, e) {
                                                var b = e.caseInsensitiveMatch,
                                                    f = {
                                                        originalPath: a,
                                                        regexp: a
                                                    },
                                                    h = f.keys = [];
                                                a = a.replace(/([().])/g, "\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,
                                                    function(a, e, b, c) {
                                                        a = "?" === c ? c: null;
                                                        c = "*" === c ? c: null;
                                                        h.push({
                                                            name: b,
                                                            optional: !!a
                                                        });
                                                        e = e || "";
                                                        return "" + (a ? "": e) + "(?:" + (a ? e: "") + (c && "(.+?)" || "([^/]+)") + (a || "") + ")" + (a || "")
                                                    }).replace(/([\/$\*])/g, "\\$1");
                                                f.regexp = RegExp("^" + a + "$", b ? "i": "");
                                                return f
                                            }
                                            var h = {};
                                            this.when = function(a, c) {
                                                h[a] = e.extend({
                                                        reloadOnSearch: !0
                                                    },
                                                    c, a && g(a, c));
                                                if (a) {
                                                    var b = "/" == a[a.length - 1] ? a.substr(0, a.length - 1) : a + "/";
                                                    h[b] = e.extend({
                                                            redirectTo: a
                                                        },
                                                        g(b, c))
                                                }
                                                return this
                                            };
                                            this.otherwise = function(a) {
                                                this.when(null, a);
                                                return this
                                            };
                                            this.$get = ["$rootScope", "$location", "$routeParams", "$q", "$injector", "$http", "$templateCache", "$sce",
                                                function(a, c, b, f, g, n, v, k) {
                                                    function l() {
                                                        var d = p(),
                                                            m = r.current;
                                                        if (d && m && d.$$route === m.$$route && e.equals(d.pathParams, m.pathParams) && !d.reloadOnSearch && !u) m.params = d.params,
                                                            e.copy(m.params, b),
                                                            a.$broadcast("$routeUpdate", m);
                                                        else if (d || m) u = !1,
                                                            a.$broadcast("$routeChangeStart", d, m),
                                                        (r.current = d) && d.redirectTo && (e.isString(d.redirectTo) ? c.path(t(d.redirectTo, d.params)).search(d.params).replace() : c.url(d.redirectTo(d.pathParams, c.path(), c.search())).replace()),
                                                            f.when(d).then(function() {
                                                                if (d) {
                                                                    var a = e.extend({},
                                                                        d.resolve),
                                                                        c,
                                                                        b;
                                                                    e.forEach(a,
                                                                        function(d, c) {
                                                                            a[c] = e.isString(d) ? g.get(d) : g.invoke(d)
                                                                        });
                                                                    e.isDefined(c = d.template) ? e.isFunction(c) && (c = c(d.params)) : e.isDefined(b = d.templateUrl) && (e.isFunction(b) && (b = b(d.params)), b = k.getTrustedResourceUrl(b), e.isDefined(b) && (d.loadedTemplateUrl = b, c = n.get(b, {
                                                                        cache: v
                                                                    }).then(function(a) {
                                                                        return a.data
                                                                    })));
                                                                    e.isDefined(c) && (a.$template = c);
                                                                    return f.all(a)
                                                                }
                                                            }).then(function(c) {
                                                                    d == r.current && (d && (d.locals = c, e.copy(d.params, b)), a.$broadcast("$routeChangeSuccess", d, m))
                                                                },
                                                                function(c) {
                                                                    d == r.current && a.$broadcast("$routeChangeError", d, m, c)
                                                                })
                                                    }
                                                    function p() {
                                                        var a, b;
                                                        e.forEach(h,
                                                            function(f, h) {
                                                                var q;
                                                                if (q = !b) {
                                                                    var g = c.path();
                                                                    q = f.keys;
                                                                    var l = {};
                                                                    if (f.regexp) if (g = f.regexp.exec(g)) {
                                                                        for (var k = 1,
                                                                                 p = g.length; k < p; ++k) {
                                                                            var n = q[k - 1],
                                                                                r = g[k];
                                                                            n && r && (l[n.name] = r)
                                                                        }
                                                                        q = l
                                                                    } else q = null;
                                                                    else q = null;
                                                                    q = a = q
                                                                }
                                                                q && (b = s(f, {
                                                                    params: e.extend({},
                                                                        c.search(), a),
                                                                    pathParams: a
                                                                }), b.$$route = f)
                                                            });
                                                        return b || h[null] && s(h[null], {
                                                            params: {},
                                                            pathParams: {}
                                                        })
                                                    }
                                                    function t(a, c) {
                                                        var b = [];
                                                        e.forEach((a || "").split(":"),
                                                            function(a, d) {
                                                                if (0 === d) b.push(a);
                                                                else {
                                                                    var e = a.match(/(\w+)(?:[?*])?(.*)/),
                                                                        f = e[1];
                                                                    b.push(c[f]);
                                                                    b.push(e[2] || "");
                                                                    delete c[f]
                                                                }
                                                            });
                                                        return b.join("")
                                                    }
                                                    var u = !1,
                                                        r = {
                                                            routes: h,
                                                            reload: function() {
                                                                u = !0;
                                                                a.$evalAsync(l)
                                                            }
                                                        };
                                                    a.$on("$locationChangeSuccess", l);
                                                    return r
                                                }]
                                        });
                                    n.provider("$routeParams",
                                        function() {
                                            this.$get = function() {
                                                return {}
                                            }
                                        });
                                    n.directive("ngView", x);
                                    n.directive("ngView", z);
                                    x.$inject = ["$route", "$anchorScroll", "$animate"];
                                    z.$inject = ["$compile", "$controller", "$route"]
                                })(window, window.angular);
                                //# sourceMappingURL=angular-route.min.js.map
                                /*
 AngularJS v1.2.28
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
                                (function(y, w, z) {
                                    'use strict';
                                    function u(f, a, c) {
                                        r.directive(f, ["$parse", "$swipe",
                                            function(m, p) {
                                                var q = 75,
                                                    g = 0.3,
                                                    e = 30;
                                                return function(h, n, l) {
                                                    function k(d) {
                                                        if (!b) return ! 1;
                                                        var s = Math.abs(d.y - b.y);
                                                        d = (d.x - b.x) * a;
                                                        return v && s < q && 0 < d && d > e && s / d < g
                                                    }
                                                    var s = m(l[f]),
                                                        b,
                                                        v;
                                                    p.bind(n, {
                                                        start: function(d, s) {
                                                            b = d;
                                                            v = !0
                                                        },
                                                        cancel: function(b) {
                                                            v = !1
                                                        },
                                                        end: function(b, a) {
                                                            k(b) && h.$apply(function() {
                                                                n.triggerHandler(c);
                                                                s(h, {
                                                                    $event: a
                                                                })
                                                            })
                                                        }
                                                    })
                                                }
                                            }])
                                    }
                                    var r = w.module("ngTouch", []);
                                    r.factory("$swipe", [function() {
                                        function f(a) {
                                            var c = a.touches && a.touches.length ? a.touches: [a];
                                            a = a.changedTouches && a.changedTouches[0] || a.originalEvent && a.originalEvent.changedTouches && a.originalEvent.changedTouches[0] || c[0].originalEvent || c[0];
                                            return {
                                                x: a.clientX,
                                                y: a.clientY
                                            }
                                        }
                                        return {
                                            bind: function(a, c) {
                                                var m, p, q, g, e = !1;
                                                a.on("touchstart mousedown",
                                                    function(a) {
                                                        q = f(a);
                                                        e = !0;
                                                        p = m = 0;
                                                        g = q;
                                                        c.start && c.start(q, a)
                                                    });
                                                a.on("touchcancel",
                                                    function(a) {
                                                        e = !1;
                                                        c.cancel && c.cancel(a)
                                                    });
                                                a.on("touchmove mousemove",
                                                    function(a) {
                                                        if (e && q) {
                                                            var n = f(a);
                                                            m += Math.abs(n.x - g.x);
                                                            p += Math.abs(n.y - g.y);
                                                            g = n;
                                                            10 > m && 10 > p || (p > m ? (e = !1, c.cancel && c.cancel(a)) : (a.preventDefault(), c.move && c.move(n, a)))
                                                        }
                                                    });
                                                a.on("touchend mouseup",
                                                    function(a) {
                                                        e && (e = !1, c.end && c.end(f(a), a))
                                                    })
                                            }
                                        }
                                    }]);
                                    r.config(["$provide",
                                        function(f) {
                                            f.decorator("ngClickDirective", ["$delegate",
                                                function(a) {
                                                    a.shift();
                                                    return a
                                                }])
                                        }]);
                                    r.directive("ngClick", ["$parse", "$timeout", "$rootElement",
                                        function(f, a, c) {
                                            function m(a, b, c) {
                                                for (var d = 0; d < a.length; d += 2) if (Math.abs(a[d] - b) < e && Math.abs(a[d + 1] - c) < e) return a.splice(d, d + 2),
                                                    !0;
                                                return ! 1
                                            }
                                            function p(a) {
                                                if (! (Date.now() - n > g)) {
                                                    var b = a.touches && a.touches.length ? a.touches: [a],
                                                        c = b[0].clientX,
                                                        b = b[0].clientY;
                                                    1 > c && 1 > b || k && k[0] === c && k[1] === b || (k && (k = null), "label" === a.target.tagName.toLowerCase() && (k = [c, b]), m(l, c, b) || (a.stopPropagation(), a.preventDefault(), a.target && a.target.blur()))
                                                }
                                            }
                                            function q(c) {
                                                c = c.touches && c.touches.length ? c.touches: [c];
                                                var b = c[0].clientX,
                                                    e = c[0].clientY;
                                                l.push(b, e);
                                                a(function() {
                                                        for (var a = 0; a < l.length; a += 2) if (l[a] == b && l[a + 1] == e) {
                                                            l.splice(a, a + 2);
                                                            break
                                                        }
                                                    },
                                                    g, !1)
                                            }
                                            var g = 2500,
                                                e = 25,
                                                h = "ng-click-active",
                                                n, l, k;
                                            return function(a, b, e) {
                                                function d() {
                                                    k = !1;
                                                    b.removeClass(h)
                                                }
                                                var g = f(e.ngClick),
                                                    k = !1,
                                                    t,
                                                    r,
                                                    u,
                                                    x;
                                                b.on("touchstart",
                                                    function(a) {
                                                        k = !0;
                                                        t = a.target ? a.target: a.srcElement;
                                                        3 == t.nodeType && (t = t.parentNode);
                                                        b.addClass(h);
                                                        r = Date.now();
                                                        a = a.touches && a.touches.length ? a.touches: [a];
                                                        a = a[0].originalEvent || a[0];
                                                        u = a.clientX;
                                                        x = a.clientY
                                                    });
                                                b.on("touchmove",
                                                    function(a) {
                                                        d()
                                                    });
                                                b.on("touchcancel",
                                                    function(a) {
                                                        d()
                                                    });
                                                b.on("touchend",
                                                    function(a) {
                                                        var g = Date.now() - r,
                                                            f = a.changedTouches && a.changedTouches.length ? a.changedTouches: a.touches && a.touches.length ? a.touches: [a],
                                                            h = f[0].originalEvent || f[0],
                                                            f = h.clientX,
                                                            h = h.clientY,
                                                            s = Math.sqrt(Math.pow(f - u, 2) + Math.pow(h - x, 2));
                                                        k && (750 > g && 12 > s) && (l || (c[0].addEventListener("click", p, !0), c[0].addEventListener("touchstart", q, !0), l = []), n = Date.now(), m(l, f, h), t && t.blur(), w.isDefined(e.disabled) && !1 !== e.disabled || b.triggerHandler("click", [a]));
                                                        d()
                                                    });
                                                b.onclick = function(a) {};
                                                b.on("click",
                                                    function(b, c) {
                                                        a.$apply(function() {
                                                            g(a, {
                                                                $event: c || b
                                                            })
                                                        })
                                                    });
                                                b.on("mousedown",
                                                    function(a) {
                                                        b.addClass(h)
                                                    });
                                                b.on("mousemove mouseup",
                                                    function(a) {
                                                        b.removeClass(h)
                                                    })
                                            }
                                        }]);
                                    u("ngSwipeLeft", -1, "swipeleft");
                                    u("ngSwipeRight", 1, "swiperight")
                                })(window, window.angular);
                                //# sourceMappingURL=angular-touch.min.js.map
                                /*
 AngularJS v1.2.28
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
                                (function(G, d, P) {
                                    'use strict';
                                    d.module("ngAnimate", ["ng"]).directive("ngAnimateChildren",
                                        function() {
                                            return function(H, z, e) {
                                                e = e.ngAnimateChildren;
                                                d.isString(e) && 0 === e.length ? z.data("$$ngAnimateChildren", !0) : H.$watch(e,
                                                    function(d) {
                                                        z.data("$$ngAnimateChildren", !!d)
                                                    })
                                            }
                                        }).factory("$$animateReflow", ["$$rAF", "$document",
                                        function(d, z) {
                                            return function(e) {
                                                return d(function() {
                                                    e()
                                                })
                                            }
                                        }]).config(["$provide", "$animateProvider",
                                        function(H, z) {
                                            function e(d) {
                                                for (var e = 0; e < d.length; e++) {
                                                    var g = d[e];
                                                    if (g.nodeType == ba) return g
                                                }
                                            }
                                            function E(g) {
                                                return d.element(e(g))
                                            }
                                            var q = d.noop,
                                                w = d.forEach,
                                                Q = z.$$selectors,
                                                ba = 1,
                                                g = "$$ngAnimateState",
                                                ga = "$$ngAnimateChildren",
                                                I = "ng-animate",
                                                h = {
                                                    running: !0
                                                };
                                            H.decorator("$animate", ["$delegate", "$injector", "$sniffer", "$rootElement", "$$asyncCallback", "$rootScope", "$document",
                                                function(y, G, aa, J, K, k, P) {
                                                    function R(a) {
                                                        var b = a.data(g) || {};
                                                        b.running = !0;
                                                        a.data(g, b)
                                                    }
                                                    function ha(a) {
                                                        if (a) {
                                                            var b = [],
                                                                c = {};
                                                            a = a.substr(1).split("."); (aa.transitions || aa.animations) && b.push(G.get(Q[""]));
                                                            for (var f = 0; f < a.length; f++) {
                                                                var d = a[f],
                                                                    e = Q[d];
                                                                e && !c[d] && (b.push(G.get(e)), c[d] = !0)
                                                            }
                                                            return b
                                                        }
                                                    }
                                                    function M(a, b, c) {
                                                        function f(a, b) {
                                                            var c = a[b],
                                                                d = a["before" + b.charAt(0).toUpperCase() + b.substr(1)];
                                                            if (c || d) return "leave" == b && (d = c, c = null),
                                                                S.push({
                                                                    event: b,
                                                                    fn: c
                                                                }),
                                                                n.push({
                                                                    event: b,
                                                                    fn: d
                                                                }),
                                                                !0
                                                        }
                                                        function e(b, d, f) {
                                                            var g = [];
                                                            w(b,
                                                                function(a) {
                                                                    a.fn && g.push(a)
                                                                });
                                                            var r = 0;
                                                            w(g,
                                                                function(b, e) {
                                                                    var C = function() {
                                                                        a: {
                                                                            if (d) { (d[e] || q)();
                                                                                if (++r < g.length) break a;
                                                                                d = null
                                                                            }
                                                                            f()
                                                                        }
                                                                    };
                                                                    switch (b.event) {
                                                                        case "setClass":
                                                                            d.push(b.fn(a, l, A, C));
                                                                            break;
                                                                        case "addClass":
                                                                            d.push(b.fn(a, l || c, C));
                                                                            break;
                                                                        case "removeClass":
                                                                            d.push(b.fn(a, A || c, C));
                                                                            break;
                                                                        default:
                                                                            d.push(b.fn(a, C))
                                                                    }
                                                                });
                                                            d && 0 === d.length && f()
                                                        }
                                                        var g = a[0];
                                                        if (g) {
                                                            var p = "setClass" == b,
                                                                h = p || "addClass" == b || "removeClass" == b,
                                                                l, A;
                                                            d.isArray(c) && (l = c[0], A = c[1], c = l + " " + A);
                                                            var k = a.attr("class") + " " + c;
                                                            if (U(k)) {
                                                                var t = q,
                                                                    v = [],
                                                                    n = [],
                                                                    x = q,
                                                                    u = [],
                                                                    S = [],
                                                                    k = (" " + k).replace(/\s+/g, ".");
                                                                w(ha(k),
                                                                    function(a) { ! f(a, b) && p && (f(a, "addClass"), f(a, "removeClass"))
                                                                    });
                                                                return {
                                                                    node: g,
                                                                    event: b,
                                                                    className: c,
                                                                    isClassBased: h,
                                                                    isSetClassOperation: p,
                                                                    before: function(a) {
                                                                        t = a;
                                                                        e(n, v,
                                                                            function() {
                                                                                t = q;
                                                                                a()
                                                                            })
                                                                    },
                                                                    after: function(a) {
                                                                        x = a;
                                                                        e(S, u,
                                                                            function() {
                                                                                x = q;
                                                                                a()
                                                                            })
                                                                    },
                                                                    cancel: function() {
                                                                        v && (w(v,
                                                                            function(a) { (a || q)(!0)
                                                                            }), t(!0));
                                                                        u && (w(u,
                                                                            function(a) { (a || q)(!0)
                                                                            }), x(!0))
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                    function F(a, b, c, f, e, m, p) {
                                                        function k(d) {
                                                            var e = "$animate:" + d;
                                                            x && (x[e] && 0 < x[e].length) && K(function() {
                                                                c.triggerHandler(e, {
                                                                    event: a,
                                                                    className: b
                                                                })
                                                            })
                                                        }
                                                        function l() {
                                                            k("before")
                                                        }
                                                        function A() {
                                                            k("after")
                                                        }
                                                        function q() {
                                                            k("close");
                                                            p && K(function() {
                                                                p()
                                                            })
                                                        }
                                                        function t() {
                                                            t.hasBeenRun || (t.hasBeenRun = !0, m())
                                                        }
                                                        function v() {
                                                            if (!v.hasBeenRun) {
                                                                v.hasBeenRun = !0;
                                                                var e = c.data(g);
                                                                e && (n && n.isClassBased ? B(c, b) : (K(function() {
                                                                    var e = c.data(g) || {};
                                                                    s == e.index && B(c, b, a)
                                                                }), c.data(g, e)));
                                                                q()
                                                            }
                                                        }
                                                        var n = M(c, a, b);
                                                        if (n) {
                                                            b = n.className;
                                                            var x = d.element._data(n.node),
                                                                x = x && x.events;
                                                            f || (f = e ? e.parent() : c.parent());
                                                            var u = c.data(g) || {};
                                                            e = u.active || {};
                                                            var h = u.totalActive || 0,
                                                                C = u.last,
                                                                D;
                                                            n.isClassBased && (D = u.running || u.disabled || C && !C.isClassBased);
                                                            if (D || N(c, f)) t(),
                                                                l(),
                                                                A(),
                                                                v();
                                                            else {
                                                                f = !1;
                                                                if (0 < h) {
                                                                    D = [];
                                                                    if (n.isClassBased)"setClass" == C.event ? (D.push(C), B(c, b)) : e[b] && (y = e[b], y.event == a ? f = !0 : (D.push(y), B(c, b)));
                                                                    else if ("leave" == a && e["ng-leave"]) f = !0;
                                                                    else {
                                                                        for (var y in e) D.push(e[y]),
                                                                            B(c, y);
                                                                        e = {};
                                                                        h = 0
                                                                    }
                                                                    0 < D.length && w(D,
                                                                        function(a) {
                                                                            a.cancel()
                                                                        })
                                                                } ! n.isClassBased || (n.isSetClassOperation || f) || (f = "addClass" == a == c.hasClass(b));
                                                                if (f) t(),
                                                                    l(),
                                                                    A(),
                                                                    q();
                                                                else {
                                                                    if ("leave" == a) c.one("$destroy",
                                                                        function(a) {
                                                                            a = d.element(this);
                                                                            var b = a.data(g);
                                                                            b && (b = b.active["ng-leave"]) && (b.cancel(), B(a, "ng-leave"))
                                                                        });
                                                                    c.addClass(I);
                                                                    var s = O++;
                                                                    h++;
                                                                    e[b] = n;
                                                                    c.data(g, {
                                                                        last: n,
                                                                        active: e,
                                                                        index: s,
                                                                        totalActive: h
                                                                    });
                                                                    l();
                                                                    n.before(function(e) {
                                                                        var d = c.data(g);
                                                                        e = e || !d || !d.active[b] || n.isClassBased && d.active[b].event != a;
                                                                        t(); ! 0 === e ? v() : (A(), n.after(v))
                                                                    })
                                                                }
                                                            }
                                                        } else t(),
                                                            l(),
                                                            A(),
                                                            v()
                                                    }
                                                    function V(a) {
                                                        if (a = e(a)) a = d.isFunction(a.getElementsByClassName) ? a.getElementsByClassName(I) : a.querySelectorAll("." + I),
                                                            w(a,
                                                                function(a) {
                                                                    a = d.element(a); (a = a.data(g)) && a.active && w(a.active,
                                                                        function(a) {
                                                                            a.cancel()
                                                                        })
                                                                })
                                                    }
                                                    function B(a, b) {
                                                        if (e(a) == e(J)) h.disabled || (h.running = !1, h.structural = !1);
                                                        else if (b) {
                                                            var c = a.data(g) || {},
                                                                d = !0 === b; ! d && (c.active && c.active[b]) && (c.totalActive--, delete c.active[b]);
                                                            if (d || !c.totalActive) a.removeClass(I),
                                                                a.removeData(g)
                                                        }
                                                    }
                                                    function N(a, b) {
                                                        if (h.disabled) return ! 0;
                                                        if (e(a) == e(J)) return h.running;
                                                        var c, f, k;
                                                        do {
                                                            if (0 === b.length) break;
                                                            var m = e(b) == e(J), p = m ? h: b.data(g) || {};
                                                            if (p.disabled) return ! 0;
                                                            m && (k = !0); ! 1 !== c && (m = b.data(ga), d.isDefined(m) && (c = m));
                                                            f = f || p.running || p.last && !p.last.isClassBased
                                                        } while ( b = b . parent ());
                                                        return ! k || !c && f
                                                    }
                                                    var O = 0;
                                                    J.data(g, h);
                                                    k.$$postDigest(function() {
                                                        k.$$postDigest(function() {
                                                            h.running = !1
                                                        })
                                                    });
                                                    var W = z.classNameFilter(),
                                                        U = W ?
                                                            function(a) {
                                                                return W.test(a)
                                                            }: function() {
                                                                return ! 0
                                                            };
                                                    return {
                                                        enter: function(a, b, c, e) {
                                                            a = d.element(a);
                                                            b = b && d.element(b);
                                                            c = c && d.element(c);
                                                            R(a);
                                                            y.enter(a, b, c);
                                                            k.$$postDigest(function() {
                                                                a = E(a);
                                                                F("enter", "ng-enter", a, b, c, q, e)
                                                            })
                                                        },
                                                        leave: function(a, b) {
                                                            a = d.element(a);
                                                            V(a);
                                                            R(a);
                                                            k.$$postDigest(function() {
                                                                F("leave", "ng-leave", E(a), null, null,
                                                                    function() {
                                                                        y.leave(a)
                                                                    },
                                                                    b)
                                                            })
                                                        },
                                                        move: function(a, b, c, e) {
                                                            a = d.element(a);
                                                            b = b && d.element(b);
                                                            c = c && d.element(c);
                                                            V(a);
                                                            R(a);
                                                            y.move(a, b, c);
                                                            k.$$postDigest(function() {
                                                                a = E(a);
                                                                F("move", "ng-move", a, b, c, q, e)
                                                            })
                                                        },
                                                        addClass: function(a, b, c) {
                                                            a = d.element(a);
                                                            a = E(a);
                                                            F("addClass", b, a, null, null,
                                                                function() {
                                                                    y.addClass(a, b)
                                                                },
                                                                c)
                                                        },
                                                        removeClass: function(a, b, c) {
                                                            a = d.element(a);
                                                            a = E(a);
                                                            F("removeClass", b, a, null, null,
                                                                function() {
                                                                    y.removeClass(a, b)
                                                                },
                                                                c)
                                                        },
                                                        setClass: function(a, b, c, e) {
                                                            a = d.element(a);
                                                            a = E(a);
                                                            F("setClass", [b, c], a, null, null,
                                                                function() {
                                                                    y.setClass(a, b, c)
                                                                },
                                                                e)
                                                        },
                                                        enabled: function(a, b) {
                                                            switch (arguments.length) {
                                                                case 2:
                                                                    if (a) B(b);
                                                                    else {
                                                                        var c = b.data(g) || {};
                                                                        c.disabled = !0;
                                                                        b.data(g, c)
                                                                    }
                                                                    break;
                                                                case 1:
                                                                    h.disabled = !a;
                                                                    break;
                                                                default:
                                                                    a = !h.disabled
                                                            }
                                                            return !! a
                                                        }
                                                    }
                                                }]);
                                            z.register("", ["$window", "$sniffer", "$timeout", "$$animateReflow",
                                                function(g, h, z, J) {
                                                    function K() {
                                                        L || (L = J(function() {
                                                            T = [];
                                                            L = null;
                                                            s = {}
                                                        }))
                                                    }
                                                    function k(a, X) {
                                                        L && L();
                                                        T.push(X);
                                                        L = J(function() {
                                                            w(T,
                                                                function(a) {
                                                                    a()
                                                                });
                                                            T = [];
                                                            L = null;
                                                            s = {}
                                                        })
                                                    }
                                                    function E(a, X) {
                                                        var b = e(a);
                                                        a = d.element(b);
                                                        Y.push(a);
                                                        b = Date.now() + X;
                                                        b <= fa || (z.cancel(ea), fa = b, ea = z(function() {
                                                                R(Y);
                                                                Y = []
                                                            },
                                                            X, !1))
                                                    }
                                                    function R(a) {
                                                        w(a,
                                                            function(a) { (a = a.data(u)) && (a.closeAnimationFn || q)()
                                                            })
                                                    }
                                                    function I(a, b) {
                                                        var c = b ? s[b] : null;
                                                        if (!c) {
                                                            var e = 0,
                                                                d = 0,
                                                                f = 0,
                                                                k = 0,
                                                                h, Z, $, m;
                                                            w(a,
                                                                function(a) {
                                                                    if (a.nodeType == ba) {
                                                                        a = g.getComputedStyle(a) || {};
                                                                        $ = a[p + Q];
                                                                        e = Math.max(M($), e);
                                                                        m = a[p + t];
                                                                        h = a[p + v];
                                                                        d = Math.max(M(h), d);
                                                                        Z = a[l + v];
                                                                        k = Math.max(M(Z), k);
                                                                        var b = M(a[l + Q]);
                                                                        0 < b && (b *= parseInt(a[l + n], 10) || 1);
                                                                        f = Math.max(b, f)
                                                                    }
                                                                });
                                                            c = {
                                                                total: 0,
                                                                transitionPropertyStyle: m,
                                                                transitionDurationStyle: $,
                                                                transitionDelayStyle: h,
                                                                transitionDelay: d,
                                                                transitionDuration: e,
                                                                animationDelayStyle: Z,
                                                                animationDelay: k,
                                                                animationDuration: f
                                                            };
                                                            b && (s[b] = c)
                                                        }
                                                        return c
                                                    }
                                                    function M(a) {
                                                        var b = 0;
                                                        a = d.isString(a) ? a.split(/\s*,\s*/) : [];
                                                        w(a,
                                                            function(a) {
                                                                b = Math.max(parseFloat(a) || 0, b)
                                                            });
                                                        return b
                                                    }
                                                    function F(a) {
                                                        var b = a.parent(),
                                                            c = b.data(x);
                                                        c || (b.data(x, ++da), c = da);
                                                        return c + "-" + e(a).getAttribute("class")
                                                    }
                                                    function V(a, b, c, d) {
                                                        var f = F(b),
                                                            g = f + " " + c,
                                                            k = s[g] ? ++s[g].total: 0,
                                                            h = {};
                                                        if (0 < k) {
                                                            var m = c + "-stagger",
                                                                h = f + " " + m; (f = !s[h]) && b.addClass(m);
                                                            h = I(b, h);
                                                            f && b.removeClass(m)
                                                        }
                                                        d = d ||
                                                            function(a) {
                                                                return a()
                                                            };
                                                        b.addClass(c);
                                                        var m = b.data(u) || {},
                                                            n = d(function() {
                                                                return I(b, g)
                                                            });
                                                        d = n.transitionDuration;
                                                        f = n.animationDuration;
                                                        if (0 === d && 0 === f) return b.removeClass(c),
                                                            !1;
                                                        b.data(u, {
                                                            running: m.running || 0,
                                                            itemIndex: k,
                                                            stagger: h,
                                                            timings: n,
                                                            closeAnimationFn: q
                                                        });
                                                        a = 0 < m.running || "setClass" == a;
                                                        0 < d && B(b, c, a);
                                                        0 < f && (0 < h.animationDelay && 0 === h.animationDuration) && (e(b).style[l] = "none 0s");
                                                        return ! 0
                                                    }
                                                    function B(a, b, c) {
                                                        "ng-enter" != b && ("ng-move" != b && "ng-leave" != b) && c ? a.addClass(S) : e(a).style[p + t] = "none"
                                                    }
                                                    function N(a, b) {
                                                        var c = p + t,
                                                            d = e(a);
                                                        d.style[c] && 0 < d.style[c].length && (d.style[c] = "");
                                                        a.removeClass(S)
                                                    }
                                                    function O(a) {
                                                        var b = l;
                                                        a = e(a);
                                                        a.style[b] && 0 < a.style[b].length && (a.style[b] = "")
                                                    }
                                                    function W(a, b, c, d) {
                                                        function g(a) {
                                                            b.off(z, h);
                                                            b.removeClass(n);
                                                            f(b, c);
                                                            a = e(b);
                                                            for (var d in s) a.style.removeProperty(s[d])
                                                        }
                                                        function h(a) {
                                                            a.stopPropagation();
                                                            var b = a.originalEvent || a;
                                                            a = b.$manualTimeStamp || b.timeStamp || Date.now();
                                                            b = parseFloat(b.elapsedTime.toFixed(C));
                                                            Math.max(a - y, 0) >= x && b >= t && d()
                                                        }
                                                        var k = e(b);
                                                        a = b.data(u);
                                                        if ( - 1 != k.getAttribute("class").indexOf(c) && a) {
                                                            var n = "";
                                                            w(c.split(" "),
                                                                function(a, b) {
                                                                    n += (0 < b ? " ": "") + a + "-active"
                                                                });
                                                            var p = a.stagger,
                                                                l = a.timings,
                                                                q = a.itemIndex,
                                                                t = Math.max(l.transitionDuration, l.animationDuration),
                                                                v = Math.max(l.transitionDelay, l.animationDelay),
                                                                x = v * ca,
                                                                y = Date.now(),
                                                                z = A + " " + H,
                                                                r = "",
                                                                s = [];
                                                            if (0 < l.transitionDuration) {
                                                                var B = l.transitionPropertyStyle; - 1 == B.indexOf("all") && (r += m + "transition-property: " + B + ";", r += m + "transition-duration: " + l.transitionDurationStyle + ";", s.push(m + "transition-property"), s.push(m + "transition-duration"))
                                                            }
                                                            0 < q && (0 < p.transitionDelay && 0 === p.transitionDuration && (r += m + "transition-delay: " + U(l.transitionDelayStyle, p.transitionDelay, q) + "; ", s.push(m + "transition-delay")), 0 < p.animationDelay && 0 === p.animationDuration && (r += m + "animation-delay: " + U(l.animationDelayStyle, p.animationDelay, q) + "; ", s.push(m + "animation-delay")));
                                                            0 < s.length && (l = k.getAttribute("style") || "", k.setAttribute("style", l + "; " + r));
                                                            b.on(z, h);
                                                            b.addClass(n);
                                                            a.closeAnimationFn = function() {
                                                                g();
                                                                d()
                                                            };
                                                            k = (q * (Math.max(p.animationDelay, p.transitionDelay) || 0) + (v + t) * D) * ca;
                                                            a.running++;
                                                            E(b, k);
                                                            return g
                                                        }
                                                        d()
                                                    }
                                                    function U(a, b, c) {
                                                        var d = "";
                                                        w(a.split(","),
                                                            function(a, e) {
                                                                d += (0 < e ? ",": "") + (c * b + parseInt(a, 10)) + "s"
                                                            });
                                                        return d
                                                    }
                                                    function a(a, b, c, d) {
                                                        if (V(a, b, c, d)) return function(a) {
                                                            a && f(b, c)
                                                        }
                                                    }
                                                    function b(a, b, c, d) {
                                                        if (b.data(u)) return W(a, b, c, d);
                                                        f(b, c);
                                                        d()
                                                    }
                                                    function c(c, d, e, f) {
                                                        var g = a(c, d, e);
                                                        if (g) {
                                                            var h = g;
                                                            k(d,
                                                                function() {
                                                                    N(d, e);
                                                                    O(d);
                                                                    h = b(c, d, e, f)
                                                                });
                                                            return function(a) { (h || q)(a)
                                                            }
                                                        }
                                                        K();
                                                        f()
                                                    }
                                                    function f(a, b) {
                                                        a.removeClass(b);
                                                        var c = a.data(u);
                                                        c && (c.running && c.running--, c.running && 0 !== c.running || a.removeData(u))
                                                    }
                                                    function r(a, b) {
                                                        var c = "";
                                                        a = d.isArray(a) ? a: a.split(/\s+/);
                                                        w(a,
                                                            function(a, d) {
                                                                a && 0 < a.length && (c += (0 < d ? " ": "") + a + b)
                                                            });
                                                        return c
                                                    }
                                                    var m = "",
                                                        p, H, l, A;
                                                    G.ontransitionend === P && G.onwebkittransitionend !== P ? (m = "-webkit-", p = "WebkitTransition", H = "webkitTransitionEnd transitionend") : (p = "transition", H = "transitionend");
                                                    G.onanimationend === P && G.onwebkitanimationend !== P ? (m = "-webkit-", l = "WebkitAnimation", A = "webkitAnimationEnd animationend") : (l = "animation", A = "animationend");
                                                    var Q = "Duration",
                                                        t = "Property",
                                                        v = "Delay",
                                                        n = "IterationCount",
                                                        x = "$$ngAnimateKey",
                                                        u = "$$ngAnimateCSS3Data",
                                                        S = "ng-animate-block-transitions",
                                                        C = 3,
                                                        D = 1.5,
                                                        ca = 1E3,
                                                        s = {},
                                                        da = 0,
                                                        T = [],
                                                        L,
                                                        ea = null,
                                                        fa = 0,
                                                        Y = [];
                                                    return {
                                                        enter: function(a, b) {
                                                            return c("enter", a, "ng-enter", b)
                                                        },
                                                        leave: function(a, b) {
                                                            return c("leave", a, "ng-leave", b)
                                                        },
                                                        move: function(a, b) {
                                                            return c("move", a, "ng-move", b)
                                                        },
                                                        beforeSetClass: function(b, c, d, e) {
                                                            var f = r(d, "-remove") + " " + r(c, "-add"),
                                                                g = a("setClass", b, f,
                                                                    function(a) {
                                                                        var e = b.attr("class");
                                                                        b.removeClass(d);
                                                                        b.addClass(c);
                                                                        a = a();
                                                                        b.attr("class", e);
                                                                        return a
                                                                    });
                                                            if (g) return k(b,
                                                                function() {
                                                                    N(b, f);
                                                                    O(b);
                                                                    e()
                                                                }),
                                                                g;
                                                            K();
                                                            e()
                                                        },
                                                        beforeAddClass: function(b, c, d) {
                                                            var e = a("addClass", b, r(c, "-add"),
                                                                function(a) {
                                                                    b.addClass(c);
                                                                    a = a();
                                                                    b.removeClass(c);
                                                                    return a
                                                                });
                                                            if (e) return k(b,
                                                                function() {
                                                                    N(b, c);
                                                                    O(b);
                                                                    d()
                                                                }),
                                                                e;
                                                            K();
                                                            d()
                                                        },
                                                        setClass: function(a, c, d, e) {
                                                            d = r(d, "-remove");
                                                            c = r(c, "-add");
                                                            return b("setClass", a, d + " " + c, e)
                                                        },
                                                        addClass: function(a, c, d) {
                                                            return b("addClass", a, r(c, "-add"), d)
                                                        },
                                                        beforeRemoveClass: function(b, c, d) {
                                                            var e = a("removeClass", b, r(c, "-remove"),
                                                                function(a) {
                                                                    var d = b.attr("class");
                                                                    b.removeClass(c);
                                                                    a = a();
                                                                    b.attr("class", d);
                                                                    return a
                                                                });
                                                            if (e) return k(b,
                                                                function() {
                                                                    N(b, c);
                                                                    O(b);
                                                                    d()
                                                                }),
                                                                e;
                                                            d()
                                                        },
                                                        removeClass: function(a, c, d) {
                                                            return b("removeClass", a, r(c, "-remove"), d)
                                                        }
                                                    }
                                                }])
                                        }])
                                })(window, window.angular);
                                //# sourceMappingURL=angular-animate.min.js.map
                                /*
 AngularJS v1.2.28
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
                                (function(q, g, r) {
                                    'use strict';
                                    function F(a) {
                                        var d = [];
                                        t(d, g.noop).chars(a);
                                        return d.join("")
                                    }
                                    function l(a) {
                                        var d = {};
                                        a = a.split(",");
                                        var c;
                                        for (c = 0; c < a.length; c++) d[a[c]] = !0;
                                        return d
                                    }
                                    function G(a, d) {
                                        function c(a, b, c, h) {
                                            b = g.lowercase(b);
                                            if (u[b]) for (; f.last() && v[f.last()];) e("", f.last());
                                            w[b] && f.last() == b && e("", b); (h = x[b] || !!h) || f.push(b);
                                            var n = {};
                                            c.replace(H,
                                                function(a, b, d, c, e) {
                                                    n[b] = s(d || c || e || "")
                                                });
                                            d.start && d.start(b, n, h)
                                        }
                                        function e(a, b) {
                                            var c = 0,
                                                e;
                                            if (b = g.lowercase(b)) for (c = f.length - 1; 0 <= c && f[c] != b; c--);
                                            if (0 <= c) {
                                                for (e = f.length - 1; e >= c; e--) d.end && d.end(f[e]);
                                                f.length = c
                                            }
                                        }
                                        "string" !== typeof a && (a = null === a || "undefined" === typeof a ? "": "" + a);
                                        var b, k, f = [],
                                            n = a,
                                            h;
                                        for (f.last = function() {
                                            return f[f.length - 1]
                                        }; a;) {
                                            h = "";
                                            k = !0;
                                            if (f.last() && y[f.last()]) a = a.replace(RegExp("(.*)<\\s*\\/\\s*" + f.last() + "[^>]*>", "i"),
                                                function(a, b) {
                                                    b = b.replace(I, "$1").replace(J, "$1");
                                                    d.chars && d.chars(s(b));
                                                    return ""
                                                }),
                                                e("", f.last());
                                            else {
                                                if (0 === a.indexOf("\x3c!--")) b = a.indexOf("--", 4),
                                                0 <= b && a.lastIndexOf("--\x3e", b) === b && (d.comment && d.comment(a.substring(4, b)), a = a.substring(b + 3), k = !1);
                                                else if (z.test(a)) {
                                                    if (b = a.match(z)) a = a.replace(b[0], ""),
                                                        k = !1
                                                } else if (K.test(a)) {
                                                    if (b = a.match(A)) a = a.substring(b[0].length),
                                                        b[0].replace(A, e),
                                                        k = !1
                                                } else L.test(a) && ((b = a.match(B)) ? (b[4] && (a = a.substring(b[0].length), b[0].replace(B, c)), k = !1) : (h += "<", a = a.substring(1)));
                                                k && (b = a.indexOf("<"), h += 0 > b ? a: a.substring(0, b), a = 0 > b ? "": a.substring(b), d.chars && d.chars(s(h)))
                                            }
                                            if (a == n) throw M("badparse", a);
                                            n = a
                                        }
                                        e()
                                    }
                                    function s(a) {
                                        if (!a) return "";
                                        var d = N.exec(a);
                                        a = d[1];
                                        var c = d[3];
                                        if (d = d[2]) p.innerHTML = d.replace(/</g, "&lt;"),
                                            d = "textContent" in p ? p.textContent: p.innerText;
                                        return a + d + c
                                    }
                                    function C(a) {
                                        return a.replace(/&/g, "&amp;").replace(O,
                                            function(a) {
                                                var c = a.charCodeAt(0);
                                                a = a.charCodeAt(1);
                                                return "&#" + (1024 * (c - 55296) + (a - 56320) + 65536) + ";"
                                            }).replace(P,
                                            function(a) {
                                                return "&#" + a.charCodeAt(0) + ";"
                                            }).replace(/</g, "&lt;").replace(/>/g, "&gt;")
                                    }
                                    function t(a, d) {
                                        var c = !1,
                                            e = g.bind(a, a.push);
                                        return {
                                            start: function(a, k, f) {
                                                a = g.lowercase(a); ! c && y[a] && (c = a);
                                                c || !0 !== D[a] || (e("<"), e(a), g.forEach(k,
                                                    function(c, f) {
                                                        var m = g.lowercase(f),
                                                            k = "img" === a && "src" === m || "background" === m; ! 0 !== Q[m] || !0 === E[m] && !d(c, k) || (e(" "), e(f), e('="'), e(C(c)), e('"'))
                                                    }), e(f ? "/>": ">"))
                                            },
                                            end: function(a) {
                                                a = g.lowercase(a);
                                                c || !0 !== D[a] || (e("</"), e(a), e(">"));
                                                a == c && (c = !1)
                                            },
                                            chars: function(a) {
                                                c || e(C(a))
                                            }
                                        }
                                    }
                                    var M = g.$$minErr("$sanitize"),
                                        B = /^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,
                                        A = /^<\/\s*([\w:-]+)[^>]*>/,
                                        H = /([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,
                                        L = /^</,
                                        K = /^<\//,
                                        I = /\x3c!--(.*?)--\x3e/g,
                                        z = /<!DOCTYPE([^>]*?)>/i,
                                        J = /<!\[CDATA\[(.*?)]]\x3e/g,
                                        O = /[\uD800-\uDBFF][\uDC00-\uDFFF]/g,
                                        P = /([^\#-~| |!])/g,
                                        x = l("area,br,col,hr,img,wbr");
                                    q = l("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr");
                                    r = l("rp,rt");
                                    var w = g.extend({},
                                        r, q),
                                        u = g.extend({},
                                            q, l("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),
                                        v = g.extend({},
                                            r, l("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),
                                        y = l("script,style"),
                                        D = g.extend({},
                                            x, u, v, w),
                                        E = l("background,cite,href,longdesc,src,usemap"),
                                        Q = g.extend({},
                                            E, l("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),
                                        p = document.createElement("pre"),
                                        N = /^(\s*)([\s\S]*?)(\s*)$/;
                                    g.module("ngSanitize", []).provider("$sanitize",
                                        function() {
                                            this.$get = ["$$sanitizeUri",
                                                function(a) {
                                                    return function(d) {
                                                        var c = [];
                                                        G(d, t(c,
                                                            function(c, b) {
                                                                return ! /^unsafe/.test(a(c, b))
                                                            }));
                                                        return c.join("")
                                                    }
                                                }]
                                        });
                                    g.module("ngSanitize").filter("linky", ["$sanitize",
                                        function(a) {
                                            var d = /((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"]/,
                                                c = /^mailto:/;
                                            return function(e, b) {
                                                function k(a) {
                                                    a && m.push(F(a))
                                                }
                                                function f(a, c) {
                                                    m.push("<a ");
                                                    g.isDefined(b) && (m.push('target="'), m.push(b), m.push('" '));
                                                    m.push('href="', a.replace('"', "&quot;"), '">');
                                                    k(c);
                                                    m.push("</a>")
                                                }
                                                if (!e) return e;
                                                for (var n, h = e,
                                                         m = [], l, p; n = h.match(d);) l = n[0],
                                                n[2] == n[3] && (l = "mailto:" + l),
                                                    p = n.index,
                                                    k(h.substr(0, p)),
                                                    f(l, n[0].replace(c, "")),
                                                    h = h.substring(p + n[0].length);
                                                k(h);
                                                return a(m.join(""))
                                            }
                                        }])
                                })(window, window.angular);
                                //# sourceMappingURL=angular-sanitize.min.js.map
                                // jQuery Mask Plugin v1.14.0
                                // github.com/igorescobar/jQuery-Mask-Plugin
                                (function(b) {
                                    "function" === typeof define && define.amd ? define(["jquery"], b) : "object" === typeof exports ? module.exports = b(require("jquery")) : b(jQuery || Zepto)
                                })(function(b) {
                                    var y = function(a, e, d) {
                                        var c = {
                                            invalid: [],
                                            getCaret: function() {
                                                try {
                                                    var r, b = 0,
                                                        e = a.get(0),
                                                        d = document.selection,
                                                        f = e.selectionStart;
                                                    if (d && -1 === navigator.appVersion.indexOf("MSIE 10")) r = d.createRange(),
                                                        r.moveStart("character", -c.val().length),
                                                        b = r.text.length;
                                                    else if (f || "0" === f) b = f;
                                                    return b
                                                } catch(g) {}
                                            },
                                            setCaret: function(r) {
                                                try {
                                                    if (a.is(":focus")) {
                                                        var c, b = a.get(0);
                                                        b.setSelectionRange ? (b.focus(), b.setSelectionRange(r, r)) : (c = b.createTextRange(), c.collapse(!0), c.moveEnd("character", r), c.moveStart("character", r), c.select())
                                                    }
                                                } catch(e) {}
                                            },
                                            events: function() {
                                                a.on("keydown.mask",
                                                    function(c) {
                                                        a.data("mask-keycode", c.keyCode || c.which)
                                                    }).on(b.jMaskGlobals.useInput ? "input.mask": "keyup.mask", c.behaviour).on("paste.mask drop.mask",
                                                    function() {
                                                        setTimeout(function() {
                                                                a.keydown().keyup()
                                                            },
                                                            100)
                                                    }).on("change.mask",
                                                    function() {
                                                        a.data("changed", !0)
                                                    }).on("blur.mask",
                                                    function() {
                                                        n === c.val() || a.data("changed") || a.trigger("change");
                                                        a.data("changed", !1)
                                                    }).on("blur.mask",
                                                    function() {
                                                        n = c.val()
                                                    }).on("focus.mask",
                                                    function(a) { ! 0 === d.selectOnFocus && b(a.target).select()
                                                    }).on("focusout.mask",
                                                    function() {
                                                        d.clearIfNotMatch && !p.test(c.val()) && c.val("")
                                                    })
                                            },
                                            getRegexMask: function() {
                                                for (var a = [], c, b, d, f, l = 0; l < e.length; l++)(c = g.translation[e.charAt(l)]) ? (b = c.pattern.toString().replace(/.{1}$|^.{1}/g, ""), d = c.optional, (c = c.recursive) ? (a.push(e.charAt(l)), f = {
                                                    digit: e.charAt(l),
                                                    pattern: b
                                                }) : a.push(d || c ? b + "?": b)) : a.push(e.charAt(l).replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&"));
                                                a = a.join("");
                                                f && (a = a.replace(new RegExp("(" + f.digit + "(.*" + f.digit + ")?)"), "($1)?").replace(new RegExp(f.digit, "g"), f.pattern));
                                                return new RegExp(a)
                                            },
                                            destroyEvents: function() {
                                                a.off("input keydown keyup paste drop blur focusout ".split(" ").join(".mask "))
                                            },
                                            val: function(c) {
                                                var b = a.is("input") ? "val": "text";
                                                if (0 < arguments.length) {
                                                    if (a[b]() !== c) a[b](c);
                                                    b = a
                                                } else b = a[b]();
                                                return b
                                            },
                                            getMCharsBeforeCount: function(a, c) {
                                                for (var b = 0,
                                                         d = 0,
                                                         f = e.length; d < f && d < a; d++) g.translation[e.charAt(d)] || (a = c ? a + 1 : a, b++);
                                                return b
                                            },
                                            caretPos: function(a, b, d, h) {
                                                return g.translation[e.charAt(Math.min(a - 1, e.length - 1))] ? Math.min(a + d - b - h, d) : c.caretPos(a + 1, b, d, h)
                                            },
                                            behaviour: function(d) {
                                                d = d || window.event;
                                                c.invalid = [];
                                                var e = a.data("mask-keycode");
                                                if ( - 1 === b.inArray(e, g.byPassKeys)) {
                                                    var m = c.getCaret(),
                                                        h = c.val().length,
                                                        f = c.getMasked(),
                                                        l = f.length,
                                                        k = c.getMCharsBeforeCount(l - 1) - c.getMCharsBeforeCount(h - 1),
                                                        n = m < h;
                                                    c.val(f);
                                                    n && (8 !== e && 46 !== e && (m = c.caretPos(m, h, l, k)), c.setCaret(m));
                                                    return c.callbacks(d)
                                                }
                                            },
                                            getMasked: function(a, b) {
                                                var m = [],
                                                    h = void 0 === b ? c.val() : b + "",
                                                    f = 0,
                                                    l = e.length,
                                                    k = 0,
                                                    n = h.length,
                                                    q = 1,
                                                    p = "push",
                                                    u = -1,
                                                    t,
                                                    w;
                                                d.reverse ? (p = "unshift", q = -1, t = 0, f = l - 1, k = n - 1, w = function() {
                                                    return - 1 < f && -1 < k
                                                }) : (t = l - 1, w = function() {
                                                    return f < l && k < n
                                                });
                                                for (; w();) {
                                                    var x = e.charAt(f),
                                                        v = h.charAt(k),
                                                        s = g.translation[x];
                                                    if (s) v.match(s.pattern) ? (m[p](v), s.recursive && ( - 1 === u ? u = f: f === t && (f = u - q), t === u && (f -= q)), f += q) : s.optional ? (f += q, k -= q) : s.fallback ? (m[p](s.fallback), f += q, k -= q) : c.invalid.push({
                                                        p: k,
                                                        v: v,
                                                        e: s.pattern
                                                    }),
                                                        k += q;
                                                    else {
                                                        if (!a) m[p](x);
                                                        v === x && (k += q);
                                                        f += q
                                                    }
                                                }
                                                h = e.charAt(t);
                                                l !== n + 1 || g.translation[h] || m.push(h);
                                                return m.join("")
                                            },
                                            callbacks: function(b) {
                                                var g = c.val(),
                                                    m = g !== n,
                                                    h = [g, b, a, d],
                                                    f = function(a, b, c) {
                                                        "function" === typeof d[a] && b && d[a].apply(this, c)
                                                    };
                                                f("onChange", !0 === m, h);
                                                f("onKeyPress", !0 === m, h);
                                                f("onComplete", g.length === e.length, h);
                                                f("onInvalid", 0 < c.invalid.length, [g, b, a, c.invalid, d])
                                            }
                                        };
                                        a = b(a);
                                        var g = this,
                                            n = c.val(),
                                            p;
                                        e = "function" === typeof e ? e(c.val(), void 0, a, d) : e;
                                        g.mask = e;
                                        g.options = d;
                                        g.remove = function() {
                                            var b = c.getCaret();
                                            c.destroyEvents();
                                            c.val(g.getCleanVal());
                                            c.setCaret(b - c.getMCharsBeforeCount(b));
                                            return a
                                        };
                                        g.getCleanVal = function() {
                                            return c.getMasked(!0)
                                        };
                                        g.getMaskedVal = function(a) {
                                            return c.getMasked(!1, a)
                                        };
                                        g.init = function(e) {
                                            e = e || !1;
                                            d = d || {};
                                            g.clearIfNotMatch = b.jMaskGlobals.clearIfNotMatch;
                                            g.byPassKeys = b.jMaskGlobals.byPassKeys;
                                            g.translation = b.extend({},
                                                b.jMaskGlobals.translation, d.translation);
                                            g = b.extend(!0, {},
                                                g, d);
                                            p = c.getRegexMask(); ! 1 === e ? (d.placeholder && a.attr("placeholder", d.placeholder), a.data("mask") && a.attr("autocomplete", "off"), c.destroyEvents(), c.events(), e = c.getCaret(), c.val(c.getMasked()), c.setCaret(e + c.getMCharsBeforeCount(e, !0))) : (c.events(), c.val(c.getMasked()))
                                        };
                                        g.init(!a.is("input"))
                                    };
                                    b.maskWatchers = {};
                                    var A = function() {
                                            var a = b(this),
                                                e = {},
                                                d = a.attr("data-mask");
                                            a.attr("data-mask-reverse") && (e.reverse = !0);
                                            a.attr("data-mask-clearifnotmatch") && (e.clearIfNotMatch = !0);
                                            "true" === a.attr("data-mask-selectonfocus") && (e.selectOnFocus = !0);
                                            if (z(a, d, e)) return a.data("mask", new y(this, d, e))
                                        },
                                        z = function(a, e, d) {
                                            d = d || {};
                                            var c = b(a).data("mask"),
                                                g = JSON.stringify;
                                            a = b(a).val() || b(a).text();
                                            try {
                                                return "function" === typeof e && (e = e(a)),
                                                "object" !== typeof c || g(c.options) !== g(d) || c.mask !== e
                                            } catch(n) {}
                                        };
                                    b.fn.mask = function(a, e) {
                                        e = e || {};
                                        var d = this.selector,
                                            c = b.jMaskGlobals,
                                            g = c.watchInterval,
                                            c = e.watchInputs || c.watchInputs,
                                            n = function() {
                                                if (z(this, a, e)) return b(this).data("mask", new y(this, a, e))
                                            };
                                        b(this).each(n);
                                        d && "" !== d && c && (clearInterval(b.maskWatchers[d]), b.maskWatchers[d] = setInterval(function() {
                                                b(document).find(d).each(n)
                                            },
                                            g));
                                        return this
                                    };
                                    b.fn.masked = function(a) {
                                        return this.data("mask").getMaskedVal(a)
                                    };
                                    b.fn.unmask = function() {
                                        clearInterval(b.maskWatchers[this.selector]);
                                        delete b.maskWatchers[this.selector];
                                        return this.each(function() {
                                            var a = b(this).data("mask");
                                            a && a.remove().removeData("mask")
                                        })
                                    };
                                    b.fn.cleanVal = function() {
                                        return this.data("mask").getCleanVal()
                                    };
                                    b.applyDataMask = function(a) {
                                        a = a || b.jMaskGlobals.maskElements; (a instanceof b ? a: b(a)).filter(b.jMaskGlobals.dataMaskAttr).each(A)
                                    };
                                    var p = {
                                        maskElements: "input,td,span,div",
                                        dataMaskAttr: "*[data-mask]",
                                        dataMask: !0,
                                        watchInterval: 300,
                                        watchInputs: !0,
                                        useInput: function(a) {
                                            var b = document.createElement("div"),
                                                d;
                                            a = "on" + a;
                                            d = a in b;
                                            d || (b.setAttribute(a, "return;"), d = "function" === typeof b[a]);
                                            return d
                                        } ("input"),
                                        watchDataMask: !1,
                                        byPassKeys: [9, 16, 17, 18, 36, 37, 38, 39, 40, 91],
                                        translation: {
                                            0 : {
                                                pattern: /\d/
                                            },
                                            9 : {
                                                pattern: /\d/,
                                                optional: !0
                                            },
                                            "#": {
                                                pattern: /\d/,
                                                recursive: !0
                                            },
                                            A: {
                                                pattern: /[a-zA-Z0-9]/
                                            },
                                            S: {
                                                pattern: /[a-zA-Z]/
                                            }
                                        }
                                    };
                                    b.jMaskGlobals = b.jMaskGlobals || {};
                                    p = b.jMaskGlobals = b.extend(!0, {},
                                        p, b.jMaskGlobals);
                                    p.dataMask && b.applyDataMask();
                                    setInterval(function() {
                                            b.jMaskGlobals.watchDataMask && b.applyDataMask()
                                        },
                                        p.watchInterval)
                                });

                                /*!
 *         ,/
 *       ,'/
 *     ,' /
 *   ,'  /_____,
 * .'____    ,'
 *      /  ,'
 *     / ,'
 *    /,'
 *   /'
 *
 * Selectric ϟ v1.10.1 (Jun 30 2016) - http://lcdsantos.github.io/jQuery-Selectric/
 *
 * Copyright (c) 2016 Leonardo Santos; MIT License
 *
 */

                                (function(factory) {
                                    /* global define */
                                    /* istanbul ignore next */
                                    if (typeof define === 'function' && define.amd) {
                                        define(['jquery'], factory);
                                    } else if (typeof module === 'object' && module.exports) {
                                        // Node/CommonJS
                                        module.exports = function(root, jQuery) {
                                            if (jQuery === undefined) {
                                                if (typeof window !== 'undefined') {
                                                    jQuery = require('jquery');
                                                } else {
                                                    jQuery = require('jquery')(root);
                                                }
                                            }
                                            factory(jQuery);
                                            return jQuery;
                                        };
                                    } else {
                                        // Browser globals
                                        factory(jQuery);
                                    }
                                } (function($) {
                                    'use strict';

                                    var $doc = $(document);
                                    var $win = $(window);

                                    var pluginName = 'selectric';
                                    var classList = 'Input Items Open Disabled TempShow HideSelect Wrapper Focus Hover Responsive Above Scroll Group GroupLabel';
                                    var bindSufix = '.sl';

                                    var chars = ['a', 'e', 'i', 'o', 'u', 'n', 'c', 'y'];
                                    var diacritics = [/[\xE0-\xE5]/g, // a
                                        / [\xE8 - \xEB] / g, // e
                                        / [\xEC - \xEF] / g, // i
                                        / [\xF2 - \xF6] / g, // o
                                        / [\xF9 - \xFC] / g, // u
                                        / [\xF1] / g, // n
                                        / [\xE7] / g, // c
                                        / [\xFD - \xFF] / g // y
                                    ];

                                    /**
                                     * Create an instance of Selectric
                                     *
                                     * @constructor
                                     * @param {Node} element - The &lt;select&gt; element
                                     * @param {object}  opts - Options
                                     */
                                    var Selectric = function(element, opts) {
                                        var _this = this;

                                        _this.element = element;
                                        _this.$element = $(element);

                                        _this.state = {
                                            enabled: false,
                                            opened: false,
                                            currValue: -1,
                                            selectedIdx: -1
                                        };

                                        _this.eventTriggers = {
                                            open: _this.open,
                                            close: _this.close,
                                            destroy: _this.destroy,
                                            refresh: _this.refresh,
                                            init: _this.init
                                        };

                                        _this.init(opts);
                                    };

                                    Selectric.prototype = {
                                        utils: {
                                            /**
                                             * Detect mobile browser
                                             *
                                             * @return {boolean}
                                             */
                                            isMobile: function() {
                                                return /android|ip(hone|od|ad)/i.test(navigator.userAgent);
                                            },

                                            /**
                                             * Escape especial characters in string (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions)
                                             *
                                             * @param  {string} str - The string to be escaped
                                             * @return {string}       The string with the special characters escaped
                                             */
                                            escapeRegExp: function(str) {
                                                return str.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); // $& means the whole matched string
                                            },

                                            /**
                                             * Replace diacritics
                                             *
                                             * @param  {string} str - The string to replace the diacritics
                                             * @return {string}       The string with diacritics replaced with ascii characters
                                             */
                                            replaceDiacritics: function(str) {
                                                var k = diacritics.length;

                                                while (k--) {
                                                    str = str.toLowerCase().replace(diacritics[k], chars[k]);
                                                }

                                                return str;
                                            },

                                            /**
                                             * Format string
                                             * https://gist.github.com/atesgoral/984375
                                             *
                                             * @param  {string} f - String to be formated
                                             * @return {string}     String formated
                                             */
                                            format: function(f) {
                                                var a = arguments; // store outer arguments
                                                return ('' + f) // force format specifier to String
                                                    .replace( // replace tokens in format specifier
                                                        / \ { ( ? :(\d + ) | (\w + ))\
                                            }
                                    /g, / / match {
                                    token
                                }
                                    references
                                    function(s, // the matched string (ignored)
                                             i, // an argument index
                                             p // a property name
                                    ) {
                                        return p && a[1] // if property name and first argument exist
                                            ? a[1][p] // return property from first argument
                                            : a[i]; // assume argument index and return i-th argument
                                    });
                            },

                            /**
                             * Get the next enabled item in the options list.
                             *
                             * @param  {object} selectItems - The options object.
                             * @param  {number}    selected - Index of the currently selected option.
                             * @return {object}               The next enabled item.
                             */
                            nextEnabledItem: function(selectItems, selected) {
                                while (selectItems[selected = (selected + 1) % selectItems.length].disabled) {
                                    // empty
                                }
                                return selected;
                            },

                            /**
                             * Get the previous enabled item in the options list.
                             *
                             * @param  {object} selectItems - The options object.
                             * @param  {number}    selected - Index of the currently selected option.
                             * @return {object}               The previous enabled item.
                             */
                            previousEnabledItem: function(selectItems, selected) {
                                while (selectItems[selected = (selected > 0 ? selected: selectItems.length) - 1].disabled) {
                                    // empty
                                }
                                return selected;
                            },

                            /**
                             * Transform camelCase string to dash-case.
                             *
                             * @param  {string} str - The camelCased string.
                             * @return {string}       The string transformed to dash-case.
                             */
                            toDash: function(str) {
                                return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();
                            },

                            /**
                             * Calls the events and hooks registered with function name.
                             *
                             * @param {string}    fn - The name of the function.
                             * @param {number} scope - Scope that should be set on the function.
                             */
                            triggerCallback: function(fn, scope) {
                                var elm = scope.element;
                                var func = scope.options['on' + fn];

                                if ($.isFunction(func)) {
                                    func.call(elm, elm, scope);
                                }

                                if ($.fn[pluginName].hooks[fn]) {
                                    $.each($.fn[pluginName].hooks[fn],
                                        function() {
                                            this.call(elm, elm, scope);
                                        });
                                }

                                $(elm).trigger(pluginName + '-' + this.toDash(fn), scope);
                            }
                        },

                        /** Initializes */
                        init: function(opts) {
                        var _this = this;

                        // Set options
                        _this.options = $.extend(true, {},
                            $.fn[pluginName].defaults, _this.options, opts);

                        _this.utils.triggerCallback('BeforeInit', _this);

                        // Preserve data
                        _this.destroy(true);

                        // Disable on mobile browsers
                        if (_this.options.disableOnMobile && _this.utils.isMobile()) {
                            _this.disableOnMobile = true;
                            return;
                        }

                        // Get classes
                        _this.classes = _this.getClassNames();

                        // Create elements
                        var input = $('<input/>', {
                            'class': _this.classes.input,
                            'readonly': _this.utils.isMobile()
                        });
                        var items = $('<div/>', {
                            'class': _this.classes.items,
                            'tabindex': -1
                        });
                        var itemsScroll = $('<div/>', {
                            'class': _this.classes.scroll
                        });
                        var wrapper = $('<div/>', {
                            'class': _this.classes.prefix,
                            'html': _this.options.arrowButtonMarkup
                        });
                        var label = $('<p/>', {
                            'class': 'label'
                        });
                        var outerWrapper = _this.$element.wrap('<div/>').parent().append(wrapper.prepend(label), items, input);

                        _this.elements = {
                            input: input,
                            items: items,
                            itemsScroll: itemsScroll,
                            wrapper: wrapper,
                            label: label,
                            outerWrapper: outerWrapper
                        };

                        _this.$element.on(_this.eventTriggers).wrap('<div class="' + _this.classes.hideselect + '"/>');

                        _this.originalTabindex = _this.$element.prop('tabindex');
                        _this.$element.prop('tabindex', false);

                        _this.populate();
                        _this.activate();

                        _this.utils.triggerCallback('Init', _this);
                    },

                    /** Activates the plugin */
                    activate: function() {
                        var _this = this;
                        var originalWidth = _this.$element.width();

                        _this.utils.triggerCallback('BeforeActivate', _this);

                        _this.elements.outerWrapper.prop('class', [_this.classes.wrapper, _this.$element.prop('class').replace(/\S+/g, _this.classes.prefix + '-$&'), _this.options.responsive ? _this.classes.responsive: ''].join(' '));

                        if (_this.options.inheritOriginalWidth && originalWidth > 0) {
                            _this.elements.outerWrapper.width(originalWidth);
                        }

                        if (!_this.$element.prop('disabled')) {
                            _this.state.enabled = true;

                            // Not disabled, so... Removing disabled class
                            _this.elements.outerWrapper.removeClass(_this.classes.disabled);

                            // Remove styles from items box
                            // Fix incorrect height when refreshed is triggered with fewer options
                            _this.$li = _this.elements.items.removeAttr('style').find('li');

                            _this.bindEvents();
                        } else {
                            _this.elements.outerWrapper.addClass(_this.classes.disabled);
                            _this.elements.input.prop('disabled', true);
                        }

                        _this.utils.triggerCallback('Activate', _this);
                    },

                    /**
                     * Generate classNames for elements
                     *
                     * @return {object} Classes object
                     */
                    getClassNames: function() {
                        var _this = this;
                        var customClass = _this.options.customClass;
                        var classesObj = {};

                        $.each(classList.split(' '),
                            function(i, currClass) {
                                var c = customClass.prefix + currClass;
                                classesObj[currClass.toLowerCase()] = customClass.camelCase ? c: _this.utils.toDash(c);
                            });

                        classesObj.prefix = customClass.prefix;

                        return classesObj;
                    },

                    /** Set the label text */
                    setLabel: function() {
                        var _this = this;
                        var labelBuilder = _this.options.labelBuilder;
                        var currItem = _this.lookupItems[_this.state.currValue];

                        _this.elements.label.html($.isFunction(labelBuilder) ? labelBuilder(currItem) : _this.utils.format(labelBuilder, currItem));
                    },

                    /** Get and save the available options */
                    populate: function() {
                        var _this = this;
                        var $options = _this.$element.children();
                        var $justOptions = _this.$element.find('option');
                        var selectedIndex = $justOptions.index($justOptions.filter(':selected'));
                        var currIndex = 0;

                        _this.state.currValue = (_this.state.selected = ~selectedIndex ? selectedIndex: 0);
                        _this.state.selectedIdx = _this.state.currValue;
                        _this.items = [];
                        _this.lookupItems = [];

                        if ($options.length) {
                            // Build options markup
                            $options.each(function(i) {
                                var $elm = $(this);

                                if ($elm.is('optgroup')) {

                                    var optionsGroup = {
                                        element: $elm,
                                        label: $elm.prop('label'),
                                        groupDisabled: $elm.prop('disabled'),
                                        items: []
                                    };

                                    $elm.children().each(function(i) {
                                        var $elm = $(this);
                                        var optionText = $elm.html();

                                        optionsGroup.items[i] = {
                                            index: currIndex,
                                            element: $elm,
                                            value: $elm.val(),
                                            text: optionText,
                                            slug: _this.utils.replaceDiacritics(optionText),
                                            disabled: optionsGroup.groupDisabled
                                        };

                                        _this.lookupItems[currIndex] = optionsGroup.items[i];

                                        currIndex++;
                                    });

                                    _this.items[i] = optionsGroup;

                                } else {

                                    var optionText = $elm.html();

                                    _this.items[i] = {
                                        index: currIndex,
                                        element: $elm,
                                        value: $elm.val(),
                                        text: optionText,
                                        slug: _this.utils.replaceDiacritics(optionText),
                                        disabled: $elm.prop('disabled')
                                    };

                                    _this.lookupItems[currIndex] = _this.items[i];

                                    currIndex++;

                                }
                            });

                            _this.setLabel();
                            _this.elements.items.append(_this.elements.itemsScroll.html(_this.getItemsMarkup(_this.items)));
                        }
                    },

                    /**
                     * Generate options markup
                     *
                     * @param  {object} items - Object containing all available options
                     * @return {string}         HTML for the options box
                     */
                    getItemsMarkup: function(items) {
                        var _this = this;
                        var markup = '<ul>';

                        $.each(items,
                            function(i, elm) {
                                if (elm.label !== undefined) {

                                    markup += _this.utils.format('<ul class="{1}"><li class="{2}">{3}</li>', $.trim([_this.classes.group, elm.groupDisabled ? 'disabled': '', elm.element.prop('class')].join(' ')), _this.classes.grouplabel, elm.element.prop('label'));

                                    $.each(elm.items,
                                        function(i, elm) {
                                            markup += _this.getItemMarkup(elm.index, elm);
                                        });

                                    markup += '</ul>';

                                } else {

                                    markup += _this.getItemMarkup(elm.index, elm);

                                }
                            });

                        return markup + '</ul>';
                    },

                    /**
                     * Generate every option markup
                     *
                     * @param  {number} i   - Index of current item
                     * @param  {object} elm - Current item
                     * @return {string}       HTML for the option
                     */
                    getItemMarkup: function(i, elm) {
                        var _this = this;
                        var itemBuilder = _this.options.optionsItemBuilder;

                        return _this.utils.format('<li data-index="{1}" class="{2}">{3}</li>', i, $.trim([i === _this.state.currValue ? 'selected': '', i === _this.items.length - 1 ? 'last': '', elm.disabled ? 'disabled': ''].join(' ')), $.isFunction(itemBuilder) ? itemBuilder(elm, elm.element, i) : _this.utils.format(itemBuilder, elm));
                    },

                    /** Bind events on the elements */
                    bindEvents: function() {
                        var _this = this;

                        _this.elements.wrapper.add(_this.$element).add(_this.elements.outerWrapper).add(_this.elements.input).off(bindSufix);

                        _this.elements.outerWrapper.on('mouseenter' + bindSufix + ' mouseleave' + bindSufix,
                            function(e) {
                                $(this).toggleClass(_this.classes.hover, e.type === 'mouseenter');

                                // Delay close effect when openOnHover is true
                                if (_this.options.openOnHover) {
                                    clearTimeout(_this.closeTimer);

                                    if (e.type === 'mouseleave') {
                                        _this.closeTimer = setTimeout($.proxy(_this.close, _this), _this.options.hoverIntentTimeout);
                                    } else {
                                        _this.open();
                                    }
                                }
                            });

                        // Toggle open/close
                        _this.elements.wrapper.on('click' + bindSufix,
                            function(e) {
                                _this.state.opened ? _this.close() : _this.open(e);
                            });

                        _this.elements.input.prop({
                            tabindex: _this.originalTabindex,
                            disabled: false
                        }).on('keydown' + bindSufix, $.proxy(_this.handleKeys, _this)).on('focusin' + bindSufix,
                            function(e) {
                                _this.elements.outerWrapper.addClass(_this.classes.focus);

                                // Prevent the flicker when focusing out and back again in the browser window
                                _this.elements.input.one('blur',
                                    function() {
                                        _this.elements.input.blur();
                                    });

                                if (_this.options.openOnFocus && !_this.state.opened) {
                                    _this.open(e);
                                }
                            }).on('focusout' + bindSufix,
                            function() {
                                _this.elements.outerWrapper.removeClass(_this.classes.focus);
                            }).on('input propertychange',
                            function() {
                                var val = _this.elements.input.val();

                                // Clear search
                                clearTimeout(_this.resetStr);
                                _this.resetStr = setTimeout(function() {
                                        _this.elements.input.val('');
                                    },
                                    _this.options.keySearchTimeout);

                                if (val.length) {
                                    // Search in select options
                                    $.each(_this.items,
                                        function(i, elm) {
                                            if (RegExp('^' + _this.utils.escapeRegExp(val), 'i').test(elm.slug) && !elm.disabled) {
                                                _this.select(i);
                                                return false;
                                            }
                                        });
                                }
                            });

                        _this.$li.on({
                            // Prevent <input> blur on Chrome
                            mousedown: function(e) {
                                e.preventDefault();
                                e.stopPropagation();
                            },
                            click: function() {
                                // The second parameter is to close the box after click
                                _this.select($(this).data('index'), true);

                                // Chrome doesn't close options box if select is wrapped with a label
                                // We need to 'return false' to avoid that
                                return false;
                            }
                        });
                    },

                    /**
                     * Behavior when keyboard keys is pressed
                     *
                     * @param {object} e - Event object
                     */
                    handleKeys: function(e) {
                        var _this = this;
                        var key = e.keyCode || e.which;
                        var keys = _this.options.keys;

                        var isPrev = $.inArray(key, keys.previous) > -1;
                        var isNext = $.inArray(key, keys.next) > -1;
                        var isSelect = $.inArray(key, keys.select) > -1;
                        var isOpen = $.inArray(key, keys.open) > -1;
                        var idx = _this.state.selectedIdx;
                        var isFirstOrLastItem = (isPrev && idx === 0) || (isNext && (idx + 1) === _this.items.length);
                        var goToItem = 0;

                        // Enter / Space
                        if (key === 13 || key === 32) {
                            e.preventDefault();
                        }

                        // If it's a directional key
                        if (isPrev || isNext) {
                            if (!_this.options.allowWrap && isFirstOrLastItem) {
                                return;
                            }

                            if (isPrev) {
                                goToItem = _this.utils.previousEnabledItem(_this.items, idx);
                            }

                            if (isNext) {
                                goToItem = _this.utils.nextEnabledItem(_this.items, idx);
                            }

                            _this.select(goToItem);
                        }

                        // Tab / Enter / ESC
                        if (isSelect && _this.state.opened) {
                            _this.select(idx, true);
                            return;
                        }

                        // Space / Enter / Left / Up / Right / Down
                        if (isOpen && !_this.state.opened) {
                            _this.open();
                        }
                    },

                    /** Update the items object */
                    refresh: function() {
                        var _this = this;

                        _this.populate();
                        _this.activate();
                        _this.utils.triggerCallback('Refresh', _this);
                    },

                    /** Set options box width/height */
                    setOptionsDimensions: function() {
                        var _this = this;

                        // Calculate options box height
                        // Set a temporary class on the hidden parent of the element
                        var hiddenChildren = _this.elements.items.closest(':visible').children(':hidden').addClass(_this.classes.tempshow);
                        var maxHeight = _this.options.maxHeight;
                        var itemsWidth = _this.elements.items.outerWidth();
                        var wrapperWidth = _this.elements.wrapper.outerWidth() - (itemsWidth - _this.elements.items.width());

                        // Set the dimensions, minimum is wrapper width, expand for long items if option is true
                        if (!_this.options.expandToItemText || wrapperWidth > itemsWidth) {
                            _this.finalWidth = wrapperWidth;
                        } else {
                            // Make sure the scrollbar width is included
                            _this.elements.items.css('overflow', 'scroll');

                            // Set a really long width for _this.elements.outerWrapper
                            _this.elements.outerWrapper.width(9e4);
                            _this.finalWidth = _this.elements.items.width();
                            // Set scroll bar to auto
                            _this.elements.items.css('overflow', '');
                            _this.elements.outerWrapper.width('');
                        }

                        _this.elements.items.width(_this.finalWidth).height() > maxHeight && _this.elements.items.height(maxHeight);

                        // Remove the temporary class
                        hiddenChildren.removeClass(_this.classes.tempshow);
                    },

                    /** Detect if the options box is inside the window */
                    isInViewport: function() {
                        var _this = this;
                        var scrollTop = $win.scrollTop();
                        var winHeight = $win.height();
                        var uiPosX = _this.elements.outerWrapper.offset().top;
                        var uiHeight = _this.elements.outerWrapper.outerHeight();

                        var fitsDown = (uiPosX + uiHeight + _this.itemsHeight) <= (scrollTop + winHeight);
                        var fitsAbove = (uiPosX - _this.itemsHeight) > scrollTop;

                        // If it does not fit below, only render it
                        // above it fit's there.
                        // It's acceptable that the user needs to
                        // scroll the viewport to see the cut off UI
                        var renderAbove = !fitsDown && fitsAbove;

                        _this.elements.outerWrapper.toggleClass(_this.classes.above, renderAbove);
                    },

                    /**
                     * Detect if currently selected option is visible and scroll the options box to show it
                     *
                     * @param {number} index - Index of the selected items
                     */
                    detectItemVisibility: function(index) {
                        var _this = this;
                        var liHeight = _this.$li.eq(index).outerHeight();
                        var liTop = _this.$li[index].offsetTop;
                        var itemsScrollTop = _this.elements.itemsScroll.scrollTop();
                        var scrollT = liTop + liHeight * 2;

                        _this.elements.itemsScroll.scrollTop(scrollT > itemsScrollTop + _this.itemsHeight ? scrollT - _this.itemsHeight: liTop - liHeight < itemsScrollTop ? liTop - liHeight: itemsScrollTop);
                    },

                    /**
                     * Open the select options box
                     *
                     * @param {event} e - Event
                     */
                    open: function(e) {
                        var _this = this;

                        _this.utils.triggerCallback('BeforeOpen', _this);

                        if (e) {
                            e.preventDefault();
                            e.stopPropagation();
                        }

                        if (_this.state.enabled) {
                            _this.setOptionsDimensions();

                            // Find any other opened instances of select and close it
                            $('.' + _this.classes.hideselect, '.' + _this.classes.open).children()[pluginName]('close');

                            _this.state.opened = true;
                            _this.itemsHeight = _this.elements.items.outerHeight();
                            _this.itemsInnerHeight = _this.elements.items.height();

                            // Toggle options box visibility
                            _this.elements.outerWrapper.addClass(_this.classes.open);

                            // Give dummy input focus
                            _this.elements.input.val('');
                            if (e && e.type !== 'focusin') {
                                _this.elements.input.focus();
                            }

                            $doc.on('click' + bindSufix, $.proxy(_this.close, _this)).on('scroll' + bindSufix, $.proxy(_this.isInViewport, _this));
                            _this.isInViewport();

                            // Prevent window scroll when using mouse wheel inside items box
                            if (_this.options.preventWindowScroll) {
                                /* istanbul ignore next */
                                $doc.on('mousewheel' + bindSufix + ' DOMMouseScroll' + bindSufix, '.' + _this.classes.scroll,
                                    function(e) {
                                        var orgEvent = e.originalEvent;
                                        var scrollTop = $(this).scrollTop();
                                        var deltaY = 0;

                                        if ('detail' in orgEvent) {
                                            deltaY = orgEvent.detail * -1;
                                        }
                                        if ('wheelDelta' in orgEvent) {
                                            deltaY = orgEvent.wheelDelta;
                                        }
                                        if ('wheelDeltaY' in orgEvent) {
                                            deltaY = orgEvent.wheelDeltaY;
                                        }
                                        if ('deltaY' in orgEvent) {
                                            deltaY = orgEvent.deltaY * -1;
                                        }

                                        if (scrollTop === (this.scrollHeight - _this.itemsInnerHeight) && deltaY < 0 || scrollTop === 0 && deltaY > 0) {
                                            e.preventDefault();
                                        }
                                    });
                            }

                            _this.detectItemVisibility(_this.state.selectedIdx);

                            _this.utils.triggerCallback('Open', _this);
                        }
                    },

                    /** Close the select options box */
                    close: function() {
                        var _this = this;

                        _this.utils.triggerCallback('BeforeClose', _this);

                        _this.change();

                        // Remove custom events on document
                        $doc.off(bindSufix);

                        // Remove visible class to hide options box
                        _this.elements.outerWrapper.removeClass(_this.classes.open);

                        _this.state.opened = false;

                        _this.utils.triggerCallback('Close', _this);
                    },

                    /** Select current option and change the label */
                    change: function() {
                        var _this = this;

                        _this.utils.triggerCallback('BeforeChange', _this);

                        if (_this.state.currValue !== _this.state.selectedIdx) {
                            // Apply changed value to original select
                            _this.$element.prop('selectedIndex', _this.state.currValue = _this.state.selectedIdx).data('value', _this.lookupItems[_this.state.selectedIdx].text);

                            // Change label text
                            _this.setLabel();
                        }

                        _this.utils.triggerCallback('Change', _this);
                    },

                    /**
                     * Select option
                     *
                     * @param {number}  index - Index of the option that will be selected
                     * @param {boolean} close - Close the options box after selecting
                     */
                    select: function(index, close) {
                        var _this = this;

                        // Parameter index is required
                        if (index === undefined) {
                            return;
                        }

                        // If element is disabled, can't select it
                        if (!_this.lookupItems[index].disabled) {
                            _this.$li.filter('[data-index]').removeClass('selected').eq(_this.state.selectedIdx = index).addClass('selected');

                            _this.detectItemVisibility(index);

                            // If 'close' is false (default), the options box won't close after
                            // each selected item, this is necessary for keyboard navigation
                            if (close) {
                                _this.close();
                            }
                        }
                    },

                    /**
                     * Unbind and remove
                     *
                     * @param {boolean} preserveData - Check if the data on the element should be removed too
                     */
                    destroy: function(preserveData) {
                        var _this = this;

                        if (_this.state && _this.state.enabled) {
                            _this.elements.items.add(_this.elements.wrapper).add(_this.elements.input).remove();

                            if (!preserveData) {
                                _this.$element.removeData(pluginName).removeData('value');
                            }

                            _this.$element.prop('tabindex', _this.originalTabindex).off(bindSufix).off(_this.eventTriggers).unwrap().unwrap();

                            _this.state.enabled = false;
                        }
                    }
                };

            // A really lightweight plugin wrapper around the constructor,
            // preventing against multiple instantiations
            $.fn[pluginName] = function(args) {
                return this.each(function() {
                    var data = $.data(this, pluginName);

                    if (data && !data.disableOnMobile) { (typeof args === 'string' && data[args]) ? data[args]() : data.init(args);
                    } else {
                        $.data(this, pluginName, new Selectric(this, args));
                    }
                });
            };

            /**
             * Hooks for the callbacks
             *
             * @type {object}
             */
            $.fn[pluginName].hooks = {
                /**
                 * @param {string} callbackName - The callback name.
                 * @param {string}     hookName - The name of the hook to be attached.
                 * @param {function}         fn - Callback function.
                 */
                add: function(callbackName, hookName, fn) {
                    if (!this[callbackName]) {
                        this[callbackName] = {};
                    }

                    this[callbackName][hookName] = fn;
                },

                /**
                 * @param {string} callbackName - The callback name.
                 * @param {string}     hookName - The name of the hook that will be removed.
                 */
                remove: function(callbackName, hookName) {
                    delete this[callbackName][hookName];
                }
            };

            /**
             * Default plugin options
             *
             * @type {object}
             */
            $.fn[pluginName].defaults = {
                onChange: function(elm) {
                    $(elm).change();
                },
                maxHeight: 300,
                keySearchTimeout: 500,
                arrowButtonMarkup: '<b class="button">&#x25be;</b>',
                disableOnMobile: true,
                openOnFocus: true,
                openOnHover: false,
                hoverIntentTimeout: 500,
                expandToItemText: false,
                responsive: false,
                preventWindowScroll: true,
                inheritOriginalWidth: false,
                allowWrap: true,
                optionsItemBuilder: '{text}',
                // function(itemData, element, index)
                labelBuilder: '{text}',
                // function(currItem)
                keys: {
                    previous: [37, 38],
                    // Left / Up
                    next: [39, 40],
                    // Right / Down
                    select: [9, 13, 27],
                    // Tab / Enter / Escape
                    open: [13, 32, 37, 38, 39, 40],
                    // Enter / Space / Left / Up / Right / Down
                    close: [9, 27] // Tab / Escape
                },
                customClass: {
                    prefix: pluginName,
                    camelCase: false
                }
            };
        }));

/*! VelocityJS.org (1.2.3). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License */
/*! VelocityJS.org jQuery Shim (1.0.1). (C) 2014 The jQuery Foundation. MIT @license: en.wikipedia.org/wiki/MIT_License. */
!
    function(a) {
        function b(a) {
            var b = a.length,
                d = c.type(a);
            return "function" === d || c.isWindow(a) ? !1 : 1 === a.nodeType && b ? !0 : "array" === d || 0 === b || "number" == typeof b && b > 0 && b - 1 in a
        }
        if (!a.jQuery) {
            var c = function(a, b) {
                return new c.fn.init(a, b)
            };
            c.isWindow = function(a) {
                return null != a && a == a.window
            },
                c.type = function(a) {
                    return null == a ? a + "": "object" == typeof a || "function" == typeof a ? e[g.call(a)] || "object": typeof a
                },
                c.isArray = Array.isArray ||
                    function(a) {
                        return "array" === c.type(a)
                    },
                c.isPlainObject = function(a) {
                    var b;
                    if (!a || "object" !== c.type(a) || a.nodeType || c.isWindow(a)) return ! 1;
                    try {
                        if (a.constructor && !f.call(a, "constructor") && !f.call(a.constructor.prototype, "isPrototypeOf")) return ! 1
                    } catch(d) {
                        return ! 1
                    }
                    for (b in a);
                    return void 0 === b || f.call(a, b)
                },
                c.each = function(a, c, d) {
                    var e, f = 0,
                        g = a.length,
                        h = b(a);
                    if (d) {
                        if (h) for (; g > f && (e = c.apply(a[f], d), e !== !1); f++);
                        else for (f in a) if (e = c.apply(a[f], d), e === !1) break
                    } else if (h) for (; g > f && (e = c.call(a[f], f, a[f]), e !== !1); f++);
                    else for (f in a) if (e = c.call(a[f], f, a[f]), e === !1) break;
                    return a
                },
                c.data = function(a, b, e) {
                    if (void 0 === e) {
                        var f = a[c.expando],
                            g = f && d[f];
                        if (void 0 === b) return g;
                        if (g && b in g) return g[b]
                    } else if (void 0 !== b) {
                        var f = a[c.expando] || (a[c.expando] = ++c.uuid);
                        return d[f] = d[f] || {},
                            d[f][b] = e,
                            e
                    }
                },
                c.removeData = function(a, b) {
                    var e = a[c.expando],
                        f = e && d[e];
                    f && c.each(b,
                        function(a, b) {
                            delete f[b]
                        })
                },
                c.extend = function() {
                    var a, b, d, e, f, g, h = arguments[0] || {},
                        i = 1,
                        j = arguments.length,
                        k = !1;
                    for ("boolean" == typeof h && (k = h, h = arguments[i] || {},
                        i++), "object" != typeof h && "function" !== c.type(h) && (h = {}), i === j && (h = this, i--); j > i; i++) if (null != (f = arguments[i])) for (e in f) a = h[e],
                        d = f[e],
                    h !== d && (k && d && (c.isPlainObject(d) || (b = c.isArray(d))) ? (b ? (b = !1, g = a && c.isArray(a) ? a: []) : g = a && c.isPlainObject(a) ? a: {},
                        h[e] = c.extend(k, g, d)) : void 0 !== d && (h[e] = d));
                    return h
                },
                c.queue = function(a, d, e) {
                    function f(a, c) {
                        var d = c || [];
                        return null != a && (b(Object(a)) ? !
                            function(a, b) {
                                for (var c = +b.length,
                                         d = 0,
                                         e = a.length; c > d;) a[e++] = b[d++];
                                if (c !== c) for (; void 0 !== b[d];) a[e++] = b[d++];
                                return a.length = e,
                                    a
                            } (d, "string" == typeof a ? [a] : a) : [].push.call(d, a)),
                            d
                    }
                    if (a) {
                        d = (d || "fx") + "queue";
                        var g = c.data(a, d);
                        return e ? (!g || c.isArray(e) ? g = c.data(a, d, f(e)) : g.push(e), g) : g || []
                    }
                },
                c.dequeue = function(a, b) {
                    c.each(a.nodeType ? [a] : a,
                        function(a, d) {
                            b = b || "fx";
                            var e = c.queue(d, b),
                                f = e.shift();
                            "inprogress" === f && (f = e.shift()),
                            f && ("fx" === b && e.unshift("inprogress"), f.call(d,
                                function() {
                                    c.dequeue(d, b)
                                }))
                        })
                },
                c.fn = c.prototype = {
                    init: function(a) {
                        if (a.nodeType) return this[0] = a,
                            this;
                        throw new Error("Not a DOM node.")
                    },
                    offset: function() {
                        var b = this[0].getBoundingClientRect ? this[0].getBoundingClientRect() : {
                            top: 0,
                            left: 0
                        };
                        return {
                            top: b.top + (a.pageYOffset || document.scrollTop || 0) - (document.clientTop || 0),
                            left: b.left + (a.pageXOffset || document.scrollLeft || 0) - (document.clientLeft || 0)
                        }
                    },
                    position: function() {
                        function a() {
                            for (var a = this.offsetParent || document; a && "html" === !a.nodeType.toLowerCase && "static" === a.style.position;) a = a.offsetParent;
                            return a || document
                        }
                        var b = this[0],
                            a = a.apply(b),
                            d = this.offset(),
                            e = /^(?:body|html)$/i.test(a.nodeName) ? {
                                top: 0,
                                left: 0
                            }: c(a).offset();
                        return d.top -= parseFloat(b.style.marginTop) || 0,
                            d.left -= parseFloat(b.style.marginLeft) || 0,
                        a.style && (e.top += parseFloat(a.style.borderTopWidth) || 0, e.left += parseFloat(a.style.borderLeftWidth) || 0),
                            {
                                top: d.top - e.top,
                                left: d.left - e.left
                            }
                    }
                };
            var d = {};
            c.expando = "velocity" + (new Date).getTime(),
                c.uuid = 0;
            for (var e = {},
                     f = e.hasOwnProperty,
                     g = e.toString,
                     h = "Boolean Number String Function Array Date RegExp Object Error".split(" "), i = 0; i < h.length; i++) e["[object " + h[i] + "]"] = h[i].toLowerCase();
            c.fn.init.prototype = c.fn,
                a.Velocity = {
                    Utilities: c
                }
        }
    } (window),
    function(a) {
        "object" == typeof module && "object" == typeof module.exports ? module.exports = a() : "function" == typeof define && define.amd ? define(a) : a()
    } (function() {
        return function(a, b, c, d) {
            function e(a) {
                for (var b = -1,
                         c = a ? a.length: 0, d = []; ++b < c;) {
                    var e = a[b];
                    e && d.push(e)
                }
                return d
            }
            function f(a) {
                return p.isWrapped(a) ? a = [].slice.call(a) : p.isNode(a) && (a = [a]),
                    a
            }
            function g(a) {
                var b = m.data(a, "velocity");
                return null === b ? d: b
            }
            function h(a) {
                return function(b) {
                    return Math.round(b * a) * (1 / a)
                }
            }
            function i(a, c, d, e) {
                function f(a, b) {
                    return 1 - 3 * b + 3 * a
                }
                function g(a, b) {
                    return 3 * b - 6 * a
                }
                function h(a) {
                    return 3 * a
                }
                function i(a, b, c) {
                    return ((f(b, c) * a + g(b, c)) * a + h(b)) * a
                }
                function j(a, b, c) {
                    return 3 * f(b, c) * a * a + 2 * g(b, c) * a + h(b)
                }
                function k(b, c) {
                    for (var e = 0; p > e; ++e) {
                        var f = j(c, a, d);
                        if (0 === f) return c;
                        var g = i(c, a, d) - b;
                        c -= g / f
                    }
                    return c
                }
                function l() {
                    for (var b = 0; t > b; ++b) x[b] = i(b * u, a, d)
                }
                function m(b, c, e) {
                    var f, g, h = 0;
                    do g = c + (e - c) / 2,
                        f = i(g, a, d) - b,
                        f > 0 ? e = g: c = g;
                    while (Math.abs(f) > r && ++h < s);
                    return g
                }
                function n(b) {
                    for (var c = 0,
                             e = 1,
                             f = t - 1; e != f && x[e] <= b; ++e) c += u; --e;
                    var g = (b - x[e]) / (x[e + 1] - x[e]),
                        h = c + g * u,
                        i = j(h, a, d);
                    return i >= q ? k(b, h) : 0 == i ? h: m(b, c, c + u)
                }
                function o() {
                    y = !0,
                    (a != c || d != e) && l()
                }
                var p = 4,
                    q = .001,
                    r = 1e-7,
                    s = 10,
                    t = 11,
                    u = 1 / (t - 1),
                    v = "Float32Array" in b;
                if (4 !== arguments.length) return ! 1;
                for (var w = 0; 4 > w; ++w) if ("number" != typeof arguments[w] || isNaN(arguments[w]) || !isFinite(arguments[w])) return ! 1;
                a = Math.min(a, 1),
                    d = Math.min(d, 1),
                    a = Math.max(a, 0),
                    d = Math.max(d, 0);
                var x = v ? new Float32Array(t) : new Array(t),
                    y = !1,
                    z = function(b) {
                        return y || o(),
                            a === c && d === e ? b: 0 === b ? 0 : 1 === b ? 1 : i(n(b), c, e)
                    };
                z.getControlPoints = function() {
                    return [{
                        x: a,
                        y: c
                    },
                        {
                            x: d,
                            y: e
                        }]
                };
                var A = "generateBezier(" + [a, c, d, e] + ")";
                return z.toString = function() {
                    return A
                },
                    z
            }
            function j(a, b) {
                var c = a;
                return p.isString(a) ? t.Easings[a] || (c = !1) : c = p.isArray(a) && 1 === a.length ? h.apply(null, a) : p.isArray(a) && 2 === a.length ? u.apply(null, a.concat([b])) : p.isArray(a) && 4 === a.length ? i.apply(null, a) : !1,
                c === !1 && (c = t.Easings[t.defaults.easing] ? t.defaults.easing: s),
                    c
            }
            function k(a) {
                if (a) {
                    var b = (new Date).getTime(),
                        c = t.State.calls.length;
                    c > 1e4 && (t.State.calls = e(t.State.calls));
                    for (var f = 0; c > f; f++) if (t.State.calls[f]) {
                        var h = t.State.calls[f],
                            i = h[0],
                            j = h[2],
                            n = h[3],
                            o = !!n,
                            q = null;
                        n || (n = t.State.calls[f][3] = b - 16);
                        for (var r = Math.min((b - n) / j.duration, 1), s = 0, u = i.length; u > s; s++) {
                            var w = i[s],
                                y = w.element;
                            if (g(y)) {
                                var z = !1;
                                if (j.display !== d && null !== j.display && "none" !== j.display) {
                                    if ("flex" === j.display) {
                                        var A = ["-webkit-box", "-moz-box", "-ms-flexbox", "-webkit-flex"];
                                        m.each(A,
                                            function(a, b) {
                                                v.setPropertyValue(y, "display", b)
                                            })
                                    }
                                    v.setPropertyValue(y, "display", j.display)
                                }
                                j.visibility !== d && "hidden" !== j.visibility && v.setPropertyValue(y, "visibility", j.visibility);
                                for (var B in w) if ("element" !== B) {
                                    var C, D = w[B],
                                        E = p.isString(D.easing) ? t.Easings[D.easing] : D.easing;
                                    if (1 === r) C = D.endValue;
                                    else {
                                        var F = D.endValue - D.startValue;
                                        if (C = D.startValue + F * E(r, j, F), !o && C === D.currentValue) continue
                                    }
                                    if (D.currentValue = C, "tween" === B) q = C;
                                    else {
                                        if (v.Hooks.registered[B]) {
                                            var G = v.Hooks.getRoot(B),
                                                H = g(y).rootPropertyValueCache[G];
                                            H && (D.rootPropertyValue = H)
                                        }
                                        var I = v.setPropertyValue(y, B, D.currentValue + (0 === parseFloat(C) ? "": D.unitType), D.rootPropertyValue, D.scrollData);
                                        v.Hooks.registered[B] && (g(y).rootPropertyValueCache[G] = v.Normalizations.registered[G] ? v.Normalizations.registered[G]("extract", null, I[1]) : I[1]),
                                        "transform" === I[0] && (z = !0)
                                    }
                                }
                                j.mobileHA && g(y).transformCache.translate3d === d && (g(y).transformCache.translate3d = "(0px, 0px, 0px)", z = !0),
                                z && v.flushTransformCache(y)
                            }
                        }
                        j.display !== d && "none" !== j.display && (t.State.calls[f][2].display = !1),
                        j.visibility !== d && "hidden" !== j.visibility && (t.State.calls[f][2].visibility = !1),
                        j.progress && j.progress.call(h[1], h[1], r, Math.max(0, n + j.duration - b), n, q),
                        1 === r && l(f)
                    }
                }
                t.State.isTicking && x(k)
            }
            function l(a, b) {
                if (!t.State.calls[a]) return ! 1;
                for (var c = t.State.calls[a][0], e = t.State.calls[a][1], f = t.State.calls[a][2], h = t.State.calls[a][4], i = !1, j = 0, k = c.length; k > j; j++) {
                    var l = c[j].element;
                    if (b || f.loop || ("none" === f.display && v.setPropertyValue(l, "display", f.display), "hidden" === f.visibility && v.setPropertyValue(l, "visibility", f.visibility)), f.loop !== !0 && (m.queue(l)[1] === d || !/\.velocityQueueEntryFlag/i.test(m.queue(l)[1])) && g(l)) {
                        g(l).isAnimating = !1,
                            g(l).rootPropertyValueCache = {};
                        var n = !1;
                        m.each(v.Lists.transforms3D,
                            function(a, b) {
                                var c = /^scale/.test(b) ? 1 : 0,
                                    e = g(l).transformCache[b];
                                g(l).transformCache[b] !== d && new RegExp("^\\(" + c + "[^.]").test(e) && (n = !0, delete g(l).transformCache[b])
                            }),
                        f.mobileHA && (n = !0, delete g(l).transformCache.translate3d),
                        n && v.flushTransformCache(l),
                            v.Values.removeClass(l, "velocity-animating")
                    }
                    if (!b && f.complete && !f.loop && j === k - 1) try {
                        f.complete.call(e, e)
                    } catch(o) {
                        setTimeout(function() {
                                throw o
                            },
                            1)
                    }
                    h && f.loop !== !0 && h(e),
                    g(l) && f.loop === !0 && !b && (m.each(g(l).tweensContainer,
                        function(a, b) { / ^rotate / .test(a) && 360 === parseFloat(b.endValue) && (b.endValue = 0, b.startValue = 360),
                        /^backgroundPosition/.test(a) && 100 === parseFloat(b.endValue) && "%" === b.unitType && (b.endValue = 0, b.startValue = 100)
                        }), t(l, "reverse", {
                        loop: !0,
                        delay: f.delay
                    })),
                    f.queue !== !1 && m.dequeue(l, f.queue)
                }
                t.State.calls[a] = !1;
                for (var p = 0,
                         q = t.State.calls.length; q > p; p++) if (t.State.calls[p] !== !1) {
                    i = !0;
                    break
                }
                i === !1 && (t.State.isTicking = !1, delete t.State.calls, t.State.calls = [])
            }
            var m, n = function() {
                    if (c.documentMode) return c.documentMode;
                    for (var a = 7; a > 4; a--) {
                        var b = c.createElement("div");
                        if (b.innerHTML = "<!--[if IE " + a + "]><span></span><![endif]-->", b.getElementsByTagName("span").length) return b = null,
                            a
                    }
                    return d
                } (),
                o = function() {
                    var a = 0;
                    return b.webkitRequestAnimationFrame || b.mozRequestAnimationFrame ||
                        function(b) {
                            var c, d = (new Date).getTime();
                            return c = Math.max(0, 16 - (d - a)),
                                a = d + c,
                                setTimeout(function() {
                                        b(d + c)
                                    },
                                    c)
                        }
                } (),
                p = {
                    isString: function(a) {
                        return "string" == typeof a
                    },
                    isArray: Array.isArray ||
                    function(a) {
                        return "[object Array]" === Object.prototype.toString.call(a)
                    },
                    isFunction: function(a) {
                        return "[object Function]" === Object.prototype.toString.call(a)
                    },
                    isNode: function(a) {
                        return a && a.nodeType
                    },
                    isNodeList: function(a) {
                        return "object" == typeof a && /^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(a)) && a.length !== d && (0 === a.length || "object" == typeof a[0] && a[0].nodeType > 0)
                    },
                    isWrapped: function(a) {
                        return a && (a.jquery || b.Zepto && b.Zepto.zepto.isZ(a))
                    },
                    isSVG: function(a) {
                        return b.SVGElement && a instanceof b.SVGElement
                    },
                    isEmptyObject: function(a) {
                        for (var b in a) return ! 1;
                        return ! 0
                    }
                },
                q = !1;
            if (a.fn && a.fn.jquery ? (m = a, q = !0) : m = b.Velocity.Utilities, 8 >= n && !q) throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");
            if (7 >= n) return void(jQuery.fn.velocity = jQuery.fn.animate);
            var r = 400,
                s = "swing",
                t = {
                    State: {
                        isMobile: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),
                        isAndroid: /Android/i.test(navigator.userAgent),
                        isGingerbread: /Android 2\.3\.[3-7]/i.test(navigator.userAgent),
                        isChrome: b.chrome,
                        isFirefox: /Firefox/i.test(navigator.userAgent),
                        prefixElement: c.createElement("div"),
                        prefixMatches: {},
                        scrollAnchor: null,
                        scrollPropertyLeft: null,
                        scrollPropertyTop: null,
                        isTicking: !1,
                        calls: []
                    },
                    CSS: {},
                    Utilities: m,
                    Redirects: {},
                    Easings: {},
                    Promise: b.Promise,
                    defaults: {
                        queue: "",
                        duration: r,
                        easing: s,
                        begin: d,
                        complete: d,
                        progress: d,
                        display: d,
                        visibility: d,
                        loop: !1,
                        delay: !1,
                        mobileHA: !0,
                        _cacheValues: !0
                    },
                    init: function(a) {
                        m.data(a, "velocity", {
                            isSVG: p.isSVG(a),
                            isAnimating: !1,
                            computedStyle: null,
                            tweensContainer: null,
                            rootPropertyValueCache: {},
                            transformCache: {}
                        })
                    },
                    hook: null,
                    mock: !1,
                    version: {
                        major: 1,
                        minor: 2,
                        patch: 2
                    },
                    debug: !1
                };
            b.pageYOffset !== d ? (t.State.scrollAnchor = b, t.State.scrollPropertyLeft = "pageXOffset", t.State.scrollPropertyTop = "pageYOffset") : (t.State.scrollAnchor = c.documentElement || c.body.parentNode || c.body, t.State.scrollPropertyLeft = "scrollLeft", t.State.scrollPropertyTop = "scrollTop");
            var u = function() {
                function a(a) {
                    return - a.tension * a.x - a.friction * a.v
                }
                function b(b, c, d) {
                    var e = {
                        x: b.x + d.dx * c,
                        v: b.v + d.dv * c,
                        tension: b.tension,
                        friction: b.friction
                    };
                    return {
                        dx: e.v,
                        dv: a(e)
                    }
                }
                function c(c, d) {
                    var e = {
                            dx: c.v,
                            dv: a(c)
                        },
                        f = b(c, .5 * d, e),
                        g = b(c, .5 * d, f),
                        h = b(c, d, g),
                        i = 1 / 6 * (e.dx + 2 * (f.dx + g.dx) + h.dx),
                        j = 1 / 6 * (e.dv + 2 * (f.dv + g.dv) + h.dv);
                    return c.x = c.x + i * d,
                        c.v = c.v + j * d,
                        c
                }
                return function d(a, b, e) {
                    var f, g, h, i = {
                            x: -1,
                            v: 0,
                            tension: null,
                            friction: null
                        },
                        j = [0],
                        k = 0,
                        l = 1e-4,
                        m = .016;
                    for (a = parseFloat(a) || 500, b = parseFloat(b) || 20, e = e || null, i.tension = a, i.friction = b, f = null !== e, f ? (k = d(a, b), g = k / e * m) : g = m;;) if (h = c(h || i, g), j.push(1 + h.x), k += 16, !(Math.abs(h.x) > l && Math.abs(h.v) > l)) break;
                    return f ?
                        function(a) {
                            return j[a * (j.length - 1) | 0]
                        }: k
                }
            } ();
            t.Easings = {
                linear: function(a) {
                    return a
                },
                swing: function(a) {
                    return.5 - Math.cos(a * Math.PI) / 2
                },
                spring: function(a) {
                    return 1 - Math.cos(4.5 * a * Math.PI) * Math.exp(6 * -a)
                }
            },
                m.each([["ease", [.25, .1, .25, 1]], ["ease-in", [.42, 0, 1, 1]], ["ease-out", [0, 0, .58, 1]], ["ease-in-out", [.42, 0, .58, 1]], ["easeInSine", [.47, 0, .745, .715]], ["easeOutSine", [.39, .575, .565, 1]], ["easeInOutSine", [.445, .05, .55, .95]], ["easeInQuad", [.55, .085, .68, .53]], ["easeOutQuad", [.25, .46, .45, .94]], ["easeInOutQuad", [.455, .03, .515, .955]], ["easeInCubic", [.55, .055, .675, .19]], ["easeOutCubic", [.215, .61, .355, 1]], ["easeInOutCubic", [.645, .045, .355, 1]], ["easeInQuart", [.895, .03, .685, .22]], ["easeOutQuart", [.165, .84, .44, 1]], ["easeInOutQuart", [.77, 0, .175, 1]], ["easeInQuint", [.755, .05, .855, .06]], ["easeOutQuint", [.23, 1, .32, 1]], ["easeInOutQuint", [.86, 0, .07, 1]], ["easeInExpo", [.95, .05, .795, .035]], ["easeOutExpo", [.19, 1, .22, 1]], ["easeInOutExpo", [1, 0, 0, 1]], ["easeInCirc", [.6, .04, .98, .335]], ["easeOutCirc", [.075, .82, .165, 1]], ["easeInOutCirc", [.785, .135, .15, .86]]],
                    function(a, b) {
                        t.Easings[b[0]] = i.apply(null, b[1])
                    });
            var v = t.CSS = {
                RegEx: {
                    isHex: /^#([A-f\d]{3}){1,2}$/i,
                    valueUnwrap: /^[A-z]+\((.*)\)$/i,
                    wrappedValueAlreadyExtracted: /[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,
                    valueSplit: /([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi
                },
                Lists: {
                    colors: ["fill", "stroke", "stopColor", "color", "backgroundColor", "borderColor", "borderTopColor", "borderRightColor", "borderBottomColor", "borderLeftColor", "outlineColor"],
                    transformsBase: ["translateX", "translateY", "scale", "scaleX", "scaleY", "skewX", "skewY", "rotateZ"],
                    transforms3D: ["transformPerspective", "translateZ", "scaleZ", "rotateX", "rotateY"]
                },
                Hooks: {
                    templates: {
                        textShadow: ["Color X Y Blur", "black 0px 0px 0px"],
                        boxShadow: ["Color X Y Blur Spread", "black 0px 0px 0px 0px"],
                        clip: ["Top Right Bottom Left", "0px 0px 0px 0px"],
                        backgroundPosition: ["X Y", "0% 0%"],
                        transformOrigin: ["X Y Z", "50% 50% 0px"],
                        perspectiveOrigin: ["X Y", "50% 50%"]
                    },
                    registered: {},
                    register: function() {
                        for (var a = 0; a < v.Lists.colors.length; a++) {
                            var b = "color" === v.Lists.colors[a] ? "0 0 0 1": "255 255 255 1";
                            v.Hooks.templates[v.Lists.colors[a]] = ["Red Green Blue Alpha", b]
                        }
                        var c, d, e;
                        if (n) for (c in v.Hooks.templates) {
                            d = v.Hooks.templates[c],
                                e = d[0].split(" ");
                            var f = d[1].match(v.RegEx.valueSplit);
                            "Color" === e[0] && (e.push(e.shift()), f.push(f.shift()), v.Hooks.templates[c] = [e.join(" "), f.join(" ")])
                        }
                        for (c in v.Hooks.templates) {
                            d = v.Hooks.templates[c],
                                e = d[0].split(" ");
                            for (var a in e) {
                                var g = c + e[a],
                                    h = a;
                                v.Hooks.registered[g] = [c, h]
                            }
                        }
                    },
                    getRoot: function(a) {
                        var b = v.Hooks.registered[a];
                        return b ? b[0] : a
                    },
                    cleanRootPropertyValue: function(a, b) {
                        return v.RegEx.valueUnwrap.test(b) && (b = b.match(v.RegEx.valueUnwrap)[1]),
                        v.Values.isCSSNullValue(b) && (b = v.Hooks.templates[a][1]),
                            b
                    },
                    extractValue: function(a, b) {
                        var c = v.Hooks.registered[a];
                        if (c) {
                            var d = c[0],
                                e = c[1];
                            return b = v.Hooks.cleanRootPropertyValue(d, b),
                                b.toString().match(v.RegEx.valueSplit)[e]
                        }
                        return b
                    },
                    injectValue: function(a, b, c) {
                        var d = v.Hooks.registered[a];
                        if (d) {
                            var e, f, g = d[0],
                                h = d[1];
                            return c = v.Hooks.cleanRootPropertyValue(g, c),
                                e = c.toString().match(v.RegEx.valueSplit),
                                e[h] = b,
                                f = e.join(" ")
                        }
                        return c
                    }
                },
                Normalizations: {
                    registered: {
                        clip: function(a, b, c) {
                            switch (a) {
                                case "name":
                                    return "clip";
                                case "extract":
                                    var d;
                                    return v.RegEx.wrappedValueAlreadyExtracted.test(c) ? d = c: (d = c.toString().match(v.RegEx.valueUnwrap), d = d ? d[1].replace(/,(\s+)?/g, " ") : c),
                                        d;
                                case "inject":
                                    return "rect(" + c + ")"
                            }
                        },
                        blur: function(a, b, c) {
                            switch (a) {
                                case "name":
                                    return t.State.isFirefox ? "filter": "-webkit-filter";
                                case "extract":
                                    var d = parseFloat(c);
                                    if (!d && 0 !== d) {
                                        var e = c.toString().match(/blur\(([0-9]+[A-z]+)\)/i);
                                        d = e ? e[1] : 0
                                    }
                                    return d;
                                case "inject":
                                    return parseFloat(c) ? "blur(" + c + ")": "none"
                            }
                        },
                        opacity: function(a, b, c) {
                            if (8 >= n) switch (a) {
                                case "name":
                                    return "filter";
                                case "extract":
                                    var d = c.toString().match(/alpha\(opacity=(.*)\)/i);
                                    return c = d ? d[1] / 100 : 1;
                                case "inject":
                                    return b.style.zoom = 1,
                                        parseFloat(c) >= 1 ? "": "alpha(opacity=" + parseInt(100 * parseFloat(c), 10) + ")"
                            } else switch (a) {
                                case "name":
                                    return "opacity";
                                case "extract":
                                    return c;
                                case "inject":
                                    return c
                            }
                        }
                    },
                    register: function() {
                        9 >= n || t.State.isGingerbread || (v.Lists.transformsBase = v.Lists.transformsBase.concat(v.Lists.transforms3D));
                        for (var a = 0; a < v.Lists.transformsBase.length; a++) !
                            function() {
                                var b = v.Lists.transformsBase[a];
                                v.Normalizations.registered[b] = function(a, c, e) {
                                    switch (a) {
                                        case "name":
                                            return "transform";
                                        case "extract":
                                            return g(c) === d || g(c).transformCache[b] === d ? /^scale/i.test(b) ? 1 : 0 : g(c).transformCache[b].replace(/[()]/g, "");
                                        case "inject":
                                            var f = !1;
                                            switch (b.substr(0, b.length - 1)) {
                                                case "translate":
                                                    f = !/(%|px|em|rem|vw|vh|\d)$/i.test(e);
                                                    break;
                                                case "scal":
                                                case "scale":
                                                    t.State.isAndroid && g(c).transformCache[b] === d && 1 > e && (e = 1),
                                                        f = !/(\d)$/i.test(e);
                                                    break;
                                                case "skew":
                                                    f = !/(deg|\d)$/i.test(e);
                                                    break;
                                                case "rotate":
                                                    f = !/(deg|\d)$/i.test(e)
                                            }
                                            return f || (g(c).transformCache[b] = "(" + e + ")"),
                                                g(c).transformCache[b]
                                    }
                                }
                            } ();
                        for (var a = 0; a < v.Lists.colors.length; a++) !
                            function() {
                                var b = v.Lists.colors[a];
                                v.Normalizations.registered[b] = function(a, c, e) {
                                    switch (a) {
                                        case "name":
                                            return b;
                                        case "extract":
                                            var f;
                                            if (v.RegEx.wrappedValueAlreadyExtracted.test(e)) f = e;
                                            else {
                                                var g, h = {
                                                    black: "rgb(0, 0, 0)",
                                                    blue: "rgb(0, 0, 255)",
                                                    gray: "rgb(128, 128, 128)",
                                                    green: "rgb(0, 128, 0)",
                                                    red: "rgb(255, 0, 0)",
                                                    white: "rgb(255, 255, 255)"
                                                };
                                                /^[A-z]+$/i.test(e) ? g = h[e] !== d ? h[e] : h.black: v.RegEx.isHex.test(e) ? g = "rgb(" + v.Values.hexToRgb(e).join(" ") + ")": /^rgba?\(/i.test(e) || (g = h.black),
                                                    f = (g || e).toString().match(v.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g, " ")
                                            }
                                            return 8 >= n || 3 !== f.split(" ").length || (f += " 1"),
                                                f;
                                        case "inject":
                                            return 8 >= n ? 4 === e.split(" ").length && (e = e.split(/\s+/).slice(0, 3).join(" ")) : 3 === e.split(" ").length && (e += " 1"),
                                            (8 >= n ? "rgb": "rgba") + "(" + e.replace(/\s+/g, ",").replace(/\.(\d)+(?=,)/g, "") + ")"
                                    }
                                }
                            } ()
                    }
                },
                Names: {
                    camelCase: function(a) {
                        return a.replace(/-(\w)/g,
                            function(a, b) {
                                return b.toUpperCase()
                            })
                    },
                    SVGAttribute: function(a) {
                        var b = "width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";
                        return (n || t.State.isAndroid && !t.State.isChrome) && (b += "|transform"),
                            new RegExp("^(" + b + ")$", "i").test(a)
                    },
                    prefixCheck: function(a) {
                        if (t.State.prefixMatches[a]) return [t.State.prefixMatches[a], !0];
                        for (var b = ["", "Webkit", "Moz", "ms", "O"], c = 0, d = b.length; d > c; c++) {
                            var e;
                            if (e = 0 === c ? a: b[c] + a.replace(/^\w/,
                                    function(a) {
                                        return a.toUpperCase()
                                    }), p.isString(t.State.prefixElement.style[e])) return t.State.prefixMatches[a] = e,
                                [e, !0]
                        }
                        return [a, !1]
                    }
                },
                Values: {
                    hexToRgb: function(a) {
                        var b, c = /^#?([a-f\d])([a-f\d])([a-f\d])$/i,
                            d = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;
                        return a = a.replace(c,
                            function(a, b, c, d) {
                                return b + b + c + c + d + d
                            }),
                            b = d.exec(a),
                            b ? [parseInt(b[1], 16), parseInt(b[2], 16), parseInt(b[3], 16)] : [0, 0, 0]
                    },
                    isCSSNullValue: function(a) {
                        return 0 == a || /^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(a)
                    },
                    getUnitType: function(a) {
                        return /^(rotate|skew)/i.test(a) ? "deg": /(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(a) ? "": "px"
                    },
                    getDisplayType: function(a) {
                        var b = a && a.tagName.toString().toLowerCase();
                        return /^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(b) ? "inline": /^(li)$/i.test(b) ? "list-item": /^(tr)$/i.test(b) ? "table-row": /^(table)$/i.test(b) ? "table": /^(tbody)$/i.test(b) ? "table-row-group": "block"
                    },
                    addClass: function(a, b) {
                        a.classList ? a.classList.add(b) : a.className += (a.className.length ? " ": "") + b
                    },
                    removeClass: function(a, b) {
                        a.classList ? a.classList.remove(b) : a.className = a.className.toString().replace(new RegExp("(^|\\s)" + b.split(" ").join("|") + "(\\s|$)", "gi"), " ")
                    }
                },
                getPropertyValue: function(a, c, e, f) {
                    function h(a, c) {
                        function e() {
                            j && v.setPropertyValue(a, "display", "none")
                        }
                        var i = 0;
                        if (8 >= n) i = m.css(a, c);
                        else {
                            var j = !1;
                            if (/^(width|height)$/.test(c) && 0 === v.getPropertyValue(a, "display") && (j = !0, v.setPropertyValue(a, "display", v.Values.getDisplayType(a))), !f) {
                                if ("height" === c && "border-box" !== v.getPropertyValue(a, "boxSizing").toString().toLowerCase()) {
                                    var k = a.offsetHeight - (parseFloat(v.getPropertyValue(a, "borderTopWidth")) || 0) - (parseFloat(v.getPropertyValue(a, "borderBottomWidth")) || 0) - (parseFloat(v.getPropertyValue(a, "paddingTop")) || 0) - (parseFloat(v.getPropertyValue(a, "paddingBottom")) || 0);
                                    return e(),
                                        k
                                }
                                if ("width" === c && "border-box" !== v.getPropertyValue(a, "boxSizing").toString().toLowerCase()) {
                                    var l = a.offsetWidth - (parseFloat(v.getPropertyValue(a, "borderLeftWidth")) || 0) - (parseFloat(v.getPropertyValue(a, "borderRightWidth")) || 0) - (parseFloat(v.getPropertyValue(a, "paddingLeft")) || 0) - (parseFloat(v.getPropertyValue(a, "paddingRight")) || 0);
                                    return e(),
                                        l
                                }
                            }
                            var o;
                            o = g(a) === d ? b.getComputedStyle(a, null) : g(a).computedStyle ? g(a).computedStyle: g(a).computedStyle = b.getComputedStyle(a, null),
                            "borderColor" === c && (c = "borderTopColor"),
                                i = 9 === n && "filter" === c ? o.getPropertyValue(c) : o[c],
                            ("" === i || null === i) && (i = a.style[c]),
                                e()
                        }
                        if ("auto" === i && /^(top|right|bottom|left)$/i.test(c)) {
                            var p = h(a, "position"); ("fixed" === p || "absolute" === p && /top|left/i.test(c)) && (i = m(a).position()[c] + "px")
                        }
                        return i
                    }
                    var i;
                    if (v.Hooks.registered[c]) {
                        var j = c,
                            k = v.Hooks.getRoot(j);
                        e === d && (e = v.getPropertyValue(a, v.Names.prefixCheck(k)[0])),
                        v.Normalizations.registered[k] && (e = v.Normalizations.registered[k]("extract", a, e)),
                            i = v.Hooks.extractValue(j, e)
                    } else if (v.Normalizations.registered[c]) {
                        var l, o;
                        l = v.Normalizations.registered[c]("name", a),
                        "transform" !== l && (o = h(a, v.Names.prefixCheck(l)[0]), v.Values.isCSSNullValue(o) && v.Hooks.templates[c] && (o = v.Hooks.templates[c][1])),
                            i = v.Normalizations.registered[c]("extract", a, o)
                    }
                    if (!/^[\d-]/.test(i)) if (g(a) && g(a).isSVG && v.Names.SVGAttribute(c)) if (/^(height|width)$/i.test(c)) try {
                        i = a.getBBox()[c]
                    } catch(p) {
                        i = 0
                    } else i = a.getAttribute(c);
                    else i = h(a, v.Names.prefixCheck(c)[0]);
                    return v.Values.isCSSNullValue(i) && (i = 0),
                    t.debug >= 2 && console.log("Get " + c + ": " + i),
                        i
                },
                setPropertyValue: function(a, c, d, e, f) {
                    var h = c;
                    if ("scroll" === c) f.container ? f.container["scroll" + f.direction] = d: "Left" === f.direction ? b.scrollTo(d, f.alternateValue) : b.scrollTo(f.alternateValue, d);
                    else if (v.Normalizations.registered[c] && "transform" === v.Normalizations.registered[c]("name", a)) v.Normalizations.registered[c]("inject", a, d),
                        h = "transform",
                        d = g(a).transformCache[c];
                    else {
                        if (v.Hooks.registered[c]) {
                            var i = c,
                                j = v.Hooks.getRoot(c);
                            e = e || v.getPropertyValue(a, j),
                                d = v.Hooks.injectValue(i, d, e),
                                c = j
                        }
                        if (v.Normalizations.registered[c] && (d = v.Normalizations.registered[c]("inject", a, d), c = v.Normalizations.registered[c]("name", a)), h = v.Names.prefixCheck(c)[0], 8 >= n) try {
                            a.style[h] = d
                        } catch(k) {
                            t.debug && console.log("Browser does not support [" + d + "] for [" + h + "]")
                        } else g(a) && g(a).isSVG && v.Names.SVGAttribute(c) ? a.setAttribute(c, d) : a.style[h] = d;
                        t.debug >= 2 && console.log("Set " + c + " (" + h + "): " + d)
                    }
                    return [h, d]
                },
                flushTransformCache: function(a) {
                    function b(b) {
                        return parseFloat(v.getPropertyValue(a, b))
                    }
                    var c = "";
                    if ((n || t.State.isAndroid && !t.State.isChrome) && g(a).isSVG) {
                        var d = {
                            translate: [b("translateX"), b("translateY")],
                            skewX: [b("skewX")],
                            skewY: [b("skewY")],
                            scale: 1 !== b("scale") ? [b("scale"), b("scale")] : [b("scaleX"), b("scaleY")],
                            rotate: [b("rotateZ"), 0, 0]
                        };
                        m.each(g(a).transformCache,
                            function(a) { / ^translate / i.test(a) ? a = "translate": /^scale/i.test(a) ? a = "scale": /^rotate/i.test(a) && (a = "rotate"),
                            d[a] && (c += a + "(" + d[a].join(" ") + ") ", delete d[a])
                            })
                    } else {
                        var e, f;
                        m.each(g(a).transformCache,
                            function(b) {
                                return e = g(a).transformCache[b],
                                    "transformPerspective" === b ? (f = e, !0) : (9 === n && "rotateZ" === b && (b = "rotate"), void(c += b + e + " "))
                            }),
                        f && (c = "perspective" + f + " " + c)
                    }
                    v.setPropertyValue(a, "transform", c)
                }
            };
            v.Hooks.register(),
                v.Normalizations.register(),
                t.hook = function(a, b, c) {
                    var e = d;
                    return a = f(a),
                        m.each(a,
                            function(a, f) {
                                if (g(f) === d && t.init(f), c === d) e === d && (e = t.CSS.getPropertyValue(f, b));
                                else {
                                    var h = t.CSS.setPropertyValue(f, b, c);
                                    "transform" === h[0] && t.CSS.flushTransformCache(f),
                                        e = h
                                }
                            }),
                        e
                };
            var w = function() {
                function a() {
                    return h ? B.promise || null: i
                }
                function e() {
                    function a() {
                        function a(a, b) {
                            var c = d,
                                e = d,
                                g = d;
                            return p.isArray(a) ? (c = a[0], !p.isArray(a[1]) && /^[\d-]/.test(a[1]) || p.isFunction(a[1]) || v.RegEx.isHex.test(a[1]) ? g = a[1] : (p.isString(a[1]) && !v.RegEx.isHex.test(a[1]) || p.isArray(a[1])) && (e = b ? a[1] : j(a[1], h.duration), a[2] !== d && (g = a[2]))) : c = a,
                            b || (e = e || h.easing),
                            p.isFunction(c) && (c = c.call(f, y, x)),
                            p.isFunction(g) && (g = g.call(f, y, x)),
                                [c || 0, e, g]
                        }
                        function l(a, b) {
                            var c, d;
                            return d = (b || "0").toString().toLowerCase().replace(/[%A-z]+$/,
                                function(a) {
                                    return c = a,
                                        ""
                                }),
                            c || (c = v.Values.getUnitType(a)),
                                [d, c]
                        }
                        function n() {
                            var a = {
                                    myParent: f.parentNode || c.body,
                                    position: v.getPropertyValue(f, "position"),
                                    fontSize: v.getPropertyValue(f, "fontSize")
                                },
                                d = a.position === I.lastPosition && a.myParent === I.lastParent,
                                e = a.fontSize === I.lastFontSize;
                            I.lastParent = a.myParent,
                                I.lastPosition = a.position,
                                I.lastFontSize = a.fontSize;
                            var h = 100,
                                i = {};
                            if (e && d) i.emToPx = I.lastEmToPx,
                                i.percentToPxWidth = I.lastPercentToPxWidth,
                                i.percentToPxHeight = I.lastPercentToPxHeight;
                            else {
                                var j = g(f).isSVG ? c.createElementNS("http://www.w3.org/2000/svg", "rect") : c.createElement("div");
                                t.init(j),
                                    a.myParent.appendChild(j),
                                    m.each(["overflow", "overflowX", "overflowY"],
                                        function(a, b) {
                                            t.CSS.setPropertyValue(j, b, "hidden")
                                        }),
                                    t.CSS.setPropertyValue(j, "position", a.position),
                                    t.CSS.setPropertyValue(j, "fontSize", a.fontSize),
                                    t.CSS.setPropertyValue(j, "boxSizing", "content-box"),
                                    m.each(["minWidth", "maxWidth", "width", "minHeight", "maxHeight", "height"],
                                        function(a, b) {
                                            t.CSS.setPropertyValue(j, b, h + "%")
                                        }),
                                    t.CSS.setPropertyValue(j, "paddingLeft", h + "em"),
                                    i.percentToPxWidth = I.lastPercentToPxWidth = (parseFloat(v.getPropertyValue(j, "width", null, !0)) || 1) / h,
                                    i.percentToPxHeight = I.lastPercentToPxHeight = (parseFloat(v.getPropertyValue(j, "height", null, !0)) || 1) / h,
                                    i.emToPx = I.lastEmToPx = (parseFloat(v.getPropertyValue(j, "paddingLeft")) || 1) / h,
                                    a.myParent.removeChild(j)
                            }
                            return null === I.remToPx && (I.remToPx = parseFloat(v.getPropertyValue(c.body, "fontSize")) || 16),
                            null === I.vwToPx && (I.vwToPx = parseFloat(b.innerWidth) / 100, I.vhToPx = parseFloat(b.innerHeight) / 100),
                                i.remToPx = I.remToPx,
                                i.vwToPx = I.vwToPx,
                                i.vhToPx = I.vhToPx,
                            t.debug >= 1 && console.log("Unit ratios: " + JSON.stringify(i), f),
                                i
                        }
                        if (h.begin && 0 === y) try {
                            h.begin.call(o, o)
                        } catch(r) {
                            setTimeout(function() {
                                    throw r
                                },
                                1)
                        }
                        if ("scroll" === C) {
                            var u, w, z, A = /^x$/i.test(h.axis) ? "Left": "Top",
                                D = parseFloat(h.offset) || 0;
                            h.container ? p.isWrapped(h.container) || p.isNode(h.container) ? (h.container = h.container[0] || h.container, u = h.container["scroll" + A], z = u + m(f).position()[A.toLowerCase()] + D) : h.container = null: (u = t.State.scrollAnchor[t.State["scrollProperty" + A]], w = t.State.scrollAnchor[t.State["scrollProperty" + ("Left" === A ? "Top": "Left")]], z = m(f).offset()[A.toLowerCase()] + D),
                                i = {
                                    scroll: {
                                        rootPropertyValue: !1,
                                        startValue: u,
                                        currentValue: u,
                                        endValue: z,
                                        unitType: "",
                                        easing: h.easing,
                                        scrollData: {
                                            container: h.container,
                                            direction: A,
                                            alternateValue: w
                                        }
                                    },
                                    element: f
                                },
                            t.debug && console.log("tweensContainer (scroll): ", i.scroll, f)
                        } else if ("reverse" === C) {
                            if (!g(f).tweensContainer) return void m.dequeue(f, h.queue);
                            "none" === g(f).opts.display && (g(f).opts.display = "auto"),
                            "hidden" === g(f).opts.visibility && (g(f).opts.visibility = "visible"),
                                g(f).opts.loop = !1,
                                g(f).opts.begin = null,
                                g(f).opts.complete = null,
                            s.easing || delete h.easing,
                            s.duration || delete h.duration,
                                h = m.extend({},
                                    g(f).opts, h);
                            var E = m.extend(!0, {},
                                g(f).tweensContainer);
                            for (var F in E) if ("element" !== F) {
                                var G = E[F].startValue;
                                E[F].startValue = E[F].currentValue = E[F].endValue,
                                    E[F].endValue = G,
                                p.isEmptyObject(s) || (E[F].easing = h.easing),
                                t.debug && console.log("reverse tweensContainer (" + F + "): " + JSON.stringify(E[F]), f)
                            }
                            i = E
                        } else if ("start" === C) {
                            var E;
                            g(f).tweensContainer && g(f).isAnimating === !0 && (E = g(f).tweensContainer),
                                m.each(q,
                                    function(b, c) {
                                        if (RegExp("^" + v.Lists.colors.join("$|^") + "$").test(b)) {
                                            var e = a(c, !0),
                                                f = e[0],
                                                g = e[1],
                                                h = e[2];
                                            if (v.RegEx.isHex.test(f)) {
                                                for (var i = ["Red", "Green", "Blue"], j = v.Values.hexToRgb(f), k = h ? v.Values.hexToRgb(h) : d, l = 0; l < i.length; l++) {
                                                    var m = [j[l]];
                                                    g && m.push(g),
                                                    k !== d && m.push(k[l]),
                                                        q[b + i[l]] = m
                                                }
                                                delete q[b]
                                            }
                                        }
                                    });
                            for (var H in q) {
                                var K = a(q[H]),
                                    L = K[0],
                                    M = K[1],
                                    N = K[2];
                                H = v.Names.camelCase(H);
                                var O = v.Hooks.getRoot(H),
                                    P = !1;
                                if (g(f).isSVG || "tween" === O || v.Names.prefixCheck(O)[1] !== !1 || v.Normalizations.registered[O] !== d) { (h.display !== d && null !== h.display && "none" !== h.display || h.visibility !== d && "hidden" !== h.visibility) && /opacity|filter/.test(H) && !N && 0 !== L && (N = 0),
                                    h._cacheValues && E && E[H] ? (N === d && (N = E[H].endValue + E[H].unitType), P = g(f).rootPropertyValueCache[O]) : v.Hooks.registered[H] ? N === d ? (P = v.getPropertyValue(f, O), N = v.getPropertyValue(f, H, P)) : P = v.Hooks.templates[O][1] : N === d && (N = v.getPropertyValue(f, H));
                                    var Q, R, S, T = !1;
                                    if (Q = l(H, N), N = Q[0], S = Q[1], Q = l(H, L), L = Q[0].replace(/^([+-\/*])=/,
                                            function(a, b) {
                                                return T = b,
                                                    ""
                                            }), R = Q[1], N = parseFloat(N) || 0, L = parseFloat(L) || 0, "%" === R && (/^(fontSize|lineHeight)$/.test(H) ? (L /= 100, R = "em") : /^scale/.test(H) ? (L /= 100, R = "") : /(Red|Green|Blue)$/i.test(H) && (L = L / 100 * 255, R = "")), /[\/*]/.test(T)) R = S;
                                    else if (S !== R && 0 !== N) if (0 === L) R = S;
                                    else {
                                        e = e || n();
                                        var U = /margin|padding|left|right|width|text|word|letter/i.test(H) || /X$/.test(H) || "x" === H ? "x": "y";
                                        switch (S) {
                                            case "%":
                                                N *= "x" === U ? e.percentToPxWidth: e.percentToPxHeight;
                                                break;
                                            case "px":
                                                break;
                                            default:
                                                N *= e[S + "ToPx"]
                                        }
                                        switch (R) {
                                            case "%":
                                                N *= 1 / ("x" === U ? e.percentToPxWidth: e.percentToPxHeight);
                                                break;
                                            case "px":
                                                break;
                                            default:
                                                N *= 1 / e[R + "ToPx"]
                                        }
                                    }
                                    switch (T) {
                                        case "+":
                                            L = N + L;
                                            break;
                                        case "-":
                                            L = N - L;
                                            break;
                                        case "*":
                                            L = N * L;
                                            break;
                                        case "/":
                                            L = N / L
                                    }
                                    i[H] = {
                                        rootPropertyValue: P,
                                        startValue: N,
                                        currentValue: N,
                                        endValue: L,
                                        unitType: R,
                                        easing: M
                                    },
                                    t.debug && console.log("tweensContainer (" + H + "): " + JSON.stringify(i[H]), f)
                                } else t.debug && console.log("Skipping [" + O + "] due to a lack of browser support.")
                            }
                            i.element = f
                        }
                        i.element && (v.Values.addClass(f, "velocity-animating"), J.push(i), "" === h.queue && (g(f).tweensContainer = i, g(f).opts = h), g(f).isAnimating = !0, y === x - 1 ? (t.State.calls.push([J, o, h, null, B.resolver]), t.State.isTicking === !1 && (t.State.isTicking = !0, k())) : y++)
                    }
                    var e, f = this,
                        h = m.extend({},
                            t.defaults, s),
                        i = {};
                    switch (g(f) === d && t.init(f), parseFloat(h.delay) && h.queue !== !1 && m.queue(f, h.queue,
                        function(a) {
                            t.velocityQueueEntryFlag = !0,
                                g(f).delayTimer = {
                                    setTimeout: setTimeout(a, parseFloat(h.delay)),
                                    next: a
                                }
                        }), h.duration.toString().toLowerCase()) {
                        case "fast":
                            h.duration = 200;
                            break;
                        case "normal":
                            h.duration = r;
                            break;
                        case "slow":
                            h.duration = 600;
                            break;
                        default:
                            h.duration = parseFloat(h.duration) || 1
                    }
                    t.mock !== !1 && (t.mock === !0 ? h.duration = h.delay = 1 : (h.duration *= parseFloat(t.mock) || 1, h.delay *= parseFloat(t.mock) || 1)),
                        h.easing = j(h.easing, h.duration),
                    h.begin && !p.isFunction(h.begin) && (h.begin = null),
                    h.progress && !p.isFunction(h.progress) && (h.progress = null),
                    h.complete && !p.isFunction(h.complete) && (h.complete = null),
                    h.display !== d && null !== h.display && (h.display = h.display.toString().toLowerCase(), "auto" === h.display && (h.display = t.CSS.Values.getDisplayType(f))),
                    h.visibility !== d && null !== h.visibility && (h.visibility = h.visibility.toString().toLowerCase()),
                        h.mobileHA = h.mobileHA && t.State.isMobile && !t.State.isGingerbread,
                        h.queue === !1 ? h.delay ? setTimeout(a, h.delay) : a() : m.queue(f, h.queue,
                            function(b, c) {
                                return c === !0 ? (B.promise && B.resolver(o), !0) : (t.velocityQueueEntryFlag = !0, void a(b))
                            }),
                    "" !== h.queue && "fx" !== h.queue || "inprogress" === m.queue(f)[0] || m.dequeue(f)
                }
                var h, i, n, o, q, s, u = arguments[0] && (arguments[0].p || m.isPlainObject(arguments[0].properties) && !arguments[0].properties.names || p.isString(arguments[0].properties));
                if (p.isWrapped(this) ? (h = !1, n = 0, o = this, i = this) : (h = !0, n = 1, o = u ? arguments[0].elements || arguments[0].e: arguments[0]), o = f(o)) {
                    u ? (q = arguments[0].properties || arguments[0].p, s = arguments[0].options || arguments[0].o) : (q = arguments[n], s = arguments[n + 1]);
                    var x = o.length,
                        y = 0;
                    if (!/^(stop|finish|finishAll)$/i.test(q) && !m.isPlainObject(s)) {
                        var z = n + 1;
                        s = {};
                        for (var A = z; A < arguments.length; A++) p.isArray(arguments[A]) || !/^(fast|normal|slow)$/i.test(arguments[A]) && !/^\d/.test(arguments[A]) ? p.isString(arguments[A]) || p.isArray(arguments[A]) ? s.easing = arguments[A] : p.isFunction(arguments[A]) && (s.complete = arguments[A]) : s.duration = arguments[A]
                    }
                    var B = {
                        promise: null,
                        resolver: null,
                        rejecter: null
                    };
                    h && t.Promise && (B.promise = new t.Promise(function(a, b) {
                        B.resolver = a,
                            B.rejecter = b
                    }));
                    var C;
                    switch (q) {
                        case "scroll":
                            C = "scroll";
                            break;
                        case "reverse":
                            C = "reverse";
                            break;
                        case "finish":
                        case "finishAll":
                        case "stop":
                            m.each(o,
                                function(a, b) {
                                    g(b) && g(b).delayTimer && (clearTimeout(g(b).delayTimer.setTimeout), g(b).delayTimer.next && g(b).delayTimer.next(), delete g(b).delayTimer),
                                    "finishAll" !== q || s !== !0 && !p.isString(s) || (m.each(m.queue(b, p.isString(s) ? s: ""),
                                        function(a, b) {
                                            p.isFunction(b) && b()
                                        }), m.queue(b, p.isString(s) ? s: "", []))
                                });
                            var D = [];
                            return m.each(t.State.calls,
                                function(a, b) {
                                    b && m.each(b[1],
                                        function(c, e) {
                                            var f = s === d ? "": s;
                                            return f === !0 || b[2].queue === f || s === d && b[2].queue === !1 ? void m.each(o,
                                                function(c, d) {
                                                    d === e && ((s === !0 || p.isString(s)) && (m.each(m.queue(d, p.isString(s) ? s: ""),
                                                        function(a, b) {
                                                            p.isFunction(b) && b(null, !0)
                                                        }), m.queue(d, p.isString(s) ? s: "", [])), "stop" === q ? (g(d) && g(d).tweensContainer && f !== !1 && m.each(g(d).tweensContainer,
                                                        function(a, b) {
                                                            b.endValue = b.currentValue
                                                        }), D.push(a)) : ("finish" === q || "finishAll" === q) && (b[2].duration = 1))
                                                }) : !0
                                        })
                                }),
                            "stop" === q && (m.each(D,
                                function(a, b) {
                                    l(b, !0)
                                }), B.promise && B.resolver(o)),
                                a();
                        default:
                            if (!m.isPlainObject(q) || p.isEmptyObject(q)) {
                                if (p.isString(q) && t.Redirects[q]) {
                                    var E = m.extend({},
                                        s),
                                        F = E.duration,
                                        G = E.delay || 0;
                                    return E.backwards === !0 && (o = m.extend(!0, [], o).reverse()),
                                        m.each(o,
                                            function(a, b) {
                                                parseFloat(E.stagger) ? E.delay = G + parseFloat(E.stagger) * a: p.isFunction(E.stagger) && (E.delay = G + E.stagger.call(b, a, x)),
                                                E.drag && (E.duration = parseFloat(F) || (/^(callout|transition)/.test(q) ? 1e3: r), E.duration = Math.max(E.duration * (E.backwards ? 1 - a / x: (a + 1) / x), .75 * E.duration, 200)),
                                                    t.Redirects[q].call(b, b, E || {},
                                                        a, x, o, B.promise ? B: d)
                                            }),
                                        a()
                                }
                                var H = "Velocity: First argument (" + q + ") was not a property map, a known action, or a registered redirect. Aborting.";
                                return B.promise ? B.rejecter(new Error(H)) : console.log(H),
                                    a()
                            }
                            C = "start"
                    }
                    var I = {
                            lastParent: null,
                            lastPosition: null,
                            lastFontSize: null,
                            lastPercentToPxWidth: null,
                            lastPercentToPxHeight: null,
                            lastEmToPx: null,
                            remToPx: null,
                            vwToPx: null,
                            vhToPx: null
                        },
                        J = [];
                    m.each(o,
                        function(a, b) {
                            p.isNode(b) && e.call(b)
                        });
                    var K, E = m.extend({},
                        t.defaults, s);
                    if (E.loop = parseInt(E.loop), K = 2 * E.loop - 1, E.loop) for (var L = 0; K > L; L++) {
                        var M = {
                            delay: E.delay,
                            progress: E.progress
                        };
                        L === K - 1 && (M.display = E.display, M.visibility = E.visibility, M.complete = E.complete),
                            w(o, "reverse", M)
                    }
                    return a()
                }
            };
            t = m.extend(w, t),
                t.animate = w;
            var x = b.requestAnimationFrame || o;
            return t.State.isMobile || c.hidden === d || c.addEventListener("visibilitychange",
                function() {
                    c.hidden ? (x = function(a) {
                        return setTimeout(function() {
                                a(!0)
                            },
                            16)
                    },
                        k()) : x = b.requestAnimationFrame || o
                }),
                a.Velocity = t,
            a !== b && (a.fn.velocity = w, a.fn.velocity.defaults = t.defaults),
                m.each(["Down", "Up"],
                    function(a, b) {
                        t.Redirects["slide" + b] = function(a, c, e, f, g, h) {
                            var i = m.extend({},
                                c),
                                j = i.begin,
                                k = i.complete,
                                l = {
                                    height: "",
                                    marginTop: "",
                                    marginBottom: "",
                                    paddingTop: "",
                                    paddingBottom: ""
                                },
                                n = {};
                            i.display === d && (i.display = "Down" === b ? "inline" === t.CSS.Values.getDisplayType(a) ? "inline-block": "block": "none"),
                                i.begin = function() {
                                    j && j.call(g, g);
                                    for (var c in l) {
                                        n[c] = a.style[c];
                                        var d = t.CSS.getPropertyValue(a, c);
                                        l[c] = "Down" === b ? [d, 0] : [0, d]
                                    }
                                    n.overflow = a.style.overflow,
                                        a.style.overflow = "hidden"
                                },
                                i.complete = function() {
                                    for (var b in n) a.style[b] = n[b];
                                    k && k.call(g, g),
                                    h && h.resolver(g)
                                },
                                t(a, l, i)
                        }
                    }),
                m.each(["In", "Out"],
                    function(a, b) {
                        t.Redirects["fade" + b] = function(a, c, e, f, g, h) {
                            var i = m.extend({},
                                c),
                                j = {
                                    opacity: "In" === b ? 1 : 0
                                },
                                k = i.complete;
                            i.complete = e !== f - 1 ? i.begin = null: function() {
                                k && k.call(g, g),
                                h && h.resolver(g)
                            },
                            i.display === d && (i.display = "In" === b ? "auto": "none"),
                                t(this, j, i)
                        }
                    }),
                t
        } (window.jQuery || window.Zepto || window, window, document)
    }); !
    function(i) {
        "use strict";
        "function" == typeof define && define.amd ? define(["jquery"], i) : "undefined" != typeof exports ? module.exports = i(require("jquery")) : i(jQuery)
    } (function(i) {
        "use strict";
        var e = window.Slick || {};
        e = function() {
            function e(e, s) {
                var o, n = this;
                n.defaults = {
                    enableAnchor: !1,
                    accessibility: !0,
                    adaptiveHeight: !1,
                    appendArrows: i(e).closest(".container"),
                    appendDots: i(e).closest(".container"),
                    searchForLinks: i(e).closest(".container"),
                    arrows: !0,
                    arrowsPlain: !1,
                    asNavFor: null,
                    prevArrow: '<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button"><span class="icon-left-carat slick-arrow__icon"></span></button>',
                    nextArrow: '<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button"><span class="icon-right-carat slick-arrow__icon"></span></button>',
                    autoplay: !1,
                    autoplaySpeed: 3e3,
                    centerMode: !1,
                    centerPadding: "50px",
                    cssEase: "ease-out",
                    customPaging: function(i, e) {
                        return '<button type="button" data-role="none" role="button" aria-required="false" tabindex="0">' + (e + 1) + "</button>"
                    },
                    dots: !1,
                    dotsClass: "slick-dots",
                    links: !1,
                    linkClass: "slick-links",
                    draggable: !0,
                    easing: "ease-out",
                    edgeFriction: .35,
                    fade: !1,
                    focusOnSelect: !1,
                    infinite: !0,
                    initialSlide: 0,
                    lazyLoad: "ondemand",
                    mobileFirst: !1,
                    pauseOnHover: !0,
                    pauseOnDotsHover: !1,
                    respondTo: "window",
                    responsive: null,
                    rows: 1,
                    rtl: !1,
                    slide: "",
                    slidesPerRow: 1,
                    slidesToShow: 1,
                    slidesToScroll: 1,
                    speed: 1e3,
                    swipe: !0,
                    swipeToSlide: !1,
                    touchMove: !0,
                    touchThreshold: 5,
                    useCSS: !0,
                    useTransform: !1,
                    variableWidth: !1,
                    vertical: !1,
                    verticalSwiping: !1,
                    waitForAnimate: !0,
                    zIndex: 1e3,
                    shiftAnimate: !1,
                    shiftPecentage: .5,
                    scaleAnimate: !1,
                    setClassToContainer: !1,
                    mixMode: []
                },
                    n.initials = {
                        $ele: i(e),
                        animating: !1,
                        dragging: !1,
                        autoPlayTimer: null,
                        currentDirection: 0,
                        currentLeft: null,
                        currentSlide: 0,
                        direction: 1,
                        $dots: null,
                        $links: null,
                        listWidth: null,
                        listHeight: null,
                        loadIndex: 0,
                        $nextArrow: null,
                        $prevArrow: null,
                        slideCount: null,
                        slideWidth: null,
                        $slideTrack: null,
                        $slides: null,
                        sliding: !1,
                        slideOffset: 0,
                        swipeLeft: null,
                        $list: null,
                        touchObject: {},
                        transformsEnabled: !1,
                        unslicked: !1
                    },
                    i.extend(n, n.initials),
                    n.activeBreakpoint = null,
                    n.animType = null,
                    n.animProp = null,
                    n.breakpoints = [],
                    n.breakpointSettings = [],
                    n.cssTransitions = !1,
                    n.hidden = "hidden",
                    n.paused = !1,
                    n.positionProp = null,
                    n.respondTo = null,
                    n.rowCount = 1,
                    n.shouldClick = !0,
                    n.$slider = i(e),
                    n.$slidesCache = null,
                    n.transformType = null,
                    n.transitionType = null,
                    n.visibilityChange = "visibilitychange",
                    n.windowWidth = 0,
                    n.windowTimer = null,
                    o = i(e).data("slick") || {},
                    n.options = i.extend({},
                        n.defaults, o, s),
                    n.currentSlide = n.options.initialSlide,
                    n.originalSettings = n.options,
                    "undefined" != typeof document.mozHidden ? (n.hidden = "mozHidden", n.visibilityChange = "mozvisibilitychange") : "undefined" != typeof document.webkitHidden && (n.hidden = "webkitHidden", n.visibilityChange = "webkitvisibilitychange"),
                    n.autoPlay = i.proxy(n.autoPlay, n),
                    n.autoPlayClear = i.proxy(n.autoPlayClear, n),
                    n.changeSlide = i.proxy(n.changeSlide, n),
                    n.clickHandler = i.proxy(n.clickHandler, n),
                    n.selectHandler = i.proxy(n.selectHandler, n),
                    n.setPosition = i.proxy(n.setPosition, n),
                    n.swipeHandler = i.proxy(n.swipeHandler, n),
                    n.dragHandler = i.proxy(n.dragHandler, n),
                    n.keyHandler = i.proxy(n.keyHandler, n),
                    n.autoPlayIterator = i.proxy(n.autoPlayIterator, n),
                    n.instanceUid = t++,
                    n.htmlExpr = /^(?:\s*(<[\w\W]+>)[^>]*)$/,
                    n.registerBreakpoints(),
                    n.init(!0),
                    n.checkResponsive(!0)
            }
            var t = 0;
            return e
        } (),
            e.prototype.addSlide = e.prototype.slickAdd = function(e, t, s) {
                var o = this;
                if ("boolean" == typeof t) s = t,
                    t = null;
                else if (0 > t || t >= o.slideCount) return ! 1;
                o.unload(),
                    "number" == typeof t ? 0 === t && 0 === o.$slides.length ? i(e).appendTo(o.$slideTrack) : s ? i(e).insertBefore(o.$slides.eq(t)) : i(e).insertAfter(o.$slides.eq(t)) : s === !0 ? i(e).prependTo(o.$slideTrack) : i(e).appendTo(o.$slideTrack),
                    o.$slides = o.$slideTrack.children(this.options.slide),
                    o.$slideTrack.children(this.options.slide).detach(),
                    o.$slideTrack.append(o.$slides),
                    o.$slides.each(function(e, t) {
                        i(t).attr("data-slick-index", e)
                    }),
                    o.$slidesCache = o.$slides,
                    o.reinit()
            },
            e.prototype.animateHeight = function() {
                var i = this;
                if (1 === i.options.slidesToShow && i.options.adaptiveHeight === !0 && i.options.vertical === !1) {
                    var e = i.$slides.eq(i.currentSlide).outerHeight(!0);
                    i.$list.velocity({
                            height: e
                        },
                        i.options.speed)
                }
            },
            e.prototype.animateSlide = function(e, t) {
                var s = {},
                    o = this;
                o.animateHeight(),
                o.options.rtl === !0 && o.options.vertical === !1 && (e = -e),
                    o.transformsEnabled === !1 ? o.options.vertical === !1 ? o.$slideTrack.velocity({
                            left: e
                        },
                        o.options.speed, o.options.easing, t) : o.$slideTrack.velocity({
                            top: e
                        },
                        o.options.speed, o.options.easing, t) : o.cssTransitions === !1 ? (o.options.rtl === !0 && (o.currentLeft = -o.currentLeft), i({
                        animStart: o.currentLeft
                    }).animate({
                            animStart: e
                        },
                        {
                            duration: o.options.speed,
                            easing: o.options.easing,
                            step: function(i) {
                                i = Math.ceil(i),
                                    o.options.vertical === !1 ? (s[o.animType] = "translate(" + i + "px, 0px)", o.$slideTrack.css(s)) : (s[o.animType] = "translate(0px," + i + "px)", o.$slideTrack.css(s))
                            },
                            complete: function() {
                                t && t.call()
                            }
                        })) : (o.applyTransition(), e = Math.ceil(e), s[o.animType] = o.options.vertical === !1 ? "translate3d(" + e + "px, 0px, 0px)": "translate3d(0px," + e + "px, 0px)", o.$slideTrack.css(s), t && setTimeout(function() {
                            o.disableTransition(),
                                t.call()
                        },
                        o.options.speed))
            },
            e.prototype.asNavFor = function(e) {
                var t = this,
                    s = t.options.asNavFor;
                s && null !== s && (s = i(s).not(t.$slider)),
                null !== s && "object" == typeof s && s.each(function() {
                    var t = i(this).slick("getSlick");
                    t.unslicked || t.slideHandler(e, !0)
                })
            },
            e.prototype.applyTransition = function(i, e) {
                var t = this,
                    s = {};
                e = e || t.options.speed,
                    s[t.transitionType] = t.options.fade === !1 ? t.transformType + " " + t.options.speed + "ms " + t.options.cssEase: "opacity " + e + "ms " + t.options.cssEase,
                    t.options.fade === !1 ? t.$slideTrack.css(s) : t.$slides.eq(i).css(s)
            },
            e.prototype.autoPlay = function() {
                var i = this;
                i.autoPlayTimer && clearInterval(i.autoPlayTimer),
                i.slideCount > i.options.slidesToShow && i.paused !== !0 && (i.autoPlayTimer = setInterval(i.autoPlayIterator, i.options.autoplaySpeed))
            },
            e.prototype.autoPlayClear = function() {
                var i = this;
                i.autoPlayTimer && clearInterval(i.autoPlayTimer)
            },
            e.prototype.autoPlayIterator = function() {
                var i = this;
                i.options.infinite === !1 ? 1 === i.direction ? (i.currentSlide + 1 === i.slideCount - 1 && (i.direction = 0), i.slideHandler(i.currentSlide + i.options.slidesToScroll)) : (i.currentSlide - 1 === 0 && (i.direction = 1), i.slideHandler(i.currentSlide - i.options.slidesToScroll)) : i.slideHandler(i.currentSlide + i.options.slidesToScroll)
            },
            e.prototype.buildArrows = function() {
                var e = this;
                e.options.arrows === !0 && (e.$prevArrow = i(e.options.prevArrow).addClass("slick-arrow"), e.$nextArrow = i(e.options.nextArrow).addClass("slick-arrow"), e.options.arrowsPlain === !0 && (e.$prevArrow.addClass("slick-arrow--plain"), e.$nextArrow.addClass("slick-arrow--plain")), e.slideCount > e.options.slidesToShow ? (e.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"), e.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"), e.htmlExpr.test(e.options.prevArrow) && e.$prevArrow.prependTo(e.options.appendArrows), e.htmlExpr.test(e.options.nextArrow) && e.$nextArrow.appendTo(e.options.appendArrows), e.options.infinite !== !0 && e.$prevArrow.addClass("slick-disabled").attr("aria-disabled", "true")) : e.$prevArrow.add(e.$nextArrow).addClass("slick-hidden").attr({
                    "aria-disabled": "true",
                    tabindex: "-1"
                }))
            },
            e.prototype.buildDots = function() {
                var e, t, s = this;
                if (s.options.dots === !0 && s.slideCount > s.options.slidesToShow) {
                    for (t = '<ul class="' + s.options.dotsClass + '">', e = 0; e <= s.getDotCount(); e += 1) t += "<li>" + s.options.customPaging.call(this, s, e) + "</li>";
                    t += "</ul>",
                        s.$dots = i(t).appendTo(s.options.appendDots),
                        s.$dots.find("li").first().addClass("slick-active").attr("aria-hidden", "false")
                }
            },
            e.prototype.buildLinks = function() {
                var i = this;
                i.options.links === !0 && i.slideCount >= i.options.slidesToShow && (i.$links = i.options.searchForLinks.find("." + i.options.linkClass))
            },
            e.prototype.buildOut = function() {
                var e = this;
                e.$slides = e.$slider.children(e.options.slide + ":not(.slick-cloned)").addClass("slick-slide"),
                    e.slideCount = e.$slides.length;
                var t = 0;
                e.$slides.each(function(s, o) {
                    i(o).attr("data-slick-index", s).data("originalStyling", i(o).attr("style") || ""),
                    e.options.shiftAnimate === !0 && (e.options.mixMode.length > 0 ? i(e.$slides[s]).attr("data-class") === e.options.mixMode[0] && i(e.$slides[s - 1]).attr("data-class") === e.options.mixMode[0] ? (t += 100 * e.options.shiftPecentage, i(o).css({
                        transform: "translateX(-" + t + "%)"
                    })) : (t += 0, i(o).css({
                        transform: "translateX(-" + t + "%)"
                    })) : (t = 100 * s * e.options.shiftPecentage, i(o).css({
                        transform: "translateX(-" + t + "%)"
                    })))
                }),
                    e.$slider.addClass("slick-slider"),
                    e.$slideTrack = 0 === e.slideCount ? i('<div class="slick-track"/>').appendTo(e.$slider) : e.$slides.wrapAll('<div class="slick-track"/>').parent(),
                    e.$list = e.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),
                    e.$slideTrack.css("opacity", 0),
                (e.options.centerMode === !0 || e.options.swipeToSlide === !0) && (e.options.slidesToScroll = 1),
                    i("img[data-lazy]", e.$slider).not("[src]").addClass("slick-loading"),
                    e.setupInfinite(),
                    e.buildArrows(),
                    e.buildDots(),
                    e.buildLinks(),
                    e.updateDots(),
                    e.updateLinks(),
                    e.setSlideClasses("number" == typeof e.currentSlide ? e.currentSlide: 0),
                e.options.draggable === !0 && e.$list.addClass("draggable")
            },
            e.prototype.buildRows = function() {
                var i, e, t, s, o, n, l, r = this;
                if (s = document.createDocumentFragment(), n = r.$slider.children(), r.options.rows > 1) {
                    for (l = r.options.slidesPerRow * r.options.rows, o = Math.ceil(n.length / l), i = 0; o > i; i++) {
                        var a = document.createElement("div");
                        for (e = 0; e < r.options.rows; e++) {
                            var d = document.createElement("div");
                            for (t = 0; t < r.options.slidesPerRow; t++) {
                                var c = i * l + (e * r.options.slidesPerRow + t);
                                n.get(c) && d.appendChild(n.get(c))
                            }
                            a.appendChild(d)
                        }
                        s.appendChild(a)
                    }
                    r.$slider.html(s),
                        r.$slider.children().children().children().css({
                            width: 100 / r.options.slidesPerRow + "%",
                            display: "inline-block"
                        })
                }
            },
            e.prototype.checkResponsive = function(e, t) {
                var s, o, n, l = this,
                    r = !1,
                    a = l.$slider.width(),
                    d = window.innerWidth || i(window).width();
                if ("window" === l.respondTo ? n = d: "slider" === l.respondTo ? n = a: "min" === l.respondTo && (n = Math.min(d, a)), l.options.responsive && l.options.responsive.length && null !== l.options.responsive) {
                    o = null;
                    for (s in l.breakpoints) l.breakpoints.hasOwnProperty(s) && (l.originalSettings.mobileFirst === !1 ? n < l.breakpoints[s] && (o = l.breakpoints[s]) : n > l.breakpoints[s] && (o = l.breakpoints[s]));
                    null !== o ? null !== l.activeBreakpoint ? (o !== l.activeBreakpoint || t) && (l.activeBreakpoint = o, "unslick" === l.breakpointSettings[o] ? l.unslick(o) : (l.options = i.extend({},
                        l.originalSettings, l.breakpointSettings[o]), e === !0 && (l.currentSlide = l.options.initialSlide), l.refresh(e)), r = o) : (l.activeBreakpoint = o, "unslick" === l.breakpointSettings[o] ? l.unslick(o) : (l.options = i.extend({},
                        l.originalSettings, l.breakpointSettings[o]), e === !0 && (l.currentSlide = l.options.initialSlide), l.refresh(e)), r = o) : null !== l.activeBreakpoint && (l.activeBreakpoint = null, l.options = l.originalSettings, e === !0 && (l.currentSlide = l.options.initialSlide), l.refresh(e), r = o),
                    e || r === !1 || l.$slider.trigger("breakpoint", [l, r])
                }
            },
            e.prototype.changeSlide = function(e, t) {
                var s, o, n, l = this,
                    r = i(e.target);
                switch (r.is("a") && (l.options.enableAnchor ? window.loaction.href = r.attr("href") : e.preventDefault()), r.is("li") || (r = r.closest("li")), n = l.slideCount % l.options.slidesToScroll !== 0, s = n ? 0 : (l.slideCount - l.currentSlide) % l.options.slidesToScroll, e.data.message) {
                    case "previous":
                        o = 0 === s ? l.options.slidesToScroll: l.options.slidesToShow - s,
                        l.slideCount > l.options.slidesToShow && l.slideHandler(l.currentSlide - o, !1, t);
                        break;
                    case "next":
                        o = 0 === s ? l.options.slidesToScroll: s,
                        l.slideCount > l.options.slidesToShow && l.slideHandler(l.currentSlide + o, !1, t);
                        break;
                    case "index":
                        var a = 0 === e.data.index ? 0 : e.data.index || r.index() * l.options.slidesToScroll;
                        l.slideHandler(l.checkNavigable(a), !1, t),
                            r.children().trigger("focus");
                        break;
                    default:
                        return
                }
            },
            e.prototype.checkNavigable = function(i) {
                var e, t, s = this;
                if (e = s.getNavigableIndexes(), t = 0, i > e[e.length - 1]) i = e[e.length - 1];
                else for (var o in e) {
                    if (i < e[o]) {
                        i = t;
                        break
                    }
                    t = e[o]
                }
                return i
            },
            e.prototype.cleanUpEvents = function() {
                var e = this;
                e.options.dots && null !== e.$dots && (i("li", e.$dots).off("click.slick", e.changeSlide), e.options.pauseOnDotsHover === !0 && e.options.autoplay === !0 && i("li", e.$dots).off("mouseenter.slick", i.proxy(e.setPaused, e, !0)).off("mouseleave.slick", i.proxy(e.setPaused, e, !1))),
                e.options.arrows === !0 && e.slideCount > e.options.slidesToShow && (e.$prevArrow && e.$prevArrow.off("click.slick", e.changeSlide), e.$nextArrow && e.$nextArrow.off("click.slick", e.changeSlide)),
                    e.$list.off("touchstart.slick mousedown.slick", e.swipeHandler),
                    e.$list.off("touchmove.slick mousemove.slick", e.swipeHandler),
                    e.$list.off("touchend.slick mouseup.slick", e.swipeHandler),
                    e.$list.off("touchcancel.slick mouseleave.slick", e.swipeHandler),
                    e.$list.off("click.slick", e.clickHandler),
                    i(document).off(e.visibilityChange, e.visibility),
                    e.$list.off("mouseenter.slick", i.proxy(e.setPaused, e, !0)),
                    e.$list.off("mouseleave.slick", i.proxy(e.setPaused, e, !1)),
                e.options.accessibility === !0 && e.$list.off("keydown.slick", e.keyHandler),
                e.options.focusOnSelect === !0 && i(e.$slideTrack).children().off("click.slick", e.selectHandler),
                    i(window).off("orientationchange.slick.slick-" + e.instanceUid, e.orientationChange),
                    i(window).off("resize.slick.slick-" + e.instanceUid, e.resize),
                    i("[draggable!=true]", e.$slideTrack).off("dragstart", e.preventDefault),
                    i(window).off("load.slick.slick-" + e.instanceUid, e.setPosition),
                    i(document).off("ready.slick.slick-" + e.instanceUid, e.setPosition)
            },
            e.prototype.cleanUpRows = function() {
                var i, e = this;
                e.options.rows > 1 && (i = e.$slides.children().children(), i.removeAttr("style"), e.$slider.html(i))
            },
            e.prototype.clickHandler = function(i) {
                var e = this;
                e.shouldClick === !1 && (i.stopImmediatePropagation(), i.stopPropagation(), i.preventDefault())
            },
            e.prototype.destroy = function(e) {
                var t = this;
                t.autoPlayClear(),
                    t.touchObject = {},
                    t.cleanUpEvents(),
                    i(".slick-cloned", t.$slider).detach(),
                t.$dots && t.$dots.remove(),
                t.$prevArrow && t.$prevArrow.length && (t.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display", ""), t.htmlExpr.test(t.options.prevArrow) && t.$prevArrow.remove()),
                t.$nextArrow && t.$nextArrow.length && (t.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display", ""), t.htmlExpr.test(t.options.nextArrow) && t.$nextArrow.remove()),
                t.$slides && (t.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current slick-scale slick-shift").removeAttr("aria-hidden").removeAttr("data-slick-index").removeAttr("tabindex").each(function() {
                    i(this).attr("style", i(this).data("originalStyling")),
                        i(this).find("a").removeAttr("tabindex")
                }), t.$slideTrack.children(this.options.slide).detach(), t.$slideTrack.detach(), t.$list.detach(), t.$slider.append(t.$slides)),
                    t.cleanUpRows(),
                    t.$slider.removeClass("slick-slider"),
                    t.$slider.removeClass("slick-initialized"),
                    t.unslicked = !0,
                e || t.$slider.trigger("destroy", [t])
            },
            e.prototype.disableTransition = function(i) {
                var e = this,
                    t = {};
                t[e.transitionType] = "",
                    e.options.fade === !1 ? e.$slideTrack.css(t) : e.$slides.eq(i).css(t)
            },
            e.prototype.fadeSlide = function(i, e) {
                var t = this;
                t.cssTransitions === !1 ? (t.$slides.eq(i).css({
                    zIndex: t.options.zIndex
                }), t.$slides.eq(i).animate({
                        opacity: 1
                    },
                    t.options.speed, t.options.easing, e)) : (t.applyTransition(i, t.options.speed - 300), setTimeout(function() {
                        t.$slides.eq(i).css({
                            opacity: 1,
                            zIndex: t.options.zIndex
                        })
                    },
                    800), e && setTimeout(function() {
                        t.disableTransition(i),
                            e.call()
                    },
                    t.options.speed))
            },
            e.prototype.fadeSlideOut = function(i) {
                var e = this;
                e.cssTransitions === !1 ? e.$slides.eq(i).animate({
                        opacity: 0,
                        zIndex: e.options.zIndex - 2
                    },
                    e.options.speed, e.options.easing) : (e.applyTransition(i, e.options.speed - 100), e.$slides.eq(i).css({
                    opacity: 0,
                    zIndex: e.options.zIndex - 2
                }))
            },
            e.prototype.filterSlides = e.prototype.slickFilter = function(i) {
                var e = this;
                null !== i && (e.$slidesCache = e.$slides, e.unload(), e.$slideTrack.children(this.options.slide).detach(), e.$slidesCache.filter(i).appendTo(e.$slideTrack), e.reinit())
            },
            e.prototype.getCurrent = e.prototype.slickCurrentSlide = function() {
                var i = this;
                return i.currentSlide
            },
            e.prototype.getDotCount = function() {
                var i = this,
                    e = 0,
                    t = 0,
                    s = 0;
                if (i.options.infinite === !0) for (; e < i.slideCount;)++s,
                    e = t + i.options.slidesToScroll,
                    t += i.options.slidesToScroll <= i.options.slidesToShow ? i.options.slidesToScroll: i.options.slidesToShow;
                else if (i.options.centerMode === !0) s = i.slideCount;
                else for (; e < i.slideCount;)++s,
                        e = t + i.options.slidesToScroll,
                        t += i.options.slidesToScroll <= i.options.slidesToShow ? i.options.slidesToScroll: i.options.slidesToShow;
                return s - 1
            },
            e.prototype.getLeft = function(e) {
                var t, s, o, n = this,
                    l = 0;
                if (n.slideOffset = 0, s = n.$slides.first().outerHeight(!0), n.options.infinite === !0 ? (n.slideCount > n.options.slidesToShow && (n.slideOffset = n.slideWidth * n.options.slidesToShow * -1, l = s * n.options.slidesToShow * -1), n.slideCount % n.options.slidesToScroll !== 0 && e + n.options.slidesToScroll > n.slideCount && n.slideCount > n.options.slidesToShow && (e > n.slideCount ? (n.slideOffset = (n.options.slidesToShow - (e - n.slideCount)) * n.slideWidth * -1, l = (n.options.slidesToShow - (e - n.slideCount)) * s * -1) : (n.slideOffset = n.slideCount % n.options.slidesToScroll * n.slideWidth * -1, l = n.slideCount % n.options.slidesToScroll * s * -1))) : e + n.options.slidesToShow > n.slideCount && (n.slideOffset = (e + n.options.slidesToShow - n.slideCount) * n.slideWidth, l = (e + n.options.slidesToShow - n.slideCount) * s), n.slideCount <= n.options.slidesToShow && (n.slideOffset = 0, l = 0), n.options.centerMode === !0 && n.options.infinite === !0 ? n.slideOffset += n.slideWidth * Math.floor(n.options.slidesToShow / 2) - n.slideWidth: n.options.centerMode === !0 && (n.slideOffset = 0, n.slideOffset += n.slideWidth * Math.floor(n.options.slidesToShow / 2)), n.options.shiftAnimate === !0 && n.options.centerMode === !1) if (n.options.mixMode.length > 0) {
                    var r = 0,
                        a = "";
                    n.$slides.each(function(t) {
                        t >= e || 0 == t || i(this).attr("data-class") === n.options.mixMode[0] && (a === n.options.mixMode[0] && r++, a = i(this).attr("data-class"))
                    }),
                        n.slideOffset = i(n.$slides[e]).attr("data-class") === n.options.mixMode[0] && e > 0 && i(n.$slides[e - 1]).attr("data-class") === n.options.mixMode[0] ? (r + 1) * n.slideWidth * n.options.shiftPecentage: r * n.slideWidth * n.options.shiftPecentage
                } else n.slideOffset = e * n.slideWidth * n.options.shiftPecentage;
                return t = n.options.vertical === !1 ? e * n.slideWidth * -1 + n.slideOffset: e * s * -1 + l,
                n.options.variableWidth === !0 && (o = n.$slideTrack.children(".slick-slide").eq(n.slideCount <= n.options.slidesToShow || n.options.infinite === !1 ? e: e + n.options.slidesToShow), t = n.options.rtl === !0 ? o[0] ? -1 * (n.$slideTrack.width() - o[0].offsetLeft - o.width()) : 0 : o[0] ? -1 * o[0].offsetLeft: 0, n.options.centerMode === !0 && (o = n.$slideTrack.children(".slick-slide").eq(n.slideCount <= n.options.slidesToShow || n.options.infinite === !1 ? e: e + n.options.slidesToShow + 1), t = n.options.rtl === !0 ? o[0] ? -1 * (n.$slideTrack.width() - o[0].offsetLeft - o.width()) : 0 : o[0] ? -1 * o[0].offsetLeft: 0, t += (n.$list.width() - o.outerWidth()) / 2)),
                    t
            },
            e.prototype.getOption = e.prototype.slickGetOption = function(i) {
                var e = this;
                return e.options[i]
            },
            e.prototype.getNavigableIndexes = function() {
                var i, e = this,
                    t = 0,
                    s = 0,
                    o = [];
                for (e.options.infinite === !1 ? i = e.slideCount: (t = -1 * e.options.slidesToScroll, s = -1 * e.options.slidesToScroll, i = 2 * e.slideCount); i > t;) o.push(t),
                    t = s + e.options.slidesToScroll,
                    s += e.options.slidesToScroll <= e.options.slidesToShow ? e.options.slidesToScroll: e.options.slidesToShow;
                return o
            },
            e.prototype.getSlick = function() {
                return this
            },
            e.prototype.getSlideCount = function() {
                var e, t, s, o = this;
                return s = o.options.centerMode === !0 ? o.slideWidth * Math.floor(o.options.slidesToShow / 2) : 0,
                    o.options.swipeToSlide === !0 ? (o.$slideTrack.find(".slick-slide").each(function(e, n) {
                        return n.offsetLeft - s + i(n).outerWidth() / 2 > -1 * o.swipeLeft ? (t = n, !1) : void 0
                    }), e = Math.abs(i(t).attr("data-slick-index") - o.currentSlide) || 1) : o.options.slidesToScroll
            },
            e.prototype.goTo = e.prototype.slickGoTo = function(i, e) {
                var t = this;
                t.changeSlide({
                        data: {
                            message: "index",
                            index: parseInt(i)
                        }
                    },
                    e)
            },
            e.prototype.init = function(e) {
                var t = this;
                i(t.$slider).hasClass("slick-initialized") || (i(t.$slider).addClass("slick-initialized"), t.buildRows(), t.buildOut(), t.setProps(), t.startLoad(), t.loadSlider(), t.initializeEvents(), t.updateArrows(), t.updateDots(), t.updateLinks()),
                t.options.setClassToContainer && t.updateContainerClass(),
                e && t.$slider.trigger("init", [t]),
                t.options.accessibility === !0 && t.initADA()
            },
            e.prototype.initArrowEvents = function() {
                var i = this;
                i.options.arrows === !0 && i.slideCount > i.options.slidesToShow && (i.$prevArrow.on("click.slick", {
                        message: "previous"
                    },
                    i.changeSlide), i.$nextArrow.on("click.slick", {
                        message: "next"
                    },
                    i.changeSlide))
            },
            e.prototype.initDotEvents = function() {
                var e = this;
                e.options.dots === !0 && e.slideCount > e.options.slidesToShow && i("li", e.$dots).on("click.slick", {
                        message: "index"
                    },
                    e.changeSlide),
                e.options.dots === !0 && e.options.pauseOnDotsHover === !0 && e.options.autoplay === !0 && i("li", e.$dots).on("mouseenter.slick", i.proxy(e.setPaused, e, !0)).on("mouseleave.slick", i.proxy(e.setPaused, e, !1))
            },
            e.prototype.initLinkEvents = function() {
                var e = this;
                if (e.options.links === !0 && e.$links.length > 0) {
                    var t = i("li", e.$links);
                    e.slideCount > e.options.slidesToShow && t.on("click.slick", {
                            message: "index"
                        },
                        e.changeSlide),
                    e.options.pauseOnDotsHover === !0 && e.options.autoplay === !0 && t.on("mouseenter.slick", i.proxy(e.setPaused, e, !0)).on("mouseleave.slick", i.proxy(e.setPaused, e, !1))
                }
            },
            e.prototype.initializeEvents = function() {
                var e = this;
                e.initArrowEvents(),
                    e.initDotEvents(),
                    e.initLinkEvents(),
                    e.$list.on("touchstart.slick mousedown.slick", {
                            action: "start"
                        },
                        e.swipeHandler),
                    e.$list.on("touchmove.slick mousemove.slick", {
                            action: "move"
                        },
                        e.swipeHandler),
                    e.$list.on("touchend.slick mouseup.slick", {
                            action: "end"
                        },
                        e.swipeHandler),
                    e.$list.on("touchcancel.slick mouseleave.slick", {
                            action: "end"
                        },
                        e.swipeHandler),
                    e.$list.on("click.slick", e.clickHandler),
                    i(document).on(e.visibilityChange, i.proxy(e.visibility, e)),
                    e.$list.on("mouseenter.slick", i.proxy(e.setPaused, e, !0)),
                    e.$list.on("mouseleave.slick", i.proxy(e.setPaused, e, !1)),
                e.options.accessibility === !0 && e.$list.on("keydown.slick", e.keyHandler),
                e.options.focusOnSelect === !0 && i(e.$slideTrack).children().on("click.slick", e.selectHandler),
                    i(window).on("orientationchange.slick.slick-" + e.instanceUid, i.proxy(e.orientationChange, e)),
                    i(window).on("resize.slick.slick-" + e.instanceUid, i.proxy(e.resize, e)),
                    i("[draggable!=true]", e.$slideTrack).on("dragstart", e.preventDefault),
                    i(window).on("load.slick.slick-" + e.instanceUid, e.setPosition),
                    i(document).on("ready.slick.slick-" + e.instanceUid, e.setPosition)
            },
            e.prototype.initUI = function() {
                var i = this;
                i.options.arrows === !0 && i.slideCount > i.options.slidesToShow && (i.$prevArrow.show(), i.$nextArrow.show()),
                i.options.dots === !0 && i.slideCount > i.options.slidesToShow && i.$dots.show(),
                i.options.autoplay === !0 && i.autoPlay()
            },
            e.prototype.keyHandler = function(i) {
                var e = this;
                i.target.tagName.match("TEXTAREA|INPUT|SELECT") || (37 === i.keyCode && e.options.accessibility === !0 ? e.changeSlide({
                    data: {
                        message: "previous"
                    }
                }) : 39 === i.keyCode && e.options.accessibility === !0 && e.changeSlide({
                    data: {
                        message: "next"
                    }
                }))
            },
            e.prototype.lazyLoad = function() {
                function e(e) {
                    i("img[data-lazy]", e).each(function() {
                        var e = i(this),
                            t = i(this).attr("data-lazy"),
                            s = document.createElement("img");
                        s.onload = function() {
                            e.animate({
                                    opacity: 0
                                },
                                100,
                                function() {
                                    e.attr("src", t).animate({
                                            opacity: 1
                                        },
                                        200,
                                        function() {
                                            e.removeAttr("data-lazy").removeClass("slick-loading")
                                        })
                                })
                        },
                            s.src = t
                    })
                }
                var t, s, o, n, l = this;
                l.options.centerMode === !0 ? l.options.infinite === !0 ? (o = l.currentSlide + (l.options.slidesToShow / 2 + 1), n = o + l.options.slidesToShow + 2) : (o = Math.max(0, l.currentSlide - (l.options.slidesToShow / 2 + 1)), n = 2 + (l.options.slidesToShow / 2 + 1) + l.currentSlide) : (o = l.options.infinite ? l.options.slidesToShow + l.currentSlide: l.currentSlide, n = o + l.options.slidesToShow, l.options.fade === !0 && (o > 0 && o--, n <= l.slideCount && n++)),
                    t = l.$slider.find(".slick-slide").slice(o, n),
                    e(t),
                    l.slideCount <= l.options.slidesToShow ? (s = l.$slider.find(".slick-slide"), e(s)) : l.currentSlide >= l.slideCount - l.options.slidesToShow ? (s = l.$slider.find(".slick-cloned").slice(0, l.options.slidesToShow), e(s)) : 0 === l.currentSlide && (s = l.$slider.find(".slick-cloned").slice( - 1 * l.options.slidesToShow), e(s))
            },
            e.prototype.loadSlider = function() {
                var i = this;
                i.setPosition(),
                    i.$slideTrack.css({
                        opacity: 1
                    }),
                    i.$slider.removeClass("slick-loading"),
                    i.initUI(),
                "progressive" === i.options.lazyLoad && i.progressiveLazyLoad()
            },
            e.prototype.next = e.prototype.slickNext = function() {
                var i = this;
                i.changeSlide({
                    data: {
                        message: "next"
                    }
                })
            },
            e.prototype.orientationChange = function() {
                var i = this;
                i.checkResponsive(),
                    i.setPosition()
            },
            e.prototype.pause = e.prototype.slickPause = function() {
                var i = this;
                i.autoPlayClear(),
                    i.paused = !0
            },
            e.prototype.play = e.prototype.slickPlay = function() {
                var i = this;
                i.paused = !1,
                    i.autoPlay()
            },
            e.prototype.postSlide = function(i) {
                var e = this;
                e.$slider.trigger("afterChange", [e, i]),
                    e.animating = !1,
                    e.setPosition(),
                    e.swipeLeft = null,
                e.options.autoplay === !0 && e.paused === !1 && e.autoPlay(),
                e.options.accessibility === !0 && e.initADA()
            },
            e.prototype.prev = e.prototype.slickPrev = function() {
                var i = this;
                i.changeSlide({
                    data: {
                        message: "previous"
                    }
                })
            },
            e.prototype.preventDefault = function(i) {
                i.preventDefault()
            },
            e.prototype.progressiveLazyLoad = function() {
                var e, t, s = this;
                e = i("img[data-lazy]", s.$slider).length,
                e > 0 && (t = i("img[data-lazy]", s.$slider).first(), t.attr("src", null), t.attr("src", t.attr("data-lazy")).removeClass("slick-loading").load(function() {
                    t.removeAttr("data-lazy"),
                        s.progressiveLazyLoad(),
                    s.options.adaptiveHeight === !0 && s.setPosition()
                }).error(function() {
                    t.removeAttr("data-lazy"),
                        s.progressiveLazyLoad()
                }))
            },
            e.prototype.refresh = function(e) {
                var t, s, o = this;
                s = o.slideCount - o.options.slidesToShow,
                o.options.infinite || (o.slideCount <= o.options.slidesToShow ? o.currentSlide = 0 : o.currentSlide > s && (o.currentSlide = s)),
                    t = o.currentSlide,
                    o.destroy(!0),
                    i.extend(o, o.initials, {
                        currentSlide: t
                    }),
                    o.init(),
                e || o.changeSlide({
                        data: {
                            message: "index",
                            index: t
                        }
                    },
                    !1)
            },
            e.prototype.registerBreakpoints = function() {
                var e, t, s, o = this,
                    n = o.options.responsive || null;
                if ("array" === i.type(n) && n.length) {
                    o.respondTo = o.options.respondTo || "window";
                    for (e in n) if (s = o.breakpoints.length - 1, t = n[e].breakpoint, n.hasOwnProperty(e)) {
                        for (; s >= 0;) o.breakpoints[s] && o.breakpoints[s] === t && o.breakpoints.splice(s, 1),
                            s--;
                        o.breakpoints.push(t),
                            o.breakpointSettings[t] = n[e].settings
                    }
                    o.breakpoints.sort(function(i, e) {
                        return o.options.mobileFirst ? i - e: e - i
                    })
                }
            },
            e.prototype.reinit = function() {
                var e = this;
                e.$slides = e.$slideTrack.children(e.options.slide).addClass("slick-slide"),
                    e.slideCount = e.$slides.length,
                e.currentSlide >= e.slideCount && 0 !== e.currentSlide && (e.currentSlide = e.currentSlide - e.options.slidesToScroll),
                e.slideCount <= e.options.slidesToShow && (e.currentSlide = 0),
                    e.registerBreakpoints(),
                    e.setProps(),
                    e.setupInfinite(),
                    e.buildArrows(),
                    e.updateArrows(),
                    e.initArrowEvents(),
                    e.buildDots(),
                    e.updateDots(),
                    e.updateLinks(),
                    e.initDotEvents(),
                    e.buildLinks(),
                    e.initLinkEvents(),
                    e.checkResponsive(!1, !0),
                e.options.setClassToContainer && e.updateContainerClass(),
                e.options.focusOnSelect === !0 && i(e.$slideTrack).children().on("click.slick", e.selectHandler),
                    e.setSlideClasses(0),
                    e.setPosition(),
                    e.$slider.trigger("reInit", [e]),
                e.options.autoplay === !0 && e.focusHandler()
            },
            e.prototype.resize = function() {
                var e = this;
                i(window).width() !== e.windowWidth && (clearTimeout(e.windowDelay), e.windowDelay = window.setTimeout(function() {
                        e.windowWidth = i(window).width(),
                            e.checkResponsive(),
                        e.unslicked || e.setPosition()
                    },
                    50))
            },
            e.prototype.removeSlide = e.prototype.slickRemove = function(i, e, t) {
                var s = this;
                return "boolean" == typeof i ? (e = i, i = e === !0 ? 0 : s.slideCount - 1) : i = e === !0 ? --i: i,
                    s.slideCount < 1 || 0 > i || i > s.slideCount - 1 ? !1 : (s.unload(), t === !0 ? s.$slideTrack.children().remove() : s.$slideTrack.children(this.options.slide).eq(i).remove(), s.$slides = s.$slideTrack.children(this.options.slide), s.$slideTrack.children(this.options.slide).detach(), s.$slideTrack.append(s.$slides), s.$slidesCache = s.$slides, void s.reinit())
            },
            e.prototype.setCSS = function(i) {
                var e, t, s = this,
                    o = {};
                s.options.rtl === !0 && (i = -i),
                    e = "left" == s.positionProp ? Math.ceil(i) + "px": "0px",
                    t = "top" == s.positionProp ? Math.ceil(i) + "px": "0px",
                    o[s.positionProp] = i,
                    s.transformsEnabled === !1 ? s.$slideTrack.css(o) : (o = {},
                        s.cssTransitions === !1 ? (o[s.animType] = "translate(" + e + ", " + t + ")", s.$slideTrack.css(o)) : (o[s.animType] = "translate3d(" + e + ", " + t + ", 0px)", s.$slideTrack.css(o)))
            },
            e.prototype.setDimensions = function() {
                var i = this;
                i.options.vertical === !1 ? i.options.centerMode === !0 && i.$list.css({
                    padding: "0px " + i.options.centerPadding
                }) : (i.$list.height(i.$slides.first().outerHeight(!0) * i.options.slidesToShow), i.options.centerMode === !0 && i.$list.css({
                    padding: i.options.centerPadding + " 0px"
                })),
                    i.listWidth = i.$list.width(),
                    i.listHeight = i.$list.height(),
                    i.options.vertical === !1 && i.options.variableWidth === !1 ? (i.slideWidth = Math.ceil(i.listWidth / i.options.slidesToShow), i.$slideTrack.width(Math.ceil(i.slideWidth * i.$slideTrack.children(".slick-slide").length))) : i.options.variableWidth === !0 ? i.$slideTrack.width(5e3 * i.slideCount) : (i.slideWidth = Math.ceil(i.listWidth), i.$slideTrack.height(Math.ceil(i.$slides.first().outerHeight(!0) * i.$slideTrack.children(".slick-slide").length)));
                var e = i.$slides.first().outerWidth(!0) - i.$slides.first().width();
                i.options.variableWidth === !1 && i.$slideTrack.children(".slick-slide").width(i.slideWidth - e)
            },
            e.prototype.setFade = function() {
                var e, t = this;
                t.$slides.each(function(s, o) {
                    e = t.slideWidth * s * -1,
                        i(o).css(t.options.rtl === !0 ? {
                            position: "relative",
                            right: e,
                            top: 0,
                            zIndex: t.options.zIndex - 2,
                            opacity: 0
                        }: {
                            position: "relative",
                            left: e,
                            top: 0,
                            zIndex: t.options.zIndex - 2,
                            opacity: 0
                        })
                }),
                    t.$slides.eq(t.currentSlide).css({
                        zIndex: t.options.zIndex - 1,
                        opacity: 1
                    })
            },
            e.prototype.setHeight = function() {
                var i = this;
                if (1 === i.options.slidesToShow && i.options.adaptiveHeight === !0 && i.options.vertical === !1) {
                    var e = i.$slides.eq(i.currentSlide).outerHeight(!0) + 2;
                    i.$list.css("height", e)
                }
            },
            e.prototype.setOption = e.prototype.slickSetOption = function(e, t, s) {
                var o, n, l = this;
                if ("responsive" === e && "array" === i.type(t)) for (n in t) if ("array" !== i.type(l.options.responsive)) l.options.responsive = [t[n]];
                else {
                    for (o = l.options.responsive.length - 1; o >= 0;) l.options.responsive[o].breakpoint === t[n].breakpoint && l.options.responsive.splice(o, 1),
                        o--;
                    l.options.responsive.push(t[n])
                } else l.options[e] = t;
                s === !0 && (l.unload(), l.reinit())
            },
            e.prototype.setPosition = function() {
                var i = this;
                i.setDimensions(),
                    i.setHeight(),
                    i.options.fade === !1 ? i.setCSS(i.getLeft(i.currentSlide)) : i.setFade(),
                    i.$slider.trigger("setPosition", [i])
            },
            e.prototype.setProps = function() {
                var i = this,
                    e = document.body.style;
                i.positionProp = i.options.vertical === !0 ? "top": "left",
                    "top" === i.positionProp ? i.$slider.addClass("slick-vertical") : i.$slider.removeClass("slick-vertical"),
                (void 0 !== e.WebkitTransition || void 0 !== e.MozTransition || void 0 !== e.msTransition) && i.options.useCSS === !0 && (i.cssTransitions = !0),
                i.options.fade && ("number" == typeof i.options.zIndex ? i.options.zIndex < 3 && (i.options.zIndex = 3) : i.options.zIndex = i.defaults.zIndex),
                void 0 !== e.OTransform && (i.animType = "OTransform", i.transformType = "-o-transform", i.transitionType = "OTransition", void 0 === e.perspectiveProperty && void 0 === e.webkitPerspective && (i.animType = !1)),
                void 0 !== e.MozTransform && (i.animType = "MozTransform", i.transformType = "-moz-transform", i.transitionType = "MozTransition", void 0 === e.perspectiveProperty && void 0 === e.MozPerspective && (i.animType = !1)),
                void 0 !== e.webkitTransform && (i.animType = "webkitTransform", i.transformType = "-webkit-transform", i.transitionType = "webkitTransition", void 0 === e.perspectiveProperty && void 0 === e.webkitPerspective && (i.animType = !1)),
                void 0 !== e.msTransform && (i.animType = "msTransform", i.transformType = "-ms-transform", i.transitionType = "msTransition", void 0 === e.msTransform && (i.animType = !1)),
                void 0 !== e.transform && i.animType !== !1 && (i.animType = "transform", i.transformType = "transform", i.transitionType = "transition"),
                    i.transformsEnabled = i.options.useTransform && null !== i.animType && i.animType !== !1
            },
            e.prototype.setSlideClasses = function(i) {
                var e, t, s, o, n = this;
                t = n.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current slick-scale slick-shift").attr("aria-hidden", "true"),
                    n.$slides.eq(i).addClass("slick-current"),
                n.options.shiftAnimate === !0 && n.$slides.each(function(e) {
                    e !== i && n.$slides.eq(e).addClass("slick-shift")
                }),
                n.options.scaleAnimate === !0 && n.$slides.each(function(e) {
                    e !== i && n.$slides.eq(e).addClass("slick-scale")
                }),
                    n.options.centerMode === !0 ? (e = Math.floor(n.options.slidesToShow / 2), n.options.infinite === !0 && (i >= e && i <= n.slideCount - 1 - e ? n.$slides.slice(i - e, i + e + 1).addClass("slick-active").attr("aria-hidden", "false") : (s = n.options.slidesToShow + i, t.slice(s - e + 1, s + e + 2).addClass("slick-active").attr("aria-hidden", "false")), 0 === i ? t.eq(t.length - 1 - n.options.slidesToShow).addClass("slick-center") : i === n.slideCount - 1 && t.eq(n.options.slidesToShow).addClass("slick-center")), n.$slides.eq(i).addClass("slick-center")) : i >= 0 && i <= n.slideCount - n.options.slidesToShow ? n.$slides.slice(i, i + n.options.slidesToShow).addClass("slick-active").attr("aria-hidden", "false") : t.length <= n.options.slidesToShow ? t.addClass("slick-active").attr("aria-hidden", "false") : (o = n.slideCount % n.options.slidesToShow, s = n.options.infinite === !0 ? n.options.slidesToShow + i: i, n.options.slidesToShow == n.options.slidesToScroll && n.slideCount - i < n.options.slidesToShow ? t.slice(s - (n.options.slidesToShow - o), s + o).addClass("slick-active").attr("aria-hidden", "false") : t.slice(s, s + n.options.slidesToShow).addClass("slick-active").attr("aria-hidden", "false")),
                "ondemand" === n.options.lazyLoad && n.lazyLoad()
            },
            e.prototype.setupInfinite = function() {
                var e, t, s, o = this;
                if (o.options.fade === !0 && (o.options.centerMode = !1), o.options.infinite === !0 && o.options.fade === !1 && (t = null, o.slideCount > o.options.slidesToShow)) {
                    for (s = o.options.centerMode === !0 ? o.options.slidesToShow + 1 : o.options.slidesToShow, e = o.slideCount; e > o.slideCount - s; e -= 1) t = e - 1,
                        i(o.$slides[t]).clone(!0).attr("id", "").attr("data-slick-index", t - o.slideCount).prependTo(o.$slideTrack).addClass("slick-cloned");
                    for (e = 0; s > e; e += 1) t = e,
                        i(o.$slides[t]).clone(!0).attr("id", "").attr("data-slick-index", t + o.slideCount).appendTo(o.$slideTrack).addClass("slick-cloned");
                    o.$slideTrack.find(".slick-cloned").find("[id]").each(function() {
                        i(this).attr("id", "")
                    })
                }
            },
            e.prototype.setPaused = function(i) {
                var e = this;
                e.options.autoplay === !0 && e.options.pauseOnHover === !0 && (e.paused = i, i ? e.autoPlayClear() : e.autoPlay())
            },
            e.prototype.selectHandler = function(e) {
                var t = this,
                    s = i(e.target).is(".slick-slide") ? i(e.target) : i(e.target).parents(".slick-slide"),
                    o = parseInt(s.attr("data-slick-index"));
                return o || (o = 0),
                    t.slideCount <= t.options.slidesToShow ? (t.setSlideClasses(o), void t.asNavFor(o)) : void t.slideHandler(o)
            },
            e.prototype.slideHandler = function(i, e, t) {
                var s, o, n, l, r = null,
                    a = this;
                return e = e || !1,
                    a.animating === !0 && a.options.waitForAnimate === !0 || a.options.fade === !0 && a.currentSlide === i || a.slideCount <= a.options.slidesToShow ? void 0 : (e === !1 && a.asNavFor(i), s = i, r = a.getLeft(s), l = a.getLeft(a.currentSlide), a.currentLeft = null === a.swipeLeft ? l: a.swipeLeft, a.options.infinite === !1 && a.options.centerMode === !1 && (0 > i || i > a.getDotCount() * a.options.slidesToScroll) ? void(a.options.fade === !1 && (s = a.currentSlide, t !== !0 ? a.animateSlide(l,
                        function() {
                            a.postSlide(s)
                        }) : a.postSlide(s))) : a.options.infinite === !1 && a.options.centerMode === !0 && (0 > i || i > a.slideCount - a.options.slidesToScroll) ? void(a.options.fade === !1 && (s = a.currentSlide, t !== !0 ? a.animateSlide(l,
                        function() {
                            a.postSlide(s)
                        }) : a.postSlide(s))) : (a.options.autoplay === !0 && clearInterval(a.autoPlayTimer), o = 0 > s ? a.slideCount % a.options.slidesToScroll !== 0 ? a.slideCount - a.slideCount % a.options.slidesToScroll: a.slideCount + s: s >= a.slideCount ? a.slideCount % a.options.slidesToScroll !== 0 ? 0 : s - a.slideCount: s, a.animating = !0, a.$slider.trigger("beforeChange", [a, a.currentSlide, o]), n = a.currentSlide, a.currentSlide = o, a.setSlideClasses(a.currentSlide), a.updateDots(), a.updateLinks(), a.updateArrows(), a.options.setClassToContainer === !0 && a.updateContainerClass(), a.options.fade === !0 ? (t !== !0 ? (a.fadeSlideOut(n), a.fadeSlide(o,
                        function() {
                            a.postSlide(o)
                        })) : a.postSlide(o), void a.animateHeight()) : void(t !== !0 ? a.animateSlide(r,
                        function() {
                            a.postSlide(o)
                        }) : a.postSlide(o))))
            },
            e.prototype.startLoad = function() {
                var i = this;
                i.options.arrows === !0 && i.slideCount > i.options.slidesToShow && (i.$prevArrow.hide(), i.$nextArrow.hide()),
                i.options.dots === !0 && i.slideCount > i.options.slidesToShow && i.$dots.hide(),
                    i.$slider.addClass("slick-loading")
            },
            e.prototype.swipeDirection = function() {
                var i, e, t, s, o = this;
                return i = o.touchObject.startX - o.touchObject.curX,
                    e = o.touchObject.startY - o.touchObject.curY,
                    t = Math.atan2(e, i),
                    s = Math.round(180 * t / Math.PI),
                0 > s && (s = 360 - Math.abs(s)),
                    45 >= s && s >= 0 ? o.options.rtl === !1 ? "left": "right": 360 >= s && s >= 315 ? o.options.rtl === !1 ? "left": "right": s >= 135 && 225 >= s ? o.options.rtl === !1 ? "right": "left": o.options.verticalSwiping === !0 ? s >= 35 && 135 >= s ? "left": "right": "vertical"
            },
            e.prototype.swipeEnd = function(i) {
                var e, t = this;
                if (t.dragging = !1, t.shouldClick = t.touchObject.swipeLength > 10 ? !1 : !0, void 0 === t.touchObject.curX) return ! 1;
                if (t.touchObject.edgeHit === !0 && t.$slider.trigger("edge", [t, t.swipeDirection()]), t.touchObject.swipeLength >= t.touchObject.minSwipe) switch (t.swipeDirection()) {
                    case "left":
                        e = t.options.swipeToSlide ? t.checkNavigable(t.currentSlide + t.getSlideCount()) : t.currentSlide + t.getSlideCount(),
                            t.slideHandler(e),
                            t.currentDirection = 0,
                            t.touchObject = {},
                            t.$slider.trigger("swipe", [t, "left"]);
                        break;
                    case "right":
                        e = t.options.swipeToSlide ? t.checkNavigable(t.currentSlide - t.getSlideCount()) : t.currentSlide - t.getSlideCount(),
                            t.slideHandler(e),
                            t.currentDirection = 1,
                            t.touchObject = {},
                            t.$slider.trigger("swipe", [t, "right"])
                } else t.touchObject.startX !== t.touchObject.curX && (t.slideHandler(t.currentSlide), t.touchObject = {})
            },
            e.prototype.swipeHandler = function(i) {
                var e = this;
                if (! (e.options.swipe === !1 || "ontouchend" in document && e.options.swipe === !1 || e.options.draggable === !1 && -1 !== i.type.indexOf("mouse"))) switch (e.touchObject.fingerCount = i.originalEvent && void 0 !== i.originalEvent.touches ? i.originalEvent.touches.length: 1, e.touchObject.minSwipe = e.listWidth / e.options.touchThreshold, e.options.verticalSwiping === !0 && (e.touchObject.minSwipe = e.listHeight / e.options.touchThreshold), i.data.action) {
                    case "start":
                        e.swipeStart(i);
                        break;
                    case "move":
                        e.swipeMove(i);
                        break;
                    case "end":
                        e.swipeEnd(i)
                }
            },
            e.prototype.swipeMove = function(i) {
                var e, t, s, o, n, l = this;
                return n = void 0 !== i.originalEvent ? i.originalEvent.touches: null,
                    !l.dragging || n && 1 !== n.length ? !1 : (e = l.getLeft(l.currentSlide), l.touchObject.curX = void 0 !== n ? n[0].pageX: i.clientX, l.touchObject.curY = void 0 !== n ? n[0].pageY: i.clientY, l.touchObject.swipeLength = Math.round(Math.sqrt(Math.pow(l.touchObject.curX - l.touchObject.startX, 2))), l.options.verticalSwiping === !0 && (l.touchObject.swipeLength = Math.round(Math.sqrt(Math.pow(l.touchObject.curY - l.touchObject.startY, 2)))), t = l.swipeDirection(), "vertical" !== t ? (void 0 !== i.originalEvent && l.touchObject.swipeLength > 4 && i.preventDefault(), o = (l.options.rtl === !1 ? 1 : -1) * (l.touchObject.curX > l.touchObject.startX ? 1 : -1), l.options.verticalSwiping === !0 && (o = l.touchObject.curY > l.touchObject.startY ? 1 : -1), s = l.touchObject.swipeLength, l.touchObject.edgeHit = !1, l.options.infinite === !1 && (0 === l.currentSlide && "right" === t || l.currentSlide >= l.getDotCount() && "left" === t) && (s = l.touchObject.swipeLength * l.options.edgeFriction, l.touchObject.edgeHit = !0), l.swipeLeft = l.options.vertical === !1 ? e + s * o: e + s * (l.$list.height() / l.listWidth) * o, l.options.verticalSwiping === !0 && (l.swipeLeft = e + s * o), l.options.fade === !0 || l.options.touchMove === !1 ? !1 : l.animating === !0 ? (l.swipeLeft = null, !1) : void l.setCSS(l.swipeLeft)) : void 0)
            },
            e.prototype.swipeStart = function(i) {
                var e, t = this;
                return 1 !== t.touchObject.fingerCount || t.slideCount <= t.options.slidesToShow ? (t.touchObject = {},
                    !1) : (void 0 !== i.originalEvent && void 0 !== i.originalEvent.touches && (e = i.originalEvent.touches[0]), t.touchObject.startX = t.touchObject.curX = void 0 !== e ? e.pageX: i.clientX, t.touchObject.startY = t.touchObject.curY = void 0 !== e ? e.pageY: i.clientY, void(t.dragging = !0))
            },
            e.prototype.unfilterSlides = e.prototype.slickUnfilter = function() {
                var i = this;
                null !== i.$slidesCache && (i.unload(), i.$slideTrack.children(this.options.slide).detach(), i.$slidesCache.appendTo(i.$slideTrack), i.reinit())
            },
            e.prototype.unload = function() {
                var e = this;
                i(".slick-cloned", e.$slider).remove(),
                e.$dots && e.$dots.remove(),
                e.$prevArrow && e.htmlExpr.test(e.options.prevArrow) && e.$prevArrow.remove(),
                e.$nextArrow && e.htmlExpr.test(e.options.nextArrow) && e.$nextArrow.remove(),
                    e.$slides.removeClass("slick-slide slick-active slick-visible slick-current slick-scale slick-shift").attr("aria-hidden", "true").css("width", "")
            },
            e.prototype.unslick = function(i) {
                var e = this;
                e.$slider.trigger("unslick", [e, i]),
                    e.destroy()
            },
            e.prototype.updateArrows = function() {
                var i, e = this;
                i = Math.floor(e.options.slidesToShow / 2),
                e.options.arrows === !0 && e.slideCount > e.options.slidesToShow && !e.options.infinite && (e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled", "false"), e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled", "false"), 0 === e.currentSlide ? (e.$prevArrow.addClass("slick-disabled").attr("aria-disabled", "true"), e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled", "false")) : e.currentSlide >= e.slideCount - e.options.slidesToShow && e.options.centerMode === !1 ? (e.$nextArrow.addClass("slick-disabled").attr("aria-disabled", "true"), e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled", "false")) : e.currentSlide >= e.slideCount - 1 && e.options.centerMode === !0 && (e.$nextArrow.addClass("slick-disabled").attr("aria-disabled", "true"), e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled", "false")))
            },
            e.prototype.updateContainerClass = function() {
                var i = this,
                    e = i.$ele.closest(".container");
                e.attr("class", e.attr("class").replace(/\bwith_.*?\b/g, "")),
                    e.addClass("with_" + i.$slides.eq(i.currentSlide).attr("data-class"))
            },
            e.prototype.updateDots = function() {
                var e = this;
                null !== e.$dots && (e.$dots.find("li").removeClass("slick-active").attr("aria-hidden", "true"), e.$dots.find("li").eq(Math.floor(e.currentSlide / e.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden", "false"), e.slideCount > 6 && e.$dots.find("li").each(function(t) {
                    i(this).removeClass("slick-active-1").removeClass("slick-active-2").removeClass("slick-active-3").removeClass("slick-active-4"),
                        i(this).addClass(e.slideCount - 1 - e.currentSlide === 2 ? t >= e.currentSlide ? "slick-active-1": t === e.currentSlide - 1 ? "slick-active-2": t === e.currentSlide - 2 ? "slick-active-3": "slick-active-4": e.slideCount - 1 - e.currentSlide === 1 ? t >= e.currentSlide - 1 ? "slick-active-1": t === e.currentSlide - 2 ? "slick-active-2": t === e.currentSlide - 3 ? "slick-active-3": "slick-active-4": e.slideCount - 1 - e.currentSlide === 0 ? t >= e.currentSlide - 2 ? "slick-active-1": t === e.currentSlide - 3 ? "slick-active-2": t === e.currentSlide - 4 ? "slick-active-3": "slick-active-4": 2 === e.currentSlide ? t <= e.currentSlide ? "slick-active-1": t === e.currentSlide + 1 ? "slick-active-2": t === e.currentSlide + 2 ? "slick-active-3": "slick-active-4": 1 === e.currentSlide ? t <= e.currentSlide + 1 ? "slick-active-1": t === e.currentSlide + 2 ? "slick-active-2": t === e.currentSlide + 3 ? "slick-active-3": "slick-active-4": 0 === e.currentSlide ? t <= e.currentSlide + 2 ? "slick-active-1": t === e.currentSlide + 3 ? "slick-active-2": t === e.currentSlide + 4 ? "slick-active-3": "slick-active-4": Math.abs(t - e.currentSlide) < 2 ? "slick-active-1": 2 === Math.abs(t - e.currentSlide) ? "slick-active-2": "slick-active-4")
                }))
            },
            e.prototype.updateLinks = function() {
                var i = this;
                null !== i.$links && (i.$links.find("li").removeClass("slick-active").attr("aria-hidden", "true"), i.$links.find("li").eq(Math.floor(i.currentSlide / i.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden", "false"))
            },
            e.prototype.visibility = function() {
                var i = this;
                document[i.hidden] ? (i.paused = !0, i.autoPlayClear()) : i.options.autoplay === !0 && (i.paused = !1, i.autoPlay())
            },
            e.prototype.initADA = function() {
                var e = this;
                e.$slides.add(e.$slideTrack.find(".slick-cloned")).attr({
                    "aria-hidden": "true",
                    tabindex: "-1"
                }).find("a, input, button, select").attr({
                    tabindex: "-1"
                }),
                    e.$slideTrack.attr("role", "listbox"),
                    e.$slides.not(e.$slideTrack.find(".slick-cloned")).each(function(t) {
                        i(this).attr({
                            role: "option",
                            "aria-describedby": "slick-slide" + e.instanceUid + t
                        })
                    }),
                null !== e.$dots && e.$dots.attr("role", "tablist").find("li").each(function(t) {
                    i(this).attr({
                        role: "presentation",
                        "aria-selected": "false",
                        "aria-controls": "navigation" + e.instanceUid + t,
                        id: "slick-slide" + e.instanceUid + t
                    })
                }).first().attr("aria-selected", "true").end().find("button").attr("role", "button").end().closest("div").attr("role", "toolbar"),
                    e.activateADA()
            },
            e.prototype.activateADA = function() {
                var i = this;
                i.$slideTrack.find(".slick-active").attr({
                    "aria-hidden": "false"
                }).find("a, input, button, select").attr({
                    tabindex: "0"
                })
            },
            e.prototype.focusHandler = function() {
                var e = this;
                e.$slider.on("focus.slick blur.slick", "*",
                    function(t) {
                        t.stopImmediatePropagation();
                        var s = i(this);
                        setTimeout(function() {
                                e.isPlay && (s.is(":focus") ? (e.autoPlayClear(), e.paused = !0) : (e.paused = !1, e.autoPlay()))
                            },
                            0)
                    })
            },
            i.fn.slick = function() {
                var i, t, s = this,
                    o = arguments[0],
                    n = Array.prototype.slice.call(arguments, 1),
                    l = s.length;
                for (i = 0; l > i; i++) if ("object" == typeof o || "undefined" == typeof o ? s[i].slick = new e(s[i], o) : t = s[i].slick[o].apply(s[i].slick, n), "undefined" != typeof t) return t;
                return s
            }
    }),
    function(i) {
        "use strict";
        i.fn.slickExtension = function(e) {
            function t() {
                return Math.max(document.documentElement.clientWidth, window.innerWidth || 0)
            }
            function s() {
                var i = t();
                return 769 > i ? void(a.hasClass("slick-initialized") || a.slick(e)) : a.hasClass("slick-initialized") ? a.slick("unslick") : void 0
            }
            function o() {
                var i = t();
                769 > i ? e.equalize[0][0].find(".equalized").length > 0 && d.find(".equalized").css({
                    width: "",
                    height: ""
                }).removeClass("equalized") : l()
            }
            function n() {
                e.mobileOnly && s(),
                !e.equalizeMobile && e.equalize.length > 0 && o(),
                    i(window).resize(function() {
                        e.mobileOnly && s(),
                        !e.equalizeMobile && e.equalize.length > 0 && o()
                    })
            }
            function l() {
                var t;
                for (t = 0; t < e.equalize.length; t++) i(e.equalize[t][0], e.equalize[t][1]).equalize({
                    reset: !0
                })
            }
            function r() {
                l(),
                    a.slick(e),
                (e.mobileOnly || !e.equalizeMobile && e.equalize.length > 0) && n()
            }
            e = i.extend({
                    mobileOnly: !1,
                    equalize: [],
                    equalizeMobile: !1
                },
                e);
            var a = this,
                d = a.closest(".container");
            r()
        }
    } (jQuery); !
    function(e, t, n) {
        e.cookie = function(e, t, i) {
            return t !== n ? Cookies.set(e, t, i) : Cookies.get(e)
        },
            e.removeCookie = function(t, n) {
                return null !== e.cookie(t) ? (e.cookie(t, null, n), !0) : !1
            }
    } (jQuery, document), angular.module("ui.bootstrap", ["ui.bootstrap.typeahead", "ui.bootstrap.position", "ui.bootstrap.bindHtml", "ui.bootstrap.modal", "ui.bootstrap.transition"]), angular.module("ui.bootstrap.typeahead", ["ui.bootstrap.position", "ui.bootstrap.bindHtml"]).factory("typeaheadParser", ["$parse",
    function(e) {
        var t = /^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;
        return {
            parse: function(n) {
                var i = n.match(t);
                if (!i) throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "' + n + '".');
                return {
                    itemName: i[3],
                    source: e(i[4]),
                    viewMapper: e(i[2] || i[1]),
                    modelMapper: e(i[1])
                }
            }
        }
    }]).directive("typeahead", ["$compile", "$parse", "$q", "$timeout", "$document", "$position", "typeaheadParser",
    function(e, t, n, i, r, a, o) {
        var s = [9, 13, 27, 38, 40];
        return {
            require: "ngModel",
            link: function(c, l, d, p) {
                var u, f = c.$eval(d.typeaheadMinLength) || 1,
                    h = c.$eval(d.typeaheadWaitMs) || 0,
                    g = c.$eval(d.typeaheadEditable) !== !1,
                    m = t(d.typeaheadLoading).assign || angular.noop,
                    y = t(d.typeaheadOnSelect),
                    v = d.typeaheadInputFormatter ? t(d.typeaheadInputFormatter) : void 0,
                    C = d.typeaheadAppendToBody ? c.$eval(d.typeaheadAppendToBody) : !1,
                    S = c.$eval(d.typeaheadFocusFirst) !== !1,
                    _ = t(d.ngModel).assign,
                    b = o.parse(d.typeahead),
                    E = c.$new();
                c.$on("$destroy",
                    function() {
                        E.$destroy()
                    });
                var I = "typeahead-" + E.$id + "-" + Math.floor(1e4 * Math.random());
                l.attr({
                    "aria-autocomplete": "list",
                    "aria-expanded": !1,
                    "aria-owns": I
                });
                var A = angular.element("<div typeahead-popup></div>");
                A.attr({
                    id: I,
                    matches: "matches",
                    active: "activeIdx",
                    select: "select(activeIdx)",
                    query: "query",
                    position: "position"
                }),
                angular.isDefined(d.typeaheadTemplateUrl) && A.attr("template-url", d.typeaheadTemplateUrl);
                var T = function() {
                        E.matches = [],
                            E.activeIdx = -1,
                            l.attr("aria-expanded", !1)
                    },
                    k = function(e) {
                        return I + "-option-" + e
                    };
                E.$watch("activeIdx",
                    function(e) {
                        0 > e ? l.removeAttr("aria-activedescendant") : l.attr("aria-activedescendant", k(e))
                    });
                var w = function(e) {
                    var t = {
                        $viewValue: e
                    };
                    m(c, !0),
                        n.when(b.source(c, t)).then(function(n) {
                                var i = e === p.$viewValue;
                                if (i && u) if (n.length > 0) {
                                    E.activeIdx = S ? 0 : -1,
                                        E.matches.length = 0;
                                    for (var r = 0; r < n.length; r++) t[b.itemName] = n[r],
                                        E.matches.push({
                                            id: k(r),
                                            label: b.viewMapper(E, t),
                                            model: n[r]
                                        });
                                    E.query = e,
                                        E.position = C ? a.offset(l) : a.position(l),
                                        E.position.top = E.position.top + l.prop("offsetHeight"),
                                        l.attr("aria-expanded", !0)
                                } else T();
                                i && m(c, !1)
                            },
                            function() {
                                T(),
                                    m(c, !1)
                            })
                };
                T(),
                    E.query = void 0;
                var $, P = function(e) {
                        $ = i(function() {
                                w(e)
                            },
                            h)
                    },
                    N = function() {
                        $ && i.cancel($)
                    };
                p.$parsers.unshift(function(e) {
                    return u = !0,
                        e && e.length >= f ? h > 0 ? (N(), P(e)) : w(e) : (m(c, !1), N(), T()),
                        g ? e: e ? void p.$setValidity("editable", !1) : (p.$setValidity("editable", !0), e)
                }),
                    p.$formatters.push(function(e) {
                        var t, n, i = {};
                        return v ? (i.$model = e, v(c, i)) : (i[b.itemName] = e, t = b.viewMapper(c, i), i[b.itemName] = void 0, n = b.viewMapper(c, i), t !== n ? t: e)
                    }),
                    E.select = function(e) {
                        var t, n, r = {};
                        r[b.itemName] = n = E.matches[e].model,
                            t = b.modelMapper(c, r),
                            _(c, t),
                            p.$setValidity("editable", !0),
                            y(c, {
                                $item: n,
                                $model: t,
                                $label: b.viewMapper(c, r)
                            }),
                            T(),
                            i(function() {
                                    l[0].focus()
                                },
                                0, !1)
                    },
                    l.bind("keydown",
                        function(e) {
                            0 !== E.matches.length && -1 !== s.indexOf(e.which) && ( - 1 != E.activeIdx || 13 !== e.which && 9 !== e.which) && (e.preventDefault(), 40 === e.which ? (E.activeIdx = (E.activeIdx + 1) % E.matches.length, E.$digest()) : 38 === e.which ? (E.activeIdx = (E.activeIdx > 0 ? E.activeIdx: E.matches.length) - 1, E.$digest()) : 13 === e.which || 9 === e.which ? E.$apply(function() {
                                E.select(E.activeIdx)
                            }) : 27 === e.which && (e.stopPropagation(), T(), E.$digest()))
                        }),
                    l.bind("blur",
                        function() {
                            u = !1
                        });
                var D = function(e) {
                    l[0] !== e.target && (T(), E.$digest())
                };
                r.bind("click", D),
                    c.$on("$destroy",
                        function() {
                            r.unbind("click", D),
                            C && R.remove()
                        });
                var R = e(A)(E);
                C ? r.find("body").append(R) : l.after(R)
            }
        }
    }]).directive("typeaheadPopup",
    function() {
        return {
            restrict: "EA",
            scope: {
                matches: "=",
                query: "=",
                active: "=",
                position: "=",
                select: "&"
            },
            replace: !0,
            templateUrl: "template/typeahead/typeahead-popup.html",
            link: function(e, t, n) {
                e.templateUrl = n.templateUrl,
                    e.isOpen = function() {
                        return e.matches.length > 0
                    },
                    e.isActive = function(t) {
                        return e.active == t
                    },
                    e.selectActive = function(t) {
                        e.active = t
                    },
                    e.selectMatch = function(t) {
                        e.select({
                            activeIdx: t
                        })
                    }
            }
        }
    }).directive("typeaheadMatch", ["$http", "$templateCache", "$compile", "$parse",
    function(e, t, n, i) {
        return {
            restrict: "EA",
            scope: {
                index: "=",
                match: "=",
                query: "="
            },
            link: function(r, a, o) {
                var s = i(o.templateUrl)(r.$parent) || "template/typeahead/typeahead-match.html";
                e.get(s, {
                    cache: t
                }).success(function(e) {
                    a.replaceWith(n(e.trim())(r))
                })
            }
        }
    }]).filter("typeaheadHighlight",
    function() {
        function e(e) {
            return e.replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1")
        }
        return function(t, n) {
            return n ? ("" + t).replace(new RegExp(e(n), "gi"), "<strong>$&</strong>") : t
        }
    }), angular.module("ui.bootstrap.position", []).factory("$position", ["$document", "$window",
    function(e, t) {
        function n(e, n) {
            return e.currentStyle ? e.currentStyle[n] : t.getComputedStyle ? t.getComputedStyle(e)[n] : e.style[n]
        }
        function i(e) {
            return "static" === (n(e, "position") || "static")
        }
        var r = function(t) {
            for (var n = e[0], r = t.offsetParent || n; r && r !== n && i(r);) r = r.offsetParent;
            return r || n
        };
        return {
            position: function(t) {
                var n = this.offset(t),
                    i = {
                        top: 0,
                        left: 0
                    },
                    a = r(t[0]);
                a != e[0] && (i = this.offset(angular.element(a)), i.top += a.clientTop - a.scrollTop, i.left += a.clientLeft - a.scrollLeft);
                var o = t[0].getBoundingClientRect();
                return {
                    width: o.width || t.prop("offsetWidth"),
                    height: o.height || t.prop("offsetHeight"),
                    top: n.top - i.top,
                    left: n.left - i.left
                }
            },
            offset: function(n) {
                var i = n[0].getBoundingClientRect();
                return {
                    width: i.width || n.prop("offsetWidth"),
                    height: i.height || n.prop("offsetHeight"),
                    top: i.top + (t.pageYOffset || e[0].documentElement.scrollTop),
                    left: i.left + (t.pageXOffset || e[0].documentElement.scrollLeft)
                }
            },
            positionElements: function(e, t, n, i) {
                var r, a, o, s, c = n.split("-"),
                    l = c[0],
                    d = c[1] || "center";
                r = i ? this.offset(e) : this.position(e),
                    a = t.prop("offsetWidth"),
                    o = t.prop("offsetHeight");
                var p = {
                        center: function() {
                            return r.left + r.width / 2 - a / 2
                        },
                        left: function() {
                            return r.left
                        },
                        right: function() {
                            return r.left + r.width
                        }
                    },
                    u = {
                        center: function() {
                            return r.top + r.height / 2 - o / 2
                        },
                        top: function() {
                            return r.top
                        },
                        bottom: function() {
                            return r.top + r.height
                        }
                    };
                switch (l) {
                    case "right":
                        s = {
                            top: u[d](),
                            left: p[l]()
                        };
                        break;
                    case "left":
                        s = {
                            top: u[d](),
                            left: r.left - a
                        };
                        break;
                    case "bottom":
                        s = {
                            top: u[l](),
                            left: p[d]()
                        };
                        break;
                    default:
                        s = {
                            top: r.top - o,
                            left: p[d]()
                        }
                }
                return s
            }
        }
    }]), angular.module("ui.bootstrap.bindHtml", []).directive("bindHtmlUnsafe",
    function() {
        return function(e, t, n) {
            t.addClass("ng-binding").data("$binding", n.bindHtmlUnsafe),
                e.$watch(n.bindHtmlUnsafe,
                    function(e) {
                        t.html(e || "")
                    })
        }
    }), angular.module("ui.bootstrap.modal", ["ui.bootstrap.transition"]).factory("$$stackedMap",
    function() {
        return {
            createNew: function() {
                var e = [];
                return {
                    add: function(t, n) {
                        e.push({
                            key: t,
                            value: n
                        })
                    },
                    get: function(t) {
                        for (var n = 0; n < e.length; n++) if (t == e[n].key) return e[n]
                    },
                    keys: function() {
                        for (var t = [], n = 0; n < e.length; n++) t.push(e[n].key);
                        return t
                    },
                    top: function() {
                        return e[e.length - 1]
                    },
                    remove: function(t) {
                        for (var n = -1,
                                 i = 0; i < e.length; i++) if (t == e[i].key) {
                            n = i;
                            break
                        }
                        return e.splice(n, 1)[0]
                    },
                    removeTop: function() {
                        return e.splice(e.length - 1, 1)[0]
                    },
                    length: function() {
                        return e.length
                    }
                }
            }
        }
    }).directive("modalBackdrop", ["$timeout",
    function(e) {
        return {
            restrict: "EA",
            replace: !0,
            templateUrl: "template/modal/backdrop.html",
            link: function(t, n, i) {
                t.backdropClass = i.backdropClass || "",
                    t.animate = !1,
                    e(function() {
                        t.animate = !0
                    })
            }
        }
    }]).directive("modalWindow", ["$modalStack", "$timeout",
    function(e, t) {
        return {
            restrict: "EA",
            scope: {
                index: "@",
                animate: "="
            },
            replace: !0,
            transclude: !0,
            templateUrl: function(e, t) {
                return t.templateUrl || "template/modal/window.html"
            },
            link: function(n, i, r) {
                i.addClass(r.windowClass || ""),
                    n.size = r.size,
                    t(function() {
                        n.animate = !0,
                        i[0].querySelectorAll("[autofocus]").length || i[0].focus()
                    }),
                    n.close = function(t) {
                        var n = e.getTop();
                        n && n.value.backdrop && "static" != n.value.backdrop && t.target === t.currentTarget && (t.preventDefault(), t.stopPropagation(), e.dismiss(n.key, "backdrop click"))
                    }
            }
        }
    }]).directive("modalTransclude",
    function() {
        return {
            link: function(e, t, n, i, r) {
                r(e.$parent,
                    function(e) {
                        t.empty(),
                            t.append(e)
                    })
            }
        }
    }).factory("$modalStack", ["$transition", "$timeout", "$document", "$compile", "$rootScope", "$$stackedMap",
    function(e, t, n, i, r, a) {
        function o() {
            for (var e = -1,
                     t = f.keys(), n = 0; n < t.length; n++) f.get(t[n]).value.backdrop && (e = n);
            return e
        }
        function s(e) {
            var t = n.find("body").eq(0),
                i = f.get(e).value;
            f.remove(e),
                l(i.modalDomEl, i.modalScope, 300,
                    function() {
                        i.modalScope.$destroy(),
                            t.toggleClass(u, f.length() > 0),
                            c()
                    })
        }
        function c() {
            if (d && -1 == o()) {
                var e = p;
                l(d, p, 150,
                    function() {
                        e.$destroy(),
                            e = null
                    }),
                    d = void 0,
                    p = void 0
            }
        }
        function l(n, i, r, a) {
            function o() {
                o.done || (o.done = !0, n.remove(), a && a())
            }
            i.animate = !1;
            var s = e.transitionEndEventName;
            if (s) {
                var c = t(o, r);
                n.bind(s,
                    function() {
                        t.cancel(c),
                            o(),
                            i.$apply()
                    })
            } else t(o)
        }
        var d, p, u = "modal-open",
            f = a.createNew(),
            h = {};
        return r.$watch(o,
            function(e) {
                p && (p.index = e)
            }),
            n.bind("keydown",
                function(e) {
                    var t;
                    27 === e.which && (t = f.top(), t && t.value.keyboard && (e.preventDefault(), r.$apply(function() {
                        h.dismiss(t.key, "escape key press")
                    })))
                }),
            h.open = function(e, t) {
                f.add(e, {
                    deferred: t.deferred,
                    modalScope: t.scope,
                    backdrop: t.backdrop,
                    keyboard: t.keyboard
                });
                var a = n.find("body").eq(0),
                    s = o();
                if (s >= 0 && !d) {
                    p = r.$new(!0),
                        p.index = s;
                    var c = angular.element("<div modal-backdrop></div>");
                    c.attr("backdrop-class", t.backdropClass),
                        d = i(c)(p),
                        a.append(d)
                }
                var l = angular.element("<div modal-window></div>");
                l.attr({
                    "template-url": t.windowTemplateUrl,
                    "window-class": t.windowClass,
                    size: t.size,
                    index: f.length() - 1,
                    animate: "animate"
                }).html(t.content);
                var h = i(l)(t.scope);
                f.top().value.modalDomEl = h,
                    a.append(h),
                    a.addClass(u)
            },
            h.close = function(e, t) {
                var n = f.get(e);
                n && (n.value.deferred.resolve(t), s(e))
            },
            h.dismiss = function(e, t) {
                var n = f.get(e);
                n && (n.value.deferred.reject(t), s(e))
            },
            h.dismissAll = function(e) {
                for (var t = this.getTop(); t;) this.dismiss(t.key, e),
                    t = this.getTop()
            },
            h.getTop = function() {
                return f.top()
            },
            h
    }]).provider("$modal",
    function() {
        var e = {
            options: {
                backdrop: !0,
                keyboard: !0
            },
            $get: ["$injector", "$rootScope", "$q", "$http", "$templateCache", "$controller", "$modalStack",
                function(t, n, i, r, a, o, s) {
                    function c(e) {
                        return e.template ? i.when(e.template) : r.get(angular.isFunction(e.templateUrl) ? e.templateUrl() : e.templateUrl, {
                            cache: a
                        }).then(function(e) {
                            return e.data
                        })
                    }
                    function l(e) {
                        var n = [];
                        return angular.forEach(e,
                            function(e) { (angular.isFunction(e) || angular.isArray(e)) && n.push(i.when(t.invoke(e)))
                            }),
                            n
                    }
                    var d = {};
                    return d.open = function(t) {
                        var r = i.defer(),
                            a = i.defer(),
                            d = {
                                result: r.promise,
                                opened: a.promise,
                                close: function(e) {
                                    s.close(d, e)
                                },
                                dismiss: function(e) {
                                    s.dismiss(d, e)
                                }
                            };
                        if (t = angular.extend({},
                                e.options, t), t.resolve = t.resolve || {},
                            !t.template && !t.templateUrl) throw new Error("One of template or templateUrl options is required.");
                        var p = i.all([c(t)].concat(l(t.resolve)));
                        return p.then(function(e) {
                                var i = (t.scope || n).$new();
                                i.$close = d.close,
                                    i.$dismiss = d.dismiss;
                                var a, c = {},
                                    l = 1;
                                t.controller && (c.$scope = i, c.$modalInstance = d, angular.forEach(t.resolve,
                                    function(t, n) {
                                        c[n] = e[l++]
                                    }), a = o(t.controller, c), t.controllerAs && (i[t.controllerAs] = a)),
                                    s.open(d, {
                                        scope: i,
                                        deferred: r,
                                        content: e[0],
                                        backdrop: t.backdrop,
                                        keyboard: t.keyboard,
                                        backdropClass: t.backdropClass,
                                        windowClass: t.windowClass,
                                        windowTemplateUrl: t.windowTemplateUrl,
                                        size: t.size
                                    })
                            },
                            function(e) {
                                r.reject(e)
                            }),
                            p.then(function() {
                                    a.resolve(!0)
                                },
                                function() {
                                    a.reject(!1)
                                }),
                            d
                    },
                        d
                }]
        };
        return e
    }), angular.module("ui.bootstrap.transition", []).factory("$transition", ["$q", "$timeout", "$rootScope",
    function(e, t, n) {
        function i(e) {
            for (var t in e) if (void 0 !== a.style[t]) return e[t]
        }
        var r = function(i, a, o) {
                o = o || {};
                var s = e.defer(),
                    c = r[o.animation ? "animationEndEventName": "transitionEndEventName"],
                    l = function() {
                        n.$apply(function() {
                            i.unbind(c, l),
                                s.resolve(i)
                        })
                    };
                return c && i.bind(c, l),
                    t(function() {
                        angular.isString(a) ? i.addClass(a) : angular.isFunction(a) ? a(i) : angular.isObject(a) && i.css(a),
                        c || s.resolve(i)
                    }),
                    s.promise.cancel = function() {
                        c && i.unbind(c, l),
                            s.reject("Transition cancelled")
                    },
                    s.promise
            },
            a = document.createElement("trans"),
            o = {
                WebkitTransition: "webkitTransitionEnd",
                MozTransition: "transitionend",
                OTransition: "oTransitionEnd",
                transition: "transitionend"
            },
            s = {
                WebkitTransition: "webkitAnimationEnd",
                MozTransition: "animationend",
                OTransition: "oAnimationEnd",
                transition: "animationend"
            };
        return r.transitionEndEventName = i(o),
            r.animationEndEventName = i(s),
            r
    }]), angular.module("ui.bootstrap", ["ui.bootstrap.tpls", "ui.bootstrap.typeahead", "ui.bootstrap.position", "ui.bootstrap.bindHtml", "ui.bootstrap.modal", "ui.bootstrap.transition"]), angular.module("ui.bootstrap.tpls", ["template/typeahead/typeahead-match.html", "template/typeahead/typeahead-popup.html", "template/modal/backdrop.html", "template/modal/window.html"]), angular.module("ui.bootstrap.typeahead", ["ui.bootstrap.position", "ui.bootstrap.bindHtml"]).factory("typeaheadParser", ["$parse",
    function(e) {
        var t = /^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;
        return {
            parse: function(n) {
                var i = n.match(t);
                if (!i) throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "' + n + '".');
                return {
                    itemName: i[3],
                    source: e(i[4]),
                    viewMapper: e(i[2] || i[1]),
                    modelMapper: e(i[1])
                }
            }
        }
    }]).directive("typeahead", ["$compile", "$parse", "$q", "$timeout", "$document", "$position", "typeaheadParser",
    function(e, t, n, i, r, a, o) {
        var s = [9, 13, 27, 38, 40];
        return {
            require: "ngModel",
            link: function(c, l, d, p) {
                var u, f = c.$eval(d.typeaheadMinLength) || 1,
                    h = c.$eval(d.typeaheadWaitMs) || 0,
                    g = c.$eval(d.typeaheadEditable) !== !1,
                    m = t(d.typeaheadLoading).assign || angular.noop,
                    y = t(d.typeaheadOnSelect),
                    v = d.typeaheadInputFormatter ? t(d.typeaheadInputFormatter) : void 0,
                    C = d.typeaheadAppendToBody ? c.$eval(d.typeaheadAppendToBody) : !1,
                    S = c.$eval(d.typeaheadFocusFirst) !== !1,
                    _ = t(d.ngModel).assign,
                    b = o.parse(d.typeahead),
                    E = c.$new();
                c.$on("$destroy",
                    function() {
                        E.$destroy()
                    });
                var I = "typeahead-" + E.$id + "-" + Math.floor(1e4 * Math.random());
                l.attr({
                    "aria-autocomplete": "list",
                    "aria-expanded": !1,
                    "aria-owns": I
                });
                var A = angular.element("<div typeahead-popup></div>");
                A.attr({
                    id: I,
                    matches: "matches",
                    active: "activeIdx",
                    select: "select(activeIdx)",
                    query: "query",
                    position: "position"
                }),
                angular.isDefined(d.typeaheadTemplateUrl) && A.attr("template-url", d.typeaheadTemplateUrl);
                var T = function() {
                        E.matches = [],
                            E.activeIdx = -1,
                            l.attr("aria-expanded", !1)
                    },
                    k = function(e) {
                        return I + "-option-" + e
                    };
                E.$watch("activeIdx",
                    function(e) {
                        0 > e ? l.removeAttr("aria-activedescendant") : l.attr("aria-activedescendant", k(e))
                    });
                var w = function(e) {
                    var t = {
                        $viewValue: e
                    };
                    m(c, !0),
                        n.when(b.source(c, t)).then(function(n) {
                                var i = e === p.$viewValue;
                                if (i && u) if (n.length > 0) {
                                    E.activeIdx = S ? 0 : -1,
                                        E.matches.length = 0;
                                    for (var r = 0; r < n.length; r++) t[b.itemName] = n[r],
                                        E.matches.push({
                                            id: k(r),
                                            label: b.viewMapper(E, t),
                                            model: n[r]
                                        });
                                    E.query = e,
                                        E.position = C ? a.offset(l) : a.position(l),
                                        E.position.top = E.position.top + l.prop("offsetHeight"),
                                        l.attr("aria-expanded", !0)
                                } else T();
                                i && m(c, !1)
                            },
                            function() {
                                T(),
                                    m(c, !1)
                            })
                };
                T(),
                    E.query = void 0;
                var $, P = function(e) {
                        $ = i(function() {
                                w(e)
                            },
                            h)
                    },
                    N = function() {
                        $ && i.cancel($)
                    };
                p.$parsers.unshift(function(e) {
                    return u = !0,
                        e && e.length >= f ? h > 0 ? (N(), P(e)) : w(e) : (m(c, !1), N(), T()),
                        g ? e: e ? void p.$setValidity("editable", !1) : (p.$setValidity("editable", !0), e)
                }),
                    p.$formatters.push(function(e) {
                        var t, n, i = {};
                        return v ? (i.$model = e, v(c, i)) : (i[b.itemName] = e, t = b.viewMapper(c, i), i[b.itemName] = void 0, n = b.viewMapper(c, i), t !== n ? t: e)
                    }),
                    E.select = function(e) {
                        var t, n, r = {};
                        r[b.itemName] = n = E.matches[e].model,
                            t = b.modelMapper(c, r),
                            _(c, t),
                            p.$setValidity("editable", !0),
                            y(c, {
                                $item: n,
                                $model: t,
                                $label: b.viewMapper(c, r)
                            }),
                            T(),
                            i(function() {
                                    l[0].focus()
                                },
                                0, !1)
                    },
                    l.bind("keydown",
                        function(e) {
                            0 !== E.matches.length && -1 !== s.indexOf(e.which) && ( - 1 != E.activeIdx || 13 !== e.which && 9 !== e.which) && (e.preventDefault(), 40 === e.which ? (E.activeIdx = (E.activeIdx + 1) % E.matches.length, E.$digest()) : 38 === e.which ? (E.activeIdx = (E.activeIdx > 0 ? E.activeIdx: E.matches.length) - 1, E.$digest()) : 13 === e.which || 9 === e.which ? E.$apply(function() {
                                E.select(E.activeIdx)
                            }) : 27 === e.which && (e.stopPropagation(), T(), E.$digest()))
                        }),
                    l.bind("blur",
                        function() {
                            u = !1
                        });
                var D = function(e) {
                    l[0] !== e.target && (T(), E.$digest())
                };
                r.bind("click", D),
                    c.$on("$destroy",
                        function() {
                            r.unbind("click", D),
                            C && R.remove()
                        });
                var R = e(A)(E);
                C ? r.find("body").append(R) : l.after(R)
            }
        }
    }]).directive("typeaheadPopup",
    function() {
        return {
            restrict: "EA",
            scope: {
                matches: "=",
                query: "=",
                active: "=",
                position: "=",
                select: "&"
            },
            replace: !0,
            templateUrl: "template/typeahead/typeahead-popup.html",
            link: function(e, t, n) {
                e.templateUrl = n.templateUrl,
                    e.isOpen = function() {
                        return e.matches.length > 0
                    },
                    e.isActive = function(t) {
                        return e.active == t
                    },
                    e.selectActive = function(t) {
                        e.active = t
                    },
                    e.selectMatch = function(t) {
                        e.select({
                            activeIdx: t
                        })
                    }
            }
        }
    }).directive("typeaheadMatch", ["$http", "$templateCache", "$compile", "$parse",
    function(e, t, n, i) {
        return {
            restrict: "EA",
            scope: {
                index: "=",
                match: "=",
                query: "="
            },
            link: function(r, a, o) {
                var s = i(o.templateUrl)(r.$parent) || "template/typeahead/typeahead-match.html";
                e.get(s, {
                    cache: t
                }).success(function(e) {
                    a.replaceWith(n(e.trim())(r))
                })
            }
        }
    }]).filter("typeaheadHighlight",
    function() {
        function e(e) {
            return e.replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1")
        }
        return function(t, n) {
            return n ? ("" + t).replace(new RegExp(e(n), "gi"), "<strong>$&</strong>") : t
        }
    }), angular.module("ui.bootstrap.position", []).factory("$position", ["$document", "$window",
    function(e, t) {
        function n(e, n) {
            return e.currentStyle ? e.currentStyle[n] : t.getComputedStyle ? t.getComputedStyle(e)[n] : e.style[n]
        }
        function i(e) {
            return "static" === (n(e, "position") || "static")
        }
        var r = function(t) {
            for (var n = e[0], r = t.offsetParent || n; r && r !== n && i(r);) r = r.offsetParent;
            return r || n
        };
        return {
            position: function(t) {
                var n = this.offset(t),
                    i = {
                        top: 0,
                        left: 0
                    },
                    a = r(t[0]);
                a != e[0] && (i = this.offset(angular.element(a)), i.top += a.clientTop - a.scrollTop, i.left += a.clientLeft - a.scrollLeft);
                var o = t[0].getBoundingClientRect();
                return {
                    width: o.width || t.prop("offsetWidth"),
                    height: o.height || t.prop("offsetHeight"),
                    top: n.top - i.top,
                    left: n.left - i.left
                }
            },
            offset: function(n) {
                var i = n[0].getBoundingClientRect();
                return {
                    width: i.width || n.prop("offsetWidth"),
                    height: i.height || n.prop("offsetHeight"),
                    top: i.top + (t.pageYOffset || e[0].documentElement.scrollTop),
                    left: i.left + (t.pageXOffset || e[0].documentElement.scrollLeft)
                }
            },
            positionElements: function(e, t, n, i) {
                var r, a, o, s, c = n.split("-"),
                    l = c[0],
                    d = c[1] || "center";
                r = i ? this.offset(e) : this.position(e),
                    a = t.prop("offsetWidth"),
                    o = t.prop("offsetHeight");
                var p = {
                        center: function() {
                            return r.left + r.width / 2 - a / 2
                        },
                        left: function() {
                            return r.left
                        },
                        right: function() {
                            return r.left + r.width
                        }
                    },
                    u = {
                        center: function() {
                            return r.top + r.height / 2 - o / 2
                        },
                        top: function() {
                            return r.top
                        },
                        bottom: function() {
                            return r.top + r.height
                        }
                    };
                switch (l) {
                    case "right":
                        s = {
                            top: u[d](),
                            left: p[l]()
                        };
                        break;
                    case "left":
                        s = {
                            top: u[d](),
                            left: r.left - a
                        };
                        break;
                    case "bottom":
                        s = {
                            top: u[l](),
                            left: p[d]()
                        };
                        break;
                    default:
                        s = {
                            top: r.top - o,
                            left: p[d]()
                        }
                }
                return s
            }
        }
    }]), angular.module("ui.bootstrap.bindHtml", []).directive("bindHtmlUnsafe",
    function() {
        return function(e, t, n) {
            t.addClass("ng-binding").data("$binding", n.bindHtmlUnsafe),
                e.$watch(n.bindHtmlUnsafe,
                    function(e) {
                        t.html(e || "")
                    })
        }
    }), angular.module("ui.bootstrap.modal", ["ui.bootstrap.transition"]).factory("$$stackedMap",
    function() {
        return {
            createNew: function() {
                var e = [];
                return {
                    add: function(t, n) {
                        e.push({
                            key: t,
                            value: n
                        })
                    },
                    get: function(t) {
                        for (var n = 0; n < e.length; n++) if (t == e[n].key) return e[n]
                    },
                    keys: function() {
                        for (var t = [], n = 0; n < e.length; n++) t.push(e[n].key);
                        return t
                    },
                    top: function() {
                        return e[e.length - 1]
                    },
                    remove: function(t) {
                        for (var n = -1,
                                 i = 0; i < e.length; i++) if (t == e[i].key) {
                            n = i;
                            break
                        }
                        return e.splice(n, 1)[0]
                    },
                    removeTop: function() {
                        return e.splice(e.length - 1, 1)[0]
                    },
                    length: function() {
                        return e.length
                    }
                }
            }
        }
    }).directive("modalBackdrop", ["$timeout",
    function(e) {
        return {
            restrict: "EA",
            replace: !0,
            templateUrl: "template/modal/backdrop.html",
            link: function(t, n, i) {
                t.backdropClass = i.backdropClass || "",
                    t.animate = !1,
                    e(function() {
                        t.animate = !0
                    })
            }
        }
    }]).directive("modalWindow", ["$modalStack", "$timeout",
    function(e, t) {
        return {
            restrict: "EA",
            scope: {
                index: "@",
                animate: "="
            },
            replace: !0,
            transclude: !0,
            templateUrl: function(e, t) {
                return t.templateUrl || "template/modal/window.html"
            },
            link: function(n, i, r) {
                i.addClass(r.windowClass || ""),
                    n.size = r.size,
                    t(function() {
                        n.animate = !0,
                        i[0].querySelectorAll("[autofocus]").length || i[0].focus()
                    }),
                    n.close = function(t) {
                        var n = e.getTop();
                        n && n.value.backdrop && "static" != n.value.backdrop && t.target === t.currentTarget && (t.preventDefault(), t.stopPropagation(), e.dismiss(n.key, "backdrop click"))
                    }
            }
        }
    }]).directive("modalTransclude",
    function() {
        return {
            link: function(e, t, n, i, r) {
                r(e.$parent,
                    function(e) {
                        t.empty(),
                            t.append(e)
                    })
            }
        }
    }).factory("$modalStack", ["$transition", "$timeout", "$document", "$compile", "$rootScope", "$$stackedMap",
    function(e, t, n, i, r, a) {
        function o() {
            for (var e = -1,
                     t = f.keys(), n = 0; n < t.length; n++) f.get(t[n]).value.backdrop && (e = n);
            return e
        }
        function s(e) {
            var t = n.find("body").eq(0),
                i = f.get(e).value;
            f.remove(e),
                l(i.modalDomEl, i.modalScope, 300,
                    function() {
                        i.modalScope.$destroy(),
                            t.toggleClass(u, f.length() > 0),
                            c()
                    })
        }
        function c() {
            if (d && -1 == o()) {
                var e = p;
                l(d, p, 150,
                    function() {
                        e.$destroy(),
                            e = null
                    }),
                    d = void 0,
                    p = void 0
            }
        }
        function l(n, i, r, a) {
            function o() {
                o.done || (o.done = !0, n.remove(), a && a())
            }
            i.animate = !1;
            var s = e.transitionEndEventName;
            if (s) {
                var c = t(o, r);
                n.bind(s,
                    function() {
                        t.cancel(c),
                            o(),
                            i.$apply()
                    })
            } else t(o)
        }
        var d, p, u = "modal-open",
            f = a.createNew(),
            h = {};
        return r.$watch(o,
            function(e) {
                p && (p.index = e)
            }),
            n.bind("keydown",
                function(e) {
                    var t;
                    27 === e.which && (t = f.top(), t && t.value.keyboard && (e.preventDefault(), r.$apply(function() {
                        h.dismiss(t.key, "escape key press")
                    })))
                }),
            h.open = function(e, t) {
                f.add(e, {
                    deferred: t.deferred,
                    modalScope: t.scope,
                    backdrop: t.backdrop,
                    keyboard: t.keyboard
                });
                var a = n.find("body").eq(0),
                    s = o();
                if (s >= 0 && !d) {
                    p = r.$new(!0),
                        p.index = s;
                    var c = angular.element("<div modal-backdrop></div>");
                    c.attr("backdrop-class", t.backdropClass),
                        d = i(c)(p),
                        a.append(d)
                }
                var l = angular.element("<div modal-window></div>");
                l.attr({
                    "template-url": t.windowTemplateUrl,
                    "window-class": t.windowClass,
                    size: t.size,
                    index: f.length() - 1,
                    animate: "animate"
                }).html(t.content);
                var h = i(l)(t.scope);
                f.top().value.modalDomEl = h,
                    a.append(h),
                    a.addClass(u)
            },
            h.close = function(e, t) {
                var n = f.get(e);
                n && (n.value.deferred.resolve(t), s(e))
            },
            h.dismiss = function(e, t) {
                var n = f.get(e);
                n && (n.value.deferred.reject(t), s(e))
            },
            h.dismissAll = function(e) {
                for (var t = this.getTop(); t;) this.dismiss(t.key, e),
                    t = this.getTop()
            },
            h.getTop = function() {
                return f.top()
            },
            h
    }]).provider("$modal",
    function() {
        var e = {
            options: {
                backdrop: !0,
                keyboard: !0
            },
            $get: ["$injector", "$rootScope", "$q", "$http", "$templateCache", "$controller", "$modalStack",
                function(t, n, i, r, a, o, s) {
                    function c(e) {
                        return e.template ? i.when(e.template) : r.get(angular.isFunction(e.templateUrl) ? e.templateUrl() : e.templateUrl, {
                            cache: a
                        }).then(function(e) {
                            return e.data
                        })
                    }
                    function l(e) {
                        var n = [];
                        return angular.forEach(e,
                            function(e) { (angular.isFunction(e) || angular.isArray(e)) && n.push(i.when(t.invoke(e)))
                            }),
                            n
                    }
                    var d = {};
                    return d.open = function(t) {
                        var r = i.defer(),
                            a = i.defer(),
                            d = {
                                result: r.promise,
                                opened: a.promise,
                                close: function(e) {
                                    s.close(d, e)
                                },
                                dismiss: function(e) {
                                    s.dismiss(d, e)
                                }
                            };
                        if (t = angular.extend({},
                                e.options, t), t.resolve = t.resolve || {},
                            !t.template && !t.templateUrl) throw new Error("One of template or templateUrl options is required.");
                        var p = i.all([c(t)].concat(l(t.resolve)));
                        return p.then(function(e) {
                                var i = (t.scope || n).$new();
                                i.$close = d.close,
                                    i.$dismiss = d.dismiss;
                                var a, c = {},
                                    l = 1;
                                t.controller && (c.$scope = i, c.$modalInstance = d, angular.forEach(t.resolve,
                                    function(t, n) {
                                        c[n] = e[l++]
                                    }), a = o(t.controller, c), t.controllerAs && (i[t.controllerAs] = a)),
                                    s.open(d, {
                                        scope: i,
                                        deferred: r,
                                        content: e[0],
                                        backdrop: t.backdrop,
                                        keyboard: t.keyboard,
                                        backdropClass: t.backdropClass,
                                        windowClass: t.windowClass,
                                        windowTemplateUrl: t.windowTemplateUrl,
                                        size: t.size
                                    })
                            },
                            function(e) {
                                r.reject(e)
                            }),
                            p.then(function() {
                                    a.resolve(!0)
                                },
                                function() {
                                    a.reject(!1)
                                }),
                            d
                    },
                        d
                }]
        };
        return e
    }), angular.module("ui.bootstrap.transition", []).factory("$transition", ["$q", "$timeout", "$rootScope",
    function(e, t, n) {
        function i(e) {
            for (var t in e) if (void 0 !== a.style[t]) return e[t]
        }
        var r = function(i, a, o) {
                o = o || {};
                var s = e.defer(),
                    c = r[o.animation ? "animationEndEventName": "transitionEndEventName"],
                    l = function() {
                        n.$apply(function() {
                            i.unbind(c, l),
                                s.resolve(i)
                        })
                    };
                return c && i.bind(c, l),
                    t(function() {
                        angular.isString(a) ? i.addClass(a) : angular.isFunction(a) ? a(i) : angular.isObject(a) && i.css(a),
                        c || s.resolve(i)
                    }),
                    s.promise.cancel = function() {
                        c && i.unbind(c, l),
                            s.reject("Transition cancelled")
                    },
                    s.promise
            },
            a = document.createElement("trans"),
            o = {
                WebkitTransition: "webkitTransitionEnd",
                MozTransition: "transitionend",
                OTransition: "oTransitionEnd",
                transition: "transitionend"
            },
            s = {
                WebkitTransition: "webkitAnimationEnd",
                MozTransition: "animationend",
                OTransition: "oAnimationEnd",
                transition: "animationend"
            };
        return r.transitionEndEventName = i(o),
            r.animationEndEventName = i(s),
            r
    }]), angular.module("template/typeahead/typeahead-match.html", []).run(["$templateCache",
    function(e) {
        e.put("template/typeahead/typeahead-match.html", '<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')
    }]), angular.module("template/typeahead/typeahead-popup.html", []).run(["$templateCache",
    function(e) {
        e.put("template/typeahead/typeahead-popup.html", '<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')
    }]), angular.module("template/modal/backdrop.html", []).run(["$templateCache",
    function(e) {
        e.put("template/modal/backdrop.html", '<div class="modal-backdrop fade {{ backdropClass }}"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')
    }]), angular.module("template/modal/window.html", []).run(["$templateCache",
    function(e) {
        e.put("template/modal/window.html", '<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" modal-transclude></div></div>\n</div>')
    }]), $(function() {
    function e() {
        var e;
        null != localStorage.getItem("unloadData") && (e = JSON.parse(localStorage.getItem("unloadData")), newrelic.addPageAction("checkout-unload-done", {
            unloadTimeDuration: Number(e.time),
            targetURL: e.href,
            sourceElementId: e.id,
            ourceElementClass: e["class"],
            deviceType: window.isMobile() ? "Mobile": "Desktop",
            ecomSessionId: $.cookie("s_ecom_session"),
            isLoggedIn: window.isLogin() ? !0 : !1
        }), localStorage.removeItem("unloadData"))
    }
    function t() {
        window.onbeforeunload = function() {
            var e = new Date;
            n = e.getTime()
        },
            window.onunload = function() {
                var e = new Date,
                    t = e.getTime(),
                    i = {};
                i.time = ((t - n) / 1e3).toFixed(2),
                document && document.activeElement && (i.id = document.activeElement.id, i.href = document.activeElement.href, i["class"] = document.activeElement.classList ? document.activeElement.classList.toString() : ""),
                    localStorage.setItem("unloadData", JSON.stringify(i))
            }
    }
    window.newrelic = window.newrelic || {};
    var n;
    "undefined" != typeof Storage && localStorage.getItem("unloadData") && e(),
        t(),
        window.newrelic.fireCustomPageAction = function(e, t, n) {
            if (performance && performance.timing) {
                var i = t - performance.timing.navigationStart,
                    r = (i / 1e3).toFixed(2),
                    a = navigator.connection || navigator.mozConnection || navigator.webkitConnection || navigator.msConnection,
                    o = new UAParser;
                o.setUA(window.navigator.userAgent);
                var s = o.getResult(),
                    c = [];
                n && n.line_items && (c = n.line_items.map(function(e) {
                    return e.sku_id
                })),
                    newrelic.addPageAction(e, {
                        loadTimeDuration: Number(r),
                        deviceType: window.isMobile() ? "Mobile": "Desktop",
                        bandwidth: a && a.bandwidth ? a.bandwidth: "",
                        isLoggedIn: window.isLogin() ? !0 : !1,
                        userAgentString: window.navigator.userAgent,
                        OSversion: s.os.version ? s.os.version: "",
                        userAgentType: s.device.type ? s.device.type: "",
                        checkoutv3ui: $.cookie("checkoutv3ui"),
                        isEppUser: SCart.isEppUser(),
                        ecomSessionId: $.cookie("s_ecom_session"),
                        skuIds: c
                    })
            }
        },
        window.newrelic.fireCustomPageLoadTag = function(e, t) {
            var n = new UAParser;
            n.setUA(window.navigator.userAgent);
            var i = n.getResult();
            newrelic.addPageAction(e, {
                loadTimeDuration: Number(t),
                deviceType: window.isMobile() ? "Mobile": "Desktop",
                isLoggedIn: window.isLogin() ? !0 : !1,
                userAgentString: window.navigator.userAgent,
                OSversion: i.os.version ? i.os.version: "",
                userAgentString: window.navigator.userAgent,
                checkoutv3ui: $.cookie("checkoutv3ui"),
                isEppUser: SCart.isEppUser(),
                ecomSessionId: $.cookie("s_ecom_session")
            })
        }
}), angular.module("slickCarousel", []).constant("slickCarouselConfig", {
    method: {},
    event: {}
}).directive("slick", ["$timeout", "slickCarouselConfig",
    function(e, t) {
        var n, i;
        return n = ["slickGoTo", "slickNext", "slickPrev", "slickPause", "slickPlay", "slickAdd", "slickRemove", "slickFilter", "slickUnfilter", "unslick"],
            i = ["afterChange", "beforeChange", "breakpoint", "destroy", "edge", "init", "reInit", "setPosition", "swipe"],
            {
                scope: {
                    settings: "=",
                    enabled: "@",
                    accessibility: "@",
                    adaptiveHeight: "@",
                    autoplay: "@",
                    autoplaySpeed: "@",
                    arrows: "@",
                    asNavFor: "@",
                    appendArrows: "@",
                    prevArrow: "@",
                    nextArrow: "@",
                    centerMode: "@",
                    centerPadding: "@",
                    cssEase: "@",
                    customPaging: "&",
                    dots: "@",
                    draggable: "@",
                    fade: "@",
                    focusOnSelect: "@",
                    easing: "@",
                    edgeFriction: "@",
                    infinite: "@",
                    initialSlide: "@",
                    lazyLoad: "@",
                    mobileFirst: "@",
                    pauseOnHover: "@",
                    pauseOnDotsHover: "@",
                    respondTo: "@",
                    responsive: "=?",
                    rows: "@",
                    slide: "@",
                    slidesPerRow: "@",
                    slidesToShow: "@",
                    slidesToScroll: "@",
                    speed: "@",
                    swipe: "@",
                    swipeToSlide: "@",
                    touchMove: "@",
                    touchThreshold: "@",
                    useCSS: "@",
                    variableWidth: "@",
                    vertical: "@",
                    verticalSwiping: "@",
                    rtl: "@"
                },
                restrict: "AE",
                link: function(i, r, a) {
                    angular.element(r).css("display", "none");
                    var o, s, c, l, d, p;
                    return s = function() {
                        o = angular.extend(angular.copy(t), {
                                enabled: "false" !== i.enabled,
                                accessibility: "false" !== i.accessibility,
                                adaptiveHeight: "true" === i.adaptiveHeight,
                                autoplay: "true" === i.autoplay,
                                autoplaySpeed: null != i.autoplaySpeed ? parseInt(i.autoplaySpeed, 10) : 3e3,
                                arrows: "false" !== i.arrows,
                                asNavFor: i.asNavFor ? i.asNavFor: void 0,
                                appendArrows: angular.element(i.appendArrows ? i.appendArrows: r),
                                prevArrow: i.prevArrow ? angular.element(i.prevArrow) : void 0,
                                nextArrow: i.nextArrow ? angular.element(i.nextArrow) : void 0,
                                centerMode: "true" === i.centerMode,
                                centerPadding: i.centerPadding || "50px",
                                cssEase: i.cssEase || "ease",
                                customPaging: a.customPaging ?
                                    function(e, t) {
                                        return i.customPaging({
                                            slick: e,
                                            index: t
                                        })
                                    }: void 0,
                                dots: "true" === i.dots,
                                draggable: "false" !== i.draggable,
                                fade: "true" === i.fade,
                                focusOnSelect: "true" === i.focusOnSelect,
                                easing: i.easing || "linear",
                                edgeFriction: i.edgeFriction || .15,
                                infinite: "false" !== i.infinite,
                                initialSlide: parseInt(i.initialSlide) || 0,
                                lazyLoad: i.lazyLoad || "ondemand",
                                mobileFirst: "true" === i.mobileFirst,
                                pauseOnHover: "false" !== i.pauseOnHover,
                                pauseOnDotsHover: "true" === i.pauseOnDotsHover,
                                respondTo: null != i.respondTo ? i.respondTo: "window",
                                responsive: i.responsive || void 0,
                                rows: null != i.rows ? parseInt(i.rows, 10) : 1,
                                slide: i.slide || "",
                                slidesPerRow: null != i.slidesPerRow ? parseInt(i.slidesPerRow, 10) : 1,
                                slidesToShow: null != i.slidesToShow ? parseInt(i.slidesToShow, 10) : 1,
                                slidesToScroll: null != i.slidesToScroll ? parseInt(i.slidesToScroll, 10) : 1,
                                speed: null != i.speed ? parseInt(i.speed, 10) : 300,
                                swipe: "false" !== i.swipe,
                                swipeToSlide: "true" === i.swipeToSlide,
                                touchMove: "false" !== i.touchMove,
                                touchThreshold: i.touchThreshold ? parseInt(i.touchThreshold, 10) : 5,
                                useCSS: "false" !== i.useCSS,
                                variableWidth: "true" === i.variableWidth,
                                vertical: "true" === i.vertical,
                                verticalSwiping: "true" === i.verticalSwiping,
                                rtl: "true" === i.rtl
                            },
                            i.settings)
                    },
                        c = function() {
                            var e = angular.element(r);
                            return e.hasClass("slick-initialized") && (e.remove("slick-list"), e.slick("unslick")),
                                e
                        },
                        l = function() {
                            s();
                            var t = angular.element(r);
                            if (angular.element(r).hasClass("slick-initialized")) {
                                if (o.enabled) return t.slick("getSlick");
                                c()
                            } else {
                                if (!o.enabled) return;
                                t.on("init",
                                    function(e, t) {
                                        return "undefined" != typeof o.event.init && o.event.init(e, t),
                                            "undefined" != typeof p ? t.slideHandler(p) : void 0
                                    }),
                                    e(function() {
                                        angular.element(r).css("display", "block"),
                                            t.slick(o)
                                    })
                            }
                            i.internalControl = o.method || {},
                                n.forEach(function(e) {
                                    i.internalControl[e] = function() {
                                        var n;
                                        n = Array.prototype.slice.call(arguments),
                                            n.unshift(e),
                                            t.slick.apply(r, n)
                                    }
                                }),
                                t.on("afterChange",
                                    function(t, n, r, a) {
                                        p = r,
                                        "undefined" != typeof o.event.afterChange && e(function() {
                                            i.$apply(function() {
                                                o.event.afterChange(t, n, r, a)
                                            })
                                        })
                                    }),
                                t.on("beforeChange",
                                    function(t, n, r, a) {
                                        "undefined" != typeof o.event.beforeChange && e(function() {
                                            e(function() {
                                                i.$apply(function() {
                                                    o.event.beforeChange(t, n, r, a)
                                                })
                                            })
                                        })
                                    }),
                                t.on("reInit",
                                    function(t, n) {
                                        "undefined" != typeof o.event.reInit && e(function() {
                                            i.$apply(function() {
                                                o.event.reInit(t, n)
                                            })
                                        })
                                    }),
                            "undefined" != typeof o.event.breakpoint && t.on("breakpoint",
                                function(t, n, r) {
                                    e(function() {
                                        i.$apply(function() {
                                            o.event.breakpoint(t, n, r)
                                        })
                                    })
                                }),
                            "undefined" != typeof o.event.destroy && t.on("destroy",
                                function(t, n) {
                                    e(function() {
                                        i.$apply(function() {
                                            o.event.destroy(t, n)
                                        })
                                    })
                                }),
                            "undefined" != typeof o.event.edge && t.on("edge",
                                function(t, n, r) {
                                    e(function() {
                                        i.$apply(function() {
                                            o.event.edge(t, n, r)
                                        })
                                    })
                                }),
                            "undefined" != typeof o.event.setPosition && t.on("setPosition",
                                function(t, n) {
                                    e(function() {
                                        i.$apply(function() {
                                            o.event.setPosition(t, n)
                                        })
                                    })
                                }),
                            "undefined" != typeof o.event.swipe && t.on("swipe",
                                function(t, n, r) {
                                    e(function() {
                                        i.$apply(function() {
                                            o.event.swipe(t, n, r)
                                        })
                                    })
                                })
                        },
                        d = function() {
                            c(),
                                l()
                        },
                        r.one("$destroy",
                            function() {
                                c()
                            }),
                        i.$watch("settings",
                            function(e, t) {
                                return null !== e ? d() : void 0
                            },
                            !0)
                }
            }
    }]),
    function(e, t, n) {
        "use strict";
        function i(e) {
            function t(e, t) {
                return e ? r(e) ? e.indexOf(t) >= 0 : e.hasOwnProperty(t) : void 0
            }
            return ["$animate",
                function(e) {
                    return {
                        restrict: "AE",
                        transclude: "element",
                        terminal: !0,
                        require: "^^ngMessages",
                        link: function(n, i, a, o, s) {
                            var c, l = i[0],
                                d = a.ngMessage || a.when,
                                p = a.ngMessageExp || a.whenExp,
                                u = function(e) {
                                    c = e ? r(e) ? e: e.split(/[\s,]+/) : null,
                                        o.reRender()
                                };
                            p ? (u(n.$eval(p)), n.$watchCollection(p, u)) : u(d);
                            var f, h;
                            o.register(l, h = {
                                test: function(e) {
                                    return t(c, e)
                                },
                                attach: function() {
                                    f || s(n,
                                        function(t) {
                                            e.enter(t, null, i),
                                                f = t,
                                                f.on("$destroy",
                                                    function() {
                                                        f && (o.deregister(l), h.detach())
                                                    })
                                        })
                                },
                                detach: function() {
                                    if (f) {
                                        var t = f;
                                        f = null,
                                            e.leave(t)
                                    }
                                }
                            })
                        }
                    }
                }]
        }
        var r = t.isArray,
            a = t.forEach,
            o = t.isString,
            s = t.element;
        t.module("ngMessages", []).directive("ngMessages", ["$animate",
            function(e) {
                function t(e, t) {
                    return o(t) && 0 === t.length || n(e.$eval(t))
                }
                function n(e) {
                    return o(e) ? e.length: !!e
                }
                var i = "ng-active",
                    r = "ng-inactive";
                return {
                    require: "ngMessages",
                    restrict: "AE",
                    controller: ["$element", "$scope", "$attrs",
                        function(o, s, c) {
                            function l(e, t) {
                                for (var n = t,
                                         i = []; n && n !== e;) {
                                    var r = n.$$ngMessageNode;
                                    if (r && r.length) return m[r];
                                    n.childNodes.length && -1 == i.indexOf(n) ? (i.push(n), n = n.childNodes[n.childNodes.length - 1]) : n = n.previousSibling || n.parentNode
                                }
                            }
                            function d(e, t, n) {
                                var i = m[n];
                                if (h.head) {
                                    var r = l(e, t);
                                    r ? (i.next = r.next, r.next = i) : (i.next = h.head, h.head = i)
                                } else h.head = i
                            }
                            function p(e, t, n) {
                                var i = m[n],
                                    r = l(e, t);
                                r ? r.next = i.next: h.head = i.next
                            }
                            var u, f, h = this,
                                g = 0,
                                m = this.messages = {};
                            this.render = function(l) {
                                l = l || {},
                                    u = !1,
                                    f = l;
                                for (var d = t(s, c.ngMessagesMultiple) || t(s, c.multiple), p = [], g = {},
                                         m = h.head, y = !1, v = 0; null != m;) {
                                    v++;
                                    var C = m.message,
                                        S = !1;
                                    y || a(l,
                                        function(e, t) {
                                            if (!S && n(e) && C.test(t)) {
                                                if (g[t]) return;
                                                g[t] = !0,
                                                    S = !0,
                                                    C.attach()
                                            }
                                        }),
                                        S ? y = !d: p.push(C),
                                        m = m.next
                                }
                                a(p,
                                    function(e) {
                                        e.detach()
                                    }),
                                    p.length !== v ? e.setClass(o, i, r) : e.setClass(o, r, i)
                            },
                                s.$watchCollection(c.ngMessages || c["for"], h.render),
                                this.reRender = function() {
                                    u || (u = !0, s.$evalAsync(function() {
                                        u && f && h.render(f)
                                    }))
                                },
                                this.register = function(e, t) {
                                    var n = g.toString();
                                    m[n] = {
                                        message: t
                                    },
                                        d(o[0], e, n),
                                        e.$$ngMessageNode = n,
                                        g++,
                                        h.reRender()
                                },
                                this.deregister = function(e) {
                                    var t = e.$$ngMessageNode;
                                    delete e.$$ngMessageNode,
                                        p(o[0], e, t),
                                        delete m[t],
                                        h.reRender()
                                }
                        }]
                }
            }]).directive("ngMessagesInclude", ["$templateRequest", "$document", "$compile",
            function(e, t, n) {
                return {
                    restrict: "AE",
                    require: "^^ngMessages",
                    link: function(i, r, a) {
                        var o = a.ngMessagesInclude || a.src;
                        e(o).then(function(e) {
                            n(e)(i,
                                function(e) {
                                    r.after(e);
                                    var n = s(t[0].createComment(" ngMessagesInclude: " + o + " "));
                                    r.after(n),
                                        r.remove()
                                })
                        })
                    }
                }
            }]).directive("ngMessage", i("AE")).directive("ngMessageExp", i("A"))
    } (window, window.angular),
    function(e, t) {
        "function" == typeof define && define.amd ? define([], t) : e.forge = t()
    } (this,
        function() {
            var e, t, n;
            return function(i) {
                function r(e, t) {
                    return S.call(e, t)
                }
                function a(e, t) {
                    var n, i, r, a, o, s, c, l, d, p, u, f = t && t.split("/"),
                        h = v.map,
                        g = h && h["*"] || {};
                    if (e && "." === e.charAt(0)) if (t) {
                        for (f = f.slice(0, f.length - 1), e = e.split("/"), o = e.length - 1, v.nodeIdCompat && b.test(e[o]) && (e[o] = e[o].replace(b, "")), e = f.concat(e), d = 0; d < e.length; d += 1) if (u = e[d], "." === u) e.splice(d, 1),
                            d -= 1;
                        else if (".." === u) {
                            if (1 === d && (".." === e[2] || ".." === e[0])) break;
                            d > 0 && (e.splice(d - 1, 2), d -= 2)
                        }
                        e = e.join("/")
                    } else 0 === e.indexOf("./") && (e = e.substring(2));
                    if ((f || g) && h) {
                        for (n = e.split("/"), d = n.length; d > 0; d -= 1) {
                            if (i = n.slice(0, d).join("/"), f) for (p = f.length; p > 0; p -= 1) if (r = h[f.slice(0, p).join("/")], r && (r = r[i])) {
                                a = r,
                                    s = d;
                                break
                            }
                            if (a) break; ! c && g && g[i] && (c = g[i], l = d)
                        } ! a && c && (a = c, s = l),
                        a && (n.splice(0, s, a), e = n.join("/"))
                    }
                    return e
                }
                function o(e, t) {
                    return function() {
                        return f.apply(i, _.call(arguments, 0).concat([e, t]))
                    }
                }
                function s(e) {
                    return function(t) {
                        return a(t, e)
                    }
                }
                function c(e) {
                    return function(t) {
                        m[e] = t
                    }
                }
                function l(e) {
                    if (r(y, e)) {
                        var t = y[e];
                        delete y[e],
                            C[e] = !0,
                            u.apply(i, t)
                    }
                    if (!r(m, e) && !r(C, e)) throw new Error("No " + e);
                    return m[e]
                }
                function d(e) {
                    var t, n = e ? e.indexOf("!") : -1;
                    return n > -1 && (t = e.substring(0, n), e = e.substring(n + 1, e.length)),
                        [t, e]
                }
                function p(e) {
                    return function() {
                        return v && v.config && v.config[e] || {}
                    }
                }
                var u, f, h, g, m = {},
                    y = {},
                    v = {},
                    C = {},
                    S = Object.prototype.hasOwnProperty,
                    _ = [].slice,
                    b = /\.js$/;
                h = function(e, t) {
                    var n, i = d(e),
                        r = i[0];
                    return e = i[1],
                    r && (r = a(r, t), n = l(r)),
                        r ? e = n && n.normalize ? n.normalize(e, s(t)) : a(e, t) : (e = a(e, t), i = d(e), r = i[0], e = i[1], r && (n = l(r))),
                        {
                            f: r ? r + "!" + e: e,
                            n: e,
                            pr: r,
                            p: n
                        }
                },
                    g = {
                        require: function(e) {
                            return o(e)
                        },
                        exports: function(e) {
                            var t = m[e];
                            return "undefined" != typeof t ? t: m[e] = {}
                        },
                        module: function(e) {
                            return {
                                id: e,
                                uri: "",
                                exports: m[e],
                                config: p(e)
                            }
                        }
                    },
                    u = function(e, t, n, a) {
                        var s, d, p, u, f, v, S = [],
                            _ = typeof n;
                        if (a = a || e, "undefined" === _ || "function" === _) {
                            for (t = !t.length && n.length ? ["require", "exports", "module"] : t, f = 0; f < t.length; f += 1) if (u = h(t[f], a), d = u.f, "require" === d) S[f] = g.require(e);
                            else if ("exports" === d) S[f] = g.exports(e),
                                v = !0;
                            else if ("module" === d) s = S[f] = g.module(e);
                            else if (r(m, d) || r(y, d) || r(C, d)) S[f] = l(d);
                            else {
                                if (!u.p) throw new Error(e + " missing " + d);
                                u.p.load(u.n, o(a, !0), c(d), {}),
                                    S[f] = m[d]
                            }
                            p = n ? n.apply(m[e], S) : void 0,
                            e && (s && s.exports !== i && s.exports !== m[e] ? m[e] = s.exports: p === i && v || (m[e] = p))
                        } else e && (m[e] = n)
                    },
                    e = t = f = function(e, t, n, r, a) {
                        if ("string" == typeof e) return g[e] ? g[e](t) : l(h(e, t).f);
                        if (!e.splice) {
                            if (v = e, v.deps && f(v.deps, v.callback), !t) return;
                            t.splice ? (e = t, t = n, n = null) : e = i
                        }
                        return t = t ||
                            function() {},
                        "function" == typeof n && (n = r, r = a),
                            r ? u(i, e, t, n) : setTimeout(function() {
                                    u(i, e, t, n)
                                },
                                4),
                            f
                    },
                    f.config = function(e) {
                        return f(e)
                    },
                    e._defined = m,
                    n = function(e, t, n) {
                        t.splice || (n = t, t = []),
                        !r(m, e) && !r(y, e) && (y[e] = [e, t, n])
                    },
                    n.amd = {
                        jQuery: !0
                    }
            } (),
                n("node_modules/almond/almond",
                    function() {}),
                function() {
                    function e(e) {
                        function t(e) {
                            if (this.data = "", this.read = 0, "string" == typeof e) this.data = e;
                            else if (i.isArrayBuffer(e) || i.isArrayBufferView(e)) {
                                var n = new Uint8Array(e);
                                try {
                                    this.data = String.fromCharCode.apply(null, n)
                                } catch(r) {
                                    for (var a = 0; a < n.length; ++a) this.putByte(n[a])
                                }
                            } else(e instanceof t || "object" == typeof e && "string" == typeof e.data && "number" == typeof e.read) && (this.data = e.data, this.read = e.read);
                            this._constructedStringLength = 0
                        }
                        function n(e, t) {
                            t = t || {},
                                this.read = t.readOffset || 0,
                                this.growSize = t.growSize || 1024;
                            var n = i.isArrayBuffer(e),
                                r = i.isArrayBufferView(e);
                            return n || r ? (this.data = n ? new DataView(e) : new DataView(e.buffer, e.byteOffset, e.byteLength), void(this.write = "writeOffset" in t ? t.writeOffset: this.data.byteLength)) : (this.data = new DataView(new ArrayBuffer(0)), this.write = 0, null !== e && void 0 !== e && this.putBytes(e), "writeOffset" in t && (this.write = t.writeOffset), void 0)
                        }
                        var i = e.util = e.util || {}; !
                            function() {
                                function e(e) {
                                    if (e.source === window && e.data === t) {
                                        e.stopPropagation();
                                        var i = n.slice();
                                        n.length = 0,
                                            i.forEach(function(e) {
                                                e()
                                            })
                                    }
                                }
                                if ("undefined" != typeof process && process.nextTick) return i.nextTick = process.nextTick,
                                    void(i.setImmediate = "function" == typeof setImmediate ? setImmediate: i.nextTick);
                                if ("function" == typeof setImmediate) return i.setImmediate = function() {
                                    return setImmediate.apply(void 0, arguments)
                                },
                                    void(i.nextTick = function(e) {
                                        return setImmediate(e)
                                    });
                                if (i.setImmediate = function(e) {
                                        setTimeout(e, 0)
                                    },
                                    "undefined" != typeof window && "function" == typeof window.postMessage) {
                                    var t = "forge.setImmediate",
                                        n = [];
                                    i.setImmediate = function(e) {
                                        n.push(e),
                                        1 === n.length && window.postMessage(t, "*")
                                    },
                                        window.addEventListener("message", e, !0)
                                }
                                if ("undefined" != typeof MutationObserver) {
                                    var r = Date.now(),
                                        a = !0,
                                        o = document.createElement("div"),
                                        n = [];
                                    new MutationObserver(function() {
                                        var e = n.slice();
                                        n.length = 0,
                                            e.forEach(function(e) {
                                                e()
                                            })
                                    }).observe(o, {
                                        attributes: !0
                                    });
                                    var s = i.setImmediate;
                                    i.setImmediate = function(e) {
                                        Date.now() - r > 15 ? (r = Date.now(), s(e)) : (n.push(e), 1 === n.length && o.setAttribute("a", a = !a))
                                    }
                                }
                                i.nextTick = i.setImmediate
                            } (),
                            i.isArray = Array.isArray ||
                                function(e) {
                                    return "[object Array]" === Object.prototype.toString.call(e)
                                },
                            i.isArrayBuffer = function(e) {
                                return "undefined" != typeof ArrayBuffer && e instanceof ArrayBuffer
                            },
                            i.isArrayBufferView = function(e) {
                                return e && i.isArrayBuffer(e.buffer) && void 0 !== e.byteLength
                            },
                            i.ByteBuffer = t,
                            i.ByteStringBuffer = t;
                        var r = 4096;
                        i.ByteStringBuffer.prototype._optimizeConstructedString = function(e) {
                            this._constructedStringLength += e,
                            this._constructedStringLength > r && (this.data.substr(0, 1), this._constructedStringLength = 0)
                        },
                            i.ByteStringBuffer.prototype.length = function() {
                                return this.data.length - this.read
                            },
                            i.ByteStringBuffer.prototype.isEmpty = function() {
                                return this.length() <= 0
                            },
                            i.ByteStringBuffer.prototype.putByte = function(e) {
                                return this.putBytes(String.fromCharCode(e))
                            },
                            i.ByteStringBuffer.prototype.fillWithByte = function(e, t) {
                                e = String.fromCharCode(e);
                                for (var n = this.data; t > 0;) 1 & t && (n += e),
                                    t >>>= 1,
                                t > 0 && (e += e);
                                return this.data = n,
                                    this._optimizeConstructedString(t),
                                    this
                            },
                            i.ByteStringBuffer.prototype.putBytes = function(e) {
                                return this.data += e,
                                    this._optimizeConstructedString(e.length),
                                    this
                            },
                            i.ByteStringBuffer.prototype.putString = function(e) {
                                return this.putBytes(i.encodeUtf8(e))
                            },
                            i.ByteStringBuffer.prototype.putInt16 = function(e) {
                                return this.putBytes(String.fromCharCode(e >> 8 & 255) + String.fromCharCode(255 & e))
                            },
                            i.ByteStringBuffer.prototype.putInt24 = function(e) {
                                return this.putBytes(String.fromCharCode(e >> 16 & 255) + String.fromCharCode(e >> 8 & 255) + String.fromCharCode(255 & e))
                            },
                            i.ByteStringBuffer.prototype.putInt32 = function(e) {
                                return this.putBytes(String.fromCharCode(e >> 24 & 255) + String.fromCharCode(e >> 16 & 255) + String.fromCharCode(e >> 8 & 255) + String.fromCharCode(255 & e))
                            },
                            i.ByteStringBuffer.prototype.putInt16Le = function(e) {
                                return this.putBytes(String.fromCharCode(255 & e) + String.fromCharCode(e >> 8 & 255))
                            },
                            i.ByteStringBuffer.prototype.putInt24Le = function(e) {
                                return this.putBytes(String.fromCharCode(255 & e) + String.fromCharCode(e >> 8 & 255) + String.fromCharCode(e >> 16 & 255))
                            },
                            i.ByteStringBuffer.prototype.putInt32Le = function(e) {
                                return this.putBytes(String.fromCharCode(255 & e) + String.fromCharCode(e >> 8 & 255) + String.fromCharCode(e >> 16 & 255) + String.fromCharCode(e >> 24 & 255))
                            },
                            i.ByteStringBuffer.prototype.putInt = function(e, t) {
                                var n = "";
                                do t -= 8,
                                    n += String.fromCharCode(e >> t & 255);
                                while (t > 0);
                                return this.putBytes(n)
                            },
                            i.ByteStringBuffer.prototype.putSignedInt = function(e, t) {
                                return 0 > e && (e += 2 << t - 1),
                                    this.putInt(e, t)
                            },
                            i.ByteStringBuffer.prototype.putBuffer = function(e) {
                                return this.putBytes(e.getBytes())
                            },
                            i.ByteStringBuffer.prototype.getByte = function() {
                                return this.data.charCodeAt(this.read++)
                            },
                            i.ByteStringBuffer.prototype.getInt16 = function() {
                                var e = this.data.charCodeAt(this.read) << 8 ^ this.data.charCodeAt(this.read + 1);
                                return this.read += 2,
                                    e
                            },
                            i.ByteStringBuffer.prototype.getInt24 = function() {
                                var e = this.data.charCodeAt(this.read) << 16 ^ this.data.charCodeAt(this.read + 1) << 8 ^ this.data.charCodeAt(this.read + 2);
                                return this.read += 3,
                                    e
                            },
                            i.ByteStringBuffer.prototype.getInt32 = function() {
                                var e = this.data.charCodeAt(this.read) << 24 ^ this.data.charCodeAt(this.read + 1) << 16 ^ this.data.charCodeAt(this.read + 2) << 8 ^ this.data.charCodeAt(this.read + 3);
                                return this.read += 4,
                                    e
                            },
                            i.ByteStringBuffer.prototype.getInt16Le = function() {
                                var e = this.data.charCodeAt(this.read) ^ this.data.charCodeAt(this.read + 1) << 8;
                                return this.read += 2,
                                    e
                            },
                            i.ByteStringBuffer.prototype.getInt24Le = function() {
                                var e = this.data.charCodeAt(this.read) ^ this.data.charCodeAt(this.read + 1) << 8 ^ this.data.charCodeAt(this.read + 2) << 16;
                                return this.read += 3,
                                    e
                            },
                            i.ByteStringBuffer.prototype.getInt32Le = function() {
                                var e = this.data.charCodeAt(this.read) ^ this.data.charCodeAt(this.read + 1) << 8 ^ this.data.charCodeAt(this.read + 2) << 16 ^ this.data.charCodeAt(this.read + 3) << 24;
                                return this.read += 4,
                                    e
                            },
                            i.ByteStringBuffer.prototype.getInt = function(e) {
                                var t = 0;
                                do t = (t << 8) + this.data.charCodeAt(this.read++),
                                    e -= 8;
                                while (e > 0);
                                return t
                            },
                            i.ByteStringBuffer.prototype.getSignedInt = function(e) {
                                var t = this.getInt(e),
                                    n = 2 << e - 2;
                                return t >= n && (t -= n << 1),
                                    t
                            },
                            i.ByteStringBuffer.prototype.getBytes = function(e) {
                                var t;
                                return e ? (e = Math.min(this.length(), e), t = this.data.slice(this.read, this.read + e), this.read += e) : 0 === e ? t = "": (t = 0 === this.read ? this.data: this.data.slice(this.read), this.clear()),
                                    t
                            },
                            i.ByteStringBuffer.prototype.bytes = function(e) {
                                return "undefined" == typeof e ? this.data.slice(this.read) : this.data.slice(this.read, this.read + e)
                            },
                            i.ByteStringBuffer.prototype.at = function(e) {
                                return this.data.charCodeAt(this.read + e)
                            },
                            i.ByteStringBuffer.prototype.setAt = function(e, t) {
                                return this.data = this.data.substr(0, this.read + e) + String.fromCharCode(t) + this.data.substr(this.read + e + 1),
                                    this
                            },
                            i.ByteStringBuffer.prototype.last = function() {
                                return this.data.charCodeAt(this.data.length - 1)
                            },
                            i.ByteStringBuffer.prototype.copy = function() {
                                var e = i.createBuffer(this.data);
                                return e.read = this.read,
                                    e
                            },
                            i.ByteStringBuffer.prototype.compact = function() {
                                return this.read > 0 && (this.data = this.data.slice(this.read), this.read = 0),
                                    this
                            },
                            i.ByteStringBuffer.prototype.clear = function() {
                                return this.data = "",
                                    this.read = 0,
                                    this
                            },
                            i.ByteStringBuffer.prototype.truncate = function(e) {
                                var t = Math.max(0, this.length() - e);
                                return this.data = this.data.substr(this.read, t),
                                    this.read = 0,
                                    this
                            },
                            i.ByteStringBuffer.prototype.toHex = function() {
                                for (var e = "",
                                         t = this.read; t < this.data.length; ++t) {
                                    var n = this.data.charCodeAt(t);
                                    16 > n && (e += "0"),
                                        e += n.toString(16)
                                }
                                return e
                            },
                            i.ByteStringBuffer.prototype.toString = function() {
                                return i.decodeUtf8(this.bytes())
                            },
                            i.DataBuffer = n,
                            i.DataBuffer.prototype.length = function() {
                                return this.write - this.read
                            },
                            i.DataBuffer.prototype.isEmpty = function() {
                                return this.length() <= 0
                            },
                            i.DataBuffer.prototype.accommodate = function(e, t) {
                                if (this.length() >= e) return this;
                                t = Math.max(t || this.growSize, e);
                                var n = new Uint8Array(this.data.buffer, this.data.byteOffset, this.data.byteLength),
                                    i = new Uint8Array(this.length() + t);
                                return i.set(n),
                                    this.data = new DataView(i.buffer),
                                    this
                            },
                            i.DataBuffer.prototype.putByte = function(e) {
                                return this.accommodate(1),
                                    this.data.setUint8(this.write++, e),
                                    this
                            },
                            i.DataBuffer.prototype.fillWithByte = function(e, t) {
                                this.accommodate(t);
                                for (var n = 0; t > n; ++n) this.data.setUint8(e);
                                return this
                            },
                            i.DataBuffer.prototype.putBytes = function(e, t) {
                                if (i.isArrayBufferView(e)) {
                                    var n = new Uint8Array(e.buffer, e.byteOffset, e.byteLength),
                                        r = n.byteLength - n.byteOffset;
                                    this.accommodate(r);
                                    var a = new Uint8Array(this.data.buffer, this.write);
                                    return a.set(n),
                                        this.write += r,
                                        this
                                }
                                if (i.isArrayBuffer(e)) {
                                    var n = new Uint8Array(e);
                                    this.accommodate(n.byteLength);
                                    var a = new Uint8Array(this.data.buffer);
                                    return a.set(n, this.write),
                                        this.write += n.byteLength,
                                        this
                                }
                                if (e instanceof i.DataBuffer || "object" == typeof e && "number" == typeof e.read && "number" == typeof e.write && i.isArrayBufferView(e.data)) {
                                    var n = new Uint8Array(e.data.byteLength, e.read, e.length());
                                    this.accommodate(n.byteLength);
                                    var a = new Uint8Array(e.data.byteLength, this.write);
                                    return a.set(n),
                                        this.write += n.byteLength,
                                        this
                                }
                                if (e instanceof i.ByteStringBuffer && (e = e.data, t = "binary"), t = t || "binary", "string" == typeof e) {
                                    var o;
                                    if ("hex" === t) return this.accommodate(Math.ceil(e.length / 2)),
                                        o = new Uint8Array(this.data.buffer, this.write),
                                        this.write += i.binary.hex.decode(e, o, this.write),
                                        this;
                                    if ("base64" === t) return this.accommodate(3 * Math.ceil(e.length / 4)),
                                        o = new Uint8Array(this.data.buffer, this.write),
                                        this.write += i.binary.base64.decode(e, o, this.write),
                                        this;
                                    if ("utf8" === t && (e = i.encodeUtf8(e), t = "binary"), "binary" === t || "raw" === t) return this.accommodate(e.length),
                                        o = new Uint8Array(this.data.buffer, this.write),
                                        this.write += i.binary.raw.decode(o),
                                        this;
                                    if ("utf16" === t) return this.accommodate(2 * e.length),
                                        o = new Uint16Array(this.data.buffer, this.write),
                                        this.write += i.text.utf16.encode(o),
                                        this;
                                    throw new Error("Invalid encoding: " + t)
                                }
                                throw Error("Invalid parameter: " + e)
                            },
                            i.DataBuffer.prototype.putBuffer = function(e) {
                                return this.putBytes(e),
                                    e.clear(),
                                    this
                            },
                            i.DataBuffer.prototype.putString = function(e) {
                                return this.putBytes(e, "utf16")
                            },
                            i.DataBuffer.prototype.putInt16 = function(e) {
                                return this.accommodate(2),
                                    this.data.setInt16(this.write, e),
                                    this.write += 2,
                                    this
                            },
                            i.DataBuffer.prototype.putInt24 = function(e) {
                                return this.accommodate(3),
                                    this.data.setInt16(this.write, e >> 8 & 65535),
                                    this.data.setInt8(this.write, e >> 16 & 255),
                                    this.write += 3,
                                    this
                            },
                            i.DataBuffer.prototype.putInt32 = function(e) {
                                return this.accommodate(4),
                                    this.data.setInt32(this.write, e),
                                    this.write += 4,
                                    this
                            },
                            i.DataBuffer.prototype.putInt16Le = function(e) {
                                return this.accommodate(2),
                                    this.data.setInt16(this.write, e, !0),
                                    this.write += 2,
                                    this
                            },
                            i.DataBuffer.prototype.putInt24Le = function(e) {
                                return this.accommodate(3),
                                    this.data.setInt8(this.write, e >> 16 & 255),
                                    this.data.setInt16(this.write, e >> 8 & 65535, !0),
                                    this.write += 3,
                                    this
                            },
                            i.DataBuffer.prototype.putInt32Le = function(e) {
                                return this.accommodate(4),
                                    this.data.setInt32(this.write, e, !0),
                                    this.write += 4,
                                    this
                            },
                            i.DataBuffer.prototype.putInt = function(e, t) {
                                this.accommodate(t / 8);
                                do t -= 8,
                                    this.data.setInt8(this.write++, e >> t & 255);
                                while (t > 0);
                                return this
                            },
                            i.DataBuffer.prototype.putSignedInt = function(e, t) {
                                return this.accommodate(t / 8),
                                0 > e && (e += 2 << t - 1),
                                    this.putInt(e, t)
                            },
                            i.DataBuffer.prototype.getByte = function() {
                                return this.data.getInt8(this.read++)
                            },
                            i.DataBuffer.prototype.getInt16 = function() {
                                var e = this.data.getInt16(this.read);
                                return this.read += 2,
                                    e
                            },
                            i.DataBuffer.prototype.getInt24 = function() {
                                var e = this.data.getInt16(this.read) << 8 ^ this.data.getInt8(this.read + 2);
                                return this.read += 3,
                                    e
                            },
                            i.DataBuffer.prototype.getInt32 = function() {
                                var e = this.data.getInt32(this.read);
                                return this.read += 4,
                                    e
                            },
                            i.DataBuffer.prototype.getInt16Le = function() {
                                var e = this.data.getInt16(this.read, !0);
                                return this.read += 2,
                                    e
                            },
                            i.DataBuffer.prototype.getInt24Le = function() {
                                var e = this.data.getInt8(this.read) ^ this.data.getInt16(this.read + 1, !0) << 8;
                                return this.read += 3,
                                    e
                            },
                            i.DataBuffer.prototype.getInt32Le = function() {
                                var e = this.data.getInt32(this.read, !0);
                                return this.read += 4,
                                    e
                            },
                            i.DataBuffer.prototype.getInt = function(e) {
                                var t = 0;
                                do t = (t << 8) + this.data.getInt8(this.read++),
                                    e -= 8;
                                while (e > 0);
                                return t
                            },
                            i.DataBuffer.prototype.getSignedInt = function(e) {
                                var t = this.getInt(e),
                                    n = 2 << e - 2;
                                return t >= n && (t -= n << 1),
                                    t
                            },
                            i.DataBuffer.prototype.getBytes = function(e) {
                                var t;
                                return e ? (e = Math.min(this.length(), e), t = this.data.slice(this.read, this.read + e), this.read += e) : 0 === e ? t = "": (t = 0 === this.read ? this.data: this.data.slice(this.read), this.clear()),
                                    t
                            },
                            i.DataBuffer.prototype.bytes = function(e) {
                                return "undefined" == typeof e ? this.data.slice(this.read) : this.data.slice(this.read, this.read + e)
                            },
                            i.DataBuffer.prototype.at = function(e) {
                                return this.data.getUint8(this.read + e)
                            },
                            i.DataBuffer.prototype.setAt = function(e, t) {
                                return this.data.setUint8(e, t),
                                    this
                            },
                            i.DataBuffer.prototype.last = function() {
                                return this.data.getUint8(this.write - 1)
                            },
                            i.DataBuffer.prototype.copy = function() {
                                return new i.DataBuffer(this)
                            },
                            i.DataBuffer.prototype.compact = function() {
                                if (this.read > 0) {
                                    var e = new Uint8Array(this.data.buffer, this.read),
                                        t = new Uint8Array(e.byteLength);
                                    t.set(e),
                                        this.data = new DataView(t),
                                        this.write -= this.read,
                                        this.read = 0
                                }
                                return this
                            },
                            i.DataBuffer.prototype.clear = function() {
                                return this.data = new DataView(new ArrayBuffer(0)),
                                    this.read = this.write = 0,
                                    this
                            },
                            i.DataBuffer.prototype.truncate = function(e) {
                                return this.write = Math.max(0, this.length() - e),
                                    this.read = Math.min(this.read, this.write),
                                    this
                            },
                            i.DataBuffer.prototype.toHex = function() {
                                for (var e = "",
                                         t = this.read; t < this.data.byteLength; ++t) {
                                    var n = this.data.getUint8(t);
                                    16 > n && (e += "0"),
                                        e += n.toString(16)
                                }
                                return e
                            },
                            i.DataBuffer.prototype.toString = function(e) {
                                var t = new Uint8Array(this.data, this.read, this.length());
                                if (e = e || "utf8", "binary" === e || "raw" === e) return i.binary.raw.encode(t);
                                if ("hex" === e) return i.binary.hex.encode(t);
                                if ("base64" === e) return i.binary.base64.encode(t);
                                if ("utf8" === e) return i.text.utf8.decode(t);
                                if ("utf16" === e) return i.text.utf16.decode(t);
                                throw new Error("Invalid encoding: " + e)
                            },
                            i.createBuffer = function(e, t) {
                                return t = t || "raw",
                                void 0 !== e && "utf8" === t && (e = i.encodeUtf8(e)),
                                    new i.ByteBuffer(e)
                            },
                            i.fillString = function(e, t) {
                                for (var n = ""; t > 0;) 1 & t && (n += e),
                                    t >>>= 1,
                                t > 0 && (e += e);
                                return n
                            },
                            i.xorBytes = function(e, t, n) {
                                for (var i = "",
                                         r = "",
                                         a = "",
                                         o = 0,
                                         s = 0; n > 0; --n, ++o) r = e.charCodeAt(o) ^ t.charCodeAt(o),
                                s >= 10 && (i += a, a = "", s = 0),
                                    a += String.fromCharCode(r),
                                    ++s;
                                return i += a
                            },
                            i.hexToBytes = function(e) {
                                var t = "",
                                    n = 0;
                                for (e.length & !0 && (n = 1, t += String.fromCharCode(parseInt(e[0], 16))); n < e.length; n += 2) t += String.fromCharCode(parseInt(e.substr(n, 2), 16));
                                return t
                            },
                            i.bytesToHex = function(e) {
                                return i.createBuffer(e).toHex()
                            },
                            i.int32ToBytes = function(e) {
                                return String.fromCharCode(e >> 24 & 255) + String.fromCharCode(e >> 16 & 255) + String.fromCharCode(e >> 8 & 255) + String.fromCharCode(255 & e)
                            };
                        var a = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
                            o = [62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, 64, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51];
                        i.encode64 = function(e, t) {
                            for (var n, i, r, o = "",
                                     s = "",
                                     c = 0; c < e.length;) n = e.charCodeAt(c++),
                                i = e.charCodeAt(c++),
                                r = e.charCodeAt(c++),
                                o += a.charAt(n >> 2),
                                o += a.charAt((3 & n) << 4 | i >> 4),
                                isNaN(i) ? o += "==": (o += a.charAt((15 & i) << 2 | r >> 6), o += isNaN(r) ? "=": a.charAt(63 & r)),
                            t && o.length > t && (s += o.substr(0, t) + "\r\n", o = o.substr(t));
                            return s += o
                        },
                            i.decode64 = function(e) {
                                e = e.replace(/[^A-Za-z0-9\+\/\=]/g, "");
                                for (var t, n, i, r, a = "",
                                         s = 0; s < e.length;) t = o[e.charCodeAt(s++) - 43],
                                    n = o[e.charCodeAt(s++) - 43],
                                    i = o[e.charCodeAt(s++) - 43],
                                    r = o[e.charCodeAt(s++) - 43],
                                    a += String.fromCharCode(t << 2 | n >> 4),
                                64 !== i && (a += String.fromCharCode((15 & n) << 4 | i >> 2), 64 !== r && (a += String.fromCharCode((3 & i) << 6 | r)));
                                return a
                            },
                            i.encodeUtf8 = function(e) {
                                return unescape(encodeURIComponent(e))
                            },
                            i.decodeUtf8 = function(e) {
                                return decodeURIComponent(escape(e))
                            },
                            i.binary = {
                                raw: {},
                                hex: {},
                                base64: {}
                            },
                            i.binary.raw.encode = function(e) {
                                return String.fromCharCode.apply(null, e)
                            },
                            i.binary.raw.decode = function(e, t, n) {
                                var i = t;
                                i || (i = new Uint8Array(e.length)),
                                    n = n || 0;
                                for (var r = n,
                                         a = 0; a < e.length; ++a) i[r++] = e.charCodeAt(a);
                                return t ? r - n: i
                            },
                            i.binary.hex.encode = i.bytesToHex,
                            i.binary.hex.decode = function(e, t, n) {
                                var i = t;
                                i || (i = new Uint8Array(Math.ceil(e.length / 2))),
                                    n = n || 0;
                                var r = 0,
                                    a = n;
                                for (1 & e.length && (r = 1, i[a++] = parseInt(e[0], 16)); r < e.length; r += 2) i[a++] = parseInt(e.substr(r, 2), 16);
                                return t ? a - n: i
                            },
                            i.binary.base64.encode = function(e, t) {
                                for (var n, i, r, o = "",
                                         s = "",
                                         c = 0; c < e.byteLength;) n = e[c++],
                                    i = e[c++],
                                    r = e[c++],
                                    o += a.charAt(n >> 2),
                                    o += a.charAt((3 & n) << 4 | i >> 4),
                                    isNaN(i) ? o += "==": (o += a.charAt((15 & i) << 2 | r >> 6), o += isNaN(r) ? "=": a.charAt(63 & r)),
                                t && o.length > t && (s += o.substr(0, t) + "\r\n", o = o.substr(t));
                                return s += o
                            },
                            i.binary.base64.decode = function(e, t, n) {
                                var i = t;
                                i || (i = new Uint8Array(3 * Math.ceil(e.length / 4))),
                                    e = e.replace(/[^A-Za-z0-9\+\/\=]/g, ""),
                                    n = n || 0;
                                for (var r, a, s, c, l = 0,
                                         d = n; l < e.length;) r = o[e.charCodeAt(l++) - 43],
                                    a = o[e.charCodeAt(l++) - 43],
                                    s = o[e.charCodeAt(l++) - 43],
                                    c = o[e.charCodeAt(l++) - 43],
                                    i[d++] = r << 2 | a >> 4,
                                64 !== s && (i[d++] = (15 & a) << 4 | s >> 2, 64 !== c && (i[d++] = (3 & s) << 6 | c));
                                return t ? d - n: i.subarray(0, d)
                            },
                            i.text = {
                                utf8: {},
                                utf16: {}
                            },
                            i.text.utf8.encode = function(e, t, n) {
                                e = i.encodeUtf8(e);
                                var r = t;
                                r || (r = new Uint8Array(e.length)),
                                    n = n || 0;
                                for (var a = n,
                                         o = 0; o < e.length; ++o) r[a++] = e.charCodeAt(o);
                                return t ? a - n: r
                            },
                            i.text.utf8.decode = function(e) {
                                return i.decodeUtf8(String.fromCharCode.apply(null, e))
                            },
                            i.text.utf16.encode = function(e, t, n) {
                                var i = t;
                                i || (i = new Uint8Array(2 * e.length));
                                var r = new Uint16Array(i.buffer);
                                n = n || 0;
                                for (var a = n,
                                         o = n,
                                         s = 0; s < e.length; ++s) r[o++] = e.charCodeAt(s),
                                    a += 2;
                                return t ? a - n: i
                            },
                            i.text.utf16.decode = function(e) {
                                return String.fromCharCode.apply(null, new Uint16Array(e.buffer))
                            },
                            i.deflate = function(e, t, n) {
                                if (t = i.decode64(e.deflate(i.encode64(t)).rval), n) {
                                    var r = 2,
                                        a = t.charCodeAt(1);
                                    32 & a && (r = 6),
                                        t = t.substring(r, t.length - 4)
                                }
                                return t
                            },
                            i.inflate = function(e, t, n) {
                                var r = e.inflate(i.encode64(t)).rval;
                                return null === r ? null: i.decode64(r)
                            };
                        var s = function(e, t, n) {
                                if (!e) throw new Error("WebStorage not available.");
                                var r;
                                if (null === n ? r = e.removeItem(t) : (n = i.encode64(JSON.stringify(n)), r = e.setItem(t, n)), "undefined" != typeof r && r.rval !== !0) {
                                    var a = new Error(r.error.message);
                                    throw a.id = r.error.id,
                                        a.name = r.error.name,
                                        a
                                }
                            },
                            c = function(e, t) {
                                if (!e) throw new Error("WebStorage not available.");
                                var n = e.getItem(t);
                                if (e.init) if (null === n.rval) {
                                    if (n.error) {
                                        var r = new Error(n.error.message);
                                        throw r.id = n.error.id,
                                            r.name = n.error.name,
                                            r
                                    }
                                    n = null
                                } else n = n.rval;
                                return null !== n && (n = JSON.parse(i.decode64(n))),
                                    n
                            },
                            l = function(e, t, n, i) {
                                var r = c(e, t);
                                null === r && (r = {}),
                                    r[n] = i,
                                    s(e, t, r)
                            },
                            d = function(e, t, n) {
                                var i = c(e, t);
                                return null !== i && (i = n in i ? i[n] : null),
                                    i
                            },
                            p = function(e, t, n) {
                                var i = c(e, t);
                                if (null !== i && n in i) {
                                    delete i[n];
                                    var r = !0;
                                    for (var a in i) {
                                        r = !1;
                                        break
                                    }
                                    r && (i = null),
                                        s(e, t, i)
                                }
                            },
                            u = function(e, t) {
                                s(e, t, null)
                            },
                            f = function(e, t, n) {
                                var i = null;
                                "undefined" == typeof n && (n = ["web", "flash"]);
                                var r, a = !1,
                                    o = null;
                                for (var s in n) {
                                    r = n[s];
                                    try {
                                        if ("flash" === r || "both" === r) {
                                            if (null === t[0]) throw new Error("Flash local storage not available.");
                                            i = e.apply(this, t),
                                                a = "flash" === r
                                        } ("web" === r || "both" === r) && (t[0] = localStorage, i = e.apply(this, t), a = !0)
                                    } catch(c) {
                                        o = c
                                    }
                                    if (a) break
                                }
                                if (!a) throw o;
                                return i
                            };
                        i.setItem = function(e, t, n, i, r) {
                            f(l, arguments, r)
                        },
                            i.getItem = function(e, t, n, i) {
                                return f(d, arguments, i)
                            },
                            i.removeItem = function(e, t, n, i) {
                                f(p, arguments, i)
                            },
                            i.clearItems = function(e, t, n) {
                                f(u, arguments, n)
                            },
                            i.parseUrl = function(e) {
                                var t = /^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;
                                t.lastIndex = 0;
                                var n = t.exec(e),
                                    i = null === n ? null: {
                                        full: e,
                                        scheme: n[1],
                                        host: n[2],
                                        port: n[3],
                                        path: n[4]
                                    };
                                return i && (i.fullHost = i.host, i.port ? 80 !== i.port && "http" === i.scheme ? i.fullHost += ":" + i.port: 443 !== i.port && "https" === i.scheme && (i.fullHost += ":" + i.port) : "http" === i.scheme ? i.port = 80 : "https" === i.scheme && (i.port = 443), i.full = i.scheme + "://" + i.fullHost),
                                    i
                            };
                        var h = null;
                        i.getQueryVariables = function(e) {
                            var t, n = function(e) {
                                for (var t = {},
                                         n = e.split("&"), i = 0; i < n.length; i++) {
                                    var r, a, o = n[i].indexOf("=");
                                    o > 0 ? (r = n[i].substring(0, o), a = n[i].substring(o + 1)) : (r = n[i], a = null),
                                    r in t || (t[r] = []),
                                    !(r in Object.prototype) && null !== a && t[r].push(unescape(a))
                                }
                                return t
                            };
                            return "undefined" == typeof e ? (null === h && (h = "undefined" != typeof window && window.location && window.location.search ? n(window.location.search.substring(1)) : {}), t = h) : t = n(e),
                                t
                        },
                            i.parseFragment = function(e) {
                                var t = e,
                                    n = "",
                                    r = e.indexOf("?");
                                r > 0 && (t = e.substring(0, r), n = e.substring(r + 1));
                                var a = t.split("/");
                                a.length > 0 && "" === a[0] && a.shift();
                                var o = "" === n ? {}: i.getQueryVariables(n);
                                return {
                                    pathString: t,
                                    queryString: n,
                                    path: a,
                                    query: o
                                }
                            },
                            i.makeRequest = function(e) {
                                var t = i.parseFragment(e),
                                    n = {
                                        path: t.pathString,
                                        query: t.queryString,
                                        getPath: function(e) {
                                            return "undefined" == typeof e ? t.path: t.path[e]
                                        },
                                        getQuery: function(e, n) {
                                            var i;
                                            return "undefined" == typeof e ? i = t.query: (i = t.query[e], i && "undefined" != typeof n && (i = i[n])),
                                                i
                                        },
                                        getQueryLast: function(e, t) {
                                            var i, r = n.getQuery(e);
                                            return i = r ? r[r.length - 1] : t
                                        }
                                    };
                                return n
                            },
                            i.makeLink = function(e, t, n) {
                                e = jQuery.isArray(e) ? e.join("/") : e;
                                var i = jQuery.param(t || {});
                                return n = n || "",
                                e + (i.length > 0 ? "?" + i: "") + (n.length > 0 ? "#" + n: "")
                            },
                            i.setPath = function(e, t, n) {
                                if ("object" == typeof e && null !== e) for (var i = 0,
                                                                                 r = t.length; r > i;) {
                                    var a = t[i++];
                                    if (i == r) e[a] = n;
                                    else {
                                        var o = a in e; (!o || o && "object" != typeof e[a] || o && null === e[a]) && (e[a] = {}),
                                            e = e[a]
                                    }
                                }
                            },
                            i.getPath = function(e, t, n) {
                                for (var i = 0,
                                         r = t.length,
                                         a = !0; a && r > i && "object" == typeof e && null !== e;) {
                                    var o = t[i++];
                                    a = o in e,
                                    a && (e = e[o])
                                }
                                return a ? e: n
                            },
                            i.deletePath = function(e, t) {
                                if ("object" == typeof e && null !== e) for (var n = 0,
                                                                                 i = t.length; i > n;) {
                                    var r = t[n++];
                                    if (n == i) delete e[r];
                                    else {
                                        if (! (r in e && "object" == typeof e[r] && null !== e[r])) break;
                                        e = e[r]
                                    }
                                }
                            },
                            i.isEmpty = function(e) {
                                for (var t in e) if (e.hasOwnProperty(t)) return ! 1;
                                return ! 0
                            },
                            i.format = function(e) {
                                for (var t, n, i = /%./g,
                                         r = 0,
                                         a = [], o = 0; t = i.exec(e);) {
                                    n = e.substring(o, i.lastIndex - 2),
                                    n.length > 0 && a.push(n),
                                        o = i.lastIndex;
                                    var s = t[0][1];
                                    switch (s) {
                                        case "s":
                                        case "o":
                                            a.push(r < arguments.length ? arguments[r+++1] : "<?>");
                                            break;
                                        case "%":
                                            a.push("%");
                                            break;
                                        default:
                                            a.push("<%" + s + "?>")
                                    }
                                }
                                return a.push(e.substring(o)),
                                    a.join("")
                            },
                            i.formatNumber = function(e, t, n, i) {
                                var r = e,
                                    a = isNaN(t = Math.abs(t)) ? 2 : t,
                                    o = void 0 === n ? ",": n,
                                    s = void 0 === i ? ".": i,
                                    c = 0 > r ? "-": "",
                                    l = parseInt(r = Math.abs( + r || 0).toFixed(a), 10) + "",
                                    d = l.length > 3 ? l.length % 3 : 0;
                                return c + (d ? l.substr(0, d) + s: "") + l.substr(d).replace(/(\d{3})(?=\d)/g, "$1" + s) + (a ? o + Math.abs(r - l).toFixed(a).slice(2) : "")
                            },
                            i.formatSize = function(e) {
                                return e = e >= 1073741824 ? i.formatNumber(e / 1073741824, 2, ".", "") + " GiB": e >= 1048576 ? i.formatNumber(e / 1048576, 2, ".", "") + " MiB": e >= 1024 ? i.formatNumber(e / 1024, 0) + " KiB": i.formatNumber(e, 0) + " bytes"
                            },
                            i.bytesFromIP = function(e) {
                                return - 1 !== e.indexOf(".") ? i.bytesFromIPv4(e) : -1 !== e.indexOf(":") ? i.bytesFromIPv6(e) : null
                            },
                            i.bytesFromIPv4 = function(e) {
                                if (e = e.split("."), 4 !== e.length) return null;
                                for (var t = i.createBuffer(), n = 0; n < e.length; ++n) {
                                    var r = parseInt(e[n], 10);
                                    if (isNaN(r)) return null;
                                    t.putByte(r)
                                }
                                return t.getBytes()
                            },
                            i.bytesFromIPv6 = function(e) {
                                var t = 0;
                                e = e.split(":").filter(function(e) {
                                    return 0 === e.length && ++t,
                                        !0
                                });
                                for (var n = 2 * (8 - e.length + t), r = i.createBuffer(), a = 0; 8 > a; ++a) if (e[a] && 0 !== e[a].length) {
                                    var o = i.hexToBytes(e[a]);
                                    o.length < 2 && r.putByte(0),
                                        r.putBytes(o)
                                } else r.fillWithByte(0, n),
                                    n = 0;
                                return r.getBytes()
                            },
                            i.bytesToIP = function(e) {
                                return 4 === e.length ? i.bytesToIPv4(e) : 16 === e.length ? i.bytesToIPv6(e) : null
                            },
                            i.bytesToIPv4 = function(e) {
                                if (4 !== e.length) return null;
                                for (var t = [], n = 0; n < e.length; ++n) t.push(e.charCodeAt(n));
                                return t.join(".")
                            },
                            i.bytesToIPv6 = function(e) {
                                if (16 !== e.length) return null;
                                for (var t = [], n = [], r = 0, a = 0; a < e.length; a += 2) {
                                    for (var o = i.bytesToHex(e[a] + e[a + 1]);
                                         "0" === o[0] && "0" !== o;) o = o.substr(1);
                                    if ("0" === o) {
                                        var s = n[n.length - 1],
                                            c = t.length;
                                        s && c === s.end + 1 ? (s.end = c, s.end - s.start > n[r].end - n[r].start && (r = n.length - 1)) : n.push({
                                            start: c,
                                            end: c
                                        })
                                    }
                                    t.push(o)
                                }
                                if (n.length > 0) {
                                    var l = n[r];
                                    l.end - l.start > 0 && (t.splice(l.start, l.end - l.start + 1, ""), 0 === l.start && t.unshift(""), 7 === l.end && t.push(""))
                                }
                                return t.join(":")
                            },
                            i.estimateCores = function(e, t) {
                                function n(e, s, c) {
                                    if (0 === s) {
                                        var l = Math.floor(e.reduce(function(e, t) {
                                                return e + t
                                            },
                                            0) / e.length);
                                        return i.cores = Math.max(1, l),
                                            URL.revokeObjectURL(o),
                                            t(null, i.cores)
                                    }
                                    r(c,
                                        function(t, i) {
                                            e.push(a(c, i)),
                                                n(e, s - 1, c)
                                        })
                                }
                                function r(e, t) {
                                    for (var n = [], i = [], r = 0; e > r; ++r) {
                                        var a = new Worker(o);
                                        a.addEventListener("message",
                                            function(r) {
                                                if (i.push(r.data), i.length === e) {
                                                    for (var a = 0; e > a; ++a) n[a].terminate();
                                                    t(null, i)
                                                }
                                            }),
                                            n.push(a)
                                    }
                                    for (var r = 0; e > r; ++r) n[r].postMessage(r)
                                }
                                function a(e, t) {
                                    for (var n = [], i = 0; e > i; ++i) for (var r = t[i], a = n[i] = [], o = 0; e > o; ++o) if (i !== o) {
                                        var s = t[o]; (r.st > s.st && r.st < s.et || s.st > r.st && s.st < r.et) && a.push(o)
                                    }
                                    return n.reduce(function(e, t) {
                                            return Math.max(e, t.length)
                                        },
                                        0)
                                }
                                if ("function" == typeof e && (t = e, e = {}), e = e || {},
                                    "cores" in i && !e.update) return t(null, i.cores);
                                if ("undefined" != typeof navigator && "hardwareConcurrency" in navigator && navigator.hardwareConcurrency > 0) return i.cores = navigator.hardwareConcurrency,
                                    t(null, i.cores);
                                if ("undefined" == typeof Worker) return i.cores = 1,
                                    t(null, i.cores);
                                if ("undefined" == typeof Blob) return i.cores = 2,
                                    t(null, i.cores);
                                var o = URL.createObjectURL(new Blob(["(",
                                    function() {
                                        self.addEventListener("message",
                                            function(e) {
                                                for (var t = Date.now(), n = t + 4; Date.now() < n;);
                                                self.postMessage({
                                                    st: t,
                                                    et: n
                                                })
                                            })
                                    }.toString(), ")()"], {
                                    type: "application/javascript"
                                }));
                                n([], 5, 16)
                            }
                    }
                    var i = "util";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/util", ["require", "module"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        e.cipher = e.cipher || {},
                            e.cipher.algorithms = e.cipher.algorithms || {},
                            e.cipher.createCipher = function(t, n) {
                                var i = t;
                                if ("string" == typeof i && (i = e.cipher.getAlgorithm(i), i && (i = i())), !i) throw new Error("Unsupported algorithm: " + t);

                                return new e.cipher.BlockCipher({
                                    algorithm: i,
                                    key: n,
                                    decrypt: !1
                                })
                            },
                            e.cipher.createDecipher = function(t, n) {
                                var i = t;
                                if ("string" == typeof i && (i = e.cipher.getAlgorithm(i), i && (i = i())), !i) throw new Error("Unsupported algorithm: " + t);
                                return new e.cipher.BlockCipher({
                                    algorithm: i,
                                    key: n,
                                    decrypt: !0
                                })
                            },
                            e.cipher.registerAlgorithm = function(t, n) {
                                t = t.toUpperCase(),
                                    e.cipher.algorithms[t] = n
                            },
                            e.cipher.getAlgorithm = function(t) {
                                return t = t.toUpperCase(),
                                    t in e.cipher.algorithms ? e.cipher.algorithms[t] : null
                            };
                        var t = e.cipher.BlockCipher = function(e) {
                            this.algorithm = e.algorithm,
                                this.mode = this.algorithm.mode,
                                this.blockSize = this.mode.blockSize,
                                this._finish = !1,
                                this._input = null,
                                this.output = null,
                                this._op = e.decrypt ? this.mode.decrypt: this.mode.encrypt,
                                this._decrypt = e.decrypt,
                                this.algorithm.initialize(e)
                        };
                        t.prototype.start = function(t) {
                            t = t || {};
                            var n = {};
                            for (var i in t) n[i] = t[i];
                            n.decrypt = this._decrypt,
                                this._finish = !1,
                                this._input = e.util.createBuffer(),
                                this.output = t.output || e.util.createBuffer(),
                                this.mode.start(n)
                        },
                            t.prototype.update = function(e) {
                                for (e && this._input.putBuffer(e); ! this._op.call(this.mode, this._input, this.output, this._finish) && !this._finish;);
                                this._input.compact()
                            },
                            t.prototype.finish = function(e) {
                                e && ("ECB" === this.mode.name || "CBC" === this.mode.name) && (this.mode.pad = function(t) {
                                    return e(this.blockSize, t, !1)
                                },
                                    this.mode.unpad = function(t) {
                                        return e(this.blockSize, t, !0)
                                    });
                                var t = {};
                                return t.decrypt = this._decrypt,
                                    t.overflow = this._input.length() % this.blockSize,
                                    this._decrypt || !this.mode.pad || this.mode.pad(this._input, t) ? (this._finish = !0, this.update(), this._decrypt && this.mode.unpad && !this.mode.unpad(this.output, t) ? !1 : this.mode.afterFinish && !this.mode.afterFinish(this.output, t) ? !1 : !0) : !1
                            }
                    }
                    var i = "cipher";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/cipher", ["require", "module", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(t) {
                            if ("string" == typeof t && (t = e.util.createBuffer(t)), e.util.isArray(t) && t.length > 4) {
                                var n = t;
                                t = e.util.createBuffer();
                                for (var i = 0; i < n.length; ++i) t.putByte(n[i])
                            }
                            return e.util.isArray(t) || (t = [t.getInt32(), t.getInt32(), t.getInt32(), t.getInt32()]),
                                t
                        }
                        function n(e) {
                            e[e.length - 1] = e[e.length - 1] + 1 & 4294967295
                        }
                        function i(e) {
                            return [e / 4294967296 | 0, 4294967295 & e]
                        }
                        e.cipher = e.cipher || {};
                        var r = e.cipher.modes = e.cipher.modes || {};
                        r.ecb = function(e) {
                            e = e || {},
                                this.name = "ECB",
                                this.cipher = e.cipher,
                                this.blockSize = e.blockSize || 16,
                                this._ints = this.blockSize / 4,
                                this._inBlock = new Array(this._ints),
                                this._outBlock = new Array(this._ints)
                        },
                            r.ecb.prototype.start = function(e) {},
                            r.ecb.prototype.encrypt = function(e, t, n) {
                                if (e.length() < this.blockSize && !(n && e.length() > 0)) return ! 0;
                                for (var i = 0; i < this._ints; ++i) this._inBlock[i] = e.getInt32();
                                this.cipher.encrypt(this._inBlock, this._outBlock);
                                for (var i = 0; i < this._ints; ++i) t.putInt32(this._outBlock[i])
                            },
                            r.ecb.prototype.decrypt = function(e, t, n) {
                                if (e.length() < this.blockSize && !(n && e.length() > 0)) return ! 0;
                                for (var i = 0; i < this._ints; ++i) this._inBlock[i] = e.getInt32();
                                this.cipher.decrypt(this._inBlock, this._outBlock);
                                for (var i = 0; i < this._ints; ++i) t.putInt32(this._outBlock[i])
                            },
                            r.ecb.prototype.pad = function(e, t) {
                                var n = e.length() === this.blockSize ? this.blockSize: this.blockSize - e.length();
                                return e.fillWithByte(n, n),
                                    !0
                            },
                            r.ecb.prototype.unpad = function(e, t) {
                                if (t.overflow > 0) return ! 1;
                                var n = e.length(),
                                    i = e.at(n - 1);
                                return i > this.blockSize << 2 ? !1 : (e.truncate(i), !0)
                            },
                            r.cbc = function(e) {
                                e = e || {},
                                    this.name = "CBC",
                                    this.cipher = e.cipher,
                                    this.blockSize = e.blockSize || 16,
                                    this._ints = this.blockSize / 4,
                                    this._inBlock = new Array(this._ints),
                                    this._outBlock = new Array(this._ints)
                            },
                            r.cbc.prototype.start = function(e) {
                                if (null === e.iv) {
                                    if (!this._prev) throw new Error("Invalid IV parameter.");
                                    this._iv = this._prev.slice(0)
                                } else {
                                    if (! ("iv" in e)) throw new Error("Invalid IV parameter.");
                                    this._iv = t(e.iv),
                                        this._prev = this._iv.slice(0)
                                }
                            },
                            r.cbc.prototype.encrypt = function(e, t, n) {
                                if (e.length() < this.blockSize && !(n && e.length() > 0)) return ! 0;
                                for (var i = 0; i < this._ints; ++i) this._inBlock[i] = this._prev[i] ^ e.getInt32();
                                this.cipher.encrypt(this._inBlock, this._outBlock);
                                for (var i = 0; i < this._ints; ++i) t.putInt32(this._outBlock[i]);
                                this._prev = this._outBlock
                            },
                            r.cbc.prototype.decrypt = function(e, t, n) {
                                if (e.length() < this.blockSize && !(n && e.length() > 0)) return ! 0;
                                for (var i = 0; i < this._ints; ++i) this._inBlock[i] = e.getInt32();
                                this.cipher.decrypt(this._inBlock, this._outBlock);
                                for (var i = 0; i < this._ints; ++i) t.putInt32(this._prev[i] ^ this._outBlock[i]);
                                this._prev = this._inBlock.slice(0)
                            },
                            r.cbc.prototype.pad = function(e, t) {
                                var n = e.length() === this.blockSize ? this.blockSize: this.blockSize - e.length();
                                return e.fillWithByte(n, n),
                                    !0
                            },
                            r.cbc.prototype.unpad = function(e, t) {
                                if (t.overflow > 0) return ! 1;
                                var n = e.length(),
                                    i = e.at(n - 1);
                                return i > this.blockSize << 2 ? !1 : (e.truncate(i), !0)
                            },
                            r.cfb = function(t) {
                                t = t || {},
                                    this.name = "CFB",
                                    this.cipher = t.cipher,
                                    this.blockSize = t.blockSize || 16,
                                    this._ints = this.blockSize / 4,
                                    this._inBlock = null,
                                    this._outBlock = new Array(this._ints),
                                    this._partialBlock = new Array(this._ints),
                                    this._partialOutput = e.util.createBuffer(),
                                    this._partialBytes = 0
                            },
                            r.cfb.prototype.start = function(e) {
                                if (! ("iv" in e)) throw new Error("Invalid IV parameter.");
                                this._iv = t(e.iv),
                                    this._inBlock = this._iv.slice(0),
                                    this._partialBytes = 0
                            },
                            r.cfb.prototype.encrypt = function(e, t, n) {
                                var i = e.length();
                                if (0 === i) return ! 0;
                                this.cipher.encrypt(this._inBlock, this._outBlock); {
                                    if (! (0 === this._partialBytes && i >= this.blockSize)) {
                                        var r = (this.blockSize - i) % this.blockSize;
                                        r > 0 && (r = this.blockSize - r),
                                            this._partialOutput.clear();
                                        for (var a = 0; a < this._ints; ++a) this._partialBlock[a] = e.getInt32() ^ this._outBlock[a],
                                            this._partialOutput.putInt32(this._partialBlock[a]);
                                        if (r > 0) e.read -= this.blockSize;
                                        else for (var a = 0; a < this._ints; ++a) this._inBlock[a] = this._partialBlock[a];
                                        return this._partialBytes > 0 && this._partialOutput.getBytes(this._partialBytes),
                                            r > 0 && !n ? (t.putBytes(this._partialOutput.getBytes(r - this._partialBytes)), this._partialBytes = r, !0) : (t.putBytes(this._partialOutput.getBytes(i - this._partialBytes)), void(this._partialBytes = 0))
                                    }
                                    for (var a = 0; a < this._ints; ++a) this._inBlock[a] = e.getInt32() ^ this._outBlock[a],
                                        t.putInt32(this._inBlock[a])
                                }
                            },
                            r.cfb.prototype.decrypt = function(e, t, n) {
                                var i = e.length();
                                if (0 === i) return ! 0;
                                this.cipher.encrypt(this._inBlock, this._outBlock); {
                                    if (! (0 === this._partialBytes && i >= this.blockSize)) {
                                        var r = (this.blockSize - i) % this.blockSize;
                                        r > 0 && (r = this.blockSize - r),
                                            this._partialOutput.clear();
                                        for (var a = 0; a < this._ints; ++a) this._partialBlock[a] = e.getInt32(),
                                            this._partialOutput.putInt32(this._partialBlock[a] ^ this._outBlock[a]);
                                        if (r > 0) e.read -= this.blockSize;
                                        else for (var a = 0; a < this._ints; ++a) this._inBlock[a] = this._partialBlock[a];
                                        return this._partialBytes > 0 && this._partialOutput.getBytes(this._partialBytes),
                                            r > 0 && !n ? (t.putBytes(this._partialOutput.getBytes(r - this._partialBytes)), this._partialBytes = r, !0) : (t.putBytes(this._partialOutput.getBytes(i - this._partialBytes)), void(this._partialBytes = 0))
                                    }
                                    for (var a = 0; a < this._ints; ++a) this._inBlock[a] = e.getInt32(),
                                        t.putInt32(this._inBlock[a] ^ this._outBlock[a])
                                }
                            },
                            r.ofb = function(t) {
                                t = t || {},
                                    this.name = "OFB",
                                    this.cipher = t.cipher,
                                    this.blockSize = t.blockSize || 16,
                                    this._ints = this.blockSize / 4,
                                    this._inBlock = null,
                                    this._outBlock = new Array(this._ints),
                                    this._partialOutput = e.util.createBuffer(),
                                    this._partialBytes = 0
                            },
                            r.ofb.prototype.start = function(e) {
                                if (! ("iv" in e)) throw new Error("Invalid IV parameter.");
                                this._iv = t(e.iv),
                                    this._inBlock = this._iv.slice(0),
                                    this._partialBytes = 0
                            },
                            r.ofb.prototype.encrypt = function(e, t, n) {
                                var i = e.length();
                                if (0 === e.length()) return ! 0;
                                this.cipher.encrypt(this._inBlock, this._outBlock); {
                                    if (! (0 === this._partialBytes && i >= this.blockSize)) {
                                        var r = (this.blockSize - i) % this.blockSize;
                                        r > 0 && (r = this.blockSize - r),
                                            this._partialOutput.clear();
                                        for (var a = 0; a < this._ints; ++a) this._partialOutput.putInt32(e.getInt32() ^ this._outBlock[a]);
                                        if (r > 0) e.read -= this.blockSize;
                                        else for (var a = 0; a < this._ints; ++a) this._inBlock[a] = this._outBlock[a];
                                        return this._partialBytes > 0 && this._partialOutput.getBytes(this._partialBytes),
                                            r > 0 && !n ? (t.putBytes(this._partialOutput.getBytes(r - this._partialBytes)), this._partialBytes = r, !0) : (t.putBytes(this._partialOutput.getBytes(i - this._partialBytes)), void(this._partialBytes = 0))
                                    }
                                    for (var a = 0; a < this._ints; ++a) t.putInt32(e.getInt32() ^ this._outBlock[a]),
                                        this._inBlock[a] = this._outBlock[a]
                                }
                            },
                            r.ofb.prototype.decrypt = r.ofb.prototype.encrypt,
                            r.ctr = function(t) {
                                t = t || {},
                                    this.name = "CTR",
                                    this.cipher = t.cipher,
                                    this.blockSize = t.blockSize || 16,
                                    this._ints = this.blockSize / 4,
                                    this._inBlock = null,
                                    this._outBlock = new Array(this._ints),
                                    this._partialOutput = e.util.createBuffer(),
                                    this._partialBytes = 0
                            },
                            r.ctr.prototype.start = function(e) {
                                if (! ("iv" in e)) throw new Error("Invalid IV parameter.");
                                this._iv = t(e.iv),
                                    this._inBlock = this._iv.slice(0),
                                    this._partialBytes = 0
                            },
                            r.ctr.prototype.encrypt = function(e, t, i) {
                                var r = e.length();
                                if (0 === r) return ! 0;
                                if (this.cipher.encrypt(this._inBlock, this._outBlock), 0 === this._partialBytes && r >= this.blockSize) for (var a = 0; a < this._ints; ++a) t.putInt32(e.getInt32() ^ this._outBlock[a]);
                                else {
                                    var o = (this.blockSize - r) % this.blockSize;
                                    o > 0 && (o = this.blockSize - o),
                                        this._partialOutput.clear();
                                    for (var a = 0; a < this._ints; ++a) this._partialOutput.putInt32(e.getInt32() ^ this._outBlock[a]);
                                    if (o > 0 && (e.read -= this.blockSize), this._partialBytes > 0 && this._partialOutput.getBytes(this._partialBytes), o > 0 && !i) return t.putBytes(this._partialOutput.getBytes(o - this._partialBytes)),
                                        this._partialBytes = o,
                                        !0;
                                    t.putBytes(this._partialOutput.getBytes(r - this._partialBytes)),
                                        this._partialBytes = 0
                                }
                                n(this._inBlock)
                            },
                            r.ctr.prototype.decrypt = r.ctr.prototype.encrypt,
                            r.gcm = function(t) {
                                t = t || {},
                                    this.name = "GCM",
                                    this.cipher = t.cipher,
                                    this.blockSize = t.blockSize || 16,
                                    this._ints = this.blockSize / 4,
                                    this._inBlock = new Array(this._ints),
                                    this._outBlock = new Array(this._ints),
                                    this._partialOutput = e.util.createBuffer(),
                                    this._partialBytes = 0,
                                    this._R = 3774873600
                            },
                            r.gcm.prototype.start = function(t) {
                                if (! ("iv" in t)) throw new Error("Invalid IV parameter.");
                                var r = e.util.createBuffer(t.iv);
                                this._cipherLength = 0;
                                var a;
                                if (a = "additionalData" in t ? e.util.createBuffer(t.additionalData) : e.util.createBuffer(), this._tagLength = "tagLength" in t ? t.tagLength: 128, this._tag = null, t.decrypt && (this._tag = e.util.createBuffer(t.tag).getBytes(), this._tag.length !== this._tagLength / 8)) throw new Error("Authentication tag does not match tag length.");
                                this._hashBlock = new Array(this._ints),
                                    this.tag = null,
                                    this._hashSubkey = new Array(this._ints),
                                    this.cipher.encrypt([0, 0, 0, 0], this._hashSubkey),
                                    this.componentBits = 4,
                                    this._m = this.generateHashTable(this._hashSubkey, this.componentBits);
                                var o = r.length();
                                if (12 === o) this._j0 = [r.getInt32(), r.getInt32(), r.getInt32(), 1];
                                else {
                                    for (this._j0 = [0, 0, 0, 0]; r.length() > 0;) this._j0 = this.ghash(this._hashSubkey, this._j0, [r.getInt32(), r.getInt32(), r.getInt32(), r.getInt32()]);
                                    this._j0 = this.ghash(this._hashSubkey, this._j0, [0, 0].concat(i(8 * o)))
                                }
                                this._inBlock = this._j0.slice(0),
                                    n(this._inBlock),
                                    this._partialBytes = 0,
                                    a = e.util.createBuffer(a),
                                    this._aDataLength = i(8 * a.length());
                                var s = a.length() % this.blockSize;
                                for (s && a.fillWithByte(0, this.blockSize - s), this._s = [0, 0, 0, 0]; a.length() > 0;) this._s = this.ghash(this._hashSubkey, this._s, [a.getInt32(), a.getInt32(), a.getInt32(), a.getInt32()])
                            },
                            r.gcm.prototype.encrypt = function(e, t, i) {
                                var r = e.length();
                                if (0 === r) return ! 0;
                                if (this.cipher.encrypt(this._inBlock, this._outBlock), 0 === this._partialBytes && r >= this.blockSize) {
                                    for (var a = 0; a < this._ints; ++a) t.putInt32(this._outBlock[a] ^= e.getInt32());
                                    this._cipherLength += this.blockSize
                                } else {
                                    var o = (this.blockSize - r) % this.blockSize;
                                    o > 0 && (o = this.blockSize - o),
                                        this._partialOutput.clear();
                                    for (var a = 0; a < this._ints; ++a) this._partialOutput.putInt32(e.getInt32() ^ this._outBlock[a]);
                                    if (0 === o || i) {
                                        if (i) {
                                            var s = r % this.blockSize;
                                            this._cipherLength += s,
                                                this._partialOutput.truncate(this.blockSize - s)
                                        } else this._cipherLength += this.blockSize;
                                        for (var a = 0; a < this._ints; ++a) this._outBlock[a] = this._partialOutput.getInt32();
                                        this._partialOutput.read -= this.blockSize
                                    }
                                    if (this._partialBytes > 0 && this._partialOutput.getBytes(this._partialBytes), o > 0 && !i) return e.read -= this.blockSize,
                                        t.putBytes(this._partialOutput.getBytes(o - this._partialBytes)),
                                        this._partialBytes = o,
                                        !0;
                                    t.putBytes(this._partialOutput.getBytes(r - this._partialBytes)),
                                        this._partialBytes = 0
                                }
                                this._s = this.ghash(this._hashSubkey, this._s, this._outBlock),
                                    n(this._inBlock)
                            },
                            r.gcm.prototype.decrypt = function(e, t, i) {
                                var r = e.length();
                                if (r < this.blockSize && !(i && r > 0)) return ! 0;
                                this.cipher.encrypt(this._inBlock, this._outBlock),
                                    n(this._inBlock),
                                    this._hashBlock[0] = e.getInt32(),
                                    this._hashBlock[1] = e.getInt32(),
                                    this._hashBlock[2] = e.getInt32(),
                                    this._hashBlock[3] = e.getInt32(),
                                    this._s = this.ghash(this._hashSubkey, this._s, this._hashBlock);
                                for (var a = 0; a < this._ints; ++a) t.putInt32(this._outBlock[a] ^ this._hashBlock[a]);
                                this._cipherLength += r < this.blockSize ? r % this.blockSize: this.blockSize
                            },
                            r.gcm.prototype.afterFinish = function(t, n) {
                                var r = !0;
                                n.decrypt && n.overflow && t.truncate(this.blockSize - n.overflow),
                                    this.tag = e.util.createBuffer();
                                var a = this._aDataLength.concat(i(8 * this._cipherLength));
                                this._s = this.ghash(this._hashSubkey, this._s, a);
                                var o = [];
                                this.cipher.encrypt(this._j0, o);
                                for (var s = 0; s < this._ints; ++s) this.tag.putInt32(this._s[s] ^ o[s]);
                                return this.tag.truncate(this.tag.length() % (this._tagLength / 8)),
                                n.decrypt && this.tag.bytes() !== this._tag && (r = !1),
                                    r
                            },
                            r.gcm.prototype.multiply = function(e, t) {
                                for (var n = [0, 0, 0, 0], i = t.slice(0), r = 0; 128 > r; ++r) {
                                    var a = e[r / 32 | 0] & 1 << 31 - r % 32;
                                    a && (n[0] ^= i[0], n[1] ^= i[1], n[2] ^= i[2], n[3] ^= i[3]),
                                        this.pow(i, i)
                                }
                                return n
                            },
                            r.gcm.prototype.pow = function(e, t) {
                                for (var n = 1 & e[3], i = 3; i > 0; --i) t[i] = e[i] >>> 1 | (1 & e[i - 1]) << 31;
                                t[0] = e[0] >>> 1,
                                n && (t[0] ^= this._R)
                            },
                            r.gcm.prototype.tableMultiply = function(e) {
                                for (var t = [0, 0, 0, 0], n = 0; 32 > n; ++n) {
                                    var i = n / 8 | 0,
                                        r = e[i] >>> 4 * (7 - n % 8) & 15,
                                        a = this._m[n][r];
                                    t[0] ^= a[0],
                                        t[1] ^= a[1],
                                        t[2] ^= a[2],
                                        t[3] ^= a[3]
                                }
                                return t
                            },
                            r.gcm.prototype.ghash = function(e, t, n) {
                                return t[0] ^= n[0],
                                    t[1] ^= n[1],
                                    t[2] ^= n[2],
                                    t[3] ^= n[3],
                                    this.tableMultiply(t)
                            },
                            r.gcm.prototype.generateHashTable = function(e, t) {
                                for (var n = 8 / t,
                                         i = 4 * n,
                                         r = 16 * n,
                                         a = new Array(r), o = 0; r > o; ++o) {
                                    var s = [0, 0, 0, 0],
                                        c = o / i | 0,
                                        l = (i - 1 - o % i) * t;
                                    s[c] = 1 << t - 1 << l,
                                        a[o] = this.generateSubHashTable(this.multiply(s, e), t)
                                }
                                return a
                            },
                            r.gcm.prototype.generateSubHashTable = function(e, t) {
                                var n = 1 << t,
                                    i = n >>> 1,
                                    r = new Array(n);
                                r[i] = e.slice(0);
                                for (var a = i >>> 1; a > 0;) this.pow(r[2 * a], r[a] = []),
                                    a >>= 1;
                                for (a = 2; i > a;) {
                                    for (var o = 1; a > o; ++o) {
                                        var s = r[a],
                                            c = r[o];
                                        r[a + o] = [s[0] ^ c[0], s[1] ^ c[1], s[2] ^ c[2], s[3] ^ c[3]]
                                    }
                                    a *= 2
                                }
                                for (r[0] = [0, 0, 0, 0], a = i + 1; n > a; ++a) {
                                    var l = r[a ^ i];
                                    r[a] = [e[0] ^ l[0], e[1] ^ l[1], e[2] ^ l[2], e[3] ^ l[3]]
                                }
                                return r
                            }
                    }
                    var i = "cipherModes";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/cipherModes", ["require", "module", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(t, n) {
                            var i = function() {
                                return new e.aes.Algorithm(t, n)
                            };
                            e.cipher.registerAlgorithm(t, i)
                        }
                        function n() {
                            p = !0,
                                c = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54];
                            for (var e = new Array(256), t = 0; 128 > t; ++t) e[t] = t << 1,
                                e[t + 128] = t + 128 << 1 ^ 283;
                            o = new Array(256),
                                s = new Array(256),
                                l = new Array(4),
                                d = new Array(4);
                            for (var t = 0; 4 > t; ++t) l[t] = new Array(256),
                                d[t] = new Array(256);
                            for (var n, i, r, a, u, f, h, g = 0,
                                     m = 0,
                                     t = 0; 256 > t; ++t) {
                                a = m ^ m << 1 ^ m << 2 ^ m << 3 ^ m << 4,
                                    a = a >> 8 ^ 255 & a ^ 99,
                                    o[g] = a,
                                    s[a] = g,
                                    u = e[a],
                                    n = e[g],
                                    i = e[n],
                                    r = e[i],
                                    f = u << 24 ^ a << 16 ^ a << 8 ^ (a ^ u),
                                    h = (n ^ i ^ r) << 24 ^ (g ^ r) << 16 ^ (g ^ i ^ r) << 8 ^ (g ^ n ^ r);
                                for (var y = 0; 4 > y; ++y) l[y][g] = f,
                                    d[y][a] = h,
                                    f = f << 24 | f >>> 8,
                                    h = h << 24 | h >>> 8;
                                0 === g ? g = m = 1 : (g = n ^ e[e[e[n ^ r]]], m ^= e[e[m]])
                            }
                        }
                        function i(e, t) {
                            for (var n, i = e.slice(0), r = 1, a = i.length, s = a + 6 + 1, l = u * s, p = a; l > p; ++p) n = i[p - 1],
                                p % a === 0 ? (n = o[n >>> 16 & 255] << 24 ^ o[n >>> 8 & 255] << 16 ^ o[255 & n] << 8 ^ o[n >>> 24] ^ c[r] << 24, r++) : a > 6 && p % a === 4 && (n = o[n >>> 24] << 24 ^ o[n >>> 16 & 255] << 16 ^ o[n >>> 8 & 255] << 8 ^ o[255 & n]),
                                i[p] = i[p - a] ^ n;
                            if (t) {
                                var f, h = d[0],
                                    g = d[1],
                                    m = d[2],
                                    y = d[3],
                                    v = i.slice(0);
                                l = i.length;
                                for (var p = 0,
                                         C = l - u; l > p; p += u, C -= u) if (0 === p || p === l - u) v[p] = i[C],
                                    v[p + 1] = i[C + 3],
                                    v[p + 2] = i[C + 2],
                                    v[p + 3] = i[C + 1];
                                else for (var S = 0; u > S; ++S) f = i[C + S],
                                        v[p + (3 & -S)] = h[o[f >>> 24]] ^ g[o[f >>> 16 & 255]] ^ m[o[f >>> 8 & 255]] ^ y[o[255 & f]];
                                i = v
                            }
                            return i
                        }
                        function r(e, t, n, i) {
                            var r, a, c, p, u, f = e.length / 4 - 1;
                            i ? (r = d[0], a = d[1], c = d[2], p = d[3], u = s) : (r = l[0], a = l[1], c = l[2], p = l[3], u = o);
                            var h, g, m, y, v, C, S;
                            h = t[0] ^ e[0],
                                g = t[i ? 3 : 1] ^ e[1],
                                m = t[2] ^ e[2],
                                y = t[i ? 1 : 3] ^ e[3];
                            for (var _ = 3,
                                     b = 1; f > b; ++b) v = r[h >>> 24] ^ a[g >>> 16 & 255] ^ c[m >>> 8 & 255] ^ p[255 & y] ^ e[++_],
                                C = r[g >>> 24] ^ a[m >>> 16 & 255] ^ c[y >>> 8 & 255] ^ p[255 & h] ^ e[++_],
                                S = r[m >>> 24] ^ a[y >>> 16 & 255] ^ c[h >>> 8 & 255] ^ p[255 & g] ^ e[++_],
                                y = r[y >>> 24] ^ a[h >>> 16 & 255] ^ c[g >>> 8 & 255] ^ p[255 & m] ^ e[++_],
                                h = v,
                                g = C,
                                m = S;
                            n[0] = u[h >>> 24] << 24 ^ u[g >>> 16 & 255] << 16 ^ u[m >>> 8 & 255] << 8 ^ u[255 & y] ^ e[++_],
                                n[i ? 3 : 1] = u[g >>> 24] << 24 ^ u[m >>> 16 & 255] << 16 ^ u[y >>> 8 & 255] << 8 ^ u[255 & h] ^ e[++_],
                                n[2] = u[m >>> 24] << 24 ^ u[y >>> 16 & 255] << 16 ^ u[h >>> 8 & 255] << 8 ^ u[255 & g] ^ e[++_],
                                n[i ? 1 : 3] = u[y >>> 24] << 24 ^ u[h >>> 16 & 255] << 16 ^ u[g >>> 8 & 255] << 8 ^ u[255 & m] ^ e[++_]
                        }
                        function a(t) {
                            t = t || {};
                            var n, i = (t.mode || "CBC").toUpperCase(),
                                r = "AES-" + i;
                            n = t.decrypt ? e.cipher.createDecipher(r, t.key) : e.cipher.createCipher(r, t.key);
                            var a = n.start;
                            return n.start = function(t, i) {
                                var r = null;
                                i instanceof e.util.ByteBuffer && (r = i, i = {}),
                                    i = i || {},
                                    i.output = r,
                                    i.iv = t,
                                    a.call(n, i)
                            },
                                n
                        }
                        e.aes = e.aes || {},
                            e.aes.startEncrypting = function(e, t, n, i) {
                                var r = a({
                                    key: e,
                                    output: n,
                                    decrypt: !1,
                                    mode: i
                                });
                                return r.start(t),
                                    r
                            },
                            e.aes.createEncryptionCipher = function(e, t) {
                                return a({
                                    key: e,
                                    output: null,
                                    decrypt: !1,
                                    mode: t
                                })
                            },
                            e.aes.startDecrypting = function(e, t, n, i) {
                                var r = a({
                                    key: e,
                                    output: n,
                                    decrypt: !0,
                                    mode: i
                                });
                                return r.start(t),
                                    r
                            },
                            e.aes.createDecryptionCipher = function(e, t) {
                                return a({
                                    key: e,
                                    output: null,
                                    decrypt: !0,
                                    mode: t
                                })
                            },
                            e.aes.Algorithm = function(e, t) {
                                p || n();
                                var i = this;
                                i.name = e,
                                    i.mode = new t({
                                        blockSize: 16,
                                        cipher: {
                                            encrypt: function(e, t) {
                                                return r(i._w, e, t, !1)
                                            },
                                            decrypt: function(e, t) {
                                                return r(i._w, e, t, !0)
                                            }
                                        }
                                    }),
                                    i._init = !1
                            },
                            e.aes.Algorithm.prototype.initialize = function(t) {
                                if (!this._init) {
                                    var n, r = t.key;
                                    if ("string" != typeof r || 16 !== r.length && 24 !== r.length && 32 !== r.length) {
                                        if (e.util.isArray(r) && (16 === r.length || 24 === r.length || 32 === r.length)) {
                                            n = r,
                                                r = e.util.createBuffer();
                                            for (var a = 0; a < n.length; ++a) r.putByte(n[a])
                                        }
                                    } else r = e.util.createBuffer(r);
                                    if (!e.util.isArray(r)) {
                                        n = r,
                                            r = [];
                                        var o = n.length();
                                        if (16 === o || 24 === o || 32 === o) {
                                            o >>>= 2;
                                            for (var a = 0; o > a; ++a) r.push(n.getInt32())
                                        }
                                    }
                                    if (!e.util.isArray(r) || 4 !== r.length && 6 !== r.length && 8 !== r.length) throw new Error("Invalid key parameter.");
                                    var s = this.mode.name,
                                        c = -1 !== ["CFB", "OFB", "CTR", "GCM"].indexOf(s);
                                    this._w = i(r, t.decrypt && !c),
                                        this._init = !0
                                }
                            },
                            e.aes._expandKey = function(e, t) {
                                return p || n(),
                                    i(e, t)
                            },
                            e.aes._updateBlock = r,
                            t("AES-ECB", e.cipher.modes.ecb),
                            t("AES-CBC", e.cipher.modes.cbc),
                            t("AES-CFB", e.cipher.modes.cfb),
                            t("AES-OFB", e.cipher.modes.ofb),
                            t("AES-CTR", e.cipher.modes.ctr),
                            t("AES-GCM", e.cipher.modes.gcm);
                        var o, s, c, l, d, p = !1,
                            u = 4
                    }
                    var i = "aes";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/aes", ["require", "module", "./cipher", "./cipherModes", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        e.pki = e.pki || {};
                        var t = e.pki.oids = e.oids = e.oids || {};
                        t["1.2.840.113549.1.1.1"] = "rsaEncryption",
                            t.rsaEncryption = "1.2.840.113549.1.1.1",
                            t["1.2.840.113549.1.1.4"] = "md5WithRSAEncryption",
                            t.md5WithRSAEncryption = "1.2.840.113549.1.1.4",
                            t["1.2.840.113549.1.1.5"] = "sha1WithRSAEncryption",
                            t.sha1WithRSAEncryption = "1.2.840.113549.1.1.5",
                            t["1.2.840.113549.1.1.7"] = "RSAES-OAEP",
                            t["RSAES-OAEP"] = "1.2.840.113549.1.1.7",
                            t["1.2.840.113549.1.1.8"] = "mgf1",
                            t.mgf1 = "1.2.840.113549.1.1.8",
                            t["1.2.840.113549.1.1.9"] = "pSpecified",
                            t.pSpecified = "1.2.840.113549.1.1.9",
                            t["1.2.840.113549.1.1.10"] = "RSASSA-PSS",
                            t["RSASSA-PSS"] = "1.2.840.113549.1.1.10",
                            t["1.2.840.113549.1.1.11"] = "sha256WithRSAEncryption",
                            t.sha256WithRSAEncryption = "1.2.840.113549.1.1.11",
                            t["1.2.840.113549.1.1.12"] = "sha384WithRSAEncryption",
                            t.sha384WithRSAEncryption = "1.2.840.113549.1.1.12",
                            t["1.2.840.113549.1.1.13"] = "sha512WithRSAEncryption",
                            t.sha512WithRSAEncryption = "1.2.840.113549.1.1.13",
                            t["1.3.14.3.2.7"] = "desCBC",
                            t.desCBC = "1.3.14.3.2.7",
                            t["1.3.14.3.2.26"] = "sha1",
                            t.sha1 = "1.3.14.3.2.26",
                            t["2.16.840.1.101.3.4.2.1"] = "sha256",
                            t.sha256 = "2.16.840.1.101.3.4.2.1",
                            t["2.16.840.1.101.3.4.2.2"] = "sha384",
                            t.sha384 = "2.16.840.1.101.3.4.2.2",
                            t["2.16.840.1.101.3.4.2.3"] = "sha512",
                            t.sha512 = "2.16.840.1.101.3.4.2.3",
                            t["1.2.840.113549.2.5"] = "md5",
                            t.md5 = "1.2.840.113549.2.5",
                            t["1.2.840.113549.1.7.1"] = "data",
                            t.data = "1.2.840.113549.1.7.1",
                            t["1.2.840.113549.1.7.2"] = "signedData",
                            t.signedData = "1.2.840.113549.1.7.2",
                            t["1.2.840.113549.1.7.3"] = "envelopedData",
                            t.envelopedData = "1.2.840.113549.1.7.3",
                            t["1.2.840.113549.1.7.4"] = "signedAndEnvelopedData",
                            t.signedAndEnvelopedData = "1.2.840.113549.1.7.4",
                            t["1.2.840.113549.1.7.5"] = "digestedData",
                            t.digestedData = "1.2.840.113549.1.7.5",
                            t["1.2.840.113549.1.7.6"] = "encryptedData",
                            t.encryptedData = "1.2.840.113549.1.7.6",
                            t["1.2.840.113549.1.9.1"] = "emailAddress",
                            t.emailAddress = "1.2.840.113549.1.9.1",
                            t["1.2.840.113549.1.9.2"] = "unstructuredName",
                            t.unstructuredName = "1.2.840.113549.1.9.2",
                            t["1.2.840.113549.1.9.3"] = "contentType",
                            t.contentType = "1.2.840.113549.1.9.3",
                            t["1.2.840.113549.1.9.4"] = "messageDigest",
                            t.messageDigest = "1.2.840.113549.1.9.4",
                            t["1.2.840.113549.1.9.5"] = "signingTime",
                            t.signingTime = "1.2.840.113549.1.9.5",
                            t["1.2.840.113549.1.9.6"] = "counterSignature",
                            t.counterSignature = "1.2.840.113549.1.9.6",
                            t["1.2.840.113549.1.9.7"] = "challengePassword",
                            t.challengePassword = "1.2.840.113549.1.9.7",
                            t["1.2.840.113549.1.9.8"] = "unstructuredAddress",
                            t.unstructuredAddress = "1.2.840.113549.1.9.8",
                            t["1.2.840.113549.1.9.14"] = "extensionRequest",
                            t.extensionRequest = "1.2.840.113549.1.9.14",
                            t["1.2.840.113549.1.9.20"] = "friendlyName",
                            t.friendlyName = "1.2.840.113549.1.9.20",
                            t["1.2.840.113549.1.9.21"] = "localKeyId",
                            t.localKeyId = "1.2.840.113549.1.9.21",
                            t["1.2.840.113549.1.9.22.1"] = "x509Certificate",
                            t.x509Certificate = "1.2.840.113549.1.9.22.1",
                            t["1.2.840.113549.1.12.10.1.1"] = "keyBag",
                            t.keyBag = "1.2.840.113549.1.12.10.1.1",
                            t["1.2.840.113549.1.12.10.1.2"] = "pkcs8ShroudedKeyBag",
                            t.pkcs8ShroudedKeyBag = "1.2.840.113549.1.12.10.1.2",
                            t["1.2.840.113549.1.12.10.1.3"] = "certBag",
                            t.certBag = "1.2.840.113549.1.12.10.1.3",
                            t["1.2.840.113549.1.12.10.1.4"] = "crlBag",
                            t.crlBag = "1.2.840.113549.1.12.10.1.4",
                            t["1.2.840.113549.1.12.10.1.5"] = "secretBag",
                            t.secretBag = "1.2.840.113549.1.12.10.1.5",
                            t["1.2.840.113549.1.12.10.1.6"] = "safeContentsBag",
                            t.safeContentsBag = "1.2.840.113549.1.12.10.1.6",
                            t["1.2.840.113549.1.5.13"] = "pkcs5PBES2",
                            t.pkcs5PBES2 = "1.2.840.113549.1.5.13",
                            t["1.2.840.113549.1.5.12"] = "pkcs5PBKDF2",
                            t.pkcs5PBKDF2 = "1.2.840.113549.1.5.12",
                            t["1.2.840.113549.1.12.1.1"] = "pbeWithSHAAnd128BitRC4",
                            t.pbeWithSHAAnd128BitRC4 = "1.2.840.113549.1.12.1.1",
                            t["1.2.840.113549.1.12.1.2"] = "pbeWithSHAAnd40BitRC4",
                            t.pbeWithSHAAnd40BitRC4 = "1.2.840.113549.1.12.1.2",
                            t["1.2.840.113549.1.12.1.3"] = "pbeWithSHAAnd3-KeyTripleDES-CBC",
                            t["pbeWithSHAAnd3-KeyTripleDES-CBC"] = "1.2.840.113549.1.12.1.3",
                            t["1.2.840.113549.1.12.1.4"] = "pbeWithSHAAnd2-KeyTripleDES-CBC",
                            t["pbeWithSHAAnd2-KeyTripleDES-CBC"] = "1.2.840.113549.1.12.1.4",
                            t["1.2.840.113549.1.12.1.5"] = "pbeWithSHAAnd128BitRC2-CBC",
                            t["pbeWithSHAAnd128BitRC2-CBC"] = "1.2.840.113549.1.12.1.5",
                            t["1.2.840.113549.1.12.1.6"] = "pbewithSHAAnd40BitRC2-CBC",
                            t["pbewithSHAAnd40BitRC2-CBC"] = "1.2.840.113549.1.12.1.6",
                            t["1.2.840.113549.3.7"] = "des-EDE3-CBC",
                            t["des-EDE3-CBC"] = "1.2.840.113549.3.7",
                            t["2.16.840.1.101.3.4.1.2"] = "aes128-CBC",
                            t["aes128-CBC"] = "2.16.840.1.101.3.4.1.2",
                            t["2.16.840.1.101.3.4.1.22"] = "aes192-CBC",
                        t["aes192-CBC"] = "2.16.840.1.101.3.4.1.22",
                        t["2.16.840.1.101.3.4.1.42"] = "aes256-CBC",
                        t["aes256-CBC"] = "2.16.840.1.101.3.4.1.42",
                        t["2.5.4.3"] = "commonName",
                        t.commonName = "2.5.4.3",
                        t["2.5.4.5"] = "serialName",
                        t.serialName = "2.5.4.5",
                        t["2.5.4.6"] = "countryName",
                        t.countryName = "2.5.4.6",
                        t["2.5.4.7"] = "localityName",
                        t.localityName = "2.5.4.7",
                        t["2.5.4.8"] = "stateOrProvinceName",
                        t.stateOrProvinceName = "2.5.4.8",
                        t["2.5.4.10"] = "organizationName",
                        t.organizationName = "2.5.4.10",
                        t["2.5.4.11"] = "organizationalUnitName",
                        t.organizationalUnitName = "2.5.4.11",
                        t["2.16.840.1.113730.1.1"] = "nsCertType",
                        t.nsCertType = "2.16.840.1.113730.1.1",
                        t["2.5.29.1"] = "authorityKeyIdentifier",
                        t["2.5.29.2"] = "keyAttributes",
                        t["2.5.29.3"] = "certificatePolicies",
                        t["2.5.29.4"] = "keyUsageRestriction",
                        t["2.5.29.5"] = "policyMapping",
                        t["2.5.29.6"] = "subtreesConstraint",
                        t["2.5.29.7"] = "subjectAltName",
                        t["2.5.29.8"] = "issuerAltName",
                        t["2.5.29.9"] = "subjectDirectoryAttributes",
                        t["2.5.29.10"] = "basicConstraints",
                        t["2.5.29.11"] = "nameConstraints",
                        t["2.5.29.12"] = "policyConstraints",
                        t["2.5.29.13"] = "basicConstraints",
                        t["2.5.29.14"] = "subjectKeyIdentifier",
                        t.subjectKeyIdentifier = "2.5.29.14",
                        t["2.5.29.15"] = "keyUsage",
                        t.keyUsage = "2.5.29.15",
                        t["2.5.29.16"] = "privateKeyUsagePeriod",
                        t["2.5.29.17"] = "subjectAltName",
                        t.subjectAltName = "2.5.29.17",
                        t["2.5.29.18"] = "issuerAltName",
                        t.issuerAltName = "2.5.29.18",
                        t["2.5.29.19"] = "basicConstraints",
                        t.basicConstraints = "2.5.29.19",
                        t["2.5.29.20"] = "cRLNumber",
                        t["2.5.29.21"] = "cRLReason",
                        t["2.5.29.22"] = "expirationDate",
                        t["2.5.29.23"] = "instructionCode",
                        t["2.5.29.24"] = "invalidityDate",
                        t["2.5.29.25"] = "cRLDistributionPoints",
                        t["2.5.29.26"] = "issuingDistributionPoint",
                        t["2.5.29.27"] = "deltaCRLIndicator",
                        t["2.5.29.28"] = "issuingDistributionPoint",
                        t["2.5.29.29"] = "certificateIssuer",
                        t["2.5.29.30"] = "nameConstraints",
                        t["2.5.29.31"] = "cRLDistributionPoints",
                        t["2.5.29.32"] = "certificatePolicies",
                        t["2.5.29.33"] = "policyMappings",
                        t["2.5.29.34"] = "policyConstraints",
                        t["2.5.29.35"] = "authorityKeyIdentifier",
                        t.authorityKeyIdentifier = "2.5.29.35",
                        t["2.5.29.36"] = "policyConstraints",
                        t["2.5.29.37"] = "extKeyUsage",
                        t.extKeyUsage = "2.5.29.37",
                        t["2.5.29.46"] = "freshestCRL",
                        t["2.5.29.54"] = "inhibitAnyPolicy",
                        t["1.3.6.1.5.5.7.3.1"] = "serverAuth",
                        t.serverAuth = "1.3.6.1.5.5.7.3.1",
                        t["1.3.6.1.5.5.7.3.2"] = "clientAuth",
                        t.clientAuth = "1.3.6.1.5.5.7.3.2",
                        t["1.3.6.1.5.5.7.3.3"] = "codeSigning",
                        t.codeSigning = "1.3.6.1.5.5.7.3.3",
                        t["1.3.6.1.5.5.7.3.4"] = "emailProtection",
                        t.emailProtection = "1.3.6.1.5.5.7.3.4",
                        t["1.3.6.1.5.5.7.3.8"] = "timeStamping",
                        t.timeStamping = "1.3.6.1.5.5.7.3.8"
                    }
                    var i = "oids";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/oids", ["require", "module"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        var t = e.asn1 = e.asn1 || {};
                        t.Class = {
                            UNIVERSAL: 0,
                            APPLICATION: 64,
                            CONTEXT_SPECIFIC: 128,
                            PRIVATE: 192
                        },
                            t.Type = {
                                NONE: 0,
                                BOOLEAN: 1,
                                INTEGER: 2,
                                BITSTRING: 3,
                                OCTETSTRING: 4,
                                NULL: 5,
                                OID: 6,
                                ODESC: 7,
                                EXTERNAL: 8,
                                REAL: 9,
                                ENUMERATED: 10,
                                EMBEDDED: 11,
                                UTF8: 12,
                                ROID: 13,
                                SEQUENCE: 16,
                                SET: 17,
                                PRINTABLESTRING: 19,
                                IA5STRING: 22,
                                UTCTIME: 23,
                                GENERALIZEDTIME: 24,
                                BMPSTRING: 30
                            },
                            t.create = function(t, n, i, r) {
                                if (e.util.isArray(r)) {
                                    for (var a = [], o = 0; o < r.length; ++o) void 0 !== r[o] && a.push(r[o]);
                                    r = a
                                }
                                return {
                                    tagClass: t,
                                    type: n,
                                    constructed: i,
                                    composed: i || e.util.isArray(r),
                                    value: r
                                }
                            };
                        var n = t.getBerValueLength = function(e) {
                            var t = e.getByte();
                            if (128 === t) return void 0;
                            var n, i = 128 & t;
                            return n = i ? e.getInt((127 & t) << 3) : t
                        };
                        t.fromDer = function(i, r) {
                            if (void 0 === r && (r = !0), "string" == typeof i && (i = e.util.createBuffer(i)), i.length() < 2) {
                                var a = new Error("Too few bytes to parse DER.");
                                throw a.bytes = i.length(),
                                    a
                            }
                            var o = i.getByte(),
                                s = 192 & o,
                                c = 31 & o,
                                l = n(i);
                            if (i.length() < l) {
                                if (r) {
                                    var a = new Error("Too few bytes to read ASN.1 value.");
                                    throw a.detail = i.length() + " < " + l,
                                        a
                                }
                                l = i.length()
                            }
                            var d, p = 32 === (32 & o),
                                u = p;
                            if (!u && s === t.Class.UNIVERSAL && c === t.Type.BITSTRING && l > 1) {
                                var f = i.read,
                                    h = i.getByte();
                                if (0 === h) {
                                    o = i.getByte();
                                    var g = 192 & o;
                                    if (g === t.Class.UNIVERSAL || g === t.Class.CONTEXT_SPECIFIC) try {
                                        var m = n(i);
                                        u = m === l - (i.read - f),
                                        u && (++f, --l)
                                    } catch(y) {}
                                }
                                i.read = f
                            }
                            if (u) if (d = [], void 0 === l) for (;;) {
                                if (i.bytes(2) === String.fromCharCode(0, 0)) {
                                    i.getBytes(2);
                                    break
                                }
                                d.push(t.fromDer(i, r))
                            } else for (var v = i.length(); l > 0;) d.push(t.fromDer(i, r)),
                                l -= v - i.length(),
                                v = i.length();
                            else {
                                if (void 0 === l) {
                                    if (r) throw new Error("Non-constructed ASN.1 object of indefinite length.");
                                    l = i.length()
                                }
                                if (c === t.Type.BMPSTRING) {
                                    d = "";
                                    for (var C = 0; l > C; C += 2) d += String.fromCharCode(i.getInt16())
                                } else d = i.getBytes(l)
                            }
                            return t.create(s, c, p, d)
                        },
                            t.toDer = function(n) {
                                var i = e.util.createBuffer(),
                                    r = n.tagClass | n.type,
                                    a = e.util.createBuffer();
                                if (n.composed) {
                                    n.constructed ? r |= 32 : a.putByte(0);
                                    for (var o = 0; o < n.value.length; ++o) void 0 !== n.value[o] && a.putBuffer(t.toDer(n.value[o]))
                                } else if (n.type === t.Type.BMPSTRING) for (var o = 0; o < n.value.length; ++o) a.putInt16(n.value.charCodeAt(o));
                                else a.putBytes(n.value);
                                if (i.putByte(r), a.length() <= 127) i.putByte(127 & a.length());
                                else {
                                    var s = a.length(),
                                        c = "";
                                    do c += String.fromCharCode(255 & s),
                                        s >>>= 8;
                                    while (s > 0);
                                    i.putByte(128 | c.length);
                                    for (var o = c.length - 1; o >= 0; --o) i.putByte(c.charCodeAt(o))
                                }
                                return i.putBuffer(a),
                                    i
                            },
                            t.oidToDer = function(t) {
                                var n = t.split("."),
                                    i = e.util.createBuffer();
                                i.putByte(40 * parseInt(n[0], 10) + parseInt(n[1], 10));
                                for (var r, a, o, s, c = 2; c < n.length; ++c) {
                                    r = !0,
                                        a = [],
                                        o = parseInt(n[c], 10);
                                    do s = 127 & o,
                                        o >>>= 7,
                                    r || (s |= 128),
                                        a.push(s),
                                        r = !1;
                                    while (o > 0);
                                    for (var l = a.length - 1; l >= 0; --l) i.putByte(a[l])
                                }
                                return i
                            },
                            t.derToOid = function(t) {
                                var n;
                                "string" == typeof t && (t = e.util.createBuffer(t));
                                var i = t.getByte();
                                n = Math.floor(i / 40) + "." + i % 40;
                                for (var r = 0; t.length() > 0;) i = t.getByte(),
                                    r <<= 7,
                                    128 & i ? r += 127 & i: (n += "." + (r + i), r = 0);
                                return n
                            },
                            t.utcTimeToDate = function(e) {
                                var t = new Date,
                                    n = parseInt(e.substr(0, 2), 10);
                                n = n >= 50 ? 1900 + n: 2e3 + n;
                                var i = parseInt(e.substr(2, 2), 10) - 1,
                                    r = parseInt(e.substr(4, 2), 10),
                                    a = parseInt(e.substr(6, 2), 10),
                                    o = parseInt(e.substr(8, 2), 10),
                                    s = 0;
                                if (e.length > 11) {
                                    var c = e.charAt(10),
                                        l = 10;
                                    "+" !== c && "-" !== c && (s = parseInt(e.substr(10, 2), 10), l += 2)
                                }
                                if (t.setUTCFullYear(n, i, r), t.setUTCHours(a, o, s, 0), l && (c = e.charAt(l), "+" === c || "-" === c)) {
                                    var d = parseInt(e.substr(l + 1, 2), 10),
                                        p = parseInt(e.substr(l + 4, 2), 10),
                                        u = 60 * d + p;
                                    u *= 6e4,
                                        t.setTime("+" === c ? +t - u: +t + u)
                                }
                                return t
                            },
                            t.generalizedTimeToDate = function(e) {
                                var t = new Date,
                                    n = parseInt(e.substr(0, 4), 10),
                                    i = parseInt(e.substr(4, 2), 10) - 1,
                                    r = parseInt(e.substr(6, 2), 10),
                                    a = parseInt(e.substr(8, 2), 10),
                                    o = parseInt(e.substr(10, 2), 10),
                                    s = parseInt(e.substr(12, 2), 10),
                                    c = 0,
                                    l = 0,
                                    d = !1;
                                "Z" === e.charAt(e.length - 1) && (d = !0);
                                var p = e.length - 5,
                                    u = e.charAt(p);
                                if ("+" === u || "-" === u) {
                                    var f = parseInt(e.substr(p + 1, 2), 10),
                                        h = parseInt(e.substr(p + 4, 2), 10);
                                    l = 60 * f + h,
                                        l *= 6e4,
                                    "+" === u && (l *= -1),
                                        d = !0
                                }
                                return "." === e.charAt(14) && (c = 1e3 * parseFloat(e.substr(14), 10)),
                                    d ? (t.setUTCFullYear(n, i, r), t.setUTCHours(a, o, s, c), t.setTime( + t + l)) : (t.setFullYear(n, i, r), t.setHours(a, o, s, c)),
                                    t
                            },
                            t.dateToUtcTime = function(e) {
                                if ("string" == typeof e) return e;
                                var t = "",
                                    n = [];
                                n.push(("" + e.getUTCFullYear()).substr(2)),
                                    n.push("" + (e.getUTCMonth() + 1)),
                                    n.push("" + e.getUTCDate()),
                                    n.push("" + e.getUTCHours()),
                                    n.push("" + e.getUTCMinutes()),
                                    n.push("" + e.getUTCSeconds());
                                for (var i = 0; i < n.length; ++i) n[i].length < 2 && (t += "0"),
                                    t += n[i];
                                return t += "Z"
                            },
                            t.dateToGeneralizedTime = function(e) {
                                if ("string" == typeof e) return e;
                                var t = "",
                                    n = [];
                                n.push("" + e.getUTCFullYear()),
                                    n.push("" + (e.getUTCMonth() + 1)),
                                    n.push("" + e.getUTCDate()),
                                    n.push("" + e.getUTCHours()),
                                    n.push("" + e.getUTCMinutes()),
                                    n.push("" + e.getUTCSeconds());
                                for (var i = 0; i < n.length; ++i) n[i].length < 2 && (t += "0"),
                                    t += n[i];
                                return t += "Z"
                            },
                            t.integerToDer = function(t) {
                                var n = e.util.createBuffer();
                                if (t >= -128 && 128 > t) return n.putSignedInt(t, 8);
                                if (t >= -32768 && 32768 > t) return n.putSignedInt(t, 16);
                                if (t >= -8388608 && 8388608 > t) return n.putSignedInt(t, 24);
                                if (t >= -2147483648 && 2147483648 > t) return n.putSignedInt(t, 32);
                                var i = new Error("Integer too large; max is 32-bits.");
                                throw i.integer = t,
                                    i
                            },
                            t.derToInteger = function(t) {
                                "string" == typeof t && (t = e.util.createBuffer(t));
                                var n = 8 * t.length();
                                if (n > 32) throw new Error("Integer too large; max is 32-bits.");
                                return t.getSignedInt(n)
                            },
                            t.validate = function(n, i, r, a) {
                                var o = !1;
                                if (n.tagClass !== i.tagClass && "undefined" != typeof i.tagClass || n.type !== i.type && "undefined" != typeof i.type) a && (n.tagClass !== i.tagClass && a.push("[" + i.name + '] Expected tag class "' + i.tagClass + '", got "' + n.tagClass + '"'), n.type !== i.type && a.push("[" + i.name + '] Expected type "' + i.type + '", got "' + n.type + '"'));
                                else if (n.constructed === i.constructed || "undefined" == typeof i.constructed) {
                                    if (o = !0, i.value && e.util.isArray(i.value)) for (var s = 0,
                                                                                             c = 0; o && c < i.value.length; ++c) o = i.value[c].optional || !1,
                                    n.value[s] && (o = t.validate(n.value[s], i.value[c], r, a), o ? ++s: i.value[c].optional && (o = !0)),
                                    !o && a && a.push("[" + i.name + '] Tag class "' + i.tagClass + '", type "' + i.type + '" expected value length "' + i.value.length + '", got "' + n.value.length + '"');
                                    o && r && (i.capture && (r[i.capture] = n.value), i.captureAsn1 && (r[i.captureAsn1] = n))
                                } else a && a.push("[" + i.name + '] Expected constructed "' + i.constructed + '", got "' + n.constructed + '"');
                                return o
                            };
                        var i = /[^\\u0000-\\u00ff]/;
                        t.prettyPrint = function(n, r, a) {
                            var o = "";
                            r = r || 0,
                                a = a || 2,
                            r > 0 && (o += "\n");
                            for (var s = "",
                                     c = 0; r * a > c; ++c) s += " ";
                            switch (o += s + "Tag: ", n.tagClass) {
                                case t.Class.UNIVERSAL:
                                    o += "Universal:";
                                    break;
                                case t.Class.APPLICATION:
                                    o += "Application:";
                                    break;
                                case t.Class.CONTEXT_SPECIFIC:
                                    o += "Context-Specific:";
                                    break;
                                case t.Class.PRIVATE:
                                    o += "Private:"
                            }
                            if (n.tagClass === t.Class.UNIVERSAL) switch (o += n.type, n.type) {
                                case t.Type.NONE:
                                    o += " (None)";
                                    break;
                                case t.Type.BOOLEAN:
                                    o += " (Boolean)";
                                    break;
                                case t.Type.BITSTRING:
                                    o += " (Bit string)";
                                    break;
                                case t.Type.INTEGER:
                                    o += " (Integer)";
                                    break;
                                case t.Type.OCTETSTRING:
                                    o += " (Octet string)";
                                    break;
                                case t.Type.NULL:
                                    o += " (Null)";
                                    break;
                                case t.Type.OID:
                                    o += " (Object Identifier)";
                                    break;
                                case t.Type.ODESC:
                                    o += " (Object Descriptor)";
                                    break;
                                case t.Type.EXTERNAL:
                                    o += " (External or Instance of)";
                                    break;
                                case t.Type.REAL:
                                    o += " (Real)";
                                    break;
                                case t.Type.ENUMERATED:
                                    o += " (Enumerated)";
                                    break;
                                case t.Type.EMBEDDED:
                                    o += " (Embedded PDV)";
                                    break;
                                case t.Type.UTF8:
                                    o += " (UTF8)";
                                    break;
                                case t.Type.ROID:
                                    o += " (Relative Object Identifier)";
                                    break;
                                case t.Type.SEQUENCE:
                                    o += " (Sequence)";
                                    break;
                                case t.Type.SET:
                                    o += " (Set)";
                                    break;
                                case t.Type.PRINTABLESTRING:
                                    o += " (Printable String)";
                                    break;
                                case t.Type.IA5String:
                                    o += " (IA5String (ASCII))";
                                    break;
                                case t.Type.UTCTIME:
                                    o += " (UTC time)";
                                    break;
                                case t.Type.GENERALIZEDTIME:
                                    o += " (Generalized time)";
                                    break;
                                case t.Type.BMPSTRING:
                                    o += " (BMP String)"
                            } else o += n.type;
                            if (o += "\n", o += s + "Constructed: " + n.constructed + "\n", n.composed) {
                                for (var l = 0,
                                         d = "",
                                         c = 0; c < n.value.length; ++c) void 0 !== n.value[c] && (l += 1, d += t.prettyPrint(n.value[c], r + 1, a), c + 1 < n.value.length && (d += ","));
                                o += s + "Sub values: " + l + d
                            } else {
                                if (o += s + "Value: ", n.type === t.Type.OID) {
                                    var p = t.derToOid(n.value);
                                    o += p,
                                    e.pki && e.pki.oids && p in e.pki.oids && (o += " (" + e.pki.oids[p] + ") ")
                                }
                                if (n.type === t.Type.INTEGER) try {
                                    o += t.derToInteger(n.value)
                                } catch(u) {
                                    o += "0x" + e.util.bytesToHex(n.value)
                                } else n.type === t.Type.OCTETSTRING ? (i.test(n.value) || (o += "(" + n.value + ") "), o += "0x" + e.util.bytesToHex(n.value)) : o += n.type === t.Type.UTF8 ? e.util.decodeUtf8(n.value) : n.type === t.Type.PRINTABLESTRING || n.type === t.Type.IA5String ? n.value: i.test(n.value) ? "0x" + e.util.bytesToHex(n.value) : 0 === n.value.length ? "[null]": n.value
                            }
                            return o
                        }
                    }
                    var i = "asn1";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/asn1", ["require", "module", "./util", "./oids"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t() {
                            r = String.fromCharCode(128),
                                r += e.util.fillString(String.fromCharCode(0), 64),
                                a = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 1, 6, 11, 0, 5, 10, 15, 4, 9, 14, 3, 8, 13, 2, 7, 12, 5, 8, 11, 14, 1, 4, 7, 10, 13, 0, 3, 6, 9, 12, 15, 2, 0, 7, 14, 5, 12, 3, 10, 1, 8, 15, 6, 13, 4, 11, 2, 9],
                                o = [7, 12, 17, 22, 7, 12, 17, 22, 7, 12, 17, 22, 7, 12, 17, 22, 5, 9, 14, 20, 5, 9, 14, 20, 5, 9, 14, 20, 5, 9, 14, 20, 4, 11, 16, 23, 4, 11, 16, 23, 4, 11, 16, 23, 4, 11, 16, 23, 6, 10, 15, 21, 6, 10, 15, 21, 6, 10, 15, 21, 6, 10, 15, 21],
                                s = new Array(64);
                            for (var t = 0; 64 > t; ++t) s[t] = Math.floor(4294967296 * Math.abs(Math.sin(t + 1)));
                            c = !0
                        }
                        function n(e, t, n) {
                            for (var i, r, c, l, d, p, u, f, h = n.length(); h >= 64;) {
                                for (r = e.h0, c = e.h1, l = e.h2, d = e.h3, f = 0; 16 > f; ++f) t[f] = n.getInt32Le(),
                                    p = d ^ c & (l ^ d),
                                    i = r + p + s[f] + t[f],
                                    u = o[f],
                                    r = d,
                                    d = l,
                                    l = c,
                                    c += i << u | i >>> 32 - u;
                                for (; 32 > f; ++f) p = l ^ d & (c ^ l),
                                    i = r + p + s[f] + t[a[f]],
                                    u = o[f],
                                    r = d,
                                    d = l,
                                    l = c,
                                    c += i << u | i >>> 32 - u;
                                for (; 48 > f; ++f) p = c ^ l ^ d,
                                    i = r + p + s[f] + t[a[f]],
                                    u = o[f],
                                    r = d,
                                    d = l,
                                    l = c,
                                    c += i << u | i >>> 32 - u;
                                for (; 64 > f; ++f) p = l ^ (c | ~d),
                                    i = r + p + s[f] + t[a[f]],
                                    u = o[f],
                                    r = d,
                                    d = l,
                                    l = c,
                                    c += i << u | i >>> 32 - u;
                                e.h0 = e.h0 + r | 0,
                                    e.h1 = e.h1 + c | 0,
                                    e.h2 = e.h2 + l | 0,
                                    e.h3 = e.h3 + d | 0,
                                    h -= 64
                            }
                        }
                        var i = e.md5 = e.md5 || {};
                        e.md = e.md || {},
                            e.md.algorithms = e.md.algorithms || {},
                            e.md.md5 = e.md.algorithms.md5 = i,
                            i.create = function() {
                                c || t();
                                var i = null,
                                    a = e.util.createBuffer(),
                                    o = new Array(16),
                                    s = {
                                        algorithm: "md5",
                                        blockLength: 64,
                                        digestLength: 16,
                                        messageLength: 0,
                                        fullMessageLength: null,
                                        messageLengthSize: 8
                                    };
                                return s.start = function() {
                                    s.messageLength = 0,
                                        s.fullMessageLength = s.messageLength64 = [];
                                    for (var t = s.messageLengthSize / 4,
                                             n = 0; t > n; ++n) s.fullMessageLength.push(0);
                                    return a = e.util.createBuffer(),
                                        i = {
                                            h0: 1732584193,
                                            h1: 4023233417,
                                            h2: 2562383102,
                                            h3: 271733878
                                        },
                                        s
                                },
                                    s.start(),
                                    s.update = function(t, r) {
                                        "utf8" === r && (t = e.util.encodeUtf8(t));
                                        var c = t.length;
                                        s.messageLength += c,
                                            c = [c / 4294967296 >>> 0, c >>> 0];
                                        for (var l = s.fullMessageLength.length - 1; l >= 0; --l) s.fullMessageLength[l] += c[1],
                                            c[1] = c[0] + (s.fullMessageLength[l] / 4294967296 >>> 0),
                                            s.fullMessageLength[l] = s.fullMessageLength[l] >>> 0,
                                            c[0] = c[1] / 4294967296 >>> 0;
                                        return a.putBytes(t),
                                            n(i, o, a),
                                        (a.read > 2048 || 0 === a.length()) && a.compact(),
                                            s
                                    },
                                    s.digest = function() {
                                        var t = e.util.createBuffer();
                                        t.putBytes(a.bytes());
                                        var c = s.fullMessageLength[s.fullMessageLength.length - 1] + s.messageLengthSize,
                                            l = c & s.blockLength - 1;
                                        t.putBytes(r.substr(0, s.blockLength - l));
                                        for (var d, p = 0,
                                                 u = s.fullMessageLength.length - 1; u >= 0; --u) d = 8 * s.fullMessageLength[u] + p,
                                            p = d / 4294967296 >>> 0,
                                            t.putInt32Le(d >>> 0);
                                        var f = {
                                            h0: i.h0,
                                            h1: i.h1,
                                            h2: i.h2,
                                            h3: i.h3
                                        };
                                        n(f, o, t);
                                        var h = e.util.createBuffer();
                                        return h.putInt32Le(f.h0),
                                            h.putInt32Le(f.h1),
                                            h.putInt32Le(f.h2),
                                            h.putInt32Le(f.h3),
                                            h
                                    },
                                    s
                            };
                        var r = null,
                            a = null,
                            o = null,
                            s = null,
                            c = !1
                    }
                    var i = "md5";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/md5", ["require", "module", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t() {
                            r = String.fromCharCode(128),
                                r += e.util.fillString(String.fromCharCode(0), 64),
                                a = !0
                        }
                        function n(e, t, n) {
                            for (var i, r, a, o, s, c, l, d, p = n.length(); p >= 64;) {
                                for (r = e.h0, a = e.h1, o = e.h2, s = e.h3, c = e.h4, d = 0; 16 > d; ++d) i = n.getInt32(),
                                    t[d] = i,
                                    l = s ^ a & (o ^ s),
                                    i = (r << 5 | r >>> 27) + l + c + 1518500249 + i,
                                    c = s,
                                    s = o,
                                    o = a << 30 | a >>> 2,
                                    a = r,
                                    r = i;
                                for (; 20 > d; ++d) i = t[d - 3] ^ t[d - 8] ^ t[d - 14] ^ t[d - 16],
                                    i = i << 1 | i >>> 31,
                                    t[d] = i,
                                    l = s ^ a & (o ^ s),
                                    i = (r << 5 | r >>> 27) + l + c + 1518500249 + i,
                                    c = s,
                                    s = o,
                                    o = a << 30 | a >>> 2,
                                    a = r,
                                    r = i;
                                for (; 32 > d; ++d) i = t[d - 3] ^ t[d - 8] ^ t[d - 14] ^ t[d - 16],
                                    i = i << 1 | i >>> 31,
                                    t[d] = i,
                                    l = a ^ o ^ s,
                                    i = (r << 5 | r >>> 27) + l + c + 1859775393 + i,
                                    c = s,
                                    s = o,
                                    o = a << 30 | a >>> 2,
                                    a = r,
                                    r = i;
                                for (; 40 > d; ++d) i = t[d - 6] ^ t[d - 16] ^ t[d - 28] ^ t[d - 32],
                                    i = i << 2 | i >>> 30,
                                    t[d] = i,
                                    l = a ^ o ^ s,
                                    i = (r << 5 | r >>> 27) + l + c + 1859775393 + i,
                                    c = s,
                                    s = o,
                                    o = a << 30 | a >>> 2,
                                    a = r,
                                    r = i;
                                for (; 60 > d; ++d) i = t[d - 6] ^ t[d - 16] ^ t[d - 28] ^ t[d - 32],
                                    i = i << 2 | i >>> 30,
                                    t[d] = i,
                                    l = a & o | s & (a ^ o),
                                    i = (r << 5 | r >>> 27) + l + c + 2400959708 + i,
                                    c = s,
                                    s = o,
                                    o = a << 30 | a >>> 2,
                                    a = r,
                                    r = i;
                                for (; 80 > d; ++d) i = t[d - 6] ^ t[d - 16] ^ t[d - 28] ^ t[d - 32],
                                    i = i << 2 | i >>> 30,
                                    t[d] = i,
                                    l = a ^ o ^ s,
                                    i = (r << 5 | r >>> 27) + l + c + 3395469782 + i,
                                    c = s,
                                    s = o,
                                    o = a << 30 | a >>> 2,
                                    a = r,
                                    r = i;
                                e.h0 = e.h0 + r | 0,
                                    e.h1 = e.h1 + a | 0,
                                    e.h2 = e.h2 + o | 0,
                                    e.h3 = e.h3 + s | 0,
                                    e.h4 = e.h4 + c | 0,
                                    p -= 64
                            }
                        }
                        var i = e.sha1 = e.sha1 || {};
                        e.md = e.md || {},
                            e.md.algorithms = e.md.algorithms || {},
                            e.md.sha1 = e.md.algorithms.sha1 = i,
                            i.create = function() {
                                a || t();
                                var i = null,
                                    o = e.util.createBuffer(),
                                    s = new Array(80),
                                    c = {
                                        algorithm: "sha1",
                                        blockLength: 64,
                                        digestLength: 20,
                                        messageLength: 0,
                                        fullMessageLength: null,
                                        messageLengthSize: 8
                                    };
                                return c.start = function() {
                                    c.messageLength = 0,
                                        c.fullMessageLength = c.messageLength64 = [];
                                    for (var t = c.messageLengthSize / 4,
                                             n = 0; t > n; ++n) c.fullMessageLength.push(0);
                                    return o = e.util.createBuffer(),
                                        i = {
                                            h0: 1732584193,
                                            h1: 4023233417,
                                            h2: 2562383102,
                                            h3: 271733878,
                                            h4: 3285377520
                                        },
                                        c
                                },
                                    c.start(),
                                    c.update = function(t, r) {
                                        "utf8" === r && (t = e.util.encodeUtf8(t));
                                        var a = t.length;
                                        c.messageLength += a,
                                            a = [a / 4294967296 >>> 0, a >>> 0];
                                        for (var l = c.fullMessageLength.length - 1; l >= 0; --l) c.fullMessageLength[l] += a[1],
                                            a[1] = a[0] + (c.fullMessageLength[l] / 4294967296 >>> 0),
                                            c.fullMessageLength[l] = c.fullMessageLength[l] >>> 0,
                                            a[0] = a[1] / 4294967296 >>> 0;
                                        return o.putBytes(t),
                                            n(i, s, o),
                                        (o.read > 2048 || 0 === o.length()) && o.compact(),
                                            c
                                    },
                                    c.digest = function() {
                                        var t = e.util.createBuffer();
                                        t.putBytes(o.bytes());
                                        var a = c.fullMessageLength[c.fullMessageLength.length - 1] + c.messageLengthSize,
                                            l = a & c.blockLength - 1;
                                        t.putBytes(r.substr(0, c.blockLength - l));
                                        for (var d, p, u = (e.util.createBuffer(), 8 * c.fullMessageLength[0]), f = 0; f < c.fullMessageLength.length; ++f) d = 8 * c.fullMessageLength[f + 1],
                                            p = d / 4294967296 >>> 0,
                                            u += p,
                                            t.putInt32(u >>> 0),
                                            u = d;
                                        var h = {
                                            h0: i.h0,
                                            h1: i.h1,
                                            h2: i.h2,
                                            h3: i.h3,
                                            h4: i.h4
                                        };
                                        n(h, s, t);
                                        var g = e.util.createBuffer();
                                        return g.putInt32(h.h0),
                                            g.putInt32(h.h1),
                                            g.putInt32(h.h2),
                                            g.putInt32(h.h3),
                                            g.putInt32(h.h4),
                                            g
                                    },
                                    c
                            };
                        var r = null,
                            a = !1
                    }
                    var i = "sha1";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/sha1", ["require", "module", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t() {
                            r = String.fromCharCode(128),
                                r += e.util.fillString(String.fromCharCode(0), 64),
                                o = [1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993, 2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987, 1925078388, 2162078206, 2614888103, 3248222580, 3835390401, 4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, 2554220882, 2821834349, 2952996808, 3210313671, 3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051, 2177026350, 2456956037, 2730485921, 2820302411, 3259730800, 3345764771, 3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222, 2024104815, 2227730452, 2361852424, 2428436474, 2756734187, 3204031479, 3329325298],
                                a = !0
                        }
                        function n(e, t, n) {
                            for (var i, r, a, s, c, l, d, p, u, f, h, g, m, y, v, C = n.length(); C >= 64;) {
                                for (d = 0; 16 > d; ++d) t[d] = n.getInt32();
                                for (; 64 > d; ++d) i = t[d - 2],
                                    i = (i >>> 17 | i << 15) ^ (i >>> 19 | i << 13) ^ i >>> 10,
                                    r = t[d - 15],
                                    r = (r >>> 7 | r << 25) ^ (r >>> 18 | r << 14) ^ r >>> 3,
                                    t[d] = i + t[d - 7] + r + t[d - 16] | 0;
                                for (p = e.h0, u = e.h1, f = e.h2, h = e.h3, g = e.h4, m = e.h5, y = e.h6, v = e.h7, d = 0; 64 > d; ++d) s = (g >>> 6 | g << 26) ^ (g >>> 11 | g << 21) ^ (g >>> 25 | g << 7),
                                    c = y ^ g & (m ^ y),
                                    a = (p >>> 2 | p << 30) ^ (p >>> 13 | p << 19) ^ (p >>> 22 | p << 10),
                                    l = p & u | f & (p ^ u),
                                    i = v + s + c + o[d] + t[d],
                                    r = a + l,
                                    v = y,
                                    y = m,
                                    m = g,
                                    g = h + i | 0,
                                    h = f,
                                    f = u,
                                    u = p,
                                    p = i + r | 0;
                                e.h0 = e.h0 + p | 0,
                                    e.h1 = e.h1 + u | 0,
                                    e.h2 = e.h2 + f | 0,
                                    e.h3 = e.h3 + h | 0,
                                    e.h4 = e.h4 + g | 0,
                                    e.h5 = e.h5 + m | 0,
                                    e.h6 = e.h6 + y | 0,
                                    e.h7 = e.h7 + v | 0,
                                    C -= 64
                            }
                        }
                        var i = e.sha256 = e.sha256 || {};
                        e.md = e.md || {},
                            e.md.algorithms = e.md.algorithms || {},
                            e.md.sha256 = e.md.algorithms.sha256 = i,
                            i.create = function() {
                                a || t();
                                var i = null,
                                    o = e.util.createBuffer(),
                                    s = new Array(64),
                                    c = {
                                        algorithm: "sha256",
                                        blockLength: 64,
                                        digestLength: 32,
                                        messageLength: 0,
                                        fullMessageLength: null,
                                        messageLengthSize: 8
                                    };
                                return c.start = function() {
                                    c.messageLength = 0,
                                        c.fullMessageLength = c.messageLength64 = [];
                                    for (var t = c.messageLengthSize / 4,
                                             n = 0; t > n; ++n) c.fullMessageLength.push(0);
                                    return o = e.util.createBuffer(),
                                        i = {
                                            h0: 1779033703,
                                            h1: 3144134277,
                                            h2: 1013904242,
                                            h3: 2773480762,
                                            h4: 1359893119,
                                            h5: 2600822924,
                                            h6: 528734635,
                                            h7: 1541459225
                                        },
                                        c
                                },
                                    c.start(),
                                    c.update = function(t, r) {
                                        "utf8" === r && (t = e.util.encodeUtf8(t));
                                        var a = t.length;
                                        c.messageLength += a,
                                            a = [a / 4294967296 >>> 0, a >>> 0];
                                        for (var l = c.fullMessageLength.length - 1; l >= 0; --l) c.fullMessageLength[l] += a[1],
                                            a[1] = a[0] + (c.fullMessageLength[l] / 4294967296 >>> 0),
                                            c.fullMessageLength[l] = c.fullMessageLength[l] >>> 0,
                                            a[0] = a[1] / 4294967296 >>> 0;
                                        return o.putBytes(t),
                                            n(i, s, o),
                                        (o.read > 2048 || 0 === o.length()) && o.compact(),
                                            c
                                    },
                                    c.digest = function() {
                                        var t = e.util.createBuffer();
                                        t.putBytes(o.bytes());
                                        var a = c.fullMessageLength[c.fullMessageLength.length - 1] + c.messageLengthSize,
                                            l = a & c.blockLength - 1;
                                        t.putBytes(r.substr(0, c.blockLength - l));
                                        for (var d, p, u = (e.util.createBuffer(), 8 * c.fullMessageLength[0]), f = 0; f < c.fullMessageLength.length; ++f) d = 8 * c.fullMessageLength[f + 1],
                                            p = d / 4294967296 >>> 0,
                                            u += p,
                                            t.putInt32(u >>> 0),
                                            u = d;
                                        var h = {
                                            h0: i.h0,
                                            h1: i.h1,
                                            h2: i.h2,
                                            h3: i.h3,
                                            h4: i.h4,
                                            h5: i.h5,
                                            h6: i.h6,
                                            h7: i.h7
                                        };
                                        n(h, s, t);
                                        var g = e.util.createBuffer();
                                        return g.putInt32(h.h0),
                                            g.putInt32(h.h1),
                                            g.putInt32(h.h2),
                                            g.putInt32(h.h3),
                                            g.putInt32(h.h4),
                                            g.putInt32(h.h5),
                                            g.putInt32(h.h6),
                                            g.putInt32(h.h7),
                                            g
                                    },
                                    c
                            };
                        var r = null,
                            a = !1,
                            o = null
                    }
                    var i = "sha256";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/sha256", ["require", "module", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t() {
                            a = String.fromCharCode(128),
                                a += e.util.fillString(String.fromCharCode(0), 128),
                                s = [[1116352408, 3609767458], [1899447441, 602891725], [3049323471, 3964484399], [3921009573, 2173295548], [961987163, 4081628472], [1508970993, 3053834265], [2453635748, 2937671579], [2870763221, 3664609560], [3624381080, 2734883394], [310598401, 1164996542], [607225278, 1323610764], [1426881987, 3590304994], [1925078388, 4068182383], [2162078206, 991336113], [2614888103, 633803317], [3248222580, 3479774868], [3835390401, 2666613458], [4022224774, 944711139], [264347078, 2341262773], [604807628, 2007800933], [770255983, 1495990901], [1249150122, 1856431235], [1555081692, 3175218132], [1996064986, 2198950837], [2554220882, 3999719339], [2821834349, 766784016], [2952996808, 2566594879], [3210313671, 3203337956], [3336571891, 1034457026], [3584528711, 2466948901], [113926993, 3758326383], [338241895, 168717936], [666307205, 1188179964], [773529912, 1546045734], [1294757372, 1522805485], [1396182291, 2643833823], [1695183700, 2343527390], [1986661051, 1014477480], [2177026350, 1206759142], [2456956037, 344077627], [2730485921, 1290863460], [2820302411, 3158454273], [3259730800, 3505952657], [3345764771, 106217008], [3516065817, 3606008344], [3600352804, 1432725776], [4094571909, 1467031594], [275423344, 851169720], [430227734, 3100823752], [506948616, 1363258195], [659060556, 3750685593], [883997877, 3785050280], [958139571, 3318307427], [1322822218, 3812723403], [1537002063, 2003034995], [1747873779, 3602036899], [1955562222, 1575990012], [2024104815, 1125592928], [2227730452, 2716904306], [2361852424, 442776044], [2428436474, 593698344], [2756734187, 3733110249], [3204031479, 2999351573], [3329325298, 3815920427], [3391569614, 3928383900], [3515267271, 566280711], [3940187606, 3454069534], [4118630271, 4000239992], [116418474, 1914138554], [174292421, 2731055270], [289380356, 3203993006], [460393269, 320620315], [685471733, 587496836], [852142971, 1086792851], [1017036298, 365543100], [1126000580, 2618297676], [1288033470, 3409855158], [1501505948, 4234509866], [1607167915, 987167468], [1816402316, 1246189591]],
                                c = {},
                                c["SHA-512"] = [[1779033703, 4089235720], [3144134277, 2227873595], [1013904242, 4271175723], [2773480762, 1595750129], [1359893119, 2917565137], [2600822924, 725511199], [528734635, 4215389547], [1541459225, 327033209]],
                                c["SHA-384"] = [[3418070365, 3238371032], [1654270250, 914150663], [2438529370, 812702999], [355462360, 4144912697], [1731405415, 4290775857], [2394180231, 1750603025], [3675008525, 1694076839], [1203062813, 3204075428]],
                                c["SHA-512/256"] = [[573645204, 4230739756], [2673172387, 3360449730], [596883563, 1867755857], [2520282905, 1497426621], [2519219938, 2827943907], [3193839141, 1401305490], [721525244, 746961066], [246885852, 2177182882]],
                                c["SHA-512/224"] = [[2352822216, 424955298], [1944164710, 2312950998], [502970286, 855612546], [1738396948, 1479516111], [258812777, 2077511080], [2011393907, 79989058], [1067287976, 1780299464], [286451373, 2446758561]],
                                o = !0
                        }
                        function n(e, t, n) {
                            for (var i, r, a, o, c, l, d, p, u, f, h, g, m, y, v, C, S, _, b, E, I, A, T, k, w, $, P, N, D, R, B, O, U, L, M, x = n.length(); x >= 128;) {
                                for (D = 0; 16 > D; ++D) t[D][0] = n.getInt32() >>> 0,
                                    t[D][1] = n.getInt32() >>> 0;
                                for (; 80 > D; ++D) O = t[D - 2],
                                    R = O[0],
                                    B = O[1],
                                    i = ((R >>> 19 | B << 13) ^ (B >>> 29 | R << 3) ^ R >>> 6) >>> 0,
                                    r = ((R << 13 | B >>> 19) ^ (B << 3 | R >>> 29) ^ (R << 26 | B >>> 6)) >>> 0,
                                    L = t[D - 15],
                                    R = L[0],
                                    B = L[1],
                                    a = ((R >>> 1 | B << 31) ^ (R >>> 8 | B << 24) ^ R >>> 7) >>> 0,
                                    o = ((R << 31 | B >>> 1) ^ (R << 24 | B >>> 8) ^ (R << 25 | B >>> 7)) >>> 0,
                                    U = t[D - 7],
                                    M = t[D - 16],
                                    B = r + U[1] + o + M[1],
                                    t[D][0] = i + U[0] + a + M[0] + (B / 4294967296 >>> 0) >>> 0,
                                    t[D][1] = B >>> 0;
                                for (m = e[0][0], y = e[0][1], v = e[1][0], C = e[1][1], S = e[2][0], _ = e[2][1], b = e[3][0], E = e[3][1], I = e[4][0], A = e[4][1], T = e[5][0], k = e[5][1], w = e[6][0], $ = e[6][1], P = e[7][0], N = e[7][1], D = 0; 80 > D; ++D) d = ((I >>> 14 | A << 18) ^ (I >>> 18 | A << 14) ^ (A >>> 9 | I << 23)) >>> 0,
                                    p = ((I << 18 | A >>> 14) ^ (I << 14 | A >>> 18) ^ (A << 23 | I >>> 9)) >>> 0,
                                    u = (w ^ I & (T ^ w)) >>> 0,
                                    f = ($ ^ A & (k ^ $)) >>> 0,
                                    c = ((m >>> 28 | y << 4) ^ (y >>> 2 | m << 30) ^ (y >>> 7 | m << 25)) >>> 0,
                                    l = ((m << 4 | y >>> 28) ^ (y << 30 | m >>> 2) ^ (y << 25 | m >>> 7)) >>> 0,
                                    h = (m & v | S & (m ^ v)) >>> 0,
                                    g = (y & C | _ & (y ^ C)) >>> 0,
                                    B = N + p + f + s[D][1] + t[D][1],
                                    i = P + d + u + s[D][0] + t[D][0] + (B / 4294967296 >>> 0) >>> 0,
                                    r = B >>> 0,
                                    B = l + g,
                                    a = c + h + (B / 4294967296 >>> 0) >>> 0,
                                    o = B >>> 0,
                                    P = w,
                                    N = $,
                                    w = T,
                                    $ = k,
                                    T = I,
                                    k = A,
                                    B = E + r,
                                    I = b + i + (B / 4294967296 >>> 0) >>> 0,
                                    A = B >>> 0,
                                    b = S,
                                    E = _,
                                    S = v,
                                    _ = C,
                                    v = m,
                                    C = y,
                                    B = r + o,
                                    m = i + a + (B / 4294967296 >>> 0) >>> 0,
                                    y = B >>> 0;
                                B = e[0][1] + y,
                                    e[0][0] = e[0][0] + m + (B / 4294967296 >>> 0) >>> 0,
                                    e[0][1] = B >>> 0,
                                    B = e[1][1] + C,
                                    e[1][0] = e[1][0] + v + (B / 4294967296 >>> 0) >>> 0,
                                    e[1][1] = B >>> 0,
                                    B = e[2][1] + _,
                                    e[2][0] = e[2][0] + S + (B / 4294967296 >>> 0) >>> 0,
                                    e[2][1] = B >>> 0,
                                    B = e[3][1] + E,
                                    e[3][0] = e[3][0] + b + (B / 4294967296 >>> 0) >>> 0,
                                    e[3][1] = B >>> 0,
                                    B = e[4][1] + A,
                                    e[4][0] = e[4][0] + I + (B / 4294967296 >>> 0) >>> 0,
                                    e[4][1] = B >>> 0,
                                    B = e[5][1] + k,
                                    e[5][0] = e[5][0] + T + (B / 4294967296 >>> 0) >>> 0,
                                    e[5][1] = B >>> 0,
                                    B = e[6][1] + $,
                                    e[6][0] = e[6][0] + w + (B / 4294967296 >>> 0) >>> 0,
                                    e[6][1] = B >>> 0,
                                    B = e[7][1] + N,
                                    e[7][0] = e[7][0] + P + (B / 4294967296 >>> 0) >>> 0,
                                    e[7][1] = B >>> 0,
                                    x -= 128
                            }
                        }
                        var i = e.sha512 = e.sha512 || {};
                        e.md = e.md || {},
                            e.md.algorithms = e.md.algorithms || {},
                            e.md.sha512 = e.md.algorithms.sha512 = i;
                        var r = e.sha384 = e.sha512.sha384 = e.sha512.sha384 || {};
                        r.create = function() {
                            return i.create("SHA-384")
                        },
                            e.md.sha384 = e.md.algorithms.sha384 = r,
                            e.sha512.sha256 = e.sha512.sha256 || {
                                create: function() {
                                    return i.create("SHA-512/256")
                                }
                            },
                            e.md["sha512/256"] = e.md.algorithms["sha512/256"] = e.sha512.sha256,
                            e.sha512.sha224 = e.sha512.sha224 || {
                                create: function() {
                                    return i.create("SHA-512/224")
                                }
                            },
                            e.md["sha512/224"] = e.md.algorithms["sha512/224"] = e.sha512.sha224,
                            i.create = function(i) {
                                if (o || t(), "undefined" == typeof i && (i = "SHA-512"), i in c) {
                                    for (var r = c[i], s = null, l = e.util.createBuffer(), d = new Array(80), p = 0; 80 > p; ++p) d[p] = new Array(2);
                                    var u = {
                                        algorithm: i.replace("-", "").toLowerCase(),
                                        blockLength: 128,
                                        digestLength: 64,
                                        messageLength: 0,
                                        fullMessageLength: null,
                                        messageLengthSize: 16
                                    };
                                    return u.start = function() {
                                        u.messageLength = 0,
                                            u.fullMessageLength = u.messageLength128 = [];
                                        for (var t = u.messageLengthSize / 4,
                                                 n = 0; t > n; ++n) u.fullMessageLength.push(0);
                                        l = e.util.createBuffer(),
                                            s = new Array(r.length);
                                        for (var n = 0; n < r.length; ++n) s[n] = r[n].slice(0);
                                        return u
                                    },
                                        u.start(),
                                        u.update = function(t, i) {
                                            "utf8" === i && (t = e.util.encodeUtf8(t));
                                            var r = t.length;
                                            u.messageLength += r,
                                                r = [r / 4294967296 >>> 0, r >>> 0];
                                            for (var a = u.fullMessageLength.length - 1; a >= 0; --a) u.fullMessageLength[a] += r[1],
                                                r[1] = r[0] + (u.fullMessageLength[a] / 4294967296 >>> 0),
                                                u.fullMessageLength[a] = u.fullMessageLength[a] >>> 0,
                                                r[0] = r[1] / 4294967296 >>> 0;
                                            return l.putBytes(t),
                                                n(s, d, l),
                                            (l.read > 2048 || 0 === l.length()) && l.compact(),
                                                u
                                        },
                                        u.digest = function() {
                                            var t = e.util.createBuffer();
                                            t.putBytes(l.bytes());
                                            var r = u.fullMessageLength[u.fullMessageLength.length - 1] + u.messageLengthSize,
                                                o = r & u.blockLength - 1;
                                            t.putBytes(a.substr(0, u.blockLength - o));
                                            for (var c, p, f = (e.util.createBuffer(), 8 * u.fullMessageLength[0]), h = 0; h < u.fullMessageLength.length; ++h) c = 8 * u.fullMessageLength[h + 1],
                                                p = c / 4294967296 >>> 0,
                                                f += p,
                                                t.putInt32(f >>> 0),
                                                f = c;
                                            for (var g = new Array(s.length), h = 0; h < s.length; ++h) g[h] = s[h].slice(0);
                                            n(g, d, t);
                                            var m, y = e.util.createBuffer();
                                            m = "SHA-512" === i ? g.length: "SHA-384" === i ? g.length - 2 : g.length - 4;
                                            for (var h = 0; m > h; ++h) y.putInt32(g[h][0]),
                                            (h !== m - 1 || "SHA-512/224" !== i) && y.putInt32(g[h][1]);
                                            return y
                                        },
                                        u
                                }
                                throw new Error("Invalid SHA-512 algorithm: " + i)
                            };
                        var a = null,
                            o = !1,
                            s = null,
                            c = null
                    }
                    var i = "sha512";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/sha512", ["require", "module", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        e.md = e.md || {},
                            e.md.algorithms = {
                                md5: e.md5,
                                sha1: e.sha1,
                                sha256: e.sha256
                            },
                            e.md.md5 = e.md5,
                            e.md.sha1 = e.sha1,
                            e.md.sha256 = e.sha256
                    }
                    var i = "md";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/md", ["require", "module", "./md5", "./sha1", "./sha256", "./sha512"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        var t = e.hmac = e.hmac || {};
                        t.create = function() {
                            var t = null,
                                n = null,
                                i = null,
                                r = null,
                                a = {};
                            return a.start = function(a, o) {
                                if (null !== a) if ("string" == typeof a) {
                                    if (a = a.toLowerCase(), !(a in e.md.algorithms)) throw new Error('Unknown hash algorithm "' + a + '"');
                                    n = e.md.algorithms[a].create()
                                } else n = a;
                                if (null === o) o = t;
                                else {
                                    if ("string" == typeof o) o = e.util.createBuffer(o);
                                    else if (e.util.isArray(o)) {
                                        var s = o;
                                        o = e.util.createBuffer();
                                        for (var c = 0; c < s.length; ++c) o.putByte(s[c])
                                    }
                                    var l = o.length();
                                    l > n.blockLength && (n.start(), n.update(o.bytes()), o = n.digest()),
                                        i = e.util.createBuffer(),
                                        r = e.util.createBuffer(),
                                        l = o.length();
                                    for (var c = 0; l > c; ++c) {
                                        var s = o.at(c);
                                        i.putByte(54 ^ s),
                                            r.putByte(92 ^ s)
                                    }
                                    if (l < n.blockLength) for (var s = n.blockLength - l,
                                                                    c = 0; s > c; ++c) i.putByte(54),
                                        r.putByte(92);
                                    t = o,
                                        i = i.bytes(),
                                        r = r.bytes()
                                }
                                n.start(),
                                    n.update(i)
                            },
                                a.update = function(e) {
                                    n.update(e)
                                },
                                a.getMac = function() {
                                    var e = n.digest().bytes();
                                    return n.start(),
                                        n.update(r),
                                        n.update(e),
                                        n.digest()
                                },
                                a.digest = a.getMac,
                                a
                        }
                    }
                    var i = "hmac";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/hmac", ["require", "module", "./md", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(e) {
                            for (var t = e.name + ": ",
                                     n = [], i = function(e, t) {
                                    return " " + t
                                },
                                     r = 0; r < e.values.length; ++r) n.push(e.values[r].replace(/^(\S+\r\n)/, i));
                            t += n.join(",") + "\r\n";
                            for (var a = 0,
                                     o = -1,
                                     r = 0; r < t.length; ++r, ++a) if (a > 65 && -1 !== o) {
                                var s = t[o];
                                "," === s ? (++o, t = t.substr(0, o) + "\r\n " + t.substr(o)) : t = t.substr(0, o) + "\r\n" + s + t.substr(o + 1),
                                    a = r - o - 1,
                                    o = -1,
                                    ++r
                            } else(" " === t[r] || "	" === t[r] || "," === t[r]) && (o = r);
                            return t
                        }
                        function n(e) {
                            return e.replace(/^\s+/, "")
                        }
                        var i = e.pem = e.pem || {};
                        i.encode = function(n, i) {
                            i = i || {};
                            var r, a = "-----BEGIN " + n.type + "-----\r\n";
                            if (n.procType && (r = {
                                    name: "Proc-Type",
                                    values: [String(n.procType.version), n.procType.type]
                                },
                                    a += t(r)), n.contentDomain && (r = {
                                    name: "Content-Domain",
                                    values: [n.contentDomain]
                                },
                                    a += t(r)), n.dekInfo && (r = {
                                    name: "DEK-Info",
                                    values: [n.dekInfo.algorithm]
                                },
                                n.dekInfo.parameters && r.values.push(n.dekInfo.parameters), a += t(r)), n.headers) for (var o = 0; o < n.headers.length; ++o) a += t(n.headers[o]);
                            return n.procType && (a += "\r\n"),
                                a += e.util.encode64(n.body, i.maxline || 64) + "\r\n",
                                a += "-----END " + n.type + "-----\r\n"
                        },
                            i.decode = function(t) {
                                for (var i, r = [], a = /\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g, o = /([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/, s = /\r?\n/; i = a.exec(t), i;) {
                                    var c = {
                                        type: i[1],
                                        procType: null,
                                        contentDomain: null,
                                        dekInfo: null,
                                        headers: [],
                                        body: e.util.decode64(i[3])
                                    };
                                    if (r.push(c), i[2]) {
                                        for (var l = i[2].split(s), d = 0; i && d < l.length;) {
                                            for (var p = l[d].replace(/\s+$/, ""), u = d + 1; u < l.length; ++u) {
                                                var f = l[u];
                                                if (!/\s/.test(f[0])) break;
                                                p += f,
                                                    d = u
                                            }
                                            if (i = p.match(o)) {
                                                for (var h = {
                                                        name: i[1],
                                                        values: []
                                                    },
                                                         g = i[2].split(","), m = 0; m < g.length; ++m) h.values.push(n(g[m]));
                                                if (c.procType) if (c.contentDomain || "Content-Domain" !== h.name) if (c.dekInfo || "DEK-Info" !== h.name) c.headers.push(h);
                                                else {
                                                    if (0 === h.values.length) throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');
                                                    c.dekInfo = {
                                                        algorithm: g[0],
                                                        parameters: g[1] || null
                                                    }
                                                } else c.contentDomain = g[0] || "";
                                                else {
                                                    if ("Proc-Type" !== h.name) throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');
                                                    if (2 !== h.values.length) throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');
                                                    c.procType = {
                                                        version: g[0],
                                                        type: g[1]
                                                    }
                                                }
                                            }++d
                                        }
                                        if ("ENCRYPTED" === c.procType && !c.dekInfo) throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')
                                    }
                                }
                                if (0 === r.length) throw new Error("Invalid PEM formatted message.");
                                return r
                            }
                    }
                    var i = "pem";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/pem", ["require", "module", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(t, n) {
                            var i = function() {
                                return new e.des.Algorithm(t, n)
                            };
                            e.cipher.registerAlgorithm(t, i)
                        }
                        function n(e) {
                            for (var t, n = [0, 4, 536870912, 536870916, 65536, 65540, 536936448, 536936452, 512, 516, 536871424, 536871428, 66048, 66052, 536936960, 536936964], i = [0, 1, 1048576, 1048577, 67108864, 67108865, 68157440, 68157441, 256, 257, 1048832, 1048833, 67109120, 67109121, 68157696, 68157697], r = [0, 8, 2048, 2056, 16777216, 16777224, 16779264, 16779272, 0, 8, 2048, 2056, 16777216, 16777224, 16779264, 16779272], a = [0, 2097152, 134217728, 136314880, 8192, 2105344, 134225920, 136323072, 131072, 2228224, 134348800, 136445952, 139264, 2236416, 134356992, 136454144], o = [0, 262144, 16, 262160, 0, 262144, 16, 262160, 4096, 266240, 4112, 266256, 4096, 266240, 4112, 266256], s = [0, 1024, 32, 1056, 0, 1024, 32, 1056, 33554432, 33555456, 33554464, 33555488, 33554432, 33555456, 33554464, 33555488], c = [0, 268435456, 524288, 268959744, 2, 268435458, 524290, 268959746, 0, 268435456, 524288, 268959744, 2, 268435458, 524290, 268959746], l = [0, 65536, 2048, 67584, 536870912, 536936448, 536872960, 536938496, 131072, 196608, 133120, 198656, 537001984, 537067520, 537004032, 537069568], d = [0, 262144, 0, 262144, 2, 262146, 2, 262146, 33554432, 33816576, 33554432, 33816576, 33554434, 33816578, 33554434, 33816578], p = [0, 268435456, 8, 268435464, 0, 268435456, 8, 268435464, 1024, 268436480, 1032, 268436488, 1024, 268436480, 1032, 268436488], u = [0, 32, 0, 32, 1048576, 1048608, 1048576, 1048608, 8192, 8224, 8192, 8224, 1056768, 1056800, 1056768, 1056800], f = [0, 16777216, 512, 16777728, 2097152, 18874368, 2097664, 18874880, 67108864, 83886080, 67109376, 83886592, 69206016, 85983232, 69206528, 85983744], h = [0, 4096, 134217728, 134221824, 524288, 528384, 134742016, 134746112, 16, 4112, 134217744, 134221840, 524304, 528400, 134742032, 134746128], g = [0, 4, 256, 260, 0, 4, 256, 260, 1, 5, 257, 261, 1, 5, 257, 261], m = e.length() > 8 ? 3 : 1, y = [], v = [0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0], C = 0, S = 0; m > S; S++) {
                                var _ = e.getInt32(),
                                    b = e.getInt32();
                                t = 252645135 & (_ >>> 4 ^ b),
                                    b ^= t,
                                    _ ^= t << 4,
                                    t = 65535 & (b >>> -16 ^ _),
                                    _ ^= t,
                                    b ^= t << -16,
                                    t = 858993459 & (_ >>> 2 ^ b),
                                    b ^= t,
                                    _ ^= t << 2,
                                    t = 65535 & (b >>> -16 ^ _),
                                    _ ^= t,
                                    b ^= t << -16,
                                    t = 1431655765 & (_ >>> 1 ^ b),
                                    b ^= t,
                                    _ ^= t << 1,
                                    t = 16711935 & (b >>> 8 ^ _),
                                    _ ^= t,
                                    b ^= t << 8,
                                    t = 1431655765 & (_ >>> 1 ^ b),
                                    b ^= t,
                                    _ ^= t << 1,
                                    t = _ << 8 | b >>> 20 & 240,
                                    _ = b << 24 | b << 8 & 16711680 | b >>> 8 & 65280 | b >>> 24 & 240,
                                    b = t;
                                for (var E = 0; E < v.length; ++E) {
                                    v[E] ? (_ = _ << 2 | _ >>> 26, b = b << 2 | b >>> 26) : (_ = _ << 1 | _ >>> 27, b = b << 1 | b >>> 27),
                                        _ &= -15,
                                        b &= -15;
                                    var I = n[_ >>> 28] | i[_ >>> 24 & 15] | r[_ >>> 20 & 15] | a[_ >>> 16 & 15] | o[_ >>> 12 & 15] | s[_ >>> 8 & 15] | c[_ >>> 4 & 15],
                                        A = l[b >>> 28] | d[b >>> 24 & 15] | p[b >>> 20 & 15] | u[b >>> 16 & 15] | f[b >>> 12 & 15] | h[b >>> 8 & 15] | g[b >>> 4 & 15];
                                    t = 65535 & (A >>> 16 ^ I),
                                        y[C++] = I ^ t,
                                        y[C++] = A ^ t << 16
                                }
                            }
                            return y
                        }
                        function i(e, t, n, i) {
                            var r, f = 32 === e.length ? 3 : 9;
                            r = 3 === f ? i ? [30, -2, -2] : [0, 32, 2] : i ? [94, 62, -2, 32, 64, 2, 30, -2, -2] : [0, 32, 2, 62, 30, -2, 64, 96, 2];
                            var h, g = t[0],
                                m = t[1];
                            h = 252645135 & (g >>> 4 ^ m),
                                m ^= h,
                                g ^= h << 4,
                                h = 65535 & (g >>> 16 ^ m),
                                m ^= h,
                                g ^= h << 16,
                                h = 858993459 & (m >>> 2 ^ g),
                                g ^= h,
                                m ^= h << 2,
                                h = 16711935 & (m >>> 8 ^ g),
                                g ^= h,
                                m ^= h << 8,
                                h = 1431655765 & (g >>> 1 ^ m),
                                m ^= h,
                                g ^= h << 1,
                                g = g << 1 | g >>> 31,
                                m = m << 1 | m >>> 31;
                            for (var y = 0; f > y; y += 3) {
                                for (var v = r[y + 1], C = r[y + 2], S = r[y]; S != v; S += C) {
                                    var _ = m ^ e[S],
                                        b = (m >>> 4 | m << 28) ^ e[S + 1];
                                    h = g,
                                        g = m,
                                        m = h ^ (o[_ >>> 24 & 63] | c[_ >>> 16 & 63] | d[_ >>> 8 & 63] | u[63 & _] | a[b >>> 24 & 63] | s[b >>> 16 & 63] | l[b >>> 8 & 63] | p[63 & b])
                                }
                                h = g,
                                    g = m,
                                    m = h
                            }
                            g = g >>> 1 | g << 31,
                                m = m >>> 1 | m << 31,
                                h = 1431655765 & (g >>> 1 ^ m),
                                m ^= h,
                                g ^= h << 1,
                                h = 16711935 & (m >>> 8 ^ g),
                                g ^= h,
                                m ^= h << 8,
                                h = 858993459 & (m >>> 2 ^ g),
                                g ^= h,
                                m ^= h << 2,
                                h = 65535 & (g >>> 16 ^ m),
                                m ^= h,
                                g ^= h << 16,
                                h = 252645135 & (g >>> 4 ^ m),
                                m ^= h,
                                g ^= h << 4,
                                n[0] = g,
                                n[1] = m
                        }
                        function r(t) {
                            t = t || {};
                            var n, i = (t.mode || "CBC").toUpperCase(),
                                r = "DES-" + i;
                            n = t.decrypt ? e.cipher.createDecipher(r, t.key) : e.cipher.createCipher(r, t.key);
                            var a = n.start;
                            return n.start = function(t, i) {
                                var r = null;
                                i instanceof e.util.ByteBuffer && (r = i, i = {}),
                                    i = i || {},
                                    i.output = r,
                                    i.iv = t,
                                    a.call(n, i)
                            },
                                n
                        }
                        e.des = e.des || {},
                            e.des.startEncrypting = function(e, t, n, i) {
                                var a = r({
                                    key: e,
                                    output: n,
                                    decrypt: !1,
                                    mode: i || (null === t ? "ECB": "CBC")
                                });
                                return a.start(t),
                                    a
                            },
                            e.des.createEncryptionCipher = function(e, t) {
                                return r({
                                    key: e,
                                    output: null,
                                    decrypt: !1,
                                    mode: t
                                })
                            },
                            e.des.startDecrypting = function(e, t, n, i) {
                                var a = r({
                                    key: e,
                                    output: n,
                                    decrypt: !0,
                                    mode: i || (null === t ? "ECB": "CBC")
                                });
                                return a.start(t),
                                    a
                            },
                            e.des.createDecryptionCipher = function(e, t) {
                                return r({
                                    key: e,
                                    output: null,
                                    decrypt: !0,
                                    mode: t
                                })
                            },
                            e.des.Algorithm = function(e, t) {
                                var n = this;
                                n.name = e,
                                    n.mode = new t({
                                        blockSize: 8,
                                        cipher: {
                                            encrypt: function(e, t) {
                                                return i(n._keys, e, t, !1)
                                            },
                                            decrypt: function(e, t) {
                                                return i(n._keys, e, t, !0)
                                            }
                                        }
                                    }),
                                    n._init = !1
                            },
                            e.des.Algorithm.prototype.initialize = function(t) {
                                if (!this._init) {
                                    var i = e.util.createBuffer(t.key);
                                    if (0 === this.name.indexOf("3DES") && 24 !== i.length()) throw new Error("Invalid Triple-DES key size: " + 8 * i.length());
                                    this._keys = n(i),
                                        this._init = !0
                                }
                            },
                            t("DES-ECB", e.cipher.modes.ecb),
                            t("DES-CBC", e.cipher.modes.cbc),
                            t("DES-CFB", e.cipher.modes.cfb),
                            t("DES-OFB", e.cipher.modes.ofb),
                            t("DES-CTR", e.cipher.modes.ctr),
                            t("3DES-ECB", e.cipher.modes.ecb),
                            t("3DES-CBC", e.cipher.modes.cbc),
                            t("3DES-CFB", e.cipher.modes.cfb),
                            t("3DES-OFB", e.cipher.modes.ofb),
                            t("3DES-CTR", e.cipher.modes.ctr);
                        var a = [16843776, 0, 65536, 16843780, 16842756, 66564, 4, 65536, 1024, 16843776, 16843780, 1024, 16778244, 16842756, 16777216, 4, 1028, 16778240, 16778240, 66560, 66560, 16842752, 16842752, 16778244, 65540, 16777220, 16777220, 65540, 0, 1028, 66564, 16777216, 65536, 16843780, 4, 16842752, 16843776, 16777216, 16777216, 1024, 16842756, 65536, 66560, 16777220, 1024, 4, 16778244, 66564, 16843780, 65540, 16842752, 16778244, 16777220, 1028, 66564, 16843776, 1028, 16778240, 16778240, 0, 65540, 66560, 0, 16842756],
                            o = [ - 2146402272, -2147450880, 32768, 1081376, 1048576, 32, -2146435040, -2147450848, -2147483616, -2146402272, -2146402304, -2147483648, -2147450880, 1048576, 32, -2146435040, 1081344, 1048608, -2147450848, 0, -2147483648, 32768, 1081376, -2146435072, 1048608, -2147483616, 0, 1081344, 32800, -2146402304, -2146435072, 32800, 0, 1081376, -2146435040, 1048576, -2147450848, -2146435072, -2146402304, 32768, -2146435072, -2147450880, 32, -2146402272, 1081376, 32, 32768, -2147483648, 32800, -2146402304, 1048576, -2147483616, 1048608, -2147450848, -2147483616, 1048608, 1081344, 0, -2147450880, 32800, -2147483648, -2146435040, -2146402272, 1081344],
                            s = [520, 134349312, 0, 134348808, 134218240, 0, 131592, 134218240, 131080, 134217736, 134217736, 131072, 134349320, 131080, 134348800, 520, 134217728, 8, 134349312, 512, 131584, 134348800, 134348808, 131592, 134218248, 131584, 131072, 134218248, 8, 134349320, 512, 134217728, 134349312, 134217728, 131080, 520, 131072, 134349312, 134218240, 0, 512, 131080, 134349320, 134218240, 134217736, 512, 0, 134348808, 134218248, 131072, 134217728, 134349320, 8, 131592, 131584, 134217736, 134348800, 134218248, 520, 134348800, 131592, 8, 134348808, 131584],
                            c = [8396801, 8321, 8321, 128, 8396928, 8388737, 8388609, 8193, 0, 8396800, 8396800, 8396929, 129, 0, 8388736, 8388609, 1, 8192, 8388608, 8396801, 128, 8388608, 8193, 8320, 8388737, 1, 8320, 8388736, 8192, 8396928, 8396929, 129, 8388736, 8388609, 8396800, 8396929, 129, 0, 0, 8396800, 8320, 8388736, 8388737, 1, 8396801, 8321, 8321, 128, 8396929, 129, 1, 8192, 8388609, 8193, 8396928, 8388737, 8193, 8320, 8388608, 8396801, 128, 8388608, 8192, 8396928],
                            l = [256, 34078976, 34078720, 1107296512, 524288, 256, 1073741824, 34078720, 1074266368, 524288, 33554688, 1074266368, 1107296512, 1107820544, 524544, 1073741824, 33554432, 1074266112, 1074266112, 0, 1073742080, 1107820800, 1107820800, 33554688, 1107820544, 1073742080, 0, 1107296256, 34078976, 33554432, 1107296256, 524544, 524288, 1107296512, 256, 33554432, 1073741824, 34078720, 1107296512, 1074266368, 33554688, 1073741824, 1107820544, 34078976, 1074266368, 256, 33554432, 1107820544, 1107820800, 524544, 1107296256, 1107820800, 34078720, 0, 1074266112, 1107296256, 524544, 33554688, 1073742080, 524288, 0, 1074266112, 34078976, 1073742080],
                            d = [536870928, 541065216, 16384, 541081616, 541065216, 16, 541081616, 4194304, 536887296, 4210704, 4194304, 536870928, 4194320, 536887296, 536870912, 16400, 0, 4194320, 536887312, 16384, 4210688, 536887312, 16, 541065232, 541065232, 0, 4210704, 541081600, 16400, 4210688, 541081600, 536870912, 536887296, 16, 541065232, 4210688, 541081616, 4194304, 16400, 536870928, 4194304, 536887296, 536870912, 16400, 536870928, 541081616, 4210688, 541065216, 4210704, 541081600, 0, 541065232, 16, 16384, 541065216, 4210704, 16384, 4194320, 536887312, 0, 541081600, 536870912, 4194320, 536887312],
                            p = [2097152, 69206018, 67110914, 0, 2048, 67110914, 2099202, 69208064, 69208066, 2097152, 0, 67108866, 2, 67108864, 69206018, 2050, 67110912, 2099202, 2097154, 67110912, 67108866, 69206016, 69208064, 2097154, 69206016, 2048, 2050, 69208066, 2099200, 2, 67108864, 2099200, 67108864, 2099200, 2097152, 67110914, 67110914, 69206018, 69206018, 2, 2097154, 67108864, 67110912, 2097152, 69208064, 2050, 2099202, 69208064, 2050, 67108866, 69208066, 69206016, 2099200, 0, 2, 69208066, 0, 2099202, 69206016, 2048, 67108866, 67110912, 2048, 2097154],
                            u = [268439616, 4096, 262144, 268701760, 268435456, 268439616, 64, 268435456, 262208, 268697600, 268701760, 266240, 268701696, 266304, 4096, 64, 268697600, 268435520, 268439552, 4160, 266240, 262208, 268697664, 268701696, 4160, 0, 0, 268697664, 268435520, 268439552, 266304, 262144, 266304, 262144, 268701696, 4096, 64, 268697664, 4096, 266304, 268439552, 64, 268435520, 268697600, 268697664, 268435456, 262144, 268439616, 0, 268701760, 262208, 268435520, 268697600, 268439552, 268439616, 0, 268701760, 266240, 266240, 4160, 4160, 262208, 268435456, 268701696]
                    }
                    var i = "des";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/des", ["require", "module", "./cipher", "./cipherModes", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        var n, i = e.pkcs5 = e.pkcs5 || {},
                            r = "undefined" != typeof process && process.versions && process.versions.node;
                        r && !e.disableNativeCode && (n = t("crypto")),
                            e.pbkdf2 = i.pbkdf2 = function(t, i, a, o, s, c) {
                                function l() {
                                    return S > f ? c(null, C) : (g.start(null, null), g.update(i), g.update(e.util.int32ToBytes(S)), m = v = g.digest().getBytes(), _ = 2, d(), void 0)
                                }
                                function d() {
                                    return a >= _ ? (g.start(null, null), g.update(v), y = g.digest().getBytes(), m = e.util.xorBytes(m, y, p), v = y, ++_, e.util.setImmediate(d)) : (C += f > S ? m: m.substr(0, h), ++S, l(), void 0)
                                }
                                if ("function" == typeof s && (c = s, s = null), r && !e.disableNativeCode && n.pbkdf2 && (null === s || "object" != typeof s) && (n.pbkdf2Sync.length > 4 || !s || "sha1" === s)) return "string" != typeof s && (s = "sha1"),
                                    i = new Buffer(i, "binary"),
                                    c ? 4 === n.pbkdf2Sync.length ? n.pbkdf2(t, i, a, o,
                                        function(e, t) {
                                            return e ? c(e) : void c(null, t.toString("binary"))
                                        }) : n.pbkdf2(t, i, a, o, s,
                                        function(e, t) {
                                            return e ? c(e) : void c(null, t.toString("binary"))
                                        }) : 4 === n.pbkdf2Sync.length ? n.pbkdf2Sync(t, i, a, o).toString("binary") : n.pbkdf2Sync(t, i, a, o, s).toString("binary");
                                if (("undefined" == typeof s || null === s) && (s = e.md.sha1.create()), "string" == typeof s) {
                                    if (! (s in e.md.algorithms)) throw new Error("Unknown hash algorithm: " + s);
                                    s = e.md[s].create()
                                }
                                var p = s.digestLength;
                                if (o > 4294967295 * p) {
                                    var u = new Error("Derived key is too long.");
                                    if (c) return c(u);
                                    throw u
                                }
                                var f = Math.ceil(o / p),
                                    h = o - (f - 1) * p,
                                    g = e.hmac.create();
                                g.start(s, t);
                                var m, y, v, C = "";
                                if (!c) {
                                    for (var S = 1; f >= S; ++S) {
                                        g.start(null, null),
                                            g.update(i),
                                            g.update(e.util.int32ToBytes(S)),
                                            m = v = g.digest().getBytes();
                                        for (var _ = 2; a >= _; ++_) g.start(null, null),
                                            g.update(v),
                                            y = g.digest().getBytes(),
                                            m = e.util.xorBytes(m, y, p),
                                            v = y;
                                        C += f > S ? m: m.substr(0, h)
                                    }
                                    return C
                                }
                                var _, S = 1;
                                l()
                            }
                    }
                    var i = "pbkdf2";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/pbkdf2", ["require", "module", "./hmac", "./md", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        var n = "undefined" != typeof process && process.versions && process.versions.node,
                            i = null; ! e.disableNativeCode && n && !process.versions["node-webkit"] && (i = t("crypto"));
                        var r = e.prng = e.prng || {};
                        r.create = function(t) {
                            function n(e) {
                                if (s.pools[0].messageLength >= 32) return a(),
                                    e();
                                var t = 32 - s.pools[0].messageLength << 5;
                                s.seedFile(t,
                                    function(t, n) {
                                        return t ? e(t) : (s.collect(n), a(), e(), void 0)
                                    })
                            }
                            function r() {
                                if (s.pools[0].messageLength >= 32) return a();
                                var e = 32 - s.pools[0].messageLength << 5;
                                s.collect(s.seedFileSync(e)),
                                    a()
                            }
                            function a() {
                                var e = s.plugin.md.create();
                                e.update(s.pools[0].digest().getBytes()),
                                    s.pools[0].start();
                                for (var t = 1,
                                         n = 1; 32 > n; ++n) t = 31 === t ? 2147483648 : t << 2,
                                t % s.reseeds === 0 && (e.update(s.pools[n].digest().getBytes()), s.pools[n].start());
                                var i = e.digest().getBytes();
                                e.start(),
                                    e.update(i);
                                var r = e.digest().getBytes();
                                s.key = s.plugin.formatKey(i),
                                    s.seed = s.plugin.formatSeed(r),
                                    s.reseeds = 4294967295 === s.reseeds ? 0 : s.reseeds + 1,
                                    s.generated = 0
                            }
                            function o(t) {
                                var n = null;
                                if ("undefined" != typeof window) {
                                    var i = window.crypto || window.msCrypto;
                                    i && i.getRandomValues && (n = function(e) {
                                        return i.getRandomValues(e)
                                    })
                                }
                                var r = e.util.createBuffer();
                                if (n) for (; r.length() < t;) {
                                    var a = Math.max(1, Math.min(t - r.length(), 65536) / 4),
                                        o = new Uint32Array(Math.floor(a));
                                    try {
                                        n(o);
                                        for (var s = 0; s < o.length; ++s) r.putInt32(o[s])
                                    } catch(c) {
                                        if (! ("undefined" != typeof QuotaExceededError && c instanceof QuotaExceededError)) throw c
                                    }
                                }
                                if (r.length() < t) for (var l, d, p, u = Math.floor(65536 * Math.random()); r.length() < t;) {
                                    d = 16807 * (65535 & u),
                                        l = 16807 * (u >> 16),
                                        d += (32767 & l) << 16,
                                        d += l >> 15,
                                        d = (2147483647 & d) + (d >> 31),
                                        u = 4294967295 & d;
                                    for (var s = 0; 3 > s; ++s) p = u >>> (s << 3),
                                        p ^= Math.floor(256 * Math.random()),
                                        r.putByte(String.fromCharCode(255 & p))
                                }
                                return r.getBytes(t)
                            }
                            for (var s = {
                                    plugin: t,
                                    key: null,
                                    seed: null,
                                    time: null,
                                    reseeds: 0,
                                    generated: 0
                                },
                                     c = t.md, l = new Array(32), d = 0; 32 > d; ++d) l[d] = c.create();
                            return s.pools = l,
                                s.pool = 0,
                                s.generate = function(t, i) {
                                    function r(p) {
                                        if (p) return i(p);
                                        if (d.length() >= t) return i(null, d.getBytes(t));
                                        if (s.generated > 1048575 && (s.key = null), null === s.key) return e.util.nextTick(function() {
                                            n(r)
                                        });
                                        var u = a(s.key, s.seed);
                                        s.generated += u.length,
                                            d.putBytes(u),
                                            s.key = c(a(s.key, o(s.seed))),
                                            s.seed = l(a(s.key, s.seed)),
                                            e.util.setImmediate(r)
                                    }
                                    if (!i) return s.generateSync(t);
                                    var a = s.plugin.cipher,
                                        o = s.plugin.increment,
                                        c = s.plugin.formatKey,
                                        l = s.plugin.formatSeed,
                                        d = e.util.createBuffer();
                                    s.key = null,
                                        r()
                                },
                                s.generateSync = function(t) {
                                    var n = s.plugin.cipher,
                                        i = s.plugin.increment,
                                        a = s.plugin.formatKey,
                                        o = s.plugin.formatSeed;
                                    s.key = null;
                                    for (var c = e.util.createBuffer(); c.length() < t;) {
                                        s.generated > 1048575 && (s.key = null),
                                        null === s.key && r();
                                        var l = n(s.key, s.seed);
                                        s.generated += l.length,
                                            c.putBytes(l),
                                            s.key = a(n(s.key, i(s.seed))),
                                            s.seed = o(n(s.key, s.seed))
                                    }
                                    return c.getBytes(t)
                                },
                                i ? (s.seedFile = function(e, t) {
                                    i.randomBytes(e,
                                        function(e, n) {
                                            return e ? t(e) : void t(null, n.toString())
                                        })
                                },
                                    s.seedFileSync = function(e) {
                                        return i.randomBytes(e).toString()
                                    }) : (s.seedFile = function(e, t) {
                                    try {
                                        t(null, o(e))
                                    } catch(n) {
                                        t(n)
                                    }
                                },
                                    s.seedFileSync = o),
                                s.collect = function(e) {
                                    for (var t = e.length,
                                             n = 0; t > n; ++n) s.pools[s.pool].update(e.substr(n, 1)),
                                        s.pool = 31 === s.pool ? 0 : s.pool + 1
                                },
                                s.collectInt = function(e, t) {
                                    for (var n = "",
                                             i = 0; t > i; i += 8) n += String.fromCharCode(e >> i & 255);
                                    s.collect(n)
                                },
                                s.registerWorker = function(e) {
                                    if (e === self) s.seedFile = function(e, t) {
                                        function n(e) {
                                            var i = e.data;
                                            i.forge && i.forge.prng && (self.removeEventListener("message", n), t(i.forge.prng.err, i.forge.prng.bytes))
                                        }
                                        self.addEventListener("message", n),
                                            self.postMessage({
                                                forge: {
                                                    prng: {
                                                        needed: e
                                                    }
                                                }
                                            })
                                    };
                                    else {
                                        var t = function(t) {
                                            var n = t.data;
                                            n.forge && n.forge.prng && s.seedFile(n.forge.prng.needed,
                                                function(t, n) {
                                                    e.postMessage({
                                                        forge: {
                                                            prng: {
                                                                err: t,
                                                                bytes: n
                                                            }
                                                        }
                                                    })
                                                })
                                        };
                                        e.addEventListener("message", t)
                                    }
                                },
                                s
                        }
                    }
                    var i = "prng";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/prng", ["require", "module", "./md", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        e.random && e.random.getBytes || !
                            function(t) {
                                function n() {
                                    var t = e.prng.create(i);
                                    return t.getBytes = function(e, n) {
                                        return t.generate(e, n)
                                    },
                                        t.getBytesSync = function(e) {
                                            return t.generate(e)
                                        },
                                        t
                                }
                                var i = {},
                                    r = new Array(4),
                                    a = e.util.createBuffer();
                                i.formatKey = function(t) {
                                    var n = e.util.createBuffer(t);
                                    return t = new Array(4),
                                        t[0] = n.getInt32(),
                                        t[1] = n.getInt32(),
                                        t[2] = n.getInt32(),
                                        t[3] = n.getInt32(),
                                        e.aes._expandKey(t, !1)
                                },
                                    i.formatSeed = function(t) {
                                        var n = e.util.createBuffer(t);
                                        return t = new Array(4),
                                            t[0] = n.getInt32(),
                                            t[1] = n.getInt32(),
                                            t[2] = n.getInt32(),
                                            t[3] = n.getInt32(),
                                            t
                                    },
                                    i.cipher = function(t, n) {
                                        return e.aes._updateBlock(t, n, r, !1),
                                            a.putInt32(r[0]),
                                            a.putInt32(r[1]),
                                            a.putInt32(r[2]),
                                            a.putInt32(r[3]),
                                            a.getBytes()
                                    },
                                    i.increment = function(e) {
                                        return++e[3],
                                            e
                                    },
                                    i.md = e.md.sha256;
                                var o = n(),
                                    s = "undefined" != typeof process && process.versions && process.versions.node,
                                    c = null;
                                if ("undefined" != typeof window) {
                                    var l = window.crypto || window.msCrypto;
                                    l && l.getRandomValues && (c = function(e) {
                                        return l.getRandomValues(e)
                                    })
                                }
                                if (e.disableNativeCode || !s && !c) {
                                    if ("undefined" == typeof window || void 0 === window.document, o.collectInt( + new Date, 32), "undefined" != typeof navigator) {
                                        var d = "";
                                        for (var p in navigator) try {
                                            "string" == typeof navigator[p] && (d += navigator[p])
                                        } catch(u) {}
                                        o.collect(d),
                                            d = null
                                    }
                                    t && (t().mousemove(function(e) {
                                        o.collectInt(e.clientX, 16),
                                            o.collectInt(e.clientY, 16)
                                    }), t().keypress(function(e) {
                                        o.collectInt(e.charCode, 8)
                                    }))
                                }
                                if (e.random) for (var p in o) e.random[p] = o[p];
                                else e.random = o;
                                e.random.createInstance = n
                            } ("undefined" != typeof jQuery ? jQuery: null)
                    }
                    var i = "random";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/random", ["require", "module", "./aes", "./md", "./prng", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        var t = [217, 120, 249, 196, 25, 221, 181, 237, 40, 233, 253, 121, 74, 160, 216, 157, 198, 126, 55, 131, 43, 118, 83, 142, 98, 76, 100, 136, 68, 139, 251, 162, 23, 154, 89, 245, 135, 179, 79, 19, 97, 69, 109, 141, 9, 129, 125, 50, 189, 143, 64, 235, 134, 183, 123, 11, 240, 149, 33, 34, 92, 107, 78, 130, 84, 214, 101, 147, 206, 96, 178, 28, 115, 86, 192, 20, 167, 140, 241, 220, 18, 117, 202, 31, 59, 190, 228, 209, 66, 61, 212, 48, 163, 60, 182, 38, 111, 191, 14, 218, 70, 105, 7, 87, 39, 242, 29, 155, 188, 148, 67, 3, 248, 17, 199, 246, 144, 239, 62, 231, 6, 195, 213, 47, 200, 102, 30, 215, 8, 232, 234, 222, 128, 82, 238, 247, 132, 170, 114, 172, 53, 77, 106, 42, 150, 26, 210, 113, 90, 21, 73, 116, 75, 159, 208, 94, 4, 24, 164, 236, 194, 224, 65, 110, 15, 81, 203, 204, 36, 145, 175, 80, 161, 244, 112, 57, 153, 124, 58, 133, 35, 184, 180, 122, 252, 2, 54, 91, 37, 85, 151, 49, 45, 93, 250, 152, 227, 138, 146, 174, 5, 223, 41, 16, 103, 108, 186, 201, 211, 0, 230, 207, 225, 158, 168, 44, 99, 22, 1, 63, 88, 226, 137, 169, 13, 56, 52, 27, 171, 51, 255, 176, 187, 72, 12, 95, 185, 177, 205, 46, 197, 243, 219, 71, 229, 165, 156, 119, 10, 166, 32, 104, 254, 127, 193, 173],
                            n = [1, 2, 3, 5],
                            i = function(e, t) {
                                return e << t & 65535 | (65535 & e) >> 16 - t
                            },
                            r = function(e, t) {
                                return (65535 & e) >> t | e << 16 - t & 65535
                            };
                        e.rc2 = e.rc2 || {},
                            e.rc2.expandKey = function(n, i) {
                                "string" == typeof n && (n = e.util.createBuffer(n)),
                                    i = i || 128;
                                var r, a = n,
                                    o = n.length(),
                                    s = i,
                                    c = Math.ceil(s / 8),
                                    l = 255 >> (7 & s);
                                for (r = o; 128 > r; r++) a.putByte(t[a.at(r - 1) + a.at(r - o) & 255]);
                                for (a.setAt(128 - c, t[a.at(128 - c) & l]), r = 127 - c; r >= 0; r--) a.setAt(r, t[a.at(r + 1) ^ a.at(r + c)]);
                                return a
                            };
                        var a = function(t, a, o) {
                            var s, c, l, d, p = !1,
                                u = null,
                                f = null,
                                h = null,
                                g = [];
                            for (t = e.rc2.expandKey(t, a), l = 0; 64 > l; l++) g.push(t.getInt16Le());
                            o ? (s = function(e) {
                                for (l = 0; 4 > l; l++) e[l] += g[d] + (e[(l + 3) % 4] & e[(l + 2) % 4]) + (~e[(l + 3) % 4] & e[(l + 1) % 4]),
                                    e[l] = i(e[l], n[l]),
                                    d++
                            },
                                c = function(e) {
                                    for (l = 0; 4 > l; l++) e[l] += g[63 & e[(l + 3) % 4]]
                                }) : (s = function(e) {
                                for (l = 3; l >= 0; l--) e[l] = r(e[l], n[l]),
                                    e[l] -= g[d] + (e[(l + 3) % 4] & e[(l + 2) % 4]) + (~e[(l + 3) % 4] & e[(l + 1) % 4]),
                                    d--
                            },
                                c = function(e) {
                                    for (l = 3; l >= 0; l--) e[l] -= g[63 & e[(l + 3) % 4]]
                                });
                            var m = function(e) {
                                    var t = [];
                                    for (l = 0; 4 > l; l++) {
                                        var n = u.getInt16Le();
                                        null !== h && (o ? n ^= h.getInt16Le() : h.putInt16Le(n)),
                                            t.push(65535 & n)
                                    }
                                    d = o ? 0 : 63;
                                    for (var i = 0; i < e.length; i++) for (var r = 0; r < e[i][0]; r++) e[i][1](t);
                                    for (l = 0; 4 > l; l++) null !== h && (o ? h.putInt16Le(t[l]) : t[l] ^= h.getInt16Le()),
                                        f.putInt16Le(t[l])
                                },
                                y = null;
                            return y = {
                                start: function(t, n) {
                                    t && "string" == typeof t && (t = e.util.createBuffer(t)),
                                        p = !1,
                                        u = e.util.createBuffer(),
                                        f = n || new e.util.createBuffer,
                                        h = t,
                                        y.output = f
                                },
                                update: function(e) {
                                    for (p || u.putBuffer(e); u.length() >= 8;) m([[5, s], [1, c], [6, s], [1, c], [5, s]])
                                },
                                finish: function(e) {
                                    var t = !0;
                                    if (o) if (e) t = e(8, u, !o);
                                    else {
                                        var n = 8 === u.length() ? 8 : 8 - u.length();
                                        u.fillWithByte(n, n)
                                    }
                                    if (t && (p = !0, y.update()), !o && (t = 0 === u.length())) if (e) t = e(8, f, !o);
                                    else {
                                        var i = f.length(),
                                            r = f.at(i - 1);
                                        r > i ? t = !1 : f.truncate(r)
                                    }
                                    return t
                                }
                            }
                        };
                        e.rc2.startEncrypting = function(t, n, i) {
                            var r = e.rc2.createEncryptionCipher(t, 128);
                            return r.start(n, i),
                                r
                        },
                            e.rc2.createEncryptionCipher = function(e, t) {
                                return a(e, t, !0)
                            },
                            e.rc2.startDecrypting = function(t, n, i) {
                                var r = e.rc2.createDecryptionCipher(t, 128);
                                return r.start(n, i),
                                    r
                            },
                            e.rc2.createDecryptionCipher = function(e, t) {
                                return a(e, t, !1)
                            }
                    }
                    var i = "rc2";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/rc2", ["require", "module", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(e, t, n) {
                            this.data = [],
                            null != e && ("number" == typeof e ? this.fromNumber(e, t, n) : null == t && "string" != typeof e ? this.fromString(e, 256) : this.fromString(e, t))
                        }
                        function n() {
                            return new t(null)
                        }
                        function i(e, t, n, i, r, a) {
                            for (; --a >= 0;) {
                                var o = t * this.data[e++] + n.data[i] + r;
                                r = Math.floor(o / 67108864),
                                    n.data[i++] = 67108863 & o
                            }
                            return r
                        }
                        function r(e, t, n, i, r, a) {
                            for (var o = 32767 & t,
                                     s = t >> 15; --a >= 0;) {
                                var c = 32767 & this.data[e],
                                    l = this.data[e++] >> 15,
                                    d = s * c + l * o;
                                c = o * c + ((32767 & d) << 15) + n.data[i] + (1073741823 & r),
                                    r = (c >>> 30) + (d >>> 15) + s * l + (r >>> 30),
                                    n.data[i++] = 1073741823 & c
                            }
                            return r
                        }
                        function a(e, t, n, i, r, a) {
                            for (var o = 16383 & t,
                                     s = t >> 14; --a >= 0;) {
                                var c = 16383 & this.data[e],
                                    l = this.data[e++] >> 14,
                                    d = s * c + l * o;
                                c = o * c + ((16383 & d) << 14) + n.data[i] + r,
                                    r = (c >> 28) + (d >> 14) + s * l,
                                    n.data[i++] = 268435455 & c
                            }
                            return r
                        }
                        function o(e) {
                            return at.charAt(e)
                        }
                        function s(e, t) {
                            var n = ot[e.charCodeAt(t)];
                            return null == n ? -1 : n
                        }
                        function c(e) {
                            for (var t = this.t - 1; t >= 0; --t) e.data[t] = this.data[t];
                            e.t = this.t,
                                e.s = this.s
                        }
                        function l(e) {
                            this.t = 1,
                                this.s = 0 > e ? -1 : 0,
                                e > 0 ? this.data[0] = e: -1 > e ? this.data[0] = e + this.DV: this.t = 0
                        }
                        function d(e) {
                            var t = n();
                            return t.fromInt(e),
                                t
                        }
                        function p(e, n) {
                            var i;
                            if (16 == n) i = 4;
                            else if (8 == n) i = 3;
                            else if (256 == n) i = 8;
                            else if (2 == n) i = 1;
                            else if (32 == n) i = 5;
                            else {
                                if (4 != n) return void this.fromRadix(e, n);
                                i = 2
                            }
                            this.t = 0,
                                this.s = 0;
                            for (var r = e.length,
                                     a = !1,
                                     o = 0; --r >= 0;) {
                                var c = 8 == i ? 255 & e[r] : s(e, r);
                                0 > c ? "-" == e.charAt(r) && (a = !0) : (a = !1, 0 == o ? this.data[this.t++] = c: o + i > this.DB ? (this.data[this.t - 1] |= (c & (1 << this.DB - o) - 1) << o, this.data[this.t++] = c >> this.DB - o) : this.data[this.t - 1] |= c << o, o += i, o >= this.DB && (o -= this.DB))
                            }
                            8 == i && 0 != (128 & e[0]) && (this.s = -1, o > 0 && (this.data[this.t - 1] |= (1 << this.DB - o) - 1 << o)),
                                this.clamp(),
                            a && t.ZERO.subTo(this, this)
                        }
                        function u() {
                            for (var e = this.s & this.DM; this.t > 0 && this.data[this.t - 1] == e;)--this.t
                        }
                        function f(e) {
                            if (this.s < 0) return "-" + this.negate().toString(e);
                            var t;
                            if (16 == e) t = 4;
                            else if (8 == e) t = 3;
                            else if (2 == e) t = 1;
                            else if (32 == e) t = 5;
                            else {
                                if (4 != e) return this.toRadix(e);
                                t = 2
                            }
                            var n, i = (1 << t) - 1,
                                r = !1,
                                a = "",
                                s = this.t,
                                c = this.DB - s * this.DB % t;
                            if (s-->0) for (c < this.DB && (n = this.data[s] >> c) > 0 && (r = !0, a = o(n)); s >= 0;) t > c ? (n = (this.data[s] & (1 << c) - 1) << t - c, n |= this.data[--s] >> (c += this.DB - t)) : (n = this.data[s] >> (c -= t) & i, 0 >= c && (c += this.DB, --s)),
                            n > 0 && (r = !0),
                            r && (a += o(n));
                            return r ? a: "0"
                        }
                        function h() {
                            var e = n();
                            return t.ZERO.subTo(this, e),
                                e
                        }
                        function g() {
                            return this.s < 0 ? this.negate() : this
                        }
                        function m(e) {
                            var t = this.s - e.s;
                            if (0 != t) return t;
                            var n = this.t;
                            if (t = n - e.t, 0 != t) return this.s < 0 ? -t: t;
                            for (; --n >= 0;) if (0 != (t = this.data[n] - e.data[n])) return t;
                            return 0
                        }
                        function y(e) {
                            var t, n = 1;
                            return 0 != (t = e >>> 16) && (e = t, n += 16),
                            0 != (t = e >> 8) && (e = t, n += 8),
                            0 != (t = e >> 4) && (e = t, n += 4),
                            0 != (t = e >> 2) && (e = t, n += 2),
                            0 != (t = e >> 1) && (e = t, n += 1),
                                n
                        }
                        function v() {
                            return this.t <= 0 ? 0 : this.DB * (this.t - 1) + y(this.data[this.t - 1] ^ this.s & this.DM)
                        }
                        function C(e, t) {
                            var n;
                            for (n = this.t - 1; n >= 0; --n) t.data[n + e] = this.data[n];
                            for (n = e - 1; n >= 0; --n) t.data[n] = 0;
                            t.t = this.t + e,
                                t.s = this.s
                        }
                        function S(e, t) {
                            for (var n = e; n < this.t; ++n) t.data[n - e] = this.data[n];
                            t.t = Math.max(this.t - e, 0),
                                t.s = this.s
                        }
                        function _(e, t) {
                            var n, i = e % this.DB,
                                r = this.DB - i,
                                a = (1 << r) - 1,
                                o = Math.floor(e / this.DB),
                                s = this.s << i & this.DM;
                            for (n = this.t - 1; n >= 0; --n) t.data[n + o + 1] = this.data[n] >> r | s,
                                s = (this.data[n] & a) << i;
                            for (n = o - 1; n >= 0; --n) t.data[n] = 0;
                            t.data[o] = s,
                                t.t = this.t + o + 1,
                                t.s = this.s,
                                t.clamp()
                        }
                        function b(e, t) {
                            t.s = this.s;
                            var n = Math.floor(e / this.DB);
                            if (n >= this.t) return void(t.t = 0);
                            var i = e % this.DB,
                                r = this.DB - i,
                                a = (1 << i) - 1;
                            t.data[0] = this.data[n] >> i;
                            for (var o = n + 1; o < this.t; ++o) t.data[o - n - 1] |= (this.data[o] & a) << r,
                                t.data[o - n] = this.data[o] >> i;
                            i > 0 && (t.data[this.t - n - 1] |= (this.s & a) << r),
                                t.t = this.t - n,
                                t.clamp()
                        }
                        function E(e, t) {
                            for (var n = 0,
                                     i = 0,
                                     r = Math.min(e.t, this.t); r > n;) i += this.data[n] - e.data[n],
                                t.data[n++] = i & this.DM,
                                i >>= this.DB;
                            if (e.t < this.t) {
                                for (i -= e.s; n < this.t;) i += this.data[n],
                                    t.data[n++] = i & this.DM,
                                    i >>= this.DB;
                                i += this.s
                            } else {
                                for (i += this.s; n < e.t;) i -= e.data[n],
                                    t.data[n++] = i & this.DM,
                                    i >>= this.DB;
                                i -= e.s
                            }
                            t.s = 0 > i ? -1 : 0,
                                -1 > i ? t.data[n++] = this.DV + i: i > 0 && (t.data[n++] = i),
                                t.t = n,
                                t.clamp()
                        }
                        function I(e, n) {
                            var i = this.abs(),
                                r = e.abs(),
                                a = i.t;
                            for (n.t = a + r.t; --a >= 0;) n.data[a] = 0;
                            for (a = 0; a < r.t; ++a) n.data[a + i.t] = i.am(0, r.data[a], n, a, 0, i.t);
                            n.s = 0,
                                n.clamp(),
                            this.s != e.s && t.ZERO.subTo(n, n)
                        }
                        function A(e) {
                            for (var t = this.abs(), n = e.t = 2 * t.t; --n >= 0;) e.data[n] = 0;
                            for (n = 0; n < t.t - 1; ++n) {
                                var i = t.am(n, t.data[n], e, 2 * n, 0, 1); (e.data[n + t.t] += t.am(n + 1, 2 * t.data[n], e, 2 * n + 1, i, t.t - n - 1)) >= t.DV && (e.data[n + t.t] -= t.DV, e.data[n + t.t + 1] = 1)
                            }
                            e.t > 0 && (e.data[e.t - 1] += t.am(n, t.data[n], e, 2 * n, 0, 1)),
                                e.s = 0,
                                e.clamp()
                        }
                        function T(e, i, r) {
                            var a = e.abs();
                            if (! (a.t <= 0)) {
                                var o = this.abs();
                                if (o.t < a.t) return null != i && i.fromInt(0),
                                    void(null != r && this.copyTo(r));
                                null == r && (r = n());
                                var s = n(),
                                    c = this.s,
                                    l = e.s,
                                    d = this.DB - y(a.data[a.t - 1]);
                                d > 0 ? (a.lShiftTo(d, s), o.lShiftTo(d, r)) : (a.copyTo(s), o.copyTo(r));
                                var p = s.t,
                                    u = s.data[p - 1];
                                if (0 != u) {
                                    var f = u * (1 << this.F1) + (p > 1 ? s.data[p - 2] >> this.F2: 0),
                                        h = this.FV / f,
                                        g = (1 << this.F1) / f,
                                        m = 1 << this.F2,
                                        v = r.t,
                                        C = v - p,
                                        S = null == i ? n() : i;
                                    for (s.dlShiftTo(C, S), r.compareTo(S) >= 0 && (r.data[r.t++] = 1, r.subTo(S, r)), t.ONE.dlShiftTo(p, S), S.subTo(s, s); s.t < p;) s.data[s.t++] = 0;
                                    for (; --C >= 0;) {
                                        var _ = r.data[--v] == u ? this.DM: Math.floor(r.data[v] * h + (r.data[v - 1] + m) * g);
                                        if ((r.data[v] += s.am(0, _, r, C, 0, p)) < _) for (s.dlShiftTo(C, S), r.subTo(S, r); r.data[v] < --_;) r.subTo(S, r)
                                    }
                                    null != i && (r.drShiftTo(p, i), c != l && t.ZERO.subTo(i, i)),
                                        r.t = p,
                                        r.clamp(),
                                    d > 0 && r.rShiftTo(d, r),
                                    0 > c && t.ZERO.subTo(r, r)
                                }
                            }
                        }
                        function k(e) {
                            var i = n();
                            return this.abs().divRemTo(e, null, i),
                            this.s < 0 && i.compareTo(t.ZERO) > 0 && e.subTo(i, i),
                                i
                        }
                        function w(e) {
                            this.m = e
                        }
                        function $(e) {
                            return e.s < 0 || e.compareTo(this.m) >= 0 ? e.mod(this.m) : e
                        }
                        function P(e) {
                            return e
                        }
                        function N(e) {
                            e.divRemTo(this.m, null, e)
                        }
                        function D(e, t, n) {
                            e.multiplyTo(t, n),
                                this.reduce(n)
                        }
                        function R(e, t) {
                            e.squareTo(t),
                                this.reduce(t)
                        }
                        function B() {
                            if (this.t < 1) return 0;
                            var e = this.data[0];
                            if (0 == (1 & e)) return 0;
                            var t = 3 & e;
                            return t = t * (2 - (15 & e) * t) & 15,
                                t = t * (2 - (255 & e) * t) & 255,
                                t = t * (2 - ((65535 & e) * t & 65535)) & 65535,
                                t = t * (2 - e * t % this.DV) % this.DV,
                                t > 0 ? this.DV - t: -t
                        }
                        function O(e) {
                            this.m = e,
                                this.mp = e.invDigit(),
                                this.mpl = 32767 & this.mp,
                                this.mph = this.mp >> 15,
                                this.um = (1 << e.DB - 15) - 1,
                                this.mt2 = 2 * e.t
                        }
                        function U(e) {
                            var i = n();
                            return e.abs().dlShiftTo(this.m.t, i),
                                i.divRemTo(this.m, null, i),
                            e.s < 0 && i.compareTo(t.ZERO) > 0 && this.m.subTo(i, i),
                                i
                        }
                        function L(e) {
                            var t = n();
                            return e.copyTo(t),
                                this.reduce(t),
                                t
                        }
                        function M(e) {
                            for (; e.t <= this.mt2;) e.data[e.t++] = 0;
                            for (var t = 0; t < this.m.t; ++t) {
                                var n = 32767 & e.data[t],
                                    i = n * this.mpl + ((n * this.mph + (e.data[t] >> 15) * this.mpl & this.um) << 15) & e.DM;
                                for (n = t + this.m.t, e.data[n] += this.m.am(0, i, e, t, 0, this.m.t); e.data[n] >= e.DV;) e.data[n] -= e.DV,
                                    e.data[++n]++
                            }
                            e.clamp(),
                                e.drShiftTo(this.m.t, e),
                            e.compareTo(this.m) >= 0 && e.subTo(this.m, e)
                        }
                        function x(e, t) {
                            e.squareTo(t),
                                this.reduce(t)
                        }
                        function F(e, t, n) {
                            e.multiplyTo(t, n),
                                this.reduce(n)
                        }
                        function V() {
                            return 0 == (this.t > 0 ? 1 & this.data[0] : this.s)
                        }
                        function H(e, i) {
                            if (e > 4294967295 || 1 > e) return t.ONE;
                            var r = n(),
                                a = n(),
                                o = i.convert(this),
                                s = y(e) - 1;
                            for (o.copyTo(r); --s >= 0;) if (i.sqrTo(r, a), (e & 1 << s) > 0) i.mulTo(a, o, r);
                            else {
                                var c = r;
                                r = a,
                                    a = c
                            }
                            return i.revert(r)
                        }
                        function K(e, t) {
                            var n;
                            return n = 256 > e || t.isEven() ? new w(t) : new O(t),
                                this.exp(e, n)
                        }
                        function G() {
                            var e = n();
                            return this.copyTo(e),
                                e
                        }
                        function q() {
                            if (this.s < 0) {
                                if (1 == this.t) return this.data[0] - this.DV;
                                if (0 == this.t) return - 1
                            } else {
                                if (1 == this.t) return this.data[0];
                                if (0 == this.t) return 0
                            }
                            return (this.data[1] & (1 << 32 - this.DB) - 1) << this.DB | this.data[0]
                        }
                        function j() {
                            return 0 == this.t ? this.s: this.data[0] << 24 >> 24
                        }
                        function z() {
                            return 0 == this.t ? this.s: this.data[0] << 16 >> 16
                        }
                        function W(e) {
                            return Math.floor(Math.LN2 * this.DB / Math.log(e))
                        }
                        function Q() {
                            return this.s < 0 ? -1 : this.t <= 0 || 1 == this.t && this.data[0] <= 0 ? 0 : 1
                        }
                        function X(e) {
                            if (null == e && (e = 10), 0 == this.signum() || 2 > e || e > 36) return "0";
                            var t = this.chunkSize(e),
                                i = Math.pow(e, t),
                                r = d(i),
                                a = n(),
                                o = n(),
                                s = "";
                            for (this.divRemTo(r, a, o); a.signum() > 0;) s = (i + o.intValue()).toString(e).substr(1) + s,
                                a.divRemTo(r, a, o);
                            return o.intValue().toString(e) + s
                        }
                        function Y(e, n) {
                            this.fromInt(0),
                            null == n && (n = 10);
                            for (var i = this.chunkSize(n), r = Math.pow(n, i), a = !1, o = 0, c = 0, l = 0; l < e.length; ++l) {
                                var d = s(e, l);
                                0 > d ? "-" == e.charAt(l) && 0 == this.signum() && (a = !0) : (c = n * c + d, ++o >= i && (this.dMultiply(r), this.dAddOffset(c, 0), o = 0, c = 0))
                            }
                            o > 0 && (this.dMultiply(Math.pow(n, o)), this.dAddOffset(c, 0)),
                            a && t.ZERO.subTo(this, this)
                        }
                        function Z(e, n, i) {
                            if ("number" == typeof n) if (2 > e) this.fromInt(1);
                            else for (this.fromNumber(e, i), this.testBit(e - 1) || this.bitwiseTo(t.ONE.shiftLeft(e - 1), oe, this), this.isEven() && this.dAddOffset(1, 0); ! this.isProbablePrime(n);) this.dAddOffset(2, 0),
                                this.bitLength() > e && this.subTo(t.ONE.shiftLeft(e - 1), this);
                            else {
                                var r = new Array,
                                    a = 7 & e;
                                r.length = (e >> 3) + 1,
                                    n.nextBytes(r),
                                    a > 0 ? r[0] &= (1 << a) - 1 : r[0] = 0,
                                    this.fromString(r, 256)
                            }
                        }
                        function J() {
                            var e = this.t,
                                t = new Array;
                            t[0] = this.s;
                            var n, i = this.DB - e * this.DB % 8,
                                r = 0;
                            if (e-->0) for (i < this.DB && (n = this.data[e] >> i) != (this.s & this.DM) >> i && (t[r++] = n | this.s << this.DB - i); e >= 0;) 8 > i ? (n = (this.data[e] & (1 << i) - 1) << 8 - i, n |= this.data[--e] >> (i += this.DB - 8)) : (n = this.data[e] >> (i -= 8) & 255, 0 >= i && (i += this.DB, --e)),
                            0 != (128 & n) && (n |= -256),
                            0 == r && (128 & this.s) != (128 & n) && ++r,
                            (r > 0 || n != this.s) && (t[r++] = n);
                            return t
                        }
                        function ee(e) {
                            return 0 == this.compareTo(e)
                        }
                        function te(e) {
                            return this.compareTo(e) < 0 ? this: e
                        }
                        function ne(e) {
                            return this.compareTo(e) > 0 ? this: e
                        }
                        function ie(e, t, n) {
                            var i, r, a = Math.min(e.t, this.t);
                            for (i = 0; a > i; ++i) n.data[i] = t(this.data[i], e.data[i]);
                            if (e.t < this.t) {
                                for (r = e.s & this.DM, i = a; i < this.t; ++i) n.data[i] = t(this.data[i], r);
                                n.t = this.t
                            } else {
                                for (r = this.s & this.DM, i = a; i < e.t; ++i) n.data[i] = t(r, e.data[i]);
                                n.t = e.t
                            }
                            n.s = t(this.s, e.s),
                                n.clamp()
                        }
                        function re(e, t) {
                            return e & t
                        }
                        function ae(e) {
                            var t = n();
                            return this.bitwiseTo(e, re, t),
                                t
                        }
                        function oe(e, t) {
                            return e | t
                        }
                        function se(e) {
                            var t = n();
                            return this.bitwiseTo(e, oe, t),
                                t
                        }
                        function ce(e, t) {
                            return e ^ t
                        }
                        function le(e) {
                            var t = n();
                            return this.bitwiseTo(e, ce, t),
                                t
                        }
                        function de(e, t) {
                            return e & ~t
                        }
                        function pe(e) {
                            var t = n();
                            return this.bitwiseTo(e, de, t),
                                t
                        }
                        function ue() {
                            for (var e = n(), t = 0; t < this.t; ++t) e.data[t] = this.DM & ~this.data[t];
                            return e.t = this.t,
                                e.s = ~this.s,
                                e
                        }
                        function fe(e) {
                            var t = n();
                            return 0 > e ? this.rShiftTo( - e, t) : this.lShiftTo(e, t),
                                t
                        }
                        function he(e) {
                            var t = n();
                            return 0 > e ? this.lShiftTo( - e, t) : this.rShiftTo(e, t),
                                t
                        }
                        function ge(e) {
                            if (0 == e) return - 1;
                            var t = 0;
                            return 0 == (65535 & e) && (e >>= 16, t += 16),
                            0 == (255 & e) && (e >>= 8, t += 8),
                            0 == (15 & e) && (e >>= 4, t += 4),
                            0 == (3 & e) && (e >>= 2, t += 2),
                            0 == (1 & e) && ++t,
                                t
                        }
                        function me() {
                            for (var e = 0; e < this.t; ++e) if (0 != this.data[e]) return e * this.DB + ge(this.data[e]);
                            return this.s < 0 ? this.t * this.DB: -1
                        }
                        function ye(e) {
                            for (var t = 0; 0 != e;) e &= e - 1,
                                ++t;
                            return t
                        }
                        function ve() {
                            for (var e = 0,
                                     t = this.s & this.DM,
                                     n = 0; n < this.t; ++n) e += ye(this.data[n] ^ t);
                            return e
                        }
                        function Ce(e) {
                            var t = Math.floor(e / this.DB);
                            return t >= this.t ? 0 != this.s: 0 != (this.data[t] & 1 << e % this.DB)
                        }
                        function Se(e, n) {
                            var i = t.ONE.shiftLeft(e);
                            return this.bitwiseTo(i, n, i),
                                i
                        }
                        function _e(e) {
                            return this.changeBit(e, oe)
                        }
                        function be(e) {
                            return this.changeBit(e, de)
                        }
                        function Ee(e) {
                            return this.changeBit(e, ce)
                        }
                        function Ie(e, t) {
                            for (var n = 0,
                                     i = 0,
                                     r = Math.min(e.t, this.t); r > n;) i += this.data[n] + e.data[n],
                                t.data[n++] = i & this.DM,
                                i >>= this.DB;
                            if (e.t < this.t) {
                                for (i += e.s; n < this.t;) i += this.data[n],
                                    t.data[n++] = i & this.DM,
                                    i >>= this.DB;
                                i += this.s
                            } else {
                                for (i += this.s; n < e.t;) i += e.data[n],
                                    t.data[n++] = i & this.DM,
                                    i >>= this.DB;
                                i += e.s
                            }
                            t.s = 0 > i ? -1 : 0,
                                i > 0 ? t.data[n++] = i: -1 > i && (t.data[n++] = this.DV + i),
                                t.t = n,
                                t.clamp()
                        }
                        function Ae(e) {
                            var t = n();
                            return this.addTo(e, t),
                                t
                        }
                        function Te(e) {
                            var t = n();
                            return this.subTo(e, t),
                                t
                        }
                        function ke(e) {
                            var t = n();
                            return this.multiplyTo(e, t),
                                t
                        }
                        function we(e) {
                            var t = n();
                            return this.divRemTo(e, t, null),
                                t
                        }
                        function $e(e) {
                            var t = n();
                            return this.divRemTo(e, null, t),
                                t
                        }
                        function Pe(e) {
                            var t = n(),
                                i = n();
                            return this.divRemTo(e, t, i),
                                new Array(t, i)
                        }
                        function Ne(e) {
                            this.data[this.t] = this.am(0, e - 1, this, 0, 0, this.t),
                                ++this.t,
                                this.clamp()
                        }
                        function De(e, t) {
                            if (0 != e) {
                                for (; this.t <= t;) this.data[this.t++] = 0;
                                for (this.data[t] += e; this.data[t] >= this.DV;) this.data[t] -= this.DV,
                                ++t >= this.t && (this.data[this.t++] = 0),
                                    ++this.data[t]
                            }
                        }
                        function Re() {}
                        function Be(e) {
                            return e
                        }
                        function Oe(e, t, n) {
                            e.multiplyTo(t, n)
                        }
                        function Ue(e, t) {
                            e.squareTo(t)
                        }
                        function Le(e) {
                            return this.exp(e, new Re)
                        }
                        function Me(e, t, n) {
                            var i = Math.min(this.t + e.t, t);
                            for (n.s = 0, n.t = i; i > 0;) n.data[--i] = 0;
                            var r;
                            for (r = n.t - this.t; r > i; ++i) n.data[i + this.t] = this.am(0, e.data[i], n, i, 0, this.t);
                            for (r = Math.min(e.t, t); r > i; ++i) this.am(0, e.data[i], n, i, 0, t - i);
                            n.clamp()
                        }
                        function xe(e, t, n) {--t;
                            var i = n.t = this.t + e.t - t;
                            for (n.s = 0; --i >= 0;) n.data[i] = 0;
                            for (i = Math.max(t - this.t, 0); i < e.t; ++i) n.data[this.t + i - t] = this.am(t - i, e.data[i], n, 0, 0, this.t + i - t);
                            n.clamp(),
                                n.drShiftTo(1, n)
                        }
                        function Fe(e) {
                            this.r2 = n(),
                                this.q3 = n(),
                                t.ONE.dlShiftTo(2 * e.t, this.r2),
                                this.mu = this.r2.divide(e),
                                this.m = e
                        }
                        function Ve(e) {
                            if (e.s < 0 || e.t > 2 * this.m.t) return e.mod(this.m);
                            if (e.compareTo(this.m) < 0) return e;
                            var t = n();
                            return e.copyTo(t),
                                this.reduce(t),
                                t
                        }
                        function He(e) {
                            return e
                        }
                        function Ke(e) {
                            for (e.drShiftTo(this.m.t - 1, this.r2), e.t > this.m.t + 1 && (e.t = this.m.t + 1, e.clamp()), this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3), this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2); e.compareTo(this.r2) < 0;) e.dAddOffset(1, this.m.t + 1);
                            for (e.subTo(this.r2, e); e.compareTo(this.m) >= 0;) e.subTo(this.m, e)
                        }
                        function Ge(e, t) {
                            e.squareTo(t),
                                this.reduce(t)
                        }
                        function qe(e, t, n) {
                            e.multiplyTo(t, n),
                                this.reduce(n)
                        }
                        function je(e, t) {
                            var i, r, a = e.bitLength(),
                                o = d(1);
                            if (0 >= a) return o;
                            i = 18 > a ? 1 : 48 > a ? 3 : 144 > a ? 4 : 768 > a ? 5 : 6,
                                r = 8 > a ? new w(t) : t.isEven() ? new Fe(t) : new O(t);
                            var s = new Array,
                                c = 3,
                                l = i - 1,
                                p = (1 << i) - 1;
                            if (s[1] = r.convert(this), i > 1) {
                                var u = n();
                                for (r.sqrTo(s[1], u); p >= c;) s[c] = n(),
                                    r.mulTo(u, s[c - 2], s[c]),
                                    c += 2
                            }
                            var f, h, g = e.t - 1,
                                m = !0,
                                v = n();
                            for (a = y(e.data[g]) - 1; g >= 0;) {
                                for (a >= l ? f = e.data[g] >> a - l & p: (f = (e.data[g] & (1 << a + 1) - 1) << l - a, g > 0 && (f |= e.data[g - 1] >> this.DB + a - l)), c = i; 0 == (1 & f);) f >>= 1,
                                    --c;
                                if ((a -= c) < 0 && (a += this.DB, --g), m) s[f].copyTo(o),
                                    m = !1;
                                else {
                                    for (; c > 1;) r.sqrTo(o, v),
                                        r.sqrTo(v, o),
                                        c -= 2;
                                    c > 0 ? r.sqrTo(o, v) : (h = o, o = v, v = h),
                                        r.mulTo(v, s[f], o)
                                }
                                for (; g >= 0 && 0 == (e.data[g] & 1 << a);) r.sqrTo(o, v),
                                    h = o,
                                    o = v,
                                    v = h,
                                --a < 0 && (a = this.DB - 1, --g)
                            }
                            return r.revert(o)
                        }
                        function ze(e) {
                            var t = this.s < 0 ? this.negate() : this.clone(),
                                n = e.s < 0 ? e.negate() : e.clone();
                            if (t.compareTo(n) < 0) {
                                var i = t;
                                t = n,
                                    n = i
                            }
                            var r = t.getLowestSetBit(),
                                a = n.getLowestSetBit();
                            if (0 > a) return t;
                            for (a > r && (a = r), a > 0 && (t.rShiftTo(a, t), n.rShiftTo(a, n)); t.signum() > 0;)(r = t.getLowestSetBit()) > 0 && t.rShiftTo(r, t),
                            (r = n.getLowestSetBit()) > 0 && n.rShiftTo(r, n),
                                t.compareTo(n) >= 0 ? (t.subTo(n, t), t.rShiftTo(1, t)) : (n.subTo(t, n), n.rShiftTo(1, n));
                            return a > 0 && n.lShiftTo(a, n),
                                n
                        }
                        function We(e) {
                            if (0 >= e) return 0;
                            var t = this.DV % e,
                                n = this.s < 0 ? e - 1 : 0;
                            if (this.t > 0) if (0 == t) n = this.data[0] % e;
                            else for (var i = this.t - 1; i >= 0; --i) n = (t * n + this.data[i]) % e;
                            return n
                        }
                        function Qe(e) {
                            var n = e.isEven();
                            if (this.isEven() && n || 0 == e.signum()) return t.ZERO;
                            for (var i = e.clone(), r = this.clone(), a = d(1), o = d(0), s = d(0), c = d(1); 0 != i.signum();) {
                                for (; i.isEven();) i.rShiftTo(1, i),
                                    n ? (a.isEven() && o.isEven() || (a.addTo(this, a), o.subTo(e, o)), a.rShiftTo(1, a)) : o.isEven() || o.subTo(e, o),
                                    o.rShiftTo(1, o);
                                for (; r.isEven();) r.rShiftTo(1, r),
                                    n ? (s.isEven() && c.isEven() || (s.addTo(this, s), c.subTo(e, c)), s.rShiftTo(1, s)) : c.isEven() || c.subTo(e, c),
                                    c.rShiftTo(1, c);
                                i.compareTo(r) >= 0 ? (i.subTo(r, i), n && a.subTo(s, a), o.subTo(c, o)) : (r.subTo(i, r), n && s.subTo(a, s), c.subTo(o, c))
                            }
                            return 0 != r.compareTo(t.ONE) ? t.ZERO: c.compareTo(e) >= 0 ? c.subtract(e) : c.signum() < 0 ? (c.addTo(e, c), c.signum() < 0 ? c.add(e) : c) : c
                        }
                        function Xe(e) {
                            var t, n = this.abs();
                            if (1 == n.t && n.data[0] <= st[st.length - 1]) {
                                for (t = 0; t < st.length; ++t) if (n.data[0] == st[t]) return ! 0;
                                return ! 1
                            }
                            if (n.isEven()) return ! 1;
                            for (t = 1; t < st.length;) {
                                for (var i = st[t], r = t + 1; r < st.length && ct > i;) i *= st[r++];
                                for (i = n.modInt(i); r > t;) if (i % st[t++] == 0) return ! 1
                            }
                            return n.millerRabin(e)
                        }
                        function Ye(e) {
                            var n = this.subtract(t.ONE),
                                i = n.getLowestSetBit();
                            if (0 >= i) return ! 1;
                            for (var r, a = n.shiftRight(i), o = Ze(), s = 0; e > s; ++s) {
                                do r = new t(this.bitLength(), o);
                                while (r.compareTo(t.ONE) <= 0 || r.compareTo(n) >= 0);
                                var c = r.modPow(a, this);
                                if (0 != c.compareTo(t.ONE) && 0 != c.compareTo(n)) {
                                    for (var l = 1; l++<i && 0 != c.compareTo(n);) if (c = c.modPowInt(2, this), 0 == c.compareTo(t.ONE)) return ! 1;
                                    if (0 != c.compareTo(n)) return ! 1
                                }
                            }
                            return ! 0
                        }
                        function Ze() {
                            return {
                                nextBytes: function(e) {
                                    for (var t = 0; t < e.length; ++t) e[t] = Math.floor(256 * Math.random())
                                }
                            }
                        }
                        var Je, et = 0xdeadbeefcafe,
                            tt = 15715070 == (16777215 & et);
                        "undefined" == typeof navigator ? (t.prototype.am = a, Je = 28) : tt && "Microsoft Internet Explorer" == navigator.appName ? (t.prototype.am = r, Je = 30) : tt && "Netscape" != navigator.appName ? (t.prototype.am = i, Je = 26) : (t.prototype.am = a, Je = 28),
                            t.prototype.DB = Je,
                            t.prototype.DM = (1 << Je) - 1,
                            t.prototype.DV = 1 << Je;
                        var nt = 52;
                        t.prototype.FV = Math.pow(2, nt),
                            t.prototype.F1 = nt - Je,
                            t.prototype.F2 = 2 * Je - nt;
                        var it, rt, at = "0123456789abcdefghijklmnopqrstuvwxyz",
                            ot = new Array;
                        for (it = "0".charCodeAt(0), rt = 0; 9 >= rt; ++rt) ot[it++] = rt;
                        for (it = "a".charCodeAt(0), rt = 10; 36 > rt; ++rt) ot[it++] = rt;
                        for (it = "A".charCodeAt(0), rt = 10; 36 > rt; ++rt) ot[it++] = rt;
                        w.prototype.convert = $,
                            w.prototype.revert = P,
                            w.prototype.reduce = N,
                            w.prototype.mulTo = D,
                            w.prototype.sqrTo = R,
                            O.prototype.convert = U,
                            O.prototype.revert = L,
                            O.prototype.reduce = M,
                            O.prototype.mulTo = F,
                            O.prototype.sqrTo = x,
                            t.prototype.copyTo = c,
                            t.prototype.fromInt = l,
                            t.prototype.fromString = p,
                            t.prototype.clamp = u,
                            t.prototype.dlShiftTo = C,
                            t.prototype.drShiftTo = S,
                            t.prototype.lShiftTo = _,
                            t.prototype.rShiftTo = b,
                            t.prototype.subTo = E,
                            t.prototype.multiplyTo = I,
                            t.prototype.squareTo = A,
                            t.prototype.divRemTo = T,
                            t.prototype.invDigit = B,
                            t.prototype.isEven = V,
                            t.prototype.exp = H,
                            t.prototype.toString = f,
                            t.prototype.negate = h,
                            t.prototype.abs = g,
                            t.prototype.compareTo = m,
                            t.prototype.bitLength = v,
                            t.prototype.mod = k,
                            t.prototype.modPowInt = K,
                            t.ZERO = d(0),
                            t.ONE = d(1),
                            Re.prototype.convert = Be,
                            Re.prototype.revert = Be,
                            Re.prototype.mulTo = Oe,
                            Re.prototype.sqrTo = Ue,
                            Fe.prototype.convert = Ve,
                            Fe.prototype.revert = He,
                            Fe.prototype.reduce = Ke,
                            Fe.prototype.mulTo = qe,
                            Fe.prototype.sqrTo = Ge;
                        var st = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509],
                            ct = (1 << 26) / st[st.length - 1];
                        t.prototype.chunkSize = W,
                            t.prototype.toRadix = X,
                            t.prototype.fromRadix = Y,
                            t.prototype.fromNumber = Z,
                            t.prototype.bitwiseTo = ie,
                            t.prototype.changeBit = Se,
                            t.prototype.addTo = Ie,
                            t.prototype.dMultiply = Ne,
                            t.prototype.dAddOffset = De,
                            t.prototype.multiplyLowerTo = Me,
                            t.prototype.multiplyUpperTo = xe,
                            t.prototype.modInt = We,
                            t.prototype.millerRabin = Ye,
                            t.prototype.clone = G,
                            t.prototype.intValue = q,
                            t.prototype.byteValue = j,
                            t.prototype.shortValue = z,
                            t.prototype.signum = Q,
                            t.prototype.toByteArray = J,
                            t.prototype.equals = ee,
                            t.prototype.min = te,
                            t.prototype.max = ne,
                            t.prototype.and = ae,
                            t.prototype.or = se,
                            t.prototype.xor = le,
                            t.prototype.andNot = pe,
                            t.prototype.not = ue,
                            t.prototype.shiftLeft = fe,
                            t.prototype.shiftRight = he,
                            t.prototype.getLowestSetBit = me,
                            t.prototype.bitCount = ve,
                            t.prototype.testBit = Ce,
                            t.prototype.setBit = _e,
                            t.prototype.clearBit = be,
                            t.prototype.flipBit = Ee,
                            t.prototype.add = Ae,
                            t.prototype.subtract = Te,
                            t.prototype.multiply = ke,
                            t.prototype.divide = we,
                            t.prototype.remainder = $e,
                            t.prototype.divideAndRemainder = Pe,
                            t.prototype.modPow = je,
                            t.prototype.modInverse = Qe,
                            t.prototype.pow = Le,
                            t.prototype.gcd = ze,
                            t.prototype.isProbablePrime = Xe,
                            e.jsbn = e.jsbn || {},
                            e.jsbn.BigInteger = t
                    }
                    var i = "jsbn";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/jsbn", ["require", "module"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(t, n, i) {
                            i || (i = e.md.sha1.create());
                            for (var r = "",
                                     a = Math.ceil(n / i.digestLength), o = 0; a > o; ++o) {
                                var s = String.fromCharCode(o >> 24 & 255, o >> 16 & 255, o >> 8 & 255, 255 & o);
                                i.start(),
                                    i.update(t + s),
                                    r += i.digest().getBytes()
                            }
                            return r.substring(0, n)
                        }
                        var n = e.pkcs1 = e.pkcs1 || {};
                        n.encode_rsa_oaep = function(n, i, r) {
                            var a, o, s, c;
                            "string" == typeof r ? (a = r, o = arguments[3] || void 0, s = arguments[4] || void 0) : r && (a = r.label || void 0, o = r.seed || void 0, s = r.md || void 0, r.mgf1 && r.mgf1.md && (c = r.mgf1.md)),
                                s ? s.start() : s = e.md.sha1.create(),
                            c || (c = s);
                            var l = Math.ceil(n.n.bitLength() / 8),
                                d = l - 2 * s.digestLength - 2;
                            if (i.length > d) {
                                var p = new Error("RSAES-OAEP input message length is too long.");
                                throw p.length = i.length,
                                    p.maxLength = d,
                                    p
                            }
                            a || (a = ""),
                                s.update(a, "raw");
                            for (var u = s.digest(), f = "", h = d - i.length, g = 0; h > g; g++) f += "\x00";
                            var m = u.getBytes() + f + "" + i;
                            if (o) {
                                if (o.length !== s.digestLength) {
                                    var p = new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");
                                    throw p.seedLength = o.length,
                                        p.digestLength = s.digestLength,
                                        p
                                }
                            } else o = e.random.getBytes(s.digestLength);
                            var y = t(o, l - s.digestLength - 1, c),
                                v = e.util.xorBytes(m, y, m.length),
                                C = t(v, s.digestLength, c),
                                S = e.util.xorBytes(o, C, o.length);
                            return "\x00" + S + v
                        },
                            n.decode_rsa_oaep = function(n, i, r) {
                                var a, o, s;
                                "string" == typeof r ? (a = r, o = arguments[3] || void 0) : r && (a = r.label || void 0, o = r.md || void 0, r.mgf1 && r.mgf1.md && (s = r.mgf1.md));
                                var c = Math.ceil(n.n.bitLength() / 8);
                                if (i.length !== c) {
                                    var l = new Error("RSAES-OAEP encoded message length is invalid.");
                                    throw l.length = i.length,
                                        l.expectedLength = c,
                                        l
                                }
                                if (void 0 === o ? o = e.md.sha1.create() : o.start(), s || (s = o), c < 2 * o.digestLength + 2) throw new Error("RSAES-OAEP key is too short for the hash function.");
                                a || (a = ""),
                                    o.update(a, "raw");
                                for (var d = o.digest().getBytes(), p = i.charAt(0), u = i.substring(1, o.digestLength + 1), f = i.substring(1 + o.digestLength), h = t(f, o.digestLength, s), g = e.util.xorBytes(u, h, u.length), m = t(g, c - o.digestLength - 1, s), y = e.util.xorBytes(f, m, f.length), v = y.substring(0, o.digestLength), l = "\x00" !== p, C = 0; C < o.digestLength; ++C) l |= d.charAt(C) !== v.charAt(C);
                                for (var S = 1,
                                         _ = o.digestLength,
                                         b = o.digestLength; b < y.length; b++) {
                                    var E = y.charCodeAt(b),
                                        I = 1 & E ^ 1,
                                        A = S ? 65534 : 0;
                                    l |= E & A,
                                        S &= I,
                                        _ += S
                                }
                                if (l || 1 !== y.charCodeAt(_)) throw new Error("Invalid RSAES-OAEP padding.");
                                return y.substring(_ + 1)
                            }
                    }
                    var i = "pkcs1";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/pkcs1", ["require", "module", "./util", "./random", "./sha1"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(e, t, r, a) {
                            return "workers" in r ? i(e, t, r, a) : n(e, t, r, a)
                        }
                        function n(t, i, o, s) {
                            var l = r(t, i),
                                d = 0,
                                p = a(l.bitLength());
                            "millerRabinTests" in o && (p = o.millerRabinTests);
                            var u = 10;
                            "maxBlockTime" in o && (u = o.maxBlockTime);
                            var f = +new Date;
                            do {
                                if (l.bitLength() > t && (l = r(t, i)), l.isProbablePrime(p)) return s(null, l);
                                l.dAddOffset(c[d++%8], 0)
                            } while ( 0 > u || + new Date - f < u );
                            e.util.setImmediate(function() {
                                n(t, i, o, s)
                            })
                        }
                        function i(t, i, a, o) {
                            function c() {
                                function e(e) {
                                    if (!h) {--c;
                                        var a = e.data;
                                        if (a.found) {
                                            for (var d = 0; d < n.length; ++d) n[d].terminate();
                                            return h = !0,
                                                o(null, new s(a.prime, 16))
                                        }
                                        l.bitLength() > t && (l = r(t, i));
                                        var f = l.toString(16);
                                        e.target.postMessage({
                                            hex: f,
                                            workLoad: p
                                        }),
                                            l.dAddOffset(u, 0)
                                    }
                                }
                                d = Math.max(1, d);
                                for (var n = [], a = 0; d > a; ++a) n[a] = new Worker(f);
                                for (var c = d,
                                         a = 0; d > a; ++a) n[a].addEventListener("message", e);
                                var h = !1
                            }
                            if ("undefined" == typeof Worker) return n(t, i, a, o);
                            var l = r(t, i),
                                d = a.workers,
                                p = a.workLoad || 100,
                                u = 30 * p / 8,
                                f = a.workerScript || "forge/prime.worker.js";
                            return - 1 === d ? e.util.estimateCores(function(e, t) {
                                e && (t = 2),
                                    d = t - 1,
                                    c()
                            }) : void c()
                        }
                        function r(e, t) {
                            var n = new s(e, t),
                                i = e - 1;
                            return n.testBit(i) || n.bitwiseTo(s.ONE.shiftLeft(i), d, n),
                                n.dAddOffset(31 - n.mod(l).byteValue(), 0),
                                n
                        }
                        function a(e) {
                            return 100 >= e ? 27 : 150 >= e ? 18 : 200 >= e ? 15 : 250 >= e ? 12 : 300 >= e ? 9 : 350 >= e ? 8 : 400 >= e ? 7 : 500 >= e ? 6 : 600 >= e ? 5 : 800 >= e ? 4 : 1250 >= e ? 3 : 2
                        }
                        if (!e.prime) {
                            var o = e.prime = e.prime || {},
                                s = e.jsbn.BigInteger,
                                c = [6, 4, 2, 4, 2, 4, 6, 2],
                                l = new s(null);
                            l.fromInt(30);
                            var d = function(e, t) {
                                return e | t
                            };
                            o.generateProbablePrime = function(n, i, r) {
                                "function" == typeof i && (r = i, i = {}),
                                    i = i || {};
                                var a = i.algorithm || "PRIMEINC";
                                "string" == typeof a && (a = {
                                    name: a
                                }),
                                    a.options = a.options || {};
                                var o = i.prng || e.random,
                                    s = {
                                        nextBytes: function(e) {
                                            for (var t = o.getBytesSync(e.length), n = 0; n < e.length; ++n) e[n] = t.charCodeAt(n)
                                        }
                                    };
                                if ("PRIMEINC" === a.name) return t(n, s, a.options, r);
                                throw new Error("Invalid prime generation algorithm: " + a.name)
                            }
                        }
                    }
                    var i = "prime";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/prime", ["require", "module", "./util", "./jsbn", "./random"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(t, n, i) {
                            var r = e.util.createBuffer(),
                                a = Math.ceil(n.n.bitLength() / 8);
                            if (t.length > a - 11) {
                                var o = new Error("Message is too long for PKCS#1 v1.5 padding.");
                                throw o.length = t.length,
                                    o.max = a - 11,
                                    o
                            }
                            r.putByte(0),
                                r.putByte(i);
                            var s, c = a - 3 - t.length;
                            if (0 === i || 1 === i) {
                                s = 0 === i ? 0 : 255;
                                for (var l = 0; c > l; ++l) r.putByte(s)
                            } else for (; c > 0;) {
                                for (var d = 0,
                                         p = e.random.getBytes(c), l = 0; c > l; ++l) s = p.charCodeAt(l),
                                    0 === s ? ++d: r.putByte(s);
                                c = d
                            }
                            return r.putByte(0),
                                r.putBytes(t),
                                r
                        }
                        function n(t, n, i, r) {
                            var a = Math.ceil(n.n.bitLength() / 8),
                                o = e.util.createBuffer(t),
                                s = o.getByte(),
                                c = o.getByte();
                            if (0 !== s || i && 0 !== c && 1 !== c || !i && 2 != c || i && 0 === c && "undefined" == typeof r) throw new Error("Encryption block is invalid.");
                            var l = 0;
                            if (0 === c) {
                                l = a - 3 - r;
                                for (var d = 0; l > d; ++d) if (0 !== o.getByte()) throw new Error("Encryption block is invalid.")
                            } else if (1 === c) for (l = 0; o.length() > 1;) {
                                if (255 !== o.getByte()) {--o.read;
                                    break
                                }++l
                            } else if (2 === c) for (l = 0; o.length() > 1;) {
                                if (0 === o.getByte()) {--o.read;
                                    break
                                }++l
                            }
                            var p = o.getByte();
                            if (0 !== p || l !== a - 3 - o.length()) throw new Error("Encryption block is invalid.");
                            return o.getBytes()
                        }
                        function i(t, n, i) {
                            function r() {
                                a(t.pBits,
                                    function(e, n) {
                                        return e ? i(e) : (t.p = n, null !== t.q ? o(e, t.q) : void a(t.qBits, o))
                                    })
                            }
                            function a(t, n) {
                                e.prime.generateProbablePrime(t, s, n)
                            }
                            function o(e, n) {
                                if (e) return i(e);
                                if (t.q = n, t.p.compareTo(t.q) < 0) {
                                    var s = t.p;
                                    t.p = t.q,
                                        t.q = s
                                }
                                if (0 !== t.p.subtract(l.ONE).gcd(t.e).compareTo(l.ONE)) return t.p = null,
                                    void r();
                                if (0 !== t.q.subtract(l.ONE).gcd(t.e).compareTo(l.ONE)) return t.q = null,
                                    void a(t.qBits, o);
                                if (t.p1 = t.p.subtract(l.ONE), t.q1 = t.q.subtract(l.ONE), t.phi = t.p1.multiply(t.q1), 0 !== t.phi.gcd(t.e).compareTo(l.ONE)) return t.p = t.q = null,
                                    void r();
                                if (t.n = t.p.multiply(t.q), t.n.bitLength() !== t.bits) return t.q = null,
                                    void a(t.qBits, o);
                                var c = t.e.modInverse(t.phi);
                                t.keys = {
                                    privateKey: p.rsa.setPrivateKey(t.n, t.e, c, t.p, t.q, c.mod(t.p1), c.mod(t.q1), t.q.modInverse(t.p)),
                                    publicKey: p.rsa.setPublicKey(t.n, t.e)
                                },
                                    i(null, t.keys)
                            }
                            "function" == typeof n && (i = n, n = {}),
                                n = n || {};
                            var s = {
                                algorithm: {
                                    name: n.algorithm || "PRIMEINC",
                                    options: {
                                        workers: n.workers || 2,
                                        workLoad: n.workLoad || 100,
                                        workerScript: n.workerScript
                                    }
                                }
                            };
                            "prng" in n && (s.prng = n.prng),
                                r()
                        }
                        function r(t) {
                            var n = t.toString(16);
                            return n[0] >= "8" && (n = "00" + n),
                                e.util.hexToBytes(n)
                        }
                        function a(e) {
                            return 100 >= e ? 27 : 150 >= e ? 18 : 200 >= e ? 15 : 250 >= e ? 12 : 300 >= e ? 9 : 350 >= e ? 8 : 400 >= e ? 7 : 500 >= e ? 6 : 600 >= e ? 5 : 800 >= e ? 4 : 1250 >= e ? 3 : 2
                        }
                        function o(e) {
                            return "undefined" != typeof window && "object" == typeof window.crypto && "object" == typeof window.crypto.subtle && "function" == typeof window.crypto.subtle[e]
                        }
                        function s(e) {
                            return "undefined" != typeof window && "object" == typeof window.msCrypto && "object" == typeof window.msCrypto.subtle && "function" == typeof window.msCrypto.subtle[e]
                        }
                        function c(t) {
                            for (var n = e.util.hexToBytes(t.toString(16)), i = new Uint8Array(n.length), r = 0; r < n.length; ++r) i[r] = n.charCodeAt(r);
                            return i
                        }
                        if ("undefined" == typeof l) var l = e.jsbn.BigInteger;
                        var d = e.asn1;
                        e.pki = e.pki || {},
                            e.pki.rsa = e.rsa = e.rsa || {};
                        var p = e.pki,
                            u = [6, 4, 2, 4, 2, 4, 6, 2],
                            f = {
                                name: "PrivateKeyInfo",
                                tagClass: d.Class.UNIVERSAL,
                                type: d.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "PrivateKeyInfo.version",
                                    tagClass: d.Class.UNIVERSAL,
                                    type: d.Type.INTEGER,
                                    constructed: !1,
                                    capture: "privateKeyVersion"
                                },
                                    {
                                        name: "PrivateKeyInfo.privateKeyAlgorithm",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.SEQUENCE,
                                        constructed: !0,
                                        value: [{
                                            name: "AlgorithmIdentifier.algorithm",
                                            tagClass: d.Class.UNIVERSAL,
                                            type: d.Type.OID,
                                            constructed: !1,
                                            capture: "privateKeyOid"
                                        }]
                                    },
                                    {
                                        name: "PrivateKeyInfo",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.OCTETSTRING,
                                        constructed: !1,
                                        capture: "privateKey"
                                    }]
                            },
                            h = {
                                name: "RSAPrivateKey",
                                tagClass: d.Class.UNIVERSAL,
                                type: d.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "RSAPrivateKey.version",
                                    tagClass: d.Class.UNIVERSAL,
                                    type: d.Type.INTEGER,
                                    constructed: !1,
                                    capture: "privateKeyVersion"
                                },
                                    {
                                        name: "RSAPrivateKey.modulus",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.INTEGER,
                                        constructed: !1,
                                        capture: "privateKeyModulus"
                                    },
                                    {
                                        name: "RSAPrivateKey.publicExponent",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.INTEGER,
                                        constructed: !1,
                                        capture: "privateKeyPublicExponent"
                                    },
                                    {
                                        name: "RSAPrivateKey.privateExponent",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.INTEGER,
                                        constructed: !1,
                                        capture: "privateKeyPrivateExponent"
                                    },
                                    {
                                        name: "RSAPrivateKey.prime1",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.INTEGER,
                                        constructed: !1,
                                        capture: "privateKeyPrime1"
                                    },
                                    {
                                        name: "RSAPrivateKey.prime2",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.INTEGER,
                                        constructed: !1,
                                        capture: "privateKeyPrime2"
                                    },
                                    {
                                        name: "RSAPrivateKey.exponent1",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.INTEGER,
                                        constructed: !1,
                                        capture: "privateKeyExponent1"
                                    },
                                    {
                                        name: "RSAPrivateKey.exponent2",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.INTEGER,
                                        constructed: !1,
                                        capture: "privateKeyExponent2"
                                    },
                                    {
                                        name: "RSAPrivateKey.coefficient",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.INTEGER,
                                        constructed: !1,
                                        capture: "privateKeyCoefficient"
                                    }]
                            },
                            g = {
                                name: "RSAPublicKey",
                                tagClass: d.Class.UNIVERSAL,
                                type: d.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "RSAPublicKey.modulus",
                                    tagClass: d.Class.UNIVERSAL,
                                    type: d.Type.INTEGER,
                                    constructed: !1,
                                    capture: "publicKeyModulus"
                                },
                                    {
                                        name: "RSAPublicKey.exponent",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.INTEGER,
                                        constructed: !1,
                                        capture: "publicKeyExponent"
                                    }]
                            },
                            m = e.pki.rsa.publicKeyValidator = {
                                name: "SubjectPublicKeyInfo",
                                tagClass: d.Class.UNIVERSAL,
                                type: d.Type.SEQUENCE,
                                constructed: !0,
                                captureAsn1: "subjectPublicKeyInfo",
                                value: [{
                                    name: "SubjectPublicKeyInfo.AlgorithmIdentifier",
                                    tagClass: d.Class.UNIVERSAL,
                                    type: d.Type.SEQUENCE,
                                    constructed: !0,
                                    value: [{
                                        name: "AlgorithmIdentifier.algorithm",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.OID,
                                        constructed: !1,
                                        capture: "publicKeyOid"
                                    }]
                                },
                                    {
                                        name: "SubjectPublicKeyInfo.subjectPublicKey",
                                        tagClass: d.Class.UNIVERSAL,
                                        type: d.Type.BITSTRING,
                                        constructed: !1,
                                        value: [{
                                            name: "SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",
                                            tagClass: d.Class.UNIVERSAL,
                                            type: d.Type.SEQUENCE,
                                            constructed: !0,
                                            optional: !0,
                                            captureAsn1: "rsaPublicKey"
                                        }]
                                    }]
                            },
                            y = function(e) {
                                var t;
                                if (e.algorithm in p.oids) {
                                    t = p.oids[e.algorithm];
                                    var n = d.oidToDer(t).getBytes(),
                                        i = d.create(d.Class.UNIVERSAL, d.Type.SEQUENCE, !0, []),
                                        r = d.create(d.Class.UNIVERSAL, d.Type.SEQUENCE, !0, []);
                                    r.value.push(d.create(d.Class.UNIVERSAL, d.Type.OID, !1, n)),
                                        r.value.push(d.create(d.Class.UNIVERSAL, d.Type.NULL, !1, ""));
                                    var a = d.create(d.Class.UNIVERSAL, d.Type.OCTETSTRING, !1, e.digest().getBytes());
                                    return i.value.push(r),
                                        i.value.push(a),
                                        d.toDer(i).getBytes()
                                }
                                var o = new Error("Unknown message digest algorithm.");
                                throw o.algorithm = e.algorithm,
                                    o
                            },
                            v = function(t, n, i) {
                                if (i) return t.modPow(n.e, n.n);
                                if (!n.p || !n.q) return t.modPow(n.d, n.n);
                                n.dP || (n.dP = n.d.mod(n.p.subtract(l.ONE))),
                                n.dQ || (n.dQ = n.d.mod(n.q.subtract(l.ONE))),
                                n.qInv || (n.qInv = n.q.modInverse(n.p));
                                var r;
                                do r = new l(e.util.bytesToHex(e.random.getBytes(n.n.bitLength() / 8)), 16);
                                while (r.compareTo(n.n) >= 0 || !r.gcd(n.n).equals(l.ONE));
                                t = t.multiply(r.modPow(n.e, n.n)).mod(n.n);
                                for (var a = t.mod(n.p).modPow(n.dP, n.p), o = t.mod(n.q).modPow(n.dQ, n.q); a.compareTo(o) < 0;) a = a.add(n.p);
                                var s = a.subtract(o).multiply(n.qInv).mod(n.p).multiply(n.q).add(o);
                                return s = s.multiply(r.modInverse(n.n)).mod(n.n)
                            };
                        p.rsa.encrypt = function(n, i, r) {
                            var a, o = r,
                                s = Math.ceil(i.n.bitLength() / 8);
                            r !== !1 && r !== !0 ? (o = 2 === r, a = t(n, i, r)) : (a = e.util.createBuffer(), a.putBytes(n));
                            for (var c = new l(a.toHex(), 16), d = v(c, i, o), p = d.toString(16), u = e.util.createBuffer(), f = s - Math.ceil(p.length / 2); f > 0;) u.putByte(0),
                                --f;
                            return u.putBytes(e.util.hexToBytes(p)),
                                u.getBytes()
                        },
                            p.rsa.decrypt = function(t, i, r, a) {
                                var o = Math.ceil(i.n.bitLength() / 8);
                                if (t.length !== o) {
                                    var s = new Error("Encrypted message length is invalid.");
                                    throw s.length = t.length,
                                        s.expected = o,
                                        s
                                }
                                var c = new l(e.util.createBuffer(t).toHex(), 16);
                                if (c.compareTo(i.n) >= 0) throw new Error("Encrypted message is invalid.");
                                for (var d = v(c, i, r), p = d.toString(16), u = e.util.createBuffer(), f = o - Math.ceil(p.length / 2); f > 0;) u.putByte(0),
                                    --f;
                                return u.putBytes(e.util.hexToBytes(p)),
                                    a !== !1 ? n(u.getBytes(), i, r) : u.getBytes()
                            },
                            p.rsa.createKeyPairGenerationState = function(t, n, i) {
                                "string" == typeof t && (t = parseInt(t, 10)),
                                    t = t || 2048,
                                    i = i || {};
                                var r, a = i.prng || e.random,
                                    o = {
                                        nextBytes: function(e) {
                                            for (var t = a.getBytesSync(e.length), n = 0; n < e.length; ++n) e[n] = t.charCodeAt(n)
                                        }
                                    },
                                    s = i.algorithm || "PRIMEINC";
                                if ("PRIMEINC" !== s) throw new Error("Invalid key generation algorithm: " + s);
                                return r = {
                                    algorithm: s,
                                    state: 0,
                                    bits: t,
                                    rng: o,
                                    eInt: n || 65537,
                                    e: new l(null),
                                    p: null,
                                    q: null,
                                    qBits: t >> 1,
                                    pBits: t - (t >> 1),
                                    pqState: 0,
                                    num: null,
                                    keys: null
                                },
                                    r.e.fromInt(r.eInt),
                                    r
                            },
                            p.rsa.stepKeyPairGenerationState = function(e, t) {
                                "algorithm" in e || (e.algorithm = "PRIMEINC");
                                var n = new l(null);
                                n.fromInt(30);
                                for (var i, r = 0,
                                         o = function(e, t) {
                                             return e | t
                                         },
                                         s = +new Date, c = 0; null === e.keys && (0 >= t || t > c);) {
                                    if (0 === e.state) {
                                        var d = null === e.p ? e.pBits: e.qBits,
                                            f = d - 1;
                                        0 === e.pqState ? (e.num = new l(d, e.rng), e.num.testBit(f) || e.num.bitwiseTo(l.ONE.shiftLeft(f), o, e.num), e.num.dAddOffset(31 - e.num.mod(n).byteValue(), 0), r = 0, ++e.pqState) : 1 === e.pqState ? e.num.bitLength() > d ? e.pqState = 0 : e.num.isProbablePrime(a(e.num.bitLength())) ? ++e.pqState: e.num.dAddOffset(u[r++%8], 0) : 2 === e.pqState ? e.pqState = 0 === e.num.subtract(l.ONE).gcd(e.e).compareTo(l.ONE) ? 3 : 0 : 3 === e.pqState && (e.pqState = 0, null === e.p ? e.p = e.num: e.q = e.num, null !== e.p && null !== e.q && ++e.state, e.num = null)
                                    } else if (1 === e.state) e.p.compareTo(e.q) < 0 && (e.num = e.p, e.p = e.q, e.q = e.num),
                                        ++e.state;
                                    else if (2 === e.state) e.p1 = e.p.subtract(l.ONE),
                                        e.q1 = e.q.subtract(l.ONE),
                                        e.phi = e.p1.multiply(e.q1),
                                        ++e.state;
                                    else if (3 === e.state) 0 === e.phi.gcd(e.e).compareTo(l.ONE) ? ++e.state: (e.p = null, e.q = null, e.state = 0);
                                    else if (4 === e.state) e.n = e.p.multiply(e.q),
                                        e.n.bitLength() === e.bits ? ++e.state: (e.q = null, e.state = 0);
                                    else if (5 === e.state) {
                                        var h = e.e.modInverse(e.phi);
                                        e.keys = {
                                            privateKey: p.rsa.setPrivateKey(e.n, e.e, h, e.p, e.q, h.mod(e.p1), h.mod(e.q1), e.q.modInverse(e.p)),
                                            publicKey: p.rsa.setPublicKey(e.n, e.e)
                                        }
                                    }
                                    i = +new Date,
                                        c += i - s,
                                        s = i
                                }
                                return null !== e.keys
                            },
                            p.rsa.generateKeyPair = function(t, n, r, a) {
                                if (1 === arguments.length ? "object" == typeof t ? (r = t, t = void 0) : "function" == typeof t && (a = t, t = void 0) : 2 === arguments.length ? "number" == typeof t ? "function" == typeof n ? (a = n, n = void 0) : "number" != typeof n && (r = n, n = void 0) : (r = t, a = n, t = void 0, n = void 0) : 3 === arguments.length && ("number" == typeof n ? "function" == typeof r && (a = r, r = void 0) : (a = r, r = n, n = void 0)), r = r || {},
                                    void 0 === t && (t = r.bits || 2048), void 0 === n && (n = r.e || 65537), !e.disableNativeCode && a && t >= 256 && 16384 >= t && (65537 === n || 3 === n)) {
                                    if (o("generateKey") && o("exportKey")) return window.crypto.subtle.generateKey({
                                            name: "RSASSA-PKCS1-v1_5",
                                            modulusLength: t,
                                            publicExponent: c(n),
                                            hash: {
                                                name: "SHA-256"
                                            }
                                        },
                                        !0, ["sign", "verify"]).then(function(e) {
                                        return window.crypto.subtle.exportKey("pkcs8", e.privateKey)
                                    })["catch"](function(e) {
                                        a(e)
                                    }).then(function(t) {
                                        if (t) {
                                            var n = p.privateKeyFromAsn1(d.fromDer(e.util.createBuffer(t)));
                                            a(null, {
                                                privateKey: n,
                                                publicKey: p.setRsaPublicKey(n.n, n.e)
                                            })
                                        }
                                    });
                                    if (s("generateKey") && s("exportKey")) {
                                        var l = window.msCrypto.subtle.generateKey({
                                                name: "RSASSA-PKCS1-v1_5",
                                                modulusLength: t,
                                                publicExponent: c(n),
                                                hash: {
                                                    name: "SHA-256"
                                                }
                                            },
                                            !0, ["sign", "verify"]);
                                        return l.oncomplete = function(t) {
                                            var n = t.target.result,
                                                i = window.msCrypto.subtle.exportKey("pkcs8", n.privateKey);
                                            i.oncomplete = function(t) {
                                                var n = t.target.result,
                                                    i = p.privateKeyFromAsn1(d.fromDer(e.util.createBuffer(n)));
                                                a(null, {
                                                    privateKey: i,
                                                    publicKey: p.setRsaPublicKey(i.n, i.e)
                                                })
                                            },
                                                i.onerror = function(e) {
                                                    a(e)
                                                }
                                        },
                                            void(l.onerror = function(e) {
                                                a(e)
                                            })
                                    }
                                }
                                var u = p.rsa.createKeyPairGenerationState(t, n, r);
                                return a ? void i(u, r, a) : (p.rsa.stepKeyPairGenerationState(u, 0), u.keys)
                            },
                            p.setRsaPublicKey = p.rsa.setPublicKey = function(i, r) {
                                var a = {
                                    n: i,
                                    e: r
                                };
                                return a.encrypt = function(n, i, r) {
                                    if ("string" == typeof i ? i = i.toUpperCase() : void 0 === i && (i = "RSAES-PKCS1-V1_5"), "RSAES-PKCS1-V1_5" === i) i = {
                                        encode: function(e, n, i) {
                                            return t(e, n, 2).getBytes()
                                        }
                                    };
                                    else if ("RSA-OAEP" === i || "RSAES-OAEP" === i) i = {
                                        encode: function(t, n) {
                                            return e.pkcs1.encode_rsa_oaep(n, t, r)
                                        }
                                    };
                                    else if ( - 1 !== ["RAW", "NONE", "NULL", null].indexOf(i)) i = {
                                        encode: function(e) {
                                            return e
                                        }
                                    };
                                    else if ("string" == typeof i) throw new Error('Unsupported encryption scheme: "' + i + '".');
                                    var o = i.encode(n, a, !0);
                                    return p.rsa.encrypt(o, a, !0)
                                },
                                    a.verify = function(e, t, i) {
                                        "string" == typeof i ? i = i.toUpperCase() : void 0 === i && (i = "RSASSA-PKCS1-V1_5"),
                                            "RSASSA-PKCS1-V1_5" === i ? i = {
                                                verify: function(e, t) {
                                                    t = n(t, a, !0);
                                                    var i = d.fromDer(t);
                                                    return e === i.value[1].value
                                                }
                                            }: ("NONE" === i || "NULL" === i || null === i) && (i = {
                                                verify: function(e, t) {
                                                    return t = n(t, a, !0),
                                                    e === t
                                                }
                                            });
                                        var r = p.rsa.decrypt(t, a, !0, !1);
                                        return i.verify(e, r, a.n.bitLength())
                                    },
                                    a
                            },
                            p.setRsaPrivateKey = p.rsa.setPrivateKey = function(t, i, r, a, o, s, c, l) {
                                var d = {
                                    n: t,
                                    e: i,
                                    d: r,
                                    p: a,
                                    q: o,
                                    dP: s,
                                    dQ: c,
                                    qInv: l
                                };
                                return d.decrypt = function(t, i, r) {
                                    "string" == typeof i ? i = i.toUpperCase() : void 0 === i && (i = "RSAES-PKCS1-V1_5");
                                    var a = p.rsa.decrypt(t, d, !1, !1);
                                    if ("RSAES-PKCS1-V1_5" === i) i = {
                                        decode: n
                                    };
                                    else if ("RSA-OAEP" === i || "RSAES-OAEP" === i) i = {
                                        decode: function(t, n) {
                                            return e.pkcs1.decode_rsa_oaep(n, t, r)
                                        }
                                    };
                                    else {
                                        if ( - 1 === ["RAW", "NONE", "NULL", null].indexOf(i)) throw new Error('Unsupported encryption scheme: "' + i + '".');
                                        i = {
                                            decode: function(e) {
                                                return e
                                            }
                                        }
                                    }
                                    return i.decode(a, d, !1)
                                },
                                    d.sign = function(e, t) {
                                        var n = !1;
                                        "string" == typeof t && (t = t.toUpperCase()),
                                            void 0 === t || "RSASSA-PKCS1-V1_5" === t ? (t = {
                                                encode: y
                                            },
                                                n = 1) : ("NONE" === t || "NULL" === t || null === t) && (t = {
                                                encode: function() {
                                                    return e
                                                }
                                            },
                                                n = 1);
                                        var i = t.encode(e, d.n.bitLength());
                                        return p.rsa.encrypt(i, d, n)
                                    },
                                    d
                            },
                            p.wrapRsaPrivateKey = function(e) {
                                return d.create(d.Class.UNIVERSAL, d.Type.SEQUENCE, !0, [d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, d.integerToDer(0).getBytes()), d.create(d.Class.UNIVERSAL, d.Type.SEQUENCE, !0, [d.create(d.Class.UNIVERSAL, d.Type.OID, !1, d.oidToDer(p.oids.rsaEncryption).getBytes()), d.create(d.Class.UNIVERSAL, d.Type.NULL, !1, "")]), d.create(d.Class.UNIVERSAL, d.Type.OCTETSTRING, !1, d.toDer(e).getBytes())])
                            },
                            p.privateKeyFromAsn1 = function(t) {
                                var n = {},
                                    i = [];
                                if (d.validate(t, f, n, i) && (t = d.fromDer(e.util.createBuffer(n.privateKey))), n = {},
                                        i = [], !d.validate(t, h, n, i)) {
                                    var r = new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");
                                    throw r.errors = i,
                                        r
                                }
                                var a, o, s, c, u, g, m, y;
                                return a = e.util.createBuffer(n.privateKeyModulus).toHex(),
                                    o = e.util.createBuffer(n.privateKeyPublicExponent).toHex(),
                                    s = e.util.createBuffer(n.privateKeyPrivateExponent).toHex(),
                                    c = e.util.createBuffer(n.privateKeyPrime1).toHex(),
                                    u = e.util.createBuffer(n.privateKeyPrime2).toHex(),
                                    g = e.util.createBuffer(n.privateKeyExponent1).toHex(),
                                    m = e.util.createBuffer(n.privateKeyExponent2).toHex(),
                                    y = e.util.createBuffer(n.privateKeyCoefficient).toHex(),
                                    p.setRsaPrivateKey(new l(a, 16), new l(o, 16), new l(s, 16), new l(c, 16), new l(u, 16), new l(g, 16), new l(m, 16), new l(y, 16))
                            },
                            p.privateKeyToAsn1 = p.privateKeyToRSAPrivateKey = function(e) {
                                return d.create(d.Class.UNIVERSAL, d.Type.SEQUENCE, !0, [d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, d.integerToDer(0).getBytes()), d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, r(e.n)), d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, r(e.e)), d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, r(e.d)), d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, r(e.p)), d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, r(e.q)), d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, r(e.dP)), d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, r(e.dQ)), d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, r(e.qInv))])
                            },
                            p.publicKeyFromAsn1 = function(t) {
                                var n = {},
                                    i = [];
                                if (d.validate(t, m, n, i)) {
                                    var r = d.derToOid(n.publicKeyOid);
                                    if (r !== p.oids.rsaEncryption) {
                                        var a = new Error("Cannot read public key. Unknown OID.");
                                        throw a.oid = r,
                                            a
                                    }
                                    t = n.rsaPublicKey
                                }
                                if (i = [], !d.validate(t, g, n, i)) {
                                    var a = new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");
                                    throw a.errors = i,
                                        a
                                }
                                var o = e.util.createBuffer(n.publicKeyModulus).toHex(),
                                    s = e.util.createBuffer(n.publicKeyExponent).toHex();
                                return p.setRsaPublicKey(new l(o, 16), new l(s, 16))
                            },
                            p.publicKeyToAsn1 = p.publicKeyToSubjectPublicKeyInfo = function(e) {
                                return d.create(d.Class.UNIVERSAL, d.Type.SEQUENCE, !0, [d.create(d.Class.UNIVERSAL, d.Type.SEQUENCE, !0, [d.create(d.Class.UNIVERSAL, d.Type.OID, !1, d.oidToDer(p.oids.rsaEncryption).getBytes()), d.create(d.Class.UNIVERSAL, d.Type.NULL, !1, "")]), d.create(d.Class.UNIVERSAL, d.Type.BITSTRING, !1, [p.publicKeyToRSAPublicKey(e)])])
                            },
                            p.publicKeyToRSAPublicKey = function(e) {
                                return d.create(d.Class.UNIVERSAL, d.Type.SEQUENCE, !0, [d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, r(e.n)), d.create(d.Class.UNIVERSAL, d.Type.INTEGER, !1, r(e.e))])
                            }
                    }
                    var i = "rsa";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/rsa", ["require", "module", "./asn1", "./jsbn", "./oids", "./pkcs1", "./prime", "./random", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(e, t) {
                            return e.start().update(t).digest().getBytes()
                        }
                        if ("undefined" == typeof n) var n = e.jsbn.BigInteger;
                        var i = e.asn1,
                            r = e.pki = e.pki || {};
                        r.pbe = e.pbe = e.pbe || {};
                        var a = r.oids,
                            o = {
                                name: "EncryptedPrivateKeyInfo",
                                tagClass: i.Class.UNIVERSAL,
                                type: i.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "EncryptedPrivateKeyInfo.encryptionAlgorithm",
                                    tagClass: i.Class.UNIVERSAL,
                                    type: i.Type.SEQUENCE,
                                    constructed: !0,
                                    value: [{
                                        name: "AlgorithmIdentifier.algorithm",
                                        tagClass: i.Class.UNIVERSAL,
                                        type: i.Type.OID,
                                        constructed: !1,
                                        capture: "encryptionOid"
                                    },
                                        {
                                            name: "AlgorithmIdentifier.parameters",
                                            tagClass: i.Class.UNIVERSAL,
                                            type: i.Type.SEQUENCE,
                                            constructed: !0,
                                            captureAsn1: "encryptionParams"
                                        }]
                                },
                                    {
                                        name: "EncryptedPrivateKeyInfo.encryptedData",
                                        tagClass: i.Class.UNIVERSAL,
                                        type: i.Type.OCTETSTRING,
                                        constructed: !1,
                                        capture: "encryptedData"
                                    }]
                            },
                            s = {
                                name: "PBES2Algorithms",
                                tagClass: i.Class.UNIVERSAL,
                                type: i.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "PBES2Algorithms.keyDerivationFunc",
                                    tagClass: i.Class.UNIVERSAL,
                                    type: i.Type.SEQUENCE,
                                    constructed: !0,
                                    value: [{
                                        name: "PBES2Algorithms.keyDerivationFunc.oid",
                                        tagClass: i.Class.UNIVERSAL,
                                        type: i.Type.OID,
                                        constructed: !1,
                                        capture: "kdfOid"
                                    },
                                        {
                                            name: "PBES2Algorithms.params",
                                            tagClass: i.Class.UNIVERSAL,
                                            type: i.Type.SEQUENCE,
                                            constructed: !0,
                                            value: [{
                                                name: "PBES2Algorithms.params.salt",
                                                tagClass: i.Class.UNIVERSAL,
                                                type: i.Type.OCTETSTRING,
                                                constructed: !1,
                                                capture: "kdfSalt"
                                            },
                                                {
                                                    name: "PBES2Algorithms.params.iterationCount",
                                                    tagClass: i.Class.UNIVERSAL,
                                                    type: i.Type.INTEGER,
                                                    onstructed: !0,
                                                    capture: "kdfIterationCount"
                                                }]
                                        }]
                                },
                                    {
                                        name: "PBES2Algorithms.encryptionScheme",
                                        tagClass: i.Class.UNIVERSAL,
                                        type: i.Type.SEQUENCE,
                                        constructed: !0,
                                        value: [{
                                            name: "PBES2Algorithms.encryptionScheme.oid",
                                            tagClass: i.Class.UNIVERSAL,
                                            type: i.Type.OID,
                                            constructed: !1,
                                            capture: "encOid"
                                        },
                                            {
                                                name: "PBES2Algorithms.encryptionScheme.iv",
                                                tagClass: i.Class.UNIVERSAL,
                                                type: i.Type.OCTETSTRING,
                                                constructed: !1,
                                                capture: "encIv"
                                            }]
                                    }]
                            },
                            c = {
                                name: "pkcs-12PbeParams",
                                tagClass: i.Class.UNIVERSAL,
                                type: i.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "pkcs-12PbeParams.salt",
                                    tagClass: i.Class.UNIVERSAL,
                                    type: i.Type.OCTETSTRING,
                                    constructed: !1,
                                    capture: "salt"
                                },
                                    {
                                        name: "pkcs-12PbeParams.iterations",
                                        tagClass: i.Class.UNIVERSAL,
                                        type: i.Type.INTEGER,
                                        constructed: !1,
                                        capture: "iterations"
                                    }]
                            };
                        r.encryptPrivateKeyInfo = function(t, n, o) {
                            o = o || {},
                                o.saltSize = o.saltSize || 8,
                                o.count = o.count || 2048,
                                o.algorithm = o.algorithm || "aes128";
                            var s, c, l, d = e.random.getBytesSync(o.saltSize),
                                p = o.count,
                                u = i.integerToDer(p);
                            if (0 === o.algorithm.indexOf("aes") || "des" === o.algorithm) {
                                var f, h, g;
                                switch (o.algorithm) {
                                    case "aes128":
                                        s = 16,
                                            f = 16,
                                            h = a["aes128-CBC"],
                                            g = e.aes.createEncryptionCipher;
                                        break;
                                    case "aes192":
                                        s = 24,
                                            f = 16,
                                            h = a["aes192-CBC"],
                                            g = e.aes.createEncryptionCipher;
                                        break;
                                    case "aes256":
                                        s = 32,
                                            f = 16,
                                            h = a["aes256-CBC"],
                                            g = e.aes.createEncryptionCipher;
                                        break;
                                    case "des":
                                        s = 8,
                                            f = 8,
                                            h = a.desCBC,
                                            g = e.des.createEncryptionCipher;
                                        break;
                                    default:
                                        var m = new Error("Cannot encrypt private key. Unknown encryption algorithm.");
                                        throw m.algorithm = o.algorithm,
                                            m
                                }
                                var y = e.pkcs5.pbkdf2(n, d, p, s),
                                    v = e.random.getBytesSync(f),
                                    C = g(y);
                                C.start(v),
                                    C.update(i.toDer(t)),
                                    C.finish(),
                                    l = C.output.getBytes(),
                                    c = i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(a.pkcs5PBES2).getBytes()), i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(a.pkcs5PBKDF2).getBytes()), i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OCTETSTRING, !1, d), i.create(i.Class.UNIVERSAL, i.Type.INTEGER, !1, u.getBytes())])]), i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(h).getBytes()), i.create(i.Class.UNIVERSAL, i.Type.OCTETSTRING, !1, v)])])])
                            } else {
                                if ("3des" !== o.algorithm) {
                                    var m = new Error("Cannot encrypt private key. Unknown encryption algorithm.");
                                    throw m.algorithm = o.algorithm,
                                        m
                                }
                                s = 24;
                                var S = new e.util.ByteBuffer(d),
                                    y = r.pbe.generatePkcs12Key(n, S, 1, p, s),
                                    v = r.pbe.generatePkcs12Key(n, S, 2, p, s),
                                    C = e.des.createEncryptionCipher(y);
                                C.start(v),
                                    C.update(i.toDer(t)),
                                    C.finish(),
                                    l = C.output.getBytes(),
                                    c = i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OID, !1, i.oidToDer(a["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()), i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [i.create(i.Class.UNIVERSAL, i.Type.OCTETSTRING, !1, d), i.create(i.Class.UNIVERSAL, i.Type.INTEGER, !1, u.getBytes())])]);

                            }
                            var _ = i.create(i.Class.UNIVERSAL, i.Type.SEQUENCE, !0, [c, i.create(i.Class.UNIVERSAL, i.Type.OCTETSTRING, !1, l)]);
                            return _
                        },
                            r.decryptPrivateKeyInfo = function(t, n) {
                                var a = null,
                                    s = {},
                                    c = [];
                                if (!i.validate(t, o, s, c)) {
                                    var l = new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");
                                    throw l.errors = c,
                                        l
                                }
                                var d = i.derToOid(s.encryptionOid),
                                    p = r.pbe.getCipher(d, s.encryptionParams, n),
                                    u = e.util.createBuffer(s.encryptedData);
                                return p.update(u),
                                p.finish() && (a = i.fromDer(p.output)),
                                    a
                            },
                            r.encryptedPrivateKeyToPem = function(t, n) {
                                var r = {
                                    type: "ENCRYPTED PRIVATE KEY",
                                    body: i.toDer(t).getBytes()
                                };
                                return e.pem.encode(r, {
                                    maxline: n
                                })
                            },
                            r.encryptedPrivateKeyFromPem = function(t) {
                                var n = e.pem.decode(t)[0];
                                if ("ENCRYPTED PRIVATE KEY" !== n.type) {
                                    var r = new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');
                                    throw r.headerType = n.type,
                                        r
                                }
                                if (n.procType && "ENCRYPTED" === n.procType.type) throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");
                                return i.fromDer(n.body)
                            },
                            r.encryptRsaPrivateKey = function(t, n, a) {
                                if (a = a || {},
                                        !a.legacy) {
                                    var o = r.wrapRsaPrivateKey(r.privateKeyToAsn1(t));
                                    return o = r.encryptPrivateKeyInfo(o, n, a),
                                        r.encryptedPrivateKeyToPem(o)
                                }
                                var s, c, l, d;
                                switch (a.algorithm) {
                                    case "aes128":
                                        s = "AES-128-CBC",
                                            l = 16,
                                            c = e.random.getBytesSync(16),
                                            d = e.aes.createEncryptionCipher;
                                        break;
                                    case "aes192":
                                        s = "AES-192-CBC",
                                            l = 24,
                                            c = e.random.getBytesSync(16),
                                            d = e.aes.createEncryptionCipher;
                                        break;
                                    case "aes256":
                                        s = "AES-256-CBC",
                                            l = 32,
                                            c = e.random.getBytesSync(16),
                                            d = e.aes.createEncryptionCipher;
                                        break;
                                    case "3des":
                                        s = "DES-EDE3-CBC",
                                            l = 24,
                                            c = e.random.getBytesSync(8),
                                            d = e.des.createEncryptionCipher;
                                        break;
                                    case "des":
                                        s = "DES-CBC",
                                            l = 8,
                                            c = e.random.getBytesSync(8),
                                            d = e.des.createEncryptionCipher;
                                        break;
                                    default:
                                        var p = new Error('Could not encrypt RSA private key; unsupported encryption algorithm "' + a.algorithm + '".');
                                        throw p.algorithm = a.algorithm,
                                            p
                                }
                                var u = e.pbe.opensslDeriveBytes(n, c.substr(0, 8), l),
                                    f = d(u);
                                f.start(c),
                                    f.update(i.toDer(r.privateKeyToAsn1(t))),
                                    f.finish();
                                var h = {
                                    type: "RSA PRIVATE KEY",
                                    procType: {
                                        version: "4",
                                        type: "ENCRYPTED"
                                    },
                                    dekInfo: {
                                        algorithm: s,
                                        parameters: e.util.bytesToHex(c).toUpperCase()
                                    },
                                    body: f.output.getBytes()
                                };
                                return e.pem.encode(h)
                            },
                            r.decryptRsaPrivateKey = function(t, n) {
                                var a = null,
                                    o = e.pem.decode(t)[0];
                                if ("ENCRYPTED PRIVATE KEY" !== o.type && "PRIVATE KEY" !== o.type && "RSA PRIVATE KEY" !== o.type) {
                                    var s = new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');
                                    throw s.headerType = s,
                                        s
                                }
                                if (o.procType && "ENCRYPTED" === o.procType.type) {
                                    var c, l;
                                    switch (o.dekInfo.algorithm) {
                                        case "DES-CBC":
                                            c = 8,
                                                l = e.des.createDecryptionCipher;
                                            break;
                                        case "DES-EDE3-CBC":
                                            c = 24,
                                                l = e.des.createDecryptionCipher;
                                            break;
                                        case "AES-128-CBC":
                                            c = 16,
                                                l = e.aes.createDecryptionCipher;
                                            break;
                                        case "AES-192-CBC":
                                            c = 24,
                                                l = e.aes.createDecryptionCipher;
                                            break;
                                        case "AES-256-CBC":
                                            c = 32,
                                                l = e.aes.createDecryptionCipher;
                                            break;
                                        case "RC2-40-CBC":
                                            c = 5,
                                                l = function(t) {
                                                    return e.rc2.createDecryptionCipher(t, 40)
                                                };
                                            break;
                                        case "RC2-64-CBC":
                                            c = 8,
                                                l = function(t) {
                                                    return e.rc2.createDecryptionCipher(t, 64)
                                                };
                                            break;
                                        case "RC2-128-CBC":
                                            c = 16,
                                                l = function(t) {
                                                    return e.rc2.createDecryptionCipher(t, 128)
                                                };
                                            break;
                                        default:
                                            var s = new Error('Could not decrypt private key; unsupported encryption algorithm "' + o.dekInfo.algorithm + '".');
                                            throw s.algorithm = o.dekInfo.algorithm,
                                                s
                                    }
                                    var d = e.util.hexToBytes(o.dekInfo.parameters),
                                        p = e.pbe.opensslDeriveBytes(n, d.substr(0, 8), c),
                                        u = l(p);
                                    if (u.start(d), u.update(e.util.createBuffer(o.body)), !u.finish()) return a;
                                    a = u.output.getBytes()
                                } else a = o.body;
                                return a = "ENCRYPTED PRIVATE KEY" === o.type ? r.decryptPrivateKeyInfo(i.fromDer(a), n) : i.fromDer(a),
                                null !== a && (a = r.privateKeyFromAsn1(a)),
                                    a
                            },
                            r.pbe.generatePkcs12Key = function(t, n, i, r, a, o) {
                                var s, c; ("undefined" == typeof o || null === o) && (o = e.md.sha1.create());
                                var l = o.digestLength,
                                    d = o.blockLength,
                                    p = new e.util.ByteBuffer,
                                    u = new e.util.ByteBuffer;
                                if (null !== t && void 0 !== t) {
                                    for (c = 0; c < t.length; c++) u.putInt16(t.charCodeAt(c));
                                    u.putInt16(0)
                                }
                                var f = u.length(),
                                    h = n.length(),
                                    g = new e.util.ByteBuffer;
                                g.fillWithByte(i, d);
                                var m = d * Math.ceil(h / d),
                                    y = new e.util.ByteBuffer;
                                for (c = 0; m > c; c++) y.putByte(n.at(c % h));
                                var v = d * Math.ceil(f / d),
                                    C = new e.util.ByteBuffer;
                                for (c = 0; v > c; c++) C.putByte(u.at(c % f));
                                var S = y;
                                S.putBuffer(C);
                                for (var _ = Math.ceil(a / l), b = 1; _ >= b; b++) {
                                    var E = new e.util.ByteBuffer;
                                    E.putBytes(g.bytes()),
                                        E.putBytes(S.bytes());
                                    for (var I = 0; r > I; I++) o.start(),
                                        o.update(E.getBytes()),
                                        E = o.digest();
                                    var A = new e.util.ByteBuffer;
                                    for (c = 0; d > c; c++) A.putByte(E.at(c % l));
                                    var T = Math.ceil(h / d) + Math.ceil(f / d),
                                        k = new e.util.ByteBuffer;
                                    for (s = 0; T > s; s++) {
                                        var w = new e.util.ByteBuffer(S.getBytes(d)),
                                            $ = 511;
                                        for (c = A.length() - 1; c >= 0; c--) $ >>= 8,
                                            $ += A.at(c) + w.at(c),
                                            w.setAt(c, 255 & $);
                                        k.putBuffer(w)
                                    }
                                    S = k,
                                        p.putBuffer(E)
                                }
                                return p.truncate(p.length() - a),
                                    p
                            },
                            r.pbe.getCipher = function(e, t, n) {
                                switch (e) {
                                    case r.oids.pkcs5PBES2:
                                        return r.pbe.getCipherForPBES2(e, t, n);
                                    case r.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:
                                    case r.oids["pbewithSHAAnd40BitRC2-CBC"]:
                                        return r.pbe.getCipherForPKCS12PBE(e, t, n);
                                    default:
                                        var i = new Error("Cannot read encrypted PBE data block. Unsupported OID.");
                                        throw i.oid = e,
                                            i.supportedOids = ["pkcs5PBES2", "pbeWithSHAAnd3-KeyTripleDES-CBC", "pbewithSHAAnd40BitRC2-CBC"],
                                            i
                                }
                            },
                            r.pbe.getCipherForPBES2 = function(t, n, a) {
                                var o = {},
                                    c = [];
                                if (!i.validate(n, s, o, c)) {
                                    var l = new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");
                                    throw l.errors = c,
                                        l
                                }
                                if (t = i.derToOid(o.kdfOid), t !== r.oids.pkcs5PBKDF2) {
                                    var l = new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");
                                    throw l.oid = t,
                                        l.supportedOids = ["pkcs5PBKDF2"],
                                        l
                                }
                                if (t = i.derToOid(o.encOid), t !== r.oids["aes128-CBC"] && t !== r.oids["aes192-CBC"] && t !== r.oids["aes256-CBC"] && t !== r.oids["des-EDE3-CBC"] && t !== r.oids.desCBC) {
                                    var l = new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");
                                    throw l.oid = t,
                                        l.supportedOids = ["aes128-CBC", "aes192-CBC", "aes256-CBC", "des-EDE3-CBC", "desCBC"],
                                        l
                                }
                                var d = o.kdfSalt,
                                    p = e.util.createBuffer(o.kdfIterationCount);
                                p = p.getInt(p.length() << 3);
                                var u, f;
                                switch (r.oids[t]) {
                                    case "aes128-CBC":
                                        u = 16,
                                            f = e.aes.createDecryptionCipher;
                                        break;
                                    case "aes192-CBC":
                                        u = 24,
                                            f = e.aes.createDecryptionCipher;
                                        break;
                                    case "aes256-CBC":
                                        u = 32,
                                            f = e.aes.createDecryptionCipher;
                                        break;
                                    case "des-EDE3-CBC":
                                        u = 24,
                                            f = e.des.createDecryptionCipher;
                                        break;
                                    case "desCBC":
                                        u = 8,
                                            f = e.des.createDecryptionCipher
                                }
                                var h = e.pkcs5.pbkdf2(a, d, p, u),
                                    g = o.encIv,
                                    m = f(h);
                                return m.start(g),
                                    m
                            },
                            r.pbe.getCipherForPKCS12PBE = function(t, n, a) {
                                var o = {},
                                    s = [];
                                if (!i.validate(n, c, o, s)) {
                                    var l = new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");
                                    throw l.errors = s,
                                        l
                                }
                                var d = e.util.createBuffer(o.salt),
                                    p = e.util.createBuffer(o.iterations);
                                p = p.getInt(p.length() << 3);
                                var u, f, h;
                                switch (t) {
                                    case r.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:
                                        u = 24,
                                            f = 8,
                                            h = e.des.startDecrypting;
                                        break;
                                    case r.oids["pbewithSHAAnd40BitRC2-CBC"]:
                                        u = 5,
                                            f = 8,
                                            h = function(t, n) {
                                                var i = e.rc2.createDecryptionCipher(t, 40);
                                                return i.start(n, null),
                                                    i
                                            };
                                        break;
                                    default:
                                        var l = new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");
                                        throw l.oid = t,
                                            l
                                }
                                var g = r.pbe.generatePkcs12Key(a, d, 1, p, u),
                                    m = r.pbe.generatePkcs12Key(a, d, 2, p, f);
                                return h(g, m)
                            },
                            r.pbe.opensslDeriveBytes = function(n, i, r, a) { ("undefined" == typeof a || null === a) && (a = e.md.md5.create()),
                            null === i && (i = "");
                                for (var o = [t(a, n + i)], s = 16, c = 1; r > s; ++c, s += 16) o.push(t(a, o[c - 1] + n + i));
                                return o.join("").substr(0, r)
                            }
                    }
                    var i = "pbe";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/pbe", ["require", "module", "./aes", "./asn1", "./des", "./md", "./oids", "./pem", "./pbkdf2", "./random", "./rc2", "./rsa", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        var t = e.asn1,
                            n = e.pkcs7asn1 = e.pkcs7asn1 || {};
                        e.pkcs7 = e.pkcs7 || {},
                            e.pkcs7.asn1 = n;
                        var i = {
                            name: "ContentInfo",
                            tagClass: t.Class.UNIVERSAL,
                            type: t.Type.SEQUENCE,
                            constructed: !0,
                            value: [{
                                name: "ContentInfo.ContentType",
                                tagClass: t.Class.UNIVERSAL,
                                type: t.Type.OID,
                                constructed: !1,
                                capture: "contentType"
                            },
                                {
                                    name: "ContentInfo.content",
                                    tagClass: t.Class.CONTEXT_SPECIFIC,
                                    type: 0,
                                    constructed: !0,
                                    optional: !0,
                                    captureAsn1: "content"
                                }]
                        };
                        n.contentInfoValidator = i;
                        var r = {
                            name: "EncryptedContentInfo",
                            tagClass: t.Class.UNIVERSAL,
                            type: t.Type.SEQUENCE,
                            constructed: !0,
                            value: [{
                                name: "EncryptedContentInfo.contentType",
                                tagClass: t.Class.UNIVERSAL,
                                type: t.Type.OID,
                                constructed: !1,
                                capture: "contentType"
                            },
                                {
                                    name: "EncryptedContentInfo.contentEncryptionAlgorithm",
                                    tagClass: t.Class.UNIVERSAL,
                                    type: t.Type.SEQUENCE,
                                    constructed: !0,
                                    value: [{
                                        name: "EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",
                                        tagClass: t.Class.UNIVERSAL,
                                        type: t.Type.OID,
                                        constructed: !1,
                                        capture: "encAlgorithm"
                                    },
                                        {
                                            name: "EncryptedContentInfo.contentEncryptionAlgorithm.parameter",
                                            tagClass: t.Class.UNIVERSAL,
                                            captureAsn1: "encParameter"
                                        }]
                                },
                                {
                                    name: "EncryptedContentInfo.encryptedContent",
                                    tagClass: t.Class.CONTEXT_SPECIFIC,
                                    type: 0,
                                    capture: "encryptedContent",
                                    captureAsn1: "encryptedContentAsn1"
                                }]
                        };
                        n.envelopedDataValidator = {
                            name: "EnvelopedData",
                            tagClass: t.Class.UNIVERSAL,
                            type: t.Type.SEQUENCE,
                            constructed: !0,
                            value: [{
                                name: "EnvelopedData.Version",
                                tagClass: t.Class.UNIVERSAL,
                                type: t.Type.INTEGER,
                                constructed: !1,
                                capture: "version"
                            },
                                {
                                    name: "EnvelopedData.RecipientInfos",
                                    tagClass: t.Class.UNIVERSAL,
                                    type: t.Type.SET,
                                    constructed: !0,
                                    captureAsn1: "recipientInfos"
                                }].concat(r)
                        },
                            n.encryptedDataValidator = {
                                name: "EncryptedData",
                                tagClass: t.Class.UNIVERSAL,
                                type: t.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "EncryptedData.Version",
                                    tagClass: t.Class.UNIVERSAL,
                                    type: t.Type.INTEGER,
                                    constructed: !1,
                                    capture: "version"
                                }].concat(r)
                            };
                        var a = {
                            name: "SignerInfo",
                            tagClass: t.Class.UNIVERSAL,
                            type: t.Type.SEQUENCE,
                            constructed: !0,
                            value: [{
                                name: "SignerInfo.version",
                                tagClass: t.Class.UNIVERSAL,
                                type: t.Type.INTEGER,
                                constructed: !1
                            },
                                {
                                    name: "SignerInfo.issuerAndSerialNumber",
                                    tagClass: t.Class.UNIVERSAL,
                                    type: t.Type.SEQUENCE,
                                    constructed: !0,
                                    value: [{
                                        name: "SignerInfo.issuerAndSerialNumber.issuer",
                                        tagClass: t.Class.UNIVERSAL,
                                        type: t.Type.SEQUENCE,
                                        constructed: !0,
                                        captureAsn1: "issuer"
                                    },
                                        {
                                            name: "SignerInfo.issuerAndSerialNumber.serialNumber",
                                            tagClass: t.Class.UNIVERSAL,
                                            type: t.Type.INTEGER,
                                            constructed: !1,
                                            capture: "serial"
                                        }]
                                },
                                {
                                    name: "SignerInfo.digestAlgorithm",
                                    tagClass: t.Class.UNIVERSAL,
                                    type: t.Type.SEQUENCE,
                                    constructed: !0,
                                    value: [{
                                        name: "SignerInfo.digestAlgorithm.algorithm",
                                        tagClass: t.Class.UNIVERSAL,
                                        type: t.Type.OID,
                                        constructed: !1,
                                        capture: "digestAlgorithm"
                                    },
                                        {
                                            name: "SignerInfo.digestAlgorithm.parameter",
                                            tagClass: t.Class.UNIVERSAL,
                                            constructed: !1,
                                            captureAsn1: "digestParameter",
                                            optional: !0
                                        }]
                                },
                                {
                                    name: "SignerInfo.authenticatedAttributes",
                                    tagClass: t.Class.CONTEXT_SPECIFIC,
                                    type: 0,
                                    constructed: !0,
                                    optional: !0,
                                    capture: "authenticatedAttributes"
                                },
                                {
                                    name: "SignerInfo.digestEncryptionAlgorithm",
                                    tagClass: t.Class.UNIVERSAL,
                                    type: t.Type.SEQUENCE,
                                    constructed: !0,
                                    capture: "signatureAlgorithm"
                                },
                                {
                                    name: "SignerInfo.encryptedDigest",
                                    tagClass: t.Class.UNIVERSAL,
                                    type: t.Type.OCTETSTRING,
                                    constructed: !1,
                                    capture: "signature"
                                },
                                {
                                    name: "SignerInfo.unauthenticatedAttributes",
                                    tagClass: t.Class.CONTEXT_SPECIFIC,
                                    type: 1,
                                    constructed: !0,
                                    optional: !0,
                                    capture: "unauthenticatedAttributes"
                                }]
                        };
                        n.signedDataValidator = {
                            name: "SignedData",
                            tagClass: t.Class.UNIVERSAL,
                            type: t.Type.SEQUENCE,
                            constructed: !0,
                            value: [{
                                name: "SignedData.Version",
                                tagClass: t.Class.UNIVERSAL,
                                type: t.Type.INTEGER,
                                constructed: !1,
                                capture: "version"
                            },
                                {
                                    name: "SignedData.DigestAlgorithms",
                                    tagClass: t.Class.UNIVERSAL,
                                    type: t.Type.SET,
                                    constructed: !0,
                                    captureAsn1: "digestAlgorithms"
                                },
                                i, {
                                    name: "SignedData.Certificates",
                                    tagClass: t.Class.CONTEXT_SPECIFIC,
                                    type: 0,
                                    optional: !0,
                                    captureAsn1: "certificates"
                                },
                                {
                                    name: "SignedData.CertificateRevocationLists",
                                    tagClass: t.Class.CONTEXT_SPECIFIC,
                                    type: 1,
                                    optional: !0,
                                    captureAsn1: "crls"
                                },
                                {
                                    name: "SignedData.SignerInfos",
                                    tagClass: t.Class.UNIVERSAL,
                                    type: t.Type.SET,
                                    capture: "signerInfos",
                                    optional: !0,
                                    value: [a]
                                }]
                        },
                            n.recipientInfoValidator = {
                                name: "RecipientInfo",
                                tagClass: t.Class.UNIVERSAL,
                                type: t.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "RecipientInfo.version",
                                    tagClass: t.Class.UNIVERSAL,
                                    type: t.Type.INTEGER,
                                    constructed: !1,
                                    capture: "version"
                                },
                                    {
                                        name: "RecipientInfo.issuerAndSerial",
                                        tagClass: t.Class.UNIVERSAL,
                                        type: t.Type.SEQUENCE,
                                        constructed: !0,
                                        value: [{
                                            name: "RecipientInfo.issuerAndSerial.issuer",
                                            tagClass: t.Class.UNIVERSAL,
                                            type: t.Type.SEQUENCE,
                                            constructed: !0,
                                            captureAsn1: "issuer"
                                        },
                                            {
                                                name: "RecipientInfo.issuerAndSerial.serialNumber",
                                                tagClass: t.Class.UNIVERSAL,
                                                type: t.Type.INTEGER,
                                                constructed: !1,
                                                capture: "serial"
                                            }]
                                    },
                                    {
                                        name: "RecipientInfo.keyEncryptionAlgorithm",
                                        tagClass: t.Class.UNIVERSAL,
                                        type: t.Type.SEQUENCE,
                                        constructed: !0,
                                        value: [{
                                            name: "RecipientInfo.keyEncryptionAlgorithm.algorithm",
                                            tagClass: t.Class.UNIVERSAL,
                                            type: t.Type.OID,
                                            constructed: !1,
                                            capture: "encAlgorithm"
                                        },
                                            {
                                                name: "RecipientInfo.keyEncryptionAlgorithm.parameter",
                                                tagClass: t.Class.UNIVERSAL,
                                                constructed: !1,
                                                captureAsn1: "encParameter"
                                            }]
                                    },
                                    {
                                        name: "RecipientInfo.encryptedKey",
                                        tagClass: t.Class.UNIVERSAL,
                                        type: t.Type.OCTETSTRING,
                                        constructed: !1,
                                        capture: "encKey"
                                    }]
                            }
                    }
                    var i = "pkcs7asn1";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/pkcs7asn1", ["require", "module", "./asn1", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        e.mgf = e.mgf || {};
                        var t = e.mgf.mgf1 = e.mgf1 = e.mgf1 || {};
                        t.create = function(t) {
                            var n = {
                                generate: function(n, i) {
                                    for (var r = new e.util.ByteBuffer,
                                             a = Math.ceil(i / t.digestLength), o = 0; a > o; o++) {
                                        var s = new e.util.ByteBuffer;
                                        s.putInt32(o),
                                            t.start(),
                                            t.update(n + s.getBytes()),
                                            r.putBuffer(t.digest())
                                    }
                                    return r.truncate(r.length() - i),
                                        r.getBytes()
                                }
                            };
                            return n
                        }
                    }
                    var i = "mgf1";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/mgf1", ["require", "module", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        e.mgf = e.mgf || {},
                            e.mgf.mgf1 = e.mgf1
                    }
                    var i = "mgf";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/mgf", ["require", "module", "./mgf1"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        var t = e.pss = e.pss || {};
                        t.create = function(t) {
                            3 === arguments.length && (t = {
                                md: arguments[0],
                                mgf: arguments[1],
                                saltLength: arguments[2]
                            });
                            var n = t.md,
                                i = t.mgf,
                                r = n.digestLength,
                                a = t.salt || null;
                            "string" == typeof a && (a = e.util.createBuffer(a));
                            var o;
                            if ("saltLength" in t) o = t.saltLength;
                            else {
                                if (null === a) throw new Error("Salt length not specified or specific salt not given.");
                                o = a.length()
                            }
                            if (null !== a && a.length() !== o) throw new Error("Given salt length does not match length of given salt.");
                            var s = t.prng || e.random,
                                c = {};
                            return c.encode = function(t, c) {
                                var l, d = c - 1,
                                    p = Math.ceil(d / 8),
                                    u = t.digest().getBytes();
                                if (r + o + 2 > p) throw new Error("Message is too long to encrypt.");
                                var f;
                                f = null === a ? s.getBytesSync(o) : a.bytes();
                                var h = new e.util.ByteBuffer;
                                h.fillWithByte(0, 8),
                                    h.putBytes(u),
                                    h.putBytes(f),
                                    n.start(),
                                    n.update(h.getBytes());
                                var g = n.digest().getBytes(),
                                    m = new e.util.ByteBuffer;
                                m.fillWithByte(0, p - o - r - 2),
                                    m.putByte(1),
                                    m.putBytes(f);
                                var y = m.getBytes(),
                                    v = p - r - 1,
                                    C = i.generate(g, v),
                                    S = "";
                                for (l = 0; v > l; l++) S += String.fromCharCode(y.charCodeAt(l) ^ C.charCodeAt(l));
                                var _ = 65280 >> 8 * p - d & 255;
                                return S = String.fromCharCode(S.charCodeAt(0) & ~_) + S.substr(1),
                                S + g + String.fromCharCode(188)
                            },
                                c.verify = function(t, a, s) {
                                    var c, l = s - 1,
                                        d = Math.ceil(l / 8);
                                    if (a = a.substr( - d), r + o + 2 > d) throw new Error("Inconsistent parameters to PSS signature verification.");
                                    if (188 !== a.charCodeAt(d - 1)) throw new Error("Encoded message does not end in 0xBC.");
                                    var p = d - r - 1,
                                        u = a.substr(0, p),
                                        f = a.substr(p, r),
                                        h = 65280 >> 8 * d - l & 255;
                                    if (0 !== (u.charCodeAt(0) & h)) throw new Error("Bits beyond keysize not zero as expected.");
                                    var g = i.generate(f, p),
                                        m = "";
                                    for (c = 0; p > c; c++) m += String.fromCharCode(u.charCodeAt(c) ^ g.charCodeAt(c));
                                    m = String.fromCharCode(m.charCodeAt(0) & ~h) + m.substr(1);
                                    var y = d - r - o - 2;
                                    for (c = 0; y > c; c++) if (0 !== m.charCodeAt(c)) throw new Error("Leftmost octets not zero as expected");
                                    if (1 !== m.charCodeAt(y)) throw new Error("Inconsistent PSS signature, 0x01 marker not found");
                                    var v = m.substr( - o),
                                        C = new e.util.ByteBuffer;
                                    C.fillWithByte(0, 8),
                                        C.putBytes(t),
                                        C.putBytes(v),
                                        n.start(),
                                        n.update(C.getBytes());
                                    var S = n.digest().getBytes();
                                    return f === S
                                },
                                c
                        }
                    }
                    var i = "pss";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/pss", ["require", "module", "./random", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(e, t) {
                            "string" == typeof t && (t = {
                                shortName: t
                            });
                            for (var n, i = null,
                                     r = 0; null === i && r < e.attributes.length; ++r) n = e.attributes[r],
                                t.type && t.type === n.type ? i = n: t.name && t.name === n.name ? i = n: t.shortName && t.shortName === n.shortName && (i = n);
                            return i
                        }
                        function n(t) {
                            for (var n, i, r = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, []), a = t.attributes, o = 0; o < a.length; ++o) {
                                n = a[o];
                                var c = n.value,
                                    l = s.Type.PRINTABLESTRING;
                                "valueTagClass" in n && (l = n.valueTagClass, l === s.Type.UTF8 && (c = e.util.encodeUtf8(c))),
                                    i = s.create(s.Class.UNIVERSAL, s.Type.SET, !0, [s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(n.type).getBytes()), s.create(s.Class.UNIVERSAL, l, !1, c)])]),
                                    r.value.push(i)
                            }
                            return r
                        }
                        function i(e) {
                            for (var t, n = 0; n < e.length; ++n) {
                                if (t = e[n], "undefined" == typeof t.name && (t.type && t.type in c.oids ? t.name = c.oids[t.type] : t.shortName && t.shortName in d && (t.name = c.oids[d[t.shortName]])), "undefined" == typeof t.type) {
                                    if (! (t.name && t.name in c.oids)) {
                                        var i = new Error("Attribute type not specified.");
                                        throw i.attribute = t,
                                            i
                                    }
                                    t.type = c.oids[t.name]
                                }
                                if ("undefined" == typeof t.shortName && t.name && t.name in d && (t.shortName = d[t.name]), t.type === l.extensionRequest && (t.valueConstructed = !0, t.valueTagClass = s.Type.SEQUENCE, !t.value && t.extensions)) {
                                    t.value = [];
                                    for (var a = 0; a < t.extensions.length; ++a) t.value.push(c.certificateExtensionToAsn1(r(t.extensions[a])))
                                }
                                if ("undefined" == typeof t.value) {
                                    var i = new Error("Attribute value not specified.");
                                    throw i.attribute = t,
                                        i
                                }
                            }
                        }
                        function r(t, i) {
                            if (i = i || {},
                                "undefined" == typeof t.name && t.id && t.id in c.oids && (t.name = c.oids[t.id]), "undefined" == typeof t.id) {
                                if (! (t.name && t.name in c.oids)) {
                                    var r = new Error("Extension ID not specified.");
                                    throw r.extension = t,
                                        r
                                }
                                t.id = c.oids[t.name]
                            }
                            if ("undefined" != typeof t.value) return t;
                            if ("keyUsage" === t.name) {
                                var a = 0,
                                    o = 0,
                                    d = 0;
                                t.digitalSignature && (o |= 128, a = 7),
                                t.nonRepudiation && (o |= 64, a = 6),
                                t.keyEncipherment && (o |= 32, a = 5),
                                t.dataEncipherment && (o |= 16, a = 4),
                                t.keyAgreement && (o |= 8, a = 3),
                                t.keyCertSign && (o |= 4, a = 2),
                                t.cRLSign && (o |= 2, a = 1),
                                t.encipherOnly && (o |= 1, a = 0),
                                t.decipherOnly && (d |= 128, a = 7);
                                var p = String.fromCharCode(a);
                                0 !== d ? p += String.fromCharCode(o) + String.fromCharCode(d) : 0 !== o && (p += String.fromCharCode(o)),
                                    t.value = s.create(s.Class.UNIVERSAL, s.Type.BITSTRING, !1, p)
                            } else if ("basicConstraints" === t.name) t.value = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, []),
                            t.cA && t.value.value.push(s.create(s.Class.UNIVERSAL, s.Type.BOOLEAN, !1, String.fromCharCode(255))),
                            "pathLenConstraint" in t && t.value.value.push(s.create(s.Class.UNIVERSAL, s.Type.INTEGER, !1, s.integerToDer(t.pathLenConstraint).getBytes()));
                            else if ("extKeyUsage" === t.name) {
                                t.value = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, []);
                                var u = t.value.value;
                                for (var f in t) t[f] === !0 && (f in l ? u.push(s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(l[f]).getBytes())) : -1 !== f.indexOf(".") && u.push(s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(f).getBytes())))
                            } else if ("nsCertType" === t.name) {
                                var a = 0,
                                    o = 0;
                                t.client && (o |= 128, a = 7),
                                t.server && (o |= 64, a = 6),
                                t.email && (o |= 32, a = 5),
                                t.objsign && (o |= 16, a = 4),
                                t.reserved && (o |= 8, a = 3),
                                t.sslCA && (o |= 4, a = 2),
                                t.emailCA && (o |= 2, a = 1),
                                t.objCA && (o |= 1, a = 0);
                                var p = String.fromCharCode(a);
                                0 !== o && (p += String.fromCharCode(o)),
                                    t.value = s.create(s.Class.UNIVERSAL, s.Type.BITSTRING, !1, p)
                            } else if ("subjectAltName" === t.name || "issuerAltName" === t.name) {
                                t.value = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, []);
                                for (var h, g = 0; g < t.altNames.length; ++g) {
                                    h = t.altNames[g];
                                    var p = h.value;
                                    if (7 === h.type && h.ip) {
                                        if (p = e.util.bytesFromIP(h.ip), null === p) {
                                            var r = new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');
                                            throw r.extension = t,
                                                r
                                        }
                                    } else 8 === h.type && (p = s.oidToDer(h.oid ? s.oidToDer(h.oid) : p));
                                    t.value.value.push(s.create(s.Class.CONTEXT_SPECIFIC, h.type, !1, p))
                                }
                            } else if ("subjectKeyIdentifier" === t.name && i.cert) {
                                var m = i.cert.generateSubjectKeyIdentifier();
                                t.subjectKeyIdentifier = m.toHex(),
                                    t.value = s.create(s.Class.UNIVERSAL, s.Type.OCTETSTRING, !1, m.getBytes())
                            } else if ("authorityKeyIdentifier" === t.name && i.cert) {
                                t.value = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, []);
                                var u = t.value.value;
                                if (t.keyIdentifier) {
                                    var y = t.keyIdentifier === !0 ? i.cert.generateSubjectKeyIdentifier().getBytes() : t.keyIdentifier;
                                    u.push(s.create(s.Class.CONTEXT_SPECIFIC, 0, !1, y))
                                }
                                if (t.authorityCertIssuer) {
                                    var v = [s.create(s.Class.CONTEXT_SPECIFIC, 4, !0, [n(t.authorityCertIssuer === !0 ? i.cert.issuer: t.authorityCertIssuer)])];
                                    u.push(s.create(s.Class.CONTEXT_SPECIFIC, 1, !0, v))
                                }
                                if (t.serialNumber) {
                                    var C = e.util.hexToBytes(t.serialNumber === !0 ? i.cert.serialNumber: t.serialNumber);
                                    u.push(s.create(s.Class.CONTEXT_SPECIFIC, 2, !1, C))
                                }
                            } else if ("cRLDistributionPoints" === t.name) {
                                t.value = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, []);
                                for (var h, u = t.value.value,
                                         S = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, []), _ = s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, []), g = 0; g < t.altNames.length; ++g) {
                                    h = t.altNames[g];
                                    var p = h.value;
                                    if (7 === h.type && h.ip) {
                                        if (p = e.util.bytesFromIP(h.ip), null === p) {
                                            var r = new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');
                                            throw r.extension = t,
                                                r
                                        }
                                    } else 8 === h.type && (p = s.oidToDer(h.oid ? s.oidToDer(h.oid) : p));
                                    _.value.push(s.create(s.Class.CONTEXT_SPECIFIC, h.type, !1, p))
                                }
                                S.value.push(s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, [_])),
                                    u.push(S)
                            }
                            if ("undefined" == typeof t.value) {
                                var r = new Error("Extension value not specified.");
                                throw r.extension = t,
                                    r
                            }
                            return t
                        }
                        function a(e, t) {
                            switch (e) {
                                case l["RSASSA-PSS"]:
                                    var n = [];
                                    return void 0 !== t.hash.algorithmOid && n.push(s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, [s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(t.hash.algorithmOid).getBytes()), s.create(s.Class.UNIVERSAL, s.Type.NULL, !1, "")])])),
                                    void 0 !== t.mgf.algorithmOid && n.push(s.create(s.Class.CONTEXT_SPECIFIC, 1, !0, [s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(t.mgf.algorithmOid).getBytes()), s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(t.mgf.hash.algorithmOid).getBytes()), s.create(s.Class.UNIVERSAL, s.Type.NULL, !1, "")])])])),
                                    void 0 !== t.saltLength && n.push(s.create(s.Class.CONTEXT_SPECIFIC, 2, !0, [s.create(s.Class.UNIVERSAL, s.Type.INTEGER, !1, s.integerToDer(t.saltLength).getBytes())])),
                                        s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, n);
                                default:
                                    return s.create(s.Class.UNIVERSAL, s.Type.NULL, !1, "")
                            }
                        }
                        function o(t) {
                            var n = s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, []);
                            if (0 === t.attributes.length) return n;
                            for (var i = t.attributes,
                                     r = 0; r < i.length; ++r) {
                                var a = i[r],
                                    o = a.value,
                                    c = s.Type.UTF8;
                                "valueTagClass" in a && (c = a.valueTagClass),
                                c === s.Type.UTF8 && (o = e.util.encodeUtf8(o));
                                var l = !1;
                                "valueConstructed" in a && (l = a.valueConstructed);
                                var d = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(a.type).getBytes()), s.create(s.Class.UNIVERSAL, s.Type.SET, !0, [s.create(s.Class.UNIVERSAL, c, l, o)])]);
                                n.value.push(d)
                            }
                            return n
                        }
                        var s = e.asn1,
                            c = e.pki = e.pki || {},
                            l = c.oids,
                            d = {};
                        d.CN = l.commonName,
                            d.commonName = "CN",
                            d.C = l.countryName,
                            d.countryName = "C",
                            d.L = l.localityName,
                            d.localityName = "L",
                            d.ST = l.stateOrProvinceName,
                            d.stateOrProvinceName = "ST",
                            d.O = l.organizationName,
                            d.organizationName = "O",
                            d.OU = l.organizationalUnitName,
                            d.organizationalUnitName = "OU",
                            d.E = l.emailAddress,
                            d.emailAddress = "E";
                        var p = e.pki.rsa.publicKeyValidator,
                            u = {
                                name: "Certificate",
                                tagClass: s.Class.UNIVERSAL,
                                type: s.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "Certificate.TBSCertificate",
                                    tagClass: s.Class.UNIVERSAL,
                                    type: s.Type.SEQUENCE,
                                    constructed: !0,
                                    captureAsn1: "tbsCertificate",
                                    value: [{
                                        name: "Certificate.TBSCertificate.version",
                                        tagClass: s.Class.CONTEXT_SPECIFIC,
                                        type: 0,
                                        constructed: !0,
                                        optional: !0,
                                        value: [{
                                            name: "Certificate.TBSCertificate.version.integer",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Type.INTEGER,
                                            constructed: !1,
                                            capture: "certVersion"
                                        }]
                                    },
                                        {
                                            name: "Certificate.TBSCertificate.serialNumber",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Type.INTEGER,
                                            constructed: !1,
                                            capture: "certSerialNumber"
                                        },
                                        {
                                            name: "Certificate.TBSCertificate.signature",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Type.SEQUENCE,
                                            constructed: !0,
                                            value: [{
                                                name: "Certificate.TBSCertificate.signature.algorithm",
                                                tagClass: s.Class.UNIVERSAL,
                                                type: s.Type.OID,
                                                constructed: !1,
                                                capture: "certinfoSignatureOid"
                                            },
                                                {
                                                    name: "Certificate.TBSCertificate.signature.parameters",
                                                    tagClass: s.Class.UNIVERSAL,
                                                    optional: !0,
                                                    captureAsn1: "certinfoSignatureParams"
                                                }]
                                        },
                                        {
                                            name: "Certificate.TBSCertificate.issuer",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Type.SEQUENCE,
                                            constructed: !0,
                                            captureAsn1: "certIssuer"
                                        },
                                        {
                                            name: "Certificate.TBSCertificate.validity",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Type.SEQUENCE,
                                            constructed: !0,
                                            value: [{
                                                name: "Certificate.TBSCertificate.validity.notBefore (utc)",
                                                tagClass: s.Class.UNIVERSAL,
                                                type: s.Type.UTCTIME,
                                                constructed: !1,
                                                optional: !0,
                                                capture: "certValidity1UTCTime"
                                            },
                                                {
                                                    name: "Certificate.TBSCertificate.validity.notBefore (generalized)",
                                                    tagClass: s.Class.UNIVERSAL,
                                                    type: s.Type.GENERALIZEDTIME,
                                                    constructed: !1,
                                                    optional: !0,
                                                    capture: "certValidity2GeneralizedTime"
                                                },
                                                {
                                                    name: "Certificate.TBSCertificate.validity.notAfter (utc)",
                                                    tagClass: s.Class.UNIVERSAL,
                                                    type: s.Type.UTCTIME,
                                                    constructed: !1,
                                                    optional: !0,
                                                    capture: "certValidity3UTCTime"
                                                },
                                                {
                                                    name: "Certificate.TBSCertificate.validity.notAfter (generalized)",
                                                    tagClass: s.Class.UNIVERSAL,
                                                    type: s.Type.GENERALIZEDTIME,
                                                    constructed: !1,
                                                    optional: !0,
                                                    capture: "certValidity4GeneralizedTime"
                                                }]
                                        },
                                        {
                                            name: "Certificate.TBSCertificate.subject",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Type.SEQUENCE,
                                            constructed: !0,
                                            captureAsn1: "certSubject"
                                        },
                                        p, {
                                            name: "Certificate.TBSCertificate.issuerUniqueID",
                                            tagClass: s.Class.CONTEXT_SPECIFIC,
                                            type: 1,
                                            constructed: !0,
                                            optional: !0,
                                            value: [{
                                                name: "Certificate.TBSCertificate.issuerUniqueID.id",
                                                tagClass: s.Class.UNIVERSAL,
                                                type: s.Type.BITSTRING,
                                                constructed: !1,
                                                capture: "certIssuerUniqueId"
                                            }]
                                        },
                                        {
                                            name: "Certificate.TBSCertificate.subjectUniqueID",
                                            tagClass: s.Class.CONTEXT_SPECIFIC,
                                            type: 2,
                                            constructed: !0,
                                            optional: !0,
                                            value: [{
                                                name: "Certificate.TBSCertificate.subjectUniqueID.id",
                                                tagClass: s.Class.UNIVERSAL,
                                                type: s.Type.BITSTRING,
                                                constructed: !1,
                                                capture: "certSubjectUniqueId"
                                            }]
                                        },
                                        {
                                            name: "Certificate.TBSCertificate.extensions",
                                            tagClass: s.Class.CONTEXT_SPECIFIC,
                                            type: 3,
                                            constructed: !0,
                                            captureAsn1: "certExtensions",
                                            optional: !0
                                        }]
                                },
                                    {
                                        name: "Certificate.signatureAlgorithm",
                                        tagClass: s.Class.UNIVERSAL,
                                        type: s.Type.SEQUENCE,
                                        constructed: !0,
                                        value: [{
                                            name: "Certificate.signatureAlgorithm.algorithm",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Type.OID,
                                            constructed: !1,
                                            capture: "certSignatureOid"
                                        },
                                            {
                                                name: "Certificate.TBSCertificate.signature.parameters",
                                                tagClass: s.Class.UNIVERSAL,
                                                optional: !0,
                                                captureAsn1: "certSignatureParams"
                                            }]
                                    },
                                    {
                                        name: "Certificate.signatureValue",
                                        tagClass: s.Class.UNIVERSAL,
                                        type: s.Type.BITSTRING,
                                        constructed: !1,
                                        capture: "certSignature"
                                    }]
                            },
                            f = {
                                name: "rsapss",
                                tagClass: s.Class.UNIVERSAL,
                                type: s.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "rsapss.hashAlgorithm",
                                    tagClass: s.Class.CONTEXT_SPECIFIC,
                                    type: 0,
                                    constructed: !0,
                                    value: [{
                                        name: "rsapss.hashAlgorithm.AlgorithmIdentifier",
                                        tagClass: s.Class.UNIVERSAL,
                                        type: s.Class.SEQUENCE,
                                        constructed: !0,
                                        optional: !0,
                                        value: [{
                                            name: "rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Type.OID,
                                            constructed: !1,
                                            capture: "hashOid"
                                        }]
                                    }]
                                },
                                    {
                                        name: "rsapss.maskGenAlgorithm",
                                        tagClass: s.Class.CONTEXT_SPECIFIC,
                                        type: 1,
                                        constructed: !0,
                                        value: [{
                                            name: "rsapss.maskGenAlgorithm.AlgorithmIdentifier",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Class.SEQUENCE,
                                            constructed: !0,
                                            optional: !0,
                                            value: [{
                                                name: "rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",
                                                tagClass: s.Class.UNIVERSAL,
                                                type: s.Type.OID,
                                                constructed: !1,
                                                capture: "maskGenOid"
                                            },
                                                {
                                                    name: "rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",
                                                    tagClass: s.Class.UNIVERSAL,
                                                    type: s.Type.SEQUENCE,
                                                    constructed: !0,
                                                    value: [{
                                                        name: "rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",
                                                        tagClass: s.Class.UNIVERSAL,
                                                        type: s.Type.OID,
                                                        constructed: !1,
                                                        capture: "maskGenHashOid"
                                                    }]
                                                }]
                                        }]
                                    },
                                    {
                                        name: "rsapss.saltLength",
                                        tagClass: s.Class.CONTEXT_SPECIFIC,
                                        type: 2,
                                        optional: !0,
                                        value: [{
                                            name: "rsapss.saltLength.saltLength",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Class.INTEGER,
                                            constructed: !1,
                                            capture: "saltLength"
                                        }]
                                    },
                                    {
                                        name: "rsapss.trailerField",
                                        tagClass: s.Class.CONTEXT_SPECIFIC,
                                        type: 3,
                                        optional: !0,
                                        value: [{
                                            name: "rsapss.trailer.trailer",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Class.INTEGER,
                                            constructed: !1,
                                            capture: "trailer"
                                        }]
                                    }]
                            },
                            h = {
                                name: "CertificationRequestInfo",
                                tagClass: s.Class.UNIVERSAL,
                                type: s.Type.SEQUENCE,
                                constructed: !0,
                                captureAsn1: "certificationRequestInfo",
                                value: [{
                                    name: "CertificationRequestInfo.integer",
                                    tagClass: s.Class.UNIVERSAL,
                                    type: s.Type.INTEGER,
                                    constructed: !1,
                                    capture: "certificationRequestInfoVersion"
                                },
                                    {
                                        name: "CertificationRequestInfo.subject",
                                        tagClass: s.Class.UNIVERSAL,
                                        type: s.Type.SEQUENCE,
                                        constructed: !0,
                                        captureAsn1: "certificationRequestInfoSubject"
                                    },
                                    p, {
                                        name: "CertificationRequestInfo.attributes",
                                        tagClass: s.Class.CONTEXT_SPECIFIC,
                                        type: 0,
                                        constructed: !0,
                                        optional: !0,
                                        capture: "certificationRequestInfoAttributes",
                                        value: [{
                                            name: "CertificationRequestInfo.attributes",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Type.SEQUENCE,
                                            constructed: !0,
                                            value: [{
                                                name: "CertificationRequestInfo.attributes.type",
                                                tagClass: s.Class.UNIVERSAL,
                                                type: s.Type.OID,
                                                constructed: !1
                                            },
                                                {
                                                    name: "CertificationRequestInfo.attributes.value",
                                                    tagClass: s.Class.UNIVERSAL,
                                                    type: s.Type.SET,
                                                    constructed: !0
                                                }]
                                        }]
                                    }]
                            },
                            g = {
                                name: "CertificationRequest",
                                tagClass: s.Class.UNIVERSAL,
                                type: s.Type.SEQUENCE,
                                constructed: !0,
                                captureAsn1: "csr",
                                value: [h, {
                                    name: "CertificationRequest.signatureAlgorithm",
                                    tagClass: s.Class.UNIVERSAL,
                                    type: s.Type.SEQUENCE,
                                    constructed: !0,
                                    value: [{
                                        name: "CertificationRequest.signatureAlgorithm.algorithm",
                                        tagClass: s.Class.UNIVERSAL,
                                        type: s.Type.OID,
                                        constructed: !1,
                                        capture: "csrSignatureOid"
                                    },
                                        {
                                            name: "CertificationRequest.signatureAlgorithm.parameters",
                                            tagClass: s.Class.UNIVERSAL,
                                            optional: !0,
                                            captureAsn1: "csrSignatureParams"
                                        }]
                                },
                                    {
                                        name: "CertificationRequest.signature",
                                        tagClass: s.Class.UNIVERSAL,
                                        type: s.Type.BITSTRING,
                                        constructed: !1,
                                        capture: "csrSignature"
                                    }]
                            };
                        c.RDNAttributesAsArray = function(e, t) {
                            for (var n, i, r, a = [], o = 0; o < e.value.length; ++o) {
                                n = e.value[o];
                                for (var c = 0; c < n.value.length; ++c) r = {},
                                    i = n.value[c],
                                    r.type = s.derToOid(i.value[0].value),
                                    r.value = i.value[1].value,
                                    r.valueTagClass = i.value[1].type,
                                r.type in l && (r.name = l[r.type], r.name in d && (r.shortName = d[r.name])),
                                t && (t.update(r.type), t.update(r.value)),
                                    a.push(r)
                            }
                            return a
                        },
                            c.CRIAttributesAsArray = function(e) {
                                for (var t = [], n = 0; n < e.length; ++n) for (var i = e[n], r = s.derToOid(i.value[0].value), a = i.value[1].value, o = 0; o < a.length; ++o) {
                                    var p = {};
                                    if (p.type = r, p.value = a[o].value, p.valueTagClass = a[o].type, p.type in l && (p.name = l[p.type], p.name in d && (p.shortName = d[p.name])), p.type === l.extensionRequest) {
                                        p.extensions = [];
                                        for (var u = 0; u < p.value.length; ++u) p.extensions.push(c.certificateExtensionFromAsn1(p.value[u]))
                                    }
                                    t.push(p)
                                }
                                return t
                            };
                        var m = function(e, t, n) {
                            var i = {};
                            if (e !== l["RSASSA-PSS"]) return i;
                            n && (i = {
                                hash: {
                                    algorithmOid: l.sha1
                                },
                                mgf: {
                                    algorithmOid: l.mgf1,
                                    hash: {
                                        algorithmOid: l.sha1
                                    }
                                },
                                saltLength: 20
                            });
                            var r = {},
                                a = [];
                            if (!s.validate(t, f, r, a)) {
                                var o = new Error("Cannot read RSASSA-PSS parameter block.");
                                throw o.errors = a,
                                    o
                            }
                            return void 0 !== r.hashOid && (i.hash = i.hash || {},
                                i.hash.algorithmOid = s.derToOid(r.hashOid)),
                            void 0 !== r.maskGenOid && (i.mgf = i.mgf || {},
                                i.mgf.algorithmOid = s.derToOid(r.maskGenOid), i.mgf.hash = i.mgf.hash || {},
                                i.mgf.hash.algorithmOid = s.derToOid(r.maskGenHashOid)),
                            void 0 !== r.saltLength && (i.saltLength = r.saltLength.charCodeAt(0)),
                                i
                        };
                        c.certificateFromPem = function(t, n, i) {
                            var r = e.pem.decode(t)[0];
                            if ("CERTIFICATE" !== r.type && "X509 CERTIFICATE" !== r.type && "TRUSTED CERTIFICATE" !== r.type) {
                                var a = new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');
                                throw a.headerType = r.type,
                                    a
                            }
                            if (r.procType && "ENCRYPTED" === r.procType.type) throw new Error("Could not convert certificate from PEM; PEM is encrypted.");
                            var o = s.fromDer(r.body, i);
                            return c.certificateFromAsn1(o, n)
                        },
                            c.certificateToPem = function(t, n) {
                                var i = {
                                    type: "CERTIFICATE",
                                    body: s.toDer(c.certificateToAsn1(t)).getBytes()
                                };
                                return e.pem.encode(i, {
                                    maxline: n
                                })
                            },
                            c.publicKeyFromPem = function(t) {
                                var n = e.pem.decode(t)[0];
                                if ("PUBLIC KEY" !== n.type && "RSA PUBLIC KEY" !== n.type) {
                                    var i = new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');
                                    throw i.headerType = n.type,
                                        i
                                }
                                if (n.procType && "ENCRYPTED" === n.procType.type) throw new Error("Could not convert public key from PEM; PEM is encrypted.");
                                var r = s.fromDer(n.body);
                                return c.publicKeyFromAsn1(r)
                            },
                            c.publicKeyToPem = function(t, n) {
                                var i = {
                                    type: "PUBLIC KEY",
                                    body: s.toDer(c.publicKeyToAsn1(t)).getBytes()
                                };
                                return e.pem.encode(i, {
                                    maxline: n
                                })
                            },
                            c.publicKeyToRSAPublicKeyPem = function(t, n) {
                                var i = {
                                    type: "RSA PUBLIC KEY",
                                    body: s.toDer(c.publicKeyToRSAPublicKey(t)).getBytes()
                                };
                                return e.pem.encode(i, {
                                    maxline: n
                                })
                            },
                            c.getPublicKeyFingerprint = function(t, n) {
                                n = n || {};
                                var i, r = n.md || e.md.sha1.create(),
                                    a = n.type || "RSAPublicKey";
                                switch (a) {
                                    case "RSAPublicKey":
                                        i = s.toDer(c.publicKeyToRSAPublicKey(t)).getBytes();
                                        break;
                                    case "SubjectPublicKeyInfo":
                                        i = s.toDer(c.publicKeyToAsn1(t)).getBytes();
                                        break;
                                    default:
                                        throw new Error('Unknown fingerprint type "' + n.type + '".')
                                }
                                r.start(),
                                    r.update(i);
                                var o = r.digest();
                                if ("hex" === n.encoding) {
                                    var l = o.toHex();
                                    return n.delimiter ? l.match(/.{2}/g).join(n.delimiter) : l
                                }
                                if ("binary" === n.encoding) return o.getBytes();
                                if (n.encoding) throw new Error('Unknown encoding "' + n.encoding + '".');
                                return o
                            },
                            c.certificationRequestFromPem = function(t, n, i) {
                                var r = e.pem.decode(t)[0];
                                if ("CERTIFICATE REQUEST" !== r.type) {
                                    var a = new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');
                                    throw a.headerType = r.type,
                                        a
                                }
                                if (r.procType && "ENCRYPTED" === r.procType.type) throw new Error("Could not convert certification request from PEM; PEM is encrypted.");
                                var o = s.fromDer(r.body, i);
                                return c.certificationRequestFromAsn1(o, n)
                            },
                            c.certificationRequestToPem = function(t, n) {
                                var i = {
                                    type: "CERTIFICATE REQUEST",
                                    body: s.toDer(c.certificationRequestToAsn1(t)).getBytes()
                                };
                                return e.pem.encode(i, {
                                    maxline: n
                                })
                            },
                            c.createCertificate = function() {
                                var n = {};
                                return n.version = 2,
                                    n.serialNumber = "00",
                                    n.signatureOid = null,
                                    n.signature = null,
                                    n.siginfo = {},
                                    n.siginfo.algorithmOid = null,
                                    n.validity = {},
                                    n.validity.notBefore = new Date,
                                    n.validity.notAfter = new Date,
                                    n.issuer = {},
                                    n.issuer.getField = function(e) {
                                        return t(n.issuer, e)
                                    },
                                    n.issuer.addField = function(e) {
                                        i([e]),
                                            n.issuer.attributes.push(e)
                                    },
                                    n.issuer.attributes = [],
                                    n.issuer.hash = null,
                                    n.subject = {},
                                    n.subject.getField = function(e) {
                                        return t(n.subject, e)
                                    },
                                    n.subject.addField = function(e) {
                                        i([e]),
                                            n.subject.attributes.push(e)
                                    },
                                    n.subject.attributes = [],
                                    n.subject.hash = null,
                                    n.extensions = [],
                                    n.publicKey = null,
                                    n.md = null,
                                    n.setSubject = function(e, t) {
                                        i(e),
                                            n.subject.attributes = e,
                                            delete n.subject.uniqueId,
                                        t && (n.subject.uniqueId = t),
                                            n.subject.hash = null
                                    },
                                    n.setIssuer = function(e, t) {
                                        i(e),
                                            n.issuer.attributes = e,
                                            delete n.issuer.uniqueId,
                                        t && (n.issuer.uniqueId = t),
                                            n.issuer.hash = null
                                    },
                                    n.setExtensions = function(e) {
                                        for (var t = 0; t < e.length; ++t) r(e[t], {
                                            cert: n
                                        });
                                        n.extensions = e
                                    },
                                    n.getExtension = function(e) {
                                        "string" == typeof e && (e = {
                                            name: e
                                        });
                                        for (var t, i = null,
                                                 r = 0; null === i && r < n.extensions.length; ++r) t = n.extensions[r],
                                            e.id && t.id === e.id ? i = t: e.name && t.name === e.name && (i = t);
                                        return i
                                    },
                                    n.sign = function(t, i) {
                                        n.md = i || e.md.sha1.create();
                                        var r = l[n.md.algorithm + "WithRSAEncryption"];
                                        if (!r) {
                                            var a = new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");
                                            throw a.algorithm = n.md.algorithm,
                                                a
                                        }
                                        n.signatureOid = n.siginfo.algorithmOid = r,
                                            n.tbsCertificate = c.getTBSCertificate(n);
                                        var o = s.toDer(n.tbsCertificate);
                                        n.md.update(o.getBytes()),
                                            n.signature = t.sign(n.md)
                                    },
                                    n.verify = function(t) {
                                        var i = !1;
                                        if (!n.issued(t)) {
                                            var r = t.issuer,
                                                a = n.subject,
                                                o = new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");
                                            throw o.expectedIssuer = r.attributes,
                                                o.actualIssuer = a.attributes,
                                                o
                                        }
                                        var d = t.md;
                                        if (null === d) {
                                            if (t.signatureOid in l) {
                                                var p = l[t.signatureOid];
                                                switch (p) {
                                                    case "sha1WithRSAEncryption":
                                                        d = e.md.sha1.create();
                                                        break;
                                                    case "md5WithRSAEncryption":
                                                        d = e.md.md5.create();
                                                        break;
                                                    case "sha256WithRSAEncryption":
                                                        d = e.md.sha256.create();
                                                        break;
                                                    case "sha512WithRSAEncryption":
                                                        d = e.md.sha512.create();
                                                        break;
                                                    case "RSASSA-PSS":
                                                        d = e.md.sha256.create()
                                                }
                                            }
                                            if (null === d) {
                                                var o = new Error("Could not compute certificate digest. Unknown signature OID.");
                                                throw o.signatureOid = t.signatureOid,
                                                    o
                                            }
                                            var u = t.tbsCertificate || c.getTBSCertificate(t),
                                                f = s.toDer(u);
                                            d.update(f.getBytes())
                                        }
                                        if (null !== d) {
                                            var h;
                                            switch (t.signatureOid) {
                                                case l.sha1WithRSAEncryption:
                                                    h = void 0;
                                                    break;
                                                case l["RSASSA-PSS"]:
                                                    var g, m;
                                                    if (g = l[t.signatureParameters.mgf.hash.algorithmOid], void 0 === g || void 0 === e.md[g]) {
                                                        var o = new Error("Unsupported MGF hash function.");
                                                        throw o.oid = t.signatureParameters.mgf.hash.algorithmOid,
                                                            o.name = g,
                                                            o
                                                    }
                                                    if (m = l[t.signatureParameters.mgf.algorithmOid], void 0 === m || void 0 === e.mgf[m]) {
                                                        var o = new Error("Unsupported MGF function.");
                                                        throw o.oid = t.signatureParameters.mgf.algorithmOid,
                                                            o.name = m,
                                                            o
                                                    }
                                                    if (m = e.mgf[m].create(e.md[g].create()), g = l[t.signatureParameters.hash.algorithmOid], void 0 === g || void 0 === e.md[g]) throw {
                                                        message: "Unsupported RSASSA-PSS hash function.",
                                                        oid: t.signatureParameters.hash.algorithmOid,
                                                        name: g
                                                    };
                                                    h = e.pss.create(e.md[g].create(), m, t.signatureParameters.saltLength)
                                            }
                                            i = n.publicKey.verify(d.digest().getBytes(), t.signature, h)
                                        }
                                        return i
                                    },
                                    n.isIssuer = function(e) {
                                        var t = !1,
                                            i = n.issuer,
                                            r = e.subject;
                                        if (i.hash && r.hash) t = i.hash === r.hash;
                                        else if (i.attributes.length === r.attributes.length) {
                                            t = !0;
                                            for (var a, o, s = 0; t && s < i.attributes.length; ++s) a = i.attributes[s],
                                                o = r.attributes[s],
                                            (a.type !== o.type || a.value !== o.value) && (t = !1)
                                        }
                                        return t
                                    },
                                    n.issued = function(e) {
                                        return e.isIssuer(n)
                                    },
                                    n.generateSubjectKeyIdentifier = function() {
                                        return c.getPublicKeyFingerprint(n.publicKey, {
                                            type: "RSAPublicKey"
                                        })
                                    },
                                    n.verifySubjectKeyIdentifier = function() {
                                        for (var t = l.subjectKeyIdentifier,
                                                 i = 0; i < n.extensions.length; ++i) {
                                            var r = n.extensions[i];
                                            if (r.id === t) {
                                                var a = n.generateSubjectKeyIdentifier().getBytes();
                                                return e.util.hexToBytes(r.subjectKeyIdentifier) === a
                                            }
                                        }
                                        return ! 1
                                    },
                                    n
                            },
                            c.certificateFromAsn1 = function(n, r) {
                                var a = {},
                                    o = [];
                                if (!s.validate(n, u, a, o)) {
                                    var d = new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");
                                    throw d.errors = o,
                                        d
                                }
                                if ("string" != typeof a.certSignature) {
                                    for (var p = "\x00",
                                             f = 0; f < a.certSignature.length; ++f) p += s.toDer(a.certSignature[f]).getBytes();
                                    a.certSignature = p
                                }
                                var h = s.derToOid(a.publicKeyOid);
                                if (h !== c.oids.rsaEncryption) throw new Error("Cannot read public key. OID is not RSA.");
                                var g = c.createCertificate();
                                g.version = a.certVersion ? a.certVersion.charCodeAt(0) : 0;
                                var y = e.util.createBuffer(a.certSerialNumber);
                                g.serialNumber = y.toHex(),
                                    g.signatureOid = e.asn1.derToOid(a.certSignatureOid),
                                    g.signatureParameters = m(g.signatureOid, a.certSignatureParams, !0),
                                    g.siginfo.algorithmOid = e.asn1.derToOid(a.certinfoSignatureOid),
                                    g.siginfo.parameters = m(g.siginfo.algorithmOid, a.certinfoSignatureParams, !1);
                                var v = e.util.createBuffer(a.certSignature); ++v.read,
                                    g.signature = v.getBytes();
                                var C = [];
                                if (void 0 !== a.certValidity1UTCTime && C.push(s.utcTimeToDate(a.certValidity1UTCTime)), void 0 !== a.certValidity2GeneralizedTime && C.push(s.generalizedTimeToDate(a.certValidity2GeneralizedTime)), void 0 !== a.certValidity3UTCTime && C.push(s.utcTimeToDate(a.certValidity3UTCTime)), void 0 !== a.certValidity4GeneralizedTime && C.push(s.generalizedTimeToDate(a.certValidity4GeneralizedTime)), C.length > 2) throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");
                                if (C.length < 2) throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");
                                if (g.validity.notBefore = C[0], g.validity.notAfter = C[1], g.tbsCertificate = a.tbsCertificate, r) {
                                    if (g.md = null, g.signatureOid in l) {
                                        var h = l[g.signatureOid];
                                        switch (h) {
                                            case "sha1WithRSAEncryption":
                                                g.md = e.md.sha1.create();
                                                break;
                                            case "md5WithRSAEncryption":
                                                g.md = e.md.md5.create();
                                                break;
                                            case "sha256WithRSAEncryption":
                                                g.md = e.md.sha256.create();
                                                break;
                                            case "sha512WithRSAEncryption":
                                                g.md = e.md.sha512.create();
                                                break;
                                            case "RSASSA-PSS":
                                                g.md = e.md.sha256.create()
                                        }
                                    }
                                    if (null === g.md) {
                                        var d = new Error("Could not compute certificate digest. Unknown signature OID.");
                                        throw d.signatureOid = g.signatureOid,
                                            d
                                    }
                                    var S = s.toDer(g.tbsCertificate);
                                    g.md.update(S.getBytes())
                                }
                                var _ = e.md.sha1.create();
                                g.issuer.getField = function(e) {
                                    return t(g.issuer, e)
                                },
                                    g.issuer.addField = function(e) {
                                        i([e]),
                                            g.issuer.attributes.push(e)
                                    },
                                    g.issuer.attributes = c.RDNAttributesAsArray(a.certIssuer, _),
                                a.certIssuerUniqueId && (g.issuer.uniqueId = a.certIssuerUniqueId),
                                    g.issuer.hash = _.digest().toHex();
                                var b = e.md.sha1.create();
                                return g.subject.getField = function(e) {
                                    return t(g.subject, e)
                                },
                                    g.subject.addField = function(e) {
                                        i([e]),
                                            g.subject.attributes.push(e)
                                    },
                                    g.subject.attributes = c.RDNAttributesAsArray(a.certSubject, b),
                                a.certSubjectUniqueId && (g.subject.uniqueId = a.certSubjectUniqueId),
                                    g.subject.hash = b.digest().toHex(),
                                    g.extensions = a.certExtensions ? c.certificateExtensionsFromAsn1(a.certExtensions) : [],
                                    g.publicKey = c.publicKeyFromAsn1(a.subjectPublicKeyInfo),
                                    g
                            },
                            c.certificateExtensionsFromAsn1 = function(e) {
                                for (var t = [], n = 0; n < e.value.length; ++n) for (var i = e.value[n], r = 0; r < i.value.length; ++r) t.push(c.certificateExtensionFromAsn1(i.value[r]));
                                return t
                            },
                            c.certificateExtensionFromAsn1 = function(t) {
                                var n = {};
                                if (n.id = s.derToOid(t.value[0].value), n.critical = !1, t.value[1].type === s.Type.BOOLEAN ? (n.critical = 0 !== t.value[1].value.charCodeAt(0), n.value = t.value[2].value) : n.value = t.value[1].value, n.id in l) if (n.name = l[n.id], "keyUsage" === n.name) {
                                    var i = s.fromDer(n.value),
                                        r = 0,
                                        a = 0;
                                    i.value.length > 1 && (r = i.value.charCodeAt(1), a = i.value.length > 2 ? i.value.charCodeAt(2) : 0),
                                        n.digitalSignature = 128 === (128 & r),
                                        n.nonRepudiation = 64 === (64 & r),
                                        n.keyEncipherment = 32 === (32 & r),
                                        n.dataEncipherment = 16 === (16 & r),
                                        n.keyAgreement = 8 === (8 & r),
                                        n.keyCertSign = 4 === (4 & r),
                                        n.cRLSign = 2 === (2 & r),
                                        n.encipherOnly = 1 === (1 & r),
                                        n.decipherOnly = 128 === (128 & a)
                                } else if ("basicConstraints" === n.name) {
                                    var i = s.fromDer(n.value);
                                    n.cA = i.value.length > 0 && i.value[0].type === s.Type.BOOLEAN ? 0 !== i.value[0].value.charCodeAt(0) : !1;
                                    var o = null;
                                    i.value.length > 0 && i.value[0].type === s.Type.INTEGER ? o = i.value[0].value: i.value.length > 1 && (o = i.value[1].value),
                                    null !== o && (n.pathLenConstraint = s.derToInteger(o))
                                } else if ("extKeyUsage" === n.name) for (var i = s.fromDer(n.value), c = 0; c < i.value.length; ++c) {
                                    var d = s.derToOid(i.value[c].value);
                                    d in l ? n[l[d]] = !0 : n[d] = !0
                                } else if ("nsCertType" === n.name) {
                                    var i = s.fromDer(n.value),
                                        r = 0;
                                    i.value.length > 1 && (r = i.value.charCodeAt(1)),
                                        n.client = 128 === (128 & r),
                                        n.server = 64 === (64 & r),
                                        n.email = 32 === (32 & r),
                                        n.objsign = 16 === (16 & r),
                                        n.reserved = 8 === (8 & r),
                                        n.sslCA = 4 === (4 & r),
                                        n.emailCA = 2 === (2 & r),
                                        n.objCA = 1 === (1 & r)
                                } else if ("subjectAltName" === n.name || "issuerAltName" === n.name) {
                                    n.altNames = [];
                                    for (var p, i = s.fromDer(n.value), u = 0; u < i.value.length; ++u) {
                                        p = i.value[u];
                                        var f = {
                                            type: p.type,
                                            value: p.value
                                        };
                                        switch (n.altNames.push(f), p.type) {
                                            case 1:
                                            case 2:
                                            case 6:
                                                break;
                                            case 7:
                                                f.ip = e.util.bytesToIP(p.value);
                                                break;
                                            case 8:
                                                f.oid = s.derToOid(p.value)
                                        }
                                    }
                                } else if ("subjectKeyIdentifier" === n.name) {
                                    var i = s.fromDer(n.value);
                                    n.subjectKeyIdentifier = e.util.bytesToHex(i.value)
                                }
                                return n
                            },
                            c.certificationRequestFromAsn1 = function(n, r) {
                                var a = {},
                                    o = [];
                                if (!s.validate(n, g, a, o)) {
                                    var d = new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");
                                    throw d.errors = o,
                                        d
                                }
                                if ("string" != typeof a.csrSignature) {
                                    for (var p = "\x00",
                                             u = 0; u < a.csrSignature.length; ++u) p += s.toDer(a.csrSignature[u]).getBytes();
                                    a.csrSignature = p
                                }
                                var f = s.derToOid(a.publicKeyOid);
                                if (f !== c.oids.rsaEncryption) throw new Error("Cannot read public key. OID is not RSA.");
                                var h = c.createCertificationRequest();
                                h.version = a.csrVersion ? a.csrVersion.charCodeAt(0) : 0,
                                    h.signatureOid = e.asn1.derToOid(a.csrSignatureOid),
                                    h.signatureParameters = m(h.signatureOid, a.csrSignatureParams, !0),
                                    h.siginfo.algorithmOid = e.asn1.derToOid(a.csrSignatureOid),
                                    h.siginfo.parameters = m(h.siginfo.algorithmOid, a.csrSignatureParams, !1);
                                var y = e.util.createBuffer(a.csrSignature);
                                if (++y.read, h.signature = y.getBytes(), h.certificationRequestInfo = a.certificationRequestInfo, r) {
                                    if (h.md = null, h.signatureOid in l) {
                                        var f = l[h.signatureOid];
                                        switch (f) {
                                            case "sha1WithRSAEncryption":
                                                h.md = e.md.sha1.create();
                                                break;
                                            case "md5WithRSAEncryption":
                                                h.md = e.md.md5.create();
                                                break;
                                            case "sha256WithRSAEncryption":
                                                h.md = e.md.sha256.create();
                                                break;
                                            case "sha512WithRSAEncryption":
                                                h.md = e.md.sha512.create();
                                                break;
                                            case "RSASSA-PSS":
                                                h.md = e.md.sha256.create()
                                        }
                                    }
                                    if (null === h.md) {
                                        var d = new Error("Could not compute certification request digest. Unknown signature OID.");
                                        throw d.signatureOid = h.signatureOid,
                                            d
                                    }
                                    var v = s.toDer(h.certificationRequestInfo);
                                    h.md.update(v.getBytes())
                                }
                                var C = e.md.sha1.create();
                                return h.subject.getField = function(e) {
                                    return t(h.subject, e)
                                },
                                    h.subject.addField = function(e) {
                                        i([e]),
                                            h.subject.attributes.push(e)
                                    },
                                    h.subject.attributes = c.RDNAttributesAsArray(a.certificationRequestInfoSubject, C),
                                    h.subject.hash = C.digest().toHex(),
                                    h.publicKey = c.publicKeyFromAsn1(a.subjectPublicKeyInfo),
                                    h.getAttribute = function(e) {
                                        return t(h, e)
                                    },
                                    h.addAttribute = function(e) {
                                        i([e]),
                                            h.attributes.push(e)
                                    },
                                    h.attributes = c.CRIAttributesAsArray(a.certificationRequestInfoAttributes || []),
                                    h
                            },
                            c.createCertificationRequest = function() {
                                var n = {};
                                return n.version = 0,
                                    n.signatureOid = null,
                                    n.signature = null,
                                    n.siginfo = {},
                                    n.siginfo.algorithmOid = null,
                                    n.subject = {},
                                    n.subject.getField = function(e) {
                                        return t(n.subject, e)
                                    },
                                    n.subject.addField = function(e) {
                                        i([e]),
                                            n.subject.attributes.push(e)
                                    },
                                    n.subject.attributes = [],
                                    n.subject.hash = null,
                                    n.publicKey = null,
                                    n.attributes = [],
                                    n.getAttribute = function(e) {
                                        return t(n, e)
                                    },
                                    n.addAttribute = function(e) {
                                        i([e]),
                                            n.attributes.push(e)
                                    },
                                    n.md = null,
                                    n.setSubject = function(e) {
                                        i(e),
                                            n.subject.attributes = e,
                                            n.subject.hash = null
                                    },
                                    n.setAttributes = function(e) {
                                        i(e),
                                            n.attributes = e
                                    },
                                    n.sign = function(t, i) {
                                        n.md = i || e.md.sha1.create();
                                        var r = l[n.md.algorithm + "WithRSAEncryption"];
                                        if (!r) {
                                            var a = new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");
                                            throw a.algorithm = n.md.algorithm,
                                                a
                                        }
                                        n.signatureOid = n.siginfo.algorithmOid = r,
                                            n.certificationRequestInfo = c.getCertificationRequestInfo(n);
                                        var o = s.toDer(n.certificationRequestInfo);
                                        n.md.update(o.getBytes()),
                                            n.signature = t.sign(n.md)
                                    },
                                    n.verify = function() {
                                        var t = !1,
                                            i = n.md;
                                        if (null === i) {
                                            if (n.signatureOid in l) {
                                                var r = l[n.signatureOid];
                                                switch (r) {
                                                    case "sha1WithRSAEncryption":
                                                        i = e.md.sha1.create();
                                                        break;
                                                    case "md5WithRSAEncryption":
                                                        i = e.md.md5.create();
                                                        break;
                                                    case "sha256WithRSAEncryption":
                                                        i = e.md.sha256.create();
                                                        break;
                                                    case "sha512WithRSAEncryption":
                                                        i = e.md.sha512.create();
                                                        break;
                                                    case "RSASSA-PSS":
                                                        i = e.md.sha256.create()
                                                }
                                            }
                                            if (null === i) {
                                                var a = new Error("Could not compute certification request digest. Unknown signature OID.");
                                                throw a.signatureOid = n.signatureOid,
                                                    a
                                            }
                                            var o = n.certificationRequestInfo || c.getCertificationRequestInfo(n),
                                                d = s.toDer(o);
                                            i.update(d.getBytes())
                                        }
                                        if (null !== i) {
                                            var p;
                                            switch (n.signatureOid) {
                                                case l.sha1WithRSAEncryption:
                                                    break;
                                                case l["RSASSA-PSS"]:
                                                    var u, f;
                                                    if (u = l[n.signatureParameters.mgf.hash.algorithmOid], void 0 === u || void 0 === e.md[u]) {
                                                        var a = new Error("Unsupported MGF hash function.");
                                                        throw a.oid = n.signatureParameters.mgf.hash.algorithmOid,
                                                            a.name = u,
                                                            a
                                                    }
                                                    if (f = l[n.signatureParameters.mgf.algorithmOid], void 0 === f || void 0 === e.mgf[f]) {
                                                        var a = new Error("Unsupported MGF function.");
                                                        throw a.oid = n.signatureParameters.mgf.algorithmOid,
                                                            a.name = f,
                                                            a
                                                    }
                                                    if (f = e.mgf[f].create(e.md[u].create()), u = l[n.signatureParameters.hash.algorithmOid], void 0 === u || void 0 === e.md[u]) {
                                                        var a = new Error("Unsupported RSASSA-PSS hash function.");
                                                        throw a.oid = n.signatureParameters.hash.algorithmOid,
                                                            a.name = u,
                                                            a
                                                    }
                                                    p = e.pss.create(e.md[u].create(), f, n.signatureParameters.saltLength)
                                            }
                                            t = n.publicKey.verify(i.digest().getBytes(), n.signature, p)
                                        }
                                        return t
                                    },
                                    n
                            },
                            c.getTBSCertificate = function(t) {
                                var i = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, [s.create(s.Class.UNIVERSAL, s.Type.INTEGER, !1, s.integerToDer(t.version).getBytes())]), s.create(s.Class.UNIVERSAL, s.Type.INTEGER, !1, e.util.hexToBytes(t.serialNumber)), s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(t.siginfo.algorithmOid).getBytes()), a(t.siginfo.algorithmOid, t.siginfo.parameters)]), n(t.issuer), s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.UTCTIME, !1, s.dateToUtcTime(t.validity.notBefore)), s.create(s.Class.UNIVERSAL, s.Type.UTCTIME, !1, s.dateToUtcTime(t.validity.notAfter))]), n(t.subject), c.publicKeyToAsn1(t.publicKey)]);
                                return t.issuer.uniqueId && i.value.push(s.create(s.Class.CONTEXT_SPECIFIC, 1, !0, [s.create(s.Class.UNIVERSAL, s.Type.BITSTRING, !1, String.fromCharCode(0) + t.issuer.uniqueId)])),
                                t.subject.uniqueId && i.value.push(s.create(s.Class.CONTEXT_SPECIFIC, 2, !0, [s.create(s.Class.UNIVERSAL, s.Type.BITSTRING, !1, String.fromCharCode(0) + t.subject.uniqueId)])),
                                t.extensions.length > 0 && i.value.push(c.certificateExtensionsToAsn1(t.extensions)),
                                    i
                            },
                            c.getCertificationRequestInfo = function(e) {
                                var t = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.INTEGER, !1, s.integerToDer(e.version).getBytes()), n(e.subject), c.publicKeyToAsn1(e.publicKey), o(e)]);
                                return t
                            },
                            c.distinguishedNameToAsn1 = function(e) {
                                return n(e)
                            },
                            c.certificateToAsn1 = function(e) {
                                var t = e.tbsCertificate || c.getTBSCertificate(e);
                                return s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [t, s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(e.signatureOid).getBytes()), a(e.signatureOid, e.signatureParameters)]), s.create(s.Class.UNIVERSAL, s.Type.BITSTRING, !1, String.fromCharCode(0) + e.signature)])
                            },
                            c.certificateExtensionsToAsn1 = function(e) {
                                var t = s.create(s.Class.CONTEXT_SPECIFIC, 3, !0, []),
                                    n = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, []);
                                t.value.push(n);
                                for (var i = 0; i < e.length; ++i) n.value.push(c.certificateExtensionToAsn1(e[i]));
                                return t
                            },
                            c.certificateExtensionToAsn1 = function(e) {
                                var t = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, []);
                                t.value.push(s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(e.id).getBytes())),
                                e.critical && t.value.push(s.create(s.Class.UNIVERSAL, s.Type.BOOLEAN, !1, String.fromCharCode(255)));
                                var n = e.value;
                                return "string" != typeof e.value && (n = s.toDer(n).getBytes()),
                                    t.value.push(s.create(s.Class.UNIVERSAL, s.Type.OCTETSTRING, !1, n)),
                                    t
                            },
                            c.certificationRequestToAsn1 = function(e) {
                                var t = e.certificationRequestInfo || c.getCertificationRequestInfo(e);
                                return s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [t, s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(e.signatureOid).getBytes()), a(e.signatureOid, e.signatureParameters)]), s.create(s.Class.UNIVERSAL, s.Type.BITSTRING, !1, String.fromCharCode(0) + e.signature)])
                            },
                            c.createCaStore = function(t) {
                                function i(e) {
                                    return r(e),
                                    a.certs[e.hash] || null
                                }
                                function r(t) {
                                    if (!t.hash) {
                                        var i = e.md.sha1.create();
                                        t.attributes = c.RDNAttributesAsArray(n(t), i),
                                            t.hash = i.digest().toHex()
                                    }
                                }
                                var a = {
                                    certs: {}
                                };
                                if (a.getIssuer = function(e) {
                                        var t = i(e.issuer);
                                        return t
                                    },
                                        a.addCertificate = function(t) {
                                            if ("string" == typeof t && (t = e.pki.certificateFromPem(t)), r(t.subject), !a.hasCertificate(t)) if (t.subject.hash in a.certs) {
                                                var n = a.certs[t.subject.hash];
                                                e.util.isArray(n) || (n = [n]),
                                                    n.push(t),
                                                    a.certs[t.subject.hash] = n
                                            } else a.certs[t.subject.hash] = t
                                        },
                                        a.hasCertificate = function(t) {
                                            "string" == typeof t && (t = e.pki.certificateFromPem(t));
                                            var n = i(t.subject);
                                            if (!n) return ! 1;
                                            e.util.isArray(n) || (n = [n]);
                                            for (var r = s.toDer(c.certificateToAsn1(t)).getBytes(), a = 0; a < n.length; ++a) {
                                                var o = s.toDer(c.certificateToAsn1(n[a])).getBytes();
                                                if (r === o) return ! 0
                                            }
                                            return ! 1
                                        },
                                        a.listAllCertificates = function() {
                                            var t = [];
                                            for (var n in a.certs) if (a.certs.hasOwnProperty(n)) {
                                                var i = a.certs[n];
                                                if (e.util.isArray(i)) for (var r = 0; r < i.length; ++r) t.push(i[r]);
                                                else t.push(i)
                                            }
                                            return t
                                        },
                                        a.removeCertificate = function(t) {
                                            var n;
                                            if ("string" == typeof t && (t = e.pki.certificateFromPem(t)), r(t.subject), !a.hasCertificate(t)) return null;
                                            var o = i(t.subject);
                                            if (!e.util.isArray(o)) return n = a.certs[t.subject.hash],
                                                delete a.certs[t.subject.hash],
                                                n;
                                            for (var l = s.toDer(c.certificateToAsn1(t)).getBytes(), d = 0; d < o.length; ++d) {
                                                var p = s.toDer(c.certificateToAsn1(o[d])).getBytes();
                                                l === p && (n = o[d], o.splice(d, 1))
                                            }
                                            return 0 === o.length && delete a.certs[t.subject.hash],
                                                n
                                        },
                                        t) for (var o = 0; o < t.length; ++o) {
                                    var l = t[o];
                                    a.addCertificate(l)
                                }
                                return a
                            },
                            c.certificateError = {
                                bad_certificate: "forge.pki.BadCertificate",
                                unsupported_certificate: "forge.pki.UnsupportedCertificate",
                                certificate_revoked: "forge.pki.CertificateRevoked",
                                certificate_expired: "forge.pki.CertificateExpired",
                                certificate_unknown: "forge.pki.CertificateUnknown",
                                unknown_ca: "forge.pki.UnknownCertificateAuthority"
                            },
                            c.verifyCertificateChain = function(t, n, i) {
                                n = n.slice(0);
                                var r = n.slice(0),
                                    a = new Date,
                                    o = !0,
                                    s = null,
                                    l = 0;
                                do {
                                    var d = n.shift(), p = null, u = !1;
                                    if ((a < d.validity.notBefore || a > d.validity.notAfter) && (s = {
                                            message: "Certificate is not valid yet or has expired.",
                                            error: c.certificateError.certificate_expired,
                                            notBefore: d.validity.notBefore,
                                            notAfter: d.validity.notAfter,
                                            now: a
                                        }), null === s) {
                                        if (p = n[0] || t.getIssuer(d), null === p && d.isIssuer(d) && (u = !0, p = d), p) {
                                            var f = p;
                                            e.util.isArray(f) || (f = [f]);
                                            for (var h = !1; ! h && f.length > 0;) {
                                                p = f.shift();
                                                try {
                                                    h = p.verify(d)
                                                } catch(g) {}
                                            }
                                            h || (s = {
                                                message: "Certificate signature is invalid.",
                                                error: c.certificateError.bad_certificate
                                            })
                                        }
                                        null === s && (!p || u) && !t.hasCertificate(d) && (s = {
                                            message: "Certificate is not trusted.",
                                            error: c.certificateError.unknown_ca
                                        })
                                    }
                                    if (null === s && p && !d.isIssuer(p) && (s = {
                                            message: "Certificate issuer is invalid.",
                                            error: c.certificateError.bad_certificate
                                        }), null === s) for (var m = {
                                            keyUsage: !0,
                                            basicConstraints: !0
                                        },
                                                                 y = 0; null === s && y < d.extensions.length; ++y) {
                                        var v = d.extensions[y];
                                        v.critical && !(v.name in m) && (s = {
                                            message: "Certificate has an unsupported critical extension.",
                                            error: c.certificateError.unsupported_certificate
                                        })
                                    }
                                    if (null === s && (!o || 0 === n.length && (!p || u))) {
                                        var C = d.getExtension("basicConstraints"),
                                            S = d.getExtension("keyUsage");
                                        if (null !== S && (!S.keyCertSign || null === C) && (s = {
                                                message: "Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",
                                                error: c.certificateError.bad_certificate
                                            }), null === s && null !== C && !C.cA && (s = {
                                                message: "Certificate basicConstraints indicates the certificate is not a CA.",
                                                error: c.certificateError.bad_certificate
                                            }), null === s && null !== S && "pathLenConstraint" in C) {
                                            var _ = l - 1;
                                            _ > C.pathLenConstraint && (s = {
                                                message: "Certificate basicConstraints pathLenConstraint violated.",
                                                error: c.certificateError.bad_certificate
                                            })
                                        }
                                    }
                                    var b = null === s ? !0 : s.error, E = i ? i(b, l, r) : b;
                                    if (E !== !0) throw b === !0 && (s = {
                                        message: "The application rejected the certificate.",
                                        error: c.certificateError.bad_certificate
                                    }), (E || 0 === E) && ("object" != typeof E || e.util.isArray(E) ? "string" == typeof E && (s.error = E) : (E.message && (s.message = E.message), E.error && (s.error = E.error))), s;
                                    s = null, o = !1, ++l
                                } while ( n . length > 0 );
                                return ! 0
                            }
                    }
                    var i = "x509";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n.pki
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/x509", ["require", "module", "./aes", "./asn1", "./des", "./md", "./mgf", "./oids", "./pem", "./pss", "./rsa", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(e, t, n, i) {
                            for (var r = [], a = 0; a < e.length; a++) for (var o = 0; o < e[a].safeBags.length; o++) {
                                var s = e[a].safeBags[o]; (void 0 === i || s.type === i) && (null !== t ? void 0 !== s.attributes[t] && s.attributes[t].indexOf(n) >= 0 && r.push(s) : r.push(s))
                            }
                            return r
                        }
                        function n(t) {
                            if (t.composed || t.constructed) {
                                for (var n = e.util.createBuffer(), i = 0; i < t.value.length; ++i) n.putBytes(t.value[i].value);
                                t.composed = t.constructed = !1,
                                    t.value = n.getBytes()
                            }
                            return t
                        }
                        function i(e, t, i, o) {
                            if (t = s.fromDer(t, i), t.tagClass !== s.Class.UNIVERSAL || t.type !== s.Type.SEQUENCE || t.constructed !== !0) throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");
                            for (var l = 0; l < t.value.length; l++) {
                                var p = t.value[l],
                                    u = {},
                                    f = [];
                                if (!s.validate(p, d, u, f)) {
                                    var h = new Error("Cannot read ContentInfo.");
                                    throw h.errors = f,
                                        h
                                }
                                var g = {
                                        encrypted: !1
                                    },
                                    m = null,
                                    y = u.content.value[0];
                                switch (s.derToOid(u.contentType)) {
                                    case c.oids.data:
                                        if (y.tagClass !== s.Class.UNIVERSAL || y.type !== s.Type.OCTETSTRING) throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");
                                        m = n(y).value;
                                        break;
                                    case c.oids.encryptedData:
                                        m = r(y, o),
                                            g.encrypted = !0;
                                        break;
                                    default:
                                        var h = new Error("Unsupported PKCS#12 contentType.");
                                        throw h.contentType = s.derToOid(u.contentType),
                                            h
                                }
                                g.safeBags = a(m, i, o),
                                    e.safeContents.push(g)
                            }
                        }
                        function r(t, i) {
                            var r = {},
                                a = [];
                            if (!s.validate(t, e.pkcs7.asn1.encryptedDataValidator, r, a)) {
                                var o = new Error("Cannot read EncryptedContentInfo.");
                                throw o.errors = a,
                                    o
                            }
                            var l = s.derToOid(r.contentType);
                            if (l !== c.oids.data) {
                                var o = new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");
                                throw o.oid = l,
                                    o
                            }
                            l = s.derToOid(r.encAlgorithm);
                            var d = c.pbe.getCipher(l, r.encParameter, i),
                                p = n(r.encryptedContentAsn1),
                                u = e.util.createBuffer(p.value);
                            if (d.update(u), !d.finish()) throw new Error("Failed to decrypt PKCS#12 SafeContents.");
                            return d.output.getBytes()
                        }
                        function a(e, t, n) {
                            if (!t && 0 === e.length) return [];
                            if (e = s.fromDer(e, t), e.tagClass !== s.Class.UNIVERSAL || e.type !== s.Type.SEQUENCE || e.constructed !== !0) throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");
                            for (var i = [], r = 0; r < e.value.length; r++) {
                                var a = e.value[r],
                                    l = {},
                                    d = [];
                                if (!s.validate(a, u, l, d)) {
                                    var p = new Error("Cannot read SafeBag.");
                                    throw p.errors = d,
                                        p
                                }
                                var f = {
                                    type: s.derToOid(l.bagId),
                                    attributes: o(l.bagAttributes)
                                };
                                i.push(f);
                                var g, m, y = l.bagValue.value[0];
                                switch (f.type) {
                                    case c.oids.pkcs8ShroudedKeyBag:
                                        if (y = c.decryptPrivateKeyInfo(y, n), null === y) throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");
                                    case c.oids.keyBag:
                                        try {
                                            f.key = c.privateKeyFromAsn1(y)
                                        } catch(v) {
                                            f.key = null,
                                                f.asn1 = y
                                        }
                                        continue;
                                    case c.oids.certBag:
                                        g = h,
                                            m = function() {
                                                if (s.derToOid(l.certId) !== c.oids.x509Certificate) {
                                                    var e = new Error("Unsupported certificate type, only X.509 supported.");
                                                    throw e.oid = s.derToOid(l.certId),
                                                        e
                                                }
                                                var n = s.fromDer(l.cert, t);
                                                try {
                                                    f.cert = c.certificateFromAsn1(n, !0)
                                                } catch(i) {
                                                    f.cert = null,
                                                        f.asn1 = n
                                                }
                                            };
                                        break;
                                    default:
                                        var p = new Error("Unsupported PKCS#12 SafeBag type.");
                                        throw p.oid = f.type,
                                            p
                                }
                                if (void 0 !== g && !s.validate(y, g, l, d)) {
                                    var p = new Error("Cannot read PKCS#12 " + g.name);
                                    throw p.errors = d,
                                        p
                                }
                                m()
                            }
                            return i
                        }
                        function o(e) {
                            var t = {};
                            if (void 0 !== e) for (var n = 0; n < e.length; ++n) {
                                var i = {},
                                    r = [];
                                if (!s.validate(e[n], f, i, r)) {
                                    var a = new Error("Cannot read PKCS#12 BagAttribute.");
                                    throw a.errors = r,
                                        a
                                }
                                var o = s.derToOid(i.oid);
                                if (void 0 !== c.oids[o]) {
                                    t[c.oids[o]] = [];
                                    for (var l = 0; l < i.values.length; ++l) t[c.oids[o]].push(i.values[l].value)
                                }
                            }
                            return t
                        }
                        var s = e.asn1,
                            c = e.pki,
                            l = e.pkcs12 = e.pkcs12 || {},
                            d = {
                                name: "ContentInfo",
                                tagClass: s.Class.UNIVERSAL,
                                type: s.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "ContentInfo.contentType",
                                    tagClass: s.Class.UNIVERSAL,
                                    type: s.Type.OID,
                                    constructed: !1,
                                    capture: "contentType"
                                },
                                    {
                                        name: "ContentInfo.content",
                                        tagClass: s.Class.CONTEXT_SPECIFIC,
                                        constructed: !0,
                                        captureAsn1: "content"
                                    }]
                            },
                            p = {
                                name: "PFX",
                                tagClass: s.Class.UNIVERSAL,
                                type: s.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "PFX.version",
                                    tagClass: s.Class.UNIVERSAL,
                                    type: s.Type.INTEGER,
                                    constructed: !1,
                                    capture: "version"
                                },
                                    d, {
                                        name: "PFX.macData",
                                        tagClass: s.Class.UNIVERSAL,
                                        type: s.Type.SEQUENCE,
                                        constructed: !0,
                                        optional: !0,
                                        captureAsn1: "mac",
                                        value: [{
                                            name: "PFX.macData.mac",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Type.SEQUENCE,
                                            constructed: !0,
                                            value: [{
                                                name: "PFX.macData.mac.digestAlgorithm",
                                                tagClass: s.Class.UNIVERSAL,
                                                type: s.Type.SEQUENCE,
                                                constructed: !0,
                                                value: [{
                                                    name: "PFX.macData.mac.digestAlgorithm.algorithm",
                                                    tagClass: s.Class.UNIVERSAL,
                                                    type: s.Type.OID,
                                                    constructed: !1,
                                                    capture: "macAlgorithm"
                                                },
                                                    {
                                                        name: "PFX.macData.mac.digestAlgorithm.parameters",
                                                        tagClass: s.Class.UNIVERSAL,
                                                        captureAsn1: "macAlgorithmParameters"
                                                    }]
                                            },
                                                {
                                                    name: "PFX.macData.mac.digest",
                                                    tagClass: s.Class.UNIVERSAL,
                                                    type: s.Type.OCTETSTRING,
                                                    constructed: !1,
                                                    capture: "macDigest"
                                                }]
                                        },
                                            {
                                                name: "PFX.macData.macSalt",
                                                tagClass: s.Class.UNIVERSAL,
                                                type: s.Type.OCTETSTRING,
                                                constructed: !1,
                                                capture: "macSalt"
                                            },
                                            {
                                                name: "PFX.macData.iterations",
                                                tagClass: s.Class.UNIVERSAL,
                                                type: s.Type.INTEGER,
                                                constructed: !1,
                                                optional: !0,
                                                capture: "macIterations"
                                            }]
                                    }]
                            },
                            u = {
                                name: "SafeBag",
                                tagClass: s.Class.UNIVERSAL,
                                type: s.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "SafeBag.bagId",
                                    tagClass: s.Class.UNIVERSAL,
                                    type: s.Type.OID,
                                    constructed: !1,
                                    capture: "bagId"
                                },
                                    {
                                        name: "SafeBag.bagValue",
                                        tagClass: s.Class.CONTEXT_SPECIFIC,
                                        constructed: !0,
                                        captureAsn1: "bagValue"
                                    },
                                    {
                                        name: "SafeBag.bagAttributes",
                                        tagClass: s.Class.UNIVERSAL,
                                        type: s.Type.SET,
                                        constructed: !0,
                                        optional: !0,
                                        capture: "bagAttributes"
                                    }]
                            },
                            f = {
                                name: "Attribute",
                                tagClass: s.Class.UNIVERSAL,
                                type: s.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "Attribute.attrId",
                                    tagClass: s.Class.UNIVERSAL,
                                    type: s.Type.OID,
                                    constructed: !1,
                                    capture: "oid"
                                },
                                    {
                                        name: "Attribute.attrValues",
                                        tagClass: s.Class.UNIVERSAL,
                                        type: s.Type.SET,
                                        constructed: !0,
                                        capture: "values"
                                    }]
                            },
                            h = {
                                name: "CertBag",
                                tagClass: s.Class.UNIVERSAL,
                                type: s.Type.SEQUENCE,
                                constructed: !0,
                                value: [{
                                    name: "CertBag.certId",
                                    tagClass: s.Class.UNIVERSAL,
                                    type: s.Type.OID,
                                    constructed: !1,
                                    capture: "certId"
                                },
                                    {
                                        name: "CertBag.certValue",
                                        tagClass: s.Class.CONTEXT_SPECIFIC,
                                        constructed: !0,
                                        value: [{
                                            name: "CertBag.certValue[0]",
                                            tagClass: s.Class.UNIVERSAL,
                                            type: s.Class.OCTETSTRING,
                                            constructed: !1,
                                            capture: "cert"
                                        }]
                                    }]
                            };
                        l.pkcs12FromAsn1 = function(r, a, o) {
                            "string" == typeof a ? (o = a, a = !0) : void 0 === a && (a = !0);
                            var d = {},
                                u = [];
                            if (!s.validate(r, p, d, u)) {
                                var f = new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");
                                throw f.errors = f,
                                    f
                            }
                            var h = {
                                version: d.version.charCodeAt(0),
                                safeContents: [],
                                getBags: function(n) {
                                    var i, r = {};
                                    return "localKeyId" in n ? i = n.localKeyId: "localKeyIdHex" in n && (i = e.util.hexToBytes(n.localKeyIdHex)),
                                    void 0 === i && !("friendlyName" in n) && "bagType" in n && (r[n.bagType] = t(h.safeContents, null, null, n.bagType)),
                                    void 0 !== i && (r.localKeyId = t(h.safeContents, "localKeyId", i, n.bagType)),
                                    "friendlyName" in n && (r.friendlyName = t(h.safeContents, "friendlyName", n.friendlyName, n.bagType)),
                                        r
                                },
                                getBagsByFriendlyName: function(e, n) {
                                    return t(h.safeContents, "friendlyName", e, n)
                                },
                                getBagsByLocalKeyId: function(e, n) {
                                    return t(h.safeContents, "localKeyId", e, n)
                                }
                            };
                            if (3 !== d.version.charCodeAt(0)) {
                                var f = new Error("PKCS#12 PFX of version other than 3 not supported.");
                                throw f.version = d.version.charCodeAt(0),
                                    f
                            }
                            if (s.derToOid(d.contentType) !== c.oids.data) {
                                var f = new Error("Only PKCS#12 PFX in password integrity mode supported.");
                                throw f.oid = s.derToOid(d.contentType),
                                    f
                            }
                            var g = d.content.value[0];
                            if (g.tagClass !== s.Class.UNIVERSAL || g.type !== s.Type.OCTETSTRING) throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");
                            if (g = n(g), d.mac) {
                                var m = null,
                                    y = 0,
                                    v = s.derToOid(d.macAlgorithm);
                                switch (v) {
                                    case c.oids.sha1:
                                        m = e.md.sha1.create(),
                                            y = 20;
                                        break;
                                    case c.oids.sha256:
                                        m = e.md.sha256.create(),
                                            y = 32;
                                        break;
                                    case c.oids.sha384:
                                        m = e.md.sha384.create(),
                                            y = 48;
                                        break;
                                    case c.oids.sha512:
                                        m = e.md.sha512.create(),
                                            y = 64;
                                        break;
                                    case c.oids.md5:
                                        m = e.md.md5.create(),
                                            y = 16
                                }
                                if (null === m) throw new Error("PKCS#12 uses unsupported MAC algorithm: " + v);
                                var C = new e.util.ByteBuffer(d.macSalt),
                                    S = "macIterations" in d ? parseInt(e.util.bytesToHex(d.macIterations), 16) : 1,
                                    _ = l.generateKey(o, C, 3, S, y, m),
                                    b = e.hmac.create();
                                b.start(m, _),
                                    b.update(g.value);
                                var E = b.getMac();
                                if (E.getBytes() !== d.macDigest) throw new Error("PKCS#12 MAC could not be verified. Invalid password?")
                            }
                            return i(h, g.value, a, o),
                                h
                        },
                            l.toPkcs12Asn1 = function(t, n, i, r) {
                                r = r || {},
                                    r.saltSize = r.saltSize || 8,
                                    r.count = r.count || 2048,
                                    r.algorithm = r.algorithm || r.encAlgorithm || "aes128",
                                "useMac" in r || (r.useMac = !0),
                                "localKeyId" in r || (r.localKeyId = null),
                                "generateLocalKeyId" in r || (r.generateLocalKeyId = !0);
                                var a, o = r.localKeyId;
                                if (null !== o) o = e.util.hexToBytes(o);
                                else if (r.generateLocalKeyId) if (n) {
                                    var d = e.util.isArray(n) ? n[0] : n;
                                    "string" == typeof d && (d = c.certificateFromPem(d));
                                    var p = e.md.sha1.create();
                                    p.update(s.toDer(c.certificateToAsn1(d)).getBytes()),
                                        o = p.digest().getBytes()
                                } else o = e.random.getBytes(20);
                                var u = [];
                                null !== o && u.push(s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(c.oids.localKeyId).getBytes()), s.create(s.Class.UNIVERSAL, s.Type.SET, !0, [s.create(s.Class.UNIVERSAL, s.Type.OCTETSTRING, !1, o)])])),
                                "friendlyName" in r && u.push(s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(c.oids.friendlyName).getBytes()), s.create(s.Class.UNIVERSAL, s.Type.SET, !0, [s.create(s.Class.UNIVERSAL, s.Type.BMPSTRING, !1, r.friendlyName)])])),
                                u.length > 0 && (a = s.create(s.Class.UNIVERSAL, s.Type.SET, !0, u));
                                var f = [],
                                    h = [];
                                null !== n && (h = e.util.isArray(n) ? n: [n]);
                                for (var g = [], m = 0; m < h.length; ++m) {
                                    n = h[m],
                                    "string" == typeof n && (n = c.certificateFromPem(n));
                                    var y = 0 === m ? a: void 0,
                                        v = c.certificateToAsn1(n),
                                        C = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(c.oids.certBag).getBytes()), s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, [s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(c.oids.x509Certificate).getBytes()), s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, [s.create(s.Class.UNIVERSAL, s.Type.OCTETSTRING, !1, s.toDer(v).getBytes())])])]), y]);
                                    g.push(C)
                                }
                                if (g.length > 0) {
                                    var S = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, g),
                                        _ = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(c.oids.data).getBytes()), s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, [s.create(s.Class.UNIVERSAL, s.Type.OCTETSTRING, !1, s.toDer(S).getBytes())])]);
                                    f.push(_)
                                }
                                var b = null;
                                if (null !== t) {
                                    var E = c.wrapRsaPrivateKey(c.privateKeyToAsn1(t));
                                    b = null === i ? s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(c.oids.keyBag).getBytes()), s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, [E]), a]) : s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(c.oids.pkcs8ShroudedKeyBag).getBytes()), s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, [c.encryptPrivateKeyInfo(E, i, r)]), a]);
                                    var I = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [b]),
                                        A = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(c.oids.data).getBytes()), s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, [s.create(s.Class.UNIVERSAL, s.Type.OCTETSTRING, !1, s.toDer(I).getBytes())])]);
                                    f.push(A)
                                }
                                var T, k = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, f);
                                if (r.useMac) {
                                    var p = e.md.sha1.create(),
                                        w = new e.util.ByteBuffer(e.random.getBytes(r.saltSize)),
                                        $ = r.count,
                                        t = l.generateKey(i, w, 3, $, 20),
                                        P = e.hmac.create();
                                    P.start(p, t),
                                        P.update(s.toDer(k).getBytes());
                                    var N = P.getMac();
                                    T = s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(c.oids.sha1).getBytes()), s.create(s.Class.UNIVERSAL, s.Type.NULL, !1, "")]), s.create(s.Class.UNIVERSAL, s.Type.OCTETSTRING, !1, N.getBytes())]), s.create(s.Class.UNIVERSAL, s.Type.OCTETSTRING, !1, w.getBytes()), s.create(s.Class.UNIVERSAL, s.Type.INTEGER, !1, s.integerToDer($).getBytes())])
                                }
                                return s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.INTEGER, !1, s.integerToDer(3).getBytes()), s.create(s.Class.UNIVERSAL, s.Type.SEQUENCE, !0, [s.create(s.Class.UNIVERSAL, s.Type.OID, !1, s.oidToDer(c.oids.data).getBytes()), s.create(s.Class.CONTEXT_SPECIFIC, 0, !0, [s.create(s.Class.UNIVERSAL, s.Type.OCTETSTRING, !1, s.toDer(k).getBytes())])]), T])
                            },
                            l.generateKey = e.pbe.generatePkcs12Key
                    }
                    var i = "pkcs12";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/pkcs12", ["require", "module", "./asn1", "./hmac", "./oids", "./pkcs7asn1", "./pbe", "./random", "./rsa", "./sha1", "./util", "./x509"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        var t = e.asn1,
                            n = e.pki = e.pki || {};
                        n.pemToDer = function(t) {
                            var n = e.pem.decode(t)[0];
                            if (n.procType && "ENCRYPTED" === n.procType.type) throw new Error("Could not convert PEM to DER; PEM is encrypted.");
                            return e.util.createBuffer(n.body)
                        },
                            n.privateKeyFromPem = function(i) {
                                var r = e.pem.decode(i)[0];
                                if ("PRIVATE KEY" !== r.type && "RSA PRIVATE KEY" !== r.type) {
                                    var a = new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');
                                    throw a.headerType = r.type,
                                        a
                                }
                                if (r.procType && "ENCRYPTED" === r.procType.type) throw new Error("Could not convert private key from PEM; PEM is encrypted.");
                                var o = t.fromDer(r.body);
                                return n.privateKeyFromAsn1(o)
                            },
                            n.privateKeyToPem = function(i, r) {
                                var a = {
                                    type: "RSA PRIVATE KEY",
                                    body: t.toDer(n.privateKeyToAsn1(i)).getBytes()
                                };
                                return e.pem.encode(a, {
                                    maxline: r
                                })
                            },
                            n.privateKeyInfoToPem = function(n, i) {
                                var r = {
                                    type: "PRIVATE KEY",
                                    body: t.toDer(n).getBytes()
                                };
                                return e.pem.encode(r, {
                                    maxline: i
                                })
                            }
                    }
                    var i = "pki";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/pki", ["require", "module", "./asn1", "./oids", "./pbe", "./pem", "./pbkdf2", "./pkcs12", "./pss", "./rsa", "./util", "./x509"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        var t = function(t, n, i, r) {
                                var a = e.util.createBuffer(),
                                    o = t.length >> 1,
                                    s = o + (1 & t.length),
                                    c = t.substr(0, s),
                                    l = t.substr(o, s),
                                    d = e.util.createBuffer(),
                                    p = e.hmac.create();
                                i = n + i;
                                var u = Math.ceil(r / 16),
                                    f = Math.ceil(r / 20);
                                p.start("MD5", c);
                                var h = e.util.createBuffer();
                                d.putBytes(i);
                                for (var g = 0; u > g; ++g) p.start(null, null),
                                    p.update(d.getBytes()),
                                    d.putBuffer(p.digest()),
                                    p.start(null, null),
                                    p.update(d.bytes() + i),
                                    h.putBuffer(p.digest());
                                p.start("SHA1", l);
                                var m = e.util.createBuffer();
                                d.clear(),
                                    d.putBytes(i);
                                for (var g = 0; f > g; ++g) p.start(null, null),
                                    p.update(d.getBytes()),
                                    d.putBuffer(p.digest()),
                                    p.start(null, null),
                                    p.update(d.bytes() + i),
                                    m.putBuffer(p.digest());
                                return a.putBytes(e.util.xorBytes(h.getBytes(), m.getBytes(), r)),
                                    a
                            },
                            n = function(t, n, i) {
                                var r = e.hmac.create();
                                r.start("SHA1", t);
                                var a = e.util.createBuffer();
                                return a.putInt32(n[0]),
                                    a.putInt32(n[1]),
                                    a.putByte(i.type),
                                    a.putByte(i.version.major),
                                    a.putByte(i.version.minor),
                                    a.putInt16(i.length),
                                    a.putBytes(i.fragment.bytes()),
                                    r.update(a.getBytes()),
                                    r.digest().getBytes()
                            },
                            i = function(t, n, i) {
                                var r = !1;
                                try {
                                    var a = t.deflate(n.fragment.getBytes());
                                    n.fragment = e.util.createBuffer(a),
                                        n.length = a.length,
                                        r = !0
                                } catch(o) {}
                                return r
                            },
                            r = function(t, n, i) {
                                var r = !1;
                                try {
                                    var a = t.inflate(n.fragment.getBytes());
                                    n.fragment = e.util.createBuffer(a),
                                        n.length = a.length,
                                        r = !0
                                } catch(o) {}
                                return r
                            },
                            a = function(t, n) {
                                var i = 0;
                                switch (n) {
                                    case 1:
                                        i = t.getByte();
                                        break;
                                    case 2:
                                        i = t.getInt16();
                                        break;
                                    case 3:
                                        i = t.getInt24();
                                        break;
                                    case 4:
                                        i = t.getInt32()
                                }
                                return e.util.createBuffer(t.getBytes(i))
                            },
                            o = function(e, t, n) {
                                e.putInt(n.length(), t << 3),
                                    e.putBuffer(n)
                            },
                            s = {};
                        s.Versions = {
                            TLS_1_0: {
                                major: 3,
                                minor: 1
                            },
                            TLS_1_1: {
                                major: 3,
                                minor: 2
                            },
                            TLS_1_2: {
                                major: 3,
                                minor: 3
                            }
                        },
                            s.SupportedVersions = [s.Versions.TLS_1_1, s.Versions.TLS_1_0],
                            s.Version = s.SupportedVersions[0],
                            s.MaxFragment = 15360,
                            s.ConnectionEnd = {
                                server: 0,
                                client: 1
                            },
                            s.PRFAlgorithm = {
                                tls_prf_sha256: 0
                            },
                            s.BulkCipherAlgorithm = {
                                none: null,
                                rc4: 0,
                                des3: 1,
                                aes: 2
                            },
                            s.CipherType = {
                                stream: 0,
                                block: 1,
                                aead: 2
                            },
                            s.MACAlgorithm = {
                                none: null,
                                hmac_md5: 0,
                                hmac_sha1: 1,
                                hmac_sha256: 2,
                                hmac_sha384: 3,
                                hmac_sha512: 4
                            },
                            s.CompressionMethod = {
                                none: 0,
                                deflate: 1
                            },
                            s.ContentType = {
                                change_cipher_spec: 20,
                                alert: 21,
                                handshake: 22,
                                application_data: 23,
                                heartbeat: 24
                            },
                            s.HandshakeType = {
                                hello_request: 0,
                                client_hello: 1,
                                server_hello: 2,
                                certificate: 11,
                                server_key_exchange: 12,
                                certificate_request: 13,
                                server_hello_done: 14,
                                certificate_verify: 15,
                                client_key_exchange: 16,
                                finished: 20
                            },
                            s.Alert = {},
                            s.Alert.Level = {
                                warning: 1,
                                fatal: 2
                            },
                            s.Alert.Description = {
                                close_notify: 0,
                                unexpected_message: 10,
                                bad_record_mac: 20,
                                decryption_failed: 21,
                                record_overflow: 22,
                                decompression_failure: 30,
                                handshake_failure: 40,
                                bad_certificate: 42,
                                unsupported_certificate: 43,
                                certificate_revoked: 44,
                                certificate_expired: 45,
                                certificate_unknown: 46,
                                illegal_parameter: 47,
                                unknown_ca: 48,
                                access_denied: 49,
                                decode_error: 50,
                                decrypt_error: 51,
                                export_restriction: 60,
                                protocol_version: 70,
                                insufficient_security: 71,
                                internal_error: 80,
                                user_canceled: 90,
                                no_renegotiation: 100
                            },
                            s.HeartbeatMessageType = {
                                heartbeat_request: 1,
                                heartbeat_response: 2
                            },
                            s.CipherSuites = {},
                            s.getCipherSuite = function(e) {
                                var t = null;
                                for (var n in s.CipherSuites) {
                                    var i = s.CipherSuites[n];
                                    if (i.id[0] === e.charCodeAt(0) && i.id[1] === e.charCodeAt(1)) {
                                        t = i;
                                        break
                                    }
                                }
                                return t
                            },
                            s.handleUnexpected = function(e, t) {
                                var n = !e.open && e.entity === s.ConnectionEnd.client;
                                n || e.error(e, {
                                    message: "Unexpected message. Received TLS record out of order.",
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: s.Alert.Description.unexpected_message
                                    }
                                })
                            },
                            s.handleHelloRequest = function(e, t, n) { ! e.handshaking && e.handshakes > 0 && (s.queue(e, s.createAlert(e, {
                                level: s.Alert.Level.warning,
                                description: s.Alert.Description.no_renegotiation
                            })), s.flush(e)),
                                e.process()
                            },
                            s.parseHelloMessage = function(t, n, i) {
                                var r = null,
                                    o = t.entity === s.ConnectionEnd.client;
                                if (38 > i) t.error(t, {
                                    message: o ? "Invalid ServerHello message. Message too short.": "Invalid ClientHello message. Message too short.",
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: s.Alert.Description.illegal_parameter
                                    }
                                });
                                else {
                                    var c = n.fragment,
                                        l = c.length();
                                    if (r = {
                                            version: {
                                                major: c.getByte(),
                                                minor: c.getByte()
                                            },
                                            random: e.util.createBuffer(c.getBytes(32)),
                                            session_id: a(c, 1),
                                            extensions: []
                                        },
                                            o ? (r.cipher_suite = c.getBytes(2), r.compression_method = c.getByte()) : (r.cipher_suites = a(c, 2), r.compression_methods = a(c, 1)), l = i - (l - c.length()), l > 0) {
                                        for (var d = a(c, 2); d.length() > 0;) r.extensions.push({
                                            type: [d.getByte(), d.getByte()],
                                            data: a(d, 2)
                                        });
                                        if (!o) for (var p = 0; p < r.extensions.length; ++p) {
                                            var u = r.extensions[p];
                                            if (0 === u.type[0] && 0 === u.type[1]) for (var f = a(u.data, 2); f.length() > 0;) {
                                                var h = f.getByte();
                                                if (0 !== h) break;
                                                t.session.extensions.server_name.serverNameList.push(a(f, 2).getBytes())
                                            }
                                        }
                                    }
                                    if (t.session.version && (r.version.major !== t.session.version.major || r.version.minor !== t.session.version.minor)) return t.error(t, {
                                        message: "TLS version change is disallowed during renegotiation.",
                                        send: !0,
                                        alert: {
                                            level: s.Alert.Level.fatal,
                                            description: s.Alert.Description.protocol_version
                                        }
                                    });
                                    if (o) t.session.cipherSuite = s.getCipherSuite(r.cipher_suite);
                                    else for (var g = e.util.createBuffer(r.cipher_suites.bytes()); g.length() > 0 && (t.session.cipherSuite = s.getCipherSuite(g.getBytes(2)), null === t.session.cipherSuite););
                                    if (null === t.session.cipherSuite) return t.error(t, {
                                        message: "No cipher suites in common.",
                                        send: !0,
                                        alert: {
                                            level: s.Alert.Level.fatal,
                                            description: s.Alert.Description.handshake_failure
                                        },
                                        cipherSuite: e.util.bytesToHex(r.cipher_suite)
                                    });
                                    t.session.compressionMethod = o ? r.compression_method: s.CompressionMethod.none
                                }
                                return r
                            },
                            s.createSecurityParameters = function(e, t) {
                                var n = e.entity === s.ConnectionEnd.client,
                                    i = t.random.bytes(),
                                    r = n ? e.session.sp.client_random: i,
                                    a = n ? i: s.createRandom().getBytes();
                                e.session.sp = {
                                    entity: e.entity,
                                    prf_algorithm: s.PRFAlgorithm.tls_prf_sha256,
                                    bulk_cipher_algorithm: null,
                                    cipher_type: null,
                                    enc_key_length: null,
                                    block_length: null,
                                    fixed_iv_length: null,
                                    record_iv_length: null,
                                    mac_algorithm: null,
                                    mac_length: null,
                                    mac_key_length: null,
                                    compression_algorithm: e.session.compressionMethod,
                                    pre_master_secret: null,
                                    master_secret: null,
                                    client_random: r,
                                    server_random: a
                                }
                            },
                            s.handleServerHello = function(e, t, n) {
                                var i = s.parseHelloMessage(e, t, n);
                                if (!e.fail) {
                                    if (! (i.version.minor <= e.version.minor)) return e.error(e, {
                                        message: "Incompatible TLS version.",
                                        send: !0,
                                        alert: {
                                            level: s.Alert.Level.fatal,
                                            description: s.Alert.Description.protocol_version
                                        }
                                    });
                                    e.version.minor = i.version.minor,
                                        e.session.version = e.version;
                                    var r = i.session_id.bytes();
                                    r.length > 0 && r === e.session.id ? (e.expect = f, e.session.resuming = !0, e.session.sp.server_random = i.random.bytes()) : (e.expect = l, e.session.resuming = !1, s.createSecurityParameters(e, i)),
                                        e.session.id = r,
                                        e.process()
                                }
                            },
                            s.handleClientHello = function(t, n, i) {
                                var r = s.parseHelloMessage(t, n, i);
                                if (!t.fail) {
                                    var a = r.session_id.bytes(),
                                        o = null;
                                    if (t.sessionCache && (o = t.sessionCache.getSession(a), null === o ? a = "": (o.version.major !== r.version.major || o.version.minor > r.version.minor) && (o = null, a = "")), 0 === a.length && (a = e.random.getBytes(32)), t.session.id = a, t.session.clientHelloVersion = r.version, t.session.sp = {},
                                            o) t.version = t.session.version = o.version,
                                        t.session.sp = o.sp;
                                    else {
                                        for (var c, l = 1; l < s.SupportedVersions.length && (c = s.SupportedVersions[l], !(c.minor <= r.version.minor)); ++l);
                                        t.version = {
                                            major: c.major,
                                            minor: c.minor
                                        },
                                            t.session.version = t.version
                                    }
                                    null !== o ? (t.expect = _, t.session.resuming = !0, t.session.sp.client_random = r.random.bytes()) : (t.expect = t.verifyClient !== !1 ? v: C, t.session.resuming = !1, s.createSecurityParameters(t, r)),
                                        t.open = !0,
                                        s.queue(t, s.createRecord(t, {
                                            type: s.ContentType.handshake,
                                            data: s.createServerHello(t)
                                        })),
                                        t.session.resuming ? (s.queue(t, s.createRecord(t, {
                                            type: s.ContentType.change_cipher_spec,
                                            data: s.createChangeCipherSpec()
                                        })), t.state.pending = s.createConnectionState(t), t.state.current.write = t.state.pending.write, s.queue(t, s.createRecord(t, {
                                            type: s.ContentType.handshake,
                                            data: s.createFinished(t)
                                        }))) : (s.queue(t, s.createRecord(t, {
                                            type: s.ContentType.handshake,
                                            data: s.createCertificate(t)
                                        })), t.fail || (s.queue(t, s.createRecord(t, {
                                            type: s.ContentType.handshake,
                                            data: s.createServerKeyExchange(t)
                                        })), t.verifyClient !== !1 && s.queue(t, s.createRecord(t, {
                                            type: s.ContentType.handshake,
                                            data: s.createCertificateRequest(t)
                                        })), s.queue(t, s.createRecord(t, {
                                            type: s.ContentType.handshake,
                                            data: s.createServerHelloDone(t)
                                        })))),
                                        s.flush(t),
                                        t.process()
                                }
                            },
                            s.handleCertificate = function(t, n, i) {
                                if (3 > i) return t.error(t, {
                                    message: "Invalid Certificate message. Message too short.",
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: s.Alert.Description.illegal_parameter
                                    }
                                });
                                var r, o, c = n.fragment,
                                    l = {
                                        certificate_list: a(c, 3)
                                    },
                                    p = [];
                                try {
                                    for (; l.certificate_list.length() > 0;) r = a(l.certificate_list, 3),
                                        o = e.asn1.fromDer(r),
                                        r = e.pki.certificateFromAsn1(o, !0),
                                        p.push(r)
                                } catch(u) {
                                    return t.error(t, {
                                        message: "Could not parse certificate list.",
                                        cause: u,
                                        send: !0,
                                        alert: {
                                            level: s.Alert.Level.fatal,
                                            description: s.Alert.Description.bad_certificate
                                        }
                                    })
                                }
                                var f = t.entity === s.ConnectionEnd.client; ! f && t.verifyClient !== !0 || 0 !== p.length ? 0 === p.length ? t.expect = f ? d: C: (f ? t.session.serverCertificate = p[0] : t.session.clientCertificate = p[0], s.verifyCertificateChain(t, p) && (t.expect = f ? d: C)) : t.error(t, {
                                    message: f ? "No server certificate provided.": "No client certificate provided.",
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: s.Alert.Description.illegal_parameter
                                    }
                                }),
                                    t.process()
                            },
                            s.handleServerKeyExchange = function(e, t, n) {
                                return n > 0 ? e.error(e, {
                                    message: "Invalid key parameters. Only RSA is supported.",
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: s.Alert.Description.unsupported_certificate
                                    }
                                }) : (e.expect = p, void e.process())
                            },
                            s.handleClientKeyExchange = function(t, n, i) {
                                if (48 > i) return t.error(t, {
                                    message: "Invalid key parameters. Only RSA is supported.",
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: s.Alert.Description.unsupported_certificate
                                    }
                                });
                                var r = n.fragment,
                                    o = {
                                        enc_pre_master_secret: a(r, 2).getBytes()
                                    },
                                    c = null;
                                if (t.getPrivateKey) try {
                                    c = t.getPrivateKey(t, t.session.serverCertificate),
                                        c = e.pki.privateKeyFromPem(c)
                                } catch(l) {
                                    t.error(t, {
                                        message: "Could not get private key.",
                                        cause: l,
                                        send: !0,
                                        alert: {
                                            level: s.Alert.Level.fatal,
                                            description: s.Alert.Description.internal_error
                                        }
                                    })
                                }
                                if (null === c) return t.error(t, {
                                    message: "No private key set.",
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: s.Alert.Description.internal_error
                                    }
                                });
                                try {
                                    var d = t.session.sp;
                                    d.pre_master_secret = c.decrypt(o.enc_pre_master_secret);
                                    var p = t.session.clientHelloVersion;
                                    if (p.major !== d.pre_master_secret.charCodeAt(0) || p.minor !== d.pre_master_secret.charCodeAt(1)) throw new Error("TLS version rollback attack detected.")
                                } catch(l) {
                                    d.pre_master_secret = e.random.getBytes(48)
                                }
                                t.expect = _,
                                null !== t.session.clientCertificate && (t.expect = S),
                                    t.process()
                            },
                            s.handleCertificateRequest = function(e, t, n) {
                                if (3 > n) return e.error(e, {
                                    message: "Invalid CertificateRequest. Message too short.",
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: s.Alert.Description.illegal_parameter
                                    }
                                });
                                var i = t.fragment,
                                    r = {
                                        certificate_types: a(i, 1),
                                        certificate_authorities: a(i, 2)
                                    };
                                e.session.certificateRequest = r,
                                    e.expect = u,
                                    e.process()
                            },
                            s.handleCertificateVerify = function(t, n, i) {
                                if (2 > i) return t.error(t, {
                                    message: "Invalid CertificateVerify. Message too short.",
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: s.Alert.Description.illegal_parameter
                                    }
                                });
                                var r = n.fragment;
                                r.read -= 4;
                                var o = r.bytes();
                                r.read += 4;
                                var c = {
                                        signature: a(r, 2).getBytes()
                                    },
                                    l = e.util.createBuffer();
                                l.putBuffer(t.session.md5.digest()),
                                    l.putBuffer(t.session.sha1.digest()),
                                    l = l.getBytes();
                                try {
                                    var d = t.session.clientCertificate;
                                    if (!d.publicKey.verify(l, c.signature, "NONE")) throw new Error("CertificateVerify signature does not match.");
                                    t.session.md5.update(o),
                                        t.session.sha1.update(o)
                                } catch(p) {
                                    return t.error(t, {
                                        message: "Bad signature in CertificateVerify.",
                                        send: !0,
                                        alert: {
                                            level: s.Alert.Level.fatal,
                                            description: s.Alert.Description.handshake_failure
                                        }
                                    })
                                }
                                t.expect = _,
                                    t.process()
                            },
                            s.handleServerHelloDone = function(t, n, i) {
                                if (i > 0) return t.error(t, {
                                    message: "Invalid ServerHelloDone message. Invalid length.",
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: s.Alert.Description.record_overflow
                                    }
                                });
                                if (null === t.serverCertificate) {
                                    var r = {
                                            message: "No server certificate provided. Not enough security.",
                                            send: !0,
                                            alert: {
                                                level: s.Alert.Level.fatal,
                                                description: s.Alert.Description.insufficient_security
                                            }
                                        },
                                        a = 0,
                                        o = t.verify(t, r.alert.description, a, []);
                                    if (o !== !0) return (o || 0 === o) && ("object" != typeof o || e.util.isArray(o) ? "number" == typeof o && (r.alert.description = o) : (o.message && (r.message = o.message), o.alert && (r.alert.description = o.alert))),
                                        t.error(t, r)
                                }
                                null !== t.session.certificateRequest && (n = s.createRecord(t, {
                                    type: s.ContentType.handshake,
                                    data: s.createCertificate(t)
                                }), s.queue(t, n)),
                                    n = s.createRecord(t, {
                                        type: s.ContentType.handshake,
                                        data: s.createClientKeyExchange(t)
                                    }),
                                    s.queue(t, n),
                                    t.expect = m;
                                var c = function(e, t) {
                                    null !== e.session.certificateRequest && null !== e.session.clientCertificate && s.queue(e, s.createRecord(e, {
                                        type: s.ContentType.handshake,
                                        data: s.createCertificateVerify(e, t)
                                    })),
                                        s.queue(e, s.createRecord(e, {
                                            type: s.ContentType.change_cipher_spec,
                                            data: s.createChangeCipherSpec()
                                        })),
                                        e.state.pending = s.createConnectionState(e),
                                        e.state.current.write = e.state.pending.write,
                                        s.queue(e, s.createRecord(e, {
                                            type: s.ContentType.handshake,
                                            data: s.createFinished(e)
                                        })),
                                        e.expect = f,
                                        s.flush(e),
                                        e.process()
                                };
                                return null === t.session.certificateRequest || null === t.session.clientCertificate ? c(t, null) : void s.getClientSignature(t, c)
                            },
                            s.handleChangeCipherSpec = function(e, t) {
                                if (1 !== t.fragment.getByte()) return e.error(e, {
                                    message: "Invalid ChangeCipherSpec message received.",
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: s.Alert.Description.illegal_parameter
                                    }
                                });
                                var n = e.entity === s.ConnectionEnd.client; (e.session.resuming && n || !e.session.resuming && !n) && (e.state.pending = s.createConnectionState(e)),
                                    e.state.current.read = e.state.pending.read,
                                (!e.session.resuming && n || e.session.resuming && !n) && (e.state.pending = null),
                                    e.expect = n ? h: b,
                                    e.process()
                            },
                            s.handleFinished = function(n, i, r) {
                                var a = i.fragment;
                                a.read -= 4;
                                var o = a.bytes();
                                a.read += 4;
                                var c = i.fragment.getBytes();
                                a = e.util.createBuffer(),
                                    a.putBuffer(n.session.md5.digest()),
                                    a.putBuffer(n.session.sha1.digest());
                                var l = n.entity === s.ConnectionEnd.client,
                                    d = l ? "server finished": "client finished",
                                    p = n.session.sp,
                                    u = 12,
                                    f = t;
                                return a = f(p.master_secret, d, a.getBytes(), u),
                                    a.getBytes() !== c ? n.error(n, {
                                        message: "Invalid verify_data in Finished message.",
                                        send: !0,
                                        alert: {
                                            level: s.Alert.Level.fatal,
                                            description: s.Alert.Description.decrypt_error
                                        }
                                    }) : (n.session.md5.update(o), n.session.sha1.update(o), (n.session.resuming && l || !n.session.resuming && !l) && (s.queue(n, s.createRecord(n, {
                                        type: s.ContentType.change_cipher_spec,
                                        data: s.createChangeCipherSpec()
                                    })), n.state.current.write = n.state.pending.write, n.state.pending = null, s.queue(n, s.createRecord(n, {
                                        type: s.ContentType.handshake,
                                        data: s.createFinished(n)
                                    }))), n.expect = l ? g: E, n.handshaking = !1, ++n.handshakes, n.peerCertificate = l ? n.session.serverCertificate: n.session.clientCertificate, s.flush(n), n.isConnected = !0, n.connected(n), n.process(), void 0)
                            },
                            s.handleAlert = function(e, t) {
                                var n, i = t.fragment,
                                    r = {
                                        level: i.getByte(),
                                        description: i.getByte()
                                    };
                                switch (r.description) {
                                    case s.Alert.Description.close_notify:
                                        n = "Connection closed.";
                                        break;
                                    case s.Alert.Description.unexpected_message:
                                        n = "Unexpected message.";
                                        break;
                                    case s.Alert.Description.bad_record_mac:
                                        n = "Bad record MAC.";
                                        break;
                                    case s.Alert.Description.decryption_failed:
                                        n = "Decryption failed.";
                                        break;
                                    case s.Alert.Description.record_overflow:
                                        n = "Record overflow.";
                                        break;
                                    case s.Alert.Description.decompression_failure:
                                        n = "Decompression failed.";
                                        break;
                                    case s.Alert.Description.handshake_failure:
                                        n = "Handshake failure.";
                                        break;
                                    case s.Alert.Description.bad_certificate:
                                        n = "Bad certificate.";
                                        break;
                                    case s.Alert.Description.unsupported_certificate:
                                        n = "Unsupported certificate.";
                                        break;
                                    case s.Alert.Description.certificate_revoked:
                                        n = "Certificate revoked.";
                                        break;
                                    case s.Alert.Description.certificate_expired:
                                        n = "Certificate expired.";
                                        break;
                                    case s.Alert.Description.certificate_unknown:
                                        n = "Certificate unknown.";
                                        break;
                                    case s.Alert.Description.illegal_parameter:
                                        n = "Illegal parameter.";
                                        break;
                                    case s.Alert.Description.unknown_ca:
                                        n = "Unknown certificate authority.";
                                        break;
                                    case s.Alert.Description.access_denied:
                                        n = "Access denied.";
                                        break;
                                    case s.Alert.Description.decode_error:
                                        n = "Decode error.";
                                        break;
                                    case s.Alert.Description.decrypt_error:
                                        n = "Decrypt error.";
                                        break;
                                    case s.Alert.Description.export_restriction:
                                        n = "Export restriction.";
                                        break;
                                    case s.Alert.Description.protocol_version:
                                        n = "Unsupported protocol version.";
                                        break;
                                    case s.Alert.Description.insufficient_security:
                                        n = "Insufficient security.";
                                        break;
                                    case s.Alert.Description.internal_error:
                                        n = "Internal error.";
                                        break;
                                    case s.Alert.Description.user_canceled:
                                        n = "User canceled.";
                                        break;
                                    case s.Alert.Description.no_renegotiation:
                                        n = "Renegotiation not supported.";
                                        break;
                                    default:
                                        n = "Unknown error."
                                }
                                return r.description === s.Alert.Description.close_notify ? e.close() : (e.error(e, {
                                    message: n,
                                    send: !1,
                                    origin: e.entity === s.ConnectionEnd.client ? "server": "client",
                                    alert: r
                                }), void e.process())
                            },
                            s.handleHandshake = function(t, n) {
                                var i = n.fragment,
                                    r = i.getByte(),
                                    a = i.getInt24();
                                if (a > i.length()) return t.fragmented = n,
                                    n.fragment = e.util.createBuffer(),
                                    i.read -= 4,
                                    t.process();
                                t.fragmented = null,
                                    i.read -= 4;
                                var o = i.bytes(a + 4);
                                i.read += 4,
                                    r in M[t.entity][t.expect] ? (t.entity === s.ConnectionEnd.server && !t.open && !t.fail && (t.handshaking = !0, t.session = {
                                        version: null,
                                        extensions: {
                                            server_name: {
                                                serverNameList: []
                                            }
                                        },
                                        cipherSuite: null,
                                        compressionMethod: null,
                                        serverCertificate: null,
                                        clientCertificate: null,
                                        md5: e.md.md5.create(),
                                        sha1: e.md.sha1.create()
                                    }), r !== s.HandshakeType.hello_request && r !== s.HandshakeType.certificate_verify && r !== s.HandshakeType.finished && (t.session.md5.update(o), t.session.sha1.update(o)), M[t.entity][t.expect][r](t, n, a)) : s.handleUnexpected(t, n)
                            },
                            s.handleApplicationData = function(e, t) {
                                e.data.putBuffer(t.fragment),
                                    e.dataReady(e),
                                    e.process()
                            },
                            s.handleHeartbeat = function(t, n) {
                                var i = n.fragment,
                                    r = i.getByte(),
                                    a = i.getInt16(),
                                    o = i.getBytes(a);
                                if (r === s.HeartbeatMessageType.heartbeat_request) {
                                    if (t.handshaking || a > o.length) return t.process();
                                    s.queue(t, s.createRecord(t, {
                                        type: s.ContentType.heartbeat,
                                        data: s.createHeartbeat(s.HeartbeatMessageType.heartbeat_response, o)
                                    })),
                                        s.flush(t)
                                } else if (r === s.HeartbeatMessageType.heartbeat_response) {
                                    if (o !== t.expectedHeartbeatPayload) return t.process();
                                    t.heartbeatReceived && t.heartbeatReceived(t, e.util.createBuffer(o))
                                }
                                t.process()
                            };
                        var c = 0,
                            l = 1,
                            d = 2,
                            p = 3,
                            u = 4,
                            f = 5,
                            h = 6,
                            g = 7,
                            m = 8,
                            y = 0,
                            v = 1,
                            C = 2,
                            S = 3,
                            _ = 4,
                            b = 5,
                            E = 6,
                            I = s.handleUnexpected,
                            A = s.handleChangeCipherSpec,
                            T = s.handleAlert,
                            k = s.handleHandshake,
                            w = s.handleApplicationData,
                            $ = s.handleHeartbeat,
                            P = [];
                        P[s.ConnectionEnd.client] = [[I, T, k, I, $], [I, T, k, I, $], [I, T, k, I, $], [I, T, k, I, $], [I, T, k, I, $], [A, T, I, I, $], [I, T, k, I, $], [I, T, k, w, $], [I, T, k, I, $]],
                            P[s.ConnectionEnd.server] = [[I, T, k, I, $], [I, T, k, I, $], [I, T, k, I, $], [I, T, k, I, $], [A, T, I, I, $], [I, T, k, I, $], [I, T, k, w, $], [I, T, k, I, $]];
                        var N = s.handleHelloRequest,
                            D = s.handleServerHello,
                            R = s.handleCertificate,
                            B = s.handleServerKeyExchange,
                            O = s.handleCertificateRequest,
                            U = s.handleServerHelloDone,
                            L = s.handleFinished,
                            M = [];
                        M[s.ConnectionEnd.client] = [[I, I, D, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I], [N, I, I, I, I, I, I, I, I, I, I, R, B, O, U, I, I, I, I, I, I], [N, I, I, I, I, I, I, I, I, I, I, I, B, O, U, I, I, I, I, I, I], [N, I, I, I, I, I, I, I, I, I, I, I, I, O, U, I, I, I, I, I, I], [N, I, I, I, I, I, I, I, I, I, I, I, I, I, U, I, I, I, I, I, I], [N, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I], [N, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, L], [N, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I], [N, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I]];
                        var x = s.handleClientHello,
                            F = s.handleClientKeyExchange,
                            V = s.handleCertificateVerify;
                        M[s.ConnectionEnd.server] = [[I, x, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I], [I, I, I, I, I, I, I, I, I, I, I, R, I, I, I, I, I, I, I, I, I], [I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, F, I, I, I, I], [I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, V, I, I, I, I, I], [I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I], [I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, L], [I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I], [I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I]],
                            s.generateKeys = function(e, n) {
                                var i = t,
                                    r = n.client_random + n.server_random;
                                e.session.resuming || (n.master_secret = i(n.pre_master_secret, "master secret", r, 48).bytes(), n.pre_master_secret = null),
                                    r = n.server_random + n.client_random;
                                var a = 2 * n.mac_key_length + 2 * n.enc_key_length,
                                    o = e.version.major === s.Versions.TLS_1_0.major && e.version.minor === s.Versions.TLS_1_0.minor;
                                o && (a += 2 * n.fixed_iv_length);
                                var c = i(n.master_secret, "key expansion", r, a),
                                    l = {
                                        client_write_MAC_key: c.getBytes(n.mac_key_length),
                                        server_write_MAC_key: c.getBytes(n.mac_key_length),
                                        client_write_key: c.getBytes(n.enc_key_length),
                                        server_write_key: c.getBytes(n.enc_key_length)
                                    };
                                return o && (l.client_write_IV = c.getBytes(n.fixed_iv_length), l.server_write_IV = c.getBytes(n.fixed_iv_length)),
                                    l
                            },
                            s.createConnectionState = function(e) {
                                var t = e.entity === s.ConnectionEnd.client,
                                    n = function() {
                                        var e = {
                                            sequenceNumber: [0, 0],
                                            macKey: null,
                                            macLength: 0,
                                            macFunction: null,
                                            cipherState: null,
                                            cipherFunction: function(e) {
                                                return ! 0
                                            },
                                            compressionState: null,
                                            compressFunction: function(e) {
                                                return ! 0
                                            },
                                            updateSequenceNumber: function() {
                                                4294967295 === e.sequenceNumber[1] ? (e.sequenceNumber[1] = 0, ++e.sequenceNumber[0]) : ++e.sequenceNumber[1]
                                            }
                                        };
                                        return e
                                    },
                                    a = {
                                        read: n(),
                                        write: n()
                                    };
                                if (a.read.update = function(e, t) {
                                        return a.read.cipherFunction(t, a.read) ? a.read.compressFunction(e, t, a.read) || e.error(e, {
                                            message: "Could not decompress record.",
                                            send: !0,
                                            alert: {
                                                level: s.Alert.Level.fatal,
                                                description: s.Alert.Description.decompression_failure
                                            }
                                        }) : e.error(e, {
                                            message: "Could not decrypt record or bad MAC.",
                                            send: !0,
                                            alert: {
                                                level: s.Alert.Level.fatal,
                                                description: s.Alert.Description.bad_record_mac
                                            }
                                        }),
                                            !e.fail
                                    },
                                        a.write.update = function(e, t) {
                                            return a.write.compressFunction(e, t, a.write) ? a.write.cipherFunction(t, a.write) || e.error(e, {
                                                message: "Could not encrypt record.",
                                                send: !1,
                                                alert: {
                                                    level: s.Alert.Level.fatal,
                                                    description: s.Alert.Description.internal_error
                                                }
                                            }) : e.error(e, {
                                                message: "Could not compress record.",
                                                send: !1,
                                                alert: {
                                                    level: s.Alert.Level.fatal,
                                                    description: s.Alert.Description.internal_error
                                                }
                                            }),
                                                !e.fail
                                        },
                                        e.session) {
                                    var o = e.session.sp;
                                    switch (e.session.cipherSuite.initSecurityParameters(o), o.keys = s.generateKeys(e, o), a.read.macKey = t ? o.keys.server_write_MAC_key: o.keys.client_write_MAC_key, a.write.macKey = t ? o.keys.client_write_MAC_key: o.keys.server_write_MAC_key, e.session.cipherSuite.initConnectionState(a, e, o), o.compression_algorithm) {
                                        case s.CompressionMethod.none:
                                            break;
                                        case s.CompressionMethod.deflate:
                                            a.read.compressFunction = r,
                                                a.write.compressFunction = i;
                                            break;
                                        default:
                                            throw new Error("Unsupported compression algorithm.")
                                    }
                                }
                                return a
                            },
                            s.createRandom = function() {
                                var t = new Date,
                                    n = +t + 6e4 * t.getTimezoneOffset(),
                                    i = e.util.createBuffer();
                                return i.putInt32(n),
                                    i.putBytes(e.random.getBytes(28)),
                                    i
                            },
                            s.createRecord = function(e, t) {
                                if (!t.data) return null;
                                var n = {
                                    type: t.type,
                                    version: {
                                        major: e.version.major,
                                        minor: e.version.minor
                                    },
                                    length: t.data.length(),
                                    fragment: t.data
                                };
                                return n
                            },
                            s.createAlert = function(t, n) {
                                var i = e.util.createBuffer();
                                return i.putByte(n.level),
                                    i.putByte(n.description),
                                    s.createRecord(t, {
                                        type: s.ContentType.alert,
                                        data: i
                                    })
                            },
                            s.createClientHello = function(t) {
                                t.session.clientHelloVersion = {
                                    major: t.version.major,
                                    minor: t.version.minor
                                };
                                for (var n = e.util.createBuffer(), i = 0; i < t.cipherSuites.length; ++i) {
                                    var r = t.cipherSuites[i];
                                    n.putByte(r.id[0]),
                                        n.putByte(r.id[1])
                                }
                                var a = n.length(),
                                    c = e.util.createBuffer();
                                c.putByte(s.CompressionMethod.none);
                                var l = c.length(),
                                    d = e.util.createBuffer();
                                if (t.virtualHost) {
                                    var p = e.util.createBuffer();
                                    p.putByte(0),
                                        p.putByte(0);
                                    var u = e.util.createBuffer();
                                    u.putByte(0),
                                        o(u, 2, e.util.createBuffer(t.virtualHost));
                                    var f = e.util.createBuffer();
                                    o(f, 2, u),
                                        o(p, 2, f),
                                        d.putBuffer(p)
                                }
                                var h = d.length();
                                h > 0 && (h += 2);
                                var g = t.session.id,
                                    m = g.length + 1 + 2 + 4 + 28 + 2 + a + 1 + l + h,
                                    y = e.util.createBuffer();
                                return y.putByte(s.HandshakeType.client_hello),
                                    y.putInt24(m),
                                    y.putByte(t.version.major),
                                    y.putByte(t.version.minor),
                                    y.putBytes(t.session.sp.client_random),
                                    o(y, 1, e.util.createBuffer(g)),
                                    o(y, 2, n),
                                    o(y, 1, c),
                                h > 0 && o(y, 2, d),
                                    y
                            },
                            s.createServerHello = function(t) {
                                var n = t.session.id,
                                    i = n.length + 1 + 2 + 4 + 28 + 2 + 1,
                                    r = e.util.createBuffer();
                                return r.putByte(s.HandshakeType.server_hello),
                                    r.putInt24(i),
                                    r.putByte(t.version.major),
                                    r.putByte(t.version.minor),
                                    r.putBytes(t.session.sp.server_random),
                                    o(r, 1, e.util.createBuffer(n)),
                                    r.putByte(t.session.cipherSuite.id[0]),
                                    r.putByte(t.session.cipherSuite.id[1]),
                                    r.putByte(t.session.compressionMethod),
                                    r
                            },
                            s.createCertificate = function(t) {
                                var n = t.entity === s.ConnectionEnd.client,
                                    i = null;
                                if (t.getCertificate) {
                                    var r;
                                    r = n ? t.session.certificateRequest: t.session.extensions.server_name.serverNameList,
                                        i = t.getCertificate(t, r)
                                }
                                var a = e.util.createBuffer();
                                if (null !== i) try {
                                    e.util.isArray(i) || (i = [i]);
                                    for (var c = null,
                                             l = 0; l < i.length; ++l) {
                                        var d = e.pem.decode(i[l])[0];
                                        if ("CERTIFICATE" !== d.type && "X509 CERTIFICATE" !== d.type && "TRUSTED CERTIFICATE" !== d.type) {
                                            var p = new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');
                                            throw p.headerType = d.type,
                                                p
                                        }
                                        if (d.procType && "ENCRYPTED" === d.procType.type) throw new Error("Could not convert certificate from PEM; PEM is encrypted.");
                                        var u = e.util.createBuffer(d.body);
                                        null === c && (c = e.asn1.fromDer(u.bytes(), !1));
                                        var f = e.util.createBuffer();
                                        o(f, 3, u),
                                            a.putBuffer(f)
                                    }
                                    i = e.pki.certificateFromAsn1(c),
                                        n ? t.session.clientCertificate = i: t.session.serverCertificate = i
                                } catch(h) {
                                    return t.error(t, {
                                        message: "Could not send certificate list.",
                                        cause: h,
                                        send: !0,
                                        alert: {
                                            level: s.Alert.Level.fatal,
                                            description: s.Alert.Description.bad_certificate
                                        }
                                    })
                                }
                                var g = 3 + a.length(),
                                    m = e.util.createBuffer();
                                return m.putByte(s.HandshakeType.certificate),
                                    m.putInt24(g),
                                    o(m, 3, a),
                                    m
                            },
                            s.createClientKeyExchange = function(t) {
                                var n = e.util.createBuffer();
                                n.putByte(t.session.clientHelloVersion.major),
                                    n.putByte(t.session.clientHelloVersion.minor),
                                    n.putBytes(e.random.getBytes(46));
                                var i = t.session.sp;
                                i.pre_master_secret = n.getBytes();
                                var r = t.session.serverCertificate.publicKey;
                                n = r.encrypt(i.pre_master_secret);
                                var a = n.length + 2,
                                    o = e.util.createBuffer();
                                return o.putByte(s.HandshakeType.client_key_exchange),
                                    o.putInt24(a),
                                    o.putInt16(n.length),
                                    o.putBytes(n),
                                    o
                            },
                            s.createServerKeyExchange = function(t) {
                                var n = 0,
                                    i = e.util.createBuffer();
                                return n > 0 && (i.putByte(s.HandshakeType.server_key_exchange), i.putInt24(n)),
                                    i
                            },
                            s.getClientSignature = function(t, n) {
                                var i = e.util.createBuffer();
                                i.putBuffer(t.session.md5.digest()),
                                    i.putBuffer(t.session.sha1.digest()),
                                    i = i.getBytes(),
                                    t.getSignature = t.getSignature ||
                                        function(t, n, i) {
                                            var r = null;
                                            if (t.getPrivateKey) try {
                                                r = t.getPrivateKey(t, t.session.clientCertificate),
                                                    r = e.pki.privateKeyFromPem(r)
                                            } catch(a) {
                                                t.error(t, {
                                                    message: "Could not get private key.",
                                                    cause: a,
                                                    send: !0,
                                                    alert: {
                                                        level: s.Alert.Level.fatal,
                                                        description: s.Alert.Description.internal_error
                                                    }
                                                })
                                            }
                                            null === r ? t.error(t, {
                                                message: "No private key set.",
                                                send: !0,
                                                alert: {
                                                    level: s.Alert.Level.fatal,
                                                    description: s.Alert.Description.internal_error
                                                }
                                            }) : n = r.sign(n, null),
                                                i(t, n)
                                        },
                                    t.getSignature(t, i, n)
                            },
                            s.createCertificateVerify = function(t, n) {
                                var i = n.length + 2,
                                    r = e.util.createBuffer();
                                return r.putByte(s.HandshakeType.certificate_verify),
                                    r.putInt24(i),
                                    r.putInt16(n.length),
                                    r.putBytes(n),
                                    r
                            },
                            s.createCertificateRequest = function(t) {
                                var n = e.util.createBuffer();
                                n.putByte(1);
                                var i = e.util.createBuffer();
                                for (var r in t.caStore.certs) {
                                    var a = t.caStore.certs[r],
                                        c = e.pki.distinguishedNameToAsn1(a.subject),
                                        l = e.asn1.toDer(c);
                                    i.putInt16(l.length()),
                                        i.putBuffer(l)
                                }
                                var d = 1 + n.length() + 2 + i.length(),
                                    p = e.util.createBuffer();
                                return p.putByte(s.HandshakeType.certificate_request),
                                    p.putInt24(d),
                                    o(p, 1, n),
                                    o(p, 2, i),
                                    p
                            },
                            s.createServerHelloDone = function(t) {
                                var n = e.util.createBuffer();
                                return n.putByte(s.HandshakeType.server_hello_done),
                                    n.putInt24(0),
                                    n
                            },
                            s.createChangeCipherSpec = function() {
                                var t = e.util.createBuffer();
                                return t.putByte(1),
                                    t
                            },
                            s.createFinished = function(n) {
                                var i = e.util.createBuffer();
                                i.putBuffer(n.session.md5.digest()),
                                    i.putBuffer(n.session.sha1.digest());
                                var r = n.entity === s.ConnectionEnd.client,
                                    a = n.session.sp,
                                    o = 12,
                                    c = t,
                                    l = r ? "client finished": "server finished";
                                i = c(a.master_secret, l, i.getBytes(), o);
                                var d = e.util.createBuffer();
                                return d.putByte(s.HandshakeType.finished),
                                    d.putInt24(i.length()),
                                    d.putBuffer(i),
                                    d
                            },
                            s.createHeartbeat = function(t, n, i) {
                                "undefined" == typeof i && (i = n.length);
                                var r = e.util.createBuffer();
                                r.putByte(t),
                                    r.putInt16(i),
                                    r.putBytes(n);
                                var a = r.length(),
                                    o = Math.max(16, a - i - 3);
                                return r.putBytes(e.random.getBytes(o)),
                                    r
                            },
                            s.queue = function(t, n) {
                                if (n) {
                                    if (n.type === s.ContentType.handshake) {
                                        var i = n.fragment.bytes();
                                        t.session.md5.update(i),
                                            t.session.sha1.update(i),
                                            i = null
                                    }
                                    var r;
                                    if (n.fragment.length() <= s.MaxFragment) r = [n];
                                    else {
                                        r = [];
                                        for (var a = n.fragment.bytes(); a.length > s.MaxFragment;) r.push(s.createRecord(t, {
                                            type: n.type,
                                            data: e.util.createBuffer(a.slice(0, s.MaxFragment))
                                        })),
                                            a = a.slice(s.MaxFragment);
                                        a.length > 0 && r.push(s.createRecord(t, {
                                            type: n.type,
                                            data: e.util.createBuffer(a)
                                        }))
                                    }
                                    for (var o = 0; o < r.length && !t.fail; ++o) {
                                        var c = r[o],
                                            l = t.state.current.write;
                                        l.update(t, c) && t.records.push(c)
                                    }
                                }
                            },
                            s.flush = function(e) {
                                for (var t = 0; t < e.records.length; ++t) {
                                    var n = e.records[t];
                                    e.tlsData.putByte(n.type),
                                        e.tlsData.putByte(n.version.major),
                                        e.tlsData.putByte(n.version.minor),
                                        e.tlsData.putInt16(n.fragment.length()),
                                        e.tlsData.putBuffer(e.records[t].fragment)
                                }
                                return e.records = [],
                                    e.tlsDataReady(e)
                            };
                        var H = function(t) {
                                switch (t) {
                                    case ! 0 : return ! 0;
                                    case e.pki.certificateError.bad_certificate:
                                        return s.Alert.Description.bad_certificate;
                                    case e.pki.certificateError.unsupported_certificate:
                                        return s.Alert.Description.unsupported_certificate;
                                    case e.pki.certificateError.certificate_revoked:
                                        return s.Alert.Description.certificate_revoked;
                                    case e.pki.certificateError.certificate_expired:
                                        return s.Alert.Description.certificate_expired;
                                    case e.pki.certificateError.certificate_unknown:
                                        return s.Alert.Description.certificate_unknown;
                                    case e.pki.certificateError.unknown_ca:
                                        return s.Alert.Description.unknown_ca;
                                    default:
                                        return s.Alert.Description.bad_certificate
                                }
                            },
                            K = function(t) {
                                switch (t) {
                                    case ! 0 : return ! 0;
                                    case s.Alert.Description.bad_certificate:
                                        return e.pki.certificateError.bad_certificate;
                                    case s.Alert.Description.unsupported_certificate:
                                        return e.pki.certificateError.unsupported_certificate;
                                    case s.Alert.Description.certificate_revoked:
                                        return e.pki.certificateError.certificate_revoked;
                                    case s.Alert.Description.certificate_expired:
                                        return e.pki.certificateError.certificate_expired;
                                    case s.Alert.Description.certificate_unknown:
                                        return e.pki.certificateError.certificate_unknown;
                                    case s.Alert.Description.unknown_ca:
                                        return e.pki.certificateError.unknown_ca;
                                    default:
                                        return e.pki.certificateError.bad_certificate
                                }
                            };
                        s.verifyCertificateChain = function(t, n) {
                            try {
                                e.pki.verifyCertificateChain(t.caStore, n,
                                    function(n, i, r) {
                                        var a = (H(n), t.verify(t, n, i, r));
                                        if (a !== !0) {
                                            if ("object" == typeof a && !e.util.isArray(a)) {
                                                var o = new Error("The application rejected the certificate.");
                                                throw o.send = !0,
                                                    o.alert = {
                                                        level: s.Alert.Level.fatal,
                                                        description: s.Alert.Description.bad_certificate
                                                    },
                                                a.message && (o.message = a.message),
                                                a.alert && (o.alert.description = a.alert),
                                                    o
                                            }
                                            a !== n && (a = K(a))
                                        }
                                        return a
                                    })
                            } catch(i) {
                                var r = i; ("object" != typeof r || e.util.isArray(r)) && (r = {
                                    send: !0,
                                    alert: {
                                        level: s.Alert.Level.fatal,
                                        description: H(i)
                                    }
                                }),
                                "send" in r || (r.send = !0),
                                "alert" in r || (r.alert = {
                                    level: s.Alert.Level.fatal,
                                    description: H(r.error)
                                }),
                                    t.error(t, r)
                            }
                            return ! t.fail
                        },
                            s.createSessionCache = function(t, n) {
                                var i = null;
                                if (t && t.getSession && t.setSession && t.order) i = t;
                                else {
                                    i = {},
                                        i.cache = t || {},
                                        i.capacity = Math.max(n || 100, 1),
                                        i.order = [];
                                    for (var r in t) i.order.length <= n ? i.order.push(r) : delete t[r];
                                    i.getSession = function(t) {
                                        var n = null,
                                            r = null;
                                        if (t ? r = e.util.bytesToHex(t) : i.order.length > 0 && (r = i.order[0]), null !== r && r in i.cache) {
                                            n = i.cache[r],
                                                delete i.cache[r];
                                            for (var a in i.order) if (i.order[a] === r) {
                                                i.order.splice(a, 1);
                                                break
                                            }
                                        }
                                        return n
                                    },
                                        i.setSession = function(t, n) {
                                            if (i.order.length === i.capacity) {
                                                var r = i.order.shift();
                                                delete i.cache[r]
                                            }
                                            var r = e.util.bytesToHex(t);
                                            i.order.push(r),
                                                i.cache[r] = n
                                        }
                                }
                                return i
                            },
                            s.createConnection = function(t) {
                                var n = null;
                                n = t.caStore ? e.util.isArray(t.caStore) ? e.pki.createCaStore(t.caStore) : t.caStore: e.pki.createCaStore();
                                var i = t.cipherSuites || null;
                                if (null === i) {
                                    i = [];
                                    for (var r in s.CipherSuites) i.push(s.CipherSuites[r])
                                }
                                var a = t.server ? s.ConnectionEnd.server: s.ConnectionEnd.client,
                                    o = t.sessionCache ? s.createSessionCache(t.sessionCache) : null,
                                    l = {
                                        version: {
                                            major: s.Version.major,
                                            minor: s.Version.minor
                                        },
                                        entity: a,
                                        sessionId: t.sessionId,
                                        caStore: n,
                                        sessionCache: o,
                                        cipherSuites: i,
                                        connected: t.connected,
                                        virtualHost: t.virtualHost || null,
                                        verifyClient: t.verifyClient || !1,
                                        verify: t.verify ||
                                        function(e, t, n, i) {
                                            return t
                                        },
                                        getCertificate: t.getCertificate || null,
                                        getPrivateKey: t.getPrivateKey || null,
                                        getSignature: t.getSignature || null,
                                        input: e.util.createBuffer(),
                                        tlsData: e.util.createBuffer(),
                                        data: e.util.createBuffer(),
                                        tlsDataReady: t.tlsDataReady,
                                        dataReady: t.dataReady,
                                        heartbeatReceived: t.heartbeatReceived,
                                        closed: t.closed,
                                        error: function(e, n) {
                                            n.origin = n.origin || (e.entity === s.ConnectionEnd.client ? "client": "server"),
                                            n.send && (s.queue(e, s.createAlert(e, n.alert)), s.flush(e));
                                            var i = n.fatal !== !1;
                                            i && (e.fail = !0),
                                                t.error(e, n),
                                            i && e.close(!1)
                                        },
                                        deflate: t.deflate || null,
                                        inflate: t.inflate || null
                                    };
                                l.reset = function(e) {
                                    l.version = {
                                        major: s.Version.major,
                                        minor: s.Version.minor
                                    },
                                        l.record = null,
                                        l.session = null,
                                        l.peerCertificate = null,
                                        l.state = {
                                            pending: null,
                                            current: null
                                        },
                                        l.expect = l.entity === s.ConnectionEnd.client ? c: y,
                                        l.fragmented = null,
                                        l.records = [],
                                        l.open = !1,
                                        l.handshakes = 0,
                                        l.handshaking = !1,
                                        l.isConnected = !1,
                                        l.fail = !e && "undefined" != typeof e,
                                        l.input.clear(),
                                        l.tlsData.clear(),
                                        l.data.clear(),
                                        l.state.current = s.createConnectionState(l)
                                },
                                    l.reset();
                                var d = function(e, t) {
                                        var n = t.type - s.ContentType.change_cipher_spec,
                                            i = P[e.entity][e.expect];
                                        n in i ? i[n](e, t) : s.handleUnexpected(e, t)
                                    },
                                    p = function(t) {
                                        var n = 0,
                                            i = t.input,
                                            r = i.length();
                                        if (5 > r) n = 5 - r;
                                        else {
                                            t.record = {
                                                type: i.getByte(),
                                                version: {
                                                    major: i.getByte(),
                                                    minor: i.getByte()
                                                },
                                                length: i.getInt16(),
                                                fragment: e.util.createBuffer(),
                                                ready: !1
                                            };
                                            var a = t.record.version.major === t.version.major;
                                            a && t.session && t.session.version && (a = t.record.version.minor === t.version.minor),
                                            a || t.error(t, {
                                                message: "Incompatible TLS version.",
                                                send: !0,
                                                alert: {
                                                    level: s.Alert.Level.fatal,
                                                    description: s.Alert.Description.protocol_version
                                                }
                                            })
                                        }
                                        return n
                                    },
                                    u = function(e) {
                                        var t = 0,
                                            n = e.input,
                                            i = n.length();
                                        if (i < e.record.length) t = e.record.length - i;
                                        else {
                                            e.record.fragment.putBytes(n.getBytes(e.record.length)),
                                                n.compact();
                                            var r = e.state.current.read;
                                            r.update(e, e.record) && (null !== e.fragmented && (e.fragmented.type === e.record.type ? (e.fragmented.fragment.putBuffer(e.record.fragment), e.record = e.fragmented) : e.error(e, {
                                                message: "Invalid fragmented record.",
                                                send: !0,
                                                alert: {
                                                    level: s.Alert.Level.fatal,
                                                    description: s.Alert.Description.unexpected_message
                                                }
                                            })), e.record.ready = !0)
                                        }
                                        return t
                                    };
                                return l.handshake = function(t) {
                                    if (l.entity !== s.ConnectionEnd.client) l.error(l, {
                                        message: "Cannot initiate handshake as a server.",
                                        fatal: !1
                                    });
                                    else if (l.handshaking) l.error(l, {
                                        message: "Handshake already in progress.",
                                        fatal: !1
                                    });
                                    else {
                                        l.fail && !l.open && 0 === l.handshakes && (l.fail = !1),
                                            l.handshaking = !0,
                                            t = t || "";
                                        var n = null;
                                        t.length > 0 && (l.sessionCache && (n = l.sessionCache.getSession(t)), null === n && (t = "")),
                                        0 === t.length && l.sessionCache && (n = l.sessionCache.getSession(), null !== n && (t = n.id)),
                                            l.session = {
                                                id: t,
                                                version: null,
                                                cipherSuite: null,
                                                compressionMethod: null,
                                                serverCertificate: null,
                                                certificateRequest: null,
                                                clientCertificate: null,
                                                sp: {},
                                                md5: e.md.md5.create(),
                                                sha1: e.md.sha1.create()
                                            },
                                        n && (l.version = n.version, l.session.sp = n.sp),
                                            l.session.sp.client_random = s.createRandom().getBytes(),
                                            l.open = !0,
                                            s.queue(l, s.createRecord(l, {
                                                type: s.ContentType.handshake,
                                                data: s.createClientHello(l)
                                            })),
                                            s.flush(l)
                                    }
                                },
                                    l.process = function(e) {
                                        var t = 0;
                                        return e && l.input.putBytes(e),
                                        l.fail || (null !== l.record && l.record.ready && l.record.fragment.isEmpty() && (l.record = null), null === l.record && (t = p(l)), !l.fail && null !== l.record && !l.record.ready && (t = u(l)), !l.fail && null !== l.record && l.record.ready && d(l, l.record)),
                                            t
                                    },
                                    l.prepare = function(t) {
                                        return s.queue(l, s.createRecord(l, {
                                            type: s.ContentType.application_data,
                                            data: e.util.createBuffer(t)
                                        })),
                                            s.flush(l)
                                    },
                                    l.prepareHeartbeatRequest = function(t, n) {
                                        return t instanceof e.util.ByteBuffer && (t = t.bytes()),
                                        "undefined" == typeof n && (n = t.length),
                                            l.expectedHeartbeatPayload = t,
                                            s.queue(l, s.createRecord(l, {
                                                type: s.ContentType.heartbeat,
                                                data: s.createHeartbeat(s.HeartbeatMessageType.heartbeat_request, t, n)
                                            })),
                                            s.flush(l)
                                    },
                                    l.close = function(e) {
                                        if (!l.fail && l.sessionCache && l.session) {
                                            var t = {
                                                id: l.session.id,
                                                version: l.session.version,
                                                sp: l.session.sp
                                            };
                                            t.sp.keys = null,
                                                l.sessionCache.setSession(t.id, t)
                                        }
                                        l.open && (l.open = !1, l.input.clear(), (l.isConnected || l.handshaking) && (l.isConnected = l.handshaking = !1, s.queue(l, s.createAlert(l, {
                                            level: s.Alert.Level.warning,
                                            description: s.Alert.Description.close_notify
                                        })), s.flush(l)), l.closed(l)),
                                            l.reset(e)
                                    },
                                    l
                            },
                            e.tls = e.tls || {};
                        for (var G in s)"function" != typeof s[G] && (e.tls[G] = s[G]);
                        e.tls.prf_tls1 = t,
                            e.tls.hmac_sha1 = n,
                            e.tls.createSessionCache = s.createSessionCache,
                            e.tls.createConnection = s.createConnection
                    }
                    var i = "tls";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/tls", ["require", "module", "./asn1", "./hmac", "./md", "./pem", "./pki", "./random", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(t, i, r) {
                            var o = i.entity === e.tls.ConnectionEnd.client;
                            t.read.cipherState = {
                                init: !1,
                                cipher: e.cipher.createDecipher("AES-CBC", o ? r.keys.server_write_key: r.keys.client_write_key),
                                iv: o ? r.keys.server_write_IV: r.keys.client_write_IV
                            },
                                t.write.cipherState = {
                                    init: !1,
                                    cipher: e.cipher.createCipher("AES-CBC", o ? r.keys.client_write_key: r.keys.server_write_key),
                                    iv: o ? r.keys.client_write_IV: r.keys.server_write_IV
                                },
                                t.read.cipherFunction = a,
                                t.write.cipherFunction = n,
                                t.read.macLength = t.write.macLength = r.mac_length,
                                t.read.macFunction = t.write.macFunction = s.hmac_sha1
                        }
                        function n(t, n) {
                            var r = !1,
                                a = n.macFunction(n.macKey, n.sequenceNumber, t);
                            t.fragment.putBytes(a),
                                n.updateSequenceNumber();
                            var o;
                            o = t.version.minor === s.Versions.TLS_1_0.minor ? n.cipherState.init ? null: n.cipherState.iv: e.random.getBytesSync(16),
                                n.cipherState.init = !0;
                            var c = n.cipherState.cipher;
                            return c.start({
                                iv: o
                            }),
                            t.version.minor >= s.Versions.TLS_1_1.minor && c.output.putBytes(o),
                                c.update(t.fragment),
                            c.finish(i) && (t.fragment = c.output, t.length = t.fragment.length(), r = !0),
                                r
                        }
                        function i(e, t, n) {
                            if (!n) {
                                var i = e - t.length() % e;
                                t.fillWithByte(i - 1, i)
                            }
                            return ! 0
                        }
                        function r(e, t, n) {
                            var i = !0;
                            if (n) {
                                for (var r = t.length(), a = t.last(), o = r - 1 - a; r - 1 > o; ++o) i = i && t.at(o) == a;
                                i && t.truncate(a + 1)
                            }
                            return i
                        }
                        function a(t, n) {
                            var i = !1; ++c;
                            var a;
                            a = t.version.minor === s.Versions.TLS_1_0.minor ? n.cipherState.init ? null: n.cipherState.iv: t.fragment.getBytes(16),
                                n.cipherState.init = !0;
                            var l = n.cipherState.cipher;
                            l.start({
                                iv: a
                            }),
                                l.update(t.fragment),
                                i = l.finish(r);
                            var d = n.macLength,
                                p = e.random.getBytesSync(d),
                                u = l.output.length();
                            u >= d ? (t.fragment = l.output.getBytes(u - d), p = l.output.getBytes(d)) : t.fragment = l.output.getBytes(),
                                t.fragment = e.util.createBuffer(t.fragment),
                                t.length = t.fragment.length();
                            var f = n.macFunction(n.macKey, n.sequenceNumber, t);
                            return n.updateSequenceNumber(),
                                i = o(n.macKey, p, f) && i
                        }
                        function o(t, n, i) {
                            var r = e.hmac.create();
                            return r.start("SHA1", t),
                                r.update(n),
                                n = r.digest().getBytes(),
                                r.start(null, null),
                                r.update(i),
                                i = r.digest().getBytes(),
                            n === i
                        }
                        var s = e.tls;
                        s.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA = {
                            id: [0, 47],
                            name: "TLS_RSA_WITH_AES_128_CBC_SHA",
                            initSecurityParameters: function(e) {
                                e.bulk_cipher_algorithm = s.BulkCipherAlgorithm.aes,
                                    e.cipher_type = s.CipherType.block,
                                    e.enc_key_length = 16,
                                    e.block_length = 16,
                                    e.fixed_iv_length = 16,
                                    e.record_iv_length = 16,
                                    e.mac_algorithm = s.MACAlgorithm.hmac_sha1,
                                    e.mac_length = 20,
                                    e.mac_key_length = 20
                            },
                            initConnectionState: t
                        },
                            s.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA = {
                                id: [0, 53],
                                name: "TLS_RSA_WITH_AES_256_CBC_SHA",
                                initSecurityParameters: function(e) {
                                    e.bulk_cipher_algorithm = s.BulkCipherAlgorithm.aes,
                                        e.cipher_type = s.CipherType.block,
                                        e.enc_key_length = 32,
                                        e.block_length = 16,
                                        e.fixed_iv_length = 16,
                                        e.record_iv_length = 16,
                                        e.mac_algorithm = s.MACAlgorithm.hmac_sha1,
                                        e.mac_length = 20,
                                        e.mac_key_length = 20
                                },
                                initConnectionState: t
                            };
                        var c = 0
                    }
                    var i = "aesCipherSuites";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/aesCipherSuites", ["require", "module", "./aes", "./tls"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        e.debug = e.debug || {},
                            e.debug.storage = {},
                            e.debug.get = function(t, n) {
                                var i;
                                return "undefined" == typeof t ? i = e.debug.storage: t in e.debug.storage && (i = "undefined" == typeof n ? e.debug.storage[t] : e.debug.storage[t][n]),
                                    i
                            },
                            e.debug.set = function(t, n, i) {
                                t in e.debug.storage || (e.debug.storage[t] = {}),
                                    e.debug.storage[t][n] = i
                            },
                            e.debug.clear = function(t, n) {
                                "undefined" == typeof t ? e.debug.storage = {}: t in e.debug.storage && ("undefined" == typeof n ? delete e.debug.storage[t] : delete e.debug.storage[t][n])
                            }
                    }
                    var i = "debug";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/debug", ["require", "module"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(t, n, i, r) {
                            t.generate = function(t, a) {
                                for (var o = new e.util.ByteBuffer,
                                         s = Math.ceil(a / r) + i, c = new e.util.ByteBuffer, l = i; s > l; ++l) {
                                    c.putInt32(l),
                                        n.start(),
                                        n.update(t + c.getBytes());
                                    var d = n.digest();
                                    o.putBytes(d.getBytes(r))
                                }
                                return o.truncate(o.length() - a),
                                    o.getBytes()
                            }
                        }
                        e.kem = e.kem || {};
                        var n = e.jsbn.BigInteger;
                        e.kem.rsa = {},
                            e.kem.rsa.create = function(t, i) {
                                i = i || {};
                                var r = i.prng || e.random,
                                    a = {};
                                return a.encrypt = function(i, a) {
                                    var o, s = Math.ceil(i.n.bitLength() / 8);
                                    do o = new n(e.util.bytesToHex(r.getBytesSync(s)), 16).mod(i.n);
                                    while (o.equals(n.ZERO));
                                    o = e.util.hexToBytes(o.toString(16));
                                    var c = s - o.length;
                                    c > 0 && (o = e.util.fillString(String.fromCharCode(0), c) + o);
                                    var l = i.encrypt(o, "NONE"),
                                        d = t.generate(o, a);
                                    return {
                                        encapsulation: l,
                                        key: d
                                    }
                                },
                                    a.decrypt = function(e, n, i) {
                                        var r = e.decrypt(n, "NONE");
                                        return t.generate(r, i)
                                    },
                                    a
                            },
                            e.kem.kdf1 = function(e, n) {
                                t(this, e, 0, n || e.digestLength)
                            },
                            e.kem.kdf2 = function(e, n) {
                                t(this, e, 1, n || e.digestLength)
                            }
                    }
                    var i = "kem";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/kem", ["require", "module", "./util", "./random", "./jsbn"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        e.log = e.log || {},
                            e.log.levels = ["none", "error", "warning", "info", "debug", "verbose", "max"];
                        var t = {},
                            n = [],
                            i = null;
                        e.log.LEVEL_LOCKED = 2,
                            e.log.NO_LEVEL_CHECK = 4,
                            e.log.INTERPOLATE = 8;
                        for (var r = 0; r < e.log.levels.length; ++r) {
                            var a = e.log.levels[r];
                            t[a] = {
                                index: r,
                                name: a.toUpperCase()
                            }
                        }
                        e.log.logMessage = function(i) {
                            for (var r = t[i.level].index, a = 0; a < n.length; ++a) {
                                var o = n[a];
                                if (o.flags & e.log.NO_LEVEL_CHECK) o.f(i);
                                else {
                                    var s = t[o.level].index;
                                    s >= r && o.f(o, i)
                                }
                            }
                        },
                            e.log.prepareStandard = function(e) {
                                "standard" in e || (e.standard = t[e.level].name + " [" + e.category + "] " + e.message)
                            },
                            e.log.prepareFull = function(t) {
                                if (! ("full" in t)) {
                                    var n = [t.message];
                                    n = n.concat([] || t.arguments),
                                        t.full = e.util.format.apply(this, n)
                                }
                            },
                            e.log.prepareStandardFull = function(t) {
                                "standardFull" in t || (e.log.prepareStandard(t), t.standardFull = t.standard)
                            };
                        for (var o = ["error", "warning", "info", "debug", "verbose"], r = 0; r < o.length; ++r)(function(t) {
                            e.log[t] = function(n, i) {
                                var r = Array.prototype.slice.call(arguments).slice(2),
                                    a = {
                                        timestamp: new Date,
                                        level: t,
                                        category: n,
                                        message: i,
                                        arguments: r
                                    };
                                e.log.logMessage(a)
                            }
                        })(o[r]);
                        if (e.log.makeLogger = function(t) {
                                var n = {
                                    flags: 0,
                                    f: t
                                };
                                return e.log.setLevel(n, "none"),
                                    n
                            },
                                e.log.setLevel = function(t, n) {
                                    var i = !1;
                                    if (t && !(t.flags & e.log.LEVEL_LOCKED)) for (var r = 0; r < e.log.levels.length; ++r) {
                                        var a = e.log.levels[r];
                                        if (n == a) {
                                            t.level = n,
                                                i = !0;
                                            break
                                        }
                                    }
                                    return i
                                },
                                e.log.lock = function(t, n) {
                                    "undefined" == typeof n || n ? t.flags |= e.log.LEVEL_LOCKED: t.flags &= ~e.log.LEVEL_LOCKED
                                },
                                e.log.addLogger = function(e) {
                                    n.push(e)
                                },
                            "undefined" != typeof console && "log" in console) {
                            var s;
                            if (console.error && console.warn && console.info && console.debug) {
                                var c = {
                                        error: console.error,
                                        warning: console.warn,
                                        info: console.info,
                                        debug: console.debug,
                                        verbose: console.debug
                                    },
                                    l = function(t, n) {
                                        e.log.prepareStandard(n);
                                        var i = c[n.level],
                                            r = [n.standard];
                                        r = r.concat(n.arguments.slice()),
                                            i.apply(console, r)
                                    };
                                s = e.log.makeLogger(l)
                            } else {
                                var l = function(t, n) {
                                    e.log.prepareStandardFull(n),
                                        console.log(n.standardFull)
                                };
                                s = e.log.makeLogger(l)
                            }
                            e.log.setLevel(s, "debug"),
                                e.log.addLogger(s),
                                i = s
                        } else console = {
                            log: function() {}
                        };
                        if (null !== i) {
                            var d = e.util.getQueryVariables();
                            if ("console.level" in d && e.log.setLevel(i, d["console.level"].slice( - 1)[0]), "console.lock" in d) {
                                var p = d["console.lock"].slice( - 1)[0];
                                "true" == p && e.log.lock(i)
                            }
                        }
                        e.log.consoleLogger = i
                    }
                    var i = "log";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/log", ["require", "module", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(t) {
                            var n = {},
                                i = [];
                            if (!u.validate(t, f.asn1.recipientInfoValidator, n, i)) {
                                var r = new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");
                                throw r.errors = i,
                                    r
                            }
                            return {
                                version: n.version.charCodeAt(0),
                                issuer: e.pki.RDNAttributesAsArray(n.issuer),
                                serialNumber: e.util.createBuffer(n.serial).toHex(),
                                encryptedContent: {
                                    algorithm: u.derToOid(n.encAlgorithm),
                                    parameter: n.encParameter.value,
                                    content: n.encKey
                                }
                            }
                        }
                        function n(t) {
                            return u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.INTEGER, !1, u.integerToDer(t.version).getBytes()), u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [e.pki.distinguishedNameToAsn1({
                                attributes: t.issuer
                            }), u.create(u.Class.UNIVERSAL, u.Type.INTEGER, !1, e.util.hexToBytes(t.serialNumber))]), u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.OID, !1, u.oidToDer(t.encryptedContent.algorithm).getBytes()), u.create(u.Class.UNIVERSAL, u.Type.NULL, !1, "")]), u.create(u.Class.UNIVERSAL, u.Type.OCTETSTRING, !1, t.encryptedContent.content)])
                        }
                        function i(e) {
                            for (var n = [], i = 0; i < e.length; ++i) n.push(t(e[i]));
                            return n
                        }
                        function r(e) {
                            for (var t = [], i = 0; i < e.length; ++i) t.push(n(e[i]));
                            return t
                        }
                        function a(t) {
                            var n = {},
                                i = [];
                            if (!u.validate(t, f.asn1.signerInfoValidator, n, i)) {
                                var r = new Error("Cannot read PKCS#7 SignerInfo. ASN.1 object is not an PKCS#7 SignerInfo.");
                                throw r.errors = i,
                                    r
                            } {
                                var a = {
                                    version: n.version.charCodeAt(0),
                                    issuer: e.pki.RDNAttributesAsArray(n.issuer),
                                    serialNumber: e.util.createBuffer(n.serial).toHex(),
                                    digestAlgorithm: u.derToOid(n.digestAlgorithm),
                                    signatureAlgorithm: u.derToOid(n.signatureAlgorithm),
                                    signature: n.signature,
                                    authenticatedAttributes: [],
                                    unauthenticatedAttributes: []
                                };
                                n.authenticatedAttributes || [],
                                n.unauthenticatedAttributes || []
                            }
                            return a
                        }
                        function o(t) {
                            var n = u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.INTEGER, !1, u.integerToDer(t.version).getBytes()), u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [e.pki.distinguishedNameToAsn1({
                                attributes: t.issuer
                            }), u.create(u.Class.UNIVERSAL, u.Type.INTEGER, !1, e.util.hexToBytes(t.serialNumber))]), u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.OID, !1, u.oidToDer(t.digestAlgorithm).getBytes()), u.create(u.Class.UNIVERSAL, u.Type.NULL, !1, "")])]);
                            if (t.authenticatedAttributesAsn1 && n.value.push(t.authenticatedAttributesAsn1), n.value.push(u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.OID, !1, u.oidToDer(t.signatureAlgorithm).getBytes()), u.create(u.Class.UNIVERSAL, u.Type.NULL, !1, "")])), n.value.push(u.create(u.Class.UNIVERSAL, u.Type.OCTETSTRING, !1, t.signature)), t.unauthenticatedAttributes.length > 0) {
                                for (var i = u.create(u.Class.CONTEXT_SPECIFIC, 1, !0, []), r = 0; r < t.unauthenticatedAttributes.length; ++r) {
                                    var a = t.unauthenticatedAttributes[r];
                                    i.values.push(c(a))
                                }
                                n.value.push(i)
                            }
                            return n
                        }
                        function s(e) {
                            for (var t = [], n = 0; n < e.length; ++n) t.push(o(e[n]));
                            return t
                        }
                        function c(t) {
                            var n;
                            if (t.type === e.pki.oids.contentType) n = u.create(u.Class.UNIVERSAL, u.Type.OID, !1, u.oidToDer(t.value).getBytes());
                            else if (t.type === e.pki.oids.messageDigest) n = u.create(u.Class.UNIVERSAL, u.Type.OCTETSTRING, !1, t.value.bytes());
                            else if (t.type === e.pki.oids.signingTime) {
                                var i = new Date("1950-01-01T00:00:00Z"),
                                    r = new Date("2050-01-01T00:00:00Z"),
                                    a = t.value;
                                if ("string" == typeof a) {
                                    var o = Date.parse(a);
                                    a = isNaN(o) ? 13 === a.length ? u.utcTimeToDate(a) : u.generalizedTimeToDate(a) : new Date(o)
                                }
                                n = a >= i && r > a ? u.create(u.Class.UNIVERSAL, u.Type.UTCTIME, !1, u.dateToUtcTime(a)) : u.create(u.Class.UNIVERSAL, u.Type.GENERALIZEDTIME, !1, u.dateToGeneralizedTime(a))
                            }
                            return u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.OID, !1, u.oidToDer(t.type).getBytes()), u.create(u.Class.UNIVERSAL, u.Type.SET, !0, [n])])
                        }
                        function l(t) {
                            return [u.create(u.Class.UNIVERSAL, u.Type.OID, !1, u.oidToDer(e.pki.oids.data).getBytes()), u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.OID, !1, u.oidToDer(t.algorithm).getBytes()), u.create(u.Class.UNIVERSAL, u.Type.OCTETSTRING, !1, t.parameter.getBytes())]), u.create(u.Class.CONTEXT_SPECIFIC, 0, !0, [u.create(u.Class.UNIVERSAL, u.Type.OCTETSTRING, !1, t.content.getBytes())])]
                        }
                        function d(t, n, i) {
                            var r = {},
                                a = [];
                            if (!u.validate(n, i, r, a)) {
                                var o = new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");
                                throw o.errors = o,
                                    o
                            }
                            var s = u.derToOid(r.contentType);
                            if (s !== e.pki.oids.data) throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");
                            if (r.encryptedContent) {
                                var c = "";
                                if (e.util.isArray(r.encryptedContent)) for (var l = 0; l < r.encryptedContent.length; ++l) {
                                    if (r.encryptedContent[l].type !== u.Type.OCTETSTRING) throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");
                                    c += r.encryptedContent[l].value
                                } else c = r.encryptedContent;
                                t.encryptedContent = {
                                    algorithm: u.derToOid(r.encAlgorithm),
                                    parameter: e.util.createBuffer(r.encParameter.value),
                                    content: e.util.createBuffer(c)
                                }
                            }
                            if (r.content) {
                                var c = "";
                                if (e.util.isArray(r.content)) for (var l = 0; l < r.content.length; ++l) {
                                    if (r.content[l].type !== u.Type.OCTETSTRING) throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");
                                    c += r.content[l].value
                                } else c = r.content;
                                t.content = e.util.createBuffer(c)
                            }
                            return t.version = r.version.charCodeAt(0),
                                t.rawCapture = r,
                                r
                        }
                        function p(t) {
                            if (void 0 === t.encryptedContent.key) throw new Error("Symmetric key not available.");
                            if (void 0 === t.content) {
                                var n;
                                switch (t.encryptedContent.algorithm) {
                                    case e.pki.oids["aes128-CBC"]:
                                    case e.pki.oids["aes192-CBC"]:
                                    case e.pki.oids["aes256-CBC"]:
                                        n = e.aes.createDecryptionCipher(t.encryptedContent.key);
                                        break;
                                    case e.pki.oids.desCBC:
                                    case e.pki.oids["des-EDE3-CBC"]:
                                        n = e.des.createDecryptionCipher(t.encryptedContent.key);
                                        break;
                                    default:
                                        throw new Error("Unsupported symmetric cipher, OID " + t.encryptedContent.algorithm)
                                }
                                if (n.start(t.encryptedContent.parameter), n.update(t.encryptedContent.content), !n.finish()) throw new Error("Symmetric decryption failed.");
                                t.content = n.output
                            }
                        }
                        var u = e.asn1,
                            f = e.pkcs7 = e.pkcs7 || {};
                        f.messageFromPem = function(t) {
                            var n = e.pem.decode(t)[0];
                            if ("PKCS7" !== n.type) {
                                var i = new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');
                                throw i.headerType = n.type,
                                    i
                            }
                            if (n.procType && "ENCRYPTED" === n.procType.type) throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");
                            var r = u.fromDer(n.body);
                            return f.messageFromAsn1(r)
                        },
                            f.messageToPem = function(t, n) {
                                var i = {
                                    type: "PKCS7",
                                    body: u.toDer(t.toAsn1()).getBytes()
                                };
                                return e.pem.encode(i, {
                                    maxline: n
                                })
                            },
                            f.messageFromAsn1 = function(t) {
                                var n = {},
                                    i = [];
                                if (!u.validate(t, f.asn1.contentInfoValidator, n, i)) {
                                    var r = new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");
                                    throw r.errors = i,
                                        r
                                }
                                var a, o = u.derToOid(n.contentType);
                                switch (o) {
                                    case e.pki.oids.envelopedData:
                                        a = f.createEnvelopedData();
                                        break;
                                    case e.pki.oids.encryptedData:
                                        a = f.createEncryptedData();
                                        break;
                                    case e.pki.oids.signedData:
                                        a = f.createSignedData();
                                        break;
                                    default:
                                        throw new Error("Cannot read PKCS#7 message. ContentType with OID " + o + " is not (yet) supported.")
                                }
                                return a.fromAsn1(n.content.value[0]),
                                    a
                            },
                            f.createSignedData = function() {
                                function t() {
                                    for (var t = {},
                                             n = 0; n < i.signers.length; ++n) {
                                        var r = i.signers[n],
                                            a = r.digestAlgorithm;
                                        a in t || (t[a] = e.md[e.pki.oids[a]].create()),
                                            r.md = 0 === r.authenticatedAttributes.length ? t[a] : e.md[e.pki.oids[a]].create()
                                    }
                                    i.digestAlgorithmIdentifiers = [];
                                    for (var a in t) i.digestAlgorithmIdentifiers.push(u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.OID, !1, u.oidToDer(a).getBytes()), u.create(u.Class.UNIVERSAL, u.Type.NULL, !1, "")]));
                                    return t
                                }
                                function n(t) {
                                    if (i.contentInfo.value.length < 2) throw new Error("Could not sign PKCS#7 message; there is no content to sign.");
                                    var n = u.derToOid(i.contentInfo.value[0].value),
                                        r = i.contentInfo.value[1];
                                    r = r.value[0];
                                    var a = u.toDer(r);
                                    a.getByte(),
                                        u.getBerValueLength(a),
                                        a = a.getBytes();
                                    for (var o in t) t[o].start().update(a);
                                    for (var l = new Date,
                                             d = 0; d < i.signers.length; ++d) {
                                        var p = i.signers[d];
                                        if (0 === p.authenticatedAttributes.length) {
                                            if (n !== e.pki.oids.data) throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")
                                        } else {
                                            p.authenticatedAttributesAsn1 = u.create(u.Class.CONTEXT_SPECIFIC, 0, !0, []);
                                            for (var f = u.create(u.Class.UNIVERSAL, u.Type.SET, !0, []), h = 0; h < p.authenticatedAttributes.length; ++h) {
                                                var g = p.authenticatedAttributes[h];
                                                g.type === e.pki.oids.messageDigest ? g.value = t[p.digestAlgorithm].digest() : g.type === e.pki.oids.signingTime && (g.value || (g.value = l)),
                                                    f.value.push(c(g)),
                                                    p.authenticatedAttributesAsn1.value.push(c(g))
                                            }
                                            a = u.toDer(f).getBytes(),
                                                p.md.start().update(a)
                                        }
                                        p.signature = p.key.sign(p.md, "RSASSA-PKCS1-V1_5")
                                    }
                                    i.signerInfos = s(i.signers)
                                }
                                var i = null;
                                return i = {
                                    type: e.pki.oids.signedData,
                                    version: 1,
                                    certificates: [],
                                    crls: [],
                                    signers: [],
                                    digestAlgorithmIdentifiers: [],
                                    contentInfo: null,
                                    signerInfos: [],
                                    fromAsn1: function(t) {
                                        d(i, t, f.asn1.signedDataValidator),
                                            i.certificates = [],
                                            i.crls = [],
                                            i.digestAlgorithmIdentifiers = [],
                                            i.contentInfo = null,
                                            i.signerInfos = [];
                                        for (var n = i.rawCapture.certificates.value,
                                                 r = 0; r < n.length; ++r) i.certificates.push(e.pki.certificateFromAsn1(n[r]))
                                    },
                                    toAsn1: function() {
                                        i.contentInfo || i.sign();
                                        for (var t = [], n = 0; n < i.certificates.length; ++n) t.push(e.pki.certificateToAsn1(i.certificates[n]));
                                        var r = [],
                                            a = u.create(u.Class.CONTEXT_SPECIFIC, 0, !0, [u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.INTEGER, !1, u.integerToDer(i.version).getBytes()), u.create(u.Class.UNIVERSAL, u.Type.SET, !0, i.digestAlgorithmIdentifiers), i.contentInfo])]);
                                        return t.length > 0 && a.value[0].value.push(u.create(u.Class.CONTEXT_SPECIFIC, 0, !0, t)),
                                        r.length > 0 && a.value[0].value.push(u.create(u.Class.CONTEXT_SPECIFIC, 1, !0, r)),
                                            a.value[0].value.push(u.create(u.Class.UNIVERSAL, u.Type.SET, !0, i.signerInfos)),
                                            u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.OID, !1, u.oidToDer(i.type).getBytes()), a])
                                    },
                                    addSigner: function(t) {
                                        var n = t.issuer,
                                            r = t.serialNumber;
                                        if (t.certificate) {
                                            var a = t.certificate;
                                            "string" == typeof a && (a = e.pki.certificateFromPem(a)),
                                                n = a.issuer.attributes,
                                                r = a.serialNumber
                                        }
                                        var o = t.key;
                                        if (!o) throw new Error("Could not add PKCS#7 signer; no private key specified.");
                                        "string" == typeof o && (o = e.pki.privateKeyFromPem(o));
                                        var s = t.digestAlgorithm || e.pki.oids.sha1;
                                        switch (s) {
                                            case e.pki.oids.sha1:
                                            case e.pki.oids.sha256:
                                            case e.pki.oids.sha384:
                                            case e.pki.oids.sha512:
                                            case e.pki.oids.md5:
                                                break;
                                            default:
                                                throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: " + s)
                                        }
                                        var c = t.authenticatedAttributes || [];
                                        if (c.length > 0) {
                                            for (var l = !1,
                                                     d = !1,
                                                     p = 0; p < c.length; ++p) {
                                                var u = c[p];
                                                if (l || u.type !== e.pki.oids.contentType) {
                                                    if (d || u.type !== e.pki.oids.messageDigest);
                                                    else if (d = !0, l) break
                                                } else if (l = !0, d) break
                                            }
                                            if (!l || !d) throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")
                                        }
                                        i.signers.push({
                                            key: o,
                                            version: 1,
                                            issuer: n,
                                            serialNumber: r,
                                            digestAlgorithm: s,
                                            signatureAlgorithm: e.pki.oids.rsaEncryption,
                                            signature: null,
                                            authenticatedAttributes: c,
                                            unauthenticatedAttributes: []
                                        })
                                    },
                                    sign: function() {
                                        if (("object" != typeof i.content || null === i.contentInfo) && (i.contentInfo = u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.OID, !1, u.oidToDer(e.pki.oids.data).getBytes())]), "content" in i)) {
                                            var r;
                                            i.content instanceof e.util.ByteBuffer ? r = i.content.bytes() : "string" == typeof i.content && (r = e.util.encodeUtf8(i.content)),
                                                i.contentInfo.value.push(u.create(u.Class.CONTEXT_SPECIFIC, 0, !0, [u.create(u.Class.UNIVERSAL, u.Type.OCTETSTRING, !1, r)]))
                                        }
                                        if (0 !== i.signers.length) {
                                            var a = t();
                                            n(a)
                                        }
                                    },
                                    verify: function() {
                                        throw new Error("PKCS#7 signature verification not yet implemented.")
                                    },
                                    addCertificate: function(t) {
                                        "string" == typeof t && (t = e.pki.certificateFromPem(t)),
                                            i.certificates.push(t)
                                    },
                                    addCertificateRevokationList: function(e) {
                                        throw new Error("PKCS#7 CRL support not yet implemented.")
                                    }
                                }
                            },
                            f.createEncryptedData = function() {
                                var t = null;
                                return t = {
                                    type: e.pki.oids.encryptedData,
                                    version: 0,
                                    encryptedContent: {
                                        algorithm: e.pki.oids["aes256-CBC"]
                                    },
                                    fromAsn1: function(e) {
                                        d(t, e, f.asn1.encryptedDataValidator)
                                    },
                                    decrypt: function(e) {
                                        void 0 !== e && (t.encryptedContent.key = e),
                                            p(t)
                                    }
                                }
                            },
                            f.createEnvelopedData = function() {
                                var t = null;
                                return t = {
                                    type: e.pki.oids.envelopedData,
                                    version: 0,
                                    recipients: [],
                                    encryptedContent: {
                                        algorithm: e.pki.oids["aes256-CBC"]
                                    },
                                    fromAsn1: function(e) {
                                        var n = d(t, e, f.asn1.envelopedDataValidator);
                                        t.recipients = i(n.recipientInfos.value)
                                    },
                                    toAsn1: function() {
                                        return u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.OID, !1, u.oidToDer(t.type).getBytes()), u.create(u.Class.CONTEXT_SPECIFIC, 0, !0, [u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, [u.create(u.Class.UNIVERSAL, u.Type.INTEGER, !1, u.integerToDer(t.version).getBytes()), u.create(u.Class.UNIVERSAL, u.Type.SET, !0, r(t.recipients)), u.create(u.Class.UNIVERSAL, u.Type.SEQUENCE, !0, l(t.encryptedContent))])])])
                                    },
                                    findRecipient: function(e) {
                                        for (var n = e.issuer.attributes,
                                                 i = 0; i < t.recipients.length; ++i) {
                                            var r = t.recipients[i],
                                                a = r.issuer;
                                            if (r.serialNumber === e.serialNumber && a.length === n.length) {
                                                for (var o = !0,
                                                         s = 0; s < n.length; ++s) if (a[s].type !== n[s].type || a[s].value !== n[s].value) {
                                                    o = !1;
                                                    break
                                                }
                                                if (o) return r
                                            }
                                        }
                                        return null
                                    },
                                    decrypt: function(n, i) {
                                        if (void 0 === t.encryptedContent.key && void 0 !== n && void 0 !== i) switch (n.encryptedContent.algorithm) {
                                            case e.pki.oids.rsaEncryption:
                                            case e.pki.oids.desCBC:
                                                var r = i.decrypt(n.encryptedContent.content);
                                                t.encryptedContent.key = e.util.createBuffer(r);
                                                break;
                                            default:
                                                throw new Error("Unsupported asymmetric cipher, OID " + n.encryptedContent.algorithm)
                                        }
                                        p(t)
                                    },
                                    addRecipient: function(n) {
                                        t.recipients.push({
                                            version: 0,
                                            issuer: n.issuer.attributes,
                                            serialNumber: n.serialNumber,
                                            encryptedContent: {
                                                algorithm: e.pki.oids.rsaEncryption,
                                                key: n.publicKey
                                            }
                                        })
                                    },
                                    encrypt: function(n, i) {
                                        if (void 0 === t.encryptedContent.content) {
                                            i = i || t.encryptedContent.algorithm,
                                                n = n || t.encryptedContent.key;
                                            var r, a, o;
                                            switch (i) {
                                                case e.pki.oids["aes128-CBC"]:
                                                    r = 16,
                                                        a = 16,
                                                        o = e.aes.createEncryptionCipher;
                                                    break;
                                                case e.pki.oids["aes192-CBC"]:
                                                    r = 24,
                                                        a = 16,
                                                        o = e.aes.createEncryptionCipher;
                                                    break;
                                                case e.pki.oids["aes256-CBC"]:
                                                    r = 32,
                                                        a = 16,
                                                        o = e.aes.createEncryptionCipher;
                                                    break;
                                                case e.pki.oids["des-EDE3-CBC"]:
                                                    r = 24,
                                                        a = 8,
                                                        o = e.des.createEncryptionCipher;
                                                    break;
                                                default:
                                                    throw new Error("Unsupported symmetric cipher, OID " + i)
                                            }
                                            if (void 0 === n) n = e.util.createBuffer(e.random.getBytes(r));
                                            else if (n.length() != r) throw new Error("Symmetric key has wrong length; got " + n.length() + " bytes, expected " + r + ".");
                                            t.encryptedContent.algorithm = i,
                                                t.encryptedContent.key = n,
                                                t.encryptedContent.parameter = e.util.createBuffer(e.random.getBytes(a));
                                            var s = o(n);
                                            if (s.start(t.encryptedContent.parameter.copy()), s.update(t.content), !s.finish()) throw new Error("Symmetric encryption failed.");
                                            t.encryptedContent.content = s.output
                                        }
                                        for (var c = 0; c < t.recipients.length; ++c) {
                                            var l = t.recipients[c];
                                            if (void 0 === l.encryptedContent.content) switch (l.encryptedContent.algorithm) {
                                                case e.pki.oids.rsaEncryption:
                                                    l.encryptedContent.content = l.encryptedContent.key.encrypt(t.encryptedContent.key.data);
                                                    break;
                                                default:
                                                    throw new Error("Unsupported asymmetric cipher, OID " + l.encryptedContent.algorithm)
                                            }
                                        }
                                    }
                                }
                            }
                    }
                    var i = "pkcs7";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/pkcs7", ["require", "module", "./aes", "./asn1", "./des", "./oids", "./pem", "./pkcs7asn1", "./random", "./util", "./x509"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        function t(t, n) {
                            var i = n.toString(16);
                            i[0] >= "8" && (i = "00" + i);
                            var r = e.util.hexToBytes(i);
                            t.putInt32(r.length),
                                t.putBytes(r)
                        }
                        function n(e, t) {
                            e.putInt32(t.length),
                                e.putString(t)
                        }
                        function i() {
                            for (var t = e.md.sha1.create(), n = arguments.length, i = 0; n > i; ++i) t.update(arguments[i]);
                            return t.digest()
                        }
                        var r = e.ssh = e.ssh || {};
                        r.privateKeyToPutty = function(r, a, o) {
                            o = o || "",
                                a = a || "";
                            var s = "ssh-rsa",
                                c = "" === a ? "none": "aes256-cbc",
                                l = "PuTTY-User-Key-File-2: " + s + "\r\n";
                            l += "Encryption: " + c + "\r\n",
                                l += "Comment: " + o + "\r\n";
                            var d = e.util.createBuffer();
                            n(d, s),
                                t(d, r.e),
                                t(d, r.n);
                            var p = e.util.encode64(d.bytes(), 64),
                                u = Math.floor(p.length / 66) + 1;
                            l += "Public-Lines: " + u + "\r\n",
                                l += p;
                            var f = e.util.createBuffer();
                            t(f, r.d),
                                t(f, r.p),
                                t(f, r.q),
                                t(f, r.qInv);
                            var h;
                            if (a) {
                                var g = f.length() + 16 - 1;
                                g -= g % 16;
                                var m = i(f.bytes());
                                m.truncate(m.length() - g + f.length()),
                                    f.putBuffer(m);
                                var y = e.util.createBuffer();
                                y.putBuffer(i("\x00\x00\x00\x00", a)),
                                    y.putBuffer(i("\x00\x00\x00", a));
                                var v = e.aes.createEncryptionCipher(y.truncate(8), "CBC");
                                v.start(e.util.createBuffer().fillWithByte(0, 16)),
                                    v.update(f.copy()),
                                    v.finish();
                                var C = v.output;
                                C.truncate(16),
                                    h = e.util.encode64(C.bytes(), 64)
                            } else h = e.util.encode64(f.bytes(), 64);
                            u = Math.floor(h.length / 66) + 1,
                                l += "\r\nPrivate-Lines: " + u + "\r\n",
                                l += h;
                            var S = i("putty-private-key-file-mac-key", a),
                                _ = e.util.createBuffer();
                            n(_, s),
                                n(_, c),
                                n(_, o),
                                _.putInt32(d.length()),
                                _.putBuffer(d),
                                _.putInt32(f.length()),
                                _.putBuffer(f);
                            var b = e.hmac.create();
                            return b.start("sha1", S),
                                b.update(_.bytes()),
                                l += "\r\nPrivate-MAC: " + b.digest().toHex() + "\r\n"
                        },
                            r.publicKeyToOpenSSH = function(i, r) {
                                var a = "ssh-rsa";
                                r = r || "";
                                var o = e.util.createBuffer();
                                return n(o, a),
                                    t(o, i.e),
                                    t(o, i.n),
                                a + " " + e.util.encode64(o.bytes()) + " " + r
                            },
                            r.privateKeyToOpenSSH = function(t, n) {
                                return n ? e.pki.encryptRsaPrivateKey(t, n, {
                                    legacy: !0,
                                    algorithm: "aes128"
                                }) : e.pki.privateKeyToPem(t)
                            },
                            r.getPublicKeyFingerprint = function(i, r) {
                                r = r || {};
                                var a = r.md || e.md.md5.create(),
                                    o = "ssh-rsa",
                                    s = e.util.createBuffer();
                                n(s, o),
                                    t(s, i.e),
                                    t(s, i.n),
                                    a.start(),
                                    a.update(s.getBytes());
                                var c = a.digest();
                                if ("hex" === r.encoding) {
                                    var l = c.toHex();
                                    return r.delimiter ? l.match(/.{2}/g).join(r.delimiter) : l
                                }
                                if ("binary" === r.encoding) return c.getBytes();
                                if (r.encoding) throw new Error('Unknown encoding "' + r.encoding + '".');
                                return c
                            }
                    }
                    var i = "ssh";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/ssh", ["require", "module", "./aes", "./hmac", "./md5", "./sha1", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    function e(e) {
                        var t = "forge.task",
                            n = 0,
                            i = {},
                            r = 0;
                        e.debug.set(t, "tasks", i);
                        var a = {};
                        e.debug.set(t, "queues", a);
                        var o = "?",
                            s = 30,
                            c = 20,
                            l = "ready",
                            d = "running",
                            p = "blocked",
                            u = "sleeping",
                            f = "done",
                            h = "error",
                            g = "stop",
                            m = "start",
                            y = "block",
                            v = "unblock",
                            C = "sleep",
                            S = "wakeup",
                            _ = "cancel",
                            b = "fail",
                            E = {};
                        E[l] = {},
                            E[l][g] = l,
                            E[l][m] = d,
                            E[l][_] = f,
                            E[l][b] = h,
                            E[d] = {},
                            E[d][g] = l,
                            E[d][m] = d,
                            E[d][y] = p,
                            E[d][v] = d,
                            E[d][C] = u,
                            E[d][S] = d,
                            E[d][_] = f,
                            E[d][b] = h,
                            E[p] = {},
                            E[p][g] = p,
                            E[p][m] = p,
                            E[p][y] = p,
                            E[p][v] = p,
                            E[p][C] = p,
                            E[p][S] = p,
                            E[p][_] = f,
                            E[p][b] = h,
                            E[u] = {},
                            E[u][g] = u,
                            E[u][m] = u,
                            E[u][y] = u,
                            E[u][v] = u,
                            E[u][C] = u,
                            E[u][S] = u,
                            E[u][_] = f,
                            E[u][b] = h,
                            E[f] = {},
                            E[f][g] = f,
                            E[f][m] = f,
                            E[f][y] = f,
                            E[f][v] = f,
                            E[f][C] = f,
                            E[f][S] = f,
                            E[f][_] = f,
                            E[f][b] = h,
                            E[h] = {},
                            E[h][g] = h,
                            E[h][m] = h,
                            E[h][y] = h,
                            E[h][v] = h,
                            E[h][C] = h,
                            E[h][S] = h,
                            E[h][_] = h,
                            E[h][b] = h;
                        var I = function(a) {
                            this.id = -1,
                                this.name = a.name || o,
                                this.parent = a.parent || null,
                                this.run = a.run,
                                this.subtasks = [],
                                this.error = !1,
                                this.state = l,
                                this.blocks = 0,
                                this.timeoutId = null,
                                this.swapTime = null,
                                this.userData = null,
                                this.id = r++,
                                i[this.id] = this,
                            n >= 1 && e.log.verbose(t, "[%s][%s] init", this.id, this.name, this)
                        };
                        I.prototype.debug = function(n) {
                            n = n || "",
                                e.log.debug(t, n, "[%s][%s] task:", this.id, this.name, this, "subtasks:", this.subtasks.length, "queue:", a)
                        },
                            I.prototype.next = function(e, t) {
                                "function" == typeof e && (t = e, e = this.name);
                                var n = new I({
                                    run: t,
                                    name: e,
                                    parent: this
                                });
                                return n.state = d,
                                    n.type = this.type,
                                    n.successCallback = this.successCallback || null,
                                    n.failureCallback = this.failureCallback || null,
                                    this.subtasks.push(n),
                                    this
                            },
                            I.prototype.parallel = function(t, n) {
                                return e.util.isArray(t) && (n = t, t = this.name),
                                    this.next(t,
                                        function(i) {
                                            var r = i;
                                            r.block(n.length);
                                            for (var a = function(t, i) {
                                                    e.task.start({
                                                        type: t,
                                                        run: function(e) {
                                                            n[i](e)
                                                        },
                                                        success: function(e) {
                                                            r.unblock()
                                                        },
                                                        failure: function(e) {
                                                            r.unblock()
                                                        }
                                                    })
                                                },
                                                     o = 0; o < n.length; o++) {
                                                var s = t + "__parallel-" + i.id + "-" + o,
                                                    c = o;
                                                a(s, c)
                                            }
                                        })
                            },
                            I.prototype.stop = function() {
                                this.state = E[this.state][g]
                            },
                            I.prototype.start = function() {
                                this.error = !1,
                                    this.state = E[this.state][m],
                                this.state === d && (this.start = new Date, this.run(this), T(this, 0))
                            },
                            I.prototype.block = function(e) {
                                e = "undefined" == typeof e ? 1 : e,
                                    this.blocks += e,
                                this.blocks > 0 && (this.state = E[this.state][y])
                            },
                            I.prototype.unblock = function(e) {
                                return e = "undefined" == typeof e ? 1 : e,
                                    this.blocks -= e,
                                0 === this.blocks && this.state !== f && (this.state = d, T(this, 0)),
                                    this.blocks
                            },
                            I.prototype.sleep = function(e) {
                                e = "undefined" == typeof e ? 0 : e,
                                    this.state = E[this.state][C];
                                var t = this;
                                this.timeoutId = setTimeout(function() {
                                        t.timeoutId = null,
                                            t.state = d,
                                            T(t, 0)
                                    },
                                    e)
                            },
                            I.prototype.wait = function(e) {
                                e.wait(this)
                            },
                            I.prototype.wakeup = function() {
                                this.state === u && (cancelTimeout(this.timeoutId), this.timeoutId = null, this.state = d, T(this, 0))
                            },
                            I.prototype.cancel = function() {
                                this.state = E[this.state][_],
                                    this.permitsNeeded = 0,
                                null !== this.timeoutId && (cancelTimeout(this.timeoutId), this.timeoutId = null),
                                    this.subtasks = []
                            },
                            I.prototype.fail = function(e) {
                                if (this.error = !0, k(this, !0), e) e.error = this.error,
                                    e.swapTime = this.swapTime,
                                    e.userData = this.userData,
                                    T(e, 0);
                                else {
                                    if (null !== this.parent) {
                                        for (var t = this.parent; null !== t.parent;) t.error = this.error,
                                            t.swapTime = this.swapTime,
                                            t.userData = this.userData,
                                            t = t.parent;
                                        k(t, !0)
                                    }
                                    this.failureCallback && this.failureCallback(this)
                                }
                            };
                        var A = function(e) {
                                e.error = !1,
                                    e.state = E[e.state][m],
                                    setTimeout(function() {
                                            e.state === d && (e.swapTime = +new Date, e.run(e), T(e, 0))
                                        },
                                        0)
                            },
                            T = function(e, t) {
                                var n = t > s || +new Date - e.swapTime > c,
                                    i = function(t) {
                                        if (t++, e.state === d) if (n && (e.swapTime = +new Date), e.subtasks.length > 0) {
                                            var i = e.subtasks.shift();
                                            i.error = e.error,
                                                i.swapTime = e.swapTime,
                                                i.userData = e.userData,
                                                i.run(i),
                                            i.error || T(i, t)
                                        } else k(e),
                                        e.error || null !== e.parent && (e.parent.error = e.error, e.parent.swapTime = e.swapTime, e.parent.userData = e.userData, T(e.parent, t))
                                    };
                                n ? setTimeout(i, 0) : i(t)
                            },
                            k = function(r, o) {
                                r.state = f,
                                    delete i[r.id],
                                n >= 1 && e.log.verbose(t, "[%s][%s] finish", r.id, r.name, r),
                                null === r.parent && (r.type in a ? 0 === a[r.type].length ? e.log.error(t, "[%s][%s] task queue empty [%s]", r.id, r.name, r.type) : a[r.type][0] !== r ? e.log.error(t, "[%s][%s] task not first in queue [%s]", r.id, r.name, r.type) : (a[r.type].shift(), 0 === a[r.type].length ? (n >= 1 && e.log.verbose(t, "[%s][%s] delete queue [%s]", r.id, r.name, r.type), delete a[r.type]) : (n >= 1 && e.log.verbose(t, "[%s][%s] queue start next [%s] remain:%s", r.id, r.name, r.type, a[r.type].length), a[r.type][0].start())) : e.log.error(t, "[%s][%s] task queue missing [%s]", r.id, r.name, r.type), o || (r.error && r.failureCallback ? r.failureCallback(r) : !r.error && r.successCallback && r.successCallback(r)))
                            };
                        e.task = e.task || {},
                            e.task.start = function(i) {
                                var r = new I({
                                    run: i.run,
                                    name: i.name || o
                                });
                                r.type = i.type,
                                    r.successCallback = i.success || null,
                                    r.failureCallback = i.failure || null,
                                    r.type in a ? a[i.type].push(r) : (n >= 1 && e.log.verbose(t, "[%s][%s] create queue [%s]", r.id, r.name, r.type), a[r.type] = [r], A(r))
                            },
                            e.task.cancel = function(e) {
                                e in a && (a[e] = [a[e][0]])
                            },
                            e.task.createCondition = function() {
                                var e = {
                                    tasks: {}
                                };
                                return e.wait = function(t) {
                                    t.id in e.tasks || (t.block(), e.tasks[t.id] = t)
                                },
                                    e.notify = function() {
                                        var t = e.tasks;
                                        e.tasks = {};
                                        for (var n in t) t[n].unblock()
                                    },
                                    e
                            }
                    }
                    var i = "task";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return "undefined" == typeof forge && (forge = {}),
                            e(forge);
                        var r = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var a, o = function(t, n) {
                            n.exports = function(n) {
                                var r = a.map(function(e) {
                                    return t(e)
                                }).concat(e);
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[i]) return n[i];
                                n.defined[i] = !0;
                                for (var o = 0; o < r.length; ++o) r[o](n);
                                return n[i]
                            }
                        },
                        s = n; (n = function(e, t) {
                        return a = "string" == typeof e ? t.slice(2) : e.slice(2),
                            r ? (delete n, s.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = s, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/task", ["require", "module", "./debug", "./log", "./util"],
                        function() {
                            o.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                function() {
                    var e = "forge";
                    if ("function" != typeof n) {
                        if ("object" != typeof module || !module.exports) return void("undefined" == typeof forge && (forge = {
                            disableNativeCode: !1
                        }));
                        var i = !0;
                        n = function(e, n) {
                            n(t, module)
                        }
                    }
                    var r, a = function(t, n) {
                            n.exports = function(n) {
                                var i = r.map(function(e) {
                                    return t(e)
                                });
                                if (n = n || {},
                                        n.defined = n.defined || {},
                                        n.defined[e]) return n[e];
                                n.defined[e] = !0;
                                for (var a = 0; a < i.length; ++a) i[a](n);
                                return n
                            },
                                n.exports.disableNativeCode = !1,
                                n.exports(n.exports)
                        },
                        o = n; (n = function(e, t) {
                        return r = "string" == typeof e ? t.slice(2) : e.slice(2),
                            i ? (delete n, o.apply(null, Array.prototype.slice.call(arguments, 0))) : (n = o, n.apply(null, Array.prototype.slice.call(arguments, 0)))
                    })("js/forge", ["require", "module", "./aes", "./aesCipherSuites", "./asn1", "./cipher", "./cipherModes", "./debug", "./des", "./hmac", "./kem", "./log", "./md", "./mgf1", "./pbkdf2", "./pem", "./pkcs7", "./pkcs1", "./pkcs12", "./pki", "./prime", "./prng", "./pss", "./random", "./rc2", "./ssh", "./task", "./tls", "./util"],
                        function() {
                            a.apply(null, Array.prototype.slice.call(arguments, 0))
                        })
                } (),
                t("js/forge")
        }),
    function(e, t) {
        "use strict";
        var n = "0.7.12",
            i = "",
            r = "?",
            a = "function",
            o = "undefined",
            s = "object",
            c = "string",
            l = "major",
            d = "model",
            p = "name",
            u = "type",
            f = "vendor",
            h = "version",
            g = "architecture",
            m = "console",
            y = "mobile",
            v = "tablet",
            C = "smarttv",
            S = "wearable",
            _ = "embedded",
            b = {
                extend: function(e, t) {
                    var n = {};
                    for (var i in e) n[i] = t[i] && t[i].length % 2 === 0 ? t[i].concat(e[i]) : e[i];
                    return n
                },
                has: function(e, t) {
                    return "string" == typeof e ? -1 !== t.toLowerCase().indexOf(e.toLowerCase()) : !1
                },
                lowerize: function(e) {
                    return e.toLowerCase()
                },
                major: function(e) {
                    return typeof e === c ? e.replace(/[^\d\.]/g, "").split(".")[0] : t
                },
                trim: function(e) {
                    return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "")
                }
            },
            E = {
                rgx: function() {
                    var e, n, i, r, o, c, l = {},
                        d = 0,
                        p = arguments;
                    for (i = 0; i < p[1].length; i++) r = p[1][i],
                        l[typeof r === s ? r[0] : r] = t;
                    for (; d < p.length && !o;) {
                        var u = p[d],
                            f = p[d + 1];
                        for (e = n = 0; e < u.length && !o;) if (o = u[e++].exec(this.getUA())) for (i = 0; i < f.length; i++) c = o[++n],
                            r = f[i],
                            typeof r === s && r.length > 0 ? 2 == r.length ? l[r[0]] = typeof r[1] == a ? r[1].call(this, c) : r[1] : 3 == r.length ? l[r[0]] = typeof r[1] !== a || r[1].exec && r[1].test ? c ? c.replace(r[1], r[2]) : t: c ? r[1].call(this, c, r[2]) : t: 4 == r.length && (l[r[0]] = c ? r[3].call(this, c.replace(r[1], r[2])) : t) : l[r] = c ? c: t;
                        d += 2
                    }
                    return l
                },
                str: function(e, n) {
                    for (var i in n) if (typeof n[i] === s && n[i].length > 0) {
                        for (var a = 0; a < n[i].length; a++) if (b.has(n[i][a], e)) return i === r ? t: i
                    } else if (b.has(n[i], e)) return i === r ? t: i;
                    return e
                }
            },
            I = {
                browser: {
                    oldsafari: {
                        version: {
                            "1.0": "/8",
                            1.2 : "/1",
                            1.3 : "/3",
                            "2.0": "/412",
                            "2.0.2": "/416",
                            "2.0.3": "/417",
                            "2.0.4": "/419",
                            "?": "/"
                        }
                    }
                },
                device: {
                    amazon: {
                        model: {
                            "Fire Phone": ["SD", "KF"]
                        }
                    },
                    sprint: {
                        model: {
                            "Evo Shift 4G": "7373KT"
                        },
                        vendor: {
                            HTC: "APA",
                            Sprint: "Sprint"
                        }
                    }
                },
                os: {
                    windows: {
                        version: {
                            ME: "4.90",
                            "NT 3.11": "NT3.51",
                            "NT 4.0": "NT4.0",
                            2000 : "NT 5.0",
                            XP: ["NT 5.1", "NT 5.2"],
                            Vista: "NT 6.0",
                            7 : "NT 6.1",
                            8 : "NT 6.2",
                            8.1 : "NT 6.3",
                            10 : ["NT 6.4", "NT 10.0"],
                            RT: "ARM"
                        }
                    }
                }
            },
            A = {
                browser: [[/(opera\smini)\/([\w\.-]+)/i, /(opera\s[mobiletab]+).+version\/([\w\.-]+)/i, /(opera).+version\/([\w\.]+)/i, /(opera)[\/\s]+([\w\.]+)/i], [p, h], [/(opios)[\/\s]+([\w\.]+)/i], [[p, "Opera Mini"], h], [/\s(opr)\/([\w\.]+)/i], [[p, "Opera"], h], [/(kindle)\/([\w\.]+)/i, /(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i, /(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i, /(?:ms|\()(ie)\s([\w\.]+)/i, /(rekonq)\/([\w\.]+)*/i, /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i], [p, h], [/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i], [[p, "IE"], h], [/(edge)\/((\d+)?[\w\.]+)/i], [p, h], [/(yabrowser)\/([\w\.]+)/i], [[p, "Yandex"], h], [/(comodo_dragon)\/([\w\.]+)/i], [[p, /_/g, " "], h], [/(micromessenger)\/([\w\.]+)/i], [[p, "WeChat"], h], [/xiaomi\/miuibrowser\/([\w\.]+)/i], [h, [p, "MIUI Browser"]], [/\swv\).+(chrome)\/([\w\.]+)/i], [[p, /(.+)/, "$1 WebView"], h], [/android.+samsungbrowser\/([\w\.]+)/i, /android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i], [h, [p, "Android Browser"]], [/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i, /(qqbrowser)[\/\s]?([\w\.]+)/i], [p, h], [/(uc\s?browser)[\/\s]?([\w\.]+)/i, /ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i, /juc.+(ucweb)[\/\s]?([\w\.]+)/i], [[p, "UCBrowser"], h], [/(dolfin)\/([\w\.]+)/i], [[p, "Dolphin"], h], [/((?:android.+)crmo|crios)\/([\w\.]+)/i], [[p, "Chrome"], h], [/;fbav\/([\w\.]+);/i], [h, [p, "Facebook"]], [/fxios\/([\w\.-]+)/i], [h, [p, "Firefox"]], [/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i], [h, [p, "Mobile Safari"]], [/version\/([\w\.]+).+?(mobile\s?safari|safari)/i], [h, p], [/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i], [p, [h, E.str, I.browser.oldsafari.version]], [/(konqueror)\/([\w\.]+)/i, /(webkit|khtml)\/([\w\.]+)/i], [p, h], [/(navigator|netscape)\/([\w\.-]+)/i], [[p, "Netscape"], h], [/(swiftfox)/i, /(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i, /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i, /(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i, /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i, /(links)\s\(([\w\.]+)/i, /(gobrowser)\/?([\w\.]+)*/i, /(ice\s?browser)\/v?([\w\._]+)/i, /(mosaic)[\/\s]([\w\.]+)/i], [p, h]],
                cpu: [[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i], [[g, "amd64"]], [/(ia32(?=;))/i], [[g, b.lowerize]], [/((?:i[346]|x)86)[;\)]/i], [[g, "ia32"]], [/windows\s(ce|mobile);\sppc;/i], [[g, "arm"]], [/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i], [[g, /ower/, "", b.lowerize]], [/(sun4\w)[;\)]/i], [[g, "sparc"]], [/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i], [[g, b.lowerize]]],
                device: [[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i], [d, f, [u, v]], [/applecoremedia\/[\w\.]+ \((ipad)/], [d, [f, "Apple"], [u, v]], [/(apple\s{0,1}tv)/i], [[d, "Apple TV"], [f, "Apple"]], [/(archos)\s(gamepad2?)/i, /(hp).+(touchpad)/i, /(hp).+(tablet)/i, /(kindle)\/([\w\.]+)/i, /\s(nook)[\w\s]+build\/(\w+)/i, /(dell)\s(strea[kpr\s\d]*[\dko])/i], [f, d, [u, v]], [/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i], [d, [f, "Amazon"], [u, v]], [/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i], [[d, E.str, I.device.amazon.model], [f, "Amazon"], [u, y]], [/\((ip[honed|\s\w*]+);.+(apple)/i], [d, f, [u, y]], [/\((ip[honed|\s\w*]+);/i], [d, [f, "Apple"], [u, y]], [/(blackberry)[\s-]?(\w+)/i, /(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i, /(hp)\s([\w\s]+\w)/i, /(asus)-?(\w+)/i], [f, d, [u, y]], [/\(bb10;\s(\w+)/i], [d, [f, "BlackBerry"], [u, y]], [/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i], [d, [f, "Asus"], [u, v]], [/(sony)\s(tablet\s[ps])\sbuild\//i, /(sony)?(?:sgp.+)\sbuild\//i], [[f, "Sony"], [d, "Xperia Tablet"], [u, v]], [/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i], [[f, "Sony"], [d, "Xperia Phone"], [u, y]], [/\s(ouya)\s/i, /(nintendo)\s([wids3u]+)/i], [f, d, [u, m]], [/android.+;\s(shield)\sbuild/i], [d, [f, "Nvidia"], [u, m]], [/(playstation\s[34portablevi]+)/i], [d, [f, "Sony"], [u, m]], [/(sprint\s(\w+))/i], [[f, E.str, I.device.sprint.vendor], [d, E.str, I.device.sprint.model], [u, y]], [/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i], [f, d, [u, v]], [/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i, /(zte)-(\w+)*/i, /(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i], [f, [d, /_/g, " "], [u, y]], [/(nexus\s9)/i], [d, [f, "HTC"], [u, v]], [/(nexus\s6p)/i], [d, [f, "Huawei"], [u, y]], [/(microsoft);\s(lumia[\s\w]+)/i], [f, d, [u, y]], [/[\s\(;](xbox(?:\sone)?)[\s\);]/i], [d, [f, "Microsoft"], [u, m]], [/(kin\.[onetw]{3})/i], [[d, /\./g, " "], [f, "Microsoft"], [u, y]], [/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i, /mot[\s-]?(\w+)*/i, /(XT\d{3,4}) build\//i, /(nexus\s6)/i], [d, [f, "Motorola"], [u, y]], [/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i], [d, [f, "Motorola"], [u, v]], [/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i], [[f, b.trim], [d, b.trim], [u, C]], [/hbbtv.+maple;(\d+)/i], [[d, /^/, "SmartTV"], [f, "Samsung"], [u, C]], [/\(dtv[\);].+(aquos)/i], [d, [f, "Sharp"], [u, C]], [/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i, /((SM-T\w+))/i], [[f, "Samsung"], d, [u, v]], [/smart-tv.+(samsung)/i], [f, [u, C], d], [/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i, /(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i, /sec-((sgh\w+))/i], [[f, "Samsung"], d, [u, y]], [/sie-(\w+)*/i], [d, [f, "Siemens"], [u, y]], [/(maemo|nokia).*(n900|lumia\s\d+)/i, /(nokia)[\s_-]?([\w-]+)*/i], [[f, "Nokia"], d, [u, y]], [/android\s3\.[\s\w;-]{10}(a\d{3})/i], [d, [f, "Acer"], [u, v]], [/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i], [[f, "LG"], d, [u, v]], [/(lg) netcast\.tv/i], [f, d, [u, C]], [/(nexus\s[45])/i, /lg[e;\s\/-]+(\w+)*/i], [d, [f, "LG"], [u, y]], [/android.+(ideatab[a-z0-9\-\s]+)/i], [d, [f, "Lenovo"], [u, v]], [/linux;.+((jolla));/i], [f, d, [u, y]], [/((pebble))app\/[\d\.]+\s/i], [f, d, [u, S]], [/android.+;\s(glass)\s\d/i], [d, [f, "Google"], [u, S]], [/android.+;\s(pixel c)\s/i], [d, [f, "Google"], [u, v]], [/android.+;\s(pixel xl|pixel)\s/i], [d, [f, "Google"], [u, y]], [/android.+(\w+)\s+build\/hm\1/i, /android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i, /android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i], [[d, /_/g, " "], [f, "Xiaomi"], [u, y]], [/android.+a000(1)\s+build/i], [d, [f, "OnePlus"], [u, y]], [/\s(tablet)[;\/]/i, /\s(mobile)(?:[;\/]|\ssafari)/i], [[u, b.lowerize], f, d]],
                engine: [[/windows.+\sedge\/([\w\.]+)/i], [h, [p, "EdgeHTML"]], [/(presto)\/([\w\.]+)/i, /(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i, /(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i, /(icab)[\/\s]([23]\.[\d\.]+)/i], [p, h], [/rv\:([\w\.]+).*(gecko)/i], [h, p]],
                os: [[/microsoft\s(windows)\s(vista|xp)/i], [p, h], [/(windows)\snt\s6\.2;\s(arm)/i, /(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i, /(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i], [p, [h, E.str, I.os.windows.version]], [/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i], [[p, "Windows"], [h, E.str, I.os.windows.version]], [/\((bb)(10);/i], [[p, "BlackBerry"], h], [/(blackberry)\w*\/?([\w\.]+)*/i, /(tizen)[\/\s]([\w\.]+)/i, /(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i, /linux;.+(sailfish);/i], [p, h], [/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i], [[p, "Symbian"], h], [/\((series40);/i], [p], [/mozilla.+\(mobile;.+gecko.+firefox/i], [[p, "Firefox OS"], h], [/(nintendo|playstation)\s([wids34portablevu]+)/i, /(mint)[\/\s\(]?(\w+)*/i, /(mageia|vectorlinux)[;\s]/i, /(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i, /(hurd|linux)\s?([\w\.]+)*/i, /(gnu)\s?([\w\.]+)*/i], [p, h], [/(cros)\s[\w]+\s([\w\.]+\w)/i], [[p, "Chromium OS"], h], [/(sunos)\s?([\w\.]+\d)*/i], [[p, "Solaris"], h], [/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i], [p, h], [/(haiku)\s(\w+)/i], [p, h], [/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i], [[p, "iOS"], [h, /_/g, "."]], [/(mac\sos\sx)\s?([\w\s\.]+\w)*/i, /(macintosh|mac(?=_powerpc)\s)/i], [[p, "Mac OS"], [h, /_/g, "."]], [/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i, /(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i, /(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i, /(unix)\s?([\w\.]+)*/i], [p, h]]
            },
            T = function(t, n) {
                if (! (this instanceof T)) return new T(t, n).getResult();
                var r = t || (e && e.navigator && e.navigator.userAgent ? e.navigator.userAgent: i),
                    a = n ? b.extend(A, n) : A;
                return this.getBrowser = function() {
                    var e = E.rgx.apply(this, a.browser);
                    return e.major = b.major(e.version),
                        e
                },
                    this.getCPU = function() {
                        return E.rgx.apply(this, a.cpu)
                    },
                    this.getDevice = function() {
                        return E.rgx.apply(this, a.device)
                    },
                    this.getEngine = function() {
                        return E.rgx.apply(this, a.engine)
                    },
                    this.getOS = function() {
                        return E.rgx.apply(this, a.os)
                    },
                    this.getResult = function() {
                        return {
                            ua: this.getUA(),
                            browser: this.getBrowser(),
                            engine: this.getEngine(),
                            os: this.getOS(),
                            device: this.getDevice(),
                            cpu: this.getCPU()
                        }
                    },
                    this.getUA = function() {
                        return r
                    },
                    this.setUA = function(e) {
                        return r = e,
                            this
                    },
                    this
            };
        T.VERSION = n,
            T.BROWSER = {
                NAME: p,
                MAJOR: l,
                VERSION: h
            },
            T.CPU = {
                ARCHITECTURE: g
            },
            T.DEVICE = {
                MODEL: d,
                VENDOR: f,
                TYPE: u,
                CONSOLE: m,
                MOBILE: y,
                SMARTTV: C,
                TABLET: v,
                WEARABLE: S,
                EMBEDDED: _
            },
            T.ENGINE = {
                NAME: p,
                VERSION: h
            },
            T.OS = {
                NAME: p,
                VERSION: h
            },
            typeof exports !== o ? (typeof module !== o && module.exports && (exports = module.exports = T), exports.UAParser = T) : typeof define === a && define.amd ? define(function() {
                return T
            }) : e.UAParser = T;
        var k = e.jQuery || e.Zepto;
        if (typeof k !== o) {
            var w = new T;
            k.ua = w.getResult(),
                k.ua.get = function() {
                    return w.getUA()
                },
                k.ua.set = function(e) {
                    w.setUA(e);
                    var t = w.getResult();
                    for (var n in t) k.ua[n] = t[n]
                }
        }
    } ("object" == typeof window ? window: this);
var checkoutApp = angular.module("checkoutApp", ["ngRoute", "ngAnimate", "ui.bootstrap", "slickCarousel", "ngMessages", "paypal-button"]); checkoutApp.config(["$routeProvider",
    function(e) {
        var t = !0;
        t && $("#checkoutAppBody").addClass("checkout-v3"),
            e.when("/test-login/", {
                name: "testLogin",
                template: "SSO TEST LOGIN",
                controller: "TestLoginCtrl"
            }),
            e.when("/cart-info/", {
                name: "cartInfo",
                template: function() {
                    return t ? $("#cartInfoV3Template").html() : /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/i.test(navigator.userAgent) ? $("#cartInfoMobileTemplate").html() : $("#cartInfoTemplate").html()
                },
                controller: "CartInfoCtrl"
            }),
            e.when("/cart-payment/:payment_source", {
                name: "cartPayment",
                template: function() {
                    return t ? $("#cartPaymentv3Template").html() : $("#cartPaymentTemplate").html()
                },
                controller: t ? "CartPaymentCtrlv3": "CartPaymentCtrl"
            }),
            e.when("/cart-payment/", {
                name: "cartPayment",
                template: function() {
                    return t ? $("#cartPaymentv3Template").html() : $("#cartPaymentTemplate").html()
                },
                controller: t ? "CartPaymentCtrlv3": "CartPaymentCtrl"
            }),
            e.when("/cart-finance/", {
                name: "cartFinance",
                template: function() {
                    return t ? $("#cartFinanceV3Template").html() : $("#cartFinanceTemplate").html()
                },
                controller: "CartFinanceCtrl"
            }),
            e.when("/order-confirm/:orderId", {
                name: "orderConfirm",
                template: function() {
                    return $("#orderConfirmTemplate").html()
                },
                controller: "OrderConfirmCtrl"
            }).otherwise({
                redirectTo: "/cart-info/"
            })
    }]).config(["slickCarouselConfig",
    function(e) {
        e.dots = !0,
            e.autoplay = !1
    }]), checkoutApp.filter("rawHtml", ["$sce",
    function(e) {
        return function(t) {
            return e.trustAsHtml(t)
        }
    }]), checkoutApp.controller("MainAppCtrl", ["CheckoutService", "AlertsService", "TealiumService", "constants", "errors", "updateUtilities", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "GnbService", "$timeout",
    function(e, t, n, i, r, a, o, s, c, l, d, p, u, f, h) {
        "use strict";
        function g() {
            A = setInterval(m, 1e3)
        }
        function m() {
            var e = $(".os-total-fixed-at-bottom-in-mobile");
            e.length > 0 && !e.hasClass("active") && (s.totalPricePos = e.offset().top)
        }
        function y() {
            if ($(window).width() < 768 || !s.isSingleClickCheckoutOn || window.location && window.location.hash && -1 == window.location.hash.indexOf("cart-payment")) if (0 == s.cartItems || s.isEppRedirect() || !s.isSessionIdValid()) {
                var e = $(".os-total-fixed-at-bottom-in-mobile");
                e.length > 0 && e.hasClass("active") && e.removeClass("active")
            } else {
                var t = $(window).scrollTop() + $(window).height() - $(".os-total-fixed-at-bottom-in-mobile").outerHeight(),
                    n = $(".os-total-fixed-at-bottom-in-mobile").outerHeight(),
                    i = $(".checkout-shopping-cart"),
                    r = $(".checkout-payment-holder");
                $(window).width() < 768 && ($(".os-total-fixed-at-bottom-in-mobile").addClass("active"), $("body").css("padding-bottom", n + "px"), r.length && (t <= s.totalPricePos ? ($(".os-total-fixed-at-bottom-in-mobile").removeClass("active"), $("body").css("padding-bottom", "0px")) : 0 != s.cartItems && !s.isEppRedirect() && s.isSessionIdValid() && ($(".os-total-fixed-at-bottom-in-mobile").addClass("active"), $("body").css("padding-bottom", n + "px"))));
                var a;
                i.length && (a = $(".checkout-shopping-cart").offset().top),
                r.length && (a = $(".checkout-payment-holder").offset().top),
                $(window).width() >= 768 && $(".order-summary-holder").height($(".sticky-content").outerHeight()),
                $(window).width() > 767 && ($(".sticky-holder").width($(".sticky-content").outerWidth()).height($(".sticky-content").outerHeight()), $(window).scrollTop() > a ? $(".sticky-holder").addClass("sticky") : $(".sticky-holder").removeClass("sticky"), i.length && C(), r.length && S())
            }
        }
        function v(e, t, n) {
            var i;
            return function() {
                var r = this,
                    a = arguments,
                    o = function() {
                        i = null,
                        n || e.apply(r, a)
                    },
                    s = n && !i;
                clearTimeout(i),
                    i = setTimeout(o, t),
                s && e.apply(r, a)
            }
        }
        function C() {
            var e = $(window).scrollTop(),
                t = $(".checkout-shopping-cart").position().top + $(".checkout-shopping-cart").outerHeight(),
                n = $(".order-summary-holder").height(),
                i = e - t,
                r = -n;
            i - 60 >= r ? $(".sticky-holder").addClass("bottom") : $(".sticky-holder").removeClass("bottom")
        }
        function S() {
            var e = $(window).scrollTop(),
                t = $(".checkout-payment-holder").position().top + $(".checkout-payment-holder").outerHeight(),
                n = $(".order-summary-holder").height(),
                i = e - t,
                r = -n;
            i - 60 >= r ? $(".sticky-holder").addClass("bottom") : $(".sticky-holder").removeClass("bottom")
        }
        s.redirectPostLogin = null,
            s.isLoggedIn = window.isLogin(),
            s.ischeckoutv3ui = !0,
            s.userName = "undefined" != typeof window.getUserName ? window.getUserName() : "",
            s.isPaymentSourceDR = !1,
            s.billing = {},
            s.hidePaypal = !1,
            s.isSignup = !1,
            s.checkoutLoginMessage = r.Login.title,
            s.isCarrierActivationEnabled = !0,
            s.subscribeChecked = [],
            s.subscribePPChecked = [],
            s.offers = [],
            s.crossSellSkus = [],
        $.cookie("finEnabled") && (s.isFinancingOn = !0),
            s.isFinancingOn = !0,
            s.simSkus = window.Checkout.simSkus,
            s.carrierActivationSkus = window.Checkout.carrierActivationSkus,
            s.sprintSims = ["SPRT-SIM4FF", "GH59-14351A", "1109-001538"],
            s.tmoSims = ["TMO-SIM4FF", "1109-001515"],
            s.dreamSkus = ["SM-G950UZKAATT", "SM-G950UZSAATT", "SM-G950UZVAATT", "SM-G950UZKATMB", "SM-G950UZSATMB", "SM-G950UZVATMB", "SM-G950UZKASPR", "SM-G950UZSASPR", "SM-G950UZVASPR", "SM-G950UZKAVZW", "SM-G950UZSAVZW", "SM-G950UZVAVZW", "SM-G955UZKAATT", "SM-G955UZSAATT", "SM-G955UZVAATT", "SM-G955UZKATMB", "SM-G955UZSATMB", "SM-G955UZVATMB", "SM-G955UZKASPR", "SM-G955UZSASPR", "SM-G955UZVASPR", "SM-G955UZKAVZW", "SM-G955UZSAVZW", "SM-G955UZVAVZW", "SM-G950UZKAUSC", "SM-G950UZVAUSC", "SM-G950UZSAUSC", "SM-G955UZKAUSC", "SM-G955UZVAUSC", "SM-G955UZSAUSC", "SM-G950UZKAXAA", "SM-G955UZKAXAA", "SM-G955UZBAXAA", "SM-G950UZBAXAA"],
            s.greatSkus = ["SM-N950UZVATMB", "SM-N950UZKAUSC", "SM-N950UZKASPR", "SM-N950UZVAATT", "SM-N950UZVASPR", "SM-N950UZVAUSC", "SM-N950UZVAVZW", "SM-N950UZKAVZW", "SM-N950UZKAATT", "SM-N950UZVAXAA", "SM-N950UZKAXAA", "SM-N950UZKATMB"],
            s.dreamSkusUnlocked = ["SM-G950UZKAXAA", "SM-G955UZKAXAA", "SM-G955UZBAXAA", "SM-G950UZBAXAA"],
            s.dreamPPSkus = ["TA-ADH1-PB3", "HHP-ADH1-PB3-FREE"],
            s.subscriptionSkus = ["HAF-CIN/EXP-6S", "HAFCU1/XAA-6S", "HAF-QIN/EXP-6S"],
            s.subscriptionBySS = ["HHP-ADH1-PB3", "HHP-ADH1-PB3-S2-2MF", "HHP-ADH1-PB4-A"],
            s.premiumCareSubscriptionSkus = ["HHP-ADH1-PB3", "HHP-ADH1-PB4", "HHP-ADH1-PB4-A", "HHP-ADH1-PB3-S2-2MF", "HHP-ADH1-PB4-A"],
            s.isTwoMonthsFreeSku = ["HHP-ADH1-PB3-S2-2MF"],
            s.TMOSkus = ["SM-G950UZKATMB", "SM-G950UZSATMB", "SM-G950UZVATMB", "SM-G955UZKATMB", "SM-G955UZSATMB", "SM-G955UZVATMB"],
            s.waterFilterSkus = ["HAF-CIN/EXP-6S", "HAFCU1/XAA-6S", "HAF-QIN/EXP-6S"],
            s.QLEDTVSkus = ["QN55Q7CAMFXZA", "QN55Q7FAMFXZA", "QN55Q8CAMFXZA", "QN65Q7CAMFXZA", "QN65Q7FAMFXZA", "QN65Q8CAMFXZA", "QN75Q7FAMFXZA", "QN75Q8CAMFXZA", "QN65Q9FAMFXZA", "QN75Q9FAMFXZA", "VG-SGSM11S/ZA", "VG-SOCM15/ZA", "VG-STSM11B/ZA", "WMN-M11EB/ZA", "WMN-M21EB/ZA"],
            s.TVTradeInSKU = ["SM-TITVSony200-TRD", "SM-TITVLG200-TRD", "SM-TITVAny100-TRD"],
            s.tradeinBogoSkus = ["SM-TRDBOGO1-ATT-S8S8P", "SM-TRDBOGO2-USCC-S8", "SM-TRDBOGO3-VZW-S8", "SM-TRDBOGO4-UNL-S8S8P", "SM-TRDBOGO5-USCC-S8P", "SM-TRDBOGO6-VZW-S8P", "SM-TRDBOGO8-SPR-S8S8P", "SM-TRDBOGO7-TMO-S8S8P", "SM-TIBOGO-TMO-S8S8P", "SM-TIBOGO-SPR-S8S8P", "SM-TIBOGO-ATT-S8S8P", "SM-TIBOGO-USCC-S8", "SM-TIBOGO-VZW-S8", "SM-TIBOGO-UNL-S8S8P", "SM-TIBOGO-USCC-S8P", "SM-TIBOGO-VZW-S8P"],
            s.HAInstallationSkus = ["HA-INST-DRY0E", "HA-INST-DRY0G", "HA-INST-WAS00", "HA-INST-DSH00", "HA-INST-REF00", "HA-INST-MWO00", "HA-INST-RNG0E", "HA-INST-RNG0G", "HA-INST-PED00", "HA-INST-ACC00"],
            s.HAhaulAwaySkus = ["HA-HAUL-AWY"],
            s.UIStateInfo = {},
            s.tradeInAkgPromo = ["TI150S8PGalaxyUNLKD", "TI150S8PiPhoneUNLKD", "TI150S8PLGUNLKD", "TI150S8PPixelUNLKD"],
            s.UIStateInfo = {},
            s.UIStateInfo.paymentInfo = {},
            s.UIStateInfo.shippingInfo = {},
            s.UIStateInfo.shippingMethod = {},
        "true" == $.cookie("checkoutv3") && window.isMobile() && (s.isSingleClickCheckoutOn = !0),
            s.subscriptionSkus = ["HAF-CIN/EXP-6S", "HAFCU1/XAA-6S", "HHP-ADH1-PB4", "HAF-QIN/EXP-6S"],
        "Friends & Family Members" == $.cookie("tmktname") && (s.isFandfEnabled = !0),
            s.carriers = {
                ATT: "AT&T",
                TMB: "T-Mobile",
                USC: "US Cellular",
                SPR: "Sprint",
                VZW: "Verizon",
                XAA: "Unlocked"
            },
        "function" != typeof String.prototype.endsWith && (String.prototype.endsWith = function(e) {
            return - 1 !== this.indexOf(e, this.length - e.length)
        }),
            s.cartpaypal = !1,
            window.SCart.sessionIdValid = !0,
            window.paypalLoaderText = !1,
            s.isUtagRegistered = !1,
            s.relativeImagePath = i.IMAGE_PATH,
            s.isPaymentOptionFinance = !1,
        $.cookie("drcc") && (s.isPaymentSourceDR = !0),
        $.cookie("cartpaypalv2") && "true" == $.cookie("cartpaypalv2") && (s.cartpaypal = !0),
        $.cookie("cact") && (s.isCarrierActivationEnabled = !0),
            s.isSessionIdValid = function() {
                return window.SCart.sessionIdValid
            },
            s.isEmptyCartItem = function(e) {
                return ! (e && e.line_items && e.line_items.length > 0)
            },
            s.disableOrderSummary = function(e) { (s.isEppRedirect() || !s.isSessionIdValid() || s.isEmptyCartItem(e)) && $(".order-summary-holder, .icon-plus, .btn-promo-accordion").addClass("disabled disabled-cursor")
            },
            s.promptReLogin = function(e) {
                return e && 401 == e.status && !s.isLoggedIn ? void(s.isSingleClickCheckoutOn && s.$broadcast("paymentStepError", r.defaultError.title, r.defaultError.description)) : (s.checkoutLoginMessage = r.ReLogin.title, s.redirectPostLogin != i.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER && (s.redirectPostLogin = "/cart-payment/" == u.path() ? i.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT: null), window.SCart.sessionIdValid = !1, document.location.href = window.SCart.URL.CHECKOUT_URL(), s.disableOrderSummary(s.shoppingCart), void s.$digest())
            },
        "/cart-payment/paypal" == u.$$path && (window.paypalLoaderText = !0),
            s.isSubscriptionBySS = function(e) {
                return _.contains(s.subscriptionBySS, e)
            },
            s.isPremiumCareSubscriptionSku = function(e) {
                return _.contains(s.premiumCareSubscriptionSkus, e)
            },
            s.isSubscriptionWith2MF = function(e, t) {
                return t = t || e[0].sku,
                    _.contains(s.isTwoMonthsFreeSku, t)
            },
            s.premiumCareSubscriptionOffer = function(e, t) {
                return t = t || e[0].sku,
                    _.contains(s.premiumCareSubscriptionSkus, t)
            },
            s.premiumCareSubscriptionCart = function() {
                var e = _.pluck(s.cartItems, "sku_id"),
                    t = _.intersection(e, s.subscriptionBySS);
                return t && t.length > 0 ? !0 : !1
            },
            s.isQLEDTVinCart = function() {
                var e = _.pluck(s.cartItems, "sku_id"),
                    t = _.intersection(e, s.QLEDTVSkus);
                return t && t.length > 0 ? !0 : !1
            },
            s.isQLEDSku = function(e) {
                return _.contains(s.QLEDTVSkus, e)
            },
            s.anyPremiumCareSubscriptionCart = function() {
                var e = _.pluck(s.cartItems, "sku_id"),
                    t = _.intersection(e, s.premiumCareSubscriptionSkus);
                return t && t.length > 0 ? !0 : !1
            },
            s.isTvTradeInSku = function(e) {
                return s.isTradeInSku(e) ? _.contains(s.TVTradeInSKU, e.sku_id) : void 0
            },
            s.isTradeInSku = function(e) {
                return e.attributes.product_type_custom && _.contains(i.TRADE_IN, e.attributes.product_type_custom.toUpperCase()) || e.attributes.product_type && _.contains(i.TRADE_IN, e.attributes.product_type.toUpperCase())
            },
            s.isHASku = function(e) {
                return e.attributes.is_ha_delivery
            },
            s.isInstallationSku = function(e) {
                if (e) {
                    var t = e.sku_id || e.sku;
                    return _.contains(s.HAInstallationSkus, t)
                }
                return ! 1
            },
            s.isHaulAwaySku = function(e) {
                if (e) {
                    var t = e.sku_id || e.sku;
                    return _.contains(s.HAhaulAwaySkus, t)
                }
                return ! 1
            },
            s.isAkgPromoSku = function(e) {
                return s.tradeInAkgPromo.indexOf(e) > -1
            },
            s.isTradeinBogoInCart = function() {
                var e = _.pluck(s.cartItems, "sku_id"),
                    t = _.intersection(e, s.tradeinBogoSkus);
                return t && t.length > 0 ? !0 : !1
            },
            s.isTradeinBogoSku = function(e) {
                return _.contains(s.tradeinBogoSkus, e)
            },
            s.findIfMixedCartForUpgrade = function(e) {
                return ! e.attributes || e.attributes.is_upgrade_eligible || e.attributes.product_type && "UPGRADE" == e.attributes.product_type.toUpperCase() ? void 0 : (s.isMixedCartForUpgrade = !0, !0)
            },
            s.findIfUpgradeSkuIsInCart = function(e) {
                return e.attributes && e.attributes.product_type && "UPGRADE" == e.attributes.product_type.toUpperCase() ? ("UPGRADE-01" == e.sku_id ? (e.phoneUpgade = !0, s.phoneUpgradeInCart = !0, s.TVUpgradeInCart = !1) : "UPGRADE-02" == e.sku_id && (e.TVUpgrade = !0, s.TVUpgradeInCart = !0, s.phoneUpgradeInCart = !1), s.isUpgradeSkuInCart = !0, !0) : void 0
            },
            s.$on("$routeChangeStart",
                function() {
                    $(".spinner_container").show(),
                        s.isLoggedIn = window.isLogin(),
                        s.userName = window.getUserName()
                }),
            s.$on("$routeChangeSuccess",
                function() {
                    $(".spinner_container").hide()
                }),
            s.$on("$routeChangeError",
                function() {
                    $(".spinner_container").hide()
                }),
            s.$on("saveImpression",
                function(e, t, n) {
                    if (t) {
                        var i = [],
                            r = [],
                            a = [],
                            o = [],
                            c = [],
                            l = [];
                        _.each(t.line_items,
                            function(e) {
                                i.push(e.sku_id),
                                    a.push(e.attributes.display_name),
                                    o.push(e.attributes.product_type),
                                    r.push(e.line_item_cost.price.amount),
                                    c.push(e.attributes.product_family),
                                    l.push(e.attributes.product_division)
                            });
                        var d = _.pluck(t.line_items, "sku_id"),
                            p = _.pluck(t.line_items, "quantity"),
                            u = _.find(t.line_items,
                                function(e) {
                                    return 1 == e.financing
                                }),
                            f = _.find(t.line_items,
                                function(e) {
                                    return 0 == e.financing
                                }),
                            h = _.filter(t.line_items_ex,
                                function(e) {
                                    return 1 == e.is_trade_in_eligible
                                }),
                            g = {
                                page_type: "shopping cart",
                                dr_page_name: n,
                                site_language: "en",
                                loggedin_status: s.isLoggedIn,
                                page_breadcrumb: null,
                                page_channel: "ecommerce",
                                stock_list: "in stock",
                                ecom_flag: "Yes",
                                billing_li_state: "billing: " + s.isLoggedIn,
                                cart_theme: "29552800",
                                cart_id: t.cart_id,
                                product_sku: d,
                                product_quantity: p,
                                product_id: i,
                                product_name: a,
                                product_type: o,
                                product_price: r,
                                product_family: c,
                                product_division: l,
                                financing_available: s.isCartFinancible ? "y": "n",
                                activation_available: s.fireUtagActivationEligible() ? "y": "n",
                                order_discount: s.savings ? s.savings.amount: "",
                                trade_in_eligible: h.length > 0 ? "y": "n",
                                trade_in_selected: s.isTradeinCart ? "y": "n",
                                carrier_name: s.carriersInCart()
                            };
                        if ( - 1 != n.search("step3") && (g.page_category = "thankyou", g.order_ID = s.orderId, g.order_total = t.cost.total.amount, g.order_subtotal = t.cost.subtotal.amount, g.order_currency = "USD"), s.anyItemInCartFinancible && s.isCartFinancibleAndMinimumNotMet && (g.page_state = "state1.4|Cart - Minimum Not Met"), ( - 1 != n.search("step2") || -1 != n.search("step3")) && s.isFinancingOn && s.isLoggedIn) {
                            var m = "ReturningUser";
                            s.newFinancingUser && (m = "NewUser"),
                                "A" != s.financingStatus || s.isSufficientCredit ? "A" == s.financingStatus ? g.page_state = "state4.1|Checkout - Payment Information - New Finance Approved > " + m: "P" == s.financingStatus ? g.page_state = "state4.1|Checkout - Payment Information - New Finance Referred > " + m: "D" == s.financingStatus && (g.page_state = "state4.1|Checkout - Payment Information - New Finance Rejected > " + m) : g.page_state = "state4.4|Checkout - Payment Information - Not Enough Credit - New User > " + m
                        } - 1 != n.search("step1") && s.isLoggedIn && _.find(s.cartItems,
                            function(e) {
                                return 1 == e.isActivationEnabledLockedSku
                            }) && s.fireUtagActivationConsent(),
                        u && f && (g.page_state = (g.page_state ? g.page_state: "") + " Cart - Mixed Product");
                        var y = s.cartFinancePlanType ? s.cartFinancePlanType: "NoFinance"; - 1 !== y.indexOf("Deferred") && (y = y + "_" + s.cartFinancingDetails.deferred_finance_plan.deferred_period_duration_in_months),
                            g.page_state = (g.page_state ? g.page_state + " - ": "") + y,
                        s.abandonedCartID && (g.page_state = g.page_state + " - ABANDON_CART_EMAIL_" + s.abandonedCartID),
                        s.isHAinCart && (g.page_state = s.haCountinCart == s.totalLineItems ? g.page_state + " - HA_Only": g.page_state + " - HA_Mixed", s.isInstallationSelected && (g.page_state = g.page_state + " - HA_INST"), s.isHaulAwaySelected && (g.page_state = g.page_state + " - HA_HAUL_AWY")),
                        window.utag && "undefined" != typeof window.utag.view && window.utag.view(g)
                    }
                }),
            s.haUtagLinkFire = function(e) {
                window.utag && utag.link(e)
            },
            $(document).on("minicart:update",
                function(e, t) {
                    s.$broadcast("refreshCart", t, !0)
                }),
            s.onErrorClose = function() {
                s.haDeliveryErrorMessage = !1,
                    $(".generic-error").hide(),
                $(".generic-error").find(".btn-remove").hasClass("ha-flag") && (s.haDeliveryErrorMessage = !0, $(".generic-error").find(".btn-remove").removeClass("ha-flag"))
            },
            o.onAlertClose = function(e) {
                $("#alert-" + e).hide()
            },
            s.showErrorMessage = function(e, t, n) {
                s.error = {},
                    s.error.title = t,
                    s.error.desc = n,
                    s.globalerrorExists = !0;
                var i = $(".generic-error");
                i.length && ($(i).find(".checkout-error-msg-title").text(t), $(i).find(".checkout-error-msg-desc").text(n), $(i).find(".btn-remove").addClass("ha-flag"), $(i).show(), $("html, body").animate({
                        scrollTop: $(i).offset().top
                    },
                    1e3))
            },
            s.$on("cartStepError",
                function(e, t, n) {
                    s.showErrorMessage(!0, t, n)
                }),
            s.$on("paymentStepError",
                function(e, t, n) {
                    s.showErrorMessage(!1, t, n)
                }),
            s.$on("thankYouPageError",
                function(e, t, n) {
                    s.showErrorMessage(!1, t, n)
                }),
            s.getcard = function(e) {
                return angular.isDefined(e) && (e = e.toLowerCase()),
                    "visa" == e ? "visa": "americanexpress" == e ? "amex": "discover" == e ? "discover": "mastercard" == e ? "master": "jcb" == e ? "jcb": "dinersclub" == e ? "dc": void 0
            },
            s.decorateSublineItems = function(e, t, n) {
                var i = [];
                return _.each(e,
                    function(e) {
                        var r = _.find(n,
                            function(t) {
                                return e.parentItem ? t.sku_id == e.parentItem.sku_id: !1
                            });
                        r || (e.discount = b(e), s.setSubscriptionTC(e), e.attributes.parent_display_name = t.attributes.display_name, e.parentItem = t, t.financing && 0 == e.line_item_cost.price.amount && (e.isFreeItem = !0), s.isTradeInSku(e) && (e.line_item_cost.price.amount = Math.abs(e.line_item_cost.price.amount), e.line_item_cost.regular_price.amount = Math.abs(e.line_item_cost.regular_price.amount)), i.push(e)),
                        s.isTradeInSku(e) && (s.isTradeinCart = !0, s.TvTradeIn = _.contains(s.TVTradeInSKU, e.sku_id)),
                            s.isInstallationSelected = s.isInstallationSelected || _.contains(s.HAInstallationSkus, e.sku_id),
                            s.isHaulAwaySelected = s.isHaulAwaySelected || _.contains(s.HAhaulAwaySkus, e.sku_id),
                            s.findIfMixedCartForUpgrade(e),
                            s.findIfUpgradeSkuIsInCart(e)
                    }),
                    i
            },
            s.setSubscriptionTC = function(e) { (s.isSubscriptionEnabled(e.sku_id) || s.premiumCareSubscriptionOffer([], e.sku_id)) && (e.subscribe = _.contains(s.subscribeChecked, e.sku_id)),
            s.premiumCareSubscriptionOffer([], e.sku_id) && (e.subscribePP = _.contains(s.subscribePPChecked, e.sku_id))
            },
            s.isTMOBogoOffer = function(e) {
                var t = 0;
                return _.forEach(e,
                    function(e) { - 1 != s.TMOSkus.indexOf(e.sku_id) && (t += e.quantity)
                    }),
                t > 1
            },
            s.changeDisplayOrder = function(e) {
                if (e && e.sublineItems && e.sublineItems.length > 0) {
                    var t = [],
                        n = [];
                    _.forEach(e.sublineItems,
                        function(e) {
                            e && e.attributes && e.attributes.product_type && "UPGRADE" == e.attributes.product_type.toUpperCase() ? n.push(e) : t.push(e)
                        }),
                    n && n.length > 0 && (t.push(n[0]), n.pop()),
                        e.sublineItems = t
                }
            },
            s.computeUpgradeCost = function(e) {
                if (s.is_sup_cart) return e && e.cost && e.cost.total && (s.upgradeCost = e.cost.total.amount),
                    void(e && e.applicable_finance_plans && e.applicable_finance_plans.length > 0 && e.applicable_finance_plans[0].eip_finance_plan && (s.upgradeMonthlyCost = e.applicable_finance_plans[0].eip_finance_plan.monthly_payment));
                if (e && e.line_items && e.line_items.length > 0) {
                    var t;
                    s.upgradeCost = 0,
                        s.upgradeMonthlyCost = 0,
                        _.forEach(e.line_items,
                            function(e) {
                                e && e.attributes && e.attributes.product_type && "UPGRADE" == e.attributes.product_type.toUpperCase() && (t = e.parentItem.line_item_id)
                            }),
                        _.forEach(e.line_items,
                            function(n) {
                                n && (n.line_item_id == t || n.parentItem && n.parentItem.line_item_id == t || s.phoneUpgradeInCart && n.attributes.product_family && "MOBILE-ACCESSORIES" == n.attributes.product_family.toUpperCase() && n.attributes.is_upgrade_eligible && !n.parentItem || s.TVUpgradeInCart && n.attributes.product_family && ("TELEVISION-HOME-THEATER-ACCESSORIES" == n.attributes.product_family.toUpperCase() || "HOME-THEATER" == n.attributes.product_family.toUpperCase()) && n.attributes.is_upgrade_eligible && !n.parentItem) && (n.line_item_cost && n.line_item_cost.price && n.line_item_cost.price.amount && n.attributes.is_upgrade_eligible && (s.isTradeInSku(n) ? s.upgradeCost -= n.line_item_cost.price.amount: s.upgradeCost += n.line_item_cost.price.amount), _.forEach(e.line_item_finance_plans,
                                    function(e) {
                                        n.attributes.is_upgrade_eligible && e.line_item_id == n.line_item_id && e.finance_info && e.finance_info.financePlans && e.finance_info.financePlans.length > 0 && e.finance_info.financePlans[0] && e.finance_info.financePlans[0].eip_finance_plan && (s.upgradeMonthlyCost += e.finance_info.financePlans[0].eip_finance_plan.monthly_payment)
                                    }))
                            })
                }
            },
            s.setUpgradeFlag = function(e) {
                var t;
                e && e.line_items && e.line_items.length > 0 && (_.forEach(e.line_items,
                    function(e) {
                        e && e.attributes && e.attributes.product_type && "UPGRADE" == e.attributes.product_type.toUpperCase() && (t = e.parentItem.line_item_id)
                    }), _.forEach(e.line_items,
                    function(e) {
                        s.phoneUpgradeInCart && e && !e.parentItem && e.line_item_id != t && (e.attributes.product_family && "MOBILE-ACCESSORIES" == e.attributes.product_family.toUpperCase() && !e.attributes.is_upgrade_eligible || e.attributes.product_family && "MOBILE-ACCESSORIES" != e.attributes.product_family.toUpperCase()) && (e.sUPIneligible = !0),
                        s.TVUpgradeInCart && e && !e.parentItem && e.line_item_id != t && (e.attributes.product_family && ("HOME-THEATER" == e.attributes.product_family.toUpperCase() || "TELEVISION-HOME-THEATER-ACCESSORIES" == e.attributes.product_family.toUpperCase()) && !e.attributes.is_upgrade_eligible || "HOME-THEATER" != e.attributes.product_family.toUpperCase() && "TELEVISION-HOME-THEATER-ACCESSORIES" != e.attributes.product_family.toUpperCase()) && (e.sUPIneligible = !0),
                        e && e.parentItem && e.parentItem.line_item_id == t && !e.attributes.is_upgrade_eligible && (e.sUPIneligible = !0)
                    }))
            },
            s.deleteNonUpgradeItemsFromCart = function() {
                var t, n = [],
                    i = s.shoppingCart;
                if (i && i.line_items && i.line_items.length > 0 && (_.forEach(i.line_items,
                        function(e) {
                            e && e.attributes && e.attributes.product_type && "UPGRADE" == e.attributes.product_type.toUpperCase() && (t = e.parentItem.line_item_id)
                        }), _.forEach(i.line_items,
                        function(e) {
                            e && !e.parentItem && e.line_item_id != t && e.sUPIneligible && n.push(e),
                            e && e.parentItem && e.parentItem.line_item_id == t && !e.attributes.is_upgrade_eligible && n.push(e)
                        }), n && n.length > 0)) {
                    var a = [];
                    _.forEach(n,
                        function(e) {
                            var t = {};
                            t.method = "DELETE",
                                t.url = e.parentItem ? SCart.URL.CART_SUB_LINE_ITEM_V3_URL(SCart.shoppingCartTransformService.shoppingCartId, e.line_item_id, e.parentItem.line_item_id, !0) : SCart.URL.CART_ITEM_V3_URL(SCart.shoppingCartTransformService.shoppingCartId, e.line_item_id, !0),
                                t.handler = "removeItemHandler",
                                a.push(t)
                        }),
                        a && a.length > 0 ? e.shoppingCartCTA(a).then(function(e) {
                            e && e.length > 0 && (s.$broadcast("refreshCart", e[e.length - 1], !0), s.$broadcast("payOverTimeExtd"))
                        }).fail(function() {
                            s.$broadcast("cartStepError", r.RemoveItemError.title, r.RemoveItemError.description),
                                s.$broadcast("payOverTimeExtd")
                        }) : s.$broadcast("payOverTimeExtd")
                }
            },
            s.viewDiscountDetail = !0,
            s.enableDiscountDetail = function() {
                if (s.viewDiscountDetail = !s.viewDiscountDetail, $(window).width() < 768) {
                    var e = $(".discounts-holder").offset().top - 100;
                    $("html, body").animate({
                            scrollTop: e + "px"
                        },
                        500)
                }
            },
            s.cartHasShippingDiscount = function(e) {
                return e && e.cost && e.cost.discount && e.cost.discount.details && e.cost.discount.details.shipping && e.cost.discount.details.shipping.amount && e.cost.discount.details.shipping.amount > 0
            },
        s.flattenLineItems = function(e) {
            if (s.isTradeinCart = !1, s.isHAinCart = !1, s.totalLineItems = e.line_items.length, s.haCountinCart = 0, s.isInstallationSelected = !1, s.isHaulAwaySelected = !1, s.displayCartItems = [], s.isMixedCartForUpgrade = !1, s.isUpgradeSkuInCart = !1, s.payNowSelected = !1, s.is_sup_cart = e.is_sup_cart, s.tvOrMobileItemInCart = !1, s.TvTradeIn = !1, s.parentItemCountInCart = 0, s.cartDiscount = {},
                    s.cartDiscount.promotional = 0, s.cartDiscount.bundle = 0, s.cartDiscount.tradeIn = 0, s.cartDiscount.coupon = [], s.cartDiscount.epp = 0, s.cartDiscount.promoCode = 0, s.cartDiscount.shipping = 0, s.cartDiscount.total = 0, s.cartHasShippingDiscount(e) && (s.cartDiscount.shipping += e.cost.discount.details.shipping.amount, s.cartDiscount.total += e.cost.discount.details.shipping.amount), e && e.line_items && e.line_items.length > 0) {
                var t = [];
                _.forEach(e.line_items,
                    function(n) {
                        if (n.attributes && n.attributes.image_url && (n.attributes.image_url = n.attributes.image_url.replace("http://", "//").replace("https://", "//")), n.isActivationEnabledLockedSku = ( - 1 == s.TMOSkus.indexOf(n.sku_id) && 1 == n.quantity || s.TMOSkus.indexOf(n.sku_id) > -1 && !s.isTMOBogoOffer(e.line_items)) && s.isCarrierActivationEnabled && s.isActivationEnabledLockedSku(n.sku_id), n.activateSim = (1 == n.quantity || s.TMOSkus.indexOf(n.sku_id) > -1 && s.isTMOBogoOffer(e.line_items)) && n.isActivationEnabledLockedSku ? s.activateSimConsent: !1, s.setSubscriptionTC(n), s.isHASku(n) && (s.haCountinCart++, s.isHAinCart = !0), s.isHaulAwaySku(n) && (n.isHaSubLineItem = !0), s.isInstallationSku(n) && (n.isHaSubLineItem = !0), s.findIfMixedCartForUpgrade(n), s.findIfUpgradeSkuIsInCart(n), n && n.attributes && n.attributes.product_family && ("PHONES" == n.attributes.product_family.toUpperCase() || "TVS" == n.attributes.product_family.toUpperCase()) && (s.tvOrMobileItemInCart = !0), n.discount = b(n), s.ischeckoutv3ui) {
                            var i = n;
                            if (t.push(n), n.line_items && n.line_items.length > 0) {
                                var r = s.decorateSublineItems(n.line_items, n, e.line_items);
                                i.sublineItems = r,
                                    t = t.concat(r)
                            }
                            s.changeDisplayOrder(i),
                                s.displayCartItems.push(i)
                        }
                        n && !n.parentItem && s.parentItemCountInCart++
                    }),
                    e.line_items = t,
                s.isUpgradeSkuInCart && (s.setUpgradeFlag(e), s.computeUpgradeCost(e))
            }
        };
        var b = function(e) {
            e.totalPromoDiscount = 0,
                e.totalTradeInDiscount = 0,
                e.totalNonTradeInOfferDiscount = 0,
            s.isTradeInSku(e) || (e.totalPromoDiscount += e.line_item_cost.regular_price.amount - e.line_item_cost.price.amount),
            e.line_items && e.line_items.length > 0 && _.forEach(e.line_items,
                function(t) {
                    s.isTradeInSku(t) && t.line_item_cost && t.line_item_cost.price && (e.totalPromoDiscount += t.line_item_cost.price.amount < 0 ? 0 - t.line_item_cost.price.amount: t.line_item_cost.price.amount)
                }),
            e.discount && e.discount.amount > 0 && (e.totalPromoDiscount -= e.discount.amount),
                e.totalPromoDiscount = parseFloat(e.totalPromoDiscount.toFixed(2));
            var t = e.discount;
            return t && t.amount || (t = {
                amount: 0
            }),
            t.details || (t.details = {}),
            t.details.epp && t.details.epp.amount || (t.details.epp = {
                amount: 0
            }),
            t.details.order_level && t.details.order_level.amount || (t.details.order_level = {
                amount: 0
            }),
            t.details.coupon && 0 != t.details.coupon.length || (t.details.coupon = []),
            t.details.shipping && t.details.shipping.amount || (t.details.shipping = {
                amount: 0
            }),
                t.details.skuOfferCount = 0,
                t.details.sku_offer ? _.each(t.details.sku_offer,
                    function(n) {
                        n.amount > 0 && (t.details.skuOfferCount = t.details.skuOfferCount + 1, n.offer_type && "TRADEIN" == n.offer_type.toUpperCase() ? e.totalTradeInDiscount += n.amount: e.totalNonTradeInOfferDiscount += n.amount)
                    }) : t.details.sku_offer = [],
            t.details && t.details.epp && t.details.epp.amount && (s.cartDiscount.epp += t.details.epp.amount, s.cartDiscount.total += t.details.epp.amount),
            t.details && t.details.order_level && t.details.order_level.amount && (s.cartDiscount.promoCode += t.details.order_level.amount, s.cartDiscount.total += t.details.order_level.amount),
            t.details && t.details.shipping && t.details.shipping.amount && (s.cartDiscount.shipping += t.details.shipping.amount, s.cartDiscount.total += t.details.shipping.amount),
            t.details && t.details.coupon && t.details.coupon.length > 0 && _.each(t.details.coupon,
                function(e) {
                    s.cartDiscount.coupon.push(e),
                    e.discount && e.discount.amount && (s.cartDiscount.total += e.discount.amount)
                }),
            e.totalPromoDiscount && (s.cartDiscount.promotional += e.totalPromoDiscount, s.cartDiscount.total += e.totalPromoDiscount),
            e.totalNonTradeInOfferDiscount && (s.cartDiscount.bundle += e.totalNonTradeInOfferDiscount, s.cartDiscount.total += e.totalNonTradeInOfferDiscount),
            e.totalTradeInDiscount && (s.cartDiscount.tradeIn += e.totalTradeInDiscount, s.cartDiscount.total += e.totalTradeInDiscount),
                t
        };
        s.formatTotalItemsInCart = function(e) {
            var t = 0;
            return _.each(e,
                function(e) {
                    t += e.quantity
                }),
                t
        },
            s.calculateSavings = function(e) {
                var t = 0,
                    n = 0,
                    i = 0,
                    r = 0,
                    a = 0,
                    o = 0;
                _.forEach(e.line_items,
                    function(e) {
                        e.line_item_cost.savings = {},
                            e.line_item_cost.savings.amount = e.line_item_cost.regular_price.amount - e.line_item_cost.price.amount,
                            t += e.line_item_cost.savings.amount,
                        s.isTradeInSku(e) && (t += Math.abs(e.line_item_cost.price.amount), n += Math.abs(e.line_item_cost.price.amount)),
                        s.isInstallationSku(e) && (i += Math.abs(e.line_item_cost.price.amount), r += Math.abs(e.line_item_cost.regular_price.amount)),
                        s.isHaulAwaySku(e) && (a += Math.abs(e.line_item_cost.price.amount), o += Math.abs(e.line_item_cost.regular_price.amount))
                    });
                var c = e.cost,
                    l = {};
                EcomApi.isTransformRequired ? (l.promo = c.subtotal.amount + c.shipping.amount + c.tax.amount - c.total.amount, l.discounts = t) : (l.promo = c.subtotal.amount + c.shipping.amount + c.tax.amount - c.total.amount - n, l.discounts = t - n),
                l.promo < 0 && (l.promo = 0),
                e.cost && e.cost.subtotal && (e.cost.subtotal.amount += n),
                    l.promo = +l.promo.toFixed(2),
                    l.tradein = Math.abs(n),
                    l.amount = l.promo + l.discounts + l.tradein,
                s.cartHasShippingDiscount(e) && (l.amount += c.discount.details.shipping.amount, l.discounts += c.discount.details.shipping.amount),
                    l.amount = +l.amount.toFixed(2),
                    e.cost.subtotal.amount = c.subtotal.amount,
                    s.savings = l,
                    s.installationFee = i,
                    s.originalInstallationFee = r,
                    s.haulAwayFee = a,
                    s.originalHaulAwayFee = o,
                    s.installationServiceFee = s.haulAwayFee + s.installationFee,
                    s.cartSubTotal = c.subtotal.amount,
                s.installationServiceFee && s.isHAinCart && (s.cartSubTotal = c.subtotal.amount - s.installationServiceFee)
            };
        var E = function() {
                u.path().indexOf("/cart-info/") < 0 && u.path("/cart-info/")
            },
            I = function(e) {
                return e && 0 == e.line_items
            };
        s.refreshCartHelper = function(e) {
            if (s.setFinancingDetails(e), s.flattenLineItems(e), s.shoppingCart = e, s.cartItems = e.line_items, s.cost = e.cost, s.standardShippingMethodDetails = e.shipping_method, s.calculateSavings(e), s.fetchCartRecommendations = ("true" == $.cookie("useCartRecommendation") ? !0 : !1) && s.tvOrMobileItemInCart, s.isUpgradeSkuInCart && !s.is_sup_cart && !s.isMixedCartForUpgrade && 1 == s.parentItemCountInCart) {
                var t = !1,
                    n = !0;
                s.deleteUpgradeItemsFromCart(t, n)
            }
        },
            s.refreshCart = function(e, t, i) {
                var r = $.extend({},
                    e);
                if (s.refreshCartHelper(r), s.setUserAlerts(e.user_alerts), s.totalItemsInCart = s.formatTotalItemsInCart(r.line_items), h(function() {
                        $("select").selectric(),
                            $(".checkout-price-update-message").show(),
                            s.$digest(),
                            s.scrollAlert(),
                            n.trackInputTags()
                    }), g(), I(s.shoppingCart) && E(), ("addItems" == i || "getCart" == i) && ($(document).trigger("cartPageLoadEvent"), !s.isTagFired)) {
                    var a = new Date,
                        o = a.getTime(),
                        c = "addItems" == i ? "viewcart-load-done-addItems": "viewcart-load-done-getCart";
                    h(function() {
                        "undefined" != typeof newrelic.fireCustomPageAction && newrelic.fireCustomPageAction(c, o, s.shoppingCart)
                    }),
                        s.isTagFired = !0
                }
                y()
            },
            s.setUserAlerts = function(e) {
                s.isTradeinCart || (s.alerts = t.getData(e))
            },
            s.scrollAlert = function() {
                s.alerts && s.alerts.length > 0 && $("html, body").animate({
                        scrollTop: $(".checkout-price-update-message").offset().top
                    },
                    1e3)
            },
            s.restrictPromoCode = function() {
                var e = EcomApi.isTransformRequired ? !0 : !1;
                return s.isTradeinCart && !e
            },
            s.showPromo = function() {
                return s.restrictPromoCode() || !(s.cartItems && s.cartItems.length > 0) || s.isEppRedirect() || !s.isSessionIdValid() ? !1 : (s.promoMsg = "", s.promoClass = "", $(".promo-inputs").find(".promo-code-text").attr("disabled", !1), $(".btn-promo-accordion").next().slideToggle(250), $(".btn-promo-accordion").toggleClass("active"), $(".promo-inputs").find(".promo-code-text").focus(), $(window).width() > 767 && setTimeout(function() {
                        $(".sticky-holder").height($(".sticky-content").outerHeight())
                    },
                    300), void s.androidDeactivateSticky())
            },
            s.scrollPromo = function() {
                setTimeout(function() {
                        var e = $(window).scrollTop();
                        $("html.touch, body.touch").animate({
                                scrollTop: e - 100 + "px"
                            },
                            "slow")
                    },
                    100)
            },
            s.applyPromo = function(t) {
                t && t.length > 0 && e.applyPromo(t, i.PAGECONTEXT.ORDER_SUMMARY).then(function(e) {
                    s.promoMsg = "PROMO CODE APPLIED",
                        s.promoClass = "promo-success",
                    ("paypal" == s.paymentSource || s.shoppingCart.payment && s.shoppingCart.payment.paypal && "TxSuccess" == s.shoppingCart.payment.paypal.paypal_status) && s.authChange(),
                        s.$digest(),
                        s.$broadcast("refreshCart", e, !1),
                    s.anyPremiumCareSubscriptionCart() || s.cartHasSubscription() || s.zerodollarchange()
                }).E401(function(e) {
                    $(".promo-inputs").hide(),
                        s.promptReLogin(e)
                }).E409(function(e) {
                    s.promoClass = "promo-fail",
                    e.responseText && s.isJsonString(e.responseText) && (e = JSON.parse(e.responseText)),
                        s.promoMsg = r[e.error] ? r[e.error].title: "The promo code you entered is invalid.",
                        s.$digest()
                }).fail(function(e) {
                    e.responseText && s.isJsonString(e.responseText) && (e = JSON.parse(e.responseText)),
                        r[e.error] ? s.promoMsg = r[e.error].title: s.showErrorMessage(!0, r.defaultError.title, r.defaultError.description)
                })
            },
            s.formatAddress = function(e) {
                var t = "";
                return e && (t = e.line1 + ", ", e.line2 && (t = t + e.line2 + ", "), t = t + e.city + ", " + e.state_or_province + ", " + e.postal_code),
                    t
            };
        var A;
        s.stopStickyNav = function() {
            angular.isDefined(A) && (clearInterval(A), A = void 0)
        },
            $(window).scroll(function() {
                y()
            });
        var T = v(function() {
                if ($(window).width() > 767) $("body").width("auto"),
                    $("body").css("padding-bottom", "0"),
                    $(".sticky-holder").height($(".sticky-content").outerHeight()),
                    $(".sticky-holder").width($(".order-summary-holder").width()),
                    $(".order-summary-holder").find(".info-box").width($(".order-summary-holder").outerWidth() - 66);
                else {
                    $("body").width($(window).width()),
                        $(".sticky-holder").css("height", "auto"),
                        $(".sticky-holder").css("width", "auto"),
                        $(".order-summary-holder").css("height", "auto"),
                        $(".sticky-holder").removeClass("sticky").removeClass("bottom");
                    var e = $(".minicart-v2").find(".item-container"),
                        t = $(".minicart-v2").find(".minicart-close"),
                        n = $(".minicart-v2").find(".purchase-options"),
                        i = $(".minicart-v2").find(".gnb-checkout"),
                        r = $(window).height(),
                        a = r - t.outerHeight() - n.outerHeight() - i.outerHeight() - 2;
                    e.height(a).css({
                        "overflow-x": "hidden",
                        "overflow-y": "auto"
                    })
                }
            },
            250);
        $(window).on("resize", T),
            s.itemQuantites = function(e, t) {
                var n = 4;
                return t > n && (n = t),
                    _.times(n,
                        function() {
                            var e = 1;
                            return 3 == arguments[0] && (e = "", arguments[0] = "4+"),
                            arguments[0] + e
                        })
            },
            s.getPaymentMethod = function(e, t) {
                return e && !t ? "Paypal": e && t ? "Paypal Credit": "Credit Card"
            },
            s.showAuthChangeEntity = function(e, t) {
                return s.showAuthChange = {},
                    s.showAuthChange[e] = t,
                    h(function() {
                        s.$digest()
                    }),
                    !0
            },
            s.authChange = function() {
                s.haAvailableInPaypalAddress = !1,
                    s.isSingleClickCheckoutOn ? (s.paymentMode = "edit", s.shippingMode = "edit", $(".add-new-shipping-address").hide(), $(".add_new_addr").show(), setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $("#_card_info").offset().top
                                },
                                "slow")
                        },
                        200), "paypal" == s.UIStateInfo.paymentInfo.paymentMethod && (s.shippingSameAsBilling = !1, $("#_paymentTypeCC").prop("checked", !0), s.isLoggedIn && (s.billing.email = s.contact.email, s.billing.phone = s.contact.phone), s.UIStateInfo.paymentInfo.paymentMethod = "card", s.UIStateInfo.paymentInfo.isChanged = !0, s.UIStateInfo.paymentInfo.isValid = !1, s.UIStateInfo.shippingInfo.isChanged = !0, s.UIStateInfo.shippingInfo.isValid = !1, o.selectedPayment = void 0, o.isPaypal = !1, $(".checkout-payment-cc-details").show(), $("input[name=payMethod]:checked").removeAttr("checked"), s.UIStateInfo.paymentInfo.isComplete = !1)) : ($("#_paymentTypeCC").prop("checked", !0), s.paymentMode = "edit", s.$broadcast("disablePaypal"), setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $("#_card_info").offset().top
                                },
                                "slow")
                        },
                        200))
            },
            s.isEppRedirect = function() {
                return SCart.isEppRedirect()
            },
            s.setRedirectPostLogin = function(e) {
                s.redirectPostLogin = s.redirectPostLogin || "cartPayment" != e ? s.redirectPostLogin: i.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT
            },
            o.$on("$routeChangeStart",
                function(e, t, n) {
                    t && t.$$route && t.$$route.name && "cartInfo" == t.$$route.name && n && n.$$route && n.$$route.name && (s.isTagFired = !0)
                }),
            o.$on("$routeChangeSuccess",
                function(t, n) {
                    if (window.SCart.sessionIdValid && n && n.$$route && n.$$route.name && ("cartFinance" == n.$$route.name || s.isSingleClickCheckoutOn && "cartPayment" == n.$$route.name)) {
                        var i = $.cookie("remoteId");
                        i && "undefined" != i && e.validateAuthToken(i).then(function(e) {
                            "cartPayment" == n.$$route.name && (s.validateTknSingleClickDone = !0, s.fireSingleClickCheckoutTags());
                            var t = JSON.parse(e);
                            "valid" != t.status && (s.checkoutLoginMessage = r.ReLogin.title, window.SCart.sessionIdValid = !1, s.setRedirectPostLogin(n.$$route.name), window.location.href = window.SCart.URL.CHECKOUT_URL())
                        }).fail(function() {
                            s.checkoutLoginMessage = r.ReLogin.title,
                                window.SCart.sessionIdValid = !1,
                                s.setRedirectPostLogin(n.$$route.name),
                                window.location.href = window.SCart.URL.CHECKOUT_URL()
                        })
                    }
                }),
            s.showSavings = function() {
                return s.isCartEmpty ? !1 : void($(window).width() > 768 && (window.utag && utag.link({
                    link_cat: "tool tip",
                    link_id: "order_summary_total_savings_tooltip",
                    link_meta: "link_name:total savings tooltip",
                    link_position: "order summary"
                }), $(".order-summary-holder").find(".info-box").width($(".order-summary-holder").outerWidth() - 66), $(".savings-on-total").addClass("active"), $(".savings-on-total").find(".info-box").css({
                    top: "95px",
                    opacity: "0",
                    display: "block"
                }), $(".savings-on-total").find(".info-box").animate({
                        top: "45px",
                        opacity: 1
                    },
                    350)))
            },
            s.hideSavings = function() {
                return s.isCartEmpty ? !1 : void($(window).width() > 768 && ($(".order-summary-holder").find(".info-box").width($(".order-summary-holder").outerWidth() - 66), $(".savings-on-total").removeClass("active"), $(".savings-on-total").find(".info-box").animate({
                        top: "95px",
                        opacity: 0
                    },
                    350,
                    function() {
                        $(".savings-on-total").find(".info-box").css({
                            display: "none"
                        })
                    })))
            },
            s.toggleSavings = function() {
                return s.isCartEmpty ? !1 : void($(window).width() < 768 ? ($(".savings-on-total").toggleClass("active"), $(".savings-on-total").find(".info-box").slideToggle(), $(".savings-on-total").find(".icon-info").toggleClass("active")) : ($(".order-summary-holder").find(".info-box").width($(".order-summary-holder").outerWidth() - 66), $(".savings-on-total").toggleClass("active"), $(".savings-on-total").hasClass("active") ? ($(".savings-on-total").find(".info-box").css({
                    top: "95px",
                    opacity: "0",
                    display: "block"
                }), $(".savings-on-total").find(".info-box").animate({
                        top: "45px",
                        opacity: 1
                    },
                    350)) : $(".savings-on-total").find(".info-box").animate({
                        top: "95px",
                        opacity: 0
                    },
                    350,
                    function() {
                        $(".savings-on-total").find(".info-box").css({
                            display: "none"
                        })
                    })))
            },
            s.zerodollarchange = function() {
                0 == s.cost.total.amount && (s.isSingleClickCheckoutOn && (s.shippingMethodMode = "edit", s.UIStateInfo.paymentInfo.isValid = !0, s.UIStateInfo.paymentInfo.isChanged = !1, s.UIStateInfo.paymentInfo.isComplete = !0, s.UIStateInfo.paymentInfo.paymentMethod = void 0), "view" != s.shippingMode ? (s.shippingMode = "edit", s.shippingMethodMode = s.isSingleClickCheckoutOn ? "edit": "disabled") : s.shippingMethodMode = "edit", -1 != $(".checkout-payment-shipping-methods .checkout-payment-form-subtitle").text().indexOf("No") && $(".checkout-payment-shipping-methods .checkout-payment-form-subtitle").addClass("no-shipping-zero-dollar"), s.addedPayment = {},
                    s.paymentMode = "disabled", s.shippingSameAsBilling && (s.bluraddress(), $("#_addressInfo_userEmail").parents(".input-control").addClass("focus"), $("#_addressInfo_userPhoneNo").parents(".input-control").addClass("focus")), s.isLoggedIn ? s.isSingleClickCheckoutOn || (s.shippingSameAsBilling ? ($(".add_new_addr").show(), $(".add-new-shipping-address").hide()) : $(".add_phone_email").hide()) : ($(".add_new_addr").show(), $(".add-new-shipping-address").hide()), s.shippingSameAsBilling = !1, $("#_sameAsShipAddress").removeAttr("checked"), s.$digest())
            },
            s.latestPurchaseflow = function(e) {
                if (e && s.isJsonString(e.responseText)) {
                    var t = JSON.parse(e.responseText).purchase_flow_response_payload;
                    t && (s.$broadcast("refreshCart", t.cart, !1, "addItems"), s.resetQuery())
                }
            },
            s.fixDomain = function(e) {
                if (!e) return s.relativeImagePath + "/checkout/no-photo.jpg";
                var t = e;
                return - 1 != t.indexOf("secureus.samsung.com") && (t = t.replace("secureus.samsung.com", "www.samsung.com")),
                    t
            },
            s.isActivationEnabledLockedSku = function(e) {
                return s.carrierActivationSkus.indexOf(e) > -1 && (e.endsWith("SPR") || e.endsWith("TMB"))
            },
            s.cartHasSimSkus = function() {
                var e = _.filter(s.cartItems,
                    function(e) {
                        return e.parentItem && 1 == e.parentItem.quantity
                    }),
                    t = _.pluck(e, "sku_id"),
                    n = _.intersection(t, s.simSkus);
                return n && n.length > 0
            },
            s.removeSimFromCart = function() {
                var e = _.filter(s.cartItems,
                    function(e) {
                        return s.simSkus.indexOf(e.sku_id) > -1
                    });
                o.$broadcast("removeItems", e, "noActivation")
            },
            s.getTradeInSkuFromCart = function() {
                return _.filter(s.cartItems,
                    function(e) {
                        return s.isTradeInSku(e)
                    })
            },
            s.removeTradeInFromCart = function() {
                var e = s.getTradeInSkuFromCart();
                o.$broadcast("removeItems", e, "removeTradeInItem")
            },
            s.carrierActivationEnabled = function() {
                if (!s.isCarrierActivationEnabled) return ! 1;
                if (!s.isLoggedIn) return ! 1;
                var e = _.filter(s.cartItems,
                    function(e) {
                        return 1 == e.quantity || s.TMOSkus.indexOf(e.sku_id) > -1
                    }),
                    t = _.find(e,
                        function(e) {
                            return e.sku_id.endsWith("SPR") || e.sku_id.endsWith("TMB")
                        }),
                    n = _.intersection(t, s.carrierActivationSkus);
                return n && n.length > 0 ? !0 : s.cartHasSimSkus() ? !0 : !1
            },
            s.activationEnabledItemCount = function() {
                var e = 0;
                return _.each(s.cartItems,
                    function(t) { (1 == t.quantity || s.TMOSkus.indexOf(t.sku_id) > -1 && s.isTMOBogoOffer(s.cartItems)) && ((t.sku_id.endsWith("SPR") || t.sku_id.endsWith("TMB")) && s.carrierActivationSkus.indexOf(t.sku_id) > -1 ? e += t.quantity: s.simSkus.indexOf(t.sku_id) > -1 && t.parentItem && 1 == t.parentItem.quantity && (e += t.quantity))
                    }),
                    e
            },
            s.cartHasSim = function() {
                var e = _.pluck(s.cartItems, "sku_id");
                return _.intersection(e, s.simSkus).length > 0
            },
            s.mapOffersToCartItem = function(e, t, n) {
                var i = _.find(s.cartItems,
                    function(t) {
                        return t.sku_id == e
                    });
                if (i) {
                    var r = _.pluck(t, "offers"),
                        a = [].concat.apply([], r),
                        o = a.filter(function(e) {
                            return "Cross-sell" == e.type
                        }),
                        c = _.pluck(o, "productOffers"),
                        l = [].concat.apply([], c),
                        d = _.uniq(l,
                            function(e) {
                                return e.sku
                            }),
                        p = _.pluck(s.cartItems, "sku_id"),
                        u = d.filter(function(e) {
                            var t = e.extRefId || e.sku;
                            return ! _.contains(p, t)
                        });
                    if (n) i.simOffers = s.cartHasSim() || 1 != i.quantity ? [] : l;
                    else {
                        i.offers = u;
                        var f = _.pluck(u, "sku");
                        s.crossSellSkus = f.concat(f, s.crossSellSkus)
                    }
                    s.$digest()
                }
            },
            s.mapOffers = function() {
                for (var e = 0; e < s.offers.length; e++) s.mapOffersToCartItem(s.offers[e].skuId, s.offers[e].offers, !1)
            },
            s.loginCallBack = function() {
                window.SCart.sessionIdValid = !0,
                    s.isLoggedIn = window.isLogin(),
                    s.userName = window.getUserName(),
                    s.carrierActivationConsentRequired = !s.isLoggedIn,
                    a.suppressUpSellIt(),
                    s.payoverTimeSelected && s.isCartFinancible && s.isFinancingOn && !s.isCartFinancibleAndMinimumNotMet ? s.getCreditDetails("redirect") : s.checkoutSelected && (s.redirectPostLogin = i.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT, u.path("/cart-payment")),
                    s.payoverTimeSelected = !1,
                    s.checkoutSelected = !1,
                $(window).width() < 767 && (s.ischeckoutv3ui ? $(".os-action-holder.os-total-fixed-at-bottom-in-mobile").show() : $(".os-total-fixed-at-bottom-in-mobile.os-cart-payment-options-holder.for-mobile").show()),
                    s.$broadcast("onUserLogin"),
                    s.$digest()
            },
            s.onUserLogInComplete = function() {
                s.isV3Checkout = EcomApi.isTransformRequired,
                    e.refreshCart({
                        context: i.PAGECONTEXT.CONTACT_INFO
                    }).then(function(e) {
                        s.$broadcast("refreshCart", e, !0),
                            s.loginCallBack()
                    })
            },
            s.fireLoginTags = function(e) {
                if (s.checkoutSelected || s.payoverTimeSelected) {
                    var t = "";
                    s.payoverTimeSelected ? t = "Finance -" + e: s.isTradeinCart ? t = "TradeIn -" + e: s.cartHasSimSkus() ? t = "Activation -" + e: s.premiumCareSubscriptionCart() && (t = "Premium Care - " + e);
                    var n = {
                        page_type: "shopping cart",
                        dr_page_name: t,
                        site_language: "en",
                        loggedin_status: s.isLoggedIn,
                        page_breadcrumb: null,
                        page_channel: "ecommerce",
                        stock_list: "in stock",
                        ecom_flag: "Yes",
                        cart_theme: "29552800",
                        financing_available: s.isCartFinancible ? "y": "n",
                        activation_available: s.carrierActivationEnabled() ? "y": "n"
                    };
                    window.utag && window.utag.view(n)
                }
            },
            s.resetQuery = function(e) {
                e ? u.search(e, null) : u.url(u.path()),
                history && history.replaceState && history.replaceState(void 0, void 0, "#" + u.url())
            },
            s.loginFailCallBack = function() {
                $(".no-activation").remove(),
                $(window).width() < 767 && (s.ischeckoutv3ui ? $(".os-action-holder.os-total-fixed-at-bottom-in-mobile").show() : $(".os-total-fixed-at-bottom-in-mobile.os-cart-payment-options-holder.for-mobile").show()),
                    s.fireLoginTags("Login Close"),
                s.forceLogIn() && (window.location.href = document.referrer && document.referrer.indexOf("www.samsung.com") > -1 ? document.referrer: "http://www.samsung.com/us/"),
                    s.payoverTimeSelected = !1,
                    s.checkoutSelected = !1,
                    s.loginCancelled = !0
            },
            $(document).on("onLogInComplete",
                function() {
                    EcomApi.findIfTransformIsRequired();
                    var e = u.search();
                    e.checkout && "payOverTime" == e.checkout && (s.payoverTimeSelected = !0, s.resetQuery("checkout")),
                        s.fireLoginTags("Login Sign In"),
                        s.onUserLogInComplete()
                }),
            $(document).on("onSignUpComplete",
                function() {
                    EcomApi.findIfTransformIsRequired();
                    var e = u.search();
                    e.checkout && "payOverTime" == e.checkout && (s.payoverTimeSelected = !0, s.resetQuery("checkout")),
                        s.fireLoginTags("Sign Up"),
                        s.onUserLogInComplete()
                }),
            $(document).on("onLogInCancel",
                function() {
                    s.loginFailCallBack()
                }),
            $(document).on("onPromptLogin",
                function() {
                    $(window).width() < 767 && (s.ischeckoutv3ui ? $(".os-action-holder.os-total-fixed-at-bottom-in-mobile").hide() : $(".os-total-fixed-at-bottom-in-mobile.os-cart-payment-options-holder.for-mobile").hide())
                }),
            $(document).on("noActivation",
                function() {
                    $(document).trigger("onPromptClose"),
                        s.cartHasSimSkus() ? s.removeSimFromCart() : (u.path("/cart-payment"), s.$digest())
                }),
            $(document).on("removeTradeIn",
                function() {
                    $(document).trigger("onPromptClose"),
                        s.isTradeinCart ? s.removeTradeInFromCart() : (u.path("/cart-payment"), s.$digest())
                }),
            $(document).on("noPremiumCare",
                function() {
                    if ($(document).trigger("onPromptClose"), s.premiumCareSubscriptionCart()) {
                        var e = _.filter(s.cartItems,
                            function(e) {
                                return s.subscriptionBySS.indexOf(e.sku_id) > -1
                            });
                        o.$broadcast("removeItems", e, "noPremiumCare")
                    } else u.$path("/cart-payment"),
                        s.$digest()
                }),
            $(document).on("noPremiumCareAndActivation",
                function() {
                    if ($(document).trigger("onPromptClose"), s.premiumCareSubscriptionCart()) {
                        var e = _.filter(s.cartItems,
                            function(e) {
                                return s.subscriptionBySS.indexOf(e.sku_id) > -1
                            });
                        s.cartHasSimSkus() && (e = e.concat(_.filter(s.cartItems,
                            function(e) {
                                return s.simSkus.indexOf(e.sku_id) > -1
                            }))),
                            o.$broadcast("removeItems", e, "noPremiumCareAndActivation")
                    } else u.$path("/cart-payment"),
                        s.$digest()
                }),
            s.$watch(function() {
                    return window.SCart.sessionIdValid
                },
                function() {
                    s.forceLogIn() && (s.showGlobalLogin(), s.isEppRedirect() ? f.setEPPRedirectLayout() : f.setSessionExpiryLayout())
                },
                !0),
            s.isLoginRequired = function() {
                if (s.logInForCarrierActivation = !1, s.isTMOBogoOffer(s.cartItems) && "true" == $.cookie("forceGNBLogin")) return ! 0;
                if (s.isTradeinCart) return ! 0;
                if (s.premiumCareSubscriptionCart()) return ! 0;
                if (!s.isCarrierActivationEnabled) return ! 1;
                var e = _.find(s.cartItems,
                    function(e) {
                        return 1 == e.activateSim
                    });
                return e ? (s.logInForCarrierActivation = !0, !0) : s.cartHasSimSkus() ? (s.logInForCarrierActivation = !0, !0) : s.oneClickActivationSelected ? (s.logInForCarrierActivation = !0, !0) : s.isWaterFilterSkuInCart() ? !0 : !1
            },
            s.registerUtag = function(e) {
                window.utagUrl && !s.isUtagRegistered && (window.utag_data = window.utag_data || {},
                    function(e) {
                        e = window.utagUrl;
                        var t = document.getElementsByTagName("body")[0],
                            n = document.createElement("script");
                        n.async = !0,
                            n.type = "text/javascript",
                            n.src = e,
                            t.appendChild(n)
                    } (), s.isUtagRegistered = !0, e && (setTimeout(e, 5e3), window.onbeforeunload = function() {
                    e()
                }))
            },
            s.isSIMSku = function(e) {
                return _.contains(s.simSkus, e)
            },
            s.isDreamSku = function(e) {
                return _.contains(s.dreamSkus, e)
            },
            s.isGreatSku = function(e) {
                return _.contains(s.greatSkus, e)
            },
            s.cartHasDreamSkuUnlocked = function() {
                var e = _.pluck(s.cartItems, "sku_id"),
                    t = _.intersection(e, s.dreamSkusUnlocked);
                return t && t.length > 0 ? !0 : !1
            },
            s.isDreamPPSku = function(e) {
                return _.contains(s.dreamPPSkus, e)
            },
            s.isSubscriptionEnabled = function(e) {
                return _.contains(s.subscriptionSkus, e)
            },
            s.cartHasDreamPP = function() {
                var e = _.pluck(s.cartItems, "sku_id"),
                    t = _.intersection(e, s.dreamPPSkus);
                return t && t.length > 0 ? !0 : !1
            },
            s.cartHasDreamSku = function() {
                var e = _.pluck(s.cartItems, "sku_id"),
                    t = _.intersection(e, s.dreamSkus);
                return t && t.length > 0 ? !0 : !1
            },
            s.cartHasGreatSku = function() {
                var e = _.pluck(s.cartItems, "sku_id"),
                    t = _.intersection(e, s.greatSkus);
                return t && t.length > 0 ? !0 : !1
            },
            s.showGlobalLogin = function() {
                $(document).trigger("onPromptLogin")
            },
            s.carriersInCart = function() {
                var e = _.pluck(s.cartItems, "sku_id"),
                    t = "";
                return _.each(e,
                    function(e) {
                        var n = e.substr(e.length - 3);
                        s.carriers[n] && (t += t ? "|" + s.carriers[n] : s.carriers[n])
                    }),
                    t
            },
            s.isPremiumCare = function(e) {
                return "HHP-ADH1-PB4" == e || "HHP-ADH1-PB4-A" == e
            },
            s.cartHasSubscription = function() {
                var e = _.pluck(s.cartItems, "sku_id"),
                    t = _.intersection(e, s.subscriptionSkus);
                return t && t.length > 0 ? t.length: 0
            },
            s.ifPPSubscribed = function() {
                var e = !1,
                    t = !1;
                return _.each(s.cartItems,
                    function(t) {
                        s.isSubscriptionEnabled(t.sku_id) && (t.subscribe || s.isSubscriptionAgreed || s.isSubscriptionWith2MF([], t.sku_id) || (e = !0))
                    }),
                    e || t ? (setTimeout(function() {
                            s.$broadcast("cartStepError", r.SubscribeError.title, r.SubscribeError.description)
                        },
                        0), !1) : (s.onErrorClose(), !0)
            },
            s.showGlobalLogin = function() {
                $(document).trigger("onPromptLogin"),
                    $(document).ready(function() {
                        $(document).trigger("onPromptLogin")
                    })
            },
            s.isIE = function() {
                var e = window.navigator.userAgent,
                    t = e.indexOf("MSIE ");
                return t > 0 || navigator.userAgent.match(/Trident.*rv\:11\./) ? !0 : !1
            },
            s.setPaymentOptions = function() {
                s.hidePaypal = s.anyPremiumCareSubscriptionCart() || s.cartHasSubscription() || s.isTradeinCart || s.isWaterFilterSkuInCart() ? !0 : !1
            },
            s.fireUtagActivationEligible = function() {
                return _.find(s.cartItems,
                    function(e) {
                        return 1 == e.isActivationEnabledLockedSku || e.simOffers && e.simOffers.length > 0
                    })
            },
            s.fireUtagActivationConsent = function() {
                window.utag && utag.link({
                    link_cat: "add to cart",
                    link_id: "activation_consent",
                    link_meta: "link_name:activation_consent",
                    link_position: "activation_consent"
                })
            },
            s.disableSaveCard = function() {
                return s.anyPremiumCareSubscriptionCart() || s.cartHasSubscription() || s.isTradeinCart || s.isWaterFilterSkuInCart()
            },
            s.shippingOptionsText = {
                Standard: "1-5 business days",
                Expedited: "2 business days",
                Express: "1 business day",
                "Samsung White Glove Delivery": "Delivery at your convenience",
                "Standard Ground Shipping": "1-5 business days",
                "Overnight Air - US - samsung": "1 business day",
                "2 Day Air - US": "2 business days",
                "White Glove - samsung": "Delivery at your convenience",
                "Standard Freight Shipping-samsung": "Delivery at your convenience",
                "Samsung Standard Delivery": "1-5 business days"
            },
            a.suppressUpSellIt(),
            s.forceLogIn = window.Checkout.forceLogIn,
            s.isWaterFilterSkuInCart = function() {
                var e = _.pluck(s.cartItems, "sku_id"),
                    t = _.intersection(e, s.waterFilterSkus);
                return t && t.length > 0 ? !0 : !1
            },
            s.isMobileAppView = function() {
                return "true" == $.cookie("isMobileApp") && window.isMobile()
            },
            s.alterForMobileApp = function() {
                $(".gnb-b2c-mnav, .gnb-b2c-logo, .gnb-b2c-icons, .gnb-footer").hide(),
                    $(".gnb-b2c-mcont").addClass("premium-care-app-header"),
                    $(".gnb-b2c-mcont").text("Samsung +")
            },
        s.isMobileAppView() && setTimeout(function() {
                s.alterForMobileApp()
            },
            0),
            s.isJsonString = function(e) {
                try {
                    JSON.parse(e)
                } catch(t) {
                    return ! 1
                }
                return ! 0
            },
            s.isAndroidDevice = function() {
                var e = navigator.userAgent.toLowerCase(),
                    t = e.indexOf("android") > -1;
                return window.isMobile() && t === !0
            },
            s.androidDeactivateSticky = function() {
                s.isAndroidDevice() && ($(".btn-promo-accordion").hasClass("active") || $(".estimated-tax-holder a").hasClass("active")) ? $(".os-cart-payment-options-holder").addClass("android-deactivate-sticky") : $(".os-cart-payment-options-holder").removeClass("android-deactivate-sticky")
            },
            s.setNRCustomAttributes = function() {
                window.newrelic && (newrelic.setCustomAttribute("isEppUser", s.isEppRedirect()), newrelic.setCustomAttribute("isLoggedIn", s.isLoggedIn), newrelic.setCustomAttribute("ecomSessionId", $.cookie("s_ecom_session")))
            },
            s.setNRCustomAttributes(),
            o.isMobileDevice = window.isMobile(),
            s.isBackOrdered = function(e) {
                return "BACKORDERED" == e.inventory_status.status.toUpperCase()
            },
            s.isPreOrdered = function(e) {
                return "PREORDER" == e.inventory_status.status.toUpperCase()
            },
            s.isDetailsAvailable = function(e) {
                return e.discount && e.discount.details && e.discount.details.skuOfferCount > 0 || e.totalPromoDiscount && e.totalPromoDiscount >= 1 || e.discount && e.discount.details && e.discount.details.epp && e.discount.details.epp.amount && e.discount.details.epp.amount > 0 || e.discount && e.discount.details && e.discount.details.order_level && e.discount.details.order_level.amount && e.discount.details.order_level.amount > 0 || e.discount && e.discount.details && e.discount.details.coupon && e.discount.details.coupon.length > 0 || e.discount && e.discount.details && e.discount.details.shipping && e.discount.details.shipping.amount && e.discount.details.shipping.amount > 0 || s.isPremiumCare(e.sku_id)
            },
            s.isUpgradeOffer = function(e) {
                return e.sku && "UPGRADE-01" == e.sku || e.sku_id && "UPGRADE-01" == e.sku_id ? (e.phoneUpgradeCrossSell = !0, s.displayPhoneUpgradeTC = !0, !0) : e.sku && "UPGRADE-02" == e.sku || e.sku_id && "UPGRADE-02" == e.sku_id ? (e.TVUpgradeCrossSell = !0, s.displayTVUpgradeTC = !0, !0) : void 0
            },
            s.deleteUpgradeItemsFromCart = function(t, n) {
                var i = [];
                if (_.forEach(s.cartItems,
                        function(e) {
                            s.findIfUpgradeSkuIsInCart(e) && i.push(e)
                        }), i && i.length > 0) {
                    var a = [];
                    _.forEach(i,
                        function(e) {
                            var t = {};
                            t.method = "DELETE",
                                t.url = SCart.URL.CART_SUB_LINE_ITEM_V3_URL(SCart.shoppingCartTransformService.shoppingCartId, e.line_item_id, e.parentItem.line_item_id, !0),
                                t.handler = "removeItemHandler",
                                a.push(t)
                        }),
                    a && a.length > 0 && e.shoppingCartCTA(a).then(function(e) {
                        e && e.length > 0 && s.$broadcast("refreshCart", e[e.length - 1], !0),
                        n && s.$broadcast("cartStepError", r.UpgradeRemoveError.title, r.UpgradeRemoveError.description)
                    }).fail(function() {
                        s.$broadcast("cartStepError", r.RemoveItemError.title, r.RemoveItemError.description)
                    })
                }
            },
            s.isIntranetSite = function() {
                if (window.document.documentMode) try {
                    var e = window.status;
                    return window.status = "testIntranetMode",
                        "testIntranetMode" === window.status ? (window.status = e, !0) : !1
                } catch(t) {
                    return ! 1
                }
                return ! 1
            },
        s.isIE() && s.isIntranetSite() && (s.hidePaypalForIE = !0),
            h(function() {
                n.trackInputTags()
            })
    }]), checkoutApp.factory("CheckoutService", ["$q", "constants", "$http", "cryptoUtil", "updateUtilities", "$rootScope",
    function(e, t, n, i, r, a) {
        "use strict";
        var o;
        o = window.Checkout.shoppingCartService ? window.Checkout.shoppingCartService: new SCart.ShoppingCartService({
            showLoading: !0
        });
        var s = {
            getCartItems: function(e, t) {
                return o.getCart(e, t)
            },
            getPaymentUiUrl: function() {
                return o.getPaymentUiUrl(t.PAGECONTEXT.PAYMENT_INFO)
            },
            removeItem: function(e, t, n) {
                return o.removeItem(e, t, n)
            },
            addItem: function(e, t, n) {
                return o.addItem(e, t, n)
            },
            addItems: function(e, t) {
                return o.addItems(e, t)
            },
            replaceCart: function(e) {
                return o.replaceCart(e)
            },
            changeQuantity: function(e, t, n, i) {
                return o.changeQuantity(e, t, n, i)
            },
            getAccessories: function(e, t) {
                return o.fetchAccessories(e, t)
            },
            applyPromo: function(e, t) {
                return o.applyPromoCode(e, t)
            },
            addUpdateShippingInfo: function(e, t, n) {
                return o.updateShippingInfo(e, t, n)
            },
            updateShippingMethod: function(e, t) {
                return o.updateShippingMethod(e, t)
            },
            addAssurantInfo: function(e, t, n) {
                return o.addAssurantInfo(e, t, n)
            },
            getShippingOptions: function(e) {
                return o.fetchShippingOptions(e)
            },
            getEstimatedTaxInfo: function(e, t) {
                return o.getEstimatedTaxInfo(e, t)
            },
            getAvailableHomeDeliveryDates: function(e, t, n) {
                return o.getAvailableHomeDeliveryDates(e, t, n)
            },
            getSavedShippingAddress: function(e) {
                return o.getSavedShippingAddress(e)
            },
            deleteShippingAddress: function(e, t) {
                return o.deleteShippingAddress(e, t)
            },
            getSavedPayments: function(e) {
                return o.getSavedPayments(e)
            },
            validateAddress: function(e, t) {
                return o.validateAddress(e, t)
            },
            addPayment: function(e, n, r, a, s, c) {
                if ("financing" == r) {
                    var l = {};
                    return l.billing_info = n.billing_info,
                        l.billing_record = {},
                        l.billing_record.billing_record_id = n.billing_record_id,
                        l.billing_record.account_provider = "ECom",
                        o.addExistingPayment(l, t.PAGECONTEXT.PAYMENT_INFO)
                }
                if (r) {
                    var l = {};
                    return l.credit_card_details_encrypted = i.encryptCardInfo(n),
                        l.billing_info = e,
                    a || (l.save_payment_method = s ? !0 : !1),
                        o.addPayment(l, a, t.PAGECONTEXT.PAYMENT_INFO)
                }
                var l = {};
                return l.billing_info = n.billing_info,
                    l.billing_record = {},
                    l.billing_record.billing_record_id = n.id,
                    l.billing_record.account_provider = n.account_provider,
                    o.addExistingPayment(l, t.PAGECONTEXT.PAYMENT_INFO)
            },
            checkout: function(e, t) {
                return o.checkout(e, t)
            },
            ziplookup: function(e, t) {
                return o.ziplookup(e, t)
            },
            getPromotions: function(e) {
                return o.getPromotions(e, t.PAGECONTEXT.PROMOTIONS)
            },
            getV3Promotions: function(e, n) {
                return o.getV3Promotions(e, n, t.PAGECONTEXT.PROMOTIONS)
            },
            getV3PromotionsPrice: function(e) {
                return o.getV3PromotionsPrice(e, t.PAGECONTEXT.PROMOTIONS)
            },
            getV3ProductCatalog: function(e) {
                return o.getV3ProductCatalog(e, t.PAGECONTEXT.PROMOTIONS)
            },
            refreshCart: function(e, t) {
                return o.refreshCart(e, t)
            },
            getPaypalUrl: function(e, n) {
                var i = window.location.origin + window.location.pathname + "#/cart-payment/paypal",
                    r = window.location.origin + window.location.pathname + "#/cart-payment/paypal-error";
                return o.getPaypalUrl(e, i, r, n, t.PAGECONTEXT.PAYMENT_INFO)
            },
            loginRedirectUrl: function(e) {
                return o.loginRedirectUrl(e)
            },
            getUserProfile: function(e, t) {
                return o.getUserProfileInfo(e)
            },
            getShoppingCartPubKey: function(e) {
                return o.getShoppingCartPubKey(e)
            },
            validateAuthToken: function(e, t) {
                return o.validateAuthToken(e)
            },
            getCurrentCart: function() {
                return o.cart
            },
            saveCustomAttributes: function(e, t) {
                return o.saveCustomAttributes(e, t)
            },
            getCustomAttributes: function() {
                return o.attributes
            },
            submitFinanceApplication: function(e, t) {
                var n = i.encryptFinancingInfo(e);
                return o.submitFinanceApplication(t, n)
            },
            getFinancingStatus: function(e) {
                return o.getFinancingStatus(e)
            },
            getFinancingPubKey: function(e) {
                return o.getFinancingPubKey(e)
            },
            getFinanceBillingRecord: function(e, t) {
                return o.getFinanceBillingRecord(e, t)
            },
            linkTDAccount: function(e, t) {
                var n = i.encryptTDAccount(e);
                return o.linkTDAccount(n, t)
            },
            addFinancePlan: function(e, t) {
                return o.addFinancePlan(e, t)
            },
            getUserAddress: function(e) {
                return o.getUserAddress(e)
            },
            addSubLineItem: function(e, t, n, i) {
                return o.addSubLineItem(e, t, n, i)
            },
            shoppingCartCTA: function(e, t) {
                return o.shoppingCartCTA(e, t)
            },
            submitFinanceCTA: function(e, t) {
                return o.submitFinanceCTA(e, t)
            },
            undoRemove: function(e, t, n, i, r) {
                if (n) return o.addSubLineItem(n, e, t, r);
                if (i) {
                    var a = [],
                        s = {
                            skuId: e,
                            quantity: t
                        };
                    return s.lineitems = [],
                        _.forEach(i,
                            function(e) {
                                var t = {
                                    skuId: e.sku_id,
                                    quantity: e.quantity
                                };
                                s.lineitems.push(t)
                            }),
                        a.push(s),
                        o.addItems(a, r)
                }
                return o.addItem(e, t, r)
            },
            getOrder: function(e, t) {
                return o.getOrder(e, t)
            },
            submitFinanceApplicationCta: function(e, t) {
                return o.purchaseFlowCTA(e, t)
            },
            getFinanceApplicationCta: function(e, t) {
                return o.shoppingCartCTA(e, t)
            },
            getAvailableDatesForOrder: function(e, t) {
                return o.getAvailableDatesForOrder(e, t)
            },
            scheduleInstallation: function(e, t, n) {
                return o.scheduleInstallation(e, t, n)
            },
            removeMultipleItems: function(e, t) {
                return o.removeMultipleItems(e, t)
            },
            subscribeSMS: function(e, t, n) {
                return o.subscribeSMS(e, t, n)
            },
            fetchRecommendations: function(e) {
                return o.fetchRecommendations(e)
            }
        };
        return s.wrapExclude = ["getPaypalUrl", "getShippingOptions", "updateShippingMethod", "refreshCart", "getSavedShippingAddress", "getSavedPayments", "getUserProfile", "getShoppingCartPubKey", "getPromotions", "getV3Promotions", "getV3PromotionsPrice", "getV3ProductCatalog", "getCustomAttributes", "getFinancingStatus", "fetchRecommendations"],
            r.wrapObj(s)
    }]), checkoutApp.factory("PaymentService", ["$q", "$http",
    function(e, t) {
        "use strict";
        return {}
    }]), checkoutApp.factory("ConfirmService", ["$q", "$http",
    function(e, t) {
        "use strict";
        return {}
    }]), checkoutApp.constant("constants",
    function() {
        "use strict";
        return {
            PAGECONTEXT: {
                CART_INFO: "cart-summary",
                PROMOTIONS: "relevance",
                ORDER_SUMMARY: "order-summary",
                CONTACT_INFO: "contact-info",
                PAYMENT_INFO: "payment-info",
                SHIPPING_INFO: "shipping-info",
                SHIPPING_METHOD: "shipping-method",
                ORDER: "order",
                COMMON: "common",
                SPP: "spp",
                CHECKOUT_LOGIN: "checkout-login",
                CART_CHANGED: "cart-changed",
                CART_FINANCE: "cart-finance",
                THANKYOU_PAGE: "thankyou-page",
                CART_FINANCE_APPLICATION: "cart-finance-application"
            },
            CHECKOUT_LOGIN_REDIRECT: {
                CART_PAYMENT: 1,
                CART_PAYMENT_PLACEORDER: 2
            },
            TRADE_IN: ["TRADE IN", "TRADEIN"],
            IMAGE_PATH: "/us/smg/etc/designs/samsung/global/images/ecommerce",
            CHECKOUT_SECTION: {
                SHIPPING: "SHIPPING",
                PAYMENT: "PAYMENT"
            },
            DATE_FORMAT: "yyyy/MM/dd",
            DATE_FORMAT1: "EEEE, dd MMMM",
            HOME_APPLIANCES: ["HOME-APPLIANCES", "HOME APPLIANCES", "HOME APPLIANCE"],
            INSTALLATION: ["INSTALLATION"],
            HAUL_AWAY: ["HAUL-AWAY"],
            PROMOTIONS_LIST: ["CandyRackShoppingCart", "ActivationSamsung"],
            TD_FINANCING_PAYMENT_METHOD: "TDFINANCING"
        }
    } ()), checkoutApp.constant("errors",
    function() {
        "use strict";
        return {
            PurchaseFlowCannotBeModified: {
                title: "Your order has already been placed.",
                description: ""
            },
            MissingShippingInfo: {
                title: "Please enter your shipping information.",
                description: ""
            },
            PromoCodeAlreadyAppliedOnTheCart: {
                title: "The promo code you entered has already been applied to your order.",
                description: ""
            },
            CouponCodeAlreadyAppliedOnTheCart: {
                title: "The promo code you entered has already been applied to your order.",
                description: ""
            },
            InvalidPromoCode: {
                title: "The promo code you entered is Invalid.",
                description: ""
            },
            InvalidCouponCode: {
                title: "We're Sorry! This promotion is already redeemed or is invalid",
                description: "No change was made to the cart. Kindly try with a different coupon code."
            },
            BadRequestDefaultError: {
                title: "We are unable to process your request at this time.",
                description: "Please try again later; we apologize for the inconvenience."
            },
            PromoCodeExpired: {
                title: "The promo code you entered has expired.",
                description: ""
            },
            EComFlowSubmitCartUnsupported: {
                title: "We’re unable to process your order at this time.",
                description: "Please try again later; we apologize for the inconvenience."
            },
            CartNotComplete: {
                title: "Please complete all of the required information before placing the order.",
                description: ""
            },
            AddToCartError: {
                title: "The item could not be added to the cart.",
                description: "An error occurred. Please try after some time; we apologize for the inconvenience."
            },
            AddItemError: {
                title: "The item could not be added to the cart.",
                description: "An error occurred. Please try after some time. Sorry for the inconvenience."
            },
            AssurantWarrantyInfoIsRequired: {
                title: "Something went wrong. We cannot process this request without the IMEI number & the phone number.",
                description: "Please try adding the warranty product again. We apologize for the inconvenience."
            },
            RemoveItemError: {
                title: "The item could not be removed from the cart.",
                description: "An error occurred. Please try after some time. Sorry for the inconvenience."
            },
            PrivateStoreLimitRestriction: {
                title: "The product cannot be added to the cart.",
                description: "The product exceeds the maximum quantity that you are allowed to purchase."
            },
            PrivateStoreLimitAndMinQuantityRestriction: {
                title: "The quantity of this product has been changed to meet the minimum quantity required for this purchase.",
                description: ""
            },
            PrivateStoreMinQuantityRestriction: {
                title: "The quantity of this product has been changed to meet the minimum quantity required for this purchase.",
                description: ""
            },
            AuthError: {
                title: '"Your session has expired.',
                description: "Please login again and complete your request."
            },
            InvalidCreditCard: {
                title: "The credit card information you have entered is invalid.",
                description: "Please enter valid credit card information."
            },
            InvalidCharacters: {
                title: "Address has invalid characters.",
                description: ""
            },
            InventoryUnavailableError: {
                title: "The item could not be added to the cart as it is out of stock.",
                description: "Please try after some time; we apologize for the inconvenience."
            },
            OutOfStockOnSubmitCart: {
                title: "The order could not be placed.",
                description: ""
            },
            AddressAlreadyInAddressList: {
                title: "The specified address is already saved.",
                description: "Please select from the saved address and continue."
            },
            CartHasBeenChanged: {
                title: "Cart has changed since payment authorization.",
                description: "Please re-apply your payment."
            },
            CartPaymentFailure: {
                title: "We are unable to process your payment at this time.",
                description: "Please try again later with a different card; we apologize for the inconvenience."
            },
            DisallowedPostalCode: {
                title: "Service to the entered zip code is unavailable.",
                description: ""
            },
            DisallowedShippingAddress: {
                title: "We do not service the address currently.",
                description: "Please enter a different address to proceed."
            },
            SessionExpiredForGuest: {
                title: "We are unable to process your request at this time.",
                description: "Please check the items in your cart and checkout; we apologize for the inconvenience."
            },
            ShippingDisallowedPostalCode: {
                title: "We do not service the zip code currently.",
                description: "Please enter a different zip code to proceed."
            },
            DisallowedShippingStateProvince: {
                title: "We do not service the provided zip code currently.",
                description: "Please enter a different zip code to proceed."
            },
            DisallowedShippingCity: {
                title: "We do not service the provided city currently.",
                description: "Please enter a different city to proceed."
            },
            InvalidPostalCode: {
                title: "The zip code you entered is invalid; please enter a valid zip code.",
                description: ""
            },
            EmptyShippingInPaypal: {
                title: "Your payment could not be processed with PayPal.",
                description: "Please complete the payment with credit card. Apologise for the inconvenience caused."
            },
            ShippingAddressInvalid: {
                title: "Entered Shipping address is not valid.",
                description: "Please enter correct shipping address and proceed."
            },
            ShippingAddressInvalidCharacters: {
                title: "The shipping address you entered is invalid.",
                description: " Please enter a valid shipping address."
            },
            iFrameError: {
                title: "We are unable to process your request at this time.",
                description: ""
            },
            ShippingAddressInvalidOverride: {
                title: "We could not find the shipping address.",
                description: "Please click on continue if you want to proceed with the same address."
            },
            TooManyTradeInProductsInCart: {
                title: "You can only have 1 Trade-In device per order.",
                description: ""
            },
            ShoppingCartSchemaError: {
                title: "We couldn’t add the item to the your cart.",
                description: "Please try again later; we apologize for the inconvenience."
            },
            SubmitCartError: {
                title: "Your order could not be processed at this time.",
                description: "Please try again later; we apologize for the inconvenience."
            },
            defaultError: {
                title: "We are unable to process your request at this time.",
                description: "Please try after sometime. Sorry for the inconvenience"
            },
            Login: {
                title: "Please login to see items in your cart.",
                description: "Prompt user to login."
            },
            ReLogin: {
                title: "We are sorry, your shopping session has expired. Please login again to see items in your cart.",
                description: "Prompt user to re-login if their session has expired."
            },
            CartChangedDuringOrderSubmission: {
                title: "We are unable to process your request at this time.",
                description: " Please review your cart details and try again; we apologize for the inconvenience."
            },
            LoginError: {
                title: "Your email or password is incorrect.",
                description: " Please try again."
            },
            AlreadyExists: {
                title: "User Account already exists.",
                description: "Please try again."
            },
            InvalidShippingInPaypal: {
                title: "We do not service this address currently.",
                description: "Please enter your payment information again and enter a different shipping address to proceed."
            },
            NonZeroCart: {
                title: "",
                description: "Please update your payment information to continue."
            },
            FinancingDefaultError: {
                title: "Something went wrong. Please try again.",
                description: ""
            },
            FinanceAdapterRequestPayloadDecryptionFailed: {
                title: "Please fill out the credit application to proceed.",
                description: "We couldnt find a credit application associated with your account. Please fill out the credit application to proceed."
            },
            AddressInvalid: {
                title: "Entered address is not valid.",
                description: "Please enter correct address and proceed."
            },
            PromoCodeError: {
                title: "The promo code that you entered is no longer valid.",
                description: "Please check the items in your cart and try again."
            },
            SubscribeError: {
                title: "Please agree to the Terms & Conditions.",
                description: "Your cart consists of an auto renewal product, please agree to the terms and conditions to proceed."
            },
            CannotHaveMultipleTradeInProductsInCart: {
                title: "We are unable to process your request at this time.",
                description: "You can only have 1 Trade-In device per order."
            },
            TradeInParentProductQuantityGreaterThanOne: {
                title: "We are unable to process your request at this time.",
                description: "You can only have 1 Trade-In device per order."
            },
            TradeInProductCannotBeAParent: {
                title: "We are unable to process your request at this time.",
                description: "This product cannot be added to cart."
            },
            ParentProductIsNotEligibleForTradeIn: {
                title: "We are unable to process your request at this time.",
                description: "The product is not eligible for trade-in."
            },
            homeDeliveryError: {
                title: "Something went wrong. Please try again.",
                description: "We are unable to process your request at this time."
            },
            homeDeliveryPaymentError: {
                title: "Major Appliance delivery not available for this ZipCode",
                description: "Please try with someother Zipcode"
            },
            homeDeliveryNotAvailable: {
                title: "Major Appliance delivery not available for this zipcode",
                description: ""
            },
            PromoNotApplicableWithoutTradeIn: {
                title: "The order could not be placed.",
                description: "You must Trade-In an eligible device to qualify for free AKG headphones"
            },
            InActiveCoupon: {
                title: "The promo code has expired.",
                description: "No change was made to your cart."
            },
            InvalidRedemptionCount: {
                title: "You have exhausted the coupon code limit.",
                description: "No change was made to your cart."
            },
            UnauthorizedEmail: {
                title: "The promo code is invalid.",
                description: "No change was made to your cart."
            },
            UnauthorizedSiteId: {
                title: "This promotion is applicable for specific logged in users.",
                description: ""
            },
            NotBestOffer: {
                title: "Only one coupon can be applied to the cart or you may have to login to use this coupon.",
                description: ""
            },
            MaxRedemptionCountReached: {
                title: "This promotion has already been redeemed.",
                description: "No change was made to your cart."
            },
            MaxRedemptionCountReachedForUser: {
                title: "This promotion has already been redeemed.",
                description: "No change was made to your cart."
            },
            DeliveryViaEmail: {
                title: "Delivery date will be confirmed later.",
                description: "You will get an email with delivery date confirmation."
            },
            DeliveryRetry: {
                title: "We are unable to process your request at this moment, please retry after sometime",
                description: ""
            },
            ReschduleError: {
                title: "We are unable to process your request at this moment.",
                description: "Please try after sometime through My Orders page or contact us at 855-716-2387."
            },
            CartLineItemLimitReached: {
                title: "You cannot add more than 50 items in your cart.",
                description: "Please remove item(s) from your cart. We apologize for the inconvenience caused."
            },
            InvalidSamsungUpgradeCart: {
                title: "Some items in cart are not eligible for Samsung Upgrade program. ",
                description: "Please remove item(s) from your cart. We apologize for the inconvenience caused."
            },
            InvalidUpgradeLineItem: {
                title: "Some items in cart are not eligible for Samsung Upgrade program. ",
                description: "Please remove item(s) from your cart. We apologize for the inconvenience caused."
            },
            SkuLimitReached: {
                title: "You cannot have more than 2 quantities of the same item in the cart. ",
                description: "Please remove item(s) from your cart to proceed further. We apologize for the inconvenience caused."
            },
            ItemOutOfStock: {
                title: "Item in the cart is out of stock.",
                description: ""
            },
            MultipleSUPOrdersInDay: {
                title: "We are unable to process your request at this time.",
                description: "Limit of one Samsung Upgrade order allowed per 24 hours period reached"
            },
            PaymentNeedToBeReApplied: {
                title: "Your payment information has expired.",
                description: "Please update the payment information and try again; we apologize for the inconvenience."
            },
            InvalidWarrantyError: {
                title: "Your request could not be completed.",
                description: " Only one warranty product could be added for an item. Please delete the existing warranty product and try again."
            },
            UnableToApplySUPFinancing: {
                title: "The item could not be added to the cart.",
                description: "This item is not eligible for Samsung Upgrade Financing. We apologize for the inconvenience."
            },
            UpgradeRemoveError: {
                title: "This item is not eligible for Samsung Upgrade Financing. We apologize for the inconvenience.",
                description: ""
            }
        }
    } ()), checkoutApp.factory("AlertsService", ["$rootScope",
    function(e) {
        "use strict";
        function t() {
            var e = [];
            c.PriceChanged.items.reduce(function(t, n) {
                    return t[n.sku_id] || (t[n.sku_id] = {
                        name: n.name,
                        oldPrice: 0,
                        newPrice: 0,
                        property: n.property,
                        url: n.url,
                        sku_id: n.sku_id
                    },
                        e.push(t[n.sku_id])),
                        t[n.sku_id].oldPrice += n.oldPrice,
                        t[n.sku_id].newPrice += n.newPrice,
                        t
                },
                {}),
                c.PriceChanged.items = e
        }
        function n(e) {
            var t = e.alert_data;
            if (t.old_price && t.old_price.price && t.new_price && t.new_price.price && t.old_price.price.amount != t.new_price.price.amount) {
                var n = s(e);
                c.PriceChanged ? c.PriceChanged.items.push(n) : c.PriceChanged = {
                    title: "The price of the item(s) in your cart has changed",
                    items: [n],
                    note: "Please review the updated price and confirm the total amount."
                }
            }
        }
        function i(e) {
            if (e && e.length > 0) {
                var t = _.uniq(e,
                    function(e) {
                        return e.sku_id
                    }),
                    n = o(t);
                n && n.length > 0 && (c.ItemsRemoved = {
                    title: "The following item(s) were removed/modified from your cart as they are no longer available. Please check the cart and try again.",
                    removedItems: n
                })
            }
        }
        function r(e) {
            return {
                title: "One or more items were removed from your cart due to purchase restrictions."
            }
        }
        function a(t) {
            var n = _.findWhere(e.cartItems, {
                sku_id: t
            });
            return n ? n.attributes: {}
        }
        function o(t) {
            var n = _.pluck(t, "sku_id"),
                i = [];
            return _.each(n,
                function(t) {
                    var n = _.findWhere(e.cartItems, {
                        sku_id: t
                    });
                    if (n) {
                        var r = {
                            name: n.attributes.display_name
                        };
                        i.push(r)
                    }
                }),
                i
        }
        function s(e) {
            var t = e.alert_data,
                n = a(e.sku_id);
            return n && n.display_name ? {
                sku_id: e.sku_id,
                name: n.display_name,
                url: n.product_details_page_url,
                oldPrice: t.old_price.price.amount,
                newPrice: t.new_price.price.amount,
                property: "changed"
            }: {}
        }
        var c;
        return {
            getData: function(e) {
                if (c = [], !e) return [];
                if (_.isEmpty(e.cart_alerts) || _.each(e.cart_alerts,
                        function(e) {
                            "PurchasePlanRemovedItems" == e.alert_data.alert_type && (c.PurchasePlanRemoved = r(e))
                        }), !_.isEmpty(e.line_items_alerts)) {
                    var a = e.line_items_alerts.filter(function(e) {
                            return "PriceChanged" == e.alert_data.alert_type
                        }),
                        o = e.line_items_alerts.filter(function(e) {
                            return "ItemRemoved" == e.alert_data.alert_type || "QuantityChanged" == e.alert_data.alert_type
                        });
                    a && a.length > 0 && _.each(a,
                        function(e) {
                            n(e)
                        }),
                    c && c.PriceChanged && c.PriceChanged.items.length > 0 && t(),
                    o && o.length > 0 && i(o)
                }
                return _.values(c)
            }
        }
    }]), checkoutApp.factory("TealiumService", [function() {
    "use strict";
    return {
        trackInputTags: function() {
            var e = "*[ecom-data-link_cat]";
            $(document).off("click", e),
                $(document).on("click", e,
                    function(e) {
                        if (window.utag) {
                            var t = this,
                                n = {};
                            _.forEach(t.attributes,
                                function(e, t) {
                                    0 == e.nodeName.indexOf("ecom-data-") && (n[e.nodeName.substr(10)] = e.nodeValue)
                                }),
                                utag.link(n)
                        }
                    })
        }
    }
}]), checkoutApp.factory("financingService", ["$rootScope", "CheckoutService", "constants", "$location", "errors", "$timeout",
    function(e, t, n, i, r, a) {
        var o = function(t) {
                var n = {},
                    i = {},
                    r = "PUT",
                    a = SCart.URL.EXISTING_PAYMENT_URL(e.shoppingCart.cart_id, !0);
                return i.billing_info = t.billing_info,
                    i.billing_record = {},
                    i.billing_record.billing_record_id = t.billing_record_id,
                    i.billing_record.account_provider = "ECom",
                    n.method = r,
                    n.payload = i,
                    n.url = a,
                    n.handler = "billingRecord",
                    n
            },
            s = function() {
                var t, n = {},
                    i = {};
                t = EcomApi.isTransformRequired ? "PUT": "POST";
                var r = SCart.URL.ADD_FINANCE_PLAN_URL(e.shoppingCart.cart_id, !0);
                return i.finance_plan_id = e.cartFinancingDetails.finance_plan_id,
                    n.method = t,
                    n.payload = i,
                    n.url = r,
                    n.handler = "financePlan",
                    n
            };
        e.setFinancingDetails = function(t) {
            function n(t, n) {
                n.finance_info && n.finance_info.financePlans && n.finance_info.financePlans.length > 0 && (t.financing = !0, t.financeDetails = n.finance_info, t.financeType = n.finance_info.financePlans[0].finance_plan_attributes && n.finance_info.financePlans[0].finance_plan_attributes.length > 0 ? n.finance_info.financePlans[0].finance_plan_attributes[0] : n.finance_info.financePlans[0].finance_plan_type, e.showEIPCart = e.showEIPCart || "EIP" == t.financeType, e.showDeferredCart = e.showDeferredCart || "Deferred" == t.financeType, e.showDeferredSpecialCart = e.showDeferredSpecialCart || "DeferredSpecial" == t.financeType)
            }
            if (e.isCartFinancible = !1, e.anyItemInCartFinancible = !1, e.isMinimumMet = !1, e.isEIPFinance = !1, e.isDeferredFinance = !1, e.isDeferred24Finance = !1, e.isCartFinancibleAndMinimumNotMet = !1, e.showEIPCart = !1, e.showDeferredCart = !1, e.showDeferredSpecialCart = !1, t.finance_plan) {
                var i = [];
                i.push(t.finance_plan),
                    t.applicable_finance_plans = i
            }
            e.isFinancingOn && (e.anyItemInCartFinancible = !0, t.applicable_finance_plans && (e.isCartFinancible = t.line_items.length > 0 && t.applicable_finance_plans.length > 0, _.forEach(t.applicable_finance_plans,
                function(n) {
                    e.cartFinancePlanType = n.finance_plan_attributes && n.finance_plan_attributes.length > 0 ? n.finance_plan_attributes[0] : n.finance_plan_type,
                        e.isCartFinancibleAndMinimumNotMet = e.isCartFinancible && t.cost.total.amount < n.minimum_amount,
                        e.amountToFinancing = e.isCartFinancibleAndMinimumNotMet ? (n.minimum_amount - t.cost.total.amount).toFixed(2) : 0,
                        e.isEIPFinance = !e.isCartFinancibleAndMinimumNotMet && e.isCartFinancible && "EIP" == e.cartFinancePlanType,
                        e.isDeferredFinance = !e.isCartFinancibleAndMinimumNotMet && e.isCartFinancible && "Deferred" == e.cartFinancePlanType,
                        e.isDeferred24Finance = !e.isCartFinancibleAndMinimumNotMet && e.isCartFinancible && "DeferredSpecial" == e.cartFinancePlanType,
                        e.isDeferredFinance ? (e.showDeferredCart = !0, e.dueToday = 0) : e.isDeferred24Finance ? e.dueToday = 0 : e.isEIPFinance && (e.dueToday = 0),
                        e.cartFinancingDetails = n
                })), _.forEach(t.line_items,
                function(e) {
                    _.find(t.line_item_finance_plans,
                        function(t) {
                            e.line_items && _.forEach(e.line_items,
                                function(e) {
                                    e.sku_id == t.sku_id && n(e, t)
                                }),
                            t.sku_id == e.sku_id && n(e, t)
                        })
                }), a(function() {
                e.$digest()
            }))
        },
            e.getCreditDetails = function(i) {
                e.isFinancingOn && e.shoppingCart && (e.financingDetails ? (e.financingStatus = e.financingDetails.application_status, e.isSufficientCredit = e.financingDetails.available_credit >= e.shoppingCart.cost.total.amount ? !0 : !1, ("A" != e.financingStatus || "payment" != i && "redirect" != i || !e.isSufficientCredit) && "payment" == i && e.isUpgradeSkuInCart && (e.deleteUpgradeItemsFromCart(), e.notOptedForSUP = !0), "A" == e.financingStatus && "payment" == i && e.applyFinancingToCart(), "redirect" == i && e.financingRedirect("cartInfo")) : t.getFinancingStatus(n.PAGECONTEXT.CART_FINANCE).then(function(t) {
                    _.forEach(t,
                        function(t) {
                            "EComProgram" == t.finance_program && (e.financingDetails = t, e.financingStatus = e.financingDetails.application_status, e.isSufficientCredit = e.financingDetails.available_credit >= e.shoppingCart.cost.total.amount ? !0 : !1)
                        }),
                    ("A" != e.financingStatus || "payment" != i && "redirect" == i || !e.isSufficientCredit) && "payment" == i && e.isUpgradeSkuInCart && (e.deleteUpgradeItemsFromCart(), e.notOptedForSUP = !0),
                    "A" == e.financingStatus && "payment" == i && e.applyFinancingToCart(),
                    "redirect" == i && e.financingRedirect("cartInfo")
                }).E401(function(t) {
                    e.promptReLogin(t)
                }).fail(function(t) {
                    e.$broadcast("cartStepError", r.FinancingDefaultError.title, r.FinancingDefaultError.description)
                }), a(function() {
                    e.$digest()
                }))
            },
            e.applyFinancingToCart = function() {
                e.isSufficientCredit && e.financingDetails && e.financingDetails.billing_info && e.financingDetails.billing_record_id && (e.billing = _.clone(e.financingDetails.billing_info), e.addPaymentCTA(e.billing, e.financingDetails, "financing", !1)),
                    a(function() {
                        e.$digest()
                    })
            },
            e.setFinancingPlan = function(i) {
                e.isFinancingOn && t.addFinancePlan(i, n.PAGECONTEXT.CART_FINANCE).then(function(t) {
                    e.refreshCart(t, !0),
                    e.isSingleClickCheckoutOn && e.setFinancingAsPayment()
                }).E401(function(t) {
                    e.promptReLogin(t)
                }).fail(function(t) {
                    e.$broadcast("cartStepError", r.FinancingDefaultError.title, r.FinancingDefaultError.description)
                })
            },
            e.financingRedirect = function(t) {
                window.isLogin() && ("A" == e.financingStatus || "P" == e.financingStatus ? (e.redirectPostLogin = n.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT, i.path("/cart-payment/finance")) : i.path("/cart-finance"), a(function() {
                    e.$digest()
                }))
            },
            e.isFinancingApproved = function() {
                return e.isFinancingOn && "A" == e.financingStatus && e.isSufficientCredit ? !0 : !1
            },
            e.isFinancingRejected = function() {
                return e.isFinancingOn && "D" == e.financingStatus ? !0 : !1
            },
            e.isFinancingDeferred = function() {
                return e.isFinancingOn && "P" == e.financingStatus ? !0 : !1
            },
            e.isFinancingApprovedWithoutLimit = function() {
                return e.isFinancingOn && "A" == e.financingStatus && !e.isSufficientCredit ? !0 : !1
            },
            e.onPaymentComplete = function() {
                e.paymentMode = "view",
                e.isSingleClickCheckoutOn && (e.paymentMode = "edit"),
                    e.paymentSource = "",
                e.selectedAddress && !e.ischeckoutv3ui && (e.selectedAddress = e.addedPayment.billing_info),
                    e.$broadcast("contactInfoUpdated"),
                ("view" != e.shippingMode || e.shippingSameAsBilling) && (e.shippingMode = "edit"),
                    e.$digest(),
                "view" == e.shippingMode && "view" == e.paymentMode && setTimeout(function() {
                        $("html, body").animate({
                                scrollTop: $("#_place_order").offset().top
                            },
                            "slow")
                    },
                    200)
            },
            e.addPaymentCTA = function(i, a, c, l) {
                if ("financing" == c && e.isFinancingOn) {
                    var d = [o(a), s()];
                    t.shoppingCartCTA(d, n.PAGECONTEXT.CART_FINANCE).then(function(t) {
                        e.addedPayment = t[0].payment,
                            e.onPaymentComplete(),
                            e.refreshCart(t[1], !0),
                        e.ischeckoutv3ui && e.applyShippingAndPayment(n.CHECKOUT_SECTION.SHIPPING)
                    }).billingRecord(function(t) {
                        var n = JSON.parse(t.responseText);
                        401 == n.statusCode ? (n.status = 401, e.promptReLogin(n)) : e.$broadcast("cartStepError", r.FinancingDefaultError.title, r.FinancingDefaultError.description)
                    }).financePlan(function(t) {
                        var n = JSON.parse(t.responseText);
                        401 == n.statusCode ? (n.status = 401, e.promptReLogin(n)) : e.$broadcast("cartStepError", r.FinancingDefaultError.title, r.FinancingDefaultError.description)
                    }).fail(function(t) {
                        e.$broadcast("cartStepError", r.FinancingDefaultError.title, r.FinancingDefaultError.description)
                    })
                }
            }
    }]), checkoutApp.factory("GnbService", ["$rootScope",
    function(e) {
        "use strict";
        return {
            setLayout: function(t) {
                var n = this,
                    i = "?";
                return e.ischeckoutv3ui ? $(window).width() < 767 && $(".os-action-holder.os-total-fixed-at-bottom-in-mobile").hide() : $(".os-total-fixed-at-bottom-in-mobile.os-cart-payment-options-holder.for-mobile").hide(),
                e.payoverTimeSelected && (i += "checkout=payOverTime"),
                    $(document).trigger("onPromptLogin", [, i]),
                    $(".gnb-login-container__group-image").css("display", "none"),
                    $(".no-activation").remove(),
                    $(".gnb-login-container__group-image").removeClass("trade-in-login-banner"),
                    "financing" == t ? void n.setFinancingLayout() : e.isTradeinCart ? void n.setTradeInLayout() : e.isTMOBogoOffer(e.cartItems) ? void n.setTMOBogoLayout() : void(e.premiumCareSubscriptionCart() ? ($(".gnb-login-inner__left__title--signup").text("Please log into your Samsung account"), $(".gnb-login-inner__left__title").text("Please log into your Samsung account"), e.isWaterFilterSkuInCart() || setTimeout(function() {
                        var t = $(".gnb-login-inner__left__subtitle", $(".gnb-login-container .sign-in-phase")),
                            n = 1 == t.length ? t: t[0];
                        $(n).text(""),
                            $(".gnb-login-inner__left__link", $(".gnb-login-container .sign-in-phase")).append(e.cartHasSimSkus() ? "<p class=no-activation ><a href=javascript:$(document).trigger('noPremiumCareAndActivation');void(0);>Continue without premium care & activation</a></p>": "<p class=no-activation ><a href=javascript:$(document).trigger('noPremiumCare');void(0);>Continue without premium care</a></p>")
                    })) : e.logInForCarrierActivation ? ($(".gnb-login-inner__left__title--signup").text("Please log into your Samsung account"), $(".gnb-login-inner__left__title").text("Please log into your Samsung account"), e.isWaterFilterSkuInCart() || setTimeout(function() {
                            var t = $(".gnb-login-inner__left__subtitle", $(".gnb-login-container .sign-in-phase")),
                                n = 1 == t.length ? t: t[0];
                            $(n).text("Activation with Samsung requires you to log into Samsung account."),
                                $(".gnb-login-inner__left__link", $(".gnb-login-container .sign-in-phase")).append(e.cartHasSimSkus() ? "<p class=no-activation ><a href=javascript:$(document).trigger('noActivation');void(0);>Continue without carrier activation</a><p class=no-activation style=font-weight:400;font-size:14px;line-height:normal>(SIM Card may be removed from your cart)</p></p>": "<p class=no-activation ><a href=javascript:$(document).trigger('noActivation');void(0);>Continue without carrier activation</a></p>")
                        },
                        200)) : e.isWaterFilterSkuInCart() && n.setGenericLoginLayout())
            },
            setTradeInLayout: function() {
                setTimeout(function() {
                        $(".gnb-login-container__group-image").css("display", "block"),
                            $(".gnb-login-container__group-image").addClass("trade-in-login-banner"),
                            $(".gnb-b2c-login-section .gnb-login-container__group-image__first").text("");
                        var e = $(".gnb-login-inner__left__subtitle", $(".gnb-login-container .sign-up-phase")),
                            t = 1 == e.length ? e: e[0];
                        $(t).text("Sign up for a Samsung account today and gain access to trade-in,Samsung financing,world class customer support,and a broad range of exclusive offers made just for you ."),
                            $(".gnb-login-inner__left__title--signup").text("Your account for everything samsung."),
                            $(".gnb-login-inner__left__title").text("Login to your Samsung account  .");
                        var n = $(".gnb-login-inner__left__subtitle", $(".gnb-login-container .sign-in-phase")),
                            i = 1 == n.length ? n: n[0];
                        $(i).text("Login here to take advantage of the [Samsung Trade-In program]."),
                            $(".gnb-login-container__group-image__second").text("")
                    },
                    200)
            },
            setFinancingLayout: function() {
                e.isUpgradeSkuInCart ? setTimeout(function() {
                        var e = $(".gnb-login-inner__left__subtitle", $(".gnb-login-container .sign-in-phase")),
                            t = 1 == e.length ? e: e[0];
                        $(t).text("Login here to take advantage of the Samsung Upgrade Program."),
                            $(".gnb-login-inner__left__title--signup").text("Login into your Samsung account."),
                            $(".gnb-login-inner__left__title").text("Login into your Samsung account.")
                    },
                    200) : setTimeout(function() {
                        $(".gnb-login-container__group-image").css("display", "block"),
                            $(".gnb-b2c-login-section .gnb-login-container__group-image__first").text("Get the galaxy you love.");
                        var e = $(".gnb-login-inner__left__subtitle", $(".gnb-login-container .sign-in-phase")),
                            t = 1 == e.length ? e: e[0];
                        $(t).text("In order to apply for Samsung financing and pay over time, you will need to log in or create a Samsung account."),
                            $(".gnb-login-inner__left__title--signup").text("Get the products you love now and pay over time"),
                            $(".gnb-login-inner__left__title").text("Get the products you love now and pay over time"),
                            $(".gnb-login-container__group-image__second").text("Now yours with Samsung financing")
                    },
                    200)
            },
            setTMOBogoLayout: function() {
                setTimeout(function() {
                        $(".gnb-login-inner__left__title--signup").text("Please log into your Samsung account"),
                            $(".gnb-login-inner__left__title").text("Please log into your Samsung account");
                        var e = $(".gnb-login-inner__left__subtitle", $(".gnb-login-container .sign-in-phase")),
                            t = 1 == e.length ? e: e[0];
                        $(t).text("Activation with Samsung requires you to log into Samsung account."),
                            $(".gnb-login-inner__left__link a").text("Create your Samsung account now")
                    },
                    200)
            },
            setEPPRedirectLayout: function() {
                setTimeout(function() {
                        var e = $(".gnb-login-inner__left__subtitle", $(".gnb-login-container .sign-in-phase")),
                            t = 1 == e.length ? e: e[0];
                        $(t).text("Please login with your Samsung Account to view special pricing.")
                    },
                    200)
            },
            setSessionExpiryLayout: function() {
                setTimeout(function() {
                        var e = $(".gnb-login-inner__left__subtitle", $(".gnb-login-container .sign-in-phase")),
                            t = 1 == e.length ? e: e[0];
                        $(t).text("Your session has expired. Please login to continue.")
                    },
                    200)
            },
            setGenericLoginLayout: function() {
                setTimeout(function() {
                        $(".gnb-login-inner__left__title--signup").text("Please log into your Samsung account"),
                            $(".gnb-login-inner__left__title").text("Please log into your Samsung account"),
                            $(".gnb-login-inner__left__subtitle", $(".gnb-login-container .sign-in-phase")).text(""),
                            $(".gnb-login-inner__left__link a").text("Create your Samsung account now")
                    },
                    200)
            }
        }
    }]), checkoutApp.service("ModalService", ["$modal",
    function(e) {
        var t = function(e, t, n, i, r) {
            e.modalData = n,
                e.modalFunc = i,
                e.name = r,
                e.ok = function(e) {
                    t.close(e),
                    window.utag && utag.link({
                        link_cat: "accept terms and conditions",
                        link_id: "finance_app_accept",
                        link_meta: "link_name:accept",
                        link_position: "finance application>accept terms and conditions"
                    }),
                        setTimeout(function() {
                                $("html, body").animate({
                                        scrollTop: $("#userTermsSection").offset().top
                                    },
                                    "slow")
                            },
                            200),
                        $("ul.slick-dots li.slick-active").next().trigger("click")
                },
                e.dismiss = function(e) {
                    t.dismiss(e),
                    window.utag && utag.link({
                        link_cat: "accept terms and conditions",
                        link_id: "finance_app_close",
                        link_meta: "link_name:close",
                        link_position: "finance application>accept terms and conditions"
                    }),
                        setTimeout(function() {
                                $("html, body").animate({
                                        scrollTop: $("#userTermsSection").offset().top
                                    },
                                    "slow")
                            },
                            200)
                },
                e.download = function() {
                    e.modalFunc && e.modalFunc.download && e.modalFunc.download()
                },
                e.selection = function(t) {
                    e.modalData.selection = t
                },
                e.$on("$routeChangeSuccess",
                    function() {
                        t.dismiss()
                    }),
                e.$on("closeModal",
                    function() {
                        t.dismiss()
                    })
        };
        return t.$inject = ["$scope", "$modalInstance", "modalData", "modalFunc", "modalClass"],
            {
                open: function(n, i, r, a, o, s) {
                    var c = e.open({
                        templateUrl: n,
                        template: s,
                        controller: t,
                        size: i,
                        resolve: {
                            modalData: function() {
                                return r
                            },
                            modalFunc: function() {
                                return a
                            },
                            modalClass: function() {
                                return o
                            }
                        }
                    });
                    return c.result
                }
            }
    }]), checkoutApp.directive("ScionModal", ["$window",
    function(e) {
        return {
            scope: {
                show: "=",
                name: "=",
                nextStep: "=",
                modalData: "=",
                modalFunc: "=",
                modalTemp: "="
            },
            controller: function() {},
            restrict: "A",
            templateUrl: modalTemp,
            link: function(e, t, n, i) {
                e.dismiss = function(t) {
                    e.show = !1
                },
                    e.ok = function(t) {
                        e.show = !1,
                            e.nextStep(t)
                    }
            }
        }
    }]), checkoutApp.controller("CartInfoCtrl", ["CheckoutService", "financingService", "GnbService", "constants", "errors", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "updateUtilities", "$timeout",
    function(e, t, n, i, r, a, o, s, c, l, d, p, u, f) {
        a.shoppingCart = {},
            a.line_items = [],
            o.cardInfo = {},
            o.contact = o.contact || {},
            o.signin = {},
            o.address = {},
            o.isGuest = !0,
            o.cardOption = !0,
            o.sameaddress = !0,
            o.newsletter = !0,
            o.removedItem = null,
            o.isSubscriptionAgreed = null,
            o.isPCTermsExist = !1,
            o.removedItemIndex = null,
            o.isTagFired,
            o.relevance = {},
            o.relevance.items = [],
            o.carrierActivationConsentRequired = !o.isLoggedIn,
        $.cookie("finEnabled") && (o.isFinancingOn = !0),
            o.isFinancingOn = !0,
            a.changeHeader = function() {
                $("#checkout-header").siblings().show(),
                    $("#checkout-header").remove(),
                    $(".gnb-b2c-icons").show(),
                    window.isMobile() ? $(".gnb-b2c-promo-wrapper").hide() : $(".gnb-b2c-promo-wrapper").show()
            },
            a.changeHeader(),
            a.applyURLPromo = function() {
                var t = p.search(),
                    n = t.promocode;
                n && n.length > 0 ? e.applyPromo(n, i.PAGECONTEXT.CART_INFO).then(function(e) {
                    o.resetQuery("promocode"),
                        o.$digest(),
                        o.$broadcast("refreshCart", e, !1)
                }).E401(function(e) {
                    o.promptReLogin(e)
                }).E409(function(e) {
                    o.resetQuery("promocode"),
                    e.responseText && o.isJsonString(e.responseText) && (e = JSON.parse(e.responseText)),
                        r[e.error] ? o.$broadcast("cartStepError", r[e.error].title, r[e.error].description) : o.$broadcast("cartStepError", r.defaultError.title, r.defaultError.description)
                }).fail(function(e) {
                    e.responseText && o.isJsonString(e.responseText) && (e = JSON.parse(e.responseText)),
                        r[e.error] ? o.$broadcast("cartStepError", r[e.error].title, r[e.error].description) : o.$broadcast("cartStepError", r.defaultError.title, r.defaultError.description)
                }) : o.resetQuery("promocode")
            };
        var h = function(t) {
            e.getV3PromotionsPrice(t).then(function(e) {
                e && e.length > 0 && (a.promotionsPrice = e),
                    g()
            })
        };
        o.computeUpgradePriceForCrossSell = function(e) {
            var t = [],
                n = o.shoppingCart;
            return o.is_sup_cart ? (n && n.cost && n.cost.total && (o.upgradeCost = n.cost.total.amount), void(n && n.applicable_finance_plans && n.applicable_finance_plans.length > 0 && n.applicable_finance_plans[0].eip_finance_plan && (o.upgradeMonthlyCost = n.applicable_finance_plans[0].eip_finance_plan.monthly_payment))) : (e && e.offers && e.offers.length > 0 && _.forEach(e.offers,
                function(n) {
                    o.isUpgradeOffer(n) && (t.push(e), e.line_items && e.line_items.length > 0 && _.forEach(e.line_items,
                        function(e) {
                            e.attributes.is_upgrade_eligible && t.push(e)
                        }))
                }), t && t.length > 0 && o.cartItems && o.cartItems.length > 0 && _.forEach(o.cartItems,
                function(n) { ! n.parentItem && (n.line_item_id != e.line_item_id || n.parentItem && n.parentItem.line_item_id == e.line_item_id) && n.attributes.product_family && "MOBILE-ACCESSORIES" == n.attributes.product_family.toUpperCase() && n.attributes.is_upgrade_eligible && t.push(e)
                }), void(t && t.length > 0 && o.shoppingCart && o.shoppingCart.line_item_finance_plans && o.shoppingCart.line_item_finance_plans.length > 0 && (e.upgradeMonthlyCost = 0, e.upgradeCost = 0, _.forEach(t,
                function(t) {
                    o.isTradeInSku(t) ? e.upgradeCost -= t.line_item_cost.price.amount: e.upgradeCost += t.line_item_cost.price.amount,
                        _.forEach(o.shoppingCart.line_item_finance_plans,
                            function(n) {
                                n.line_item_id == t.line_item_id && t.attributes.is_upgrade_eligible && n.finance_info && n.finance_info.financePlans && n.finance_info.financePlans.length > 0 && n.finance_info.financePlans[0] && n.finance_info.financePlans[0].eip_finance_plan && (e.upgradeMonthlyCost += n.finance_info.financePlans[0].eip_finance_plan.monthly_payment)
                            })
                }))))
        };
        var g = function() {
                a.promotionsPrice && a.productCatalog && (_.forEach(a.promotionsPrice,
                    function(e) {
                        var t = {};
                        t.listPriceWithQuantity = e.list_price,
                            t.salePriceWithQuantity = e.sale_price,
                            t.sku = e.sku;
                        var n = _.find(a.catalogCollection,
                            function(t) {
                                return t.sku == e.sku
                            });
                        n && (n.pricing = t)
                    }), _.forEach(o.cartItems,
                    function(e) {
                        if (a.lineItemOffer && a.lineItemOffer[e.sku_id]) {
                            var t = [],
                                n = [];
                            _.forEach(a.lineItemOffer[e.sku_id],
                                function(n) {
                                    var i = _.find(a.catalogCollection,
                                        function(e) {
                                            return e.sku == n
                                        }),
                                        r = _.pluck(e.line_items, "sku_id");
                                    _.contains(r, i.sku) || t.push(i)
                                }),
                                e.offers = _.uniq(t),
                            a.lineItemOffer[e.sku_id].simOffers && _.forEach(a.lineItemOffer[e.sku_id].simOffers,
                                function(t) {
                                    var i = _.find(a.catalogCollection,
                                        function(e) {
                                            return e.sku == t
                                        }),
                                        r = _.pluck(e.line_items, "sku_id");
                                    0 == _.intersection(r, o.simSkus).length && n.push(i)
                                }),
                                e.simOffers = n
                        }
                    }), o.$digest())
            },
            m = function(t) {
                e.getV3ProductCatalog(t).then(function(e) {
                    e && e.length > 0 && (a.productCatalog = e, a.catalogCollection = [], _.forEach(a.productCatalog,
                        function(e) {
                            var t = {};
                            e.images && e.images.large_image && e.images.large_image.url && (t.productImage = e.images.large_image.url),
                            e.images && e.images.small_image && e.images.small_image.url && (t.thumbnailImage = e.images.small_image.url),
                                t.displayName = e.product_display_name,
                            e.urls && e.urls.consumer_url && (t.pdpUrl = e.urls.consumer_url),
                                t.extRefId = e.sku,
                                t.sku = e.sku,
                                a.catalogCollection.push(t)
                        }), g())
                })
            },
            y = function(t) {
                a.offersSkus = [],
                    a.lineItemOffer = {},
                    e.getV3Promotions(t, i.PROMOTIONS_LIST).then(function(e) {
                        e && e.length > 0 && (_.forEach(e,
                            function(e) {
                                for (var t in e) if (e.hasOwnProperty(t)) {
                                    var n = e[t].filter(function(e) {
                                        return "CandyRackShoppingCart" == e.type || "ActivationSamsung" == e.type
                                    });
                                    n && n.length > 0 && (a.lineItemOffer[t] = [], a.lineItemOffer[t].simOffers = [], _.forEach(n,
                                        function(e) {
                                            _.forEach(e.discounted_skus,
                                                function(n) {
                                                    _.forEach(n.groups,
                                                        function(n) {
                                                            a.offersSkus.push.apply(a.offersSkus, n.skus),
                                                                "ActivationSamsung" == e.type ? a.lineItemOffer[t].simOffers.push.apply(a.lineItemOffer[t].simOffers, n.skus) : a.lineItemOffer[t].push.apply(a.lineItemOffer[t], n.skus)
                                                        })
                                                })
                                        }))
                                }
                            }), a.offersSkus = _.uniq(a.offersSkus), a.offersSkus && a.offersSkus.length > 0 && (h(a.offersSkus), m(a.offersSkus)), window.utag && utag.link({
                            product_cross_sell_flag: a.offersSkus.length ? "yes": "no",
                            product_cross_sell_sku: a.offersSkus
                        }))
                    })
            },
            v = function(t) {
                o.fetchCartRecommendations && o.$broadcast("fetchCartRecommendations"),
                    e.getPromotions(t).then(function(e) {
                        if (e && e.length > 0) {
                            var t = _.pluck(o.cartItems, "sku_id");
                            t.forEach(function(t) {
                                var n = _.find(e,
                                    function(e) {
                                        return e.sku == t
                                    }),
                                    i = _.find(o.cartItems,
                                        function(e) {
                                            return e.sku_id == t
                                        });
                                if (i.relatedProducts = n ? n.relatedProductsDetails: void 0, !EcomApi.isTransformRequired && n && n.pointOfPromotions) {
                                    var r = n.pointOfPromotions.filter(function(e) {
                                            return "CandyRack_ShoppingCart" == e.popId
                                        }),
                                        a = n.pointOfPromotions.filter(function(e) {
                                            return "Activation_Samsung" == e.popId
                                        });
                                    r && r.length > 0 && (o.offers.push({
                                        skuId: t,
                                        offers: r
                                    }), o.mapOffersToCartItem(t, r, !1)),
                                    a && a.length > 0 && o.mapOffersToCartItem(t, a, !0)
                                }
                            }),
                            o.fetchCartRecommendations || o.$broadcast("accessoriesAvailable"),
                                a.crossSellSkus = _.uniq(o.crossSellSkus,
                                    function(e) {
                                        return e.sku
                                    }),
                            window.utag && utag.link({
                                product_cross_sell_flag: a.crossSellSkus.length ? "yes": "no",
                                product_cross_sell_sku: a.crossSellSkus
                            })
                        }
                    })
            };
        a.addSubLineItem = function(t, n) {
            e.addSubLineItem(t.line_item_id, n, 1, i.PAGECONTEXT.CART_INFO).then(function(e) {
                a.onAddToCartComplete(e)
            }).fail(function() {
                o.$broadcast("cartStepError", r.AddToCartError.title, r.AddToCartError.description)
            })
        },
            a.onAddToCartComplete = function(e) {
                var t = window.Checkout.groupItemsFromQueryString();
                if (t && t.length > 0 && t[0] && t[0].lineitems && t[0].lineitems.length > 0) {
                    var n = _.pluck(t[0].lineitems, "skuId");
                    o.isSubscriptionAgreed = _.find(n,
                        function(e) {
                            return o.premiumCareSubscriptionOffer([], e)
                        })
                }
                return o.resetQuery("addItem[]"),
                    o.resetQuery("addChildItem[]"),
                    o.resetQuery("abandonedCartID"),
                    o.resetQuery("forceLogIn"),
                    o.isEppRedirect() ? (window.location.href = window.SCart.URL.CHECKOUT_URL(), void o.disableOrderSummary()) : (a.applyURLPromo(), void o.$broadcast("refreshCart", e, !0, "addItems"))
            },
            a.hasChildItem = function() {
                return a.sim && a.sim.length > 0 && a.phone && a.phone.length > 0
            },
            a.findParentLineItem = function(e, t) {
                return _.find(e.line_items,
                    function(e) {
                        return e.sku_id == t
                    })
            };
        var C = function() {
                if (!window.Checkout.addToCartInHeader) {
                    var t = window.Checkout.groupItemsFromQueryString();
                    t.length > 0 && (window.Checkout.loadCart = e.addItems(t, i.PAGECONTEXT.CART_INFO))
                }
                window.Checkout.loadCart && window.Checkout.loadCart.then(function(e) {
                    if ($(".prefetch_spinner_container").hide(), a.hasChildItem()) {
                        if (e && e.line_items && e.line_items.length > 0) {
                            var t = a.findParentLineItem(e, a.phone);
                            t && a.addSubLineItem(t, a.sim)
                        }
                    } else a.onAddToCartComplete(e)
                }).E400(function(e) {
                    if ($(".prefetch_spinner_container").hide(), A(), o.latestPurchaseflow(e), e && o.isJsonString(e.responseText)) {
                        var t = JSON.parse(e.responseText).error;
                        if (r[t]) return void o.$broadcast("cartStepError", r[t].title, r[t].description)
                    }
                    o.$broadcast("cartStepError", r.AddToCartError.title, r.AddToCartError.description)
                }).E401(function(e) {
                    $(".prefetch_spinner_container").hide(),
                        A(),
                        o.latestPurchaseflow(e),
                        o.promptReLogin(e)
                }).E404(function(e) {
                    $(".prefetch_spinner_container").hide(),
                        A(),
                        o.latestPurchaseflow(e),
                        o.$broadcast("cartStepError", r.AddToCartError.title, r.AddToCartError.description)
                }).E409(function(e) {
                    $(".prefetch_spinner_container").hide(),
                        A(),
                        o.latestPurchaseflow(e),
                        e = JSON.parse(e.responseText),
                        o.resetQuery(),
                        a.renderCurrentCartOnError(),
                    e.error || (e = JSON.parse(e.message)),
                        r[e.error] ? o.$broadcast("cartStepError", r[e.error].title, r[e.error].description) : "InventoryUnavailable" == e.error ? o.$broadcast("cartStepError", r.InventoryUnavailableError.title, r.InventoryUnavailableError.description) : o.$broadcast("cartStepError", r.AddToCartError.title, r.AddToCartError.description)
                }).E500(function(e) {
                    $(".prefetch_spinner_container").hide(),
                        A(),
                        o.latestPurchaseflow(e),
                        o.resetQuery("addItem[]"),
                        o.resetQuery("addChildItem[]"),
                        o.resetQuery("abandonedCartID"),
                        o.resetQuery("forceLogIn"),
                        a.renderCurrentCartOnError(),
                        u.displayAddToCartErrorMessage(e)
                }).E502(function() {
                    $(".prefetch_spinner_container").hide(),
                        A(),
                        o.$broadcast("cartStepError", r.defaultError.title, r.defaultError.description)
                }).fail(function(e) {
                    $(".prefetch_spinner_container").hide(),
                        A(),
                        o.latestPurchaseflow(e),
                        o.resetQuery("addItem[]"),
                        o.resetQuery("abandonedCartID"),
                        o.resetQuery("forceLogIn"),
                        a.renderCurrentCartOnError(),
                        o.$broadcast("cartStepError", r.AddToCartError.title, r.AddToCartError.description)
                })
            },
            S = function(t) {
                var n = t.externalRefID;
                n && (window.Checkout.addToCartInHeader || (window.Checkout.loadCart = e.addItem(n, 1, i.PAGECONTEXT.CART_INFO)), window.Checkout.loadCart.then(function(r) {
                    var s = b(r.line_items, n),
                        c = I(s, t);
                    e.addAssurantInfo(c, s.line_item_id, i.PAGECONTEXT.CART_INFO).then(function(e) {
                        $(".prefetch_spinner_container").hide(),
                            a.applyURLPromo(),
                            o.resetQuery(),
                            o.$broadcast("refreshCart", e, !0)
                    }).E400(function() {
                        $(".prefetch_spinner_container").hide(),
                            o.resetQuery(),
                            o.$broadcast("refreshCart", r, !0)
                    }).E404(function() {
                        $(".prefetch_spinner_container").hide(),
                            o.resetQuery(),
                            o.$broadcast("refreshCart", r, !0)
                    }).E500(function(e) {
                        $(".prefetch_spinner_container").hide(),
                            o.resetQuery(),
                            u.displayAddToCartErrorMessage(e)
                    }).E502(function() {
                        $(".prefetch_spinner_container").hide(),
                            o.resetQuery(),
                            o.$broadcast("refreshCart", r, !0)
                    }).E503(function() {
                        $(".prefetch_spinner_container").hide(),
                            o.resetQuery(),
                            o.$broadcast("refreshCart", r, !0)
                    }).E504(function() {
                        $(".prefetch_spinner_container").hide(),
                            o.resetQuery(),
                            o.$broadcast("refreshCart", r, !0)
                    }).fail(function() {
                        $(".prefetch_spinner_container").hide(),
                            o.resetQuery(),
                            o.$broadcast("refreshCart", r, !0)
                    })
                }).fail(function(e) {
                    $(".prefetch_spinner_container").hide(),
                        o.latestPurchaseflow(e),
                        o.$broadcast("cartStepError", "The item could not be added to the cart", "An error occurred. Please try after some time. Sorry for the inconvenience")
                }))
            },
            b = function(e, t) {
                return _.findWhere(e, {
                    sku_id: t
                })
            };
        a.cartPageActions = function(t) {
            var n = p.search();
            n.abandonedCartID && n.abandonedCartID.length > 0 && (o.abandonedCartID = n.abandonedCartID),
                n["addItem[]"] && n["addItem[]"].length > 0 ? C() : n.externalRefID ? S(n) : (window.Checkout.loadCart || (n.abandonedCartID && n.abandonedCartID.length > 0 && !o.forceLogIn() ? window.Checkout.loadCart = window.Checkout.shoppingCartService.replaceCart(n.abandonedCartID, i.PAGECONTEXT.CART_INFO) : n.abandonedCartID || t || (window.Checkout.loadCart = window.Checkout.shoppingCartService.getCart(i.PAGECONTEXT.CART_INFO))), window.Checkout.loadCart && window.Checkout.loadCart.then(function(e) {
                    $(".prefetch_spinner_container").hide(),
                        a.applyURLPromo(),
                        o.$broadcast("refreshCart", e, !0, "getCart"),
                    n.error && (o.$broadcast("cartStepError", r[n.error].title, r[n.error].description), o.resetQuery("error")),
                        o.resetQuery("abandonedCartID"),
                        o.resetQuery("forceLogIn")
                }).E401(function(e) {
                    $(".prefetch_spinner_container").hide(),
                        A(),
                        o.promptReLogin(e)
                }).fail(function() {
                    $(".prefetch_spinner_container").hide(),
                        A(),
                        o.$broadcast("cartStepError", "We are unable to process your request at this time.", "Please try after sometime. Sorry for the inconvenience.")
                })),
                window.Checkout.addToCartInHeader = !1,
                window.Checkout.loadCart = null;
            var s = new Date;
            n.forceGNBLogin && n.forceGNBLogin.length > 0 && ("true" == n.forceGNBLogin ? $.cookie("forceGNBLogin", "true", {
                domain: ".samsung.com",
                path: "/"
            }) : "false" == n.forceGNBLogin && (s.setDate(s.getDate() - 1), $.cookie("forceGNBLogin", "true", {
                domain: ".samsung.com",
                path: "/",
                expires: s
            })), o.resetQuery("forceGNBLogin")),
            "true" == $.cookie("forceGNBLogin") && (s.setDate(s.getDate() - 1), $.cookie("forceGNBLogin", "true", {
                domain: ".samsung.com",
                path: "/",
                expires: s
            })),
            n.isMobileApp && "true" == n.isMobileApp && ($.cookie("isMobileApp", "true", {
                domain: ".samsung.com",
                path: "/"
            }), o.resetQuery("isMobileApp"), o.alterForMobileApp()),
            n.activate && n.activate.length > 0 && "true" == n.activate && (o.carrierActivationConsentRequired = !1, o.oneClickActivationSelected = !0),
            window.isLogin() && o.getCreditDetails(),
            o.isLoggedIn && e.getUserProfile(!0).then(function(e) {
                e = JSON.parse(e),
                e && e.emailaddress && (o.contact || (o.contact = {}), o.contact.email = e.emailaddress, o.contact.phone = e.cellPhone || e.telePhone || e.workPhone, o.userEmail = e.emailaddress, o.billing || (o.billing = {}), o.billing.email = o.contact.email, o.billing.phone = o.contact.phone, o.$digest())
            })
        },
            a.initfunc = function() {
                var t = $.cookie("remoteId");
                t && "undefined" != t ? (window.Checkout.authenticateToken || (window.Checkout.authenticateToken = e.validateAuthToken(t)), window.Checkout.authenticateToken.then(function(e) {
                    $(".prefetch_spinner_container").hide();
                    var t = JSON.parse(e);
                    "valid" != t.status ? (o.checkoutLoginMessage = r.ReLogin.title, window.SCart.sessionIdValid = !1, f(function() {
                        o.$digest()
                    })) : a.cartPageActions()
                }).fail(function() {
                    $(".prefetch_spinner_container").hide(),
                        o.checkoutLoginMessage = r.ReLogin.title,
                        window.SCart.sessionIdValid = !1,
                        f(function() {
                            o.$digest()
                        })
                }), window.Checkout.authenticateToken = null) : o.forceLogIn() || a.cartPageActions(),
                o.submitAlert && (o.setUserAlerts(o.submitAlert), o.$digest(), o.scrollAlert(), o.submitAlert = null),
                o.forceLogIn() && o.showGlobalLogin()
            };
        var E = function(e) {
                return 10 == e.length ? "(" + e.substr(0, 3) + ")" + e.substr(3, 3) + "-" + e.substr(6, 4) : e
            },
            I = function(e, t) {
                return {
                    model: t.espCovModel,
                    product_price: "" + e.line_item_cost.price.amount,
                    product_sku: t.externalRefID,
                    product_purchase_date: (new Date).toUTCString(),
                    serial_number: t.espSerialNumber,
                    mobile_number: -1 == t.espMobileNumber.indexOf("(") ? E(t.espMobileNumber) : t.espMobileNumber,
                    carrier: t.espCarrier,
                    color: t.espColor,
                    memory_size: t.espMemorySize
                }
            };
        a.renderCurrentCartOnError = function() {
            var t = e.getCurrentCart();
            t && o.$broadcast("refreshCart", t, !0)
        },
            a.setMiniCartCount = function() {
                if (o.cartItems) {
                    var e = 0;
                    _.forEach(o.cartItems,
                        function(t) {
                            e += t.quantity
                        }),
                        $(".cart-basket").text(e > 0 ? e: ""),
                        o.isIE() ? ($(".gnb-b2c-icons-cart a svg").remove(), $(".gnb-b2c-icons-cart a").prepend('<svg viewBox="0 0 100 100" id="cart-open"><circle cx="28" cy="90" r="10"/><circle cx="86" cy="90" r="10"/><path d="M86 14v42H28V13.86C28 6.205 21.794 0 14.14 0H0v14h14v42c0 7.732 6.268 14 14 14h58c7.732 0 14-6.268 14-14V14H86z"/></svg>')) : $(".gnb-b2c-icons-cart a svg use").attr("xlink:href", "/us/resources/navigation/assets/images/sprite.symbol.svg#cart-open")
                }
            },
            a.$on("refreshCart",
                function(e, t, n, i) {
                    if (o.refreshCart(t, n, i), a.setMiniCartCount(), n && !o.isEmptyCartItem(t)) {
                        o.offers = [];
                        var r = _.pluck(t.line_items, "sku_id");
                        r && r.length > 0 && v(r),
                        EcomApi.isTransformRequired && y(_.uniq(r))
                    } else o.mapOffers();
                    A()
                }),
        window.isLogin() && o.getCreditDetails(),
            a.$on("onUserLogin",
                function() {
                    a.cartPageActions(!0),
                        o.getCreditDetails()
                });
        var A = function() {
                o.registerUtag(T)
            },
            T = function() {
                o.$broadcast("saveImpression", o.shoppingCart, "new ecom step1|view cart")
            }
    }]), checkoutApp.controller("CartItemsCtrl", ["CheckoutService", "constants", "errors", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "updateUtilities",
    function(e, t, n, i, r, a, o, s, c, l, d) {
        i.init = function() {},
            i.quantities = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
            i.undo = function() {
                $(".uc-product-removed").hide("slow")
            };
        var p = $(".uc-samsung-protection-holder").outerHeight();
        i.showDetails = function(e, t) {
            $("#spp" + e + t).addClass("active"),
                $("#spp" + e + t).parents(".uc-spp-terms").find(".info-box").css({
                    top: "55px",
                    opacity: "0",
                    display: "block"
                }),
                $("#spp" + e + t).parents(".uc-spp-terms").find(".info-box").animate({
                        top: "15px",
                        opacity: 1
                    },
                    350)
        },
            i.hideDetails = function(e, t) {
                $("#spp" + e + t).removeClass("active"),
                    $("#spp" + e + t).parents(".uc-spp-terms").find(".info-box").animate({
                            top: "55px",
                            opacity: 0
                        },
                        350,
                        function() {
                            $("#spp" + e + t).parents(".uc-spp-terms").find(".info-box").css({
                                display: "none"
                            })
                        })
            },
            i.toggleSubscription = function(e) {
                "none" == $("#text" + e).css("display") ? ($("#more" + e).css({
                    display: "none"
                }), $("#text" + e).css({
                    display: "inline"
                })) : ($("#text" + e).css({
                    display: "none"
                }), $("#more" + e).css({
                    display: "inline"
                }))
            },
            i.toggleDetails = function(e, t) {
                "none" == $("#spp" + e + t).parents(".uc-spp-terms").find(".info-box").css("display") ? (i.showDetails(e, t), i.hideSiblings(e, t)) : i.hideDetails(e, t)
            },
            i.hideSiblings = function(e, t) {
                $("#spp" + e + t).parent().siblings(".uc-spp-terms").find(".info-box").css({
                    display: "none"
                })
            },
            i.getDetails = function(e, t) {
                if (null == p && (p = $(".uc-samsung-protection-holder").outerHeight()), $(window).width() < 768) {
                    var n = 0;
                    if ( - 1 == $("#spp" + e + t).attr("class").indexOf("active")) {
                        $(".uc-samsung-protection-holder").find(".info-box").each(function() {
                            $("#spp" + e + t).is(":visible") && $("#spp" + e + t).slideToggle()
                        }),
                            $(".uc-spp-terms").find(".icon-info").removeClass("active");
                        var i = $("#spp" + e + t).parents(".uc-spp-terms").find(".info-box").outerHeight();
                        n = p + i,
                            $("#spp" + e + t).addClass("active"),
                            $("#spp" + e + t).parents(".uc-spp-terms").find(".info-box").slideDown(),
                        1 == $("#spp" + e + t).parents(".uc-spp-terms").index() && (n -= 16),
                            $(".uc-samsung-protection-holder").css("height", n + "px")
                    } else $("#spp" + e + t).removeClass("active"),
                        $("#spp" + e + t).parents(".uc-spp-terms").find(".info-box").slideUp(),
                        n = p,
                        $(".uc-samsung-protection-holder").css("height", n + "px")
                }
            },
            i.activationConsent = function(e) {
                r.activateSimConsent = e.activateSim,
                    _.each(r.cartItems,
                        function(e) {
                            e.isActivationEnabledLockedSku && (e.activateSim = r.activateSimConsent)
                        }),
                    r.fireUtagActivationConsent()
            },
            i.Subscribe = function(e) {
                if (e.subscribe) r.subscribeChecked.push(e.sku_id);
                else {
                    var t = r.subscribeChecked.indexOf(e.sku_id);
                    t > -1 && r.subscribeChecked.splice(t, 1)
                }
            },
            i.isUnidays = function() {
                return "4771508300" == $.cookie("tppid")
            },
            i.subscribePP = function(e) {
                if (e.subscribePP) r.subscribePPChecked.push(e.sku_id);
                else {
                    var t = r.subscribePPChecked.indexOf(e.sku_id);
                    t > -1 && r.subscribePPChecked.splice(t, 1)
                }
            },
            i.addSPP = function(a, o) {
                var s = a.extRefId || a.sku;
                if (window.utag && (utag.link({
                        link_cat: "add to cart",
                        link_id: "cross_sell_" + a.sku + "_cartadd",
                        link_meta: "link_name:cross sell add to cart",
                        link_position: a.sku,
                        product_info: "id:" + a.productId + "|cat:|name:" + a.displayName + "|price:" + a.pricing.salePriceWithQuantity.value + "|cat_id:"
                    }), r.isHAinCart)) {
                    var c = _.contains(r.HAInstallationSkus, s),
                        l = _.contains(r.HAhaulAwaySkus, s);
                    if (c || l) {
                        var p = c ? "HA_INST_SELECTED": "HA_HAUL_AWY_SELECTED",
                            u = {
                                link_cat: "additional services",
                                link_id: "ha_checkout_delivery_additional_services_" + s,
                                link_meta: "link_name" + s,
                                link_position: o.sku_id + ">checkout>additional services>" + p
                            };
                        r.haUtagLinkFire(u)
                    }
                }
                e.addSubLineItem(o.line_item_id, s, 1, t.PAGECONTEXT.SPP).then(function(e) {
                    r.removedItem = null,
                        r.removedItemIndex = null,
                        r.removedItemChildIndex = null,
                        r.isSubscriptionAgreed = null,
                        o.offers = [],
                        r.$digest(),
                        r.$broadcast("refreshCart", e, !0),
                        i.showAndHideCrossSell(o, !1),
                        r.isPCTermsExist = $(".subscription-plans-holder input[id^=subscribe_pp]").length > 0,
                    r.cartHasSimSkus() && r.fireUtagActivationConsent()
                }).E400(function(e) {
                    r.latestPurchaseflow(e),
                        r.$broadcast("cartStepError", n.AddToCartError.title, n.AddToCartError.description)
                }).E401(function(e) {
                    r.latestPurchaseflow(e),
                        r.promptReLogin(e)
                }).E404(function(e) {
                    r.latestPurchaseflow(e),
                        r.$broadcast("cartStepError", n.AddToCartError.title, n.AddToCartError.description)
                }).E409(function(e) {
                    r.latestPurchaseflow(e),
                        e = JSON.parse(e.responseText),
                    e.error || (e = JSON.parse(e.message)),
                        "InventoryUnavailable" == e.error ? r.$broadcast("cartStepError", n.InventoryUnavailableError.title, n.InventoryUnavailableError.description) : "InvalidWarrantyChildLineItem" == e.error ? r.$broadcast("cartStepError", n.InvalidWarrantyError.title, n.InvalidWarrantyError.description) : "UnableToApplySUPFinancing" == e.error ? r.$broadcast("cartStepError", n.UnableToApplySUPFinancing.title, n.UnableToApplySUPFinancing.description) : r.$broadcast("cartStepError", n.AddToCartError.title, n.AddToCartError.description)
                }).E500(function(e) {
                    r.latestPurchaseflow(e),
                        d.displayAddToCartErrorMessage(e)
                }).E502(function() {
                    r.$broadcast("cartStepError", n.defaultError.title, n.defaultError.description)
                }).fail(function(e) {
                    console.log("add SPP item failed" + e),
                        a.selected = !1,
                        r.$digest()
                })
            },
            i.$on("removeItems",
                function(e, t, n) {
                    _.each(t,
                        function(e, t) {
                            setTimeout(function() {
                                    i.removeItem(e, 0, n)
                                },
                                1e3 * t)
                        })
                }),
            i.removeItem = function(a, o, s, c) {
                var l;
                if (a.parentItem && a.parentItem.line_item_id && (l = a.parentItem.line_item_id, r.isHAinCart)) {
                    var d = _.contains(r.HAInstallationSkus, a.sku_id),
                        p = _.contains(r.HAhaulAwaySkus, a.sku_id);
                    if (d || p) {
                        var u = d ? "HA_INST_REMOVED": "HA_HAUL_AWY_REMOVED",
                            f = {
                                link_cat: "additional services",
                                link_id: "ha_checkout_delivery_additional_services_" + a.sku_id,
                                link_meta: "link_name" + a.sku_id,
                                link_position: a.parentItem.sku_id + ">checkout>additional services>" + u
                            };
                        r.haUtagLinkFire(f)
                    }
                }
                e.removeItem(a.line_item_id, l, t.PAGECONTEXT.CART_INFO).then(function(e) {
                    i.showBillingDetailsToggle(a, "hide"),
                        r.removedItem = a,
                        c >= 0 ? (r.removedItemChildIndex = o + "" + c, r.removedItemIndex = null) : (r.removedItemIndex = o, r.removedItemChildIndex = null),
                        o = r.subscribeChecked.indexOf(a.sku_id),
                    o > -1 && r.subscribeChecked.splice(o, 1),
                        o = r.subscribePPChecked.indexOf(a.sku_id),
                    o > -1 && r.subscribePPChecked.splice(o, 1),
                        r.$broadcast("refreshCart", e, !0),
                        i.showAndHideCrossSell(a, "remove"),
                        $(".uc-product-removed").fadeIn(400),
                        r.$digest(),
                        $(".uc-product-removed").delay(5e3).fadeOut(400),
                    s && i.checkRedirectEvent(s)
                }).E401(function(e) {
                    r.promptReLogin(e)
                }).fail(function(e) {
                    r.$broadcast("cartStepError", n.RemoveItemError.title, n.RemoveItemError.description),
                        console.log("remove item failed" + e)
                })
            },
            i.undoRemove = function() {
                var a = r.removedItem.parentItem && r.removedItem.parentItem.line_item_id,
                    o = r.removedItem.line_items;
                e.undoRemove(r.removedItem.sku_id, r.removedItem.quantity, a, o, t.PAGECONTEXT.CART_INFO).then(function(a) {
                    if (r.removedItem.assurant_warranty_infos && r.removedItem.assurant_warranty_infos.length > 0) {
                        var o = _.find(a.line_items,
                            function(e) {
                                return e.sku_id == r.removedItem.sku_id
                            });
                        e.addAssurantInfo(r.removedItem.assurant_warranty_infos, o.line_item_id, t.PAGECONTEXT.CART_INFO).then(function() {
                            setTimeout(function() {
                                    u(a)
                                },
                                500),
                                i.showAndHideCrossSell(r.removedItem.parentItem, "remove")
                        }).fail(function() {
                            r.$broadcast("cartStepError", n.AddToCartError.title, n.AddToCartError.description)
                        })
                    } else setTimeout(function() {
                            u(a)
                        },
                        500)
                }).E409(function(e) {
                    e = JSON.parse(e.responseText),
                        "InventoryUnavailable" == e.error ? r.$broadcast("cartStepError", n.InventoryUnavailableError.title, n.InventoryUnavailableError.description) : r.$broadcast("cartStepError", n.AddToCartError.title, n.AddToCartError.description)
                }).E500(function(e) {
                    d.displayAddToCartErrorMessage(e)
                }).fail(function(e) {
                    r.$broadcast("cartStepError", n.AddToCartError.title, n.AddToCartError.description),
                        console.log("undo remove item failed" + e)
                })
            };
        var u = function(e) {
            if (r.removedItemIndex) {
                var t = e.line_items.splice(e.line_items.length - 1, 1)[0];
                e.line_items.splice(r.removedItemIndex, 0, t)
            }
            r.$broadcast("refreshCart", e, !0),
                r.removedItem = null,
                r.removedItemIndex = null,
                r.removedItemChildIndex = null
        };
        i.showAccessories = function(e) {
            r.$broadcast("getAccessories", e)
        },
            i.onQuantityChange = function(n, a) {
                return "4+" == n.quantity ? void(window.location.href = "/us/shop/small-business-orders/?skuid=" + n.sku_id) : (window.utag && utag.link({
                    link_cat: "update quantity",
                    link_id: "update_qty_" + n.sku_id,
                    link_meta: "link_name:update quantity>" + n.quantity,
                    link_position: n.sku_id
                }), void e.changeQuantity(n.line_item_id, n.quantity, n.sku_id, t.PAGECONTEXT.CART_INFO).then(function(e) {
                    r.$broadcast("refreshCart", e, !0),
                        $(".uc-product-removed").hide(),
                        i.showAndHideCrossSell(n, !1)
                }).E400(function(e) {
                    i._resetQuantity(n, a, e)
                }).E401(function(e) {
                    r.promptReLogin(e)
                }).E404(function(e) {
                    i._resetQuantity(n, a, e)
                }).E409(function(e) {
                    var t = JSON.parse(e.responseText);
                    return "SkuLimitReached" == t.error ? void(window.location.href = "/us/shop/small-business-orders/?skuid=" + n.sku_id) : void i._resetQuantity(n, a, e)
                }).E500(function(e) {
                    i._resetQuantity(n, a, e)
                }).E502(function(e) {
                    i._resetQuantity(n, a, e)
                }).E503(function(e) {
                    i._resetQuantity(n, a, e)
                }).E504(function(e) {
                    i._resetQuantity(n, a, e)
                }).fail(function(e) {
                    i._resetQuantity(n, a, e)
                }))
            },
            i.buyOneMore = function(e) {
                e.quantity = 2,
                    i.onQuantityChange(e, 1)
            },
            i.showDiscountDetails = function(e) {
                var t = "." + i.lineItemClass(e);
                $(t).find(".sc-prd-discount-details-holder").is(":visible") ? ($(t).find(".sc-prd-discount-details-holder").slideUp(), $(t).find(".sc-prd-discount-details").find(".btn-see-less").text("See more")) : ($(t).find(".sc-prd-discount-details-holder").slideDown(), $(t).find(".sc-prd-discount-details").find(".btn-see-less").text("See less"))
            },
            i.showBillingDetailsToggle = function(e, t) {
                var n = "." + i.lineItemClass(e);
                $(n).find(".sc-product-additional-info").first().is(":visible") && !t || "hide" == t ? ($(n).find(".sc-product-additional-info").first().slideUp(), $(n).find(".for-mobile .sc-prd-btn-details").is(":visible") ? $(n).find(".for-mobile .sc-prd-btn-details").first().removeClass("active") : $(n).find(".sc-prd-btn-details").first().removeClass("active")) : ($(n).find(".sc-product-additional-info").first().slideDown(), $(n).find(".for-mobile .sc-prd-btn-details").is(":visible") ? $(n).find(".for-mobile .sc-prd-btn-details").first().addClass("active") : $(n).find(".sc-prd-btn-details").first().addClass("active"))
            },
            i.lineItemClass = function(e) {
                return e.line_item_id
            },
            r.isTMOSku = function(e) {
                return _.contains(r.tmoSims, e)
            },
            r.isSprintSku = function(e) {
                return _.contains(r.sprintSims, e)
            },
            i.simImage = function(e, t) {
                e || (e = ""),
                    e = e.toUpperCase();
                var n = "";
                return e.indexOf("T-MOBILE") > -1 || r.isTMOSku(t) ? n = "logo-t-mobile.png": e.indexOf("SPRINT") > -1 || r.isSprintSku(t) ? n = "logo-sprint.png": e.indexOf("AT&T") > -1 && (n = "logo-at-and-t.png.png"),
                r.relativeImagePath + "/checkout/" + n
            },
            i._resetQuantity = function(e, t, i) {
                e = _.findWhere(r.shoppingCart.line_items, {
                    sku_id: e.sku_id
                }),
                    e.quantity = t,
                    i = JSON.parse(i.responseText),
                    n[i.error] ? r.$broadcast("cartStepError", n[i.error].title, n[i.error].description) : r.$broadcast("cartStepError", n.defaultError.title, n.defaultError.description),
                    r.$broadcast("refreshCart", r.shoppingCart, !1)
            },
            i.isFreeItem = function(e) {
                return 0 == e.line_item_cost.price.amount && !r.premiumCareSubscriptionOffer([], e.sku_id)
            },
            i.isCustomItem = function(e) {
                return null != e.assurant_warranty_infos
            },
            i.onContinueShopping = function() {
                window.location.href = SCart.URL.CONTINUE_SHOPPING_URL()
            },
            i.isEIPFinancingAvailable = function(e) {
                return ! r.isTradeInSku(e) && r.anyItemInCartFinancible && !e.isFreeItem && r.isFinancingOn && "EIP" == e.financeType && e.attributes && e.attributes.product_division && ("MOBILE" == e.attributes.product_division.toUpperCase() || "TELEVISIONS-HOME-THEATER" == e.attributes.product_division.toUpperCase()) ? !0 : !1
            },
            i.isQledFinancingAvailable = function(e) {
                return ! r.isTradeInSku(e) && r.isFinancingOn && "DeferredSpecial" == e.financeType && e.attributes && e.attributes.product_division && ("HOME ENTERTAINMENT" == e.attributes.product_division.toUpperCase() || "TELEVISIONS-HOME-THEATER" == e.attributes.product_division.toUpperCase()) ? !0 : !1
            },
            i.displayCrossSell = function(e) {
                return e.simOffers && e.simOffers.length > 1 || e.isActivationEnabledLockedSku && r.carrierActivationConsentRequired || e.isActivationEnabledLockedSku && r.isLoggedIn || e.offers && e.offers.length > 0 ? !0 : !1
            },
            i.showAndHideCrossSell = function(e, t) {
                var n = "#" + e.line_item_id + "_cross-sell-btn";
                0 == t ? setTimeout(function() {
                        $(n).find("span").text("Tap to Collapse")
                    },
                    500) : "remove" == t ? setTimeout(function() {
                        $(".expanded button span").text("Tap to Collapse")
                    },
                    1e3) : $(n).parent().find(".cross-sell-holder").is(":visible") ? ($(n).parent().find(".cross-sell-holder").slideUp(750), $(n).find("span").text("Tap for more options"), $(n).parent().removeClass("expanded"), $(window).width() < 768 && setTimeout(function() {
                        $("html, body").animate({
                                scrollTop: $(n).closest(".uc-product-row").offset().top
                            },
                            "slow")
                    },
                    200)) : ($(n).find("span").text("Tap to collapse"), $(n).parent().addClass("expanded"), $(n).parent().find(".cross-sell-holder").slideDown(750), $(window).width() < 768 && setTimeout(function() {
                        $("html, body").animate({
                                scrollTop: $(".cross-sell-content-holder").offset().top
                            },
                            "slow")
                    },
                    200))
            },
            i.init(),
            i.checkRedirectEvent = function(e) { ("noPremiumCareAndActivation" != e || r.cartHasSimSkus() || r.premiumCareSubscriptionCart()) && ("noActivation" != e || r.cartHasSimSkus()) && ("noPremiumCare" != e || r.premiumCareSubscriptionCart()) ? "removeTradeInItem" == e && l.path("/cart-payment") : l.path("/cart-payment")
            }
    }]), checkoutApp.controller("OrderSummaryCtrl", ["CheckoutService", "errors", "GnbService", "constants", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "$timeout",
    function(e, t, n, i, r, a, o, s, c, l, d, p) {
        s.defaults.headers.common["x-ecom-app-id"] = "tempID",
            r.isMobileDevice = window.isMobile(),
            r.handleEmptyCart = function(e) {
                a.isEmptyCartItem(e) ? a.isCartEmpty = !0 : ($(".order-summary-holder, .icon-plus, .btn-promo-accordion").removeClass("disabled cursor-default"), a.isCartEmpty = !1),
                    a.$digest(),
                    a.disableOrderSummary(e)
            },
            r.$on("cartStepError",
                function() {
                    r.handleEmptyCart(a.shoppingCart)
                }),
            r.$on("onUserLogin",
                function() {
                    r.handleEmptyCart(a.shoppingCart)
                }),
            r.$on("refreshCart",
                function(e, t, n) {
                    r.handleEmptyCart(t)
                });
        var u = $(".os-total-fixed-at-bottom-in-mobile");
        u.length > 0 && (a.totalPricePos = u.offset().top),
            r.haNotAvailable = !1,
            r.isHomeDeliveryAvailable = function() {
                var n = _.filter(a.cartItems,
                    function(e) {
                        return e.attributes.is_ha_delivery
                    }),
                    o = _.pluck(n, "sku_id");
                e.getAvailableHomeDeliveryDates(o, r.postalcode, i.PAGECONTEXT.ORDER_SUMMARY).then(function(e) {
                    a.availableDeliveryDates = e,
                        e.length > 0 ? (a.earliestDate = e[0], r.getEstimatedTaxOfOrder()) : (r.haNotAvailable = !0, r.noHomeDelivery()),
                        r.$digest()
                }).E400(function(e) {
                    e = JSON.parse(e.responseText),
                        a.$broadcast("cartStepError", t.homeDeliveryError.title, t.homeDeliveryError.description)
                }).E401(function(e) {
                    a.$broadcast("cartStepError", t.homeDeliveryError.title, t.homeDeliveryError.description)
                }).E404(function(e) {
                    e = JSON.parse(e.responseText),
                        a.$broadcast("cartStepError", t.homeDeliveryError.title, t.homeDeliveryError.description)
                }).fail(function(e) {
                    r.haNotAvailable = !0,
                        r.$digest(),
                        a.$broadcast("cartStepError", t.homeDeliveryError.title, t.homeDeliveryError.description)
                })
            },
            r.getEstimatedTax = function() {
                r.haNotAvailable = !1,
                    $(".estimated-tax-msg").hide(),
                    a.isHAinCart ? r.isHomeDeliveryAvailable() : r.getEstimatedTaxOfOrder()
            },
            r.getEstimatedTaxOfOrder = function() {
                e.getEstimatedTaxInfo(r.postalcode, i.PAGECONTEXT.ORDER_SUMMARY).then(function(e) {
                    a.$broadcast("refreshCart", e, !1),
                        r.zipcode = r.postalcode,
                        a.$digest(),
                        r.toggleTax()
                }).E400(function(e) {
                    e = JSON.parse(e.responseText),
                        "DisallowedPostalCode" == e.error ? r._zipCodeError(t.InvalidPostalCode) : a.$broadcast("cartStepError", t.defaultError.title, t.defaultError.description)
                }).E401(function(e) {
                    r.toggleTax(),
                        a.promptReLogin(e)
                }).E404(function(e) {
                    e = JSON.parse(e.responseText),
                        "InvalidPostalCode" == e.error ? r._zipCodeError(t.InvalidPostalCode) : a.$broadcast("cartStepError", t.defaultError.title, t.defaultError.description)
                }).fail(function(e) {})
            },
            r._zipCodeError = function(e) {
                $(".estimated-tax-msg").text(e.title).show()
            },
            r.noHomeDelivery = function() {
                $(".estimated-tax-msg").text("Home Delivery is not avialble for this zipcode").show()
            },
            r.showPayOptions = function() {
                $(".btn-more-checkout-options").next().slideToggle(250),
                    setTimeout(function() {
                            if ($(window).width() < 768 && !$(".order-summary-holder").hasClass("disabled")) {
                                var e = $(".os-total-fixed-at-bottom-in-mobile").outerHeight();
                                $("body").css("padding-bottom", e + "px")
                            }
                        },
                        300),
                    $(".btn-more-checkout-options").toggleClass("active")
            };
        var f = function() {
                a.$broadcast("saveImpression", a.shoppingCart, "new ecom step1|view cart")
            },
            h = function(e) {
                var t = "";
                a.cartItems && a.cartItems.length > 0 && (t = _.pluck(a.cartItems, "sku_id"));
                var n = e ? "pay in full": "pay over time";
                n = n + " - " + (a.cartFinancePlanType ? a.cartFinancePlanType: "NoFinance");
                var i = e ? "Pay In Full": "Pay Over Time",
                    r = {
                        page_type: "shopping cart",
                        page_type: i,
                        dr_page_name: i,
                        site_language: "en",
                        loggedin_status: a.isLoggedIn,
                        page_breadcrumb: null,
                        page_channel: "ecommerce",
                        stock_list: "in stock",
                        ecom_flag: "Yes",
                        billing_li_state: "billing: " + a.isLoggedIn,
                        cart_theme: "29552800",
                        phone_lock_flag: t,
                        financing_available: a.isCartFinancible ? "y": "n",
                        activation_available: a.carrierActivationEnabled() ? "y": "n"
                    },
                    o = a.cartFinancePlanType ? a.cartFinancePlanType: "NoFinance"; - 1 !== o.indexOf("Deferred") && (o = o + "_" + a.cartFinancingDetails.deferred_finance_plan.deferred_period_duration_in_months),
                    r.page_state = (r.page_state ? r.page_state + " - ": "") + o,
                window.utag && (utag.link({
                    link_cat: "checkout",
                    link_id: n,
                    link_meta: "link_name:" + n,
                    link_position: "order summary",
                    financing_available: a.isCartFinancible ? "y": "n",
                    activation_available: a.carrierActivationEnabled() ? "y": "n"
                }), window.utag.view(r))
            },
            g = function() {
                var e = "";
                a.payoverTimeSelected ? e = "Finance - Login": a.isTradeinCart ? e = "TradeIn - Login": a.cartHasSimSkus() ? e = "Activation - Login": a.premiumCareSubscriptionCart() && (e = "Premium Care - Login");
                var t = {
                    page_type: "shopping cart",
                    page_type: e,
                    dr_page_name: e,
                    site_language: "en",
                    loggedin_status: a.isLoggedIn,
                    page_breadcrumb: null,
                    page_channel: "ecommerce",
                    stock_list: "in stock",
                    ecom_flag: "Yes",
                    cart_theme: "29552800",
                    financing_available: a.isCartFinancible ? "y": "n",
                    activation_available: a.carrierActivationEnabled() ? "y": "n"
                };
                window.utag && window.utag.view(t)
            };
        r.checkoutExtd = function() {
            if (!a.isPCTermsExist && a.ifPPSubscribed()) if (f(), h(!0), !window.isLogin() && a.isLoginRequired()) n.setLayout(),
                a.checkoutSelected = !0,
                g();
            else {
                a.isFinancingOn = !1,
                    a.redirectPostLogin = i.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT,
                    d.path("/cart-payment");
                var e = new Date;
                a.checkoutCallTriggerTime = e.getTime()
            }
        },
            r.$on("checkoutExtd",
                function() {
                    r.checkoutExtd()
                }),
            r.checkout = function() {
                return a.notOptedForSUP = !1,
                    a.payoverTimeSelected = !1,
                a.payNowSelected && a.deleteUpgradeItemsFromCart(),
                    a.isUpgradeSkuInCart ? void(a.payNowSelected = !0) : void r.checkoutExtd()
            },
            r.$on("payOverTimeExtd",
                function() {
                    r.payOverTimeExtd()
                }),
            r.payOverTimeExtd = function() { ! a.isPCTermsExist && a.ifPPSubscribed() && (h(!1), window.isLogin() ? a.getCreditDetails("redirect") : (a.payoverTimeSelected = !0, n.setLayout("financing"), g(), p(function() {
                    a.$digest()
                },
                0)))
            },
            r.payOverTime = function() {
                return a.payNowSelected = !1,
                    a.isUpgradeSkuInCart && !a.is_sup_cart ? (a.payoverTimeSelected = !0, void a.deleteNonUpgradeItemsFromCart()) : void r.payOverTimeExtd()
            },
            r.checkoutPaypal = function() {
                e.getPaypalUrl(!a.isLoggedIn, !1).then(function(e) {
                    e && e.payment && e.payment.paypal && ($(".spinner_container").show(), $(".spinner_container").addClass("preloader-paypal"), $(".spinner_container").append('<div class="preloader-paypal-msg">We are redirecting you to PayPal. Please be patient.</div>'), window.location.href = e.payment.paypal.redirect_url)
                }).fail(function(e) {
                    a.$broadcast("cartStepError", "Sorry, we could not redirect you to Paypal.", "Please try again after some time. We regret the inconvenience."),
                    window.utag && utag.link({
                        link_cat: "paypal error response",
                        link_id: "checkout_payment_information_paypal_error_response",
                        link_meta: "link_name:paypal error response",
                        link_position: "payment information"
                    })
                })
            },
            r.toggleTax = function() {
                return a.isCartEmpty || a.isEppRedirect() || !a.isSessionIdValid() ? !1 : ($(window).width() > 768 && $(".order-summary-holder").find(".info-box").width($(".order-summary-holder").outerWidth() - 66), $(".icon-plus").toggleClass("active"), $(window).width() < 768 ? $(".estimated-tax-holder").find(".info-box").slideToggle() : $(".estimated-tax-holder").find(".info-box").is(":visible") ? $(".estimated-tax-holder").find(".info-box").animate({
                        top: "75px",
                        opacity: 0
                    },
                    350,
                    function() {
                        $(".estimated-tax-holder").find(".info-box").css({
                            display: "none"
                        })
                    }) : ($(".estimated-tax-holder").find(".info-box").css({
                    top: "75px",
                    opacity: "0",
                    display: "block"
                }), $(".estimated-tax-holder").find(".info-box").animate({
                        top: "33px",
                        opacity: 1
                    },
                    350)), $(".estimated-tax-info-holder").find(".zip-code-text").focus(), void a.androidDeactivateSticky())
            },
            r.contShopping = function() {
                window.location.href = SCart.URL.CONTINUE_SHOPPING_URL()
            },
            a.promoMsg = "",
            a.promoClass = "",
            r.isCheckoutPage = !1,
            r.paymentChoice = function(e) {
                "payFinance" == e ? r.payOverTime() : r.checkout()
            },
            r.hideEstimatedTax = EcomApi.isTransformRequired
    }]), checkoutApp.controller("ShippingMethodsCtrl", ["CheckoutService", "constants", "errors", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location",
    function(e, t, n, i, r, a, o, s, c, l) {
        r.focusOnShippingMethods = !1,
            i.setOptionsDisplayText = function(e) {
                e.forEach(function(e) {
                    e.displayText = r.shippingOptionsText[e.name]
                })
            },
            i.showShippingInfo = function() {
                $(window).width() > 768 && ($(".white-glove-info-icon").addClass("active"), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").css({
                    top: "115px",
                    opacity: "0",
                    display: "block"
                }), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                        top: "65px",
                        opacity: 1
                    },
                    350))
            },
            i.hideShippingInfo = function() {
                $(window).width() > 768 && ($(".white-glove-info-icon").removeClass("active"), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                        top: "115px",
                        opacity: 0
                    },
                    350,
                    function() {
                        $(".white-glove-info-msg").css({
                            display: "none"
                        })
                    }))
            },
            i.toggleShippingInfo = function(e) {
                if (e.stopPropagation(), $(".white-glove-info-icon").hasClass("active") ? $(document).off("click.whiteGlove") : $(document).on("click.whiteGlove",
                        function(e) {
                            i.toggleShippingInfo(e)
                        }), $(".white-glove-info-icon").toggleClass("active"), $(window).width() < 768) {
                    var t = $(".white-glove-info-icon").parents(".sm-label").find("label").outerHeight() + 20 + "px";
                    $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").css("top", t),
                        $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").slideToggle()
                } else $(".white-glove-info-icon").hasClass("active") ? ($(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").css({
                    top: "115px",
                    opacity: "0",
                    display: "block"
                }), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                        top: "65px",
                        opacity: 1
                    },
                    350)) : $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                        top: "115px",
                        opacity: 0
                    },
                    350,
                    function() {
                        $(".white-glove-info-msg").css({
                            display: "none"
                        })
                    })
            },
            i.shippingOptionsCallBack = function(n, a) {
                if (!n || 0 == n.length) return $(".checkout-payment-shipping-methods .checkout-payment-form-subtitle").text("No applicable shipping methods"),
                    void(0 == r.cost.total.amount && $(".checkout-payment-shipping-methods .checkout-payment-form-subtitle").addClass("no-shipping-zero-dollar"));
                if ($(".checkout-payment-shipping-methods .checkout-payment-form-subtitle").text("Select Shipping Method"), window.utag && utag.link({
                        shipping_options_avail: "" + n.length
                    }), n.sort(function(e, t) {
                        return parseFloat(e.cost.amount) - parseFloat(t.cost.amount)
                    }), i.setOptionsDisplayText(n), i.setDefaultShippingOption(n), !a) {
                    var o = {};
                    o.id = r.selectedShippingMethod.id,
                        o.description = r.selectedShippingMethod.description,
                        o.name = r.selectedShippingMethod.name,
                        e.updateShippingMethod(o, t.PAGECONTEXT.SHIPPING_METHOD).then(function(e) {
                            r.shippingMethodMode = "edit",
                                r.$digest(),
                                r.$broadcast("refreshCart", e, !1)
                        }).E401(function(e) {
                            r.promptReLogin(e)
                        })
                }
            },
            i.$on("addressUpdated",
                function(n, a, o) {
                    r.shoppingCart.shipping_method && i.setDefaultShippingOption([r.shoppingCart.shipping_method]),
                        EcomApi.isTransformRequired || r.shoppingCart.shipping_options ? r.shoppingCart && r.shoppingCart.shipping_options && i.shippingOptionsCallBack(r.shoppingCart.shipping_options, o) : e.getShippingOptions(t.PAGECONTEXT.SHIPPING_INFO).then(function(e) {
                            i.shippingOptionsCallBack(e, o)
                        })
                }),
            i.onShippintMethodEdit = function() {
                r.shippingMethodMode = "edit"
            },
            i.shippingMethodSelect = function(i) {
                var a = {},
                    o = r.cost.total.amount;
                a.id = i.id,
                    a.description = i.description,
                    a.name = i.name,
                    $(".generic-error").hide(),
                    e.updateShippingMethod(a, t.PAGECONTEXT.SHIPPING_METHOD).then(function(e) {
                        if (r.selectedShippingMethod = i, r.shippingMethodMode = "edit", r.focusOnShippingMethods = !0, r.$digest(), r.$broadcast("refreshCart", e, !1), 0 == o && r.cost.total.amount > 0) {
                            var t = "You have selected " + i.description + " shipping option";
                            r.$broadcast("paymentStepError", t, n.NonZeroCart.description),
                                r.addedPayment = null,
                                r.paymentMode = "edit",
                                r.shippingMode = "disabled",
                                r.$digest()
                        } else o > 0 && 0 == r.cost.total.amount && (r.zerodollarchange(), r.selectedAddress && 0 == $("input[name=addr]:checked").length && r.isLoggedIn && $(".add_phone_email").show(), $(".generic-error").hide());
                        "view" == r.shippingMode && "view" == r.paymentMode ? setTimeout(function() {
                                $("html, body").animate({
                                        scrollTop: $("#_place_order").offset().top
                                    },
                                    "slow")
                            },
                            200) : "edit" == r.shippingMode && 0 == r.cost.total.amount && setTimeout(function() {
                                $("html, body").animate({
                                        scrollTop: $("#_user_address").offset().top
                                    },
                                    "slow")
                            },
                            200)
                    }).E401(function(e) {
                        r.promptReLogin(e)
                    }).fail(function(e) {
                        $("#" + r.selectedShippingMethod.id).prop("checked", !0),
                            r.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description)
                    })
            },
            r.isStandardShipping = function(e) {
                return "standard" === e.description.toLowerCase() || "standard ground shipping" === e.description.toLowerCase()
            },
            i.setDefaultShippingOption = function(e) {
                if (i.shippingOptions = e, r.isFreeShippingForDream = !1, _.forEach(e,
                        function(e) {
                            "5766800" == e.id && r.cartHasDreamSku() && (r.isFreeShippingForDream = !0)
                        }), r.TvTradeIn) {
                    r.selectedShippingMethod = i.shippingOptions[0],
                        r.selectedShippingMethod.displayText = r.shippingOptionsText[i.shippingOptions[0].description],
                        r.$digest();
                    var t = i.shippingOptions[0].id;
                    $("#" + t).attr("checked", "checked"),
                        $("#" + t).next().click()
                } else {
                    r.selectedShippingMethod = r.shoppingCart.shipping_method,
                        r.selectedShippingMethod.displayText = r.shippingOptionsText[r.shoppingCart.shipping_method.name],
                        r.$digest();
                    var t = r.shoppingCart.shipping_method.id;
                    $("#" + t).attr("checked", "checked"),
                        $("#" + t).next().click()
                }
            }
    }]), checkoutApp.controller("ShippingMethodsCtrlv3", ["CheckoutService", "constants", "errors", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location",
    function(e, t, n, i, r, a, o, s, c, l) {
        r.focusOnShippingMethods = !1,
            i.setOptionsDisplayText = function(e) {
                e.forEach(function(e) {
                    e.displayText = r.shippingOptionsText[e.name]
                })
            },
            i.showShippingInfo = function() {
                $(window).width() > 768 && ($(".white-glove-info-icon").addClass("active"), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").css({
                    top: "115px",
                    opacity: "0",
                    display: "block"
                }), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                        top: "65px",
                        opacity: 1
                    },
                    350))
            },
            i.hideShippingInfo = function() {
                $(window).width() > 768 && ($(".white-glove-info-icon").removeClass("active"), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                        top: "115px",
                        opacity: 0
                    },
                    350,
                    function() {
                        $(".white-glove-info-msg").css({
                            display: "none"
                        })
                    }))
            },
            i.toggleShippingInfo = function(e) {
                if (e.stopPropagation(), $(".white-glove-info-icon").hasClass("active") ? $(document).off("click.whiteGlove") : $(document).on("click.whiteGlove",
                        function(e) {
                            i.toggleShippingInfo(e)
                        }), $(".white-glove-info-icon").toggleClass("active"), $(window).width() < 768) {
                    var t = $(".white-glove-info-icon").parents(".sm-label").find("label").outerHeight() + 20 + "px";
                    $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").css("top", t),
                        $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").slideToggle()
                } else $(".white-glove-info-icon").hasClass("active") ? ($(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").css({
                    top: "115px",
                    opacity: "0",
                    display: "block"
                }), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                        top: "65px",
                        opacity: 1
                    },
                    350)) : $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                        top: "115px",
                        opacity: 0
                    },
                    350,
                    function() {
                        $(".white-glove-info-msg").css({
                            display: "none"
                        })
                    })
            },
            i.shippingOptionsCallBack = function(n, a) {
                if (!n || 0 == n.length) return $(".selected-shipping-method-holder .selected-shipping-title").text("No applicable shipping methods"),
                    void(0 == r.cost.total.amount && $(".checkout-payment-shipping-methods .checkout-payment-form-subtitle").addClass("no-shipping-zero-dollar"));
                if ($(".checkout-payment-shipping-methods .checkout-payment-form-subtitle").text("Select Shipping Method"), window.utag && utag.link({
                        shipping_options_avail: "" + n.length
                    }), n.sort(function(e, t) {
                        return parseFloat(e.cost.amount) - parseFloat(t.cost.amount)
                    }), i.setOptionsDisplayText(n), i.setDefaultShippingOption(n), !a) {
                    var o = {};
                    o.id = r.selectedShippingMethod.id,
                        o.description = r.selectedShippingMethod.description,
                        o.name = r.selectedShippingMethod.name,
                        e.updateShippingMethod(o, t.PAGECONTEXT.SHIPPING_METHOD).then(function(e) {
                            r.shippingMethodMode = "view",
                                r.$digest(),
                                r.$broadcast("refreshCart", e, !1)
                        }).E401(function(e) {
                            r.promptReLogin(e)
                        })
                }
            },
            i.$on("addressUpdated",
                function(n, a, o) {
                    r.shoppingCart.shipping_method && i.setDefaultShippingOption([r.shoppingCart.shipping_method]),
                        EcomApi.isTransformRequired || r.shoppingCart.shipping_options ? r.shoppingCart && r.shoppingCart.shipping_options ? i.shippingOptionsCallBack(r.shoppingCart.shipping_options, o) : r.shoppingCart && !r.shoppingCart.shipping_options && ($(".selected-shipping-method-holder .selected-shipping-title").text("No applicable shipping methods"), r.shippingMethodMode = "view", r.$digest()) : e.getShippingOptions(t.PAGECONTEXT.SHIPPING_INFO).then(function(e) {
                            i.shippingOptionsCallBack(e, o)
                        })
                }),
            i.$on("shippingOptionsFetched",
                function(e, t, n) {
                    t && t.shipping_options && (i.setOptionsDisplayText(t.shipping_options), i.shippingOptions = t.shipping_options),
                    t && t.shipping_info && r.$broadcast("addressUpdated", t, n),
                    r.shoppingCart && !r.shoppingCart.shipping_options && ($(".selected-shipping-method-holder .selected-shipping-title").text("No applicable shipping methods"), r.shippingMethodMode = "view", r.$digest())
                }),
            i.onShippintMethodEdit = function() {
                r.shippingMethodMode = "edit"
            },
            i.shippingMethodSelect = function(i) {
                var a = {},
                    o = r.cost.total.amount;
                a.id = i.id,
                    a.description = i.description,
                    a.name = i.name,
                    $(".generic-error").hide(),
                    e.updateShippingMethod(a, t.PAGECONTEXT.SHIPPING_METHOD).then(function(e) {
                        if (r.selectedShippingMethod = i, r.shippingMethodMode = "view", r.focusOnShippingMethods = !0, r.$digest(), r.$broadcast("refreshCart", e, !1), 0 == o && r.cost.total.amount > 0) {
                            var t = "You have selected " + i.description + " shipping option";
                            r.$broadcast("paymentStepError", t, n.NonZeroCart.description),
                                r.addedPayment = null,
                                r.paymentMode = "edit",
                                r.shippingMode = "disabled",
                                r.$digest()
                        } else o > 0 && 0 == r.cost.total.amount && (r.zerodollarchange(), r.selectedAddress && 0 == $("input[name=addr]:checked").length && r.isLoggedIn && $(".add_phone_email").show(), $(".generic-error").hide())
                    }).E401(function(e) {
                        r.promptReLogin(e)
                    }).fail(function(e) {
                        $("#" + r.selectedShippingMethod.id).prop("checked", !0),
                            r.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description);

                    })
            },
            r.isStandardShipping = function(e) {
                return "standard" === e.description.toLowerCase() || "standard ground shipping" === e.description.toLowerCase()
            },
            i.setDefaultShippingOption = function(e) {
                if (i.shippingOptions = e, r.isFreeShippingForDream = !1, r.TvTradeIn) {
                    r.selectedShippingMethod = i.shippingOptions[0],
                        r.selectedShippingMethod.displayText = r.shippingOptionsText[i.shippingOptions[0].description],
                        r.$digest();
                    var t = i.shippingOptions[0].id;
                    $("#" + t).attr("checked", "checked"),
                        $("#" + t).next().click()
                } else {
                    r.selectedShippingMethod = r.shoppingCart.shipping_method,
                        r.selectedShippingMethod.displayText = r.shippingOptionsText[r.shoppingCart.shipping_method.name],
                        r.$digest();
                    var t = r.shoppingCart.shipping_method.id;
                    $("#" + t).attr("checked", "checked"),
                        $("#" + t).next().click()
                }
            }
    }]), checkoutApp.controller("CardInfoCtrl", ["CheckoutService", "constants", "errors", "updateUtilities", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "$timeout",
    function(e, t, n, i, r, a, o, s, c, l, d, p) {
        a.linkSectionMode,
            a.states = ["Select", "AL", "AK", "AS", "AZ", "AR", "CA", "CO", "CT", "DE", "DC", "FM", "FL", "GA", "GU", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MH", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "MP", "OH", "OK", "OR", "PW", "PA", "PR", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VI", "VA", "WA", "WV", "WI", "WY"],
            a.paymentSource = o.payment_source,
            a.isFinancingOn = "finance" == o.payment_source ? !0 : !1,
            r.validate = function(e) {
                e["class"] = e.$invalid ? "error focus": "focus valid",
                    e.$dirty = !0
            },
            r.validateState = function(e, t) {
                e.$setValidity("unselect", "Select" != t),
                    e["class"] = e.$invalid ? "error focus": "focus valid",
                    e.$dirty = !0
            },
            r.zipcodelookup = function(n) {
                e.ziplookup(n, t.PAGECONTEXT.PAYMENT_INFO).then(function(e) {
                    e && e.city_state_list && e.city_state_list.length > 0 && (a.billing.city = e.city_state_list[0].city, a.billing.state_or_province = e.city_state_list[0].state_or_province, a.$digest(), $("select").selectric(), $("#_billingaddressInfo_userState").blur(), $("#_billingaddressInfo_userCity").blur())
                }).E401(function(e) {
                    a.promptReLogin(e)
                })
            },
            r.onFocus = i.formOnFocus,
            r.$watch("cardForm.$valid",
                function() {
                    r.cardForm && (r.cardFormvalid = r.cardForm.$valid)
                }),
            r.onDRCCSuccess = function() {
                e.refreshCart({
                    context: t.PAGECONTEXT.PAYMENT_INFO
                }).then(function(e) {
                    a.refreshCart(e, !1),
                        a.addedPayment = e.payment,
                        r.onPaymentComplete()
                }).fail(function() {
                    a.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description)
                })
            },
            r.manageIframeMessage = function() {
                function e(e) {
                    "success" == e.data.message ? ($(".spinner_container").hide(), r.onDRCCSuccess()) : "failure" == e.data.message ? ($(".spinner_container").hide(), a.$broadcast("paymentStepError", n.iFrameError.title, n.iFrameError.description)) : "showSpinner" == e.data.message ? $(".spinner_container").show() : "hideSpinner" == e.data.message && $(".spinner_container").hide()
                }
                var t;
                t = new Porthole.WindowProxy("", "cardFormFrame"),
                    t.addEventListener(e)
            },
            r.newCreditCard = function() {
                if (window.utag && utag.link({
                        link_cat: "add payment method",
                        link_id: "payment_information_payment_method_add_CreditCard",
                        link_meta: "link_name:CreditCard",
                        link_position: "payment information>add payment method"
                    }), a.isLoggedIn && (a.billing.email = a.contact.email, a.billing.phone = a.contact.phone), r.selectedPayment = void 0, r.isPaypal = !1, a.isPaymentOptionFinance = !1, $(".checkout-payment-cc-details").show(), $("input[name=payMethod]:checked").removeAttr("checked"), r.scrollToCCSection(), a.isPaymentSourceDR) {
                    $("#btnPaymentCnt").hide();
                    var n = $("#cardFormFrame"),
                        i = n.attr("src");
                    i && i.length > 0 ? (r.scrollToCCSection(), r.manageIframeMessage()) : e.getPaymentUiUrl(t.PAGECONTEXT.PAYMENT_INFO).then(function(e) {
                        e && e.url && ($(".spinner_container").show(), $("#cardFormFrame").attr("src", e.url), r.scrollToCCSection(), r.manageIframeMessage())
                    })
                }
            },
            r.paypal = function(e) {
                window.utag && utag.link({
                    link_cat: "add payment method",
                    link_id: e ? "payment_information_payment_method_add_PaypalCredit": "payment_information_payment_method_add_Paypal",
                    link_meta: e ? "link_name:PaypalCredit": "link_name:Paypal",
                    link_position: "payment information>add payment method"
                }),
                    a.isPaymentOptionFinance = !1,
                    $(".checkout-payment-cc-details").hide(),
                    $("input[name=payMethod]:checked").removeAttr("checked"),
                a.isPaymentSourceDR && $("#btnPaymentCnt").show(),
                    r.isPaypal = !0,
                    r.isPaypalCredit = e
            },
            r.zipCodeKeyUp = function(e) {
                e.$invalid || r.zipcodelookup(e.$modelValue)
            },
            r.onPaymentSelect = function(e) {
                window.utag && utag.link({
                    link_cat: "select payment method",
                    link_id: "payment_information_payment_method_select_CreditCard",
                    link_meta: "link_name:CreditCard",
                    link_position: "payment information>select payment method"
                }),
                    r.selectedPayment = e,
                    r.newCard = !1,
                    r.isPaypal = !1,
                    a.isPaymentOptionFinance = !1,
                    $("input[name=_paymentTypes]:checked").removeAttr("checked"),
                    $(".checkout-payment-cc-details").hide(),
                a.isPaymentSourceDR && $("#btnPaymentCnt").show()
            },
            r.contPayment = function() {
                var e = a.getPaymentMethod(r.isPaypal, r.isPaypalCredit);
                if (window.utag && utag.link({
                        link_cat: "payment method",
                        link_id: "checkout_payment_information_payment_method_" + e,
                        link_meta: "link_name:" + e,
                        link_position: "payment information>" + e
                    }), null != r.selectedPayment || r.cardFormvalid || r.isPaypal) {
                    if (r.isPaypal) return r.handlePaypal();
                    r.selectedPayment || (r.newCard = !0, r.selectedPayment = r.cardInfo),
                    a.billing.line2 && "" != a.billing.line2 || (a.billing = _.omit(a.billing, "line2")),
                    a.disableSaveCard() && (r.cardInfo.saveCard = !0),
                        r.addPayment(a.billing, r.selectedPayment, r.newCard, r.cardInfo.saveCard)
                }
            },
            r.onPaymentComplete = function() {
                a.paymentMode = "view",
                    a.paymentSource = "",
                a.selectedAddress && a.shippingSameAsBilling && (a.selectedAddress = a.addedPayment.billing_info),
                    a.$broadcast("contactInfoUpdated"),
                ("view" != a.shippingMode || a.shippingSameAsBilling) && (a.shippingMode = "edit"),
                    a.$digest(),
                    "view" == a.shippingMode && "view" == a.paymentMode ? (a.shippingSameAsBilling && a.isHAinCart && a.$broadcast("isHomeDeliveryAvailableShippingMethod", a.addedPayment.billing_info.postal_code), setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $("#_place_order").offset().top
                                },
                                "slow")
                        },
                        200)) : setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $("#_user_address").offset().top
                                },
                                "slow"),
                            a.shippingSameAsBilling && ($("#_sameAsShipAddress").prop("checked", !0), a.isHAinCart && a.$broadcast("isHomeDeliveryAvailableShippingMethod", a.addedPayment.billing_info.postal_code))
                        },
                        200)
            },
            r.handlePaypal = function() {
                e.getPaypalUrl(!a.isLoggedIn, r.isPaypalCredit).then(function(e) {
                    e && e.payment && e.payment.paypal && ($(".spinner_container").show(), $(".spinner_container").addClass("preloader-paypal"), $(".spinner_container").append('<div class="preloader-paypal-msg">We are redirecting you to PayPal. Please be patient. The estimated taxes will change based on your shipping address.</div>'), window.location.href = e.payment.paypal.redirect_url),
                        $(".checkout-payment-cc-details").hide()
                }).fail(function() {
                    a.$broadcast("paymentStepError", "We could not process your request at this time.", "Please try again with a different payment option."),
                    window.utag && utag.link({
                        link_cat: "paypal error response",
                        link_id: "checkout_payment_information_paypal_error_response",
                        link_meta: "link_name:paypal error response",
                        link_position: "payment information"
                    })
                })
            },
            r.$on("cartAvailable",
                function() {
                    a.isPaymentSourceDR && e.getPaymentUiUrl().then(function(e) {
                        if (e && e.url) {
                            var t = $("#cardFormFrame");
                            t && t.length > 0 && t.attr("src", e.url)
                        }
                    })
                }),
            r.$on("profileInfoAvailable",
                function() {
                    r.selectedPayment || (a.billing.email || (a.billing.email = a.contact.email), a.billing.phone || (a.billing.phone = a.contact.phone), r.blurFields())
                }),
            r.$on("onUserLogin",
                function() {
                    if (a.isPaymentSourceDR) {
                        var t = $("#cardFormFrame");
                        t && t.length > 0 && t.removeAttr("src")
                    }
                    a.onErrorClose(),
                        e.getUserProfile().then(function(e) {
                            e = JSON.parse(e),
                            e && e.emailaddress && (a.contact || (a.contact = {}), a.contact.email = e.emailaddress, a.contact.phone = e.cellPhone || e.telePhone || e.workPhone, a.userEmail = e.emailaddress, a.billing || (a.billing = {}), a.billing.email = a.contact.email, a.billing.phone = a.contact.phone, a.$broadcast("addressInfo"), a.$digest())
                        }),
                        a.setPaymentOptions()
                }),
            r.addPayment = function(t, i, o, s) {
                e.addPayment(t, i, o, !a.isLoggedIn, s).then(function(e) {
                    a.addedPayment = e.payment,
                        r.onPaymentComplete()
                }).E400(function() {
                    a.$broadcast("paymentStepError", n.InvalidCreditCard.title, n.InvalidCreditCard.description)
                }).E401(function(e) {
                    a.promptReLogin(e)
                }).E409(function(e) {
                    e = JSON.parse(e.responseText),
                        "line-item-creation-failure" == e.error || "InventoryUnavailable" == e.error ? a.$broadcast("paymentStepError", n.InventoryUnavailableError.title, n.InventoryUnavailableError.description) : a.$broadcast("paymentStepError", n.InvalidCreditCard.title, n.InvalidCreditCard.description),
                        r.selectedPayment = null
                }).fail(function() {
                    window.utag && utag.link({
                        link_cat: "CC error response",
                        link_id: "checkout_payment_information_CC_error_response",
                        link_meta: "link_name:CC error response",
                        link_position: "payment position"
                    }),
                        a.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description),
                        r.selectedPayment = null
                })
            },
            r.onPaymentEdit = function() {
                a.haAvailableInPaypalAddress = !1,
                    r.selectedPayment = a.addedPayment,
                a.addedPayment && a.addedPayment.billing_record_id && p(function() {
                        $("#" + a.addedPayment.billing_record_id).trigger("click"),
                            $("#cardFormHolder div.input-control").addClass("focus"),
                            a.billing.state_or_province = a.addedPayment.billing_info.state_or_province
                    },
                    0),
                    $("input[name=payMethod]:checked").length > 0 ? $("input[id=_paymentTypeCC]:checked").removeAttr("checked") : r.selectedPayment = void 0,
                0 == $("input[id=_paymentTypeCC]:checked").length && $(".checkout-payment-cc-details").hide(),
                    r.isPaypal = !1,
                    a.paymentMode = "edit",
                    $(".checkout-payment-forms .input-control").addClass("focus")
            },
            r.scrollToCCSection = function() {
                setTimeout(function() {
                        $("html, body").animate({
                                scrollTop: $(".checkout-payment-cc-details").offset().top
                            },
                            "slow"),
                            r.blurFields()
                    },
                    200)
            },
            r.blurFields = function() {
                a.billing.email && ($("#_billingaddressInfo_userEmail").focus().blur(), $("#_billingaddressInfo_userEmail").parents(".input-control").addClass("focus")),
                a.billing.phone && ($("#_billingaddressInfo_userPhoneNo").focus().blur(), $("#_billingaddressInfo_userPhoneNo").parents(".input-control").addClass("focus"))
            },
            r.openLinkSection = function() {
                a.linkSectionMode = "edit"
            },
            r.blurFields(),
        !a.financingPubKey && a.isFinancingOn && "P" == a.financingStatus && e.getFinancingPubKey(t.PAGECONTEXT.COMMON).then(function(e) {
            a.financingPubKey = e
        }),
            r.linkTDAccount = function() {
                e.linkTDAccount(r.TDlinkForm, t.PAGECONTEXT.CART_INFO).then(function(e) {
                    var t = e.td_bank_finance.td_bank_existing_account.response.credit_application_response; ! t.application_status || "A" != t.application_status && "P" != t.application_status && "D" != t.application_status ? e.td_bank_finance.td_bank_existing_account.response.error && -1 != e.td_bank_finance.td_bank_existing_account.response.error.message.indexOf("FinanceAdapterRequestPayloadDecryptionFailed") ? a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description) : a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description) : (a.financingDetails = t, a.financingStatus = t.application_status, a.isSufficientCredit = t.available_credit > a.shoppingCart.cost.total.amount ? !0 : !1, a.applyFinancingToCart()),
                        a.$digest()
                }).fail(function(e) {
                    e = JSON.parse(e.responseText),
                        "FinanceAdapterRequestPayloadDecryptionFailed" == e.error ? a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description) : a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description)
                })
            },
            r.changePayment = function() {
                a.linkSectionMode = "view"
            },
            r.payFinancing = function() {
                $("input[name=payMethod]:checked").removeAttr("checked"),
                    a.applyFinancingToCart(),
                    a.isPaymentOptionFinance = !0
            },
        !a.isLoggedIn || a.contact && (a.contact.email || a.contact.phone) || e.getUserProfile().then(function(e) {
            e = JSON.parse(e),
            e && e.emailaddress && (a.contact || (a.contact = {}), a.contact.email = e.emailaddress, a.contact.phone = e.cellPhone || e.telePhone || e.workPhone, a.userEmail = e.emailaddress, a.billing || (a.billing = {}), a.billing.email = a.contact.email, a.billing.phone = a.contact.phone, a.$digest()),
                a.getUserProfileDone = !0,
                a.fireCheckoutTags()
        })
    }]), checkoutApp.controller("CardInfoCtrlv3", ["CheckoutService", "constants", "errors", "updateUtilities", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "$timeout",
    function(e, t, n, i, r, a, o, s, c, l, d, p) {
        function u() {
            var e = {},
                t = "PUT";
            e.method = t,
                e.url = SCart.URL.EXISTING_PAYMENT_V3_URL(SCart.shoppingCartTransformService.shoppingCartId, !0),
                e.handler = "addPaymentHandler";
            var n = {};
            n.billing_info = r.selectedPayment.billing_info,
                n.billing_record = {},
                n.billing_record.billing_record_id = r.selectedPayment.id,
                n.billing_record.account_provider = r.selectedPayment.account_provider,
                e.payload = n,
                a.paymentCTA = e
        }
        a.linkSectionMode,
            a.states = ["State", "AL", "AK", "AS", "AZ", "AR", "CA", "CO", "CT", "DE", "DC", "FM", "FL", "GA", "GU", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MH", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "MP", "OH", "OK", "OR", "PW", "PA", "PR", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VI", "VA", "WA", "WV", "WI", "WY"],
            a.shippingStates = ["State", "AL", "AK", "AS", "AZ", "AR", "CA", "CO", "CT", "DE", "DC", "FM", "FL", "GA", "GU", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MH", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "MP", "OH", "OK", "OR", "PW", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY"],
            a.paymentSource = o.payment_source,
            a.isFinancingOn = "finance" == o.payment_source ? !0 : !1,
            r.validate = function(e) {
                e["class"] = e.$invalid ? "error focus": "focus valid",
                    e.$dirty = !0
            },
            r.validateState = function(e, t) {
                e.$setValidity("unselect", t != a.states[0]),
                    e["class"] = e.$invalid ? "error focus": "focus valid",
                    e.$dirty = !0
            },
            r.zipcodelookup = function(n) {
                e.ziplookup(n, t.PAGECONTEXT.PAYMENT_INFO).then(function(e) {
                    e && e.city_state_list && e.city_state_list.length > 0 && (a.billing.city = e.city_state_list[0].city, a.billing.state_or_province = e.city_state_list[0].state_or_province, a.$digest(), $("select").selectric(), $("#_billingaddressInfo_userState").blur(), $("#_billingaddressInfo_userCity").blur())
                }).E401(function(e) {
                    a.promptReLogin(e)
                })
            },
            r.onFocus = i.formOnFocus,
            r.$watch("cardForm.$valid",
                function() {
                    r.cardForm && (r.cardFormvalid = r.cardForm.$valid)
                }),
            r.onDRCCSuccess = function() {
                e.refreshCart({
                    context: t.PAGECONTEXT.PAYMENT_INFO
                }).then(function(e) {
                    a.refreshCart(e, !1),
                        a.addedPayment = e.payment,
                        r.onPaymentComplete()
                }).fail(function(e) {
                    a.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description),
                        console.error(e)
                })
            },
            r.manageIframeMessage = function() {
                function e(e) {
                    "success" == e.data.message ? ($(".spinner_container").hide(), r.onDRCCSuccess()) : "failure" == e.data.message ? ($(".spinner_container").hide(), a.$broadcast("paymentStepError", n.iFrameError.title, n.iFrameError.description)) : "showSpinner" == e.data.message ? $(".spinner_container").show() : "hideSpinner" == e.data.message && $(".spinner_container").hide()
                }
                var t;
                t = new Porthole.WindowProxy("", "cardFormFrame"),
                    t.addEventListener(e)
            },
            r.newCreditCard = function() {
                if (window.utag && utag.link({
                        link_cat: "add payment method",
                        link_id: "payment_information_payment_method_add_CreditCard",
                        link_meta: "link_name:CreditCard",
                        link_position: "payment information>add payment method"
                    }), a.isLoggedIn && (a.billing.email = a.contact.email, a.billing.phone = a.contact.phone), r.selectedPayment = void 0, r.isPaypal = !1, a.isPaymentOptionFinance = !1, $(".credit-card-details").show(), $(".billing-address-details").show(), $("input[name=payMethod]:checked").removeAttr("checked"), r.scrollToCCSection(), a.isPaymentSourceDR) {
                    $("#btnPaymentCnt").hide();
                    var n = $("#cardFormFrame"),
                        i = n.attr("src");
                    i && i.length > 0 ? (r.scrollToCCSection(), r.manageIframeMessage()) : e.getPaymentUiUrl(t.PAGECONTEXT.PAYMENT_INFO).then(function(e) {
                        e && e.url && ($(".spinner_container").show(), $("#cardFormFrame").attr("src", e.url), r.scrollToCCSection(), r.manageIframeMessage())
                    })
                }
            },
            r.paypal = function(t) {
                window.utag && utag.link({
                    link_cat: "add payment method",
                    link_id: t ? "payment_information_payment_method_add_PaypalCredit": "payment_information_payment_method_add_Paypal",
                    link_meta: t ? "link_name:PaypalCredit": "link_name:Paypal",
                    link_position: "payment information>add payment method"
                }),
                    a.isPaymentOptionFinance = !1,
                    $(".credit-card-details").hide(),
                    $(".billing-address-details").hide(),
                    $("input[name=payMethod]:checked").removeAttr("checked"),
                a.isPaymentSourceDR && $("#btnPaymentCnt").show(),
                    r.isPaypal = !0,
                    r.isPaypalCredit = t,
                $(window).width() >= 768 && $(".order-summary-holder").find(".sticky-holder").addClass("bottom"),
                    e.getPaypalUrl(!a.isLoggedIn, r.isPaypalCredit).then(function(e) {
                        if (e && e.payment && e.payment.paypal) {
                            var t = e.payment.paypal.redirect_url.split("/");
                            _.forEach(t,
                                function(e) {
                                    if ( - 1 != e.indexOf("token")) {
                                        var t = e.split("token=");
                                        a.paypalToken = t[1]
                                    }
                                })
                        }
                    }).fail(function(e) {
                        a.isPaypalError = !0,
                            console.error(e)
                    })
            },
            r.zipCodeKeyUp = function(e) {
                e.$invalid || r.zipcodelookup(e.$modelValue)
            },
            r.onPaymentSelect = function(e) {
                window.utag && utag.link({
                    link_cat: "select payment method",
                    link_id: "payment_information_payment_method_select_CreditCard",
                    link_meta: "link_name:CreditCard",
                    link_position: "payment information>select payment method"
                }),
                    r.selectedPayment = e,
                    r.newCard = !1,
                    r.isPaypal = !1,
                    a.isPaymentOptionFinance = !1,
                    $("input[name=_paymentTypes]:checked").removeAttr("checked"),
                    $(".credit-card-details").hide(),
                    $(".billing-address-details").hide(),
                a.isPaymentSourceDR && $("#btnPaymentCnt").show()
            },
            a.contPayment = function() {
                var e;
                if (e = a.getPaymentMethod(r.isPaypal, r.isPaypalCredit), window.utag && utag.link({
                        link_cat: "payment method",
                        link_id: "checkout_payment_information_payment_method_" + e,
                        link_meta: "link_name:" + e,
                        link_position: "payment information>" + e
                    }), null != r.selectedPayment || r.cardFormvalid || r.isPaypal) {
                    if (r.isPaypal) return r.handlePaypal();
                    r.selectedPayment || (r.newCard = !0, r.selectedPayment = r.cardInfo),
                    a.billing.line2 && "" != a.billing.line2 || (a.billing = _.omit(a.billing, "line2")),
                    a.disableSaveCard() && (r.cardInfo.saveCard = !0),
                    r.newCard && (!a.billing.email && a.shoppingCart.shipping_info.email && (a.billing.email = a.shoppingCart.shipping_info.email), !a.billing.phone && a.shoppingCart.shipping_info.phone && (a.billing.phone = a.shoppingCart.shipping_info.phone)),
                        r.addPayment(a.billing, r.selectedPayment, r.newCard, r.cardInfo.saveCard)
                }
            },
            r.onPaymentComplete = function() {
                a.paymentMode = "view",
                    a.paymentSource = "",
                a.selectedAddress && a.shippingSameAsBilling && (a.selectedAddress = a.addedPayment.billing_info),
                    a.$broadcast("contactInfoUpdated"),
                    a.$digest(),
                    "view" == a.shippingMode && "view" == a.paymentMode ? setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $(".checkout-payment-forms-holder").offset().top
                                },
                                "slow")
                        },
                        200) : setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $(".checkout-payment-forms-holder").offset().top
                                },
                                "slow")
                        },
                        200)
            },
            r.handlePaypal = function() {
                e.getPaypalUrl(!a.isLoggedIn, r.isPaypalCredit).then(function(e) {
                    e && e.payment && e.payment.paypal && ($(".spinner_container").show(), $(".spinner_container").addClass("preloader-paypal"), $(".spinner_container").append('<div class="preloader-paypal-msg">We are redirecting you to PayPal. Please be patient. The estimated taxes will change based on your shipping address.</div>'), window.location.href = e.payment.paypal.redirect_url),
                        $(".credit-card-details").hide(),
                        $(".billing-address-details").hide()
                }).fail(function(e) {
                    a.$broadcast("paymentStepError", "We could not process your request at this time.", "Please try again with a different payment option."),
                        console.error(e),
                    window.utag && utag.link({
                        link_cat: "paypal error response",
                        link_id: "checkout_payment_information_paypal_error_response",
                        link_meta: "link_name:paypal error response",
                        link_position: "payment information"
                    })
                })
            },
            r.$on("cartAvailable",
                function() {
                    a.isPaymentSourceDR && e.getPaymentUiUrl().then(function(e) {
                        if (e && e.url) {
                            var t = $("#cardFormFrame");
                            t && t.length > 0 && t.attr("src", e.url)
                        }
                    })
                }),
            r.$on("profileInfoAvailable",
                function() {
                    r.selectedPayment || (a.billing.email || (a.billing.email = a.contact.email), a.billing.phone || (a.billing.phone = a.contact.phone), r.blurFields())
                }),
            r.$on("onUserLogin",
                function() {
                    if (a.isPaymentSourceDR) {
                        var t = $("#cardFormFrame");
                        t && t.length > 0 && t.removeAttr("src")
                    }
                    a.onErrorClose(),
                        e.getUserProfile().then(function(e) {
                            e = JSON.parse(e),
                            e && e.emailaddress && (a.contact || (a.contact = {}), a.contact.email = e.emailaddress, a.contact.phone = e.cellPhone || e.telePhone || e.workPhone, a.userEmail = e.emailaddress, a.billing || (a.billing = {}), a.billing.email = a.contact.email, a.billing.phone = a.contact.phone, a.$broadcast("addressInfo"), a.$digest())
                        })
                }),
            r.addPayment = function(t, i, o, s) {
                e.addPayment(t, i, o, !a.isLoggedIn, s).then(function(e) {
                    a.addedPayment = e.payment,
                        r.onPaymentComplete()
                }).E400(function(e) {
                    a.$broadcast("paymentStepError", n.InvalidCreditCard.title, n.InvalidCreditCard.description),
                        console.error(e)
                }).E401(function(e) {
                    a.promptReLogin(e),
                        console.error(e)
                }).E409(function(e) {
                    e = JSON.parse(e.responseText),
                        "line-item-creation-failure" == e.error ? a.$broadcast("paymentStepError", n.InventoryUnavailableError.title, n.InventoryUnavailableError.description) : "ItemOutOfStock" == e.error ? a.$broadcast("paymentStepError", n.ItemOutOfStock.title, n.ItemOutOfStock.description) : a.$broadcast("paymentStepError", n.InvalidCreditCard.title, n.InvalidCreditCard.description),
                        r.selectedPayment = null
                }).fail(function(e) {
                    console.error(e),
                    window.utag && utag.link({
                        link_cat: "CC error response",
                        link_id: "checkout_payment_information_CC_error_response",
                        link_meta: "link_name:CC error response",
                        link_position: "payment position"
                    }),
                        a.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description),
                        r.selectedPayment = null
                })
            },
            r.onPaymentEdit = function() {
                r.selectedPayment = a.addedPayment,
                    a.billing = _.clone(a.addedPayment.billing_info),
                a.addedPayment && a.addedPayment.billing_record_id && p(function() {
                        $("#" + a.addedPayment.billing_record_id).trigger("click")
                    },
                    0),
                    $("input[name=payMethod]:checked").length > 0 ? $("input[id=_paymentTypeCC]:checked").removeAttr("checked") : r.selectedPayment = void 0,
                0 == $("input[id=_paymentTypeCC]:checked").length && ($(".credit-card-details").hide(), $(".billing-address-details").hide()),
                    a.paymentMode = "edit",
                    $(".checkout-payment-forms .input-control").addClass("focus"),
                    p(function() {
                        a.$digest(),
                            $("#_billingaddressInfo_userState").selectric()
                    })
            },
            r.scrollToCCSection = function() {
                setTimeout(function() {
                        $("html, body").animate({
                                scrollTop: $(".credit-card-details").offset().top
                            },
                            "slow"),
                            r.blurFields()
                    },
                    200)
            },
            r.blurFields = function() {
                a.billing.email && ($("#_billingaddressInfo_userEmail").focus().blur(), $("#_billingaddressInfo_userEmail").parents(".input-control").addClass("focus")),
                a.billing.phone && ($("#_billingaddressInfo_userPhoneNo").focus().blur(), $("#_billingaddressInfo_userPhoneNo").parents(".input-control").addClass("focus"))
            },
            r.openLinkSection = function() {
                a.linkSectionMode = "edit"
            },
            r.blurFields(),
        !a.financingPubKey && a.isFinancingOn && "P" == a.financingStatus && e.getFinancingPubKey(t.PAGECONTEXT.COMMON).then(function(e) {
            a.financingPubKey = e
        }),
            r.linkTDAccount = function() {
                e.linkTDAccount(r.TDlinkForm, t.PAGECONTEXT.CART_INFO).then(function(e) {
                    var t = e.td_bank_finance.td_bank_existing_account.response.credit_application_response; ! t.application_status || "A" != t.application_status && "P" != t.application_status && "D" != t.application_status ? e.td_bank_finance.td_bank_existing_account.response.error && -1 != e.td_bank_finance.td_bank_existing_account.response.error.message.indexOf("FinanceAdapterRequestPayloadDecryptionFailed") ? a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description) : a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description) : (a.financingDetails = t, a.financingStatus = t.application_status, a.isSufficientCredit = t.available_credit > a.shoppingCart.cost.total.amount ? !0 : !1, a.applyFinancingToCart()),
                        a.$digest()
                }).fail(function(e) {
                    var t = JSON.parse(e.responseText);
                    "FinanceAdapterRequestPayloadDecryptionFailed" == t.error ? a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description) : a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description)
                })
            },
            r.changePayment = function() {
                a.linkSectionMode = "view"
            },
            r.payFinancing = function() {
                $("input[name=payMethod]:checked").removeAttr("checked"),
                    a.applyFinancingToCart(),
                    a.isPaymentOptionFinance = !0
            },
            r.sameAsShipping = function() {
                $("#_sameAsShipAddress").prop("checked") ? a.shoppingCart && a.shoppingCart.shipping_info && (a.billing = a.shoppingCart.shipping_info) : (a.billing = void 0, a.billing = {}),
                    p(function() {
                        $(".billing-address-details").trigger("click"),
                            a.$digest(),
                            $("#_sameAsShipAddress").prop("checked") ? a.shoppingCart && a.shoppingCart.shipping_info && ($(".checkout-form-fields input").focus().blur(), $("#_billingaddressInfo_userState").blur(), $("#_billingaddressInfo_userState").selectric()) : (a.billing.state_or_province = a.states[0], $("#_billingaddressInfo_userState").selectric(), r.cardForm.state.$setPristine(!1))
                    })
            },
            r.addNewPayment = function() {
                a.paymentMode = "edit",
                    a.billing = void 0,
                    a.cardInfo = {},
                    a.billing = {},
                    r.selectedPayment = void 0,
                    $("#_sameAsShipAddress").removeAttr("checked"),
                    a.billing.state_or_province = a.states[0],
                    p(function() {
                        a.$digest(),
                            $("#_billingaddressInfo_userState").selectric()
                    })
            },
        !a.isLoggedIn || a.contact && (a.contact.email || a.contact.phone) || e.getUserProfile().then(function(e) {
            e = JSON.parse(e),
            e && e.emailaddress && (a.contact || (a.contact = {}), a.contact.email = e.emailaddress, a.contact.phone = e.cellPhone || e.telePhone || e.workPhone, a.userEmail = e.emailaddress, a.billing || (a.billing = {}), a.billing.email = a.contact.email, a.billing.phone = a.contact.phone, a.$broadcast("userProfileAvailable"), a.$digest()),
                a.getUserProfileDone = !0,
                a.fireCheckoutTags()
        }),
            r.$on("disablePaypal",
                function() {
                    r.newCreditCard()
                }),
            a.selectDefaultPayment = function() {
                a.isLoggedIn && a.savedPayments.length > 0 && !a.shoppingCart.payment && "finance" != o.payment_source && ($("#saved-cc").eq(0).find("input").prop("checked", !0), r.onPaymentSelect(a.savedPayments[0]), u()),
                    a.applyShippingAndPayment(t.CHECKOUT_SECTION.PAYMENT),
                    p(function() {
                        a.$digest()
                    })
            },
            $("#_billingaddressInfo_userState").on("selectric-before-close",
                function() {
                    $("#_billingaddressInfo_userState").blur()
                })
    }]), checkoutApp.controller("CartPaymentCtrl", ["CheckoutService", "financingService", "constants", "errors", "updateUtilities", "$timeout", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location",
    function(e, t, n, i, r, a, o, s, c, l, d, p, u) {
        var f = new MobileDetect(window.navigator.userAgent),
            h = function(e, t) {
                return Number(Math.round(e + "e" + t) + "e-" + t)
            };
        if ($(".prefetch_spinner_container").hide(), o.changeHeader = function() {
                $(".gnb-b2c-promo-wrapper").hide(),
                (!f.mobile() || $(window).width() > 767) && ($(".gnb-b2c-mnav").append('<div class=".gnb-b2c-mnav checkout-payment-title for-desktop" id="checkout-header"></div>'), $("#checkout-header").siblings().hide(), $(".gnb-b2c-icons").hide())
            },
                o.changeHeader(), o.payment = {},
                s.billingFormvalid = !1, s.shippingFormvalid = !1, s.cardFormvalid = !1, s.contactFormvalid = !1, s.shippingMode = "disabled", s.shippingMethodMode = "disabled", s.paymentMode = "edit", s.paymentSource = c.payment_source, s.$watch("shippingMode + paymentMode + addedPayment",
                function() {
                    s.placeOrderEnabled = !s.cost || 0 != s.cost.total.amount || s.anyPremiumCareSubscriptionCart() || s.cartHasSubscription() ? "view" == s.shippingMode && "view" == s.paymentMode && s.addedPayment && !(s.addedPayment.paypal && "TxFailed" == s.addedPayment.paypal.paypal_status && (!s.isHAinCart || s.haAvailableInPaypalAddress)) : "view" == s.shippingMode && "disabled" == s.paymentMode,
                    s.placeOrderEnabled && $(".checkout-payment-placeorder").find(".btn-checkout").css({
                        transform: "translate3d(0,0,0)"
                    })
                }), s.isEppRedirect()) return void(window.location.href = window.SCart.URL.CHECKOUT_URL());
        s.registerUtag(),
            o.isPaypalRoute = function() {
                return "paypal" == s.paymentSource || "paypal-error" == s.paymentSource
            },
            o.init = function() {
                s.signin || (s.signin = {}),
                s.contact || (s.contact = {}),
                s.cardInfo || (s.cardInfo = {}),
                s.address || (s.address = {}),
                s.billing || (s.billing = {})
            },
            o.getSavedAddress = function() {
                e.getSavedShippingAddress(n.PAGECONTEXT.COMMON).then(function(e) {
                    s.savedAddress = e,
                        s.$digest(),
                        o.getSavedAddressDone = !0,
                        s.fireCheckoutTags()
                })
            },
            o.getSavedPayments = function() {
                e.getSavedPayments(n.PAGECONTEXT.COMMON).then(function(e) {
                    s.savedPayments = e,
                        s.$digest(),
                        o.getSavedPaymentsDone = !0,
                        s.fireCheckoutTags()
                })
            };
        var g = function(e) {
                return e && 0 == e.line_items
            },
            m = function() {
                u.path().indexOf("/cart-info/") < 0 && u.path("/cart-info/")
            },
            y = function(e) {
                s.$broadcast("refreshCart", e, !0),
                s.anyPremiumCareSubscriptionCart() || s.cartHasSubscription() || s.zerodollarchange(),
                    s.setPaymentOptions(),
                    o.initMode(e),
                    s.setFinancingDetails(e),
                s.isLoggedIn && (o.getSavedAddress(), o.getSavedPayments(), "finance" == c.payment_source && s.getCreditDetails("payment")),
                    s.$broadcast("saveImpression", s.shoppingCart, "new ecom step2|checkout"),
                    s.$broadcast("cartAvailable")
            };
        o.$on("refreshCart",
            function(e, t, n) {
                s.refreshCart(t, n),
                g(t) && m()
            }),
            o.$on("onUserLogin",
                function() {
                    o.paymentPageActions()
                }),
            o.initMode = function(t) {
                s.haAvailableInPaypalAddress = !1;
                var r = !1,
                    c = !1,
                    l = function() {
                        t.shipping_info ? (s.contact.email = t.shipping_info.email, s.contact.phone = t.shipping_info.phone) : t.billing_info && (s.contact.email = t.billing_info.email, s.contact.phone = t.billing_info.phone)
                    },
                    d = function() {
                        if (0 != t.cost.total.amount || s.anyPremiumCareSubscriptionCart() || s.cartHasSubscription()) {
                            if (t.payment && t.payment.billing_info && "TDFinancing" != t.payment.payment_method && (!t.payment.paypal || "TxSuccess" == t.payment.paypal.paypal_status)) {
                                var e = !0;
                                t.payment.paypal && !t.is_paypal_auth_valid && (e = !1, s.addedPayment = null),
                                e && (s.addedPayment = t.payment, s.paymentMode = "view", s.shippingMode = "edit")
                            }
                        } else s.paymentMode = "disabled",
                            s.addedPayment = {};
                        o.isPaypalRoute() && t.payment && t.payment.paypal ? "TxSuccess" == t.payment.paypal.paypal_status && "paypal-error" != s.paymentSource || "TxInitiated" == t.payment.paypal.paypal_status ? (s.paymentSource = "paypal", s.isHAinCart && f(!0)) : (s.paymentSource = "paypal-error", t.payment.paypal.paypal_status = "TxFailed", $(".checkout-payment-cc-details").hide(), s.$broadcast("paymentStepError", "Error during Paypal payment option.", "Please try some other payment option.")) : s.paymentSource = ""
                    },
                    p = function() {
                        t.shipping_info && (s.addedPayment || t.cost && t.cost.total.amount == h(t.cost.shipping.amount + t.cost.tax.amount, 2) && null == s.addedPayment) ? (r = !0, s.contact.email || (s.contact.email = t.shipping_info.email), s.contact.phone || (s.contact.phone = t.shipping_info.phone), s.selectedAddress = t.shipping_info, s.shippingMode = "view", s.shippingMethodMode = "edit") : s.addedPayment && !t.shipping_info && t.payment && t.payment.paypal && "TxSuccess" == t.payment.paypal.paypal_status && ("paypal" == s.paymentSource && s.$broadcast("paymentStepError", i.EmptyShippingInPaypal.title, i.EmptyShippingInPaypal.description), s.addedPayment = void 0, s.hidePaypal = !0, s.paymentSource = "", s.paymentMode = "edit", s.shippingMode = "disabled")
                    },
                    u = function() {
                        t.shipping_method && s.selectedAddress && (c = !0, s.selectedShippingMethod = t.shipping_method, s.shippingMethodMode = "edit")
                    },
                    f = function(r) {
                        var a = _.filter(s.cartItems,
                            function(e) {
                                return e.attributes.is_ha_delivery
                            }),
                            c = _.pluck(a, "sku_id");
                        e.getAvailableHomeDeliveryDates(c, t.shipping_info.postal_code, n.PAGECONTEXT.COMMON).then(function(e) {
                            e.length > 0 ? r ? (o.haAvailableInPaypalAddress = !0, s.placeOrderEnabled = !0) : g() : (r ? (o.haAvailableInPaypalAddress = !1, s.placeOrderEnabled = !1, s.addedPayment = void 0, s.hidePaypal = !1, s.paymentSource = "", s.paymentMode = "edit", s.shippingMode = "disabled", s.selectedAddress = void 0, s.shippingMethodMode = "disabled") : (s.selectedAddress = void 0, s.shippingMode = "edit"), s.$broadcast("paymentStepError", i.homeDeliveryPaymentError.title, i.homeDeliveryPaymentError.description)),
                                s.$digest()
                        }).E400(function() {
                            s.$broadcast("paymentStepError", i.homeDeliveryError.title, i.homeDeliveryError.description)
                        }).E401(function() {
                            s.$broadcast("paymentStepError", i.homeDeliveryError.title, i.homeDeliveryError.description)
                        }).E404(function() {
                            s.$broadcast("paymentStepError", i.homeDeliveryError.title, i.homeDeliveryError.description)
                        }).fail(function() {
                            o.$digest(),
                                s.$broadcast("paymentStepError", i.homeDeliveryError.title, i.homeDeliveryError.description)
                        })
                    },
                    g = function() {
                        p(),
                            u(),
                            a(function() {
                                r && s.$broadcast("addressUpdated", t, c),
                                    s.$digest()
                            })
                    };
                l(),
                    d(),
                    s.isHAinCart && t.shipping_info ? f(!1) : g()
            };
        var v = function() {
            var t = !1;
            e.getCartItems(n.PAGECONTEXT.COMMON, t).then(function(e) {
                o.getCartDone = !0,
                    s.fireCheckoutTags(),
                    y(e)
            }).fail(function() {
                s.$broadcast("paymentStepError", "We are unable to process your request at this time.", "Please try after sometime. Sorry for the inconvenience.");

            })
        };
        o.paymentPageActions = function() {
            if (s.financeSelected = !1, u.path().indexOf("/finance") > 0 && (s.financeSelected = !0), "paypal" != s.paymentSource && "paypal-error" != s.paymentSource && v(), o.isPaypalRoute()) {
                var t = "paypal" == c.payment_source ? "success": "cancelled";
                e.refreshCart({
                    status: t,
                    context: n.PAGECONTEXT.PAYMENT_INFO
                }).then(function(e) {
                    window.paypalLoaderText = !1,
                        y(e),
                    !e.payment || !e.payment.paypal || "TxSuccess" != e.payment.paypal.paypal_status || e.payment.billing_info && e.shipping_info || s.$broadcast("paymentStepError", i.InvalidShippingInPaypal.title, i.InvalidShippingInPaypal.description)
                }).E409(function(e) {
                    e = JSON.parse(e.responseText),
                        v(),
                        "InvalidShippingAddress" == e.error ? s.$broadcast("paymentStepError", i.InvalidShippingInPaypal.title, i.InvalidShippingInPaypal.description) : s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description)
                }).E404(function(e) {
                    e = JSON.parse(e.responseText),
                        v(),
                        "AddressNotFound" == e.error || "InvalidCity" == e.error ? s.$broadcast("paymentStepError", i.InvalidShippingInPaypal.title, i.InvalidShippingInPaypal.description) : s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description)
                }).E401(function(e) {
                    v(),
                        s.promptReLogin(e)
                }).fail(function(e) {
                    console.log("checkout error:" + e),
                        v(),
                        s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description)
                })
            }
            "paypal-error" == s.paymentSource && ($(".checkout-payment-cc-details").hide(), s.$broadcast("paymentStepError", "Error during Paypal payment option.", "Please try some other payment option.")),
            s.shoppingCart && s.cartItems && (o.initMode(s.shoppingCart), s.$broadcast("cartAvailable")),
                e.getShoppingCartPubKey(n.PAGECONTEXT.COMMON).then(function(e) {
                    o.getPubKeyDone = !0,
                        s.fireCheckoutTags(),
                        s.shoppingCartPubKey = e
                }),
                o.init(),
                a(function() {
                        $("select").selectric()
                    },
                    0)
        },
            s.fireCheckoutTags = function() {
                var e = new Date; ! s.isLoggedIn && o.getCartDone && o.getPubKeyDone && (newrelic.fireCustomPageLoadTag("checkout-pageload-guest", ((e.getTime() - s.checkoutCallTriggerTime) / 1e3).toFixed(2)), o.getCartDone = !1, o.getPubKeyDone = !1),
                s.isLoggedIn && o.getCartDone && o.getPubKeyDone && o.getSavedAddressDone && o.getSavedPaymentsDone && s.getUserProfileDone && (newrelic.fireCustomPageLoadTag("checkout-pageload-loggedInUser", ((e.getTime() - s.checkoutCallTriggerTime) / 1e3).toFixed(2)), o.getCartDone = !1, o.getPubKeyDone = !1, o.getSavedAddressDone = !1, o.getSavedPaymentsDone = !1, s.getUserProfileDone = !1)
            };
        var C = $.cookie("remoteId");
        C && "undefined" != C ? e.validateAuthToken(C).then(function(e) {
            var t = JSON.parse(e);
            "valid" != t.status ? (s.checkoutLoginMessage = i.ReLogin.title, window.SCart.sessionIdValid = !1, s.$digest()) : o.paymentPageActions()
        }).fail(function() {
            s.checkoutLoginMessage = i.ReLogin.title,
                window.SCart.sessionIdValid = !1,
                s.setRedirectPostLogin(p.current.$$route.name),
                window.location.href = window.SCart.URL.CHECKOUT_URL(),
                s.$digest()
        }) : o.paymentPageActions(),
            a(function() {
                    o.$digest()
                },
                0)
    }]), checkoutApp.controller("ContactInfoCtrl", ["CheckoutService", "constants", "errors", "$timeout", "updateUtilities", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location",
    function(e, t, n, i, r, a, o, s, c, l, d, p) {
        a.getuserInfo = function(t) {
            o.isLoggedIn = window.isLogin(),
                o.userName = window.getUserName(),
                o.isGuest = !1,
                o.contact.email = t,
                o.contact.phone = "",
                e.getUserProfile().then(function(e) {
                    e = JSON.parse(e),
                        o.contact.phone = e.cellPhone || e.telePhone || e.workPhone,
                    o.contact.phone && a.changeMode(),
                        o.$broadcast("profileInfoAvailable")
                }),
                o.$digest(),
                $(".checkout-user-login-box").animate({
                        opacity: 0
                    },
                    500),
                $(".checkout-user-login-box").hide(),
                window.GNB ? window.GNB.init() : window.gnbNavigation && window.gnbNavigation.init(),
                o.$broadcast("onUserLogin"),
                $(".checkout-user-login-box-holder").slideToggle()
        },
            a.login = function() {
                userName = o.signin.email,
                    password = o.signin.pswd,
                    userName = userName.toLowerCase(),
                    $(".generic-error").hide(),
                    SAuth.signIn(userName, password).then(function(e) {
                        e = JSON.parse(e),
                            e && e.token ? SAuth.authenticate(e.token, "hardcodedName").then(function(e) {
                                a.getuserInfo(userName),
                                    r.suppressUpSellIt()
                            }).fail(function(e) {
                                console.log("Invalid Login")
                            }) : (console.log("Invalid Login"), o.$broadcast("paymentStepError", n.LoginError.title, n.LoginError.description))
                    }).fail(function(e) {
                        console.log("Invalid Login")
                    })
            },
            a.onForgotPassowrd = function() {
                $(".generic-error").hide();
                window.open("https://sso-us.samsung.com/sso/profile/requestPassword.action?reqtype=resettkn", "ForgotPassword", "width=375,height=465")
            },
            a.validate = function(e) {
                e["class"] = e.$invalid ? "error focus": "focus valid",
                "Email" != e.$name || e.$invalid || (o.signin.email = e.$modelValue, o.contact.email = e.$modelValue),
                    e.$dirty = !0
            },
            a.onFocus = r.formOnFocus,
            a.validateCreds = function(e) {
                a.anotherEventFired = !1,
                    a.input = e,
                    i(function() {
                            a.anotherEventFired || a.validate(e)
                        },
                        200)
            },
            a.saveContactInfo = function(n, i) {
                var r = {
                    email: n,
                    phone: i
                };
                e.saveCustomAttributes(r, t.PAGECONTEXT.CONTACT_INFO)
            },
            a.changeMode = function() {
                $(".generic-error").hide(),
                    a.saveContactInfo(o.contact.email, o.contact.phone),
                    o.$broadcast("contactInfoUpdated"),
                    a.scrollToNext()
            },
            a.scrollToNext = function() {
                "view" == o.shippingMode && "view" == o.paymentMode && o.focusOnShippingMethods ? setTimeout(function() {
                        $("html, body").animate({
                                scrollTop: $("#_place_order").offset().top
                            },
                            "slow")
                    },
                    200) : "view" != o.shippingMode || "view" != o.paymentMode || o.focusOnShippingMethods ? setTimeout(function() {
                        $("html, body").animate({
                                scrollTop: $("#_card_info").offset().top
                            },
                            "slow")
                    },
                    200) : setTimeout(function() {
                        $("html, body").animate({
                                scrollTop: $("#_shipping_method").offset().top
                            },
                            "slow")
                    },
                    200)
            },
            a.toggleLogin = function() {
                $(".generic-error").hide(),
                    a.anotherEventFired = !0,
                    $(".checkout-user-login-box-holder").slideToggle(),
                window.utag && utag.link({
                    link_cat: "login",
                    link_id: "checkout_contact_information_login",
                    link_meta: "link_name:login",
                    link_position: "guest checkout>contact information"
                })
            },
            a.cancel = function() {
                $(".generic-error").hide(),
                    a.anotherEventFired = !0,
                    $(".checkout-user-login-box-holder").slideToggle(),
                window.utag && utag.link({
                    link_cat: "back",
                    link_id: "checkout_contact_information_back_to_guest_checkout",
                    link_meta: "link_name:back to guest checkout",
                    link_position: "checkout>contact information>login to your samsung account"
                })
            }
    }]), checkoutApp.controller("CartPaymentCtrlv3", ["CheckoutService", "financingService", "constants", "errors", "updateUtilities", "$timeout", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location",
    function(e, t, n, i, r, a, o, s, c, l, d, p, u) {
        var f = new MobileDetect(window.navigator.userAgent);
        if ($(".prefetch_spinner_container").hide(), o.changeHeader = function() {
                $(".gnb-b2c-promo-wrapper").hide(),
                (!f.mobile() || $(window).width() > 767) && ($(".gnb-b2c-mnav").append('<div class=".gnb-b2c-mnav checkout-payment-title for-desktop" id="checkout-header"></div>'), $("#checkout-header").siblings().hide(), $(".gnb-b2c-icons").hide())
            },
                o.changeHeader(), o.payment = {},
                s.billingFormvalid = !1, s.shippingFormvalid = !1, s.cardFormvalid = !1, s.contactFormvalid = !1, s.paymentSource = c.payment_source, s.$watch("shippingMode + paymentMode + addedPayment",
                function() {
                    s.placeOrderEnabled = !s.cost || 0 != s.cost.total.amount || s.anyPremiumCareSubscriptionCart() || s.cartHasSubscription() ? "view" == s.shippingMode && "view" == s.paymentMode && s.addedPayment && !(s.addedPayment.paypal && "TxFailed" == s.addedPayment.paypal.paypal_status && (!s.isHAinCart || s.haAvailableInPaypalAddress)) : "view" == s.shippingMode && "disabled" == s.paymentMode
                }), s.isEppRedirect()) return void(window.location.href = window.SCart.URL.CHECKOUT_URL());
        s.registerUtag(),
            o.isPaypalRoute = function() {
                return "paypal" == s.paymentSource || "paypal-error" == s.paymentSource
            },
            o.init = function() {
                s.signin || (s.signin = {}),
                s.contact || (s.contact = {}),
                s.cardInfo || (s.cardInfo = {}),
                s.address || (s.address = {}),
                s.billing || (s.billing = {})
            },
            o.getSavedAddress = function() {
                e.getSavedShippingAddress(n.PAGECONTEXT.COMMON).then(function(e) {
                    s.savedAddress = e,
                        o.shippingDone = !1,
                        s.selectDefaultAddress(),
                        s.$digest(),
                        o.getSavedAddressDone = !0,
                        s.fireCheckoutTags()
                })
            },
            o.getSavedPayments = function() {
                e.getSavedPayments(n.PAGECONTEXT.COMMON).then(function(e) {
                    s.savedPayments = e,
                        o.paymentDone = !1,
                        s.selectDefaultPayment(),
                        s.$digest(),
                        o.getSavedPaymentsDone = !0,
                        s.fireCheckoutTags()
                })
            };
        var h = function(e) {
                return e && 0 == e.line_items
            },
            g = function() {
                u.path().indexOf("/cart-info/") < 0 && u.path("/cart-info/")
            },
            m = function(e, t) {
                s.$broadcast("refreshCart", e, !0),
                s.anyPremiumCareSubscriptionCart() || s.cartHasSubscription() || s.zerodollarchange(),
                    s.setPaymentOptions(),
                    o.initMode(e),
                    s.setFinancingDetails(e),
                s.isLoggedIn && !t && (o.getSavedAddress(), o.getSavedPayments(), "finance" == c.payment_source && s.getCreditDetails("payment")),
                    s.$broadcast("saveImpression", s.shoppingCart, "new ecom step2|checkout"),
                    s.$broadcast("cartAvailable")
            };
        o.$on("refreshCart",
            function(e, t, n) {
                s.refreshCart(t, n),
                h(t) && g()
            }),
            o.$on("onUserLogin",
                function() {
                    o.paymentPageActions()
                }),
            o.initMode = function(t) {
                s.haAvailableInPaypalAddress = !1;
                var r = !1,
                    c = !1,
                    l = function() {
                        s.contact = s.contact || {},
                            t.shipping_info ? (s.contact.email = t.shipping_info.email, s.contact.phone = t.shipping_info.phone) : t.billing_info && (s.contact.email = t.billing_info.email, s.contact.phone = t.billing_info.phone)
                    },
                    d = function() {
                        if (0 != t.cost.total.amount || s.anyPremiumCareSubscriptionCart() || s.cartHasSubscription()) if (!t.payment || !t.payment.billing_info || "TDFinancing" == t.payment.payment_method || t.payment.paypal && "TxSuccess" != t.payment.paypal.paypal_status) s.paymentMode = "edit",
                            s.shippingMode = "edit",
                            s.shippingMethodMode = "edit";
                        else {
                            var e = !0;
                            t.payment.paypal && !t.is_paypal_auth_valid && (e = !1, s.addedPayment = null),
                            e && (s.addedPayment = t.payment, s.paymentMode = "view")
                        } else s.paymentMode = "disabled",
                            s.addedPayment = {};
                        o.isPaypalRoute() && t.payment && t.payment.paypal ? "TxSuccess" != t.payment.paypal.paypal_status || "paypal-error" == s.paymentSource ? (s.paymentSource = "paypal-error", t.payment.paypal.paypal_status = "TxFailed", $(".checkout-payment-cc-details").hide(), s.$broadcast("paymentStepError", "Error during Paypal payment option.", "Please try some other payment option.")) : (s.paymentSource = "paypal", s.isHAinCart && f(!0)) : s.paymentSource = ""
                    },
                    p = function() {
                        t.shipping_info ? (r = !0, s.contact.email || (s.contact.email = t.shipping_info.email), s.contact.phone || (s.contact.phone = t.shipping_info.phone), s.selectedAddress = t.shipping_info, s.shippingMode = "view") : s.addedPayment && !t.shipping_info && t.payment && t.payment.paypal && "TxSuccess" == t.payment.paypal.paypal_status && ("paypal" == s.paymentSource && s.$broadcast("paymentStepError", i.EmptyShippingInPaypal.title, i.EmptyShippingInPaypal.description), s.addedPayment = void 0, s.hidePaypal = !0, s.paymentSource = "", s.paymentMode = "edit", s.shippingMode = "disabled")
                    },
                    u = function() {
                        t.shipping_method && s.selectedAddress && (c = !0, s.selectedShippingMethod = t.shipping_method, s.shippingMethodMode = "view")
                    },
                    f = function(r) {
                        var a = _.filter(s.cartItems,
                            function(e) {
                                return e.attributes.is_ha_delivery
                            }),
                            c = _.pluck(a, "sku_id");
                        e.getAvailableHomeDeliveryDates(c, t.shipping_info.postal_code, n.PAGECONTEXT.COMMON).then(function(e) {
                            e.length > 0 ? r ? (o.haAvailableInPaypalAddress = !0, s.placeOrderEnabled = !0) : h() : (r ? (o.haAvailableInPaypalAddress = !1, s.placeOrderEnabled = !1, s.addedPayment = void 0, s.hidePaypal = !1, s.paymentSource = "", s.paymentMode = "edit", s.shippingMode = "edit", s.selectedAddress = void 0, s.shippingMethodMode = "edit") : (s.selectedAddress = void 0, s.shippingMode = "edit", s.paymentMode = "edit"), s.estimatedDeliveryDateMsg = "Major Appliance delivery not available for zipcode " + t.shipping_info.postal_code, s.$broadcast("paymentStepError", i.homeDeliveryPaymentError.title, i.homeDeliveryPaymentError.description, !0)),
                                s.$digest()
                        }).E400(function(e) {
                            e = JSON.parse(e.responseText),
                                s.$broadcast("paymentStepError", i.homeDeliveryError.title, i.homeDeliveryError.description)
                        }).E401(function() {
                            s.$broadcast("paymentStepError", i.homeDeliveryError.title, i.homeDeliveryError.description)
                        }).E404(function(e) {
                            e = JSON.parse(e.responseText),
                                s.$broadcast("paymentStepError", i.homeDeliveryError.title, i.homeDeliveryError.description)
                        }).fail(function() {
                            o.$digest(),
                                s.$broadcast("paymentStepError", i.homeDeliveryError.title, i.homeDeliveryError.description)
                        })
                    },
                    h = function() {
                        p(),
                            u(),
                            a(function() {
                                r && s.$broadcast("addressUpdated", t, c),
                                    s.$broadcast("shippingOptionsFetched", t, c),
                                    s.$digest()
                            })
                    };
                l(),
                    d(),
                    s.isHAinCart && t.shipping_info ? f(!1) : h()
            };
        var y = function(t) {
            var i = !1;
            e.getCartItems(n.PAGECONTEXT.COMMON, i).then(function(e) {
                o.getCartDone = !0,
                    s.fireCheckoutTags(),
                    m(e, t)
            }).fail(function() {
                s.$broadcast("paymentStepError", "We are unable to process your request at this time.", "Please try after sometime. Sorry for the inconvenience.")
            })
        };
        o.paymentPageActions = function() {
            if (s.financeSelected = !1, u.path().indexOf("/finance") > 0 && (s.financeSelected = !0), "paypal" != s.paymentSource && "paypal-error" != s.paymentSource && y(), o.isPaypalRoute()) {
                var t = "paypal" == c.payment_source ? "success": "cancelled";
                e.refreshCart({
                    status: t,
                    context: n.PAGECONTEXT.PAYMENT_INFO
                }).then(function(e) {
                    window.paypalLoaderText = !1,
                        m(e),
                    !e.payment || !e.payment.paypal || "TxSuccess" != e.payment.paypal.paypal_status || e.payment.billing_info && e.shipping_info || s.$broadcast("paymentStepError", i.InvalidShippingInPaypal.title, i.InvalidShippingInPaypal.description)
                }).E409(function(e) {
                    e = JSON.parse(e.responseText),
                        y(),
                        "InvalidShippingAddress" == e.error ? s.$broadcast("paymentStepError", i.InvalidShippingInPaypal.title, i.InvalidShippingInPaypal.description) : s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description)
                }).E401(function(e) {
                    y(),
                        s.promptReLogin(e)
                }).fail(function(e) {
                    console.log("checkout error:" + e),
                        y(),
                        s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description)
                })
            }
            "paypal-error" == s.paymentSource && ($(".checkout-payment-cc-details").hide(), s.$broadcast("paymentStepError", "Error during Paypal payment option.", "Please try some other payment option.")),
            s.shoppingCart && s.cartItems && (o.initMode(s.shoppingCart), s.$broadcast("cartAvailable")),
                e.getShoppingCartPubKey(n.PAGECONTEXT.COMMON).then(function(e) {
                    o.getPubKeyDone = !0,
                        s.fireCheckoutTags(),
                        s.shoppingCartPubKey = e
                }),
                o.init(),
                a(function() {
                        $("select").selectric()
                    },
                    0)
        },
            s.fireCheckoutTags = function() {
                var e = new Date; ! s.isLoggedIn && o.getCartDone && o.getPubKeyDone && (newrelic.fireCustomPageLoadTag("checkout-pageload-guest", ((e.getTime() - s.checkoutCallTriggerTime) / 1e3).toFixed(2)), o.getCartDone = !1, o.getPubKeyDone = !1),
                s.isLoggedIn && o.getCartDone && o.getPubKeyDone && o.getSavedAddressDone && o.getSavedPaymentsDone && s.getUserProfileDone && (newrelic.fireCustomPageLoadTag("checkout-pageload-loggedInUser", ((e.getTime() - s.checkoutCallTriggerTime) / 1e3).toFixed(2)), o.getCartDone = !1, o.getPubKeyDone = !1, o.getSavedAddressDone = !1, o.getSavedPaymentsDone = !1, s.getUserProfileDone = !1)
            };
        var v = $.cookie("remoteId");
        v && "undefined" != v ? e.validateAuthToken(v).then(function(e) {
            var t = JSON.parse(e);
            "valid" != t.status ? (s.checkoutLoginMessage = i.ReLogin.title, window.SCart.sessionIdValid = !1, s.$digest()) : o.paymentPageActions()
        }).fail(function() {
            s.checkoutLoginMessage = i.ReLogin.title,
                window.SCart.sessionIdValid = !1,
                s.setRedirectPostLogin(p.current.$$route.name),
                window.location.href = window.SCart.URL.CHECKOUT_URL(),
                s.$digest()
        }) : o.paymentPageActions(),
            a(function() {
                    o.$digest()
                },
                0),
            o.isCartPaymentFinancing = function() {
                return s.shoppingCart && s.shoppingCart.payment && s.shoppingCart.payment.payment_method ? s.shoppingCart.payment.payment_method.toUpperCase() == n.TD_FINANCING_PAYMENT_METHOD: void 0
            },
            s.placeOrder = function() {
                var t = $.cookie("remoteId");
                t && "undefined" != t ? e.validateAuthToken(t).then(function(t) {
                    var r = JSON.parse(t);
                    "valid" == r.status ? o.isCartPaymentFinancing() ? e.getFinancingStatus(n.PAGECONTEXT.CART_FINANCE).then(function(e) {
                        _.forEach(e,
                            function(e) {
                                "EComProgram" == e.finance_program && (s.financingDetails = e, s.financingDetails.available_credit < s.shoppingCart.cost.total.amount ? (s.$broadcast("paymentStepError", i.PaymentNeedToBeReApplied.title, i.PaymentNeedToBeReApplied.description), s.paymentMode = "edit", a(function() {
                                        s.$digest()
                                    },
                                    0)) : s.handleCheckout())
                            })
                    }) : s.handleCheckout() : (s.checkoutLoginMessage = i.ReLogin.title, s.redirectPostLogin = n.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER, window.SCart.sessionIdValid = !1, window.location.href = window.SCart.URL.CHECKOUT_URL(), s.$digest())
                }).fail(function() {
                    s.checkoutLoginMessage = i.ReLogin.title,
                        s.redirectPostLogin = n.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER,
                        window.SCart.sessionIdValid = !1,
                        window.location.href = window.SCart.URL.CHECKOUT_URL(),
                        s.$digest()
                }) : s.handleCheckout()
            };
        var C = window.location.hostname;
        o.paypalEnv = "production",
        ( - 1 != C.indexOf("devus") || -1 != C.indexOf("stgwww") || -1 != C.indexOf("stgweb") || -1 != C.indexOf("local")) && (o.paypalEnv = "sandbox"),
            o.client = o.paypalEnv,
            o.payment = function() {
                return s.paypalToken
            },
            o.onAuthorize = function(t) {
                var r = t && t.paymentToken ? "success": "cancelled";
                e.refreshCart({
                    status: r,
                    context: n.PAGECONTEXT.PAYMENT_INFO
                }).then(function(e) {
                    window.paypalLoaderText = !1,
                        m(e, !0),
                    !e.payment || !e.payment.paypal || "TxSuccess" != e.payment.paypal.paypal_status || e.payment.billing_info && e.shipping_info || s.$broadcast("paymentStepError", i.InvalidShippingInPaypal.title, i.InvalidShippingInPaypal.description)
                }).E409(function(e) {
                    e = JSON.parse(e.responseText),
                        y(!0),
                        "InvalidShippingAddress" == e.error ? s.$broadcast("paymentStepError", i.InvalidShippingInPaypal.title, i.InvalidShippingInPaypal.description) : s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description)
                }).E404(function(e) {
                    e = JSON.parse(e.responseText),
                        y(!0),
                        "AddressNotFound" == e.error || "InvalidCity" == e.error ? s.$broadcast("paymentStepError", i.InvalidShippingInPaypal.title, i.InvalidShippingInPaypal.description) : s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description)
                }).E401(function(e) {
                    y(!0),
                        s.promptReLogin(e)
                }).fail(function(e) {
                    console.log("checkout error:" + e),
                        y(!0),
                        s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description)
                })
            },
            o.getAvailableDatesForOrder = function(t) {
                e.getAvailableDatesForOrder(t, n.PAGECONTEXT.THANKYOU_PAGE).then(function(e) {
                    e && e.length > 0 ? (s.earliestDate = e[0], o.scheduleInstallationForOrder(t)) : o.orderConfirmationPage()
                }).fail(function() {
                    o.orderConfirmationPage()
                })
            },
            o.orderConfirmationPage = function() {
                a(function() {
                    u.path("/order-confirm/" + s.cartId)
                })
            },
            o.scheduleInstallationForOrder = function(t) {
                var i = {};
                "object" == typeof s.earliestDate ? (i.request_delivery_date = s.earliestDate.start_date, s.earliestDate.end_date && s.earliestDate.start_date != s.earliestDate.end_date && (i.end_date = s.earliestDate.end_date)) : i.request_delivery_date = s.earliestDate,
                    e.scheduleInstallation(t, i, n.PAGECONTEXT.ORDER).then(function(e) {
                        e.data.options && (s.earliestDate = e.data.options.request_delivery_date),
                            s.shoppingCart.options = e.data.options,
                            o.orderConfirmationPage()
                    }).fail(function() {
                        s.earliestDate = "",
                            o.orderConfirmationPage()
                    })
            },
            s.handleCheckout = function() {
                var t = new Date;
                s.submitCartCallTriggerTime = t.getTime(),
                    e.checkout(!s.isLoggedIn, n.PAGECONTEXT.ORDER).then(function(e) {
                        if (s.orderId = e.displayOrderId, s.selectedShippingMethod = e.shipping_method, e.shipping_method && (s.selectedShippingMethod.displayText = s.shippingOptionsText[e.shipping_method.description]), s.shippingAddress = e.shipping_info, s.addedPayment = e.payment, s.refreshCart(e, !1), s.cartId = e.cart_id, s.isHAinCart ? s.earliestDate ? o.scheduleInstallationForOrder(e.cart_id) : o.getAvailableDatesForOrder(e.cart_id) : o.orderConfirmationPage(), $(".cart-basket").text(""), s.isIE() ? ($(".gnb-b2c-icons-cart a svg").remove(), $(".gnb-b2c-icons-cart a").prepend('<svg viewBox="0 0 100 100" id="cart-open"><circle cx="28" cy="90" r="10"/><circle cx="86" cy="90" r="10"/><path d="M86 14v42H28V13.86C28 6.205 21.794 0 14.14 0H0v14h14v42c0 7.732 6.268 14 14 14h58c7.732 0 14-6.268 14-14V14H86z"/></svg>')) : $(".gnb-b2c-icons-cart a svg use").attr("xlink:href", "/us/resources/navigation/assets/images/sprite.symbol.svg#cart-open"), $.cookie("s_ecom_sc_cnt", 0, {
                                path: "/",
                                domain: ".samsung.com"
                            }), s.$digest(), "object" == typeof newrelic) {
                            var t = new Date;
                            newrelic.fireCustomPageLoadTag("order-confirm-checkout", ((t.getTime() - s.submitCartCallTriggerTime) / 1e3).toFixed(2))
                        }
                        o.$apply()
                    }).E405(function(e) {
                        s.utagLink(),
                            e = JSON.parse(e.responseText),
                        e && s.isJsonString(e.message) && (e = JSON.parse(e.message)),
                            i[e.error] ? s.$broadcast("paymentStepError", i[e.error].title, i[e.error].description) : s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description)
                    }).E409(function(t) {
                        s.utagLink(),
                            t = JSON.parse(t.responseText),
                        t && s.isJsonString(t.message) && (t = JSON.parse(t.message)),
                            "PurchaseFlowCannotBeModified" == t.error ? s.$broadcast("paymentStepError", i.PurchaseFlowCannotBeModified.title, i.PurchaseFlowCannotBeModified.description) : "CartHasChanged" == t.error ? s.$broadcast("paymentStepError", i.CartHasBeenChanged.title, i.CartHasBeenChanged.description) : "CartPaymentFailure" == t.error ? s.$broadcast("paymentStepError", i.CartPaymentFailure.title, i.CartPaymentFailure.description) : "InventoryUnavailable" == t.error || "HasOutOfStockItems" == t.error || "SoftAllocationFailed" == t.error ? t.message ? s.$broadcast("paymentStepError", i.OutOfStockOnSubmitCart.title, t.message) : t.shopping_cart && o.handleOutOfStock(t.shopping_cart) : "PromoCodeError" == t.error ? s.$broadcast("paymentStepError", i.PromoCodeError.title, i.PromoCodeError.description) : "AssurantWarrantyInfoIsRequired" == t.error || "InvalidAssurantOrder" == t.error ? s.$broadcast("paymentStepError", i.AssurantWarrantyInfoIsRequired.title, i.AssurantWarrantyInfoIsRequired.description) : "CartChangedDuringOrderSubmission" == t.error ? e.getCartItems(n.PAGECONTEXT.CART_CHANGED).then(function(e) {
                                s.$broadcast("paymentStepError", i.CartChangedDuringOrderSubmission.title, i.CartChangedDuringOrderSubmission.description),
                                    s.refreshCart(e)
                            }).fail(function() {
                                s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description)
                            }) : "PaymentOptionNotSavedForTradeIn" == t.error ? s.$broadcast("paymentStepError", "Error during place order.", "Please try again after some time.") : "CartNotComplete" == t.error ? s.$broadcast("paymentStepError", i.CartNotComplete.title, i.CartNotComplete.description) : "PromoNotApplicableWithoutTradeIn" == t.error ? s.$broadcast("paymentStepError", i.PromoNotApplicableWithoutTradeIn.title, i.PromoNotApplicableWithoutTradeIn.description) : "CartLineItemLimitReached" == t.error ? s.$broadcast("paymentStepError", i.CartLineItemLimitReached.title, i.CartLineItemLimitReached.description) : "InvalidSamsungUpgradeCart" == t.error ? s.$broadcast("paymentStepError", i.InvalidSamsungUpgradeCart.title, i.InvalidSamsungUpgradeCart.description) : "InvalidUpgradeLineItem" == t.error ? s.$broadcast("paymentStepError", i.InvalidUpgradeLineItem.title, i.InvalidUpgradeLineItem.description) : "CartSkuLimitReached" == t.error ? s.$broadcast("paymentStepError", i.CartSkuLimitReached.title, i.CartSkuLimitReached.description) : "MultipleSUPOrdersInDay" == t.error ? s.$broadcast("paymentStepError", i.MultipleSUPOrdersInDay.title, i.MultipleSUPOrdersInDay.description) : "PaymentNeedToBeReApplied" == t.error || "CartReplayed" == t.error ? (s.$broadcast("paymentStepError", i.PaymentNeedToBeReApplied.title, i.PaymentNeedToBeReApplied.description), s.paymentMode = "edit", $("#_paymentTypeCC").prop("checked", !0), a(function() {
                                    s.$digest()
                                },
                                0)) : s.$broadcast("paymentStepError", "Error during place order.", "Please try again after some time.")
                    }).E401(function(e) {
                        s.redirectPostLogin = n.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER,
                            s.promptReLogin(e)
                    }).E400(function(e) {
                        s.utagLink(),
                            s.$broadcast("paymentStepError", i.SubmitCartError.title, i.SubmitCartError.description)
                    }).fail(function(e) {
                        s.utagLink(),
                            s.paymentSource = "",
                            s.$digest(),
                            s.$broadcast("paymentStepError", "Error during place order.", "Please try again after some time.")
                    })
            },
            o.computeCTA = function() {
                o.shippingDone = !1,
                    o.paymentDone = !1;
                var t = [];
                s.paymentCTA && s.cost && 0 != s.cost.total.amount && (t = t.concat(s.paymentCTA)),
                s.shippingCTA && (t = t.concat(s.shippingCTA)),
                t && t.length > 0 && e.shoppingCartCTA(t, "apply-payment-call").then(function(e) {
                    delete s.paymentCTA,
                        delete s.shippingCTA;
                    var t = e.length;
                    if (t > 0) {
                        var n = e[t - 1];
                        s.$broadcast("refreshCart", n, !1),
                        n.payment && ("TDFinancing" != n.payment.payment_method || "TDFinancing" == n.payment.payment_method && "finance" == c.payment_source) && (s.addedPayment = n.payment, s.paymentMode = "view", s.paymentSource = ""),
                        n.shipping_info && (s.$broadcast("contactInfoUpdated"), s.$broadcast("addressApplied"), s.selectedAddress || (s.selectedAddress = o.address), s.selectedAddress.phone = n.shipping_info.phone, s.selectedAddress.email = n.shipping_info.email, s.$broadcast("addressUpdated", n), s.shippingMode = "view", s.focusOnShippingMethods = !1),
                        s.isHAinCart && s.$broadcast("isHomeDeliveryAvailableShippingMethod", s.addedPayment.billing_info.postal_code, !0),
                            s.$digest()
                    }
                }).addPaymentHandler(function(e) {
                    delete s.paymentCTA,
                        delete s.shippingCTA;
                    var t = e.status;
                    400 == t ? s.$broadcast("paymentStepError", i.InvalidCreditCard.title, i.InvalidCreditCard.description) : 401 == t ? s.promptReLogin(e) : 409 == t ? s.$broadcast("paymentStepError", i.InvalidCreditCard.title, i.InvalidCreditCard.description) : (window.utag && utag.link({
                        link_cat: "CC error response",
                        link_id: "checkout_payment_information_CC_error_response",
                        link_meta: "link_name:CC error response",
                        link_position: "payment position"
                    }), s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description))
                }).addShippingAddressHandler(function(e) {
                    delete s.paymentCTA,
                        delete s.shippingCTA;
                    var t = {},
                        n = e.status;
                    400 == n ? (t = JSON.parse(e.responseText), t = t.error || JSON.parse(t.message).error, "DisallowedShippingAddress" == t ? s.$broadcast("paymentStepError", i.DisallowedShippingAddress.title, i.DisallowedShippingAddress.description) : "DisallowedPostalCode" == t ? s.$broadcast("paymentStepError", i.ShippingDisallowedPostalCode.title, i.ShippingDisallowedPostalCode.description) : "DisallowedShippingCity" == t ? s.$broadcast("paymentStepError", i.DisallowedShippingCity.title, i.DisallowedShippingCity.description) : "DisallowedShippingState/Province" == t ? s.$broadcast("paymentStepError", i.DisallowedShippingStateProvince.title, i.DisallowedShippingStateProvince.description) : s.$broadcast("paymentStepError", i.BadRequestDefaultError.title, i.BadRequestDefaultError.description)) : 401 == n ? s.promptReLogin(e) : 404 == n || (409 == n ? (t = JSON.parse(e.responseText), t = t.error || JSON.parse(t.message).error, "PurchaseFlowCannotBeModified" == t ? s.$broadcast("paymentStepError", i.PurchaseFlowCannotBeModified.title, i.PurchaseFlowCannotBeModified.description) : "ItemOutOfStock" == t ? s.$broadcast("paymentStepError", i.ItemOutOfStock.title, i.ItemOutOfStock.description) : s.$broadcast("paymentStepError", i.AddressAlreadyInAddressList.title, i.AddressAlreadyInAddressList.description)) : s.$broadcast("paymentStepError", "Error in validating shipping address", "The provided shipping address is not allowed"))
                }).fail(function() {
                    delete s.paymentCTA,
                        delete s.shippingCTA,
                        s.$broadcast("paymentStepError", i.defaultError.title, i.defaultError.description)
                })
            },
            s.applyShippingAndPayment = function(e) {
                e == n.CHECKOUT_SECTION.SHIPPING ? o.shippingDone = !0 : e == n.CHECKOUT_SECTION.PAYMENT && (o.paymentDone = !0),
                o.shippingDone && o.paymentDone && o.computeCTA()
            }
    }]), checkoutApp.controller("PaymentInfoCtrl", ["PaymentService", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location",
    function(e, t, n, i, r, a, o, s) {
        t.updatePayOption = function(e) {
            n.cardOption = "Credit or Debit Card" != e ? !1 : !0
        }
    }]), checkoutApp.controller("PlaceorderCtrl", ["PaymentService", "constants", "CheckoutService", "updateUtilities", "errors", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "$timeout", "calendarUtil",
    function(e, t, n, i, r, a, o, s, c, l, d, p, u, f) {
        o.redirectPostLogin = o.redirectPostLogin || null,
            o.utagLink = function() {
                window.utag && utag.link({
                    link_cat: "validation error",
                    link_id: "checkout_validation_error",
                    link_meta: "link_name:validation_error",
                    link_position: "checkout"
                })
            },
            o.placeOrder = function() {
                if (o.placeOrderEnabled) {
                    var e = $.cookie("remoteId");
                    e && "undefined" != e ? n.validateAuthToken(e).then(function(e) {
                        var n = JSON.parse(e);
                        "valid" == n.status ? o.handleCheckout() : (o.checkoutLoginMessage = r.ReLogin.title, o.redirectPostLogin = t.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER, window.SCart.sessionIdValid = !1, window.location.href = window.SCart.URL.CHECKOUT_URL(), o.$digest())
                    }).fail(function(e) {
                        o.checkoutLoginMessage = r.ReLogin.title,
                            o.redirectPostLogin = t.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER,
                            window.SCart.sessionIdValid = !1,
                            window.location.href = window.SCart.URL.CHECKOUT_URL(),
                            o.$digest()
                    }) : o.handleCheckout()
                }
            },
            a.getAvailableDatesForOrder = function(e) {
                n.getAvailableDatesForOrder(e, t.PAGECONTEXT.THANKYOU_PAGE).then(function(t) {
                    t && t.length > 0 ? (o.earliestDate = t[0], a.scheduleInstallationForOrder(e)) : a.orderConfirmationPage()
                }).fail(function(e) {
                    a.orderConfirmationPage()
                })
            },
            a.orderConfirmationPage = function() {
                u(function() {
                    p.path("/order-confirm/" + o.cartId)
                })
            },
            a.scheduleInstallationForOrder = function(e) {
                var i = {};
                "object" == typeof o.earliestDate ? (i.request_delivery_date = o.earliestDate.start_date, o.earliestDate.end_date && o.earliestDate.start_date != o.earliestDate.end_date && (i.end_date = o.earliestDate.end_date)) : i.request_delivery_date = o.earliestDate,
                    n.scheduleInstallation(e, i, t.PAGECONTEXT.ORDER).then(function(e) {
                        e.data.options && (o.earliestDate = e.data.options.request_delivery_date),
                            o.shoppingCart.options = e.data.options,
                            a.orderConfirmationPage()
                    }).fail(function(e) {
                        o.earliestDate = "",
                            a.orderConfirmationPage()
                    })
            },
            o.handleCheckout = function() {
                var e = new Date;
                o.submitCartCallTriggerTime = e.getTime(),
                    n.checkout(!o.isLoggedIn, t.PAGECONTEXT.ORDER).then(function(e) {
                        if (o.orderId = e.displayOrderId, o.selectedShippingMethod = e.shipping_method, e.shipping_method && (o.selectedShippingMethod.displayText = o.shippingOptionsText[e.shipping_method.description]), o.shippingAddress = e.shipping_info, o.addedPayment = e.payment, o.refreshCart(e, !1), o.cartId = e.cart_id, o.isHAinCart ? o.earliestDate ? a.scheduleInstallationForOrder(e.cart_id) : a.getAvailableDatesForOrder(e.cart_id) : a.orderConfirmationPage(), $(".cart-basket").text(""), o.isIE() ? ($(".gnb-b2c-icons-cart a svg").remove(), $(".gnb-b2c-icons-cart a").prepend('<svg viewBox="0 0 100 100" id="cart-open"><circle cx="28" cy="90" r="10"/><circle cx="86" cy="90" r="10"/><path d="M86 14v42H28V13.86C28 6.205 21.794 0 14.14 0H0v14h14v42c0 7.732 6.268 14 14 14h58c7.732 0 14-6.268 14-14V14H86z"/></svg>')) : $(".gnb-b2c-icons-cart a svg use").attr("xlink:href", "/us/resources/navigation/assets/images/sprite.symbol.svg#cart-open"), $.cookie("s_ecom_sc_cnt", 0, {
                                path: "/",
                                domain: ".samsung.com"
                            }), o.$digest(), "object" == typeof newrelic) {
                            var t = new Date;
                            newrelic.fireCustomPageLoadTag("order-confirm-checkout", ((t.getTime() - o.submitCartCallTriggerTime) / 1e3).toFixed(2))
                        }
                        a.$apply()
                    }).E405(function(e) {
                        o.utagLink(),
                            e = JSON.parse(e.responseText),
                        e && o.isJsonString(e.message) && (e = JSON.parse(e.message)),
                            r[e.error] ? o.$broadcast("paymentStepError", r[e.error].title, r[e.error].description) : o.$broadcast("paymentStepError", r.defaultError.title, r.defaultError.description)
                    }).E409(function(e) {
                        o.utagLink(),
                            e = JSON.parse(e.responseText),
                        e && o.isJsonString(e.message) && (e = JSON.parse(e.message)),
                            "PurchaseFlowCannotBeModified" == e.error ? o.$broadcast("paymentStepError", r.PurchaseFlowCannotBeModified.title, r.PurchaseFlowCannotBeModified.description) : "CartHasChanged" == e.error ? o.$broadcast("paymentStepError", r.CartHasBeenChanged.title, r.CartHasBeenChanged.description) : "CartPaymentFailure" == e.error ? o.$broadcast("paymentStepError", r.CartPaymentFailure.title, r.CartPaymentFailure.description) : "InventoryUnavailable" == e.error || "HasOutOfStockItems" == e.error || "SoftAllocationFailed" == e.error ? e.message ? o.$broadcast("paymentStepError", r.OutOfStockOnSubmitCart.title, e.message) : e.shopping_cart && a.handleOutOfStock(e.shopping_cart) : "PromoCodeError" == e.error ? o.$broadcast("paymentStepError", r.PromoCodeError.title, r.PromoCodeError.description) : "AssurantWarrantyInfoIsRequired" == e.error || "InvalidAssurantOrder" == e.error ? o.$broadcast("paymentStepError", r.AssurantWarrantyInfoIsRequired.title, r.AssurantWarrantyInfoIsRequired.description) : "CartChangedDuringOrderSubmission" == e.error ? n.getCartItems(t.PAGECONTEXT.CART_CHANGED).then(function(e) {
                                o.$broadcast("paymentStepError", r.CartChangedDuringOrderSubmission.title, r.CartChangedDuringOrderSubmission.description),
                                    o.refreshCart(e)
                            }).fail(function() {
                                o.$broadcast("paymentStepError", r.defaultError.title, r.defaultError.description)
                            }) : "PaymentOptionNotSavedForTradeIn" == e.error ? o.$broadcast("paymentStepError", "Error during place order.", "Please try again after some time.") : "CartNotComplete" == e.error ? o.$broadcast("paymentStepError", r.CartNotComplete.title, r.CartNotComplete.description) : "PromoNotApplicableWithoutTradeIn" == e.error ? o.$broadcast("paymentStepError", r.PromoNotApplicableWithoutTradeIn.title, r.PromoNotApplicableWithoutTradeIn.description) : o.$broadcast("paymentStepError", "Error during place order.", "Please try again after some time.");

                    }).E401(function(e) {
                        o.redirectPostLogin = t.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER,
                            o.promptReLogin(e)
                    }).E400(function(e) {
                        o.utagLink(),
                            o.$broadcast("paymentStepError", r.SubmitCartError.title, r.SubmitCartError.description)
                    }).fail(function(e) {
                        o.utagLink(),
                            o.paymentSource = "",
                            o.$digest(),
                            o.$broadcast("paymentStepError", "Error during place order.", "Please try again after some time.")
                    })
            },
            a.handleOutOfStock = function(e) {
                o.submitAlert = e.user_alerts,
                    o.refreshCart(e)
            },
        o.redirectPostLogin == t.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER && (o.redirectPostLogin = null, o.placeOrder())
    }]), checkoutApp.controller("SamsungSignInCtrl", ["PaymentService", "updateUtilities", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location",
    function(e, t, n, i, r, a, o, s, c) {
        n.login = function() {
            userName = i.signin.email,
                password = i.signin.pswd,
                SAuth.signIn(userName, password).then(function(e) {
                    e = JSON.parse(e),
                        e && e.token ? SAuth.authenticate(e.token, "hardcodedName").then(function(e) {
                            i.isLoggedIn = window.isLogin(),
                                i.userName = window.getUserName(),
                                i.isGuest = !1,
                                n.toggleLogin(),
                                i.$digest(),
                                t.suppressUpSellIt(),
                                window.GNB ? window.GNB.init() : window.gnbNavigation && window.gnbNavigation.init(),
                                i.$broadcast("onUserLogin")
                        }).fail(function(e) {
                            console.log("Invalid Login")
                        }) : (console.log("Invalid Login"), $(".btn-login").notify("Invalid Email Address/Password", {
                            position: "t c",
                            className: "error"
                        }))
                }).fail(function(e) {
                    console.log("Invalid Login")
                })
        },
            n.validate = function(e) {
                e["class"] = e.$invalid ? "error focus": "focus valid",
                    e.$dirty = !0
            },
            n.toggleLogin = function() {
                $(".checkout-user-login-box").toggle()
            },
            n.onForgotPassowrd = function() {
                window.open("https://sso-us.samsung.com/sso/profile/requestPassword.action?reqtype=resettkn", "ForgotPassword", "width=375,height=465")
            },
            n.onFocus = t.formOnFocus
    }]), checkoutApp.controller("UserAddressInfoCtrl", ["CheckoutService", "constants", "errors", "updateUtilities", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location",
    function(e, t, n, i, r, a, o, s, c, l, d) {
        function p(e) {
            var t = e.siblings(".existing-shipping-address").find(".delete-section");
            _.each(t,
                function(e) {
                    u(!1, $(e))
                })
        }
        function u(e, t) {
            e ? (t.find(".btn-remove").hide(), t.find(".delete-dialogue-box").show()) : (t.find(".btn-remove").show(), t.find(".delete-dialogue-box").hide())
        }
        function f(n) {
            e.deleteShippingAddress(n, t.PAGECONTEXT.SHIPPING_INFO).then(function(e) {
                $("." + n).parent().hide()
            }).fail(function(e) {
                a.$broadcast("paymentStepError", "Error in deleting shipping address", "Please try again")
            })
        }
        r.haNotAvailable = !1;
        var h = function() {
            a.isLoggedIn && (r.address.email || (r.address.email = a.contact.email), r.address.phone || (r.address.phone = a.contact.phone)),
                r.blurshipping()
        };
        r.$watch("shippingForm.$valid",
            function() {
                r.shippingFormvalid = r.shippingForm.$valid
            }),
            r.address = void 0,
            r.contactUpdate = !1,
            r.zipcodelookup = function(n) {
                e.ziplookup(n, t.PAGECONTEXT.SHIPPING_INFO).then(function(e) {
                    e && e.city_state_list && e.city_state_list.length > 0 && (r.address.city = e.city_state_list[0].city, r.address.state_or_province = e.city_state_list[0].state_or_province, r.$digest(), $("select").selectric(), $("#_addressInfo_userState").blur(), $("#_addressInfo_userCity").blur())
                })
            },
            r.zipCodeKeyUp = function(e) {
                e.$invalid || (r.zipcodelookup(e.$modelValue), "edit" == a.shippingMode && a.isHAinCart && r.isHomeDeliveryAvailableShipping(e.$modelValue, !0))
            },
            r.$on("isHomeDeliveryAvailableShippingMethod",
                function(e, t) {
                    r.isHomeDeliveryAvailableShipping(t, !1)
                }),
            r.isHomeDeliveryAvailableShipping = function(o, s) {
                r.haNotAvailable = !1,
                    a.estimatedDeliveryDateToShow = "",
                    a.estimatedDeliveryDateMsg = "";
                var c = _.filter(a.cartItems,
                    function(e) {
                        return e.attributes.is_ha_delivery
                    });
                c && c.length > 0 && (r.whereToBuyUrl = c[0].attributes.product_details_page_url + "-buy/");
                var l = _.pluck(c, "sku_id");
                e.getAvailableHomeDeliveryDates(l, o, t.PAGECONTEXT.ORDER_SUMMARY).then(function(e) {
                    a.availableDeliveryDates = e,
                        e.length > 0 ? (a.earliestDate = e[0], r.haNotAvailable = !1) : (a.earliestDate = void 0, r.haNotAvailable = !0, s ? $("#_addressInfo_userZipCode").blur() : a.$broadcast("paymentStepError", n.homeDeliveryNotAvailable.title, n.homeDeliveryNotAvailable.description)),
                        a.$digest(),
                        a.earliestDate ? a.estimatedDeliveryDateToShow = "object" == typeof a.earliestDate ? i.formatDateString(a.earliestDate.start_date, t.DATE_FORMAT1) : i.formatDateString(a.earliestDate, t.DATE_FORMAT1) : a.estimatedDeliveryDateMsg = "Major Appliance delivery not available for zipcode " + o
                }).E400(function(e) {
                    r.haNotAvailable = !0,
                        a.$broadcast("paymentStepError", n.homeDeliveryError.title, n.homeDeliveryError.description)
                }).E401(function(e) {
                    r.haNotAvailable = !0,
                        a.$broadcast("paymentStepError", n.homeDeliveryError.title, n.homeDeliveryError.description)
                }).E404(function(e) {
                    r.haNotAvailable = !0,
                        a.$broadcast("paymentStepError", n.homeDeliveryError.title, n.homeDeliveryError.description)
                }).fail(function(e) {
                    r.haNotAvailable = !0,
                        a.$digest(),
                        a.$broadcast("paymentStepError", n.homeDeliveryError.title, n.homeDeliveryError.description)
                })
            },
            r.onFormChange = function(e) {
                r.addressInvalid && r.alternateAddress && (r.formChanged = !0),
                    r.overrideValidation = !1,
                    a.selectedAddress = null,
                    $("input[name=alterAddr]:checked").removeAttr("checked")
            },
            r.onSameAddress = function(e) {
                a.isHAinCart && r.isHomeDeliveryAvailableShipping(e.postal_code, !1),
                    u(!1, $(".billing-address-as-shipping")),
                    p($(".billing-address-as-shipping")),
                    r.address = e,
                    r.addressInvalid = !1,
                    r.shippingForm.state.$setValidity("unselect", !0),
                    r.overrideValidation = !1,
                    r.formChanged = !1,
                    a.selectedAddress = void 0,
                    r.shippingFormvalid = !0,
                    r.alternateAddress = null,
                    a.shippingSameAsBilling = !0,
                    $(".add_new_addr").hide(),
                    $(".add-new-shipping-address").show(),
                    $("#shipping_addr").find(".input-control").removeClass("error")
            },
            r.onAddrSelect = function(e) {
                a.isHAinCart && r.isHomeDeliveryAvailableShipping(e.postal_code, !1),
                    u(!1, $("." + e.id)),
                    p($("." + e.id).parent()),
                    r.overrideValidation = !0,
                    r.addressInvalid = !1,
                    r.formChanged = !1,
                    a.selectedAddress = e,
                    r.address = {},
                    r.alternateAddress = null,
                    a.shippingSameAsBilling = !1,
                0 != a.cost.total.amount || a.anyPremiumCareSubscriptionCart() || a.cartHasSubscription() || $(".add_phone_email").hide(),
                    $(".add_new_addr").hide(),
                    $(".add-new-shipping-address").show()
            },
            r.addNewAddr = function() {
                p($(".add-new-shipping-address")),
                    r.overrideValidation = !1,
                    r.haNotAvailable = !1,
                    r.formChanged = !1,
                    r.address = {},
                null != a.addedPayment && a.addedPayment.billing_info && (r.address.phone = a.addedPayment.billing_info.phone, r.address.email = a.addedPayment.billing_info.email),
                0 != a.cost.total.amount || a.anyPremiumCareSubscriptionCart() || a.cartHasSubscription() || $(".add_phone_email").show(),
                    h(),
                    r.address.state_or_province = a.states[0],
                    a.selectedAddress = void 0,
                    r.alternateAddress = null,
                    a.shippingSameAsBilling = !1,
                    $("input[name=addr]:checked").removeAttr("checked"),
                    $(".add_new_addr").toggle(),
                    $(".add-new-shipping-address").hide()
            },
            r.validate = function(e) {
                e["class"] = e.$invalid ? "error focus": "focus valid",
                    e.$dirty = !0
            },
            r.validateZipCode = function(e) {
                r.haNotAvailable = e.$invalid ? !1 : r.haNotAvailable,
                    e["class"] = e.$invalid || r.haNotAvailable ? "error focus": "focus valid",
                    e.$dirty = !0
            },
            r.validateState = function(e, t) {
                e.$setValidity("unselect", "Select" != t),
                    e["class"] = e.$invalid ? "error focus": "focus valid",
                    e.$dirty = !0
            },
            r.onAddrEdit = function() {
                r.haNotAvailable = !1,
                    a.shippingMode = "edit",
                    r.addressInvalid = !1,
                0 == a.cost.total.amount && (a.shippingSameAsBilling = !1, $("#_sameAsShipAddress").removeAttr("checked"), r.shippingForm.$valid && (a.bluraddress(), a.selectedAddress && ($(".add_new_addr").show(), $(".add-new-shipping-address").hide(), $(".add_phone_email").show()))),
                    r.shippingFormvalid = r.shippingForm.$valid,
                0 == $("input[name=addr]:checked").length && (a.selectedAddress = void 0)
            },
            r.onAlterAddrSelect = function(e) {
                a.isHAinCart && r.isHomeDeliveryAvailableShipping(e.postal_code, !1),
                    r.formChanged = !0,
                    r.addressInvalid = !1,
                    $("input[name=addr]:checked").removeAttr("checked"),
                e.line2 || (r.prevAddr.line2 = ""),
                    r.address = jQuery.extend({},
                        r.prevAddr, e),
                    a.selectedAddress = angular.copy(r.address)
            },
            r.usePrevAddress = function() {
                r.overrideValidation = !0,
                    r.addressInvalid = !1,
                    a.selectedAddress = r.address,
                    r.addUpdateShippingInfo()
            },
            r.addUpdateShippingInfo = function() {
                var i = jQuery.extend({},
                    a.selectedAddress || r.address);
                delete i.id,
                    delete i.created_date,
                    delete i.modified_date,
                    delete i.override_suggestion,
                    delete i.address_overridden,
                    delete i.dr_address_id,
                    delete i.dr_nick_name,
                ("" == i.line2 || void 0 == i.line2) && delete i.line2,
                    a.shippingAddress = i;
                var o = a.cost.total.amount;
                o > 0 && (i.phone = a.addedPayment.billing_info.phone, i.email = a.addedPayment.billing_info.email),
                    e.addUpdateShippingInfo(i, t.PAGECONTEXT.SHIPPING_INFO, r.overrideValidation).then(function(e) {
                        return a.selectedAddress || (a.selectedAddress = r.address),
                            a.selectedAddress.phone = e.shipping_info.phone,
                            a.selectedAddress.email = e.shipping_info.email,
                            r.formChanged = !1,
                            r.alternateAddress = null,
                            r.overrideValidation = !1,
                            a.$broadcast("refreshCart", e, !1),
                            a.$broadcast("addressUpdated", e),
                            a.shippingMode = "view",
                            a.shippingMethodMode = "edit",
                            a.focusOnShippingMethods = !1,
                            a.$digest(),
                            r.contactUpdate ? (r.contactUpdate = !1, void(a.focusOnShippingMethods = !0)) : void setTimeout(function() {
                                    $("html, body").animate({
                                            scrollTop: $("#_shipping_method").offset().top
                                        },
                                        "slow")
                                },
                                200)
                    }).E400(function(e) {
                        var t = JSON.parse(e.responseText);
                        t = t.error || JSON.parse(t.message).error,
                            "DisallowedShippingAddress" == t ? a.$broadcast("paymentStepError", n.DisallowedShippingAddress.title, n.DisallowedShippingAddress.description) : "DisallowedPostalCode" == t ? a.$broadcast("paymentStepError", n.ShippingDisallowedPostalCode.title, n.ShippingDisallowedPostalCode.description) : "DisallowedShippingCity" == t ? a.$broadcast("paymentStepError", n.DisallowedShippingCity.title, n.DisallowedShippingCity.description) : "DisallowedShippingState/Province" == t ? a.$broadcast("paymentStepError", n.DisallowedShippingStateProvince.title, n.DisallowedShippingStateProvince.description) : a.$broadcast("paymentStepError", n.BadRequestDefaultError.title, n.BadRequestDefaultError.description)
                    }).E401(function(e) {
                        a.promptReLogin(e)
                    }).E409(function(e) {
                        var t = JSON.parse(e.responseText);
                        t = t.error || JSON.parse(t.message).error,
                            "PurchaseFlowCannotBeModified" == t ? a.$broadcast("paymentStepError", n.PurchaseFlowCannotBeModified.title, n.PurchaseFlowCannotBeModified.description) : a.$broadcast("paymentStepError", n.AddressAlreadyInAddressList.title, n.AddressAlreadyInAddressList.description)
                    }).fail(function(e) {
                        a.$broadcast("paymentStepError", "Error in validating shipping address", "The provided shipping address is not allowed")
                    })
            },
            r.contShippingAddress = function() {
                if (null != a.selectedAddress || r.shippingFormvalid) {
                    var i = jQuery.extend({},
                        a.selectedAddress);
                    if (a.selectedAddress || (i = jQuery.extend({},
                            r.address)), r.prevAddr = angular.copy(i), delete i.phone, delete i.last_name, delete i.first_name, delete i.middle_name, delete i.middle_initial, delete i.created_date, delete i.modified_date, delete i.override_suggestion, delete i.email, delete i.id, delete i.dr_address_id, delete i.dr_nick_name, delete i.address_overridden, ("" == i.line2 || void 0 == i.line2) && delete i.line2, r.overrideValidation) return void r.addUpdateShippingInfo();
                    e.validateAddress(i, t.PAGECONTEXT.SHIPPING_INFO).then(function(e) {
                        return r.formChanged = !1,
                            r.addressInvalid = !e.success,
                            e.success ? void r.addUpdateShippingInfo() : ($("input[name=addr]:checked").prop("checked") && ($("input[name=addr]:checked").removeAttr("checked"), $(".add_new_addr").show(), $(".add-new-shipping-address").hide(), $("#shipping_addr").find(".input-control").addClass("focus"), $("select").selectric(), a.selectedAddress = void 0), r.alternateAddress = e.alternatives, void r.$digest())
                    }).E404(function(e) {
                        r.overrideValidation = !0,
                            r.$digest(),
                            a.$broadcast("paymentStepError", n.ShippingAddressInvalidOverride.title, n.ShippingAddressInvalidOverride.description)
                    }).E409(function(e) {
                        r.overrideValidation = !0,
                            r.$digest(),
                            a.$broadcast("paymentStepError", n.ShippingAddressInvalidOverride.title, n.ShippingAddressInvalidOverride.description)
                    }).E400(function(e) {
                        a.$broadcast("paymentStepError", n.ShippingAddressInvalidCharacters.title, n.ShippingAddressInvalidCharacters.description)
                    }).E401(function(e) {
                        a.promptReLogin(e)
                    }).fail(function(e) {
                        console.log("checkout error:" + e),
                            a.$broadcast("paymentStepError", n.ShippingAddressInvalid.title, n.ShippingAddressInvalid.description)
                    })
                }
            },
            r.deleteDialog = function(e) {
                var t = $("." + e);
                u(!0, t),
                    p(t.parent()),
                    t.find(".btn-yes").off().on("click",
                        function() {
                            f(e)
                        }),
                    t.find(".btn-no").off().on("click",
                        function() {
                            u(!1, t)
                        })
            },
            r.onFocus = i.formOnFocus,
            r.blurshipping = function() {
                r.address && (r.address.email && $("#_addressInfo_userEmail").parents(".input-control").addClass("focus"), r.address.phone && $("#_addressInfo_userPhoneNo").parents(".input-control").addClass("focus"))
            },
            a.bluraddress = function() {
                $(".add_new_addr").find("input[type='text'],input[type='number'],input[type='tel']").parents(".input-control").addClass("focus"),
                    $(".add_new_addr").find(".input-control.select-box").addClass("focus")
            },
            r.blurshipping(),
            r.$on("profileInfoAvailable",
                function() {
                    r.address && (r.address.email || (r.address.email = a.contact.email), r.address.phone || (r.address.phone = a.contact.phone), r.blurshipping())
                }),
            r.$on("addressInfo",
                function() {
                    0 != a.cost.total.amount || a.anyPremiumCareSubscriptionCart() || a.cartHasSubscription() || (r.address || (r.address = {}), h())
                }),
            r.$on("contactInfoUpdated",
                function() {
                    a.selectedAddress && (r.contactUpdate = !0, r.contShippingAddress()),
                        r.shippingFormvalid = !1
                })
    }]), checkoutApp.controller("UserAddressInfoCtrlv3", ["CheckoutService", "constants", "errors", "updateUtilities", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "$timeout",
    function(e, t, n, i, r, a, o, s, c, l, d, p) {
        function u(e) {
            var t = e.siblings(".existing-shipping-address").find(".delete-section");
            _.each(t,
                function(e) {
                    f(!1, $(e))
                })
        }
        function f(e, t) {
            e ? (t.find(".btn-remove").hide(), t.find(".delete-dialogue-box").show()) : (t.find(".btn-remove").show(), t.find(".delete-dialogue-box").hide())
        }
        function h(n) {
            e.deleteShippingAddress(n, t.PAGECONTEXT.SHIPPING_INFO).then(function(e) {
                $("." + n).parent().hide()
            }).fail(function(e) {
                a.$broadcast("paymentStepError", "Error in deleting shipping address", "Please try again")
            })
        }
        function g() {
            var e, t = {},
                n = "PUT",
                i = jQuery.extend({},
                    a.selectedAddress || r.address);
            delete i.id,
                delete i.created_date,
                delete i.modified_date,
                delete i.override_suggestion,
                delete i.address_overridden,
                delete i.dr_address_id,
                delete i.dr_nick_name,
            ("" == i.line2 || void 0 == i.line2) && delete i.line2,
                t.payload = i,
                e = SCart.URL.SHIPPING_INFO_V3_URL(SCart.shoppingCartTransformService.shoppingCartId, !0, r.overrideValidation),
                t.method = n,
                t.payload = {
                    shipping_info: i,
                    save_for_identity: !0
                },
                t.url = e,
                t.handler = "addShippingAddressHandler",
                a.shippingCTA = t
        }
        var m = function() {
            a.isLoggedIn && a.contact && (r.address || (r.address = {}), r.address.email || (r.address.email = a.contact.email), r.address.phone || (r.address.phone = a.contact.phone))
        };
        r.$on("userProfileAvailable",
            function() {
                m()
            }),
            r.$watch("shippingForm.$valid",
                function() {
                    r.shippingFormvalid = r.shippingForm.$valid && r.address.state_or_province != a.states[0]
                }),
            r.address = void 0,
            r.contactUpdate = !1,
            m(),
            r.zipcodelookup = function(n) {
                e.ziplookup(n, t.PAGECONTEXT.SHIPPING_INFO).then(function(e) {
                    e && e.city_state_list && e.city_state_list.length > 0 && (r.address.city = e.city_state_list[0].city, r.address.state_or_province = e.city_state_list[0].state_or_province, r.$digest(), $("select").selectric(), $("#_addressInfo_userState").blur(), $("#_addressInfo_userCity").blur())
                })
            },
            r.zipCodeKeyUp = function(e) {
                e.$invalid || "edit" == a.shippingMode && a.isHAinCart && r.isHomeDeliveryAvailableShipping(e.$modelValue, !0)
            },
            r.$on("isHomeDeliveryAvailableShippingMethod",
                function(e, t, n) {
                    r.isHomeDeliveryAvailableShipping(t, !1, n)
                }),
            r.isHomeDeliveryAvailableShipping = function(o, s, c) {
                r.haNotAvailable = !1,
                    a.haDeliveryErrorMessage = !1,
                    a.estimatedDeliveryDateToShow = "",
                    a.estimatedDeliveryDateMsg = "";
                var l = _.filter(a.cartItems,
                    function(e) {
                        return e.attributes.is_ha_delivery
                    });
                l && l.length > 0 && (r.whereToBuyUrl = l[0].attributes.product_details_page_url + "-buy/");
                var d = _.pluck(l, "sku_id");
                e.getAvailableHomeDeliveryDates(d, o, t.PAGECONTEXT.ORDER_SUMMARY).then(function(e) {
                    a.availableDeliveryDates = e,
                        e.length > 0 ? (a.earliestDate = e[0], r.haNotAvailable = !1) : (a.earliestDate = void 0, r.haNotAvailable = !0, s ? $("#_addressInfo_userZipCode").blur() : a.$broadcast("paymentStepError", n.homeDeliveryNotAvailable.title, n.homeDeliveryNotAvailable.description, !0), c && (a.selectedAddress = void 0, a.shippingMode = "edit", a.paymentMode = "edit")),
                        a.earliestDate ? a.estimatedDeliveryDateToShow = "object" == typeof a.earliestDate ? i.formatDateString(a.earliestDate.start_date, t.DATE_FORMAT1) : i.formatDateString(a.earliestDate, t.DATE_FORMAT1) : a.estimatedDeliveryDateMsg = "Major Appliance delivery not available for zipcode " + o,
                        a.$digest()
                }).E400(function(e) {
                    r.haNotAvailable = !0,
                        a.$broadcast("paymentStepError", n.homeDeliveryError.title, n.homeDeliveryError.description)
                }).E401(function(e) {
                    r.haNotAvailable = !0,
                        a.$broadcast("paymentStepError", n.homeDeliveryError.title, n.homeDeliveryError.description)
                }).E404(function(e) {
                    r.haNotAvailable = !0,
                        a.$broadcast("paymentStepError", n.homeDeliveryError.title, n.homeDeliveryError.description)
                }).fail(function(e) {
                    r.haNotAvailable = !0,
                        a.$digest(),
                        a.$broadcast("paymentStepError", n.homeDeliveryError.title, n.homeDeliveryError.description)
                })
            },
            r.onFormChange = function(e) {
                r.addressInvalid && r.alternateAddress && (r.formChanged = !0),
                    r.overrideValidation = !1,
                    a.selectedAddress = null,
                    $("input[name=alterAddr]:checked").removeAttr("checked")
            },
            r.onSameAddress = function(e) {
                f(!1, $(".billing-address-as-shipping")),
                    u($(".billing-address-as-shipping")),
                    r.address = e,
                    r.addressInvalid = !1,
                    r.shippingForm.state.$setValidity("unselect", !0),
                    r.overrideValidation = !1,
                    r.formChanged = !1,
                    a.selectedAddress = void 0,
                    r.shippingFormvalid = !0,
                    r.alternateAddress = null,
                    a.shippingSameAsBilling = !0,
                    $(".add_new_addr").hide(),
                    $(".add-new-shipping-address").show(),
                    $("#shipping_addr").find(".input-control").removeClass("error")
            },
            a.onAddrSelect = function(e, t) {
                a.isHAinCart && !t && r.isHomeDeliveryAvailableShipping(e.postal_code, !1),
                    f(!1, $("." + e.id)),
                    u($("." + e.id).parent()),
                    r.overrideValidation = !0,
                    r.addressInvalid = !1,
                    r.formChanged = !1,
                    a.selectedAddress = e,
                    r.address = {},
                    r.alternateAddress = null,
                    a.shippingSameAsBilling = !1,
                0 != a.cost.total.amount || a.anyPremiumCareSubscriptionCart() || a.cartHasSubscription() || $(".add_phone_email").hide(),
                    $("#add_new_addr").hide(),
                    $(".add-new-shipping-address").show()
            },
            r.editAddr = function() {
                u($(".add-new-shipping-address")),
                    r.overrideValidation = !1,
                    r.formChanged = !1,
                null != a.addedPayment && a.addedPayment.billing_info && (r.address.phone = a.addedPayment.billing_info.phone, r.address.email = a.addedPayment.billing_info.email),
                0 != a.cost.total.amount || a.anyPremiumCareSubscriptionCart() || a.cartHasSubscription() || $(".add_phone_email").show(),
                    m(),
                    a.selectedAddress = void 0,
                    r.alternateAddress = null,
                    a.shippingSameAsBilling = !1,
                    a.shippingMode = "edit",
                    $("input[name=addr]:checked").removeAttr("checked"),
                    $("#add_new_addr").show(),
                    $(".add-new-shipping-address").hide()
            },
            r.addNewAddr = function() {
                r.address = {},
                    r.address.state_or_province = a.states[0],
                    a.selectedAddress = void 0,
                    a.shippingMode = "edit",
                    $("input[name=addr]:checked").removeAttr("checked"),
                a.shoppingCart.payment && a.shoppingCart.payment.paypal && "TxSuccess" == a.shoppingCart.payment.paypal.paypal_status && (a.paymentMode = "edit"),
                    p(function() {
                        a.$digest(),
                            $("#_addressInfo_userState").selectric()
                    })
            },
            r.addNewAddrinEditMode = function() {
                r.address = {},
                    r.address.state_or_province = a.states[0],
                    a.selectedAddress = void 0,
                    a.shippingMode = "edit",
                    $("#add_new_addr").show(),
                    $("input[name=addr]:checked").removeAttr("checked"),
                    p(function() {
                        a.$digest(),
                            $("#_addressInfo_userState").selectric()
                    })
            },
            r.validate = function(e) {
                e["class"] = e.$invalid ? "error focus": "focus valid",
                    e.$dirty = !0
            },
            r.validateZipCode = function(e) {
                r.haNotAvailable = e.$invalid ? !1 : r.haNotAvailable,
                    e["class"] = e.$invalid || r.haNotAvailable ? "error focus": "focus valid",
                    e.$dirty = !0
            },
            r.validateState = function(e, t) {
                e.$setValidity("unselect", t != a.states[0]),
                    e["class"] = e.$invalid ? "error focus": "focus valid",
                    e.$dirty = !0
            },
            r.onAddrEdit = function() {
                a.shippingMode = "edit",
                    r.addressInvalid = !1,
                    r.address = _.clone(a.selectedAddress),
                0 == a.cost.total.amount && (a.shippingSameAsBilling = !1, $("#_sameAsShipAddress").removeAttr("checked"), r.shippingForm.$valid && (a.bluraddress(), a.selectedAddress && ($("#add_new_addr").show(), $(".add-new-shipping-address").hide(), $(".add_phone_email").show()))),
                    a.selectedAddress = void 0,
                    r.shippingFormvalid = r.shippingForm.$valid,
                a.shoppingCart.payment && a.shoppingCart.payment.paypal && "TxSuccess" == a.shoppingCart.payment.paypal.paypal_status && (a.paymentMode = "edit"),
                    p(function() {
                        a.$digest(),
                            $("#_addressInfo_userState").selectric(),
                            $("#_billingaddressInfo_userState").selectric()
                    })
            },
            r.onAlterAddrSelect = function(e) {
                a.isHAinCart && r.isHomeDeliveryAvailableShipping(e.postal_code, !1),
                    r.formChanged = !0,
                    r.addressInvalid = !1,
                    $("input[name=addr]:checked").removeAttr("checked"),
                    r.address = jQuery.extend({},
                        r.prevAddr, e),
                    a.selectedAddress = angular.copy(r.address),
                    p(function() {
                        a.$digest(),
                            $("#_addressInfo_userState").selectric()
                    })
            },
            r.usePrevAddress = function() {
                r.overrideValidation = !0,
                    r.addressInvalid = !1,
                    a.selectedAddress = r.address,
                    r.addUpdateShippingInfo()
            },
            r.addUpdateShippingInfo = function() {
                var i = jQuery.extend({},
                    a.selectedAddress || r.address);
                delete i.id,
                    delete i.created_date,
                    delete i.modified_date,
                    delete i.override_suggestion,
                    delete i.address_overridden,
                    delete i.dr_address_id,
                    delete i.dr_nick_name,
                ("" == i.line2 || void 0 == i.line2) && delete i.line2,
                    a.shippingAddress = i;
                a.cost.total.amount;
                e.addUpdateShippingInfo(i, t.PAGECONTEXT.SHIPPING_INFO, r.overrideValidation).then(function(e) {
                    return a.selectedAddress || (a.selectedAddress = r.address),
                        a.selectedAddress.phone = e.shipping_info.phone,
                        a.selectedAddress.email = e.shipping_info.email,
                        r.formChanged = !1,
                        r.alternateAddress = null,
                        r.overrideValidation = !1,
                        a.$broadcast("refreshCart", e, !1),
                        a.$broadcast("addressUpdated", e),
                        a.shippingMode = "view",
                        a.focusOnShippingMethods = !1,
                        a.$digest(),
                        r.contactUpdate ? (r.contactUpdate = !1, void(a.focusOnShippingMethods = !0)) : void 0
                }).E400(function(e) {
                    var t = JSON.parse(e.responseText);
                    t = t.error || JSON.parse(t.message).error,
                        "DisallowedShippingAddress" == t ? a.$broadcast("paymentStepError", n.DisallowedShippingAddress.title, n.DisallowedShippingAddress.description) : "DisallowedPostalCode" == t ? a.$broadcast("paymentStepError", n.ShippingDisallowedPostalCode.title, n.ShippingDisallowedPostalCode.description) : "DisallowedShippingCity" == t ? a.$broadcast("paymentStepError", n.DisallowedShippingCity.title, n.DisallowedShippingCity.description) : "DisallowedShippingState/Province" == t ? a.$broadcast("paymentStepError", n.DisallowedShippingStateProvince.title, n.DisallowedShippingStateProvince.description) : a.$broadcast("paymentStepError", n.BadRequestDefaultError.title, n.BadRequestDefaultError.description)
                }).E401(function(e) {
                    a.promptReLogin(e)
                }).E409(function(e) {
                    var t = JSON.parse(e.responseText);
                    t = t.error || JSON.parse(t.message).error,
                        "PurchaseFlowCannotBeModified" == t ? a.$broadcast("paymentStepError", n.PurchaseFlowCannotBeModified.title, n.PurchaseFlowCannotBeModified.description) : "ItemOutOfStock" == t ? a.$broadcast("paymentStepError", n.ItemOutOfStock.title, n.ItemOutOfStock.description) : a.$broadcast("paymentStepError", n.AddressAlreadyInAddressList.title, n.AddressAlreadyInAddressList.description)
                }).fail(function(e) {
                    a.$broadcast("paymentStepError", "Error in validating shipping address", "The provided shipping address is not allowed")
                })
            },
            a.contShippingAddress = function() {
                if (null != a.selectedAddress || r.shippingFormvalid) {
                    var i = jQuery.extend({},
                        a.selectedAddress);
                    if (a.selectedAddress || (i = jQuery.extend({},
                            r.address)), r.prevAddr = angular.copy(i), delete i.phone, delete i.last_name, delete i.first_name, delete i.middle_name, delete i.middle_initial, delete i.created_date, delete i.modified_date, delete i.override_suggestion, delete i.email, delete i.id, delete i.dr_address_id, delete i.dr_nick_name, delete i.address_overridden, ("" == i.line2 || void 0 == i.line2) && delete i.line2, r.overrideValidation) return void r.addUpdateShippingInfo();
                    e.validateAddress(i, t.PAGECONTEXT.SHIPPING_INFO).then(function(e) {
                        return r.formChanged = !1,
                            r.addressInvalid = !e.success,
                            e.success ? void r.addUpdateShippingInfo() : ($("input[name=addr]:checked").prop("checked") && ($("input[name=addr]:checked").removeAttr("checked"), $("#add_new_addr").show(), $(".add-new-shipping-address").hide(), $("#shipping_addr").find(".input-control").addClass("focus"), $("select").selectric(), a.selectedAddress = void 0), r.alternateAddress = e.alternatives, void r.$digest())
                    }).E404(function(e) {
                        r.overrideValidation = !0,
                            r.$digest(),
                            a.$broadcast("paymentStepError", n.ShippingAddressInvalidOverride.title, n.ShippingAddressInvalidOverride.description)
                    }).E409(function(e) {
                        r.overrideValidation = !0,
                            r.$digest(),
                            a.$broadcast("paymentStepError", n.ShippingAddressInvalidOverride.title, n.ShippingAddressInvalidOverride.description)
                    }).E400(function(e) {
                        a.$broadcast("paymentStepError", n.ShippingAddressInvalidCharacters.title, n.ShippingAddressInvalidCharacters.description)
                    }).E401(function(e) {
                        a.promptReLogin(e)
                    }).fail(function(e) {
                        console.log("checkout error:" + e),
                            a.$broadcast("paymentStepError", n.ShippingAddressInvalid.title, n.ShippingAddressInvalid.description)
                    })
                }
            },
            r.deleteDialog = function(e) {
                var t = $("." + e);
                f(!0, t),
                    u(t.parent()),
                    t.find(".btn-yes").off().on("click",
                        function() {
                            h(e)
                        }),
                    t.find(".btn-no").off().on("click",
                        function() {
                            f(!1, t)
                        })
            },
            r.onFocus = i.formOnFocus,
            r.blurshipping = function() {
                r.address && (r.address.email && $("#_addressInfo_userEmail").parents(".input-control").addClass("focus"), r.address.phone && $("#_addressInfo_userPhoneNo").parents(".input-control").addClass("focus"))
            },
            a.bluraddress = function() {
                $(".add_new_addr").find("input[type='text'],input[type='number'],input[type='tel']").parents(".input-control").addClass("focus"),
                    $(".add_new_addr").find(".input-control.select-box").addClass("focus")
            },
            a.selectDefaultAddress = function() {
                a.shoppingCart && !a.shoppingCart.shipping_info && a.isLoggedIn && a.savedAddress.length > 0 && !a.shoppingCart.payment ? ($(".existing-ship-address-holder").eq(0).find("input").prop("checked", !0), r.onAddrSelect(a.savedAddress[0], !0), g()) : a.shoppingCart && !a.shoppingCart.shipping_info && a.shoppingCart.payment && a.savedAddress.length > 0 && (!a.shoppingCart.payment.paypal || "TxSuccess" != a.shoppingCart.payment.paypal.payal_status) ? ($(".existing-ship-address-holder").eq(0).find("input").prop("checked", !0), r.onAddrSelect(a.savedAddress[0], !0), g()) : 0 != a.savedAddress.length || a.shoppingCart.payment && (!a.shoppingCart.payment || a.shoppingCart.payment.paypal) || (a.shippingMode = "edit", "finance" == o.payment_source && a.billing && (r.address = _.clone(a.billing))),
                "finance" != o.payment_source && a.applyShippingAndPayment(t.CHECKOUT_SECTION.SHIPPING),
                    p(function() {
                        a.$digest()
                    })
            },
            r.blurshipping(),
            r.$on("profileInfoAvailable",
                function() {
                    r.address && (r.address.email || (r.address.email = a.contact.email), r.address.phone || (r.address.phone = a.contact.phone), r.blurshipping())
                }),
            r.$on("addressInfo",
                function() {
                    0 != a.cost.total.amount || a.anyPremiumCareSubscriptionCart() || a.cartHasSubscription() || (r.address || (r.address = {}), m())
                }),
            r.$on("addressApplied",
                function() {
                    r.formChanged = !1,
                        r.alternateAddress = null,
                        r.overrideValidation = !1
                }),
            r.$on("contactInfoUpdated",
                function() {}),
            $("#_addressInfo_userState").on("selectric-before-close",
                function() {
                    $("#_addressInfo_userState").blur()
                }),
            r.displayDelayedShippingMessage = 1 == $.cookie("displayDelayedShipping") || "true" == $.cookie("displayDelayedShipping")
    }]), checkoutApp.controller("UserOrderCtrl", ["PaymentService", "CheckoutService", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location",
    function(e, t, n, i, r, a, o, s, c) {
        n.showSavings = function() {
            $(window).width() > 768 && (window.utag && utag.link({
                link_cat: "total savings",
                link_id: "checkout_order_summary_total_savings",
                link_meta: "link_name:total savings",
                link_position: "order summary"
            }), $(".order-summary-holder").find(".info-box").width($(".order-summary-holder").outerWidth() - 66), $(".savings-on-total").addClass("active"), $(".savings-on-total").find(".info-box").css({
                top: "95px",
                opacity: "0",
                display: "block"
            }), $(".savings-on-total").find(".info-box").animate({
                    top: "45px",
                    opacity: 1
                },
                350))
        },
            n.hideSavings = function() {
                $(window).width() > 768 && ($(".order-summary-holder").find(".info-box").width($(".order-summary-holder").outerWidth() - 66), $(".savings-on-total").removeClass("active"), $(".savings-on-total").find(".info-box").animate({
                        top: "95px",
                        opacity: 0
                    },
                    350,
                    function() {
                        $(".savings-on-total").find(".info-box").css({
                            display: "none"
                        })
                    }))
            },
            n.toggleSavings = function() {
                $(window).width() < 768 ? ($(".savings-on-total").toggleClass("active"), $(".savings-on-total").find(".info-box").slideToggle(), $(".savings-on-total").find(".icon-info").toggleClass("active")) : ($(".order-summary-holder").find(".info-box").width($(".order-summary-holder").outerWidth() - 66), $(".savings-on-total").toggleClass("active"), $(".savings-on-total").hasClass("active") ? ($(".savings-on-total").find(".info-box").css({
                    top: "95px",
                    opacity: "0",
                    display: "block"
                }), $(".savings-on-total").find(".info-box").animate({
                        top: "45px",
                        opacity: 1
                    },
                    350)) : $(".savings-on-total").find(".info-box").animate({
                        top: "95px",
                        opacity: 0
                    },
                    350,
                    function() {
                        $(".savings-on-total").find(".info-box").css({
                            display: "none"
                        })
                    }))
            },
            i.totalPricePos = $(".os-total-fixed-at-bottom-in-mobile").offset().top,
            i.promoMsg = "",
            i.promoClass = "",
            n.handlePaypal = function() {
                t.getPaypalUrl(!i.isLoggedIn, n.isPaypalCredit).then(function(e) {
                    e && e.payment && e.payment.paypal && ($(".spinner_container").show(), $(".spinner_container").addClass("preloader-paypal"), $(".spinner_container").append('<div class="preloader-paypal-msg">We are redirecting you to PayPal. Please be patient. The estimated taxes will change based on your shipping address.</div>'), window.location.href = e.payment.paypal.redirect_url),
                        $(".checkout-payment-cc-details").hide()
                }).fail(function(e) {
                    i.$broadcast("paymentStepError", "We could not process your request at this time.", "Please try again with a different payment option."),
                    window.utag && utag.link({
                        link_cat: "paypal error response",
                        link_id: "checkout_payment_information_paypal_error_response",
                        link_meta: "link_name:paypal error response",
                        link_position: "payment information"
                    })
                })
            }
    }]), checkoutApp.controller("UserOrderCtrlv3", ["PaymentService", "CheckoutService", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location",
    function(e, t, n, i, r, a, o, s, c) {
        i.utagLink = function() {
            window.utag && utag.link({
                link_cat: "validation error",
                link_id: "checkout_validation_error",
                link_meta: "link_name:validation_error",
                link_position: "checkout"
            })
        },
            n.showSavings = function() {
                $(window).width() > 768 && (window.utag && utag.link({
                    link_cat: "total savings",
                    link_id: "checkout_order_summary_total_savings",
                    link_meta: "link_name:total savings",
                    link_position: "order summary"
                }), $(".order-summary-holder").find(".info-box").width($(".order-summary-holder").outerWidth() - 66), $(".savings-on-total").addClass("active"), $(".savings-on-total").find(".info-box").css({
                    top: "95px",
                    opacity: "0",
                    display: "block"
                }), $(".savings-on-total").find(".info-box").animate({
                        top: "45px",
                        opacity: 1
                    },
                    350))
            },
            n.hideSavings = function() {
                $(window).width() > 768 && ($(".order-summary-holder").find(".info-box").width($(".order-summary-holder").outerWidth() - 66), $(".savings-on-total").removeClass("active"), $(".savings-on-total").find(".info-box").animate({
                        top: "95px",
                        opacity: 0
                    },
                    350,
                    function() {
                        $(".savings-on-total").find(".info-box").css({
                            display: "none"
                        })
                    }))
            },
            n.toggleSavings = function() {
                $(window).width() < 768 ? ($(".savings-on-total").toggleClass("active"), $(".savings-on-total").find(".info-box").slideToggle(), $(".savings-on-total").find(".icon-info").toggleClass("active")) : ($(".order-summary-holder").find(".info-box").width($(".order-summary-holder").outerWidth() - 66), $(".savings-on-total").toggleClass("active"), $(".savings-on-total").hasClass("active") ? ($(".savings-on-total").find(".info-box").css({
                    top: "95px",
                    opacity: "0",
                    display: "block"
                }), $(".savings-on-total").find(".info-box").animate({
                        top: "45px",
                        opacity: 1
                    },
                    350)) : $(".savings-on-total").find(".info-box").animate({
                        top: "95px",
                        opacity: 0
                    },
                    350,
                    function() {
                        $(".savings-on-total").find(".info-box").css({
                            display: "none"
                        })
                    }))
            },
            i.promoMsg = "",
            i.promoClass = "",
            n.isCheckoutPage = !0,
            n.handlePaypal = function() {
                t.getPaypalUrl(!i.isLoggedIn, n.isPaypalCredit).then(function(e) {
                    e && e.payment && e.payment.paypal && ($(".spinner_container").show(), $(".spinner_container").addClass("preloader-paypal"), $(".spinner_container").append('<div class="preloader-paypal-msg">We are redirecting you to PayPal. Please be patient. The estimated taxes will change based on your shipping address.</div>'), window.location.href = e.payment.paypal.redirect_url),
                        $(".checkout-payment-cc-details").hide()
                }).fail(function(e) {
                    i.$broadcast("paymentStepError", "We could not process your request at this time.", "Please try again with a different payment option."),
                    window.utag && utag.link({
                        link_cat: "paypal error response",
                        link_id: "checkout_payment_information_paypal_error_response",
                        link_meta: "link_name:paypal error response",
                        link_position: "payment information"
                    })
                })
            },
            i.enablePlaceOrder = function() {
                return ! i.cost || 0 != i.cost.total.amount || i.anyPremiumCareSubscriptionCart() || i.cartHasSubscription() ? "view" == i.shippingMode && "view" == i.paymentMode && ("view" == i.shippingMethodMode || i.shoppingCart && i.shoppingCart.shipping_method) : "view" == i.shippingMode && ("view" == i.shippingMethodMode || i.shoppingCart && i.shoppingCart.shipping_method)
            }
    }]), checkoutApp.controller("OrderConfirmCtrl", ["ConfirmService", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location",
    function(e, t, n, i, r, a, o, s) {
        n.stopStickyNav(),
            t.changeHeader = function() {
                $("#checkout-header").siblings().show(),
                    $("#checkout-header").remove(),
                    $(".gnb-b2c-icons").show(),
                    $(".gnb-b2c-promo-wrapper").show()
            },
            t.changeHeader(),
            t.computeUnidays = function() {
                var e = n.shoppingCart.cost,
                    t = "lETkNoFEmUW/ylETCs5/uzR/8HZ4fEdLrLAnpbEKnwg=",
                    i = "SNr4BMj1ISIvvAZIppl9PHiqh8lr1G2iEc8wc6jqmyRqeGmwwl0AxintWRtvJRvDM3/6luy53EXmWWkZSTK3ITpceZHr6lEUPIdtazGYn3j15dxD90MSLBxeHv3o+vGGJZqlT1a+GGYsIPY9fI8MnMqDPjYsNMhjzpHx9R8G1Ek=",
                    r = new UNiDAYS(t, i),
                    a = 0;
                n.savings && e.subtotal && e.subtotal.amount > 0 && (a = (n.savings.discounts / (e.subtotal.amount + n.savings.discounts) * 100).toFixed(2));
                var o = e.total ? e.total.amount: 0;
                n.savings && (o += n.savings.amount);
                var s = $.cookie("DR_SESSION_TOKEN"),
                    c = r.trackingUrl(n.orderId, "USD", s, e.total.amount, n.savings ? n.savings.discounts: "", "", e.tax.amount, e.shipping ? e.shipping.amount: 0, 0, o, n.savings ? n.savings.promo: "", a, 0); !
                    function(e, t) {
                        var n = e.getElementsByTagName("script")[0],
                            i = e.createElement("script");
                        i.async = !0,
                            i.src = t,
                            n.parentNode.insertBefore(i, n)
                    } (document, c)
            };
        try {
            "4771508300" == $.cookie("tppid") && t.computeUnidays()
        } catch(c) {
            console.log("unidays exception" + c)
        }
    }]), checkoutApp.controller("FinalOrderSummaryCtrl", ["CheckoutService", "constants", "financingService", "ConfirmService", "updateUtilities", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "$window", "$filter",
    function(e, t, n, i, r, a, o, s, c, l, d, p, u, f) {
        a.orderRef = o.orderId,
            a.orderDate = "" + f("date")(new Date, "MM-dd-yyyy"),
            $(".prefetch_spinner_container").hide();
        var h = function() {
            if (o.cost && o.cost.total) {
                window.USI_orderID = o.orderId,
                    window.USI_orderAmt = o.cost.total.amount;
                var e = document.getElementsByTagName("head")[0],
                    t = document.createElement("script");
                t.setAttribute("type", "text/javascript"),
                    t.src = "//www.upsellit.com/launch/samsung_pixel.jsp",
                    e.appendChild(t)
            }
        };
        h(),
            a.validate = function(e) {
                e["class"] = e.$invalid ? "error focus": "focus valid",
                    e.$dirty = !0
            },
            a.thankyou = function() {
                o.$broadcast("saveImpression", o.shoppingCart, "new ecom step3|thankyou"),
                    a.orderRef = "#" + o.orderId,
                    a.onFocus = r.formOnFocus,
                    a.title = "fraud" == o.orderType ? "Thank you for ordering from samsung": "Thank you. Your order has been placed.",
                    a.showfandfDescription = o.isFandfEnabled,
                    a.showPaymentMessageForV3 = EcomApi.isTransformRequired,
                o.shoppingCart.finance_plan && (o.financePlan = o.shoppingCart.finance_plan, o.financingDetails = o.shoppingCart.payment.td_financing),
                    $(".thank-you-page-holder").removeClass("ng-hide"),
                    o.subscribedPhoneNumber = angular.copy(o.shoppingCart.payment.billing_info.phone)
            },
            o.shoppingCart ? a.thankyou() : e.getOrder(s.orderId, t.PAGECONTEXT.THANKYOU_PAGE).then(function(e) {
                var t = e.data;
                o.orderId = e.displayOrderID,
                    o.selectedShippingMethod = t.shipping_method,
                    o.shippingAddress = t.shipping_info,
                    o.addedPayment = t.payment,
                    o.refreshCartHelper(t),
                    o.totalItemsInCart = o.formatTotalItemsInCart(t.line_items),
                t.finance_plan && (o.financePlan = t.finance_plan, o.financingDetails = t.payment.td_financing),
                t.shipping_method && (o.selectedShippingMethod.displayText = o.shippingOptionsText[t.shipping_method.description]),
                    $(".cart-basket").text(""),
                    o.isIE() ? ($(".gnb-b2c-icons-cart a svg").remove(), $(".gnb-b2c-icons-cart a").prepend('<svg viewBox="0 0 100 100" id="cart-open"><circle cx="28" cy="90" r="10"/><circle cx="86" cy="90" r="10"/><path d="M86 14v42H28V13.86C28 6.205 21.794 0 14.14 0H0v14h14v42c0 7.732 6.268 14 14 14h58c7.732 0 14-6.268 14-14V14H86z"/></svg>')) : $(".gnb-b2c-icons-cart a svg use").attr("xlink:href", "/us/resources/navigation/assets/images/sprite.symbol.svg#cart-open"),
                    $.cookie("s_ecom_sc_cnt", 0, {
                        path: "/",
                        domain: ".samsung.com"
                    }),
                    o.$broadcast("orderSummaryPageActions"),
                    a.thankyou(),
                    o.$digest(),
                    a.$apply()
            }).fail(function(e) {
                console.error("thankyou-page error: " + e.responseText),
                    p.path("/cart-info/"),
                    o.$digest()
            }),
            a.subTitle = function() {
                return "fraud" == o.orderType ? "subTitle-fraud-order": "subtitle-confirmed-order"
            },
            a.initRRFeed = function() {
                if (window.r3_common) {
                    var e = this;
                    a.setCookie();
                    var t = new window.r3_common;
                    window.R3_COMMON = t,
                        t.setChannel("web"),
                        t.setApiKey("f20dc17e1482cd47"),
                        t.setBaseUrl("//recs.richrelevance.com/rrserver/"),
                        t.setSessionId(a.rrSessionID),
                        t.setClickthruServer(window.location.protocol + "//" + window.location.host);
                    var n = Cookies.get("prof_bpno_s");
                    n || (n = e.rrSessionID),
                        t.setUserId(n),
                        t.addPlacementType("purchase_complete_page.rr1");
                    var i = new r3_purchased;
                    i.setOrderNumber(o.orderId),
                    o.cartItems && o.cartItems.length > 0 && (o.cartItems.forEach(function(e) {
                        i.addItemIdPriceQuantity(e.sku_id, e.line_item_cost.price.amount + "", e.quantity + "")
                    }), window.r3())
                }
            },
            a.setCookie = function() {
                a.rrSessionID = Cookies.get("rr_session_id"),
                a.rrSessionID || (a.rrSessionID = 1e18 * Math.random(), Cookies.set("rr_session_id", this.rrSessionID, {
                    expires: 30
                }))
            },
            a.btnCarrierPlan = function() {
                window.location.href = SCart.URL.CARRIER_ACTIVATION_URL(o.shoppingCart.cart_id)
            },
        window.isMobile() || a.initRRFeed(),
        o.isMobileAppView() && "undefined" != typeof Splus && "undefined" != typeof Splus.notify && Splus.notify("SUCCESS", o.orderId),
            a.print = function() {
                u.print()
            }
    }]), checkoutApp.controller("FinalOrderSummarySupportCtrl", ["CheckoutService", "constants", "financingService", "ConfirmService", "updateUtilities", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "$window", "$filter", "$timeout", "calendarUtil", "errors",
    function(e, t, n, i, r, a, o, s, c, l, d, p, u, f, h, g, m) {
        o.availableDates = [],
            o.availableDateRanges = [],
            o.scheduleForm = {},
            o.enableScheduleForm = !1,
            o.disableSubmit = !1,
            a.subscriptionSuccess = !1,
            a.isSubscriptionSubmitted = !0,
            a.onFocus = r.formOnFocus,
            a.validate = function(e) {
                e["class"] = e.$invalid ? "error focus": "focus valid",
                    e.$dirty = !0,
                    e.$invalid ? o.disableSubmit = !0 : (r.formOnBlur(e), o.disableSubmit = !1)
            },
            a.alignScheduleTag = function() {
                $("html, body").animate({
                        scrollTop: $("#datepicker").offset().top - 120
                    },
                    2e3)
            },
            o.orderId = s.orderId,
            a.findYourOrderUrl = o.isLoggedIn ? "/us/support/account/order": "/us/support/account/order/#/order-lookup/",
            o.orderNavigationLabel = o.isLoggedIn ? "My Order": "Order Lookup",
            a.formatSchedulingDate = function(e) {
                var n = "";
                if (o.availableDateRanges.length > 0) {
                    var i = {};
                    i = g.getDateRangeForSelectedDate("object" == typeof e ? r.formatDateString(e.start_date, t.DATE_FORMAT) : r.formatDateString(e, t.DATE_FORMAT)),
                        n = r.formatDateString(i.start_date, t.DATE_FORMAT) + " - " + r.formatDateString(i.end_date, t.DATE_FORMAT)
                } else n = "object" == typeof e ? r.formatDateString(e.start_date, t.DATE_FORMAT) : g.getDateRangeForSelectedDate(r.formatDateString(e, t.DATE_FORMAT));
                return n
            },
            a.getAvailableDatesForOrder = function() {
                e.getAvailableDatesForOrder(s.orderId, t.PAGECONTEXT.THANKYOU_PAGE).then(function(e) {
                    e && e.length > 0 ? (o.availableDateResponse = e, _.forEach(e,
                        function(e) {
                            var n = new Date(r.formatDateString(e.start_date, t.DATE_FORMAT)),
                                i = new Date(r.formatDateString(e.end_date, t.DATE_FORMAT));
                            i > n ? o.availableDateRanges.push({
                                start_date: n,
                                end_date: i
                            }) : o.availableDates.push(r.formatDateString(n, t.DATE_FORMAT))
                        }), a.prepopulateHAData(), h(function() {
                        g.updateCalendarDates()
                    })) : a.handleSchedulingError(m.DeliveryViaEmail.title, m.DeliveryViaEmail.description)
                }).E400(function(e) {
                    var t = JSON.parse(e.responseText);
                    return "InvalidPoId" == t.error ? void a.handleSchedulingError(m.DeliveryRetry.title, m.DeliveryRetry.description) : void a.handleSchedulingError(m.DeliveryViaEmail.title, m.DeliveryViaEmail.description)
                }).E409(function(e) {
                    var t = JSON.parse(e.responseText);
                    return "RetryableFailure" == t.error ? void a.handleSchedulingError(m.DeliveryRetry.title, m.DeliveryRetry.description) : void a.handleSchedulingError(m.DeliveryViaEmail.title, m.DeliveryViaEmail.description)
                }).E403(function(e) {
                    a.handleSchedulingError(m.DeliveryViaEmail.title, m.DeliveryViaEmail.description)
                }).fail(function(e) {
                    a.handleSchedulingError(m.DeliveryViaEmail.title, m.DeliveryViaEmail.description)
                })
            },
            a.hideScheduleForm = function() {
                var e = {
                    link_cat: "schedule home delivery",
                    link_id: "ha_order_complete_schedule_home_delivery_cancel",
                    link_meta: "link_name:cancel",
                    link_position: "thankyou>schedule home delivery"
                };
                o.haUtagLinkFire(e),
                    o.enableScheduleForm = !1,
                    o.disableSubmit = !1,
                    $(".ha-delivery-schedule-form .input-control.instructions").removeClass("error"),
                    a.prepopulateHAData()
            },
            a.scheduleInstallation = function() {
                var n = {
                    link_cat: "schedule home delivery",
                    link_id: "ha_order_complete_schedule_home_delivery_schedule",
                    link_meta: "link_name:schedule",
                    link_position: "thankyou>schedule home delivery"
                };
                o.haUtagLinkFire(n),
                    o.enableScheduleForm = !1;
                var i = null,
                    c = o.scheduleForm.selectedDate.split("-");
                if (1 == c.length) i = new Date(c);
                else {
                    var l = new Date(c[0].trim());
                    i = new Date(l)
                }
                var d = null;
                _.forEach(o.availableDateResponse,
                    function(e) {
                        var n = new Date(r.formatDateString(e.start_date, t.DATE_FORMAT));
                        n.getDate() == i.getDate() && n.getMonth() == i.getMonth() && n.getFullYear() == i.getFullYear() && (d = e)
                    });
                var p = {};
                p.request_delivery_date = d.start_date,
                d.end_date && d.end_date != d.start_date && (p.end_date = d.end_date),
                o.scheduleForm.instructions && (p.delivery_remarks = o.scheduleForm.instructions),
                    e.scheduleInstallation(s.orderId, p, t.PAGECONTEXT.THANKYOU_PAGE).then(function(e) {
                        e.data.options && (o.earliestDate = e.data.options.request_delivery_date),
                            o.shoppingCart.options = e.data.options
                    }).E400(function(e) {
                        a.handleSchedulingError(m.ReschduleError.title, m.ReschduleError.description)
                    }).E401(function(e) {
                        a.handleSchedulingError(m.ReschduleError.title, m.ReschduleError.description)
                    }).E404(function(e) {
                        a.handleSchedulingError(m.ReschduleError.title, m.ReschduleError.description)
                    }).fail(function(e) {
                        a.handleSchedulingError(m.ReschduleError.title, m.ReschduleError.description)
                    })
            },
            a.handleSchedulingError = function(e, t) {
                a.err_title = e,
                    a.err_desc = t,
                    a.showSchedulingError = !0,
                    o.$broadcast("thankYouPageError", e, t),
                    h(function() {
                        a.$digest()
                    })
            },
            a.prepopulateHAData = function() {
                o.scheduleForm.instructions = "",
                o.shoppingCart && o.shoppingCart.options && (o.scheduleForm.instructions = o.shoppingCart.options.delivery_remarks, o.earliestDate || (o.earliestDate = o.shoppingCart.options.request_delivery_date)),
                    o.earliestDate ? (o.scheduleForm.selectedDate = a.formatSchedulingDate(o.earliestDate), h(function() {
                        a.$digest()
                    })) : a.showSchedulingError = !0
            },
        o.isHAinCart && a.getAvailableDatesForOrder(),
            a.$on("orderSummaryPageActions",
                function() {
                    a.showSchedulingError = !1,
                    o.isHAinCart && a.getAvailableDatesForOrder()
                }),
            a.subscribeSMS = function() {
                if (a.subscribedPhoneNumber && a.subscribeSMSFORM.$valid) {
                    var n = angular.copy(a.subscribedPhoneNumber);
                    n = n.replace(/\s/g, ""),
                        n = n.replace(/-/g, "");
                    var i = {
                        phone_number: n
                    };
                    e.subscribeSMS(s.orderId, i, t.PAGECONTEXT.THANKYOU_PAGE).then(function(e) {
                        a.subscriptionSuccess = !0,
                            a.isSubscriptionSubmitted = !1,
                            h(function() {
                                a.$digest()
                            })
                    }).E400(function(e) {
                        a.handleSchedulingError(m.defaultError.title, m.defaultError.description)
                    }).E401(function(e) {
                        a.handleSchedulingError(m.defaultError.title, m.defaultError.description)
                    }).E404(function(e) {
                        a.handleSchedulingError(m.defaultError.title, m.defaultError.description)
                    }).fail(function(e) {
                        a.handleSchedulingError(m.defaultError.title, m.defaultError.description)
                    }),
                        h(function() {
                            window.utag && utag.link({
                                link_cat: "Thank You Page",
                                link_id: "ORDER_STATUS_SMS",
                                link_meta: "link_name:Order Status SMS",
                                link_position: "thankyou>Order Status SMS"
                            })
                        })
                }
            }
    }]), checkoutApp.controller("OrderPlacedCtrl", ["CheckoutService", "constants", "financingService", "ConfirmService", "updateUtilities", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "$window",
    function(e, t, n, i, r, a, o, s, c, l, d, p, u) {
        a.validate = function(e) {
            e["class"] = e.$invalid ? "error focus": "focus valid",
                e.$dirty = !0
        },
            a.thankyou = function() {
                o.$broadcast("saveImpression", o.shoppingCart, "new ecom step3|thankyou"),
                    a.orderRef = "#" + o.orderId,
                    a.onFocus = r.formOnFocus,
                    a.title = "fraud" == o.orderType ? "Thank you for ordering from samsung": "Thank you. Your order has been placed.",
                    a.showfandfDescription = o.isFandfEnabled,
                    a.showPaymentMessageForV3 = EcomApi.isTransformRequired,
                o.shoppingCart.finance_plan && (o.financePlan = o.shoppingCart.finance_plan, o.financingDetails = o.shoppingCart.payment.td_financing)
            },
            o.shoppingCart ? a.thankyou() : e.getOrder(s.orderId, t.PAGECONTEXT.THANKYOU_PAGE).then(function(e) {
                var t = e.data;
                o.orderId = e.displayOrderID,
                    o.selectedShippingMethod = t.shipping_method,
                    o.shippingAddress = t.shipping_info,
                    o.addedPayment = t.payment,
                    o.refreshCartHelper(t),
                t.finance_plan && (o.financePlan = t.finance_plan, o.financingDetails = t.payment.td_financing),
                t.shipping_method && (o.selectedShippingMethod.displayText = o.shippingOptionsText[t.shipping_method.description]),
                    $(".cart-basket").text(""),
                    o.isIE() ? ($(".gnb-b2c-icons-cart a svg").remove(), $(".gnb-b2c-icons-cart a").prepend('<svg viewBox="0 0 100 100" id="cart-open"><circle cx="28" cy="90" r="10"/><circle cx="86" cy="90" r="10"/><path d="M86 14v42H28V13.86C28 6.205 21.794 0 14.14 0H0v14h14v42c0 7.732 6.268 14 14 14h58c7.732 0 14-6.268 14-14V14H86z"/></svg>')) : $(".gnb-b2c-icons-cart a svg use").attr("xlink:href", "/us/resources/navigation/assets/images/sprite.symbol.svg#cart-open"),
                    $.cookie("s_ecom_sc_cnt", 0, {
                        path: "/",
                        domain: ".samsung.com"
                    }),
                    a.thankyou(),
                    o.$digest(),
                    a.$apply()
            }).fail(function(e) {
                console.error("thankyou-page error: " + e.responseText),
                    p.path("/cart-info/"),
                    o.$digest()
            }),
            a.subTitle = function() {
                return "fraud" == o.orderType ? "subTitle-fraud-order": "subtitle-confirmed-order"
            },
            a.initRRFeed = function() {
                if (window.r3_common) {
                    var e = this;
                    a.setCookie();
                    var t = new window.r3_common;
                    window.R3_COMMON = t,
                        t.setChannel("web"),
                        t.setApiKey("f20dc17e1482cd47"),
                        t.setBaseUrl("//recs.richrelevance.com/rrserver/"),
                        t.setSessionId(a.rrSessionID),
                        t.setClickthruServer(window.location.protocol + "//" + window.location.host);
                    var n = Cookies.get("prof_bpno_s");
                    n || (n = e.rrSessionID),
                        t.setUserId(n),
                        t.addPlacementType("purchase_complete_page.rr1");
                    var i = new r3_purchased;
                    i.setOrderNumber(o.orderId),
                    o.cartItems && o.cartItems.length > 0 && (o.cartItems.forEach(function(e) {
                        i.addItemIdPriceQuantity(e.sku_id, e.line_item_cost.price.amount + "", e.quantity + "")
                    }), window.r3())
                }
            },
            a.setCookie = function() {
                a.rrSessionID = Cookies.get("rr_session_id"),
                a.rrSessionID || (a.rrSessionID = 1e18 * Math.random(), Cookies.set("rr_session_id", this.rrSessionID, {
                    expires: 30
                }))
            },
            a.btnCarrierPlan = function() {
                window.location.href = SCart.URL.CARRIER_ACTIVATION_URL(o.shoppingCart.cart_id)
            },
        window.isMobile() || a.initRRFeed(),
        o.isMobileAppView() && "undefined" != typeof Splus && "undefined" != typeof Splus.notify && Splus.notify("SUCCESS", o.orderId),
            a.print = function() {
                u.print()
            }
    }]), checkoutApp.controller("RelevanceController", ["CheckoutService", "constants", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "errors", "updateUtilities", "$timeout",
    function(e, t, n, i, r, a, o, s, c, l, d, p) {
        var u, f = function(e) {
            if (e.line_items.length > 0 && window.r3_common) {
                var t = _.pluck(e.line_items, "sku_id"),
                    i = this;
                n.setCookie();
                var r = new window.r3_common;
                window.R3_COMMON = r,
                    r.setChannel("web"),
                    r.setApiKey("f20dc17e1482cd47"),
                    r.setBaseUrl("//recs.richrelevance.com/rrserver/"),
                    r.setSessionId(n.rrSessionID);
                var a = Cookies.get("prof_bpno_s");
                a || (a = i.rrSessionID),
                    r.setUserId(a),
                    r.addPlacementType("cart_page.rr1");
                var o = new r3_cart;
                window.R3_CART = o,
                    t.forEach(function(e) {
                        o.addItemId(e)
                    }),
                    window.r3(),
                    RR.jsonCallback = function() {
                        n.RRCallBack()
                    },
                    r3_flush_onload()
            }
        };
        n.$on("fetchCartRecommendations",
            function() {
                window.isMobile() || e.fetchRecommendations().then(function(e) {
                    var t = [];
                    if (e && e.length > 0 && _.forEach(e,
                            function(e) {
                                relatedProductItem = {},
                                    relatedProductItem.name = e.display_name,
                                    relatedProductItem.imageURL = e.thumbnail_image,
                                    relatedProductItem.id = e.extRefId || e.sku,
                                e.cost.msrp_price && (relatedProductItem.retail_price = e.cost.msrp_price.value),
                                    relatedProductItem.price = e.cost.sale_price.value,
                                e.product_image && (relatedProductItem.mf_logo = e.product_image.replace("http://", "//").replace("https://", "//")),
                                    relatedProductItem.linkURL = e.pdp_url,
                                    t.push(relatedProductItem)
                            }), t && t.length > 0) {
                        i.relevance.items = t;
                        var r = $(".fb-items-carousel");
                        r && r.hasClass("slick-initialized") && r.slick("unslick"),
                            i.$digest(),
                            n.setCarousel(),
                        $(".sticky-holder").hasClass("bottom") && $(".sticky-holder").removeClass("bottom")
                    }
                }).always(function() { (!i.relevance.items || i.relevance.items && 0 == i.relevance.items.length) && (i.fetchCartRecommendations = !1, i.$broadcast("accessoriesAvailable"), p(function() {
                    i.$digest()
                }))
                })
            }),
            n.$on("accessoriesAvailable",
                function() {
                    if (!window.isMobile()) {
                        var e = [],
                            t = [],
                            r = [];
                        cartItems = _.clone(i.cartItems),
                        cartItems.length > 1 && cartItems.sort(function(e, t) {
                            return t.line_item_cost.price.amount / t.quantity - e.line_item_cost.price.amount / e.quantity
                        });
                        var a = cartItems[0];
                        if (n.doNotIncludeSkus = [], _.forEach(i.cartItems,
                                function(e) {
                                    n.doNotIncludeSkus.push(e.sku_id)
                                }), a && a.relatedProducts) {
                            var o = 1e4;
                            for (var s in a.relatedProducts) {
                                var c = a.relatedProducts[s],
                                    l = {}; - 1 == n.doNotIncludeSkus.indexOf(s) && (l.skuId = s, c.familyId && (l.familyId = c.familyId), c.hasOwnProperty("sort_order") ? l.sortOrder = c.sort_order: (l.sortOrder = o, o++), e.push(l))
                            }
                            e && e.length > 0 && (e.sort(function(e, t) {
                                return e.sortOrder - t.sortOrder
                            }), _.forEach(e,
                                function(e) {
                                    e.familyId ? -1 == r.indexOf(e.familyId) && (r.push(e.familyId), t.push(e)) : t.push(e)
                                })),
                                t = _.unique(t),
                                t.length >= 9 ? (n.toBeFilledCount = 0, t = t.splice(0, 9)) : n.toBeFilledCount = n.toBeFilledCount - (t.length ? t.length: 0),
                                n.doNotIncludeSkus = n.doNotIncludeSkus.concat(_.pluck(t, "skuId")),
                                n.constructRR(t, "RelatedProducts")
                        }
                        n.toBeFilledCount > 0 && n.itemsInRRArray && !i.isRRDone && (i.isRRDone = !0, n.RRCallBackExtd()),
                            i.isRelatedProductsDone = !0
                    }
                }),
            n.RRCallBack = function() {
                n.itemsInRRArray = RR.data.JSON,
                !i.isRelatedProductsDone || i.isRRDone || i.fetchCartRecommendations || (i.isRRDone = !0, n.RRCallBackExtd())
            },
            n.RRCallBackExtd = function() {
                if (n.itemsInRRArray.placements.length > 0) {
                    var e = [];
                    _.forEach(n.itemsInRRArray.placements[0].items,
                        function(t) {
                            e.push(t.id)
                        }),
                        e = _.difference(e, n.doNotIncludeSkus),
                        e = e.splice(0, 9),
                        n.constructRR(e, "RR")
                }
            },
            n.setPriceForRRItems = function(e) {
                n.relevance && n.relevance.items && n.relevance.items.length > 0 && e && e.length > 0 && (_.forEach(e,
                    function(e) {
                        item = _.find(n.relevance.items,
                            function(t) {
                                return t.id == e.sku
                            }),
                        item && e && (e.msrp_price && (item.retail_price = e.msrp_price.value), e.sale_price && (item.price = e.sale_price.value))
                    }), p(function() {
                    i.$digest()
                }))
            },
            n.constructRR = function(t, r) {
                var a = t;
                "RelatedProducts" == r && (t = _.pluck(t, "skuId"));
                if (t && t.length > 0) {
                    var o = [];
                    window.utag && utag.link({
                        product_also_bought_sku: t,
                        product_also_bought_count: t.length + ""
                    }),
                        e.getPromotions(t).then(function(s) {
                            t && t.length > 0 && e.getV3PromotionsPrice(t).then(function(e) {
                                e && e.length > 0 && n.setPriceForRRItems(e)
                            }),
                                _.forEach(s,
                                    function(e) {
                                        relatedProductItem = {},
                                            relatedProductItem.name = e.displayName,
                                            relatedProductItem.imageURL = e.thumbnailImage,
                                            relatedProductItem.id = e.extRefId || e.sku,
                                        e.pricing.msrpPrice && (relatedProductItem.retail_price = e.pricing.msrpPrice.value),
                                            relatedProductItem.price = e.pricing.salePriceWithQuantity.value,
                                        e.productImage && (relatedProductItem.mf_logo = e.productImage.replace("http://", "//").replace("https://", "//")),
                                            relatedProductItem.linkURL = e.pdpUrl,
                                        e.sku && "RelatedProducts" == r && (sortId = _.find(a,
                                            function(t) {
                                                return t.skuId == e.sku
                                            }), relatedProductItem.sortOrder = sortId.sortOrder),
                                            o.push(relatedProductItem)
                                    }),
                            o && o.length > 0 && o.sort(function(e, t) {
                                return e.sortOrder - t.sortOrder
                            }),
                                "RR" == r && 0 != i.relevance.items.length && n.ItemsAdded ? (o = o.splice(0, n.toBeFilledCount), i.relevance.items = i.relevance.items.concat(o), n.ItemsAdded = !0) : "RelatedProducts" == r && 0 != i.relevance.items.length && n.ItemsAdded ? (i.relevance.items = o.concat(i.relevance.items), i.relevance.items = i.relevance.items.splice(0, 9), n.ItemsAdded = !0) : n.ItemsAdded || (i.relevance.items = o, n.ItemsAdded = !0),
                                rr = $(i.ischeckoutv3ui ? ".fb-items-carousel": ".you-may-need-products-carousel"),
                            rr && rr.hasClass("slick-initialized") && rr.slick("unslick"),
                                i.$digest(),
                                n.setCarousel(),
                            $(".sticky-holder").hasClass("bottom") && $(".sticky-holder").removeClass("bottom")
                        })
                }
            },
            n.init = function(e) {
                i.isRelatedProductsDone = !1,
                    i.isRRDone = !1,
                    clearTimeout(u),
                    window.r3_common ? f(e) : u = setTimeout(n.init, 3e3, e)
            },
            n.setCookie = function() {
                n.rrSessionID = Cookies.get("rr_session_id"),
                n.rrSessionID || (n.rrSessionID = 1e18 * Math.random(), Cookies.set("rr_session_id", this.rrSessionID, {
                    expires: 30
                }))
            },
            n.addRRItem = function(n) {
                e.addItem(n, 1, t.PAGECONTEXT.PROMOTIONS).then(function(e) {
                    i.removedItem = null,
                        i.removedItemIndex = null,
                        i.$broadcast("refreshCart", e, !0),
                        setTimeout(function() {
                                $("html, body").animate({
                                        scrollTop: $("#_view_cart").offset().top
                                    },
                                    "slow")
                            },
                            200)
                }).E400(function(e) {
                    i.latestPurchaseflow(e),
                        i.$broadcast("cartStepError", l.AddToCartError.title, l.AddToCartError.description)
                }).E401(function(e) {
                    i.latestPurchaseflow(e),
                        i.promptReLogin(e)
                }).E404(function(e) {
                    i.latestPurchaseflow(e),
                        i.$broadcast("cartStepError", l.AddToCartError.title, l.AddToCartError.description)
                }).E409(function(e) {
                    i.latestPurchaseflow(e),
                        e = JSON.parse(e.responseText),
                        "InventoryUnavailable" == e.error ? i.$broadcast("cartStepError", l.InventoryUnavailableError.title, l.InventoryUnavailableError.description) : "PrivateStoreLimitRestriction" == e.error ? i.$broadcast("cartStepError", l.PrivateStoreLimitRestriction.title, l.PrivateStoreLimitRestriction.description) : "PrivateStoreLimitAndMinQuantityRestriction" == e.error ? i.$broadcast("cartStepError", l.PrivateStoreLimitAndMinQuantityRestriction.title, l.PrivateStoreLimitAndMinQuantityRestriction.description) : "PrivateStoreMinQuantityRestriction" == e.error ? i.$broadcast("cartStepError", l.PrivateStoreMinQuantityRestriction.title, l.PrivateStoreMinQuantityRestriction.description) : i.$broadcast("cartStepError", l.AddItemError.title, l.AddItemError.description)
                }).E500(function(e) {
                    d.displayAddToCartErrorMessage(e)
                }).fail(function(e) {
                    i.$broadcast("cartStepError", l.AddItemError.title, l.AddItemError.description),
                        console.log("unable to add item to cart" + e)
                })
            },
            n.setCarousel = function() {
                var e;
                i.ischeckoutv3ui ? (e = $(".fb-items-carousel"), window.utag && utag.link({
                    link_cat: "customers also bought widget loaded" + i.fetchCartRecommendations,
                    link_id: "customers_also_bought_carousel loaded" + i.fetchCartRecommendations,
                    link_meta: "link_name:" + i.fetchCartRecommendations,
                    link_position: "customers also bought>page loaded " + i.fetchCartRecommendations
                })) : (e = $(".you-may-need-products-carousel"), e.on("beforeChange",
                    function(e, t, n, r) {
                        var a = r > n ? "next": "previous",
                            o = r / 3;
                        window.utag && utag.link({
                            link_cat: "customers also bought" + i.fetchCartRecommendations,
                            link_id: "customers_also_bought_carousel" + o + "_" + a + i.fetchCartRecommendations,
                            link_meta: "link_name:" + a + i.fetchCartRecommendations,
                            link_position: "customers also bought>page " + o + i.fetchCartRecommendations
                        })
                    })),
                e.hasClass("slick-initialized") && e.slick("unslick"),
                    e.not(".slick-initialized").slick({
                        dots: !0,
                        infinite: !1,
                        speed: 300,
                        slidesToShow: 3,
                        slidesToScroll: 3,
                        dots: !0,
                        responsive: [{
                            breakpoint: 1024,
                            settings: {
                                slidesToShow: 2,
                                slidesToScroll: 2,
                                infinite: !0,
                                dots: !0
                            }
                        },
                            {
                                breakpoint: 768,
                                settings: {
                                    slidesToShow: 1,
                                    slidesToScroll: 1,
                                    infinite: !0,
                                    dots: !0
                                }
                            }]
                    })
            },
            n.$on("refreshCart",
                function(e, t, i) {
                    i && !window.isMobile() && (n.ItemsAdded = !1, n.toBeFilledCount = 9, n.init(t))
                })
    }]), checkoutApp.controller("SocialSharingCtrl", ["$scope", "$rootScope", "$http", "$routeParams", "$route", "$log", "$location",
    function(e, t, n, i, r, a, o) {
        var s, c;
        e.computeURL = function() {
            var e = t.shoppingCart.line_items,
                n = [];
            angular.forEach(e,
                function(e) {
                    n.push(e)
                }),
            n.length > 1 && n.sort(function(e, t) {
                return t.line_item_cost.price.amount / t.quantity - e.line_item_cost.price.amount / e.quantity
            }),
                s = n[0].attributes.product_details_page_url,
                c = n[0].attributes.display_name
        },
            e.sendEmail = function() {
                e.computeURL();
                var t = "Hi,%0D%0A%0D%0AI got this " + c + " from Samsung.com . Check it out.%0D%0A%0D%0A" + s;
                window.open("mailto:?subject=Got this amazing product from Samsung.com&body=" + t, "_self")
            },
            e.socialSharing = function(t) {
                e.computeURL(),
                    "facebook" == t ? window.open("http://www.facebook.com/sharer.php?u=" + s) : "twitter" == t && window.open("//twitter.com/intent/tweet?text=I got this from samsung.com, check it out. %0a" + s)
            }
    }]), checkoutApp.controller("CartFinanceCtrl", ["CheckoutService", "constants", "$scope", "$rootScope", "updateUtilities", "ModalService", "$timeout", "$location", "errors",
    function(e, t, n, i, r, a, o, s, c) {
        var l = $("input[name='isPublish']").val(),
            d = "1" === l ? "/us/smg": "";
        n.cartFinanceMain = !0,
            n.cartFinanceTerm1 = !1,
            n.cartFinanceTerm2 = !1,
            n.cartFinanceTerm3 = !1,
            n.cartFinanceTermDownload = "#",
            n.returnToCart = function() {
                i.redirectPostLogin = t.CHECKOUT_LOGIN_REDIRECT.CART_INFO,
                    s.path("/cart-info"),
                    o(function() {
                        i.$digest()
                    })
            },
        window.isLogin() && "A" != i.financingStatus && "P" != i.financingStatus || n.returnToCart(),
        i.shoppingCart && i.shoppingCart.purchase_flow_id.id || e.getCartItems(t.PAGECONTEXT.CART_FINANCE).then(function(e) {
            i.shoppingCart = e,
                i.$digest(),
                i.$broadcast("saveImpression", i.shoppingCart, "Finance Application")
        }).E401(function(e) {
            i.promptReLogin(e)
        }).fail(function() {
            i.$broadcast("cartStepError", "We are unable to process your request at this time.", "Please try after sometime. Sorry for the inconvenience.")
        }),
            n.states = ["AA", "AP", "AE", "AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "DC", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY"],
            n.onFocus = r.formOnFocus,
            n.financingForm = {},
        i.shoppingCart && i.$broadcast("saveImpression", i.shoppingCart, "Finance Application"),
            n.validate = function(e, t) {
                if ("date" == t) {
                    var n = new Date(e.$modelValue),
                        i = new Date,
                        r = new Date(i.getFullYear() - 21, i.getMonth(), i.getDate());
                    e.$error.notTwentyOneYears = !1,
                        e.$error.futureDate = !1,
                    n > i && (e.$invalid = !0, e.$error.futureDate = !0),
                    n > r && (e.$invalid = !0, e.$error.notTwentyOneYears = e.$error.futureDate ? !1 : !0)
                }
                e["class"] = e.$invalid ? "error focus": "focus valid",
                    e.$dirty = !0
            },
            n.validateState = function(e) {
                e["class"] = e.$invalid ? "error focus": "focus valid",
                    e.$dirty = !0
            },
            n.cartFinanceTermAccept = function() {
                n.popupWinindow && n.popupWinindow.close(),
                n.cartFinanceTerm1 && (n.financingForm.userTerms1 = !0),
                n.cartFinanceTerm2 && (n.financingForm.userTerms2 = !0),
                n.cartFinanceTerm3 && (n.financingForm.userTerms3 = !0),
                    n.switchPage("main"),
                    n.scrollOnAddressClose(),
                    $("ul.slick-dots li.slick-active").next().trigger("click")
            },
            n.cartFinanceTermCancel = function() {
                n.switchPage("main"),
                    n.scrollOnAddressClose()
            },
            n.cartFinanceTermPrint = function() {
                var e;
                n.cartFinanceTerm1 && (e = "cartFinanceTerm1"),
                n.cartFinanceTerm2 && (e = "cartFinanceTerm2"),
                n.cartFinanceTerm3 && (e = "cartFinanceTerm3");
                var t = document.getElementById(e).innerHTML;
                o(function() {
                        n.popupWinindow = window.open("", "_blank", "width=600,height=700,scrollbars=1,menubar=no,toolbar=no,location=no,status=no,titlebar=no"),
                            n.popupWinindow.document.open(),
                            n.popupWinindow.document.write('<html><body onload="window.print()">' + t + "</html>"),
                            n.popupWinindow.document.close(),
                            n.popupWinindow.close()
                    },
                    0),
                window.utag && utag.link({
                    link_cat: "accept terms and conditions",
                    link_id: "finance_app_print",
                    link_meta: "link_name:print",
                    link_position: "finance application>accept terms and conditions"
                })
            },
            n.switchPage = function(e) {
                n.cartFinanceMain = "main" == e ? !0 : !1,
                    n.cartFinanceTerm1 = "term1" == e ? !0 : !1,
                    n.cartFinanceTerm2 = "term2" == e ? !0 : !1,
                    n.cartFinanceTerm3 = "term3" == e ? !0 : !1
            },
            n.openConditionsModal = function(e, t) {
                var r = {
                    _userTerms1: {
                        name: "e-sign-disclosure",
                        url: "http://s7d2.scene7.com/is/content/SamsungUS/sup/1%20-%20E-Sign%20Samsung%20Credit%20Account_final.pdf"
                    },
                    _userTerms2: {
                        name: "samsung-finacing-program",
                        url: i.relativeImagePath + "/checkout/SamsungFinancingProgramAccountTerms.pdf"
                    },
                    _userTerms3: {
                        name: "td-bank-privacy-notice",
                        url: i.relativeImagePath + "/checkout/RCSPrivacyPolicy.pdf"
                    }
                };
                if (t.preventDefault(), "LABEL" !== t.target.tagName) if (i.ischeckoutv3ui) e.$modelValue && "A" !== t.target.tagName ? (e.$setViewValue(!1), e.$render()) : ("_userTerms1" == e.$name && (n.cartFinanceTermDownload = "http://s7d2.scene7.com/is/content/SamsungUS/sup/1%20-%20E-Sign%20Samsung%20Credit%20Account_final.pdf", n.switchPage("term1")), "_userTerms2" == e.$name && (n.cartFinanceTermDownload = i.relativeImagePath + "/checkout/SamsungFinancingProgramAccountTerms.pdf", n.switchPage("term2")), "_userTerms3" == e.$name && (n.cartFinanceTermDownload = i.relativeImagePath + "/checkout/RCSPrivacyPolicy.pdf", n.switchPage("term3"))),
                    setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $(".financing-content-header").offset().top
                                },
                                "slow")
                        },
                        100);
                else if (e.$modelValue && "A" !== t.target.tagName) e.$setViewValue(!1),
                    e.$render();
                else {
                    var o = {
                            download: r[e.$name].url,
                            url: d + "/content/samsung/partials/checkout/tc/" + r[e.$name].name + ".content.html"
                        },
                        s = {
                            fetchCurDoc: function() {
                                var e;
                                $(".js-print-class").each(function() {
                                    $(this).is(":visible") && (e = $(this).attr("id"))
                                }),
                                e && this.printTerm(e)
                            },
                            printTerm: function(e) {
                                var t = document.getElementById(e).innerHTML,
                                    n = window.open("", "_blank", "width=600,height=700,scrollbars=1,menubar=no,toolbar=no,location=no,status=no,titlebar=no");
                                n.document.open(),
                                    n.document.write('<html><body onload="window.print()">' + t + "</html>"),
                                    n.document.close(),
                                window.utag && utag.link({
                                    link_cat: "accept terms and conditions",
                                    link_id: "finance_app_print",
                                    link_meta: "link_name:print",
                                    link_position: "finance application>accept terms and conditions"
                                })
                            }
                        };
                    a.open(void 0, "md", o, s, "conditions-modal", $("#conditionsModal").html()).then(function() {
                            e.$setViewValue(!0),
                                e.$render()
                        },
                        function() {})
                }
            },
            n.scrollOnAddressClose = function() {
                setTimeout(function() {
                        $("html, body").animate({
                                scrollTop: $("#userTermsSection").offset().top
                            },
                            "slow")
                    },
                    100)
            },
            n.openAddressSuggesion = function(e, t) {
                $("body").append("<div class='checkout-modal-overlay'></div>");
                var r = {
                        useOriginal: function(e) {
                            n.setAddress(e, "original"),
                                i.$broadcast("closeModal"),
                                $(".checkout-modal-overlay").remove(),
                                n.scrollOnAddressClose(),
                            window.utag && utag.link({
                                link_cat: "choose address",
                                link_id: "finance_app_choose_address",
                                link_meta: "link_name:original",
                                link_position: "finance application>choose address>original"
                            })
                        },
                        addressSelected: function(e) {
                            n.setAddress(e, "suggested"),
                                i.$broadcast("closeModal"),
                                $(".checkout-modal-overlay").remove(),
                                n.scrollOnAddressClose(),
                            window.utag && utag.link({
                                link_cat: "choose address",
                                link_id: "finance_app_choose_address",
                                link_meta: "link_name:suggested",
                                link_position: "finance application>choose address>suggested"
                            })
                        },
                        modalClose: function() {
                            i.$broadcast("closeModal"),
                                $(".modal-overlay").remove(),
                                n.scrollOnAddressClose(),
                                i.$digest()
                        }
                    },
                    o = {
                        originalAddress: e,
                        suggestedAddresses: t
                    };
                n.modal = a.open(void 0, "addmd", o, r, "address-modal", $("#suggestedAddress").html()).then(function() {},
                    function() {})
            },
            n.setAddress = function(e, t) {
                n.financingForm.address1 = e.line1,
                    n.financingForm.address2 = e.line2,
                    n.financingForm.city = e.city,
                    n.financingForm.state = e.state_or_province,
                    n.financingForm.postal_code = e.postal_code,
                "original" == t && n.postFinancingApplication()
            },
            n.getSuggestedAddressStub = function() {
                var e = {
                        line1: "test line1",
                        line2: "test line2",
                        city: "city1",
                        state_or_province: "WA",
                        postal_code: "10019",
                        country: "US"
                    },
                    t = {
                        line1: "test line2",
                        line2: "test line22",
                        city: "city2",
                        state_or_province: "AL",
                        postal_code: "10020",
                        country: "US"
                    },
                    n = {
                        line1: "test line3",
                        line2: "test line222",
                        city: "city3",
                        state_or_province: "NY",
                        postal_code: "10021",
                        country: "US"
                    };
                return [e, t, n]
            },
            o(function() {
                    $("select").selectric(),
                        n.setCarousel()
                },
                0),
            e.getFinancingPubKey(t.PAGECONTEXT.COMMON).then(function(e) {
                i.financingPubKey = e
            }),
            e.getUserProfile().then(function(e) {
                e = JSON.parse(e),
                e && (n.financingForm.email = e.emailaddress, n.financingForm.home_phone_number = e.cellPhone || e.telePhone || e.workPhone, n.$digest(), n.financingForm.email && ($("#_userEmail").focus().blur(), $("#_userEmail").parents(".input-control").addClass("focus")), n.financingForm.home_phone_number && ($("#_userPhoneNo").focus().blur(), $("#_userPhoneNo").parents(".input-control").addClass("focus")), setTimeout(function() {
                        $("html, body").animate({
                                scrollTop: 0
                            },
                            "slow")
                    },
                    200))
            }),
            n.tdResponse = function(e) {
                var n = e.td_bank_finance.td_bank_credit_application.response;
                n.credit_application_response.application_status && "A" == n.credit_application_response.application_status || "P" == n.credit_application_response.application_status || "D" == n.credit_application_response.application_status ? (i.financingDetails = n.credit_application_response, i.financingStatus = n.credit_application_response.application_status, i.isSufficientCredit = n.credit_application_response.available_credit > i.shoppingCart.cost.total.amount ? !0 : !1, i.newFinancingUser = !0, i.redirectPostLogin = t.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT, s.path("/cart-payment/finance"), i.$digest()) : i.$broadcast("cartStepError", c.FinancingDefaultError.title, c.FinancingDefaultError.description)
            },
            n.postFinancingApplication = function() {
                e.submitFinanceApplication(n.financingForm, t.PAGECONTEXT.CART_FINANCE).then(function(e) {
                    $.cookie("displayDelayedShipping", "true", {
                        domain: ".samsung.com",
                        path: "/"
                    }),
                        n.tdResponse(e)
                }).E401(function(e) {
                    i.promptReLogin(e)
                }).fail(function(e) {
                    e = JSON.parse(e.responseText),
                        i.$broadcast("cartStepError", c.FinancingDefaultError.title, c.FinancingDefaultError.description)
                })
            },
            n.submitApplicationCta = function() {
                n.financingAddress = {},
                    n.financingAddress.city = n.financingForm.city,
                    n.financingAddress.country = "US",
                    n.financingAddress.line1 = n.financingForm.address1,
                n.financingForm.address2 && (n.financingAddress.line2 = n.financingForm.address2),
                    n.financingAddress.postal_code = n.financingForm.postal_code,
                    n.financingAddress.state_or_province = n.financingForm.state,
                    e.validateAddress(n.financingAddress).then(function(e) {
                        n.validateAddressResponse(e) && n.postFinancingApplication()
                    }).E400(function() {
                        i.$broadcast("paymentStepError", c.AddressInvalid.title, c.AddressInvalid.description)
                    }).E404(function() {
                        i.$broadcast("paymentStepError", c.AddressInvalid.title, c.AddressInvalid.description)
                    }).fail(function(e) {
                        var t = JSON.parse(e.responseText);
                        401 == t.statusCode ? (t.status = 401, i.promptReLogin(t)) : i.$broadcast("paymentStepError", c.AddressInvalid.title, c.AddressInvalid.description)
                    })
            },
            n.validateAddressResponse = function(e) {
                return e && e.success ? !0 : e && !e.success && e.alternatives && e.alternatives.length > 0 ? (n.openAddressSuggesion(n.financingAddress, e.alternatives), !1) : (i.$broadcast("paymentStepError", c.AddressInvalid.title, c.AddressInvalid.description), !1)
            },
            n.toggleShowPersonalDetails = function() {
                $("#personalDetails").next().is(":visible") ? ($("#personalDetails").next().slideUp(), $("#personalDetails").parent().removeClass("form-active")) : ($("#personalDetails").next().slideDown(), $("#personalDetails").parent().addClass("form-active"))
            },
            n.toggleShowHousingAndIncomeDetails = function() {
                $("#housingAndIncomeDetails").next().is(":visible") ? ($("#housingAndIncomeDetails").next().slideUp(), $("#housingAndIncomeDetails").parent().removeClass("form-active")) : ($("#housingAndIncomeDetails").next().slideDown(), $("#housingAndIncomeDetails").parent().addClass("form-active"))
            },
            n.toggleShowUserTermsSection = function() {
                $("#userTermsSection").next().is(":visible") ? ($("#userTermsSection").next().slideUp(), $("#userTermsSection").parent().removeClass("form-active")) : ($("#userTermsSection").next().slideDown(), $("#userTermsSection").parent().addClass("form-active"))
            },
            n.setCarousel = function() {
                var e = $(".terms-carousel-holder");
                e.hasClass("slick-initialized") && e.slick("unslick"),
                    e.slick({
                        infinite: !1,
                        speed: 300,
                        slidesToShow: 1,
                        slidesToScroll: 1,
                        dots: !0,
                        responsive: [{
                            breakpoint: 1024,
                            settings: {
                                slidesToShow: 1,
                                slidesToScroll: 1,
                                infinite: !0,
                                dots: !0
                            }
                        },
                            {
                                breakpoint: 768,
                                settings: {
                                    slidesToShow: 1,
                                    slidesToScroll: 1,
                                    infinite: !0,
                                    dots: !0
                                }
                            }]
                    })
            };
        var p = function() {
            n.cartFinanceMain || ($(window).width() < 768 ? $("body").css("padding-bottom", $(".financing-terms-actions").outerHeight() + "px") : $("body").css("padding-bottom", "0px"))
        };
        $(window).on("resize", p),
            p()
    }]), checkoutApp.controller("CheckoutSingleClickCtrl", ["CheckoutService", "constants", "errors", "updateUtilities", "$scope", "$rootScope", "$routeParams", "$http", "$log", "$route", "$location", "$timeout", "cryptoUtil",
    function(e, t, n, i, r, a, o, s, c, l, d, p, u) {
        function f(e) {
            var t = e.siblings(".existing-shipping-address").find(".delete-section");
            _.each(t,
                function(e) {
                    h(!1, $(e))
                })
        }
        function h(e, t) {
            e ? (t.find(".btn-remove").hide(), t.find(".delete-dialogue-box").show()) : (t.find(".btn-remove").show(), t.find(".delete-dialogue-box").hide())
        }
        function g(n) {
            e.deleteShippingAddress(n, t.PAGECONTEXT.SHIPPING_INFO).then(function(e) {
                $("." + n).parent().hide()
            }).fail(function(e) {
                a.$broadcast("paymentStepError", "Error in deleting shipping address", "Please try again")
            })
        }
        function m() {
            r.selectedPayment || "financing" == r.newCard || (r.newCard = !0, r.selectedPayment = a.cardInfo),
            a.billing.line2 && "" != a.billing.line2 || (a.billing = _.omit(a.billing, "line2"));
            var e, t, n = {},
                i = {},
                o = "PUT",
                s = a.billing,
                c = r.newCard;
            t = "financing" == c ? a.financingDetails: r.selectedPayment;
            var l = !a.isLoggedIn;
            a.disableSaveCard() && (r.cardInfo.saveCard = !0);
            var d = a.cardInfo.saveCard;
            if (this.shoppingCartId = a.shoppingCart.cart_id, "financing" == c) {
                var i = {};
                i.billing_info = t.billing_info,
                    i.billing_record = {},
                    i.billing_record.billing_record_id = t.billing_record_id,
                    i.billing_record.account_provider = "ECom",
                    e = SCart.URL.EXISTING_PAYMENT_URL(this.shoppingCartId, !0)
            } else if (c) {
                var i = {};
                i.credit_card_details_encrypted = u.encryptCardInfo(t),
                    i.billing_info = s,
                l || (i.save_payment_method = d ? !0 : !1);
                var e = SCart.URL.PAYMENT_URL(this.shoppingCartId, !0);
                l && (e = SCart.URL.GUEST_PAYMENT_URL(this.shoppingCartId, !0))
            } else {
                var i = {};
                i.billing_info = t.billing_info,
                    i.billing_record = {},
                    i.billing_record.billing_record_id = t.id,
                    i.billing_record.account_provider = t.account_provider,
                    e = SCart.URL.EXISTING_PAYMENT_URL(this.shoppingCartId, !0)
            }
            return n.method = o,
                n.payload = i,
                n.url = e,
                n.handler = "addPaymentHandler",
                n
        }
        function y() {
            var e, t = {},
                n = "POST";
            return r.contShippingAddress(),
                e = SCart.URL.VALIDATE_ADDRESS_URL(!0),
                t.method = n,
                t.payload = r.validateAddress,
                t.url = e,
                t.handler = "validateAddressHandler",
                t
        }
        function v() {
            var e, t = {},
                n = "PUT";
            return r.contShippingAddress(),
                r.addUpdateShippingInfo(),
            a.shoppingCart && a.shoppingCart.purchase_flow_id && (this.purchaseFlowId = a.shoppingCart.purchase_flow_id.id),
                e = SCart.URL.SHIPPING_INFO_URL(this.purchaseFlowId, !0),
                t.method = n,
                t.payload = {
                    shipping_info: a.shippingAddress,
                    save_for_identity: !0
                },
                t.url = e,
                t.handler = "addShippingAddressHandler",
                t
        }
        function C() {
            var e, t = {},
                n = "GET";
            return this.shoppingCartId = a.shoppingCart.cart_id,
                e = SCart.URL.SHIPPING_OPTIONS_URL(this.shoppingCartId, !0),
                t.method = n,
                t.url = e,
                t.handler = "fetchShippingOptionsHandler",
                t
        }
        function S() {
            var e, t = {},
                n = "PUT";
            this.shoppingCartId = a.shoppingCart.cart_id;
            var i = {};
            return a.userPreferredShippingMethod ? (i.id = a.userPreferredShippingMethod.id, i.description = a.userPreferredShippingMethod.description) : (i.id = a.selectedShippingMethod.id, i.description = a.selectedShippingMethod.description),
                e = SCart.URL.SHIPPING_METHOD_URL(this.shoppingCartId, !0),
                t.method = n,
                t.payload = i,
                t.url = e,
                t.handler = "applyShippingMethodHandler",
                t
        }
        function b() {
            var e, t = {},
                n = "POST";
            return this.shoppingCartId = a.shoppingCart.cart_id,
                e = SCart.URL.ADD_FINANCE_PLAN_URL(this.shoppingCartId, !0),
                t.method = n,
                t.payload = {
                    finance_plan_id: a.cartFinancingDetails.finance_plan_id
                },
                t.url = e,
                t.handler = "setFinancePlanHandler",
                t
        }
        a.linkSectionMode,
            a.states = ["Select", "AL", "AK", "AS", "AZ", "AR", "CA", "CO", "CT", "DE", "DC", "FM", "FL", "GA", "GU", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MH", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "MP", "OH", "OK", "OR", "PW", "PA", "PR", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VI", "VA", "WA", "WV", "WI", "WY"],
        a.UIStateInfo.paymentInfo.paymentMethod && "card" != a.UIStateInfo.paymentInfo.paymentMethod || a.UIStateInfo.paymentInfo.isSavedCardSelected || (a.UIStateInfo.paymentInfo.paymentMethod = "card", $("#_paymentTypeCC").prop("checked", !0), $(".checkout-payment-cc-details").show()),
            a.selectDefaultAddress = function() {
                a.isLoggedIn && a.savedAddress.length > 0 && !a.shoppingCart.payment ? (a.shippingMode = "edit", $(".existing-shipping-address").eq(0).find("input").prop("checked", !0), a.shippingSameAsBilling = !1, r.onAddrSelect(a.savedAddress[0], !0), a.$broadcast("setDefaultDetailsToCart", "savedAddress")) : a.shoppingCart.payment && a.savedAddress.length > 0 && !a.shoppingCart.payment.paypal ? (a.shippingMode = "edit", $(".existing-shipping-address").eq(0).find("input").prop("checked", !0), a.shippingSameAsBilling = !1, r.onAddrSelect(a.savedAddress[0], !0), a.$broadcast("setDefaultDetailsToCart", "savedAddress")) : 0 != a.savedAddress.length || a.shoppingCart.payment && (!a.shoppingCart.payment || a.shoppingCart.payment.paypal) || (a.shippingSameAsBilling = !1, a.shippingMode = "edit", r.singleClickAddressAdded = !0, a.fireSingleClickCheckoutTags()),
                    p(function() {
                        a.$digest()
                    })
            },
            a.selectDefaultPayment = function() {
                a.isLoggedIn && a.savedPayments.length > 0 && !a.shoppingCart.payment && !a.isFinancingApproved() && "paypal" != o.payment_source ? ($(".saved-cc-card").eq(0).find("input").prop("checked", !0), r.onPaymentSelect(a.savedPayments[0]), a.$broadcast("setDefaultDetailsToCart", "savedPayment")) : a.shoppingCart.payment && !a.shoppingCart.payment.paypal ? a.savedPayments && a.savedPayments.length > 0 ? ($(".saved-cc-card").eq(0).find("input").prop("checked", !0), r.onPaymentSelect(a.savedPayments[0]), a.$broadcast("setDefaultDetailsToCart", "savedPayment")) : (a.UIStateInfo.paymentInfo.isComplete = !1, $("#_paymentTypeCC").prop("checked", !0), $(".checkout-payment-cc-details").show(), r.singleClickPaymentAdded = !0, a.fireSingleClickCheckoutTags()) : (r.singleClickPaymentAdded = !0, a.fireSingleClickCheckoutTags()),
                    p(function() {
                        a.$digest()
                    })
            },
            r.$on("setDefaultDetailsToCart",
                function(e, t) {
                    "savedPayment" == t && (r.savedPaymentsDone = !0),
                    "savedAddress" == t && (r.savedAddressDone = !0),
                    r.savedAddressDone && r.savedPaymentsDone && r.computeCTA(!1)
                }),
            a.setFinancingAsPayment = function() {
                a.paymentMode = "view",
                    a.redirectFromPayPal = !1,
                    a.UIStateInfo.paymentInfo.paymentMethod = "financing",
                    a.UIStateInfo.paymentInfo.paypalStatus = void 0,
                    a.UIStateInfo.paymentInfo.isComplete = !0,
                    a.UIStateInfo.paymentInfo.isChanged = !1,
                    a.UIStateInfo.paymentInfo.isValid = !0,
                    a.UIStateInfo.paymentInfo.isSavedCardSelected = !1,
                    0 == a.savedAddress.length ? a.UIStateInfo.shippingInfo.isComplete = !1 : r.onAddrSelect(a.savedAddress[0], !0),
                    a.shippingSameAsBilling = !1,
                    $("input[name=payMethod]:checked").removeAttr("checked"),
                    $(".financing-bank-details").find("input").prop("checked", !0),
                    $(".checkout-payment-cc-details").hide(),
                    p(function() {
                        a.$digest()
                    })
            },
            r.getShippingOptionsWrapper = function(n) {
                e.getShippingOptions(t.PAGECONTEXT.SHIPPING_INFO).then(function(i) {
                    if (r.getShippingOptionsDone = !0, a.fireSingleClickCheckoutTags(), r.fetchShippingOptionsCallBack(i), a.UIStateInfo.shippingMethod.isComplete = !0, n && a.UIStateInfo.shippingInfo.isValid) {
                        var o = {};
                        o.id = a.selectedShippingMethod.id,
                            o.description = a.selectedShippingMethod.description,
                            a.UIStateInfo.shippingMethod.isValid = !0,
                            e.updateShippingMethod(o, t.PAGECONTEXT.SHIPPING_METHOD).then(function(e) {
                                a.shippingMethodMode = "edit",
                                    a.$digest(),
                                    a.$broadcast("refreshCart", e, !1)
                            }).E401(function(e) {
                                a.promptReLogin(e)
                            })
                    }
                    p(function() {
                        a.$digest()
                    })
                }).E401(function(e) {
                    var t = JSON.parse(e.responseText);
                    t = t.error,
                    "DRTokenRefreshed" == t && (a.UIStateInfo.shippingMethod.isComplete = !1),
                        a.promptReLogin(e)
                })
            },
            r.setOptionsDisplayText = function(e) {
                e.forEach(function(e) {
                    e.displayText = a.shippingOptionsText[e.description]
                })
            },
            r.fetchShippingOptionsCallBack = function(e) {
                return e && 0 != e.length ? ($(".checkout-payment-shipping-methods .checkout-payment-form-subtitle").text(""), $(".checkout-payment-shipping-methods .checkout-payment-form-subtitle").text("Select Shipping Method"), window.utag && utag.link({
                    shipping_options_avail: "" + e.length
                }), e.sort(function(e, t) {
                    return parseFloat(e.cost.amount) - parseFloat(t.cost.amount)
                }), r.setOptionsDisplayText(e), void r.setDefaultShippingOption(e)) : ($(".checkout-payment-shipping-methods .checkout-payment-form-subtitle").text("No applicable shipping methods"), void(a.cost && a.cost.total && 0 == a.cost.total.amount && $(".checkout-payment-shipping-methods .checkout-payment-form-subtitle").addClass("no-shipping-zero-dollar")))
            },
            r.blurFields = function() {
                a.billing && (a.billing.email && ($("#_billingaddressInfo_userEmail").focus().blur(), $("#_billingaddressInfo_userEmail").parents(".input-control").addClass("focus")), a.billing.phone && ($("#_billingaddressInfo_userPhoneNo").focus().blur(), $("#_billingaddressInfo_userPhoneNo").parents(".input-control").addClass("focus")), a.billing.first_name && ($("#_billingaddressInfo_firstName").focus().blur(), $("#_billingaddressInfo_firstName").parents(".input-control").addClass("focus")), a.billing.last_name && ($("#_billingaddressInfo_lastName").focus().blur(), $("#_billingaddressInfo_lastName").parents(".input-control").addClass("focus")), a.billing.line1 && ($("#_billingaddressInfo_useraddress").focus().blur(), $("#_billingaddressInfo_useraddress").parents(".input-control").addClass("focus")), a.billing.line2 && ($("#_billingaddressInfo_useraddress1").focus().blur(), $("#_billingaddressInfo_useraddress1").parents(".input-control").addClass("focus")), a.billing.city && ($("#_billingaddressInfo_userCity").focus().blur(), $("#_billingaddressInfo_userCity").parents(".input-control").addClass("focus")), a.billing.postal_code && ($("#_billingaddressInfo_userZipCode").focus().blur(), $("#_billingaddressInfo_userZipCode").parents(".input-control").addClass("focus")), a.billing.state_or_province && "Select" != a.billing.state_or_province && ($("#_billingaddressInfo_userState").focus().blur(), $("#_billingaddressInfo_userState").parents(".input-control").addClass("focus"))),
                r.address && (r.address.first_name && ($("#_addressInfo_firstname").parents(".input-control").addClass("focus"), $("#_addressInfo_firstname").parents(".input-control").removeClass("error")), r.address.last_name && ($("#_addressInfo_lastname").parents(".input-control").addClass("focus"), $("#_addressInfo_lastname").parents(".input-control").removeClass("error")), r.address.line1 && ($("#_addressInfo_useraddress").parents(".input-control").addClass("focus"), $("#_addressInfo_useraddress").parents(".input-control").removeClass("error")), r.address.line2 && ($("#_addressInfo_useraddress1").parents(".input-control").addClass("focus"), $("#_addressInfo_useraddress1").parents(".input-control").removeClass("error")), r.address.city && ($("#_addressInfo_userCity").parents(".input-control").addClass("focus"), $("#_addressInfo_userCity").parents(".input-control").removeClass("error")), r.address.postal_code && ($("#_addressInfo_userZipCode").parents(".input-control").addClass("focus"), $("#_addressInfo_userZipCode").parents(".input-control").removeClass("error")), r.address.state_or_province && "Select" != r.address.state_or_province && ($("#_addressInfo_userState").parents(".input-control").addClass("focus"), $("#_addressInfo_userState").parents(".input-control").removeClass("error")))
            },
            a.onSameAddress = function(e, t) {
                h(!1, $(".billing-address-as-shipping")),
                    f($(".billing-address-as-shipping")),
                e && (r.address = e),
                    r.addressInvalid = !1,
                    r.overrideValidation = !1,
                    r.formChanged = !1,
                    a.selectedAddress = void 0,
                    r.shippingFormvalid = !0,
                    r.alternateAddress = null,
                    a.UIStateInfo.shippingInfo.isValid = !1,
                    a.UIStateInfo.shippingInfo.isChanged = !0,
                    a.shippingMode = "edit",
                r.address && r.blurFields(),
                    !t && a.shippingSameAsBilling ? ($(".add-new-shipping-address").hide(), a.isLoggedIn && a.savedAddress && a.savedAddress.length > 0 ? ($(".add_new_addr").hide(), $(".add-new-shipping-address").show()) : ($(".add_new_addr").show(), $(".add-new-shipping-address").hide()), a.shippingSameAsBilling = !1, $("#_sameAsShipAddress").removeAttr("checked"), r.shippingForm && r.shippingForm.$valid ? a.UIStateInfo.shippingInfo.isComplete = !0 : "paypal" != a.UIStateInfo.paymentInfo.paymentMethod && "completed" != a.UIStateInfo.paymentInfo.paypalStatus && (a.UIStateInfo.shippingInfo.isComplete = !1)) : t || (a.UIStateInfo.shippingInfo.isComplete = !0, a.shippingSameAsBilling = !0, $(".add_new_addr").hide()),
                    p(function() {
                        a.$digest()
                    }),
                    $("#shipping_addr").find(".input-control").removeClass("error")
            },
            r.initShippingAndPayment = function() {
                a.shoppingCart && a.shoppingCart.shipping_info && (a.onSameAddress(_.clone(a.shoppingCart.shipping_info), !0), $(".add-new-shipping-address").hide(), $(".add_new_addr").show(), p(function() {
                    r.$digest()
                })),
                a.shoppingCart && a.shoppingCart.payment && (a.billing = a.shoppingCart.payment.billing_info, p(function() {
                    a.$digest()
                })),
                    r.blurFields(),
                a.shoppingCart && a.shoppingCart.payment && a.shoppingCart.payment.paypal && "TxSuccess" == a.shoppingCart.payment.paypal.paypal_status && a.shoppingCart.is_paypal_auth_valid && ($(".checkout-payment-cc-details").hide(), a.UIStateInfo.paymentInfo.isComplete = !0, a.UIStateInfo.paymentInfo.isValid = !0, a.UIStateInfo.shippingInfo.isComplete = !0, a.UIStateInfo.shippingInfo.isValid = !0, a.UIStateInfo.shippingInfo.isChanged = !0, a.UIStateInfo.paymentInfo.paymentMethod = "paypal", a.UIStateInfo.paymentInfo.paypalStatus = "completed", a.redirectFromPayPal = !0, a.shippingMode = "view", a.selectedAddress = a.shoppingCart && a.shoppingCart.shipping_info ? a.shoppingCart.shipping_info: void 0, "PayPalCredit" == a.shoppingCart.payment.paypal.type ? $("#_paymentTypePaypalCredit").attr("checked", !0) : $("#_paymentTypePaypal").attr("checked", !0))
            },
            a.shippingMethodMode = "edit",
            a.shoppingCart ? (r.getShippingOptionsWrapper(!1), r.initShippingAndPayment()) : e.getCartItems(t.PAGECONTEXT.CART_FINANCE).then(function(e) {
                a.shoppingCart = e,
                    r.initShippingAndPayment(),
                    a.$digest(),
                    r.getShippingOptionsWrapper(!1)
            }).E401(function(e) {
                a.promptReLogin(e)
            }).fail(function() {
                a.$broadcast("cartStepError", "We are unable to process your request at this time.", "Please try after sometime. Sorry for the inconvenience.")
            }),
            a.paymentSource = o.payment_source,
            a.isFinancingOn = "finance" == o.payment_source ? !0 : !1,
            r.validate = function(e) {
                e["class"] = e.$invalid ? "error focus": "focus valid",
                    e.$dirty = !0
            },
            r.validateState = function(e, t) {
                e.$setValidity("unselect", "Select" != t),
                    e["class"] = e.$invalid ? "error focus": "focus valid",
                    e.$dirty = !0
            },
            r.onFocus = i.formOnFocus,
            r.$watch("cardForm.$valid",
                function() {
                    r.cardForm && (r.cardFormvalid = r.cardForm.$valid, a.cost && a.cost.total && 0 != a.cost.total.amount && "paypal" != a.UIStateInfo.paymentInfo.paymentMethod && "completed" != a.UIStateInfo.paymentInfo.paypalStatus && (a.UIStateInfo.paymentInfo.isComplete = r.cardForm.$valid, a.shippingSameAsBilling && (a.UIStateInfo.shippingInfo.isComplete = r.cardForm.$valid)))
                }),
            r.newCreditCard = function() {
                if (window.utag && utag.link({
                        link_cat: "add payment method",
                        link_id: "payment_information_payment_method_add_CreditCard",
                        link_meta: "link_name:CreditCard",
                        link_position: "payment information>add payment method"
                    }), a.redirectFromPayPal = !1, a.isLoggedIn && (a.billing.email = a.contact.email, a.billing.phone = a.contact.phone), a.UIStateInfo.paymentInfo.isComplete = r.cardForm.$valid ? !0 : !1, a.UIStateInfo.paymentInfo.paymentMethod = "card", a.UIStateInfo.paymentInfo.paypalStatus = void 0, a.UIStateInfo.paymentInfo.isChanged = !0, a.UIStateInfo.paymentInfo.isValid = !1, a.UIStateInfo.paymentInfo.isSavedCardSelected = !1, r.selectedPayment = void 0, r.isPaypal = !1, $(".checkout-payment-cc-details").show(), $("input[name=payMethod]:checked").removeAttr("checked"), r.scrollToCCSection(), a.isPaymentSourceDR) {
                    $("#btnPaymentCnt").hide();
                    var n = $("#cardFormFrame"),
                        i = n.attr("src");
                    i && i.length > 0 ? (r.scrollToCCSection(), r.manageIframeMessage()) : e.getPaymentUiUrl(t.PAGECONTEXT.PAYMENT_INFO).then(function(e) {
                        e && e.url && ($(".spinner_container").show(), $("#cardFormFrame").attr("src", e.url), r.scrollToCCSection(), r.manageIframeMessage())
                    })
                } (void 0 == a.shippingSameAsBilling || a.shippingSameAsBilling) && (a.shippingSameAsBilling = !0, $("#_sameAsShipAddress").prop("checked", !0))
            },
            r.paypal = function(e) {
                window.utag && utag.link({
                    link_cat: "add payment method",
                    link_id: e ? "payment_information_payment_method_add_PaypalCredit": "payment_information_payment_method_add_Paypal",
                    link_meta: e ? "link_name:PaypalCredit": "link_name:Paypal",
                    link_position: "payment information>add payment method"
                }),
                    $(".checkout-payment-cc-details").hide(),
                    $("input[name=payMethod]:checked").removeAttr("checked"),
                a.isPaymentSourceDR && $("#btnPaymentCnt").show(),
                    r.isPaypal = !0,
                    r.isPaypalCredit = e,
                    a.UIStateInfo.paymentInfo.paymentMethod = "paypal",
                    a.UIStateInfo.paymentInfo.paypalStatus = "inprocess",
                    a.UIStateInfo.paymentInfo.isChanged = !0,
                    a.UIStateInfo.paymentInfo.isValid = !1,
                    a.UIStateInfo.paymentInfo.isSavedCardSelected = !1,
                    a.UIStateInfo.paymentInfo.isComplete = !1
            },
            r.zipCodeKeyUp = function(e, t) {
                "cardForm" == t ? r.cardForm.$valid && !e.$invalid && "Select" != a.billing.state_or_province && (r.cardForm.$valid && (a.UIStateInfo.paymentInfo.isComplete = !0), r.computeCTA()) : "shippingForm" == t && r.shippingForm.$valid && !e.$invalid && "Select" != r.address.state_or_province && (r.shippingForm.$valid && (a.UIStateInfo.shippingInfo.isComplete = !0), r.computeCTA())
            },
            r.onPaymentSelect = function(e) {
                window.utag && utag.link({
                    link_cat: "select payment method",
                    link_id: "payment_information_payment_method_select_CreditCard",
                    link_meta: "link_name:CreditCard",
                    link_position: "payment information>select payment method"
                }),
                    a.redirectFromPayPal = !1,
                    a.UIStateInfo.paymentInfo.paymentMethod = "card",
                    a.UIStateInfo.paymentInfo.paypalStatus = void 0,
                    a.UIStateInfo.paymentInfo.isComplete = !0,
                    a.UIStateInfo.paymentInfo.isChanged = !0,
                    a.UIStateInfo.paymentInfo.isValid = !1,
                    a.UIStateInfo.paymentInfo.isSavedCardSelected = !0,
                    r.selectedPayment = e,
                    r.newCard = !1,
                    r.isPaypal = !1,
                    a.shippingSameAsBilling = !1,
                    $("input[name=_paymentTypes]:checked").removeAttr("checked"),
                    $(".checkout-payment-cc-details").hide(),
                a.isPaymentSourceDR && $("#btnPaymentCnt").show()
            },
            r.contPayment = function() {
                if (null != r.selectedPayment || r.cardFormvalid || r.isPaypal) {
                    if (r.isPaypal) return r.handlePaypal();
                    r.selectedPayment || (r.newCard = !0, r.selectedPayment = a.cardInfo),
                    a.billing.line2 && "" != a.billing.line2 || (a.billing = _.omit(a.billing, "line2")),
                    window.utag && utag.link({
                        link_cat: "payment method",
                        link_id: "checkout_payment_information_payment_method_" + r.selectedPayment,
                        link_meta: "link_name:" + r.selectedPayment,
                        link_position: "payment information>" + r.selectedPayment
                    })
                }
            },
            r.onPaymentComplete = function() {
                a.paymentSource = "",
                a.selectedAddress && a.shippingSameAsBilling && (a.selectedAddress = a.addedPayment.billing_info),
                    a.$broadcast("contactInfoUpdated"),
                ("view" != a.shippingMode || a.shippingSameAsBilling) && (a.shippingMode = "edit"),
                    a.$digest(),
                    "view" == a.shippingMode && "view" == a.paymentMode ? setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $("#_place_order").offset().top
                                },
                                "slow")
                        },
                        200) : setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $("#_user_address").offset().top
                                },
                                "slow")
                        },
                        200)
            },
            r.handlePaypal = function() {
                e.getPaypalUrl(!a.isLoggedIn, r.isPaypalCredit).then(function(e) {
                    e && e.payment && e.payment.paypal && ($(".spinner_container").show(), $(".spinner_container").addClass("preloader-paypal"), $(".spinner_container").append('<div class="preloader-paypal-msg">We are redirecting you to PayPal. Please be patient. The estimated taxes will change based on your shipping address.</div>'), window.location.href = e.payment.paypal.redirect_url),
                        $(".checkout-payment-cc-details").hide()
                }).E401(function(e) {
                    a.promptReLogin(e)
                }).fail(function(e) {
                    a.$broadcast("paymentStepError", "We could not process your request at this time.", "Please try again with a different payment option."),
                    window.utag && utag.link({
                        link_cat: "paypal error response",
                        link_id: "checkout_payment_information_paypal_error_response",
                        link_meta: "link_name:paypal error response",
                        link_position: "payment information"
                    })
                })
            },
            r.$on("cartAvailable",
                function() {
                    a.isPaymentSourceDR && e.getPaymentUiUrl().then(function(e) {
                        if (e && e.url) {
                            var t = $("#cardFormFrame");
                            t && t.length > 0 && t.attr("src", e.url)
                        }
                    })
                }),
            r.$on("profileInfoAvailable",
                function() {
                    r.selectedPayment || (a.billing.email || (a.billing.email = a.contact.email), a.billing.phone || (a.billing.phone = a.contact.phone), r.blurFields())
                });
        var E = function() {
            a.isLoggedIn && (r.address.email || (r.address.email = a.contact.email), r.address.phone || (r.address.phone = a.contact.phone)),
                r.blurshipping()
        };
        r.$on("onUserLogin",
            function() {
                if (a.isPaymentSourceDR) {
                    var t = $("#cardFormFrame");
                    t && t.length > 0 && t.removeAttr("src")
                }
                a.onErrorClose(),
                    e.getUserProfile().then(function(e) {
                        e = JSON.parse(e),
                        e && e.emailaddress && (a.contact || (a.contact = {}), a.contact.email = e.emailaddress, a.contact.phone = e.cellPhone || e.telePhone || e.workPhone, a.userEmail = e.emailaddress, a.billing || (a.billing = {}), a.billing.email = a.contact.email, a.billing.phone = a.contact.phone, 0 != a.cost.total.amount || a.anyPremiumCareSubscriptionCart() || a.cartHasSubscription() || (r.address || (r.address = {}), E()), a.$digest())
                    })
            }),
            r.onPaymentEdit = function() {
                r.selectedPayment = a.addedPayment,
                a.addedPayment && a.addedPayment.billing_record_id && p(function() {
                        $("#" + a.addedPayment.billing_record_id).trigger("click")
                    },
                    0),
                    $("input[name=payMethod]:checked").length > 0 ? $("input[id=_paymentTypeCC]:checked").removeAttr("checked") : r.selectedPayment = void 0,
                0 == $("input[id=_paymentTypeCC]:checked").length && $(".checkout-payment-cc-details").hide(),
                    r.isPaypal = !1,
                    a.paymentMode = "edit",
                    $(".checkout-payment-forms .input-control").addClass("focus")
            },
            r.scrollToCCSection = function() {
                setTimeout(function() {
                        $("html, body").animate({
                                scrollTop: $(".checkout-payment-cc-details").offset().top
                            },
                            "slow"),
                            r.blurFields()
                    },
                    200)
            },
            r.openLinkSection = function() {
                a.linkSectionMode = "edit"
            },
            r.blurFields(),
        !a.financingPubKey && a.isFinancingOn && "P" == a.financingStatus && e.getFinancingPubKey(t.PAGECONTEXT.COMMON).then(function(e) {
            a.financingPubKey = e
        }),
            r.linkTDAccount = function() {
                e.linkTDAccount(r.TDlinkForm, t.PAGECONTEXT.CART_INFO).then(function(e) {
                    var t = e.td_bank_finance.td_bank_existing_account.response.credit_application_response; ! t.application_status || "A" != t.application_status && "P" != t.application_status && "D" != t.application_status ? e.td_bank_finance.td_bank_existing_account.response.error && -1 != e.td_bank_finance.td_bank_existing_account.response.error.message.indexOf("FinanceAdapterRequestPayloadDecryptionFailed") ? a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description) : a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description) : (a.financingDetails = t, a.financingStatus = t.application_status, a.isSufficientCredit = t.available_credit > a.shoppingCart.cost.total.amount ? !0 : !1, a.applyFinancingToCart()),
                        a.$digest()
                }).fail(function(e) {
                    msg = JSON.parse(msg.responseText),
                        "FinanceAdapterRequestPayloadDecryptionFailed" == msg.error ? a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description) : a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description)
                })
            },
            r.changePayment = function() {
                a.linkSectionMode = "view"
            },
            r.payFinancing = function() {
                a.redirectFromPayPal = !1,
                    $("input[name=payMethod]:checked").removeAttr("checked"),
                    $(".checkout-payment-cc-details").hide(),
                    a.billing = _.clone(a.financingDetails.billing_info),
                    r.newCard = "financing",
                    a.UIStateInfo.paymentInfo.paymentMethod = "financing",
                    a.UIStateInfo.paymentInfo.paypalStatus = void 0,
                    a.UIStateInfo.paymentInfo.isValid = !1,
                    a.UIStateInfo.paymentInfo.isChanged = !0,
                    a.UIStateInfo.paymentInfo.isComplete = !0,
                    a.shippingSameAsBilling = !1
            },
            r.$watch("shippingForm.$valid",
                function() {
                    r.shippingFormvalid = r.shippingForm.$valid,
                    a.shippingSameAsBilling || "paypal" == a.UIStateInfo.paymentInfo.paymentMethod || "completed" == a.UIStateInfo.paymentInfo.paypalStatus || (a.UIStateInfo.shippingInfo.isComplete = r.shippingForm.$valid ? !0 : !1)
                }),
            r.contactUpdate = !1,
            r.onFormChange = function(e) {
                a.UIStateInfo.shippingInfo.isValid = !1,
                    a.UIStateInfo.shippingInfo.isChanged = !0,
                    a.UIStateInfo.shippingInfo.isComplete = r.shippingForm.$valid ? !0 : !1,
                r.addressInvalid && r.alternateAddress && (r.formChanged = !0),
                    r.overrideValidation = !1,
                    a.selectedAddress = null,
                    $("input[name=alterAddr]:checked").removeAttr("checked"),
                    a.isNewShippingInlineMsg = !1,
                    r.errorInShippingExists = !1,
                    $("#newshippingErrorMsgDesc").text("")
            },
            r.onCardFormChange = function(e) {
                a.UIStateInfo.paymentInfo.isValid = !1,
                    a.UIStateInfo.paymentInfo.isChanged = !0,
                    a.isCCInlineMsg = !1,
                    a.isShippingInlineMsg = !1,
                    r.errorInShippingExists = !1,
                    $("#shippingErrorMsgDesc").text(""),
                    $("#CCerrorMsgTitle").text(""),
                    a.UIStateInfo.paymentInfo.isComplete = r.cardForm.$valid ? !0 : !1,
                a.shippingSameAsBilling && (a.UIStateInfo.shippingInfo.isChanged = !0, a.UIStateInfo.shippingInfo.isValid = !1, a.UIStateInfo.shippingInfo.isComplete = r.cardForm.$valid ? !0 : !1),
                    r.overrideValidation = !1
            },
            r.onAddrSelect = function(e, t) {
                h(!1, $("." + e.id)),
                    f($("." + e.id).parent()),
                    r.overrideValidation = !0,
                    r.addressInvalid = !1,
                    r.formChanged = !1,
                    a.selectedAddress = e,
                    r.address = {},
                    r.alternateAddress = null,
                    r.errorInShippingExists = !1,
                    a.shippingSameAsBilling = !1,
                    a.UIStateInfo.shippingInfo.isComplete = !0,
                a.cost && a.cost.total && 0 == a.cost.total.amount && !a.anyPremiumCareSubscriptionCart() && !a.cartHasSubscription() && $(".add_phone_email").hide(),
                    $(".add_new_addr").hide(),
                    $(".add-new-shipping-address").show(),
                    a.UIStateInfo.shippingInfo.isComplete = !0,
                    a.UIStateInfo.shippingInfo.isChanged = !0,
                    a.UIStateInfo.shippingInfo.isValid = !0,
                t || r.computeCTA()
            },
            r.addNewAddr = function() {
                a.UIStateInfo.shippingInfo.isComplete = !1,
                    a.UIStateInfo.shippingInfo.isChanged = !0,
                    a.UIStateInfo.shippingInfo.isValid = !1,
                    f($(".add-new-shipping-address")),
                    r.overrideValidation = !1,
                    r.formChanged = !1,
                    r.address = {},
                null != a.addedPayment && a.addedPayment.billing_info && (r.address.phone = a.addedPayment.billing_info.phone, r.address.email = a.addedPayment.billing_info.email),
                a.cost && a.cost.total && 0 == a.cost.total.amount && !a.anyPremiumCareSubscriptionCart() && !a.cartHasSubscription() && ($(".add_phone_email").show(), r.blurshipping()),
                    E(),
                    r.address.state_or_province = a.states[0],
                    a.selectedAddress = void 0,
                    r.alternateAddress = null,
                    r.errorInShippingExists = !1,
                    a.shippingSameAsBilling = !1,
                    $("input[name=addr]:checked").removeAttr("checked"),
                    $(".add_new_addr").toggle(),
                    $(".add-new-shipping-address").hide(),
                    p(function() {
                        $("#_addressInfo_userState").selectric()
                    })
            },
            r.onAddrEdit = function() {
                a.shippingMode = "edit",
                    r.addressInvalid = !1,
                a.cost && a.cost.total && 0 == a.cost.total.amount && (a.shippingSameAsBilling = !1, $("#_sameAsShipAddress").removeAttr("checked"), r.shippingForm.$valid && (a.bluraddress(), a.selectedAddress && ($(".add_new_addr").show(), $(".add-new-shipping-address").hide(), $(".add_phone_email").show(), r.blurshipping())), r.shippingFormvalid = r.shippingForm.$valid),
                0 == $("input[name=addr]:checked").length && (a.selectedAddress = void 0)
            },
            r.onAlterAddrSelect = function(e) {
                a.UIStateInfo.shippingInfo.isValid = !1,
                    a.UIStateInfo.shippingInfo.isChanged = !0,
                    a.UIStateInfo.shippingInfo.isComplete = !0,
                    r.addressInvalid = !1,
                    $("input[name=addr]:checked").removeAttr("checked"),
                    r.address = jQuery.extend({},
                        r.prevAddr, e),
                    a.selectedAddress = angular.copy(r.address),
                    $("#sameAddressAsBilling").removeAttr("checked"),
                    $("#sameAddressInShipping").removeAttr("checked"),
                    r.errorInShippingExists = !1,
                    r.overrideValidation = !0,
                    p(function() {
                        $("#_addressInfo_userState").selectric()
                    })
            },
            r.usePrevAddress = function() {
                a.UIStateInfo.shippingInfo.isValid = !0,
                    a.UIStateInfo.shippingInfo.isChanged = !1,
                    a.UIStateInfo.shippingInfo.isComplete = !0,
                    r.addressInvalid = !1,
                    a.selectedAddress = r.address,
                    r.overrideValidation = !0,
                    r.addUpdateShippingInfo(),
                    $("input[name=alterAddr]:checked").removeAttr("checked"),
                    r.errorInShippingExists = !1,
                    setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $("#_shipping_method").offset().top
                                },
                                "slow")
                        },
                        200)
            },
            r.addUpdateShippingInfo = function() {
                var e = jQuery.extend({},
                    a.selectedAddress || r.address);
                delete e.id,
                    delete e.created_date,
                    delete e.modified_date,
                    delete e.override_suggestion,
                    delete e.address_overridden,
                    delete e.dr_address_id,
                    delete e.dr_nick_name,
                ("" == e.line2 || void 0 == e.line2) && delete e.line2;
                var t = a.cost.total.amount; ! a.selectedAddress && (t > 0 || a.anyPremiumCareSubscriptionCart() || a.cartHasSubscription()) && (a.addedPayment && a.addedPayment.billing_info && a.addedPayment.billing_info.phone ? e.phone = a.addedPayment.billing_info.phone: a.billing.phone && (e.phone = a.billing.phone), e.email = a.billing.email),
                    a.shippingAddress = e
            },
            r.contShippingAddress = function() { (null != a.selectedAddress || r.shippingFormvalid || a.shippingSameAsBilling) && (r.validateAddress = jQuery.extend({},
                a.selectedAddress), a.shippingSameAsBilling && (r.address = _.clone(a.billing)), a.selectedAddress || (r.validateAddress = jQuery.extend({},
                r.address)), r.prevAddr = angular.copy(r.validateAddress), delete r.validateAddress.phone, delete r.validateAddress.last_name, delete r.validateAddress.first_name, delete r.validateAddress.middle_name, delete r.validateAddress.middle_initial, delete r.validateAddress.created_date, delete r.validateAddress.modified_date, delete r.validateAddress.override_suggestion, delete r.validateAddress.email, delete r.validateAddress.id, delete r.validateAddress.dr_address_id, delete r.validateAddress.dr_nick_name, delete r.validateAddress.address_overridden, ("" == r.validateAddress.line2 || void 0 == r.validateAddress.line2) && delete r.validateAddress.line2)
            },
            r.deleteDialog = function(e) {
                var t = $("." + e);
                h(!0, t),
                    f(t.parent()),
                    t.find(".btn-yes").off().on("click",
                        function() {
                            g(e)
                        }),
                    t.find(".btn-no").off().on("click",
                        function() {
                            h(!1, t)
                        })
            },
            r.onFocus = i.formOnFocus,
            r.blurshipping = function() {
                r.address && (r.address.email && $("#_addressInfo_userEmail").parents(".input-control").addClass("focus"), r.address.phone && $("#_addressInfo_userPhoneNo").parents(".input-control").addClass("focus"))
            },
            a.bluraddress = function() {
                $(".add_new_addr").find("input[type='text'],input[type='number'],input[type='tel']").parents(".input-control").addClass("focus"),
                    $(".add_new_addr").find(".input-control.select-box").addClass("focus")
            },
            r.blurshipping(),
            r.$on("profileInfoAvailable",
                function() {
                    r.address && (r.address.email || (r.address.email = a.contact.email), r.address.phone || (r.address.phone = a.contact.phone), r.blurshipping())
                }),
            r.$on("contactInfoUpdated",
                function() { (a.selectedAddress || a.shippingSameAsBilling) && (r.contactUpdate = !0, r.contShippingAddress()),
                    r.shippingFormvalid = !1
                }),
            a.focusOnShippingMethods = !1,
            r.showShippingInfo = function() {
                $(window).width() > 768 && ($(".white-glove-info-icon").addClass("active"), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").css({
                    top: "115px",
                    opacity: "0",
                    display: "block"
                }), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                        top: "65px",
                        opacity: 1
                    },
                    350))
            },
            r.hideShippingInfo = function() {
                $(window).width() > 768 && ($(".white-glove-info-icon").removeClass("active"), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                        top: "115px",
                        opacity: 0
                    },
                    350,
                    function() {
                        $(".white-glove-info-msg").css({
                            display: "none"
                        })
                    }))
            },
            r.toggleShippingInfo = function(e) {
                if (e.stopPropagation(), $(".white-glove-info-icon").hasClass("active") ? $(document).off("click.whiteGlove") : $(document).on("click.whiteGlove",
                        function(e) {
                            r.toggleShippingInfo(e)
                        }), $(".white-glove-info-icon").toggleClass("active"), $(window).width() < 768) {
                    var t = $(".white-glove-info-icon").parents(".sm-label").find("label").outerHeight() + 20 + "px";
                    $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").css("top", t),
                        $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").slideToggle()
                } else $(".white-glove-info-icon").hasClass("active") ? ($(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").css({
                    top: "115px",
                    opacity: "0",
                    display: "block"
                }), $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                        top: "65px",
                        opacity: 1
                    },
                    350)) : $(".white-glove-info-icon").parents(".sm-label").find(".white-glove-info-msg").animate({
                        top: "115px",
                        opacity: 0
                    },
                    350,
                    function() {
                        $(".white-glove-info-msg").css({
                            display: "none"
                        })
                    })
            },
            r.$on("addressUpdated",
                function(e, t, n) {
                    a.shoppingCart.shipping_method && r.setDefaultShippingOption([a.shoppingCart.shipping_method]),
                        r.getShippingOptionsWrapper(n)
                }),
            r.onShippintMethodEdit = function() {
                a.shippingMethodMode = "edit"
            },
            r.shippingMethodSelect = function(i) {
                var o = a.cost.total.amount;
                a.userPreferredShippingMethod = {},
                    a.userPreferredShippingMethod.id = i.id,
                    a.userPreferredShippingMethod.description = i.description,
                    $(".generic-error").hide(),
                a.shoppingCart.shipping_info && e.updateShippingMethod(a.userPreferredShippingMethod, t.PAGECONTEXT.SHIPPING_METHOD).then(function(e) {
                    if (a.selectedShippingMethod = i, a.shippingMethodMode = "edit", a.focusOnShippingMethods = !0, a.$digest(), a.$broadcast("refreshCart", e, !1), 0 == o && a.cost.total.amount > 0) {
                        var t = "You have selected " + i.description + " shipping option";
                        a.$broadcast("paymentStepError", t, n.NonZeroCart.description),
                            a.addedPayment = null,
                            a.UIStateInfo.paymentInfo.isValid = !1,
                            a.paymentMode = "edit",
                            a.shippingMode = "edit",
                            a.selectDefaultAddress(),
                            a.selectDefaultPayment(),
                        a.isLoggedIn || r.newCreditCard(),
                            a.$digest()
                    } else o > 0 && 0 == a.cost.total.amount && (a.zerodollarchange(), a.UIStateInfo.paymentInfo.isValid = !0, a.UIStateInfo.paymentInfo.isChanged = !1, a.UIStateInfo.paymentInfo.isComplete = !0, a.UIStateInfo.paymentInfo.paymentMethod = void 0, a.selectedAddress && 0 == $("input[name=addr]:checked").length && a.isLoggedIn && ($(".add_phone_email").show(), r.blurshipping()), $(".generic-error").hide());
                    "view" == a.shippingMode && "view" == a.paymentMode ? setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $("#_place_order").offset().top
                                },
                                "slow")
                        },
                        200) : "edit" == a.shippingMode && 0 == a.cost.total.amount && setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $("#_user_address").offset().top
                                },
                                "slow")
                        },
                        200)
                }).E401(function(e) {
                    a.promptReLogin(e)
                }).fail(function(e) {
                    $("#" + a.selectedShippingMethod.id).prop("checked", !0),
                        a.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description)
                })
            },
            a.shippingOptionsText = {
                Standard: "1-5 business days",
                Expedited: "2 business days",
                Express: "1 business day",
                "Samsung White Glove Delivery": "Delivery at your convenience",
                "Standard Ground Shipping": "1-5 business days",
                "Overnight Air - US - samsung": "1 business day",
                "2 Day Air - US": "2 business days",
                "White Glove - samsung": "Delivery at your convenience",
                "Standard Freight Shipping-samsung": "Delivery at your convenience"
            },
            a.isStandardShipping = function(e) {
                return "standard" === e.description.toLowerCase() || "standard ground shipping" === e.description.toLowerCase()
            },
            r.setDefaultShippingOption = function(e) {
                r.shippingOptions = e,
                    a.isFreeShippingForDream = !1,
                    _.forEach(e,
                        function(e) {
                            "5766800" == e.id && a.cartHasDreamSku() && (a.isFreeShippingForDream = !0)
                        }),
                    a.selectedShippingMethod = a.shoppingCart.shipping_method,
                    a.selectedShippingMethod.displayText = a.shippingOptionsText[a.shoppingCart.shipping_method.description],
                    a.$digest();
                var t = a.shoppingCart.shipping_method.id;
                $("#" + t).attr("checked", "checked"),
                    $("#" + t).next().click()
            },
            r.computeCTA = function(t) {
                var i = [],
                    o = [],
                    s = [];
                a.globalerrorExists = !1,
                    a.applyShippingToCart = function(t) {
                        if (!r.errorInShippingExists && 0 == s.length && 0 == i.length && t && a.UIStateInfo.paymentInfo.isValid && a.UIStateInfo.shippingInfo.isValid && a.UIStateInfo.shippingMethod.isValid && r.placeOrder(), s.length > 0 && e.purchaseFlowCTA(s, "validate-address-call").then(function(e) {
                                e[0].success && (a.UIStateInfo.shippingInfo.isValid = !0, a.UIStateInfo.shippingInfo.isChanged = !1, r.alternateAddress = void 0),
                                e[0].success || ($("input[name=addr]:checked").prop("checked") && ($("input[name=addr]:checked").removeAttr("checked"), $(".add_new_addr").show(), $(".add-new-shipping-address").hide(), $("#shipping_addr").find(".input-control").addClass("focus"), $("select").selectric(), a.selectedAddress = void 0), r.alternateAddress = e[0].alternatives, r.errorInShippingExists = r.alternateAddress ? !0 : !1, r.$digest(), a.isCCInlineMsg || a.globalerrorExists || (a.shippingSameAsBilling ? setTimeout(function() {
                                        $("html, body").animate({
                                                scrollTop: $("#_suggestion1").offset().top
                                            },
                                            "slow")
                                    },
                                    200) : setTimeout(function() {
                                        $("html, body").animate({
                                                scrollTop: $("#_suggestion2").offset().top
                                            },
                                            "slow")
                                    },
                                    200))),
                                    a.isShippingInlineMsg = !1,
                                    $("#shippingErrorMsgDesc").text(""),
                                    a.isNewShippingInlineMsg = !1,
                                    $("#newshippingErrorMsgDesc").text(""),
                                    a.UIStateInfo.shippingInfo.isComplete = !0,
                                !r.errorInShippingExists && 0 == i.length && t && a.UIStateInfo.paymentInfo.isValid && a.UIStateInfo.shippingInfo.isValid && a.UIStateInfo.shippingMethod.isValid && r.placeOrder()
                            }).validateAddressHandler(function(e) {
                                r.alternateAddress = void 0;
                                var t = e.status;
                                400 == t ? a.$broadcast("CTAShippingAddrError", "We could not find the shipping address!") : 401 == t ? a.promptReLogin(e) : 404 == t ? (r.overrideValidation = !0, r.$digest(), a.$broadcast("CTAShippingAddrError", "We could not find the shipping address!")) : 409 == t ? (r.overrideValidation = !0, r.$digest(), a.$broadcast("CTAShippingAddrError", "We could not find the shipping address!")) : (console.log("checkout error:" + e), a.$broadcast("paymentStepError", n.ShippingAddressInvalid.title, n.ShippingAddressInvalid.description))
                            }).fail(function(e) {
                                a.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description)
                            }), i.length > 0) {
                            var o = a.cost.total.amount;
                            e.purchaseFlowCTA(i, "apply-shipping-call").then(function(e) {
                                if (r.singleClickAddressAdded = !0, a.fireSingleClickCheckoutTags(), a.UIStateInfo.shippingInfo.isValid = !0, a.UIStateInfo.shippingInfo.isComplete = !0, a.UIStateInfo.shippingInfo.isChanged = !1, a.selectedShippingMethod) {
                                    if (0 == o && e[e.length - 1].cost.total.amount > 0) {
                                        var i = "You have selected " + a.userPreferredShippingMethod.description + " shipping option";
                                        a.$broadcast("paymentStepError", i, n.NonZeroCart.description),
                                            a.addedPayment = null,
                                            a.UIStateInfo.paymentInfo.isValid = !1,
                                            a.UIStateInfo.paymentInfo.isComplete = !1,
                                            a.paymentMode = "edit",
                                            a.shippingMode = "edit",
                                            a.selectDefaultAddress(),
                                            a.selectDefaultPayment(),
                                        a.isLoggedIn || r.newCreditCard(),
                                            a.$digest()
                                    }
                                    a.userPreferredShippingMethod = void 0,
                                        a.refreshCart(e[e.length - 1], !1),
                                    e[e.length - 2] && r.fetchShippingOptionsCallBack(e[e.length - 2])
                                } else a.anyPremiumCareSubscriptionCart() ? a.anyPremiumCareSubscriptionCart() && (2 == e.length ? (a.refreshCart(e[e.length - 2], !1), r.fetchShippingOptionsCallBack(e[e.length - 1])) : 1 == e.length && a.refreshCart(e[e.length - 1], !1)) : (e[e.length - 2] && a.refreshCart(e[e.length - 2], !1), r.fetchShippingOptionsCallBack(e[e.length - 1]));
                                a.UIStateInfo.shippingMethod.isValid = !0,
                                    a.UIStateInfo.shippingMethod.isComplete = !0,
                                    a.UIStateInfo.shippingMethod.isChanged = !1,
                                a.shippingSameAsBilling && $("#_sameAsShipAddress").prop("checked", !0),
                                !r.errorInShippingExists && t && a.UIStateInfo.paymentInfo.isValid && a.UIStateInfo.shippingInfo.isValid && a.UIStateInfo.shippingMethod.isValid && r.placeOrder(),
                                    a.$digest()
                            }).addShippingAddressHandler(function(e) {
                                var t = e.status;
                                if (400 == t) {
                                    var i = JSON.parse(e.responseText);
                                    i = i.error || JSON.parse(i.message).error,
                                        "DisallowedShippingAddress" == i ? a.$broadcast("paymentStepError", n.DisallowedShippingAddress.title, n.DisallowedShippingAddress.description) : "DisallowedPostalCode" == i ? a.$broadcast("paymentStepError", n.ShippingDisallowedPostalCode.title, n.ShippingDisallowedPostalCode.description) : "DisallowedShippingCity" == i ? a.$broadcast("paymentStepError", n.DisallowedShippingCity.title, n.DisallowedShippingCity.description) : "DisallowedShippingState/Province" == i ? a.$broadcast("paymentStepError", n.DisallowedShippingStateProvince.title, n.DisallowedShippingStateProvince.description) : a.$broadcast("paymentStepError", n.BadRequestDefaultError.title, n.BadRequestDefaultError.description)
                                } else if (401 == t) a.promptReLogin(e);
                                else if (404 == t);
                                else if (409 == t) {
                                    var i = JSON.parse(e.responseText);
                                    i = i.error || JSON.parse(i.message).error,
                                        "PurchaseFlowCannotBeModified" == i ? a.$broadcast("paymentStepError", n.PurchaseFlowCannotBeModified.title, n.PurchaseFlowCannotBeModified.description) : a.$broadcast("paymentStepError", n.AddressAlreadyInAddressList.title, n.AddressAlreadyInAddressList.description)
                                } else a.$broadcast("paymentStepError", "Error in validating shipping address", "The provided shipping address is not allowed")
                            }).applyShippingMethodHandler(function(e) {
                                var t = e.status;
                                401 == t && a.promptReLogin(e)
                            }).fail(function(e) {
                                a.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description)
                            })
                        }
                    },
                    !a.cost || a.cost && a.cost.total && (a.cost.total.amount > 0 || a.anyPremiumCareSubscriptionCart() || a.cartHasSubscription()) ? !a.UIStateInfo.paymentInfo.isComplete || a.UIStateInfo.paymentInfo.isValid && !a.UIStateInfo.paymentInfo.isChanged || (o = [m()], "financing" == r.newCard && (o = o.concat(b()))) : (a.UIStateInfo.paymentInfo.isValid = !0, a.UIStateInfo.paymentInfo.isComplete = !0, a.UIStateInfo.paymentInfo.isChanged = !1),
                !a.shippingSameAsBilling && (a.shippingSameAsBilling || !r.shippingForm.$valid && void 0 == r.selectedAddress) || a.UIStateInfo.shippingInfo.isValid && !a.UIStateInfo.shippingInfo.isChanged || (r.overrideValidation || (s = [y()]), i = i.concat(v())),
                !a.shippingSameAsBilling && (a.shippingSameAsBilling || !r.shippingForm.$valid && void 0 == r.selectedAddress) || a.UIStateInfo.shippingMethod.isValid && !a.UIStateInfo.shippingMethod.isChanged || (i = i.concat(C()), a.selectedShippingMethod && (i = i.concat(S()))),
                    o.length > 0 ? e.purchaseFlowCTA(o, "apply-payment-call").then(function(e) {
                        r.singleClickPaymentAdded = !0,
                            a.fireSingleClickCheckoutTags(),
                            a.addedPayment = e[e.length - 1].payment,
                            a.$broadcast("refreshCart", e[e.length - 1], !1),
                            r.onPaymentComplete(),
                            a.UIStateInfo.paymentInfo.isValid = !0,
                            a.UIStateInfo.paymentInfo.isComplete = !0,
                            a.UIStateInfo.paymentInfo.isChanged = !1,
                            a.applyShippingToCart(t)
                    }).addPaymentHandler(function(e) {
                        var i = e.status;
                        400 == i ? (a.applyShippingToCart(t), a.UIStateInfo.paymentInfo.isSavedCardSelected ? a.$broadcast("paymentStepError", n.InvalidCreditCard.title, n.InvalidCreditCard.description) : a.$broadcast("CTACCError", "THE CREDIT CARD INFORMATION YOU HAVE ENTERED IS NOT VALID")) : 401 == i ? a.promptReLogin(e) : 409 == i ? (a.applyShippingToCart(t), a.UIStateInfo.paymentInfo.isSavedCardSelected ? a.$broadcast("paymentStepError", n.InvalidCreditCard.title, n.InvalidCreditCard.description) : a.$broadcast("CTACCError", "THE CREDIT CARD INFORMATION YOU HAVE ENTERED IS NOT VALID")) : (window.utag && utag.link({
                            link_cat: "CC error response",
                            link_id: "checkout_payment_information_CC_error_response",
                            link_meta: "link_name:CC error response",
                            link_position: "payment position"
                        }), a.applyShippingToCart(t), a.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description), r.selectedPayment = null)
                    }).setFinancePlanHandler(function(e) {
                        var t = e.status;
                        401 == t ? a.promptReLogin(e) : a.$broadcast("cartStepError", n.FinancingDefaultError.title, n.FinancingDefaultError.description)
                    }).fail(function(e) {
                        a.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description)
                    }) : a.applyShippingToCart(t)
            },
            a.redirectPostLogin = a.redirectPostLogin || null,
            a.utagLink = function() {
                window.utag && utag.link({
                    link_cat: "validation error",
                    link_id: "checkout_validation_error",
                    link_meta: "link_name:validation_error",
                    link_position: "checkout"
                })
            },
            a.placeOrderWrapper = function() {
                r.errorInShippingExists ? a.shippingSameAsBilling ? setTimeout(function() {
                        $("html, body").animate({
                                scrollTop: $("#focusDiv1").offset().top
                            },
                            "slow")
                    },
                    200) : setTimeout(function() {
                        $("html, body").animate({
                                scrollTop: $("#focusDiv2").offset().top
                            },
                            "slow")
                    },
                    200) : a.isCTANotRequired() ? a.placeOrder() : r.computeCTA(!0)
            },
            a.placeOrder = function() {
                a.globalerrorExists = !1;
                var i = $.cookie("remoteId");
                i && "undefined" != i ? e.validateAuthToken(i).then(function(e) {
                    var i = JSON.parse(e);
                    "valid" == i.status ? a.handleCheckout() : (a.checkoutLoginMessage = n.ReLogin.title, a.redirectPostLogin = t.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER, window.SCart.sessionIdValid = !1, window.location.href = window.SCart.URL.CHECKOUT_URL(), a.$digest())
                }).fail(function(e) {
                    a.checkoutLoginMessage = n.ReLogin.title,
                        a.redirectPostLogin = t.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER,
                        window.SCart.sessionIdValid = !1,
                        window.location.href = window.SCart.URL.CHECKOUT_URL(),
                        a.$digest()
                }) : a.handleCheckout()
            },
            a.handleCheckout = function() {
                var i = new Date;
                a.submitCartCallTriggerTime = i.getTime(),
                    e.checkout(!a.isLoggedIn, t.PAGECONTEXT.ORDER).then(function(e) {
                        if (a.orderId = e.external_order_id, a.selectedShippingMethod = e.shipping_method, e.shipping_method && (a.selectedShippingMethod.displayText = a.shippingOptionsText[e.shipping_method.description]), a.shippingAddress = e.shipping_info, a.addedPayment = e.payment, a.refreshCart(e, !1), d.path("/order-confirm/" + e.cart_id), $(".cart-basket").text(""), a.isIE() ? ($(".gnb-b2c-icons-cart a svg").remove(), $(".gnb-b2c-icons-cart a").prepend('<svg viewBox="0 0 100 100" id="cart-open"><circle cx="28" cy="90" r="10"/><circle cx="86" cy="90" r="10"/><path d="M86 14v42H28V13.86C28 6.205 21.794 0 14.14 0H0v14h14v42c0 7.732 6.268 14 14 14h58c7.732 0 14-6.268 14-14V14H86z"/></svg>')) : $(".gnb-b2c-icons-cart a svg use").attr("xlink:href", "/us/resources/navigation/assets/images/sprite.symbol.svg#cart-open"), $.cookie("s_ecom_sc_cnt", 0, {
                                path: "/",

                                domain: ".samsung.com"
                            }), a.$digest(), r.$apply(), "object" == typeof newrelic) {
                            newrelic.addPageAction("singleclick-order-placed-tag", {
                                checkoutv3: $.cookie("checkoutv3"),
                                orderId: e.cart_id
                            });
                            var t = new Date;
                            newrelic.fireCustomPageLoadTag("order-confirm-singleclick", ((t.getTime() - a.submitCartCallTriggerTime) / 1e3).toFixed(2))
                        }
                    }).E405(function(e) {
                        a.utagLink(),
                            e = JSON.parse(e.responseText),
                            n[e.error] ? a.$broadcast("paymentStepError", n[e.error].title, n[e.error].description) : a.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description)
                    }).E409(function(i) {
                        a.utagLink(),
                            i = JSON.parse(i.responseText),
                            i = JSON.parse(i.message),
                            "PurchaseFlowCannotBeModified" == i.error ? a.$broadcast("paymentStepError", n.PurchaseFlowCannotBeModified.title, n.PurchaseFlowCannotBeModified.description) : "CartHasChanged" == i.error ? a.$broadcast("paymentStepError", n.CartHasBeenChanged.title, n.CartHasBeenChanged.description) : "CartPaymentFailure" == i.error ? a.$broadcast("paymentStepError", n.CartPaymentFailure.title, n.CartPaymentFailure.description) : "InventoryUnavailable" == i.error ? i.message ? a.$broadcast("paymentStepError", n.OutOfStockOnSubmitCart.title, i.message) : i.shopping_cart && r.handleOutOfStock(i.shopping_cart) : "PromoCodeError" == i.error ? a.$broadcast("paymentStepError", n.PromoCodeError.title, n.PromoCodeError.description) : "AssurantWarrantyInfoIsRequired" == i.error ? a.$broadcast("paymentStepError", n.AssurantWarrantyInfoIsRequired.title, n.AssurantWarrantyInfoIsRequired.description) : "CartChangedDuringOrderSubmission" == i.error ? e.getCartItems(t.PAGECONTEXT.CART_CHANGED).then(function(e) {
                                a.$broadcast("paymentStepError", n.CartChangedDuringOrderSubmission.title, n.CartChangedDuringOrderSubmission.description),
                                    a.refreshCart(e)
                            }).fail(function() {
                                a.$broadcast("paymentStepError", n.defaultError.title, n.defaultError.description)
                            }) : a.$broadcast("paymentStepError", "Error during place order.", "Please try again after some time.")
                    }).E401(function(e) {
                        a.redirectPostLogin = t.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER,
                            a.promptReLogin(e)
                    }).E400(function(e) {
                        a.utagLink(),
                            a.$broadcast("paymentStepError", n.SubmitCartError.title, n.SubmitCartError.description)
                    }).fail(function(e) {
                        a.utagLink(),
                            a.paymentSource = "",
                            a.$digest(),
                            a.$broadcast("paymentStepError", "Error during place order.", "Please try again after some time.")
                    })
            },
            r.handleOutOfStock = function(e) {
                a.submitAlert = e.user_alerts,
                    a.refreshCart(e)
            },
        a.redirectPostLogin == t.CHECKOUT_LOGIN_REDIRECT.CART_PAYMENT_PLACEORDER && (a.redirectPostLogin = null, a.placeOrder()),
            a.placeOrderEnabledCTA = function() {
                return a.UIStateInfo && a.UIStateInfo.paymentInfo && "card" == a.UIStateInfo.paymentInfo.paymentMethod && !a.UIStateInfo.paymentInfo.isSavedCardSelected ? a.shippingSameAsBilling ? a.UIStateInfo.paymentInfo.isComplete && a.UIStateInfo.shippingInfo.isComplete && a.UIStateInfo.shippingMethod.isComplete && a.billing && "Select" != a.billing.state_or_province: a.UIStateInfo.paymentInfo.isComplete && a.UIStateInfo.shippingInfo.isComplete && a.UIStateInfo.shippingMethod.isComplete && a.billing && "Select" != a.billing.state_or_province && r.address && "Select" != r.address.state_or_province: a.UIStateInfo.paymentInfo.isComplete && a.UIStateInfo.shippingInfo.isComplete && a.UIStateInfo.shippingMethod.isComplete
            },
            a.isCTANotRequired = function() {
                return a.UIStateInfo.paymentInfo.isValid && a.UIStateInfo.shippingInfo.isValid && a.UIStateInfo.shippingMethod.isValid
            },
            r.$on("CTACCError",
                function(e, t) {
                    $("#CCerrorMsgTitle").text(t),
                        a.isCCInlineMsg = !0,
                        p(function() {
                            a.$digest()
                        }),
                        setTimeout(function() {
                                $("html, body").animate({
                                        scrollTop: $("[name='cardForm']").offset().top
                                    },
                                    "slow")
                            },
                            200)
                }),
            r.$on("CTAShippingAddrError",
                function(e, t) {
                    a.shippingSameAsBilling ? ($("#shippingErrorMsgDesc").text(t), a.isShippingInlineMsg = !0) : ($("#newshippingErrorMsgDesc").text(t), a.isNewShippingInlineMsg = !0),
                        r.errorInShippingExists = !0,
                        p(function() {
                            a.$digest()
                        }),
                    a.isCCInlineMsg || a.globalerrorExists || (a.isShippingInlineMsg ? setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $("#shippingErrorMsg").offset().top
                                },
                                "slow")
                        },
                        200) : setTimeout(function() {
                            $("html, body").animate({
                                    scrollTop: $("#newshippingErrorMsgDesc").offset().top
                                },
                                "slow")
                        },
                        200))
                }),
            r.evaluateBillingSameAsShipping = function() {
                if (a.shoppingCart && a.shoppingCart.payment && a.shoppingCart.payment.billing_info && a.shoppingCart.shipping_info) {
                    var e = _.clone(a.shoppingCart.payment.billing_info),
                        t = _.clone(a.shoppingCart.shipping_info);
                    null == a.shoppingCart.payment.billing_info.line2 && delete e.line2,
                    null == a.shoppingCart.shipping_info.line2 && delete t.line2,
                        a.shippingSameAsBilling = JSON.stringify(e) === JSON.stringify(t) ? !0 : !1
                } else a.shippingSameAsBilling = !0
            },
            void 0 == a.shippingSameAsBilling ? (r.evaluateBillingSameAsShipping(), p(function() {
                a.$digest()
            })) : a.shippingSameAsBilling ? (a.shippingSameAsBilling = !0, $("#_sameAsShipAddress").prop("checked", !0), p(function() {
                a.$digest()
            })) : r.address && ($(".add-new-shipping-address").hide(), $(".add_new_addr").show()),
        a.cost && a.cost.total && 0 == a.cost.total.amount && (a.shippingMethodMode = "edit", a.anyPremiumCareSubscriptionCart() || a.cartHasSubscription() || (a.UIStateInfo.paymentInfo.paymentMethod = void 0, a.UIStateInfo.paymentInfo.isValid = !0, a.UIStateInfo.paymentInfo.isChanged = !1, a.UIStateInfo.paymentInfo.isComplete = !0), p(function() {
            a.$digest()
        })),
        "paypal" == a.UIStateInfo.paymentInfo.paymentMethod && "inprocess" == a.UIStateInfo.paymentInfo.paypalStatus && (a.UIStateInfo.paymentInfo.paymentMethod = void 0, a.UIStateInfo.paymentInfo.paypalStatus = !1),
            a.fireSingleClickCheckoutTags = function() {
                if (window.newrelic) {
                    if (!a.isLoggedIn && a.getCartSingleClickDone && a.getPubKeySingleClickDone && r.getShippingOptionsDone) {
                        var e = new Date;
                        newrelic.fireCustomPageLoadTag("singleclickcheckout-pageload-guest", ((e.getTime() - a.checkoutCallTriggerTime) / 1e3).toFixed(2)),
                            a.getCartSingleClickDone = !1,
                            r.getPubKeySingleClickDone = !1,
                            r.getShippingOptionsDone = !1
                    }
                    if (a.isLoggedIn && a.validateTknSingleClickDone && r.singleClickPaymentAdded && r.singleClickAddressAdded) {
                        var e = new Date;
                        newrelic.fireCustomPageLoadTag("singleclickcheckout-pageload-loggedIn", ((e.getTime() - a.checkoutCallTriggerTime) / 1e3).toFixed(2)),
                            a.getCartSingleClickDone = !1,
                            r.getPubKeySingleClickDone = !1,
                            r.getShippingOptionsDone = !1,
                            a.validateTknSingleClickDone = !1,
                            r.singleClickPaymentAdded = !1,
                            r.singleClickAddressAdded = !1
                    }
                }
            }
    }]), checkoutApp.directive("hide", ["$document",
    function(e) {
        return {
            restrict: "A",
            link: function(t, n, i) {
                n.bind("click",
                    function(e) {
                        e.stopPropagation()
                    }),
                    e.bind("click",
                        function(e) { (void 0 == $(e.target).attr("class") || -1 == $(e.target).attr("class").indexOf("zip-code-text")) && t.$apply(i.hide)
                        })
            }
        }
    }]),
    function() {
        checkoutApp.directive("myInputMask",
            function() {
                return {
                    restrict: "AC",
                    link: function(e, t, n) {
                        t.mask(e.$eval(n.mask).mask, {
                            placeholder: e.$eval(n.mask).placeholder,
                            reverse: e.$eval(n.mask).reverse
                        }),
                            t.on("change",
                                function() {
                                    e[n.ngModel] = t.val()
                                })
                    }
                }
            })
    } (), checkoutApp.directive("onFormChange", ["$parse",
    function(e) {
        return {
            require: "form",
            link: function(t, n, i) {
                var r = e(i.onFormChange);
                n.on("keydown",
                    function() {
                        r(t)
                    })
            }
        }
    }]), checkoutApp.factory("updateUtilities", ["$filter", "$rootScope", "$log", "errors",
    function(e, t, n, i) {
        return {
            formatDateOfBirth: function(t) {
                var n = new Date(t);
                return e("date")(n, "yyyy-MM-dd")
            },
            formatDateString: function(t, n) {
                var i = new Date(t);
                return e("date")(i, n)
            },
            displayAddToCartErrorMessage: function(e) {
                e = JSON.parse(e.responseText),
                    "ShoppingCartSchemaError" === e.error ? t.$broadcast("cartStepError", i.ShoppingCartSchemaError.title, i.ShoppingCartSchemaError.description) : t.$broadcast("cartStepError", i.AddToCartError.title, i.AddToCartError.description)
            },
            formatPhoneNumber: function(e) {
                return 10 === e.length ? e.substring(0, 3) + "-" + e.substring(3, 6) + "-" + e.substring(6) : e.substring(0, 3) + "-" + e.substring(4, 7) + "-" + e.substring(8)
            },
            formOnFocus: function(e, t) {
                t && t.target.focus(),
                    e["class"] = "focus",
                    e.focus = !0
            },
            formOnBlur: function(e) {
                e.$viewValue || (e["class"] = "blur")
            },
            resetInputField: function(e, t) {
                e.$setPristine(!0)
            },
            wrapFn: function(e, n, i) {
                return function() {
                    t.promoMsg = "",
                    n || ($(".generic-error").hide(), window.SCart.isEcomCheckout() || $.cookie("checkoutv2", !0, {
                        path: "/us"
                    }));
                    var r = Array.prototype.slice.call(arguments),
                        a = e.apply(i || this, r);
                    return a
                }
            },
            wrapObj: function(e) {
                var t = this,
                    n = e.wrapExclude || [];
                return _.forEach(e,
                    function(i, r) {
                        if ("function" == typeof i) for (var a = 0; a < n.length; a++) {
                            if (n[a] == r) {
                                e[r] = t.wrapFn(i, !0);
                                break
                            }
                            e[r] = t.wrapFn(i, !1)
                        }
                    }),
                    e
            },
            suppressUpSellIt: function() {
                t.isLoggedIn === !0 && (window.suppressUpsellit = !0)
            }
        }
    }]), checkoutApp.factory("cryptoUtil", ["$filter", "$rootScope", "$log",
    function(e, t, n) {
        "use strict";
        return {
            encryptCardInfo: function(e) {
                var n = {};
                n.expiration_year = "20" + e.expiration.split("/")[1],
                    n.expiration_month = e.expiration.split("/")[0],
                    n.card_number = e.card_number + "",
                    n.security_code = e.security_code,
                    n.card_type = "Visa";
                var i = t.shoppingCartPubKey,
                    r = forge.pki.publicKeyFromPem(i),
                    a = forge.util.createBuffer(JSON.stringify(n), "utf8"),
                    o = a.getBytes(),
                    s = r.encrypt(o, "RSAES-PKCS1-V1_5");
                return forge.util.encode64(s)
            },
            encryptFinancingInfo: function(e) {
                var n, i = {},
                    r = {};
                i.first_name = e.first_name,
                e.middle_initial && (i.middle_initial = e.middle_initial),
                    i.last_name = e.last_name,
                    i.address1 = e.address1,
                e.address2 && (i.address2 = e.address2),
                    i.city = e.city,
                    i.state = e.state,
                    i.postal_code = e.postal_code,
                    i.date_of_birth = e.date_of_birth.split("/")[2] + "-" + e.date_of_birth.split("/")[0] + "-" + e.date_of_birth.split("/")[1],
                    e.home_phone_number = e.home_phone_number.replace(/ /g, ""),
                    i.home_phone_area_code = e.home_phone_number.slice(0, 3),
                    i.home_phone_number = e.home_phone_number.slice(3, 10),
                    i.monthly_income = Number(e.monthly_income.replace("$", "")),
                    i.monthly_income = Math.ceil(i.monthly_income / 12),
                    i.monthly_rent_or_mortgage = Number(e.monthly_rent_or_mortgage.replace("$", "")),
                    i.is_rent = "rent" == e.is_rent ? !0 : !1,
                    i.occupation = e.occupation,
                    i.email = e.email,
                    r = {
                        td_electronic_comms_tc: e.userTerms1,
                        td_privacy_notice_tc: e.userTerms2,
                        samsung_financing_program_tc: e.userTerms3
                    },
                "string" == typeof e.ssn && (n = e.ssn.replace(/-/g, "")),
                    n = {
                        ssn: n
                    };
                var a = t.financingPubKey,
                    o = forge.pki.publicKeyFromPem(a),
                    s = forge.util.createBuffer(JSON.stringify(n), "utf8"),
                    c = s.getBytes(),
                    l = o.encrypt(c, "RSAES-PKCS1-V1_5"),
                    d = forge.util.encode64(l);
                return i = {
                    td_bank_credit_application: i,
                    td_bank_credit_application_pii_encrypted: d,
                    td_bank_tc: r
                }
            },
            encryptTDAccount: function(e) {
                var n = {};
                n.postal_code = e.postal_code,
                    n.last_4_of_ssn = e.last_4_of_ssn;
                var i = t.financingPubKey,
                    r = forge.pki.publicKeyFromPem(i),
                    a = forge.util.createBuffer(JSON.stringify(n), "utf8"),
                    o = a.getBytes(),
                    s = r.encrypt(o, "RSAES-PKCS1-V1_5");
                return forge.util.encode64(s)
            }
        }
    }]), checkoutApp.factory("calendarUtil", ["$rootScope", "$timeout", "updateUtilities", "constants",
    function(e, t, n, i) {
        function r(t) {
            for (var n = e.availableDateRanges[0], i = 0, r = 0; r < e.availableDateRanges.length; r++) {
                var a = e.availableDateRanges[r],
                    o = new Date(a.start_date),
                    s = new Date(a.end_date),
                    c = new Date(t);
                if (c.getTime() == o.getTime()) return a;
                c > o && (s.getTime() - c.getTime() > i || s.getTime() - c.getTime() == 0) && (i = s.getTime() - c.getTime(), n = a)
            }
            return n
        }
        return {
            updateCalendarDates: function() {
                $("#datepicker").datepicker({
                    buttontrigger: $(".ui-datepicker-trigger"),
                    dateFormat: "yy/mm/dd",
                    beforeShow: function(n, i) {
                        $(".ha-delivery-schedule-calendar").append($("#ui-datepicker-div")),
                            $("#ui-datepicker-div").hide();
                        var r = $(this).val();
                        r || $(this).val(e.scheduleForm.selectedDate),
                            e.enableScheduleForm = !0,
                            t(function() {
                                e.$digest()
                            })
                    },
                    beforeShowDay: function(t) {
                        var r = n.formatDateString(t, i.DATE_FORMAT),
                            a = new Date(r),
                            o = $(this).val();
                        if (o) {
                            var s = o.split("-");
                            if (s.length > 0) {
                                if (r == s[0].trim()) return [!0, "ui-selected-date", ""];
                                if (s[1]) {
                                    var c = new Date(s[0].trim()),
                                        l = new Date(s[1].trim());
                                    if (a >= c && l >= a) return [!0, "ui-selected-date", ""]
                                }
                            }
                        }
                        if (e.availableDates.length > 0) {
                            if ( - 1 != $.inArray(r, e.availableDates)) return [!0, "ui-selectable-date", ""]
                        } else if (e.availableDateRanges.length > 0) for (var d = 0; d < e.availableDateRanges.length; d++) {
                            var p = e.availableDateRanges[d],
                                c = new Date(p.start_date),
                                l = new Date(p.end_date);
                            if (a >= c && l >= a) return [!0, "ui-selectable-date", ""]
                        }
                        return [!1]
                    },
                    onSelect: function(a) {
                        var o = {
                            link_cat: "schedule home delivery",
                            link_id: "ha_order_complete_schedule_home_delivery",
                            link_meta: "link_name:schedule home deliver",
                            link_position: "thankyou"
                        };
                        if (e.haUtagLinkFire(o), e.availableDates.length > 0) $(this).val(a);
                        else if (e.availableDateRanges.length > 0) {
                            var s = r(a);
                            $(this).val(n.formatDateString(s.start_date, i.DATE_FORMAT) + " - " + n.formatDateString(s.end_date, i.DATE_FORMAT)),
                                $(this).data().datepicker.inline = !0
                        }
                        e.scheduleForm.selectedDate = $(this).val(),
                            t(function() {
                                e.$digest()
                            }),
                            $(this).data().datepicker.inline = !1
                    },
                    onClose: function() {
                        $(this).data().datepicker.inline = !1
                    }
                })
            },
            getDateRangeForSelectedDate: r
        }
    }]); bleDateRanges.length; d++) {
    var p = e.availableDateRanges[d],
        c = new Date(p.start_date),
        l = new Date(p.end_date);
    if (a >= c && l >= a) return [!0, "ui-selectable-date", ""]
}
return [!1]
},
onSelect: function(a) {
    var o = {
        link_cat: "schedule home delivery",
        link_id: "ha_order_complete_schedule_home_delivery",
        link_meta: "link_name:schedule home deliver",
        link_position: "thankyou"
    };
    if (e.haUtagLinkFire(o), e.availableDates.length > 0) $(this).val(a);
    else if (e.availableDateRanges.length > 0) {
        var s = r(a);
        $(this).val(n.formatDateString(s.start_date, i.DATE_FORMAT) + " - " + n.formatDateString(s.end_date, i.DATE_FORMAT)),
            $(this).data().datepicker.inline = !0
    }
    e.scheduleForm.selectedDate = $(this).val(),
        t(function() {
            e.$digest()
        }),
        $(this).data().datepicker.inline = !1
},
onClose: function() {
    $(this).data().datepicker.inline = !1
}
})
},
getDateRangeForSelectedDate: r
}
}]);